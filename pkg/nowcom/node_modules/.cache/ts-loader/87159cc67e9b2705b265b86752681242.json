{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--15-3!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/pod-security-admission.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/pod-security-admission.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/babel.config.js","mtime":1716430386791},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgcmVkdWNlLCBmaWx0ZXIsIGtleXMgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgeyBQU0FMYWJlbFByZWZpeCwgUFNBTGFiZWxzTmFtZXNwYWNlcyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcG9kLXNlY3VyaXR5LWFkbWlzc2lvbic7CmltcG9ydCB7IGNhbWVsVG9UaXRsZSB9IGZyb20gJ0BzaGVsbC91dGlscy9zdHJpbmcnOwovKioKICogUmV0dXJuIFBTQSBsYWJlbHMgcHJlc2VudCBpbiB0aGUgcmVzb3VyY2UKICogQHJldHVybnMgc3RyaW5nW10KICovCmV4cG9ydCBjb25zdCBnZXRQU0FMYWJlbHMgPSByZXNvdXJjZSA9PiB7CiAgdmFyIF9yZXNvdXJjZSRtZXRhZGF0YTsKICByZXR1cm4gZmlsdGVyKGtleXMocmVzb3VyY2UgPT09IG51bGwgfHwgcmVzb3VyY2UgPT09IHZvaWQgMCB8fCAoX3Jlc291cmNlJG1ldGFkYXRhID0gcmVzb3VyY2UubWV0YWRhdGEpID09PSBudWxsIHx8IF9yZXNvdXJjZSRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc291cmNlJG1ldGFkYXRhLmxhYmVscyksIGtleSA9PiBQU0FMYWJlbHNOYW1lc3BhY2VzLmluY2x1ZGVzKGtleSkpOwp9OwovKioKICogUmV0dXJuIGJvb2xlYW4gdmFsdWUgaWYgdGhlIGxhYmVsIGlzIGEgUFNBIGxhYmVsCiAqIEByZXR1cm5zIEJvb2xlYW4KICovCmV4cG9ydCBjb25zdCBoYXNQU0FMYWJlbHMgPSByZXNvdXJjZSA9PiBnZXRQU0FMYWJlbHMocmVzb3VyY2UpLmxlbmd0aCA+IDA7Ci8qKgogKiBHZW5lcmF0ZSB0b29sdGlwcyBkaWN0aW9uYXJ5IGZyb20gYSBnaXZlbiBQU0EgbmFtZXNwYWNlZCBsYWJlbCBwYWlyIG9mIGtleSBhbmQgdmFsdWVzCiAqLwpleHBvcnQgY29uc3QgZ2V0UFNBVG9vbHRpcHNEZXNjcmlwdGlvbiA9IHJlc291cmNlID0+IHsKICB2YXIgX3Jlc291cmNlJG1ldGFkYXRhMjsKICByZXR1cm4gcmVkdWNlKHJlc291cmNlID09PSBudWxsIHx8IHJlc291cmNlID09PSB2b2lkIDAgfHwgKF9yZXNvdXJjZSRtZXRhZGF0YTIgPSByZXNvdXJjZS5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3Jlc291cmNlJG1ldGFkYXRhMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc291cmNlJG1ldGFkYXRhMi5sYWJlbHMsIChhY2MsIHZhbHVlLCBrZXkpID0+IHsKICAgIHZhciBfcmVzb3VyY2UkbWV0YWRhdGEzOwogICAgY29uc3QgaXNQU0EgPSBQU0FMYWJlbHNOYW1lc3BhY2VzLmluY2x1ZGVzKGtleSk7CiAgICAvLyBSZXRyaWV2ZSB2ZXJzaW9uIGZyb20gcGFpcmVkIGxhYmVsIGVuZGluZyB3aXRoIGAtdmVyc2lvbmAKICAgIGNvbnN0IHN1ZmZpeCA9ICctdmVyc2lvbic7CiAgICBjb25zdCBpc1ZlcnNpb25MYWJlbCA9IGtleS5pbmNsdWRlcyhzdWZmaXgpOwogICAgY29uc3QgdmVyc2lvbkxhYmVsID0gcmVzb3VyY2UgPT09IG51bGwgfHwgcmVzb3VyY2UgPT09IHZvaWQgMCB8fCAoX3Jlc291cmNlJG1ldGFkYXRhMyA9IHJlc291cmNlLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfcmVzb3VyY2UkbWV0YWRhdGEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzb3VyY2UkbWV0YWRhdGEzLmxhYmVsc1tgJHtrZXl9JHtzdWZmaXh9YF07CiAgICBjb25zdCB2ZXJzaW9uID0gdmVyc2lvbkxhYmVsIHx8ICdsYXRlc3QnOwogICAgLy8gQWRkIFNQQSBsYWJlbHMgYW5kIGRpc2NhcmQgcGFpcmVkIHZlcnNpb24gbGFiZWwKICAgIHJldHVybiBpc1BTQSAmJiAhaXNWZXJzaW9uTGFiZWwgPyB7CiAgICAgIC4uLmFjYywKICAgICAgW2tleV06IGAke2NhbWVsVG9UaXRsZShrZXkucmVwbGFjZShQU0FMYWJlbFByZWZpeCwgJycpKX0gJHtjYW1lbFRvVGl0bGUodmFsdWUpfSAoJHt2ZXJzaW9ufSlgCiAgICB9IDogYWNjOwogIH0sIHt9KTsKfTs="},{"version":3,"names":["reduce","filter","keys","PSALabelPrefix","PSALabelsNamespaces","camelToTitle","getPSALabels","resource","_resource$metadata","metadata","labels","key","includes","hasPSALabels","length","getPSATooltipsDescription","_resource$metadata2","acc","value","_resource$metadata3","isPSA","suffix","isVersionLabel","versionLabel","version","replace"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/pod-security-admission.ts"],"sourcesContent":["import { reduce, filter, keys } from 'lodash';\nimport { PSALabelPrefix, PSALabelsNamespaces } from '@shell/config/pod-security-admission';\nimport { camelToTitle } from '@shell/utils/string';\nimport { PSA } from '@shell/types/pod-security-admission';\n\n/**\n * Return PSA labels present in the resource\n * @returns string[]\n */\nexport const getPSALabels = (resource: PSA): string[] => filter(keys(resource?.metadata?.labels), (key) => PSALabelsNamespaces.includes(key));\n\n/**\n * Return boolean value if the label is a PSA label\n * @returns Boolean\n */\nexport const hasPSALabels = (resource: PSA): boolean => getPSALabels(resource).length > 0;\n\n/**\n * Generate tooltips dictionary from a given PSA namespaced label pair of key and values\n */\nexport const getPSATooltipsDescription = (resource: PSA): Record<string, string> => reduce(\n  resource?.metadata?.labels,\n  (acc, value, key) => {\n    const isPSA = PSALabelsNamespaces.includes(key);\n\n    // Retrieve version from paired label ending with `-version`\n    const suffix = '-version';\n    const isVersionLabel = key.includes(suffix);\n    const versionLabel = resource?.metadata?.labels[`${ key }${ suffix }`];\n    const version = versionLabel || 'latest';\n\n    // Add SPA labels and discard paired version label\n    return isPSA && !isVersionLabel ? {\n      ...acc,\n      [key]: `${ camelToTitle(key.replace(PSALabelPrefix, '')) } ${ camelToTitle(value) } (${ version })`\n    } : acc;\n  },\n  { }\n);\n"],"mappings":"AAAA,SAASA,MAAM,EAAEC,MAAM,EAAEC,IAAI,QAAQ,QAAQ;AAC7C,SAASC,cAAc,EAAEC,mBAAmB,QAAQ,sCAAsC;AAC1F,SAASC,YAAY,QAAQ,qBAAqB;AAGlD;;;;AAIA,OAAO,MAAMC,YAAY,GAAIC,QAAa;EAAA,IAAAC,kBAAA;EAAA,OAAeP,MAAM,CAACC,IAAI,CAACK,QAAQ,aAARA,QAAQ,gBAAAC,kBAAA,GAARD,QAAQ,CAAEE,QAAQ,cAAAD,kBAAA,uBAAlBA,kBAAA,CAAoBE,MAAM,CAAC,EAAGC,GAAG,IAAKP,mBAAmB,CAACQ,QAAQ,CAACD,GAAG,CAAC,CAAC;AAAA;AAE7I;;;;AAIA,OAAO,MAAME,YAAY,GAAIN,QAAa,IAAcD,YAAY,CAACC,QAAQ,CAAC,CAACO,MAAM,GAAG,CAAC;AAEzF;;;AAGA,OAAO,MAAMC,yBAAyB,GAAIR,QAAa;EAAA,IAAAS,mBAAA;EAAA,OAA6BhB,MAAM,CACxFO,QAAQ,aAARA,QAAQ,gBAAAS,mBAAA,GAART,QAAQ,CAAEE,QAAQ,cAAAO,mBAAA,uBAAlBA,mBAAA,CAAoBN,MAAM,EAC1B,CAACO,GAAG,EAAEC,KAAK,EAAEP,GAAG,KAAI;IAAA,IAAAQ,mBAAA;IAClB,MAAMC,KAAK,GAAGhB,mBAAmB,CAACQ,QAAQ,CAACD,GAAG,CAAC;IAE/C;IACA,MAAMU,MAAM,GAAG,UAAU;IACzB,MAAMC,cAAc,GAAGX,GAAG,CAACC,QAAQ,CAACS,MAAM,CAAC;IAC3C,MAAME,YAAY,GAAGhB,QAAQ,aAARA,QAAQ,gBAAAY,mBAAA,GAARZ,QAAQ,CAAEE,QAAQ,cAAAU,mBAAA,uBAAlBA,mBAAA,CAAoBT,MAAM,CAAC,GAAIC,GAAI,GAAIU,MAAO,EAAE,CAAC;IACtE,MAAMG,OAAO,GAAGD,YAAY,IAAI,QAAQ;IAExC;IACA,OAAOH,KAAK,IAAI,CAACE,cAAc,GAAG;MAChC,GAAGL,GAAG;MACN,CAACN,GAAG,GAAG,GAAIN,YAAY,CAACM,GAAG,CAACc,OAAO,CAACtB,cAAc,EAAE,EAAE,CAAC,CAAE,IAAKE,YAAY,CAACa,KAAK,CAAE,KAAMM,OAAQ;KACjG,GAAGP,GAAG;EACT,CAAC,EACD,EAAG,CACJ;AAAA"}]}