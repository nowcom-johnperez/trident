{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--15-3!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/settings.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/settings.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/babel.config.js","mtime":1716430386791},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgTUFOQUdFTUVOVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBERUZBVUxUX1BFUkZfU0VUVElORywgU0VUVElORyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2V0dGluZ3MnOwpleHBvcnQgY29uc3QgZmV0Y2hPckNyZWF0ZVNldHRpbmcgPSBhc3luYyAoc3RvcmUsIGlkLCB2YWwsIHNhdmUgPSB0cnVlKSA9PiB7CiAgbGV0IHNldHRpbmc7CiAgdHJ5IHsKICAgIHNldHRpbmcgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kJywgewogICAgICB0eXBlOiBNQU5BR0VNRU5ULlNFVFRJTkcsCiAgICAgIGlkCiAgICB9KTsKICB9IGNhdGNoIChfYSkgewogICAgY29uc3Qgc2NoZW1hID0gc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShNQU5BR0VNRU5ULlNFVFRJTkcpOwogICAgY29uc3QgdXJsID0gc2NoZW1hLmxpbmtGb3IoJ2NvbGxlY3Rpb24nKTsKICAgIHNldHRpbmcgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9jcmVhdGUnLCB7CiAgICAgIHR5cGU6IE1BTkFHRU1FTlQuU0VUVElORywKICAgICAgbWV0YWRhdGE6IHsKICAgICAgICBuYW1lOiBpZAogICAgICB9LAogICAgICB2YWx1ZTogdmFsLAogICAgICBkZWZhdWx0OiB2YWwgfHwgJycKICAgIH0pOwogICAgaWYgKHNhdmUpIHsKICAgICAgYXdhaXQgc2V0dGluZy5zYXZlKHsKICAgICAgICB1cmwKICAgICAgfSk7CiAgICB9CiAgfQogIHJldHVybiBzZXR0aW5nOwp9OwovKioKICAqIEZldGNoIGEgc3BlY2lmaWMgc2V0dGluZyB0aGF0IG1pZ2h0IG5vdCBleGlzdAogICogV2UgZmV0Y2ggYWxsIHNldHRpbmdzIC0gcmVhbGl0eSBpcyBSYW5jaGVyIHdpbGwgaGF2ZSBkb25lIHRoaXMgYWxyZWFkeSwgc28gdGhlcmUncyBubyBvdmVyaGVhZCBpbiBkb2luZwogICogdGhpcyAtIGJ1dCBpZiB3ZSBmZXRjaCBhIHNwZWNpZmljIHNldHRpbmcgdGhhdCBkb2VzIG5vdCBleGlzdCwgd2Ugd2lsbCBnZXQgYSA0MDQsIHdoaWNoIHdlIGRvbid0IHdhbnQKICAqLwpleHBvcnQgY29uc3QgZmV0Y2hTZXR0aW5nID0gYXN5bmMgKHN0b3JlLCBpZCkgPT4gewogIGNvbnN0IGFsbCA9IGF3YWl0IHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICB0eXBlOiBNQU5BR0VNRU5ULlNFVFRJTkcKICB9KTsKICBjb25zdCBzZXR0aW5nID0gKGFsbCB8fCBbXSkuZmluZChzZXR0aW5nID0+IHNldHRpbmcuaWQgPT09IGlkKTsKICByZXR1cm4gc2V0dGluZzsKfTsKZXhwb3J0IGNvbnN0IHNldFNldHRpbmcgPSBhc3luYyAoc3RvcmUsIGlkLCB2YWwpID0+IHsKICBjb25zdCBzZXR0aW5nID0gYXdhaXQgZmV0Y2hPckNyZWF0ZVNldHRpbmcoc3RvcmUsIGlkLCB2YWwsIGZhbHNlKTsKICBzZXR0aW5nLnZhbHVlID0gdmFsOwogIGF3YWl0IHNldHRpbmcuc2F2ZSgpOwogIHJldHVybiBzZXR0aW5nOwp9OwpleHBvcnQgY29uc3QgZ2V0UGVyZm9ybWFuY2VTZXR0aW5nID0gcm9vdEdldHRlcnMgPT4gewogIGNvbnN0IHBlcmZTZXR0aW5nUmVzb3VyY2UgPSByb290R2V0dGVyc1snbWFuYWdlbWVudC9ieUlkJ10oTUFOQUdFTUVOVC5TRVRUSU5HLCBTRVRUSU5HLlVJX1BFUkZPUk1BTkNFKTsKICBsZXQgcGVyZlNldHRpbmcgPSB7fTsKICBpZiAocGVyZlNldHRpbmdSZXNvdXJjZSA9PT0gbnVsbCB8fCBwZXJmU2V0dGluZ1Jlc291cmNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBwZXJmU2V0dGluZ1Jlc291cmNlLnZhbHVlKSB7CiAgICB0cnkgewogICAgICBwZXJmU2V0dGluZyA9IEpTT04ucGFyc2UocGVyZlNldHRpbmdSZXNvdXJjZS52YWx1ZSk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGNvbnNvbGUud2FybigndWktcGVyZm9ybWFuY2Ugc2V0dGluZyBjb250YWlucyBpbnZhbGlkIGRhdGEnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICB9CiAgfQogIC8vIFN0YXJ0IHdpdGggdGhlIGRlZmF1bHQgYW5kIG92ZXJ3cml0ZSB0aGUgdmFsdWVzIGZyb20gdGhlIHNldHRpbmcgLSBlbnN1cmVzIHdlIGhhdmUgZGVmYXVsdHMgZm9yIG5ld2x5IGFkZGVkIG9wdGlvbnMKICByZXR1cm4gT2JqZWN0LmFzc2lnbihERUZBVUxUX1BFUkZfU0VUVElORywgcGVyZlNldHRpbmcgfHwge30pOwp9Ow=="},{"version":3,"names":["MANAGEMENT","DEFAULT_PERF_SETTING","SETTING","fetchOrCreateSetting","store","id","val","save","setting","dispatch","type","_a","schema","getters","url","linkFor","metadata","name","value","default","fetchSetting","all","find","setSetting","getPerformanceSetting","rootGetters","perfSettingResource","UI_PERFORMANCE","perfSetting","JSON","parse","e","console","warn","Object","assign"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/settings.ts"],"sourcesContent":["import { MANAGEMENT } from '@shell/config/types';\nimport { Store } from 'vuex';\nimport { DEFAULT_PERF_SETTING, PerfSettings, SETTING } from '@shell/config/settings';\n\nexport const fetchOrCreateSetting = async(store: Store<any>, id: string, val: string, save = true): Promise<any> => {\n  let setting;\n\n  try {\n    setting = await store.dispatch('management/find', { type: MANAGEMENT.SETTING, id });\n  } catch {\n    const schema = store.getters['management/schemaFor'](MANAGEMENT.SETTING);\n    const url = schema.linkFor('collection');\n\n    setting = await store.dispatch('management/create', {\n      type: MANAGEMENT.SETTING, metadata: { name: id }, value: val, default: val || ''\n    });\n    if ( save ) {\n      await setting.save({ url });\n    }\n  }\n\n  return setting;\n};\n\n/**\n  * Fetch a specific setting that might not exist\n  * We fetch all settings - reality is Rancher will have done this already, so there's no overhead in doing\n  * this - but if we fetch a specific setting that does not exist, we will get a 404, which we don't want\n  */\nexport const fetchSetting = async(store: Store<any>, id: string): Promise<any> => {\n  const all = await store.dispatch('management/findAll', { type: MANAGEMENT.SETTING });\n  const setting = (all || []).find((setting: any) => setting.id === id);\n\n  return setting;\n};\n\nexport const setSetting = async(store: Store<any>, id: string, val: string): Promise<any> => {\n  const setting = await fetchOrCreateSetting(store, id, val, false);\n\n  setting.value = val;\n  await setting.save();\n\n  return setting;\n};\n\nexport const getPerformanceSetting = (rootGetters: Record<string, (arg0: string, arg1: string) => any>): PerfSettings => {\n  const perfSettingResource = rootGetters['management/byId'](MANAGEMENT.SETTING, SETTING.UI_PERFORMANCE);\n  let perfSetting = {};\n\n  if (perfSettingResource?.value) {\n    try {\n      perfSetting = JSON.parse(perfSettingResource.value);\n    } catch (e) {\n      console.warn('ui-performance setting contains invalid data'); // eslint-disable-line no-console\n    }\n  }\n\n  // Start with the default and overwrite the values from the setting - ensures we have defaults for newly added options\n  return Object.assign(DEFAULT_PERF_SETTING, perfSetting || {});\n};\n"],"mappings":"AAAA,SAASA,UAAU,QAAQ,qBAAqB;AAEhD,SAASC,oBAAoB,EAAgBC,OAAO,QAAQ,wBAAwB;AAEpF,OAAO,MAAMC,oBAAoB,GAAG,MAAAA,CAAMC,KAAiB,EAAEC,EAAU,EAAEC,GAAW,EAAEC,IAAI,GAAG,IAAI,KAAkB;EACjH,IAAIC,OAAO;EAEX,IAAI;IACFA,OAAO,GAAG,MAAMJ,KAAK,CAACK,QAAQ,CAAC,iBAAiB,EAAE;MAAEC,IAAI,EAAEV,UAAU,CAACE,OAAO;MAAEG;IAAE,CAAE,CAAC;GACpF,CAAC,OAAAM,EAAA,EAAM;IACN,MAAMC,MAAM,GAAGR,KAAK,CAACS,OAAO,CAAC,sBAAsB,CAAC,CAACb,UAAU,CAACE,OAAO,CAAC;IACxE,MAAMY,GAAG,GAAGF,MAAM,CAACG,OAAO,CAAC,YAAY,CAAC;IAExCP,OAAO,GAAG,MAAMJ,KAAK,CAACK,QAAQ,CAAC,mBAAmB,EAAE;MAClDC,IAAI,EAAEV,UAAU,CAACE,OAAO;MAAEc,QAAQ,EAAE;QAAEC,IAAI,EAAEZ;MAAE,CAAE;MAAEa,KAAK,EAAEZ,GAAG;MAAEa,OAAO,EAAEb,GAAG,IAAI;KAC/E,CAAC;IACF,IAAKC,IAAI,EAAG;MACV,MAAMC,OAAO,CAACD,IAAI,CAAC;QAAEO;MAAG,CAAE,CAAC;;;EAI/B,OAAON,OAAO;AAChB,CAAC;AAED;;;;;AAKA,OAAO,MAAMY,YAAY,GAAG,MAAAA,CAAMhB,KAAiB,EAAEC,EAAU,KAAkB;EAC/E,MAAMgB,GAAG,GAAG,MAAMjB,KAAK,CAACK,QAAQ,CAAC,oBAAoB,EAAE;IAAEC,IAAI,EAAEV,UAAU,CAACE;EAAO,CAAE,CAAC;EACpF,MAAMM,OAAO,GAAG,CAACa,GAAG,IAAI,EAAE,EAAEC,IAAI,CAAEd,OAAY,IAAKA,OAAO,CAACH,EAAE,KAAKA,EAAE,CAAC;EAErE,OAAOG,OAAO;AAChB,CAAC;AAED,OAAO,MAAMe,UAAU,GAAG,MAAAA,CAAMnB,KAAiB,EAAEC,EAAU,EAAEC,GAAW,KAAkB;EAC1F,MAAME,OAAO,GAAG,MAAML,oBAAoB,CAACC,KAAK,EAAEC,EAAE,EAAEC,GAAG,EAAE,KAAK,CAAC;EAEjEE,OAAO,CAACU,KAAK,GAAGZ,GAAG;EACnB,MAAME,OAAO,CAACD,IAAI,EAAE;EAEpB,OAAOC,OAAO;AAChB,CAAC;AAED,OAAO,MAAMgB,qBAAqB,GAAIC,WAAgE,IAAkB;EACtH,MAAMC,mBAAmB,GAAGD,WAAW,CAAC,iBAAiB,CAAC,CAACzB,UAAU,CAACE,OAAO,EAAEA,OAAO,CAACyB,cAAc,CAAC;EACtG,IAAIC,WAAW,GAAG,EAAE;EAEpB,IAAIF,mBAAmB,aAAnBA,mBAAmB,uBAAnBA,mBAAmB,CAAER,KAAK,EAAE;IAC9B,IAAI;MACFU,WAAW,GAAGC,IAAI,CAACC,KAAK,CAACJ,mBAAmB,CAACR,KAAK,CAAC;KACpD,CAAC,OAAOa,CAAC,EAAE;MACVC,OAAO,CAACC,IAAI,CAAC,8CAA8C,CAAC,CAAC,CAAC;;;EAIlE;EACA,OAAOC,MAAM,CAACC,MAAM,CAAClC,oBAAoB,EAAE2B,WAAW,IAAI,EAAE,CAAC;AAC/D,CAAC"}]}