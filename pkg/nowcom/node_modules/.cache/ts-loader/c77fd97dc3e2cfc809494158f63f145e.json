{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--15-3!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/async.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/async.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/babel.config.js","mtime":1716430386791},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGNvbnN0IHdhaXRGb3IgPSAodGVzdEZuLCBtc2cgPSAnJywgdGltZW91dE1zID0gMzAwMDAwMCwgaW50ZXJ2YWxNcyA9IDUwMCwgbG9nID0gZmFsc2UpID0+IHsKICBnYXRlZExvZygnU3RhcnRpbmcgd2FpdCBmb3InLCBtc2cpOwogIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7CiAgICBpZiAodGVzdEZuKCkpIHsKICAgICAgZ2F0ZWRMb2coJ1dhaXQgZm9yJywgbXNnIHx8ICd1bmtub3duJywgJ2RvbmUgaW1tZWRpYXRlbHknKTsKICAgICAgcmVzb2x2ZSh0aGlzKTsKICAgIH0KICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgZ2F0ZWRMb2coJ1dhaXQgZm9yJywgbXNnLCAndGltZWQgb3V0Jyk7CiAgICAgIGNsZWFySW50ZXJ2YWwoaW50ZXJ2YWwpOwogICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgIGlmIChtc2cpIHsKICAgICAgICByZWplY3QobmV3IEVycm9yKGBGYWlsZWQgd2FpdGluZyBmb3I6ICR7bXNnfWApKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYHdhaXRGb3IgdGltZWQgb3V0IGFmdGVyICR7dGltZW91dE1zIC8gMTAwMH0gc2Vjb25kc2ApOwogICAgICB9CiAgICB9LCB0aW1lb3V0TXMpOwogICAgY29uc3QgaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgIGlmICh0ZXN0Rm4oKSkgewogICAgICAgIGdhdGVkTG9nKCdXYWl0IGZvcicsIG1zZywgJ2RvbmUnKTsKICAgICAgICBjbGVhckludGVydmFsKGludGVydmFsKTsKICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7CiAgICAgICAgcmVzb2x2ZSh0aGlzKTsKICAgICAgfSBlbHNlIGlmIChtc2cpIHsKICAgICAgICBnYXRlZExvZygnV2FpdCBmb3InLCBtc2csICdub3QgZG9uZSB5ZXQnKTsKICAgICAgfQogICAgfSwgaW50ZXJ2YWxNcyk7CiAgfSk7CiAgZnVuY3Rpb24gZ2F0ZWRMb2coLi4uYXJncykgewogICAgaWYgKGxvZykgewogICAgICBjb25zb2xlLmxvZyguLi5hcmdzKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["waitFor","testFn","msg","timeoutMs","intervalMs","log","gatedLog","Promise","resolve","reject","timeout","setTimeout","clearInterval","interval","clearTimeout","Error","setInterval","args","console"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/async.ts"],"sourcesContent":["export const waitFor = (testFn: Function, msg = '', timeoutMs = 3000000, intervalMs = 500, log = false): Promise<unknown> => {\n  gatedLog('Starting wait for', msg);\n\n  return new Promise((resolve, reject) => {\n    if (testFn()) {\n      gatedLog('Wait for', msg || 'unknown', 'done immediately');\n      resolve(this);\n    }\n    const timeout = setTimeout(() => {\n      gatedLog('Wait for', msg, 'timed out');\n      clearInterval(interval);\n      clearTimeout(timeout);\n      if (msg) {\n        reject(new Error(`Failed waiting for: ${ msg }`));\n      } else {\n        throw new Error(`waitFor timed out after ${ timeoutMs / 1000 } seconds`);\n      }\n    }, timeoutMs);\n    const interval = setInterval(() => {\n      if ( testFn() ) {\n        gatedLog('Wait for', msg, 'done');\n        clearInterval(interval);\n        clearTimeout(timeout);\n        resolve(this);\n      } else if (msg) {\n        gatedLog('Wait for', msg, 'not done yet');\n      }\n    }, intervalMs);\n  });\n\n  function gatedLog(...args: any[]) {\n    if (log) {\n      console.log(...args); // eslint-disable-line no-console\n    }\n  }\n};\n"],"mappings":"AAAA,OAAO,MAAMA,OAAO,GAAGA,CAACC,MAAgB,EAAEC,GAAG,GAAG,EAAE,EAAEC,SAAS,GAAG,OAAO,EAAEC,UAAU,GAAG,GAAG,EAAEC,GAAG,GAAG,KAAK,KAAsB;EAC1HC,QAAQ,CAAC,mBAAmB,EAAEJ,GAAG,CAAC;EAElC,OAAO,IAAIK,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAI;IACrC,IAAIR,MAAM,EAAE,EAAE;MACZK,QAAQ,CAAC,UAAU,EAAEJ,GAAG,IAAI,SAAS,EAAE,kBAAkB,CAAC;MAC1DM,OAAO,CAAC,IAAI,CAAC;;IAEf,MAAME,OAAO,GAAGC,UAAU,CAAC,MAAK;MAC9BL,QAAQ,CAAC,UAAU,EAAEJ,GAAG,EAAE,WAAW,CAAC;MACtCU,aAAa,CAACC,QAAQ,CAAC;MACvBC,YAAY,CAACJ,OAAO,CAAC;MACrB,IAAIR,GAAG,EAAE;QACPO,MAAM,CAAC,IAAIM,KAAK,CAAC,uBAAwBb,GAAI,EAAE,CAAC,CAAC;OAClD,MAAM;QACL,MAAM,IAAIa,KAAK,CAAC,2BAA4BZ,SAAS,GAAG,IAAK,UAAU,CAAC;;IAE5E,CAAC,EAAEA,SAAS,CAAC;IACb,MAAMU,QAAQ,GAAGG,WAAW,CAAC,MAAK;MAChC,IAAKf,MAAM,EAAE,EAAG;QACdK,QAAQ,CAAC,UAAU,EAAEJ,GAAG,EAAE,MAAM,CAAC;QACjCU,aAAa,CAACC,QAAQ,CAAC;QACvBC,YAAY,CAACJ,OAAO,CAAC;QACrBF,OAAO,CAAC,IAAI,CAAC;OACd,MAAM,IAAIN,GAAG,EAAE;QACdI,QAAQ,CAAC,UAAU,EAAEJ,GAAG,EAAE,cAAc,CAAC;;IAE7C,CAAC,EAAEE,UAAU,CAAC;EAChB,CAAC,CAAC;EAEF,SAASE,QAAQA,CAAC,GAAGW,IAAW;IAC9B,IAAIZ,GAAG,EAAE;MACPa,OAAO,CAACb,GAAG,CAAC,GAAGY,IAAI,CAAC,CAAC,CAAC;;EAE1B;AACF,CAAC"}]}