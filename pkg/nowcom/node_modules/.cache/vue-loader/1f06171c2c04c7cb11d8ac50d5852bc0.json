{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ResourceSummary.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ResourceSummary.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBTaW1wbGVCb3ggZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvU2ltcGxlQm94JzsKaW1wb3J0IHsgQ09VTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgY29sb3JGb3JTdGF0ZSB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZS9yZXNvdXJjZS1jbGFzcyc7CgpleHBvcnQgZnVuY3Rpb24gY29sb3JUb0NvdW50TmFtZShjb2xvcikgewogIHN3aXRjaCAoY29sb3IpIHsKICBjYXNlICd0ZXh0LXN1Y2Nlc3MnOgogIGNhc2UgJ3RleHQtaW5mbyc6CiAgICByZXR1cm4gJ3VzZWZ1bCc7CiAgY2FzZSAndGV4dC13YXJuaW5nJzoKICAgIHJldHVybiAnd2FybmluZ0NvdW50JzsKICBkZWZhdWx0OgogICAgcmV0dXJuICdlcnJvckNvdW50JzsKICB9Cn0KCmV4cG9ydCBmdW5jdGlvbiByZXNvdXJjZUNvdW50cyhzdG9yZSwgcmVzb3VyY2UpIHsKICBjb25zdCBpblN0b3JlID0gc3RvcmUuZ2V0dGVyc1snY3VycmVudFN0b3JlJ10oQ09VTlQpOwogIGNvbnN0IGNsdXN0ZXJDb3VudHMgPSBzdG9yZS5nZXR0ZXJzW2AkeyBpblN0b3JlIH0vYWxsYF0oQ09VTlQpPy5bMF0/LmNvdW50czsKICBjb25zdCBzdW1tYXJ5ID0gY2x1c3RlckNvdW50cz8uW3Jlc291cmNlXT8uc3VtbWFyeSB8fCB7fTsKCiAgY29uc3QgY291bnRzID0gewogICAgdG90YWw6ICAgICAgICBzdW1tYXJ5LmNvdW50IHx8IDAsCiAgICB1c2VmdWw6ICAgICAgIHN1bW1hcnkuY291bnQgfHwgMCwKICAgIHdhcm5pbmdDb3VudDogMCwKICAgIGVycm9yQ291bnQ6ICAgMAogIH07CgogIE9iamVjdC5lbnRyaWVzKHN1bW1hcnkuc3RhdGVzIHx8IHt9KS5mb3JFYWNoKChlbnRyeSkgPT4gewogICAgY29uc3QgY29sb3IgPSBjb2xvckZvclN0YXRlKGVudHJ5WzBdKTsKICAgIGNvbnN0IGNvdW50ID0gZW50cnlbMV07CiAgICBjb25zdCBjb3VudE5hbWUgPSBjb2xvclRvQ291bnROYW1lKGNvbG9yKTsKCiAgICBjb3VudHNbJ3VzZWZ1bCddIC09IGNvdW50OwogICAgY291bnRzW2NvdW50TmFtZV0gKz0gY291bnQ7CiAgfSk7CgogIHJldHVybiBjb3VudHM7Cn0KCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IFNpbXBsZUJveCB9LAoKICBwcm9wczogewogICAgcmVzb3VyY2U6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICBzcG9vZmVkQ291bnRzOiB7CiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKCiAgICBjbHVzdGVyOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHJlc291cmNlQ291bnRzKCkgewogICAgICBpZiAodGhpcy5zcG9vZmVkQ291bnRzKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc3Bvb2ZlZENvdW50czsKICAgICAgfQoKICAgICAgcmV0dXJuIHJlc291cmNlQ291bnRzKHRoaXMuJHN0b3JlLCB0aGlzLnJlc291cmNlKTsKICAgIH0sCgogICAgbG9jYXRpb24oKSB7CiAgICAgIGlmICh0aGlzLnNwb29mZWRDb3VudHMpIHsKICAgICAgICByZXR1cm4gdGhpcy5zcG9vZmVkQ291bnRzLmxvY2F0aW9uOwogICAgICB9CgogICAgICBjb25zdCByb3V0ZSA9IHsKICAgICAgICBuYW1lOiAgICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZScsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwcm9kdWN0OiAgdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXS5uYW1lLAogICAgICAgICAgcmVzb3VyY2U6IHRoaXMucmVzb3VyY2UsCiAgICAgICAgfQogICAgICB9OwoKICAgICAgaWYgKHRoaXMuY2x1c3RlcikgewogICAgICAgIHJvdXRlLnBhcmFtcy5jbHVzdGVyID0gdGhpcy5jbHVzdGVyOwogICAgICB9CgogICAgICByZXR1cm4gcm91dGU7CiAgICB9LAoKICAgIG5hbWUoKSB7CiAgICAgIGlmICh0aGlzLnNwb29mZWRDb3VudHMpIHsKICAgICAgICByZXR1cm4gdGhpcy5zcG9vZmVkQ291bnRzLm5hbWU7CiAgICAgIH0KICAgICAgY29uc3QgaW5TdG9yZSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRTdG9yZSddKHRoaXMucmVzb3VyY2UpOwogICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzW2AkeyBpblN0b3JlIH0vc2NoZW1hRm9yYF0odGhpcy5yZXNvdXJjZSk7CgogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvbGFiZWxGb3InXShzY2hlbWEsIHRoaXMucmVzb3VyY2VDb3VudHMudXNlZnVsKTsKICAgIH0sCiAgfSwKCiAgbWV0aG9kczogewogICAgZ29Ub1Jlc291cmNlKCkgewogICAgICBpZiAodGhpcy5sb2NhdGlvbikgewogICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKHRoaXMubG9jYXRpb24pOwogICAgICB9CiAgICB9LAogIH0KCn07Cg=="},{"version":3,"sources":["ResourceSummary.vue"],"names":[],"mappings":";AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"ResourceSummary.vue","sourceRoot":"../../node_modules/@rancher/shell/components","sourcesContent":["<script>\nimport SimpleBox from '@shell/components/SimpleBox';\nimport { COUNT } from '@shell/config/types';\nimport { colorForState } from '@shell/plugins/dashboard-store/resource-class';\n\nexport function colorToCountName(color) {\n  switch (color) {\n  case 'text-success':\n  case 'text-info':\n    return 'useful';\n  case 'text-warning':\n    return 'warningCount';\n  default:\n    return 'errorCount';\n  }\n}\n\nexport function resourceCounts(store, resource) {\n  const inStore = store.getters['currentStore'](COUNT);\n  const clusterCounts = store.getters[`${ inStore }/all`](COUNT)?.[0]?.counts;\n  const summary = clusterCounts?.[resource]?.summary || {};\n\n  const counts = {\n    total:        summary.count || 0,\n    useful:       summary.count || 0,\n    warningCount: 0,\n    errorCount:   0\n  };\n\n  Object.entries(summary.states || {}).forEach((entry) => {\n    const color = colorForState(entry[0]);\n    const count = entry[1];\n    const countName = colorToCountName(color);\n\n    counts['useful'] -= count;\n    counts[countName] += count;\n  });\n\n  return counts;\n}\n\nexport default {\n  components: { SimpleBox },\n\n  props: {\n    resource: {\n      type:    String,\n      default: ''\n    },\n\n    spoofedCounts: {\n      type:    Object,\n      default: null\n    },\n\n    cluster: {\n      type:    String,\n      default: null,\n    },\n  },\n\n  computed: {\n    resourceCounts() {\n      if (this.spoofedCounts) {\n        return this.spoofedCounts;\n      }\n\n      return resourceCounts(this.$store, this.resource);\n    },\n\n    location() {\n      if (this.spoofedCounts) {\n        return this.spoofedCounts.location;\n      }\n\n      const route = {\n        name:   'c-cluster-product-resource',\n        params: {\n          product:  this.$store.getters['currentProduct'].name,\n          resource: this.resource,\n        }\n      };\n\n      if (this.cluster) {\n        route.params.cluster = this.cluster;\n      }\n\n      return route;\n    },\n\n    name() {\n      if (this.spoofedCounts) {\n        return this.spoofedCounts.name;\n      }\n      const inStore = this.$store.getters['currentStore'](this.resource);\n      const schema = this.$store.getters[`${ inStore }/schemaFor`](this.resource);\n\n      return this.$store.getters['type-map/labelFor'](schema, this.resourceCounts.useful);\n    },\n  },\n\n  methods: {\n    goToResource() {\n      if (this.location) {\n        this.$router.push(this.location);\n      }\n    },\n  }\n\n};\n</script>\n\n<template>\n  <div>\n    <SimpleBox\n      class=\"container\"\n      :class=\"{'has-link': !!location}\"\n      @click=\"goToResource\"\n    >\n      <h1>{{ resourceCounts.total }}</h1>\n      <h3>\n        {{ name }}\n      </h3>\n      <div class=\"warnings\">\n        <div\n          v-if=\"resourceCounts.warningCount\"\n          class=\"warn-count mb-10 chip\"\n        >\n          {{ resourceCounts.warningCount }}\n        </div>\n        <div\n          v-if=\"resourceCounts.errorCount\"\n          class=\"error-count chip\"\n        >\n          {{ resourceCounts.errorCount }}\n        </div>\n      </div>\n    </SimpleBox>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n  .has-link {\n    cursor: pointer;\n\n    &:hover {\n      border-color: var(--link);\n    }\n  }\n\n  ::v-deep .content{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    & H1, H3 {\n        margin: 0;\n    }\n\n    & .chip{\n      border-radius: 2em;\n      color: var(--body-bg);\n      padding: 0px 1em;\n\n      &.warn-count {\n          background: var(--warning)\n      }\n\n      &.error-count {\n          background: var(--error)\n      }\n    }\n}\n</style>\n"]}]}