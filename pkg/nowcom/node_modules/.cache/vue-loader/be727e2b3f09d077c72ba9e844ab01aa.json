{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/components/forms/AddSubnet.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/components/forms/AddSubnet.vue","mtime":1716430386792},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGlzVmFsaWRJUCB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL2hlbHBlcnMvdXRpbHMnCmltcG9ydCB7IHZOZXRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXBpL3ZuZXQnOwppbXBvcnQgY0J1dHRvbiBmcm9tICcuLi9jb21tb24vQnV0dG9uJwpleHBvcnQgZGVmYXVsdCB7CiAgICBuYW1lOiAnQWRkU3VibmV0JywKICAgIHByb3BzOiB7CiAgICAgICAgaXNPcGVuOiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfSwKICAgICAgICBjdXJyZW50TmV0d29yazogewogICAgICAgICAgICB0eXBlOiBPYmplY3QsCiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfQogICAgfSwKICAgIGNvbXBvbmVudHM6IHsKICAgICAgICBjQnV0dG9uCiAgICB9LAogICAgZGF0YSgpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBzdWJuZXROYW1lOiAnJywKICAgICAgICAgICAgc3VibmV0SVA6ICcxMC41NS4wLjAnLAogICAgICAgICAgICBsb2FkaW5nOiBmYWxzZSwKICAgICAgICB9CiAgICB9LAogICAgd2F0Y2hlcjogewogICAgICAgIGlzT3BlbiAodmFsKSB7CiAgICAgICAgICAgIGlmICghdmFsKSB0aGlzLnJlc2V0Rm9ybSgpOwogICAgICAgIH0gCiAgICB9LAogICAgY29tcHV0ZWQ6IHsKICAgICAgICBpc0FkZFN1Ym5ldERpc2FibGVkKCkgewogICAgICAgICAgICAvLyBDaGVjayBjb25kaXRpb25zIHRvIGRpc2FibGUgdGhlIGJ1dHRvbgogICAgICAgICAgICByZXR1cm4gIXRoaXMuc3VibmV0TmFtZSB8fCAhdGhpcy5zdWJuZXRJUCB8fCAhdGhpcy5pc1N1Ym5ldElQVmFsaWQ7CiAgICAgICAgfSwKICAgICAgICBpc1N1Ym5ldElQVmFsaWQoKSB7CiAgICAgICAgICAgIHJldHVybiBpc1ZhbGlkSVAodGhpcy5zdWJuZXRJUCkKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIHJlc2V0Rm9ybSgpIHsKICAgICAgICAgICAgdGhpcy5zdWJuZXROYW1lID0gJyc7CiAgICAgICAgICAgIHRoaXMuc3VibmV0SVAgPSAnMTAuNTUuMC4wJzsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfSwKICAgICAgICBhc3luYyBhZGRTdWJuZXQoKSB7CiAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBjb25zdCBuZXR3b3JrID0gey4uLnRoaXMuY3VycmVudE5ldHdvcmt9OwogICAgICAgICAgICAgICAgdGhpcy5hcGlFcnJvciA9IG51bGw7IC8vIFJlc2V0IGVycm9yIHN0YXRlCiAgICAgICAgICAgICAgICAvLyB2MC4yCiAgICAgICAgICAgICAgICBjb25zdCBzdWJuZXROYW1lID0gdGhpcy5zdWJuZXROYW1lLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgICAgICBjb25zdCBzdWJuZXRfZGF0YSA9IHsKICAgICAgICAgICAgICAgICAgICBsb25nTmFtZTogYCR7bmV0d29yay5uYW1lfS0ke3N1Ym5ldE5hbWV9LSR7dGhpcy5zdWJuZXRJUH0tMjRgLAogICAgICAgICAgICAgICAgICAgIG5hbWU6ICAgICAgc3VibmV0TmFtZSwKICAgICAgICAgICAgICAgICAgICBhZGRyZXNzOiAgIHRoaXMuc3VibmV0SVAsCiAgICAgICAgICAgICAgICAgICAgZm9ybWF0dGVkQWRkcmVzczogYCR7dGhpcy5zdWJuZXRJUH0vMjRgLAogICAgICAgICAgICAgICAgICAgIHByZWZpeF9sZW46IDI0CiAgICAgICAgICAgICAgICB9OwoKICAgICAgICAgICAgICAgIG5ldHdvcmsuc3VibmV0cy5wdXNoKHN1Ym5ldF9kYXRhKTsKCiAgICAgICAgICAgICAgICBjb25zdCB2bmV0X2RhdGEgPSB7CiAgICAgICAgICAgICAgICAgICAgYXBpVmVyc2lvbjogJ3BhY2tldGxpZnRlci5kZXYvdjEnLAogICAgICAgICAgICAgICAgICAgIGtpbmQ6ICAgICAgICdWbmV0JywKICAgICAgICAgICAgICAgICAgICAvLyB2bmV0X3ZsYW46IHRoaXMuc2VsZWN0ZWRWbmV0VmxhbiwKICAgICAgICAgICAgICAgICAgICBtZXRhZGF0YTogICB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICAgICAgbmV0d29yay5uYW1lLnRvTG93ZXJDYXNlKCksCiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogJ2RlZmF1bHQnCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBzcGVjOiB7CiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICAgIG5ldHdvcmsubmFtZS50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgICAgICAgICAgICAgICBzdWJuZXRzOiBuZXR3b3JrLnN1Ym5ldHMsCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfTsKCiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnc2VuZCB0byBBUEknLCBzdWJuZXRfZGF0YSk7CiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnbG9nJywgbmV0d29yayk7CgogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZQoKICAgICAgICAgICAgICAgIGF3YWl0IHZOZXRTZXJ2aWNlLnBhdGNoU3VibmV0KG5ldHdvcmsubmFtZSwgdm5ldF9kYXRhKTsKICAgICAgICAgICAgICAgIHRoaXMucmVzZXRGb3JtKCk7CiAgICAgICAgICAgICAgICB0aGlzLiRlbWl0KCdzdWNjZXNzJykKICAgICAgICAgICAgfSBjYXRjaChlcnJvcikgewogICAgICAgICAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgICAgICAgICAvLyB0aGlzLnN1Ym5ldFJlc3BvbnNlTWVzc2FnZSA9ICdFcnJvcic7CiAgICAgICAgICAgICAgICAvLyBTZXQgdGhlIEFQSSBlcnJvciBpbiB0aGUgY29tcG9uZW50CiAgICAgICAgICAgICAgICAvLyB0aGlzLmFwaUVycm9yID0gJ0Vycm9yIGNyZWF0aW5nIFN1Ym5ldCc7CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgfQp9Cg=="},{"version":3,"sources":["AddSubnet.vue"],"names":[],"mappings":";AA+BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddSubnet.vue","sourceRoot":"components/forms","sourcesContent":["<template>\n    <div>\n        <h2>Add Subnet</h2>\n        <!-- ... your content for adding subnet -->\n        <div class=\"add-form-row\">\n            <input v-model=\"subnetName\" type=\"text\" placeholder=\"Subnet Name\" title=\"Subnet Name\" />\n        </div>\n        <div class=\"add-form-row\">\n            <input\n                v-model=\"subnetIP\"\n                type=\"text\"\n                placeholder=\"Enter subnet (e.g., 10.0.0.0)\"\n                pattern=\"\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\"\n                title=\"Please enter a valid IP address\"\n            />\n            <p v-if=\"!isSubnetIPValid\" class=\"text-danger\" style=\"font-weight: bold;\">Invalid IP Address</p>\n        </div>\n        <div class=\"add-form-row\">\n            <cButton class=\"cbtn btn-light\" :disabled=\"isAddSubnetDisabled || loading\" @click=\"addSubnet\">\n                <template v-if=\"!loading\">\n                    <i class=\"fa fa-plus fa-lg mr-5\"></i> Add Subnet\n                </template>\n                <template v-else>\n                    <i class=\"fa fa-spinner fa-spin fa-lg mr-5\"></i> Processing\n                </template>\n            </cButton> \n        </div>\n    </div>\n</template>\n\n<script>\nimport { isValidIP } from '../../services/helpers/utils'\nimport { vNetService } from '../../services/api/vnet';\nimport cButton from '../common/Button'\nexport default {\n    name: 'AddSubnet',\n    props: {\n        isOpen: {\n            type: Boolean,\n            required: true\n        },\n        currentNetwork: {\n            type: Object,\n            required: true\n        }\n    },\n    components: {\n        cButton\n    },\n    data() {\n        return {\n            subnetName: '',\n            subnetIP: '10.55.0.0',\n            loading: false,\n        }\n    },\n    watcher: {\n        isOpen (val) {\n            if (!val) this.resetForm();\n        } \n    },\n    computed: {\n        isAddSubnetDisabled() {\n            // Check conditions to disable the button\n            return !this.subnetName || !this.subnetIP || !this.isSubnetIPValid;\n        },\n        isSubnetIPValid() {\n            return isValidIP(this.subnetIP)\n        }\n    },\n    methods: {\n        resetForm() {\n            this.subnetName = '';\n            this.subnetIP = '10.55.0.0';\n            this.loading = false;\n        },\n        async addSubnet() {\n            try {\n                const network = {...this.currentNetwork};\n                this.apiError = null; // Reset error state\n                // v0.2\n                const subnetName = this.subnetName.toLowerCase();\n                const subnet_data = {\n                    longName: `${network.name}-${subnetName}-${this.subnetIP}-24`,\n                    name:      subnetName,\n                    address:   this.subnetIP,\n                    formattedAddress: `${this.subnetIP}/24`,\n                    prefix_len: 24\n                };\n\n                network.subnets.push(subnet_data);\n\n                const vnet_data = {\n                    apiVersion: 'packetlifter.dev/v1',\n                    kind:       'Vnet',\n                    // vnet_vlan: this.selectedVnetVlan,\n                    metadata:   {\n                        name:      network.name.toLowerCase(),\n                        namespace: 'default'\n                    },\n                    spec: {\n                        name:    network.name.toLowerCase(),\n                        subnets: network.subnets,\n                    }\n                };\n\n                console.log('send to API', subnet_data);\n                console.log('log', network);\n\n                this.loading = true\n\n                await vNetService.patchSubnet(network.name, vnet_data);\n                this.resetForm();\n                this.$emit('success')\n            } catch(error) {\n                console.log(error);\n                this.loading = false;\n                // this.subnetResponseMessage = 'Error';\n                // Set the API error in the component\n                // this.apiError = 'Error creating Subnet';\n            }\n        },\n    }\n}\n</script>\n\n<style scoped>\n.add-form-row {\n  width: 300px;\n  /* display: grid; */\n  justify-content: center;\n  align-items: center;\n  /* Add this line for vertical alignment if needed */\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n</style>"]}]}