{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/resource-fetch-namespaced.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/resource-fetch-namespaced.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/babel.config.js","mtime":1716430386791},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgTkFNRVNQQUNFX0ZJTFRFUl9OU19QUkVGSVgsIE5BTUVTUEFDRV9GSUxURVJfUF9QUkVGSVggfSBmcm9tICdAc2hlbGwvdXRpbHMvbmFtZXNwYWNlLWZpbHRlcic7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgUmVzb3VyY2VMaXN0Q29tcG9uZW50TmFtZSB9IGZyb20gJy4uL2NvbXBvbmVudHMvUmVzb3VyY2VMaXN0L3Jlc291cmNlLWxpc3QuY29uZmlnJzsKaW1wb3J0IHBBbmRORmlsdGVyaW5nIGZyb20gJ0BzaGVsbC91dGlscy9wcm9qZWN0QW5kTmFtZXNwYWNlRmlsdGVyaW5nLnV0aWxzJzsKCi8qKgogKiBDb21wYW5pb24gbWl4aW4gdXNlZCB3aXRoIGByZXNvdXJjZS1mZXRjaGAgZm9yIGBSZXNvdXJjZUxpc3RgIHRvIGRldGVybWluZSBpZiB0aGUgdXNlciBuZWVkcyB0byBmaWx0ZXIgdGhlIGxpc3QgYnkgYSBzaW5nbGUgbmFtZXNwYWNlCiAqLwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcmNlVXBkYXRlTGl2ZUFuZERlbGF5ZWQ6IDAKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ2N1cnJlbnRQcm9kdWN0JywgJ2N1cnJlbnRDbHVzdGVyJywgJ25hbWVzcGFjZUZpbHRlcnMnXSksCiAgICAvKioKICAgICAqIERvZXMgdGhlIHVzZXIgbmVlZCB0byB1cGRhdGUgdGhlIGZpbHRlciB0byBzdXBwbHkgYSBzaW5nbGUgbmFtZXNwYWNlPwogICAgICovCiAgICBuYW1lc3BhY2VGaWx0ZXJSZXF1aXJlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuX19uYW1lc3BhY2VSZXF1aXJlZCAmJiAhdGhpcy5fX3ZhbGlkRmlsdGVyOwogICAgfSwKICAgIC8qKgogICAgICogUmV0dXJucyB0aGUgbmFtZXNwYWNlIHRoYXQgcmVxdWVzdHMgc2hvdWxkIGJlIGZpbHRlcmVkIGJ5CiAgICAgKi8KICAgIG5hbWVzcGFjZUZpbHRlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuX19uYW1lc3BhY2VSZXF1aXJlZCA/IHRoaXMuX192YWxpZEZpbHRlciA6ICcnOwogICAgfSwKICAgIC8qKgogICAgICogSWYgdGhlIFByb2plY3QvTmFtZXNwYWNlIGZpbHRlciBmcm9tIHRoZSBoZWFkZXIgY29udGFpbnMgYSB2YWxpZCBucyAvIHByb2plY3QgZmlsdGVyIC4uLiByZXR1cm4gaXQKICAgICAqLwogICAgX192YWxpZEZpbHRlcigpIHsKICAgICAgY29uc3QgdmFsaWQgPSB0aGlzLm5hbWVzcGFjZUZpbHRlcnMubGVuZ3RoICYmIHRoaXMubmFtZXNwYWNlRmlsdGVycy5ldmVyeShmID0+IGYuc3RhcnRzV2l0aChOQU1FU1BBQ0VfRklMVEVSX05TX1BSRUZJWCkgfHwgZi5zdGFydHNXaXRoKE5BTUVTUEFDRV9GSUxURVJfUF9QUkVGSVgpKTsKICAgICAgcmV0dXJuIHZhbGlkID8gdGhpcy5uYW1lc3BhY2VGaWx0ZXJzIDogbnVsbDsKICAgIH0sCiAgICAvKioKICAgICAqIERvIHdlIG5lZWQgdG8gZmlsdGVyIHRoZSBsaXN0IGJ5IGEgbmFtZXNwYWNlPyBUaGlzIHdpbGwgY29udHJvbCB3aGV0aGVyIHRoZSB1c2VyIGlzIHNob3duIGFuIGVycm9yCiAgICAgKgogICAgICogV2Ugc2hvdWxkbid0IHNob3cgYW4gZXJyb3Igb24gcGFnZXMgd2l0aCByZXNvdXJjZXMgdGhhdCBhcmVuJ3QgbmFtZXNwYWNlZAogICAgICovCiAgICBfX25hbWVzcGFjZVJlcXVpcmVkKCkgewogICAgICBpZiAoIXBBbmRORmlsdGVyaW5nLmlzRW5hYmxlZCh0aGlzLiRzdG9yZS5nZXR0ZXJzKSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5fX2FyZVJlc291cmNlc05hbWVzcGFjZWQ7CiAgICB9LAogICAgLyoqCiAgICAgKiBBcmUgYWxsIGNvcmUgbGlzdCByZXNvdXJjZXMgbmFtZXNwYWNlZD8KICAgICAqLwogICAgX19hcmVSZXNvdXJjZXNOYW1lc3BhY2VkKCkgewogICAgICAvLyBPbmx5IGVuYWJsZSBmb3IgdGhlIGNsdXN0ZXIgc3RvcmUgYXQgdGhlIG1vbWVudC4gSW4gdGhlb3J5IHRoaXMgc2hvdWxkIHdvcmsgaW4gbWFuYWdlbWVudCBhcyB3ZWxsLCBhcyB0aGV5J3JlIGJvdGggJ3N0ZXZlJyBzdG9yZXMKICAgICAgaWYgKHRoaXMuY3VycmVudFByb2R1Y3QuaW5TdG9yZSAhPT0gJ2NsdXN0ZXInKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiAodGhpcy5sb2FkUmVzb3VyY2VzIHx8IFtdKS5ldmVyeSh0eXBlID0+IHsKICAgICAgICB2YXIgX3NjaGVtYSRhdHRyaWJ1dGVzOwogICAgICAgIGNvbnN0IHNjaGVtYSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NsdXN0ZXIvc2NoZW1hRm9yJ10odHlwZSk7CiAgICAgICAgcmV0dXJuIHNjaGVtYSA9PT0gbnVsbCB8fCBzY2hlbWEgPT09IHZvaWQgMCB8fCAoX3NjaGVtYSRhdHRyaWJ1dGVzID0gc2NoZW1hLmF0dHJpYnV0ZXMpID09PSBudWxsIHx8IF9zY2hlbWEkYXR0cmlidXRlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NjaGVtYSRhdHRyaWJ1dGVzLm5hbWVzcGFjZWQ7CiAgICAgIH0pOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGFzeW5jIG5hbWVzcGFjZUZpbHRlcihuZXUpIHsKICAgICAgaWYgKG5ldSkgewogICAgICAgIC8vIFdoZW4gYSBOUyBmaWx0ZXIgaXMgcmVxdWlyZWQgYW5kIHRoZSB1c2VyIHNlbGVjdHMgYSBkaWZmZXJlbnQgb25lLCBraWNrIG9mZiBhIG5ldyBzZXQgb2YgQVBJIHJlcXVlc3RzCiAgICAgICAgLy8KICAgICAgICAvLyBSZXNvdXJjZUxpc3QgaGFzIHR3byBtb2RlcwogICAgICAgIC8vIDEpIFJlc291cmNlTGlzdCBjb21wb25lbnQgaGFuZGxlcyBBUEkgcmVxdWVzdCB0byBmZXRjaCByZXNvdXJjZXMKICAgICAgICAvLyAyKSBDdXN0b20gbGlzdCBjb21wb25lbnQgaGFuZGxlcyBBUEkgcmVxdWVzdCB0byBmZXRjaCByZXNvdXJjZXMKICAgICAgICAvLwogICAgICAgIC8vIFRoaXMgY292ZXJzIGNhc2UgMgogICAgICAgIGlmICh0aGlzLiRvcHRpb25zLm5hbWUgIT09IFJlc291cmNlTGlzdENvbXBvbmVudE5hbWUgJiYgISF0aGlzLiRmZXRjaCkgewogICAgICAgICAgYXdhaXQgdGhpcy4kZmV0Y2goKTsKICAgICAgICB9CiAgICAgICAgLy8gRW5zdXJlIGFueSBsaXZlL2RlbGF5ZWQgY29sdW1ucyBnZXQgdXBkYXRlZAogICAgICAgIHRoaXMuZm9yY2VVcGRhdGVMaXZlQW5kRGVsYXllZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["NAMESPACE_FILTER_NS_PREFIX","NAMESPACE_FILTER_P_PREFIX","mapGetters","ResourceListComponentName","pAndNFiltering","data","forceUpdateLiveAndDelayed","computed","namespaceFilterRequired","__namespaceRequired","__validFilter","namespaceFilter","valid","namespaceFilters","length","every","f","startsWith","isEnabled","$store","getters","__areResourcesNamespaced","currentProduct","inStore","loadResources","type","_schema$attributes","schema","attributes","namespaced","watch","neu","$options","name","$fetch","Date","getTime"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/resource-fetch-namespaced.js"],"sourcesContent":["import { NAMESPACE_FILTER_NS_PREFIX, NAMESPACE_FILTER_P_PREFIX } from '@shell/utils/namespace-filter';\nimport { mapGetters } from 'vuex';\nimport { ResourceListComponentName } from '../components/ResourceList/resource-list.config';\nimport pAndNFiltering from '@shell/utils/projectAndNamespaceFiltering.utils';\n\n/**\n * Companion mixin used with `resource-fetch` for `ResourceList` to determine if the user needs to filter the list by a single namespace\n */\nexport default {\n\n  data() {\n    return { forceUpdateLiveAndDelayed: 0 };\n  },\n\n  computed: {\n    ...mapGetters(['currentProduct', 'currentCluster', 'namespaceFilters']),\n\n    /**\n     * Does the user need to update the filter to supply a single namespace?\n     */\n    namespaceFilterRequired() {\n      return this.__namespaceRequired && !this.__validFilter;\n    },\n\n    /**\n     * Returns the namespace that requests should be filtered by\n     */\n    namespaceFilter() {\n      return this.__namespaceRequired ? this.__validFilter : '';\n    },\n\n    /**\n     * If the Project/Namespace filter from the header contains a valid ns / project filter ... return it\n     */\n    __validFilter() {\n      const valid = this.namespaceFilters.length && this.namespaceFilters.every((f) => f.startsWith(NAMESPACE_FILTER_NS_PREFIX) || f.startsWith(NAMESPACE_FILTER_P_PREFIX));\n\n      return valid ? this.namespaceFilters : null;\n    },\n\n    /**\n     * Do we need to filter the list by a namespace? This will control whether the user is shown an error\n     *\n     * We shouldn't show an error on pages with resources that aren't namespaced\n     */\n    __namespaceRequired() {\n      if (!pAndNFiltering.isEnabled(this.$store.getters)) {\n        return false;\n      }\n\n      return this.__areResourcesNamespaced;\n    },\n\n    /**\n     * Are all core list resources namespaced?\n     */\n    __areResourcesNamespaced() {\n      // Only enable for the cluster store at the moment. In theory this should work in management as well, as they're both 'steve' stores\n      if (this.currentProduct.inStore !== 'cluster') {\n        return false;\n      }\n\n      return (this.loadResources || []).every((type) => {\n        const schema = this.$store.getters['cluster/schemaFor'](type);\n\n        return schema?.attributes?.namespaced;\n      });\n    },\n\n  },\n\n  watch: {\n    async namespaceFilter(neu) {\n      if (neu) {\n        // When a NS filter is required and the user selects a different one, kick off a new set of API requests\n        //\n        // ResourceList has two modes\n        // 1) ResourceList component handles API request to fetch resources\n        // 2) Custom list component handles API request to fetch resources\n        //\n        // This covers case 2\n        if (this.$options.name !== ResourceListComponentName && !!this.$fetch) {\n          await this.$fetch();\n        }\n        // Ensure any live/delayed columns get updated\n        this.forceUpdateLiveAndDelayed = new Date().getTime();\n      }\n    }\n  }\n};\n"],"mappings":"AAAA,SAASA,0BAA0B,EAAEC,yBAAyB,QAAQ,+BAA+B;AACrG,SAASC,UAAU,QAAQ,MAAM;AACjC,SAASC,yBAAyB,QAAQ,iDAAiD;AAC3F,OAAOC,cAAc,MAAM,iDAAiD;;AAE5E;AACA;AACA;AACA,eAAe;EAEbC,IAAIA,CAAA,EAAG;IACL,OAAO;MAAEC,yBAAyB,EAAE;IAAE,CAAC;EACzC,CAAC;EAEDC,QAAQ,EAAE;IACR,GAAGL,UAAU,CAAC,CAAC,gBAAgB,EAAE,gBAAgB,EAAE,kBAAkB,CAAC,CAAC;IAEvE;AACJ;AACA;IACIM,uBAAuBA,CAAA,EAAG;MACxB,OAAO,IAAI,CAACC,mBAAmB,IAAI,CAAC,IAAI,CAACC,aAAa;IACxD,CAAC;IAED;AACJ;AACA;IACIC,eAAeA,CAAA,EAAG;MAChB,OAAO,IAAI,CAACF,mBAAmB,GAAG,IAAI,CAACC,aAAa,GAAG,EAAE;IAC3D,CAAC;IAED;AACJ;AACA;IACIA,aAAaA,CAAA,EAAG;MACd,MAAME,KAAK,GAAG,IAAI,CAACC,gBAAgB,CAACC,MAAM,IAAI,IAAI,CAACD,gBAAgB,CAACE,KAAK,CAAEC,CAAC,IAAKA,CAAC,CAACC,UAAU,CAACjB,0BAA0B,CAAC,IAAIgB,CAAC,CAACC,UAAU,CAAChB,yBAAyB,CAAC,CAAC;MAErK,OAAOW,KAAK,GAAG,IAAI,CAACC,gBAAgB,GAAG,IAAI;IAC7C,CAAC;IAED;AACJ;AACA;AACA;AACA;IACIJ,mBAAmBA,CAAA,EAAG;MACpB,IAAI,CAACL,cAAc,CAACc,SAAS,CAAC,IAAI,CAACC,MAAM,CAACC,OAAO,CAAC,EAAE;QAClD,OAAO,KAAK;MACd;MAEA,OAAO,IAAI,CAACC,wBAAwB;IACtC,CAAC;IAED;AACJ;AACA;IACIA,wBAAwBA,CAAA,EAAG;MACzB;MACA,IAAI,IAAI,CAACC,cAAc,CAACC,OAAO,KAAK,SAAS,EAAE;QAC7C,OAAO,KAAK;MACd;MAEA,OAAO,CAAC,IAAI,CAACC,aAAa,IAAI,EAAE,EAAET,KAAK,CAAEU,IAAI,IAAK;QAAA,IAAAC,kBAAA;QAChD,MAAMC,MAAM,GAAG,IAAI,CAACR,MAAM,CAACC,OAAO,CAAC,mBAAmB,CAAC,CAACK,IAAI,CAAC;QAE7D,OAAOE,MAAM,aAANA,MAAM,gBAAAD,kBAAA,GAANC,MAAM,CAAEC,UAAU,cAAAF,kBAAA,uBAAlBA,kBAAA,CAAoBG,UAAU;MACvC,CAAC,CAAC;IACJ;EAEF,CAAC;EAEDC,KAAK,EAAE;IACL,MAAMnB,eAAeA,CAACoB,GAAG,EAAE;MACzB,IAAIA,GAAG,EAAE;QACP;QACA;QACA;QACA;QACA;QACA;QACA;QACA,IAAI,IAAI,CAACC,QAAQ,CAACC,IAAI,KAAK9B,yBAAyB,IAAI,CAAC,CAAC,IAAI,CAAC+B,MAAM,EAAE;UACrE,MAAM,IAAI,CAACA,MAAM,CAAC,CAAC;QACrB;QACA;QACA,IAAI,CAAC5B,yBAAyB,GAAG,IAAI6B,IAAI,CAAC,CAAC,CAACC,OAAO,CAAC,CAAC;MACvD;IACF;EACF;AACF,CAAC"}]}