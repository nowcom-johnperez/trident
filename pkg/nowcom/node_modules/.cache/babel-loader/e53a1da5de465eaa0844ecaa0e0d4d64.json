{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/SortableTable/filtering.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/SortableTable/filtering.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/babel.config.js","mtime":1716430386791},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZ2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IGFkZE9iamVjdCwgYWRkT2JqZWN0cywgaXNBcnJheSwgcmVtb3ZlQXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwpleHBvcnQgY29uc3QgQURWX0ZJTFRFUl9BTExfQ09MU19WQUxVRSA9ICdhbGxjb2xzJzsKZXhwb3J0IGNvbnN0IEFEVl9GSUxURVJfQUxMX0NPTFNfTEFCRUwgPSAnQWxsIENvbHVtbnMnOwpjb25zdCBMQUJFTF9JREVOVElGSUVSID0gJzo6OmlzbGFiZWwnOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaFF1ZXJ5OiBudWxsLAogICAgICBwcmV2aW91c0ZpbHRlcjogbnVsbCwKICAgICAgcHJldmlvdXNSZXN1bHQ6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgc2VhcmNoRmllbGRzKCkgewogICAgICBjb25zdCBvdXQgPSBjb2x1bW5zVG9TZWFyY2hGaWVsZCh0aGlzLmNvbHVtbnMpOwogICAgICBpZiAodGhpcy5leHRyYVNlYXJjaEZpZWxkcykgewogICAgICAgIGFkZE9iamVjdHMob3V0LCB0aGlzLmV4dHJhU2VhcmNoRmllbGRzKTsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfSwKICAgIC8qCiAgICBzdWJGaWVsZHM6IGNvbXB1dGVkKCdzdWJIZWFkZXJzLkBlYWNoLntzZWFyY2hGaWVsZCxuYW1lfScsICdleHRyYVNlYXJjaFN1YkZpZWxkcy5bXScsIGZ1bmN0aW9uKCkgewogICAgICBsZXQgb3V0ID0gaGVhZGVyc1RvU2VhcmNoRmllbGQoZ2V0KHRoaXMsICdzdWJIZWFkZXJzJykpOwogICAgICAgcmV0dXJuIG91dC5hZGRPYmplY3RzKGdldCh0aGlzLCAnZXh0cmFTZWFyY2hTdWJGaWVsZHMnKSB8fCBbXSk7CiAgICB9KSwKICAgICovCiAgICBmaWx0ZXJlZFJvd3MoKSB7CiAgICAgIC8vIFBST1AgaGFzQWR2YW5jZWRGaWx0ZXJpbmcgY29tZXMgZnJvbSBBZHZhbmNlZCBGaWx0ZXJpbmcgbWl4aW4gKGNhcmVmdWwgY2hhbmdpbmcgZGF0YSB2YXIgdGhlcmUuLi4pCiAgICAgIGlmICghdGhpcy5oYXNBZHZhbmNlZEZpbHRlcmluZykgewogICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUZpbHRlcmluZygpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0aGlzLmhhbmRsZUFkdmFuY2VkRmlsdGVyaW5nKCk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGhhbmRsZUFkdmFuY2VkRmlsdGVyaW5nKCkgewogICAgICB0aGlzLnN1Yk1hdGNoZXMgPSBudWxsOwogICAgICBpZiAodGhpcy5zZWFyY2hRdWVyeS5sZW5ndGgpIHsKICAgICAgICBjb25zdCBvdXQgPSAodGhpcy5hcnJhbmdlZFJvd3MgfHwgW10pLnNsaWNlKCk7CiAgICAgICAgY29uc3QgcmVzID0gb3V0LmZpbHRlcihyb3cgPT4gewogICAgICAgICAgcmV0dXJuIHRoaXMuc2VhcmNoUXVlcnkuZXZlcnkoZiA9PiB7CiAgICAgICAgICAgIGlmIChmLnByb3AgPT09IEFEVl9GSUxURVJfQUxMX0NPTFNfVkFMVUUpIHsKICAgICAgICAgICAgICAvLyBhZHZGaWx0ZXJTZWxlY3RPcHRpb25zIGNvbWVzIGZyb20gQWR2YW5jZWQgRmlsdGVyaW5nIG1peGluCiAgICAgICAgICAgICAgLy8gcmVtb3ZlIHRoZSBBbGwgQ29sdW1ucyBvcHRpb24gZnJvbSB0aGUgbGlzdCBzbyB0aGF0IHdlIGRvbid0IGl0ZXJhdGUgb3ZlciBpdAogICAgICAgICAgICAgIGNvbnN0IGFsbENvbHMgPSB0aGlzLmFkdkZpbHRlclNlbGVjdE9wdGlvbnMuc2xpY2UoMSk7CiAgICAgICAgICAgICAgbGV0IHNlYXJjaEZpZWxkcyA9IFtdOwogICAgICAgICAgICAgIGFsbENvbHMuZm9yRWFjaChjb2wgPT4gewogICAgICAgICAgICAgICAgaWYgKGNvbC52YWx1ZS5pbmNsdWRlcygnWycpICYmIGNvbC52YWx1ZS5pbmNsdWRlcygnXScpKSB7CiAgICAgICAgICAgICAgICAgIHNlYXJjaEZpZWxkcyA9IHNlYXJjaEZpZWxkcy5jb25jYXQoSlNPTi5wYXJzZShjb2wudmFsdWUpKTsKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgIC8vIHRoaXMgbWVhbnMgd2UgYXJlIG9uIHRoZSBwcmVzZW5jZSBvZiBhIGxhYmVsLCB3aGljaCBzaG91bGQgYmUgZGVhbHQKICAgICAgICAgICAgICAgICAgLy8gY2FyZWZ1bGx5IGJlY2F1c2Ugb2Ygb2JqZWN0IHBhdGggc3VjaCByb3cubWV0YWRhdGEubGFiZWxzLiJhcHAua3ViZXJuZXRlcy5pby9tYW5hZ2VkLWJ5CiAgICAgICAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gY29sLmlzTGFiZWwgPyBgJHtjb2wubGFiZWx9JHtMQUJFTF9JREVOVElGSUVSfWAgOiBjb2wudmFsdWU7CiAgICAgICAgICAgICAgICAgIHNlYXJjaEZpZWxkcy5wdXNoKHZhbHVlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlU3RyaW5nU2VhcmNoKHNlYXJjaEZpZWxkcywgW2YudmFsdWVdLCByb3cpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGlmIChmLnByb3AuaW5jbHVkZXMoJ1snKSAmJiBmLnByb3AuaW5jbHVkZXMoJ10nKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGhhbmRsZVN0cmluZ1NlYXJjaChKU09OLnBhcnNlKGYucHJvcCksIFtmLnZhbHVlXSwgcm93KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgbGV0IHByb3AgPSBmLnByb3A7CgogICAgICAgICAgICAgIC8vIHRoaXMgbWVhbnMgd2UgYXJlIG9uIHRoZSBwcmVzZW5jZSBvZiBhIGxhYmVsLCB3aGljaCBzaG91bGQgYmUgZGVhbHQKICAgICAgICAgICAgICAvLyBjYXJlZnVsbHkgYmVjYXVzZSBvZiBvYmplY3QgcGF0aCBzdWNoIHJvdy5tZXRhZGF0YS5sYWJlbHMuImFwcC5rdWJlcm5ldGVzLmlvL21hbmFnZWQtYnkiCiAgICAgICAgICAgICAgaWYgKGYucHJvcC5pbmNsdWRlcygnbWV0YWRhdGEubGFiZWxzJykpIHsKICAgICAgICAgICAgICAgIHByb3AgPSBgJHtmLmxhYmVsfSR7TEFCRUxfSURFTlRJRklFUn1gOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlU3RyaW5nU2VhcmNoKFtwcm9wXSwgW2YudmFsdWVdLCByb3cpOwogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gcmVzOwogICAgICB9CgogICAgICAvLyByZXR1cm4gYXJyYW5nZWRSb3dzIGFycmF5IGlmIHdlIGRvbid0IGhhdmUgYW55dGhpbmcgdG8gc2VhcmNoIGZvci4uLgogICAgICByZXR1cm4gdGhpcy5hcnJhbmdlZFJvd3M7CiAgICB9LAogICAgaGFuZGxlRmlsdGVyaW5nKCkgewogICAgICBjb25zdCBzZWFyY2hUZXh0ID0gKHRoaXMuc2VhcmNoUXVlcnkgfHwgJycpLnRyaW0oKS50b0xvd2VyQ2FzZSgpOwogICAgICBsZXQgb3V0OwogICAgICBpZiAoc2VhcmNoVGV4dCAmJiB0aGlzLnByZXZpb3VzUmVzdWx0ICYmIHNlYXJjaFRleHQuc3RhcnRzV2l0aCh0aGlzLnByZXZpb3VzRmlsdGVyKSkgewogICAgICAgIC8vIElmIHRoZSBuZXcgc2VhcmNoIGlzIGFuIGFkZGl0aW9uIHRvIHRoZSBsYXN0IG9uZSwgd2UgY2FuIHN0YXJ0IHdpdGggdGhlIHNhbWUgc2V0IG9mIHJlc3VsdHMgYXMgbGFzdCB0aW1lCiAgICAgICAgLy8gYW5kIGZpbHRlciB0aG9zZSBkb3duLCBzaW5jZSBhZGRpbmcgbW9yZSBzZWFyY2hUZXh0IGNhbiBvbmx5IHJlZHVjZSB0aGUgbnVtYmVyIG9mIHJlc3VsdHMuCiAgICAgICAgb3V0ID0gdGhpcy5wcmV2aW91c1Jlc3VsdC5zbGljZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMucHJldmlvdXNSZXN1bHQgPSBudWxsOwogICAgICAgIG91dCA9ICh0aGlzLmFycmFuZ2VkUm93cyB8fCBbXSkuc2xpY2UoKTsKICAgICAgfQogICAgICB0aGlzLnByZXZpb3VzRmlsdGVyID0gc2VhcmNoVGV4dDsKICAgICAgaWYgKCFzZWFyY2hUZXh0Lmxlbmd0aCkgewogICAgICAgIHRoaXMuc3ViTWF0Y2hlcyA9IG51bGw7CiAgICAgICAgdGhpcy5wcmV2aW91c1Jlc3VsdCA9IG51bGw7CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfQogICAgICBjb25zdCBzZWFyY2hGaWVsZHMgPSB0aGlzLnNlYXJjaEZpZWxkczsKICAgICAgY29uc3Qgc2VhcmNoVG9rZW5zID0gc2VhcmNoVGV4dC5zcGxpdCgvXHMqWywgXVxzKi8pOwogICAgICBjb25zdCBzdWJTZWFyY2ggPSB0aGlzLnN1YlNlYXJjaDsKICAgICAgY29uc3Qgc3ViRmllbGRzID0gdGhpcy5zdWJGaWVsZHM7CiAgICAgIGNvbnN0IHN1Yk1hdGNoZXMgPSB7fTsKICAgICAgZm9yIChsZXQgaSA9IG91dC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICAgIGNvbnN0IHJvdyA9IG91dFtpXTsKICAgICAgICBsZXQgaGl0cyA9IDA7CiAgICAgICAgbGV0IG1haW5Gb3VuZCA9IHRydWU7CiAgICAgICAgbWFpbkZvdW5kID0gaGFuZGxlU3RyaW5nU2VhcmNoKHNlYXJjaEZpZWxkcywgc2VhcmNoVG9rZW5zLCByb3cpOwogICAgICAgIGlmIChzdWJGaWVsZHMgJiYgc3ViU2VhcmNoKSB7CiAgICAgICAgICBjb25zdCBzdWJSb3dzID0gcm93W3N1YlNlYXJjaF0gfHwgW107CiAgICAgICAgICBmb3IgKGxldCBrID0gc3ViUm93cy5sZW5ndGggLSAxOyBrID49IDA7IGstLSkgewogICAgICAgICAgICBsZXQgc3ViRm91bmQgPSB0cnVlOwogICAgICAgICAgICBzdWJGb3VuZCA9IGhhbmRsZVN0cmluZ1NlYXJjaChzdWJGaWVsZHMsIHNlYXJjaFRva2Vucywgcm93KTsKICAgICAgICAgICAgaWYgKHN1YkZvdW5kKSB7CiAgICAgICAgICAgICAgaGl0cysrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgICBzdWJNYXRjaGVzW2dldChyb3csIHRoaXMua2V5RmllbGQpXSA9IGhpdHM7CiAgICAgICAgfQogICAgICAgIGlmICghbWFpbkZvdW5kICYmIGhpdHMgPT09IDApIHsKICAgICAgICAgIHJlbW92ZUF0KG91dCwgaSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMuc3ViTWF0Y2hlcyA9IHN1Yk1hdGNoZXM7CiAgICAgIHRoaXMucHJldmlvdXNSZXN1bHQgPSBvdXQ7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgYXJyYW5nZWRSb3dzKHEpIHsKICAgICAgLy8gVGhlIHJvd3MgY2hhbmdlZCBzbyB0aGUgb2xkIGZpbHRlciByZXN1bHQgaXMgbm8gbG9uZ2VyIHVzZWZ1bAogICAgICB0aGlzLnByZXZpb3VzUmVzdWx0ID0gbnVsbDsKICAgIH0KICB9Cn07CmZ1bmN0aW9uIGNvbHVtbnNUb1NlYXJjaEZpZWxkKGNvbHVtbnMpIHsKICBjb25zdCBvdXQgPSBbXTsKICAoY29sdW1ucyB8fCBbXSkuZm9yRWFjaChjb2x1bW4gPT4gewogICAgY29uc3QgZmllbGQgPSBjb2x1bW4uc2VhcmNoOwogICAgaWYgKGZpZWxkKSB7CiAgICAgIGlmICh0eXBlb2YgZmllbGQgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgYWRkT2JqZWN0KG91dCwgZmllbGQpOwogICAgICB9IGVsc2UgaWYgKGlzQXJyYXkoZmllbGQpKSB7CiAgICAgICAgYWRkT2JqZWN0cyhvdXQsIGZpZWxkKTsKICAgICAgfQogICAgfSBlbHNlIGlmIChmaWVsZCA9PT0gZmFsc2UpIHsKICAgICAgLy8gRG9uJ3QgYWRkIHRoZSBuYW1lCiAgICB9IGVsc2UgewogICAgICAvLyBVc2UgdmFsdWUvbmFtZSBhcyB0aGUgZGVmYXVsdAogICAgICBhZGRPYmplY3Qob3V0LCBjb2x1bW4udmFsdWUgfHwgY29sdW1uLm5hbWUpOwogICAgfQogIH0pOwogIHJldHVybiBvdXQuZmlsdGVyKHggPT4gISF4KTsKfQpjb25zdCBpcExpa2UgPSAvXlswLTlhLWZcLjpdKyQvaTsKZnVuY3Rpb24gaGFuZGxlU3RyaW5nU2VhcmNoKHNlYXJjaEZpZWxkcywgc2VhcmNoVG9rZW5zLCByb3cpIHsKICBmb3IgKGxldCBqID0gMDsgaiA8IHNlYXJjaFRva2Vucy5sZW5ndGg7IGorKykgewogICAgbGV0IGV4cGVjdCA9IHRydWU7CiAgICBsZXQgdG9rZW4gPSBzZWFyY2hUb2tlbnNbal07CiAgICBpZiAodG9rZW4uc3Vic3RyKDAsIDEpID09PSAnIScpIHsKICAgICAgZXhwZWN0ID0gZmFsc2U7CiAgICAgIHRva2VuID0gdG9rZW4uc3Vic3RyKDEpOwogICAgfQogICAgaWYgKHRva2VuICYmIG1hdGNoZXMoc2VhcmNoRmllbGRzLCB0b2tlbiwgcm93KSAhPT0gZXhwZWN0KSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0KfQpmdW5jdGlvbiBtYXRjaGVzKGZpZWxkcywgdG9rZW4sIGl0ZW0pIHsKICBmb3IgKGxldCBmaWVsZCBvZiBmaWVsZHMpIHsKICAgIGlmICghZmllbGQpIHsKICAgICAgY29udGludWU7CiAgICB9CgogICAgLy8gc29tZSBpdGVtcyBtaWdodCBub3QgZXZlbiBoYXZlIG1ldGFkYXRhLmxhYmVscyBvciBtZXRhZGF0YS5sYWJlbHMuc29tZXRoaW5nLi4uIGlnbm9yZSB0aG9zZSBpdGVtcy4gTm90aGluZyB0byBmaWx0ZXIgYnkKICAgIGlmICh0eXBlb2YgZmllbGQgIT09ICdmdW5jdGlvbicgJiYgZmllbGQuaW5jbHVkZXMoTEFCRUxfSURFTlRJRklFUikgJiYgKCFpdGVtLm1ldGFkYXRhLmxhYmVscyB8fCAhaXRlbS5tZXRhZGF0YS5sYWJlbHNbZmllbGQucmVwbGFjZShMQUJFTF9JREVOVElGSUVSLCAnJyldKSkgewogICAgICBjb250aW51ZTsKICAgIH0KICAgIGxldCBtb2RpZmllcjsKICAgIGxldCB2YWw7CiAgICBpZiAodHlwZW9mIGZpZWxkID09PSAnZnVuY3Rpb24nKSB7CiAgICAgIHZhbCA9IGZpZWxkKGl0ZW0pOwogICAgfSBlbHNlIGlmIChmaWVsZC5pbmNsdWRlcyhMQUJFTF9JREVOVElGSUVSKSkgewogICAgICB2YWwgPSBpdGVtLm1ldGFkYXRhLmxhYmVsc1tmaWVsZC5yZXBsYWNlKExBQkVMX0lERU5USUZJRVIsICcnKV07CiAgICB9IGVsc2UgewogICAgICBjb25zdCBpZHggPSBmaWVsZC5pbmRleE9mKCc6Jyk7CiAgICAgIGlmIChpZHggPiAwKSB7CiAgICAgICAgbW9kaWZpZXIgPSBmaWVsZC5zdWJzdHIoaWR4ICsgMSk7CiAgICAgICAgZmllbGQgPSBmaWVsZC5zdWJzdHIoMCwgaWR4KTsKICAgICAgfQogICAgICBpZiAoZmllbGQuaW5jbHVkZXMoJy4nKSkgewogICAgICAgIHZhbCA9IGdldChpdGVtLCBmaWVsZCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFsID0gaXRlbVtmaWVsZF07CiAgICAgIH0KICAgIH0KICAgIGlmICh2YWwgPT09IHVuZGVmaW5lZCkgewogICAgICBjb250aW51ZTsKICAgIH0KICAgIHZhbCA9IGAke3ZhbH1gLnRvTG93ZXJDYXNlKCk7CiAgICBpZiAoIXZhbCkgewogICAgICBjb250aW51ZTsKICAgIH0KICAgIGlmICghbW9kaWZpZXIpIHsKICAgICAgaWYgKHZhbC5pbmNsdWRlcyhgJHt0b2tlbn1gLnRvTG93ZXJDYXNlKCkpKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0gZWxzZSBpZiAobW9kaWZpZXIgPT09ICdleGFjdCcpIHsKICAgICAgaWYgKHZhbCA9PT0gdG9rZW4pIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgfSBlbHNlIGlmIChtb2RpZmllciA9PT0gJ2lwJykgewogICAgICBjb25zdCB0b2tlbk1heUJlSXAgPSBpcExpa2UudGVzdCh0b2tlbik7CiAgICAgIGlmICh0b2tlbk1heUJlSXApIHsKICAgICAgICBjb25zdCByZSA9IG5ldyBSZWdFeHAoYCg/Ol58XFwuKSR7dG9rZW59KD86XFwufCQpYCk7CiAgICAgICAgaWYgKHJlLnRlc3QodmFsKSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQogICAgICB9CiAgICB9IGVsc2UgaWYgKG1vZGlmaWVyID09PSAncHJlZml4JykgewogICAgICBpZiAodmFsLmluZGV4T2YodG9rZW4pID09PSAwKSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0KICB9CiAgcmV0dXJuIGZhbHNlOwp9"},{"version":3,"names":["get","addObject","addObjects","isArray","removeAt","ADV_FILTER_ALL_COLS_VALUE","ADV_FILTER_ALL_COLS_LABEL","LABEL_IDENTIFIER","data","searchQuery","previousFilter","previousResult","computed","searchFields","out","columnsToSearchField","columns","extraSearchFields","filteredRows","hasAdvancedFiltering","handleFiltering","handleAdvancedFiltering","methods","subMatches","length","arrangedRows","slice","res","filter","row","every","f","prop","allCols","advFilterSelectOptions","forEach","col","value","includes","concat","JSON","parse","isLabel","label","push","handleStringSearch","searchText","trim","toLowerCase","startsWith","searchTokens","split","subSearch","subFields","i","hits","mainFound","subRows","k","subFound","keyField","watch","q","column","field","search","name","x","ipLike","j","expect","token","substr","matches","fields","item","metadata","labels","replace","modifier","val","idx","indexOf","undefined","tokenMayBeIp","test","re","RegExp"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/SortableTable/filtering.js"],"sourcesContent":["import { get } from '@shell/utils/object';\nimport { addObject, addObjects, isArray, removeAt } from '@shell/utils/array';\n\nexport const ADV_FILTER_ALL_COLS_VALUE = 'allcols';\nexport const ADV_FILTER_ALL_COLS_LABEL = 'All Columns';\nconst LABEL_IDENTIFIER = ':::islabel';\n\nexport default {\n  data() {\n    return {\n      searchQuery:    null,\n      previousFilter: null,\n      previousResult: null,\n    };\n  },\n\n  computed: {\n    searchFields() {\n      const out = columnsToSearchField(this.columns);\n\n      if ( this.extraSearchFields ) {\n        addObjects(out, this.extraSearchFields);\n      }\n\n      return out;\n    },\n\n    /*\n    subFields: computed('subHeaders.@each.{searchField,name}', 'extraSearchSubFields.[]', function() {\n      let out = headersToSearchField(get(this, 'subHeaders'));\n\n      return out.addObjects(get(this, 'extraSearchSubFields') || []);\n    }),\n    */\n    filteredRows() {\n      // PROP hasAdvancedFiltering comes from Advanced Filtering mixin (careful changing data var there...)\n      if (!this.hasAdvancedFiltering) {\n        return this.handleFiltering();\n      } else {\n        return this.handleAdvancedFiltering();\n      }\n    },\n  },\n\n  methods: {\n    handleAdvancedFiltering() {\n      this.subMatches = null;\n\n      if (this.searchQuery.length) {\n        const out = (this.arrangedRows || []).slice();\n\n        const res = out.filter((row) => {\n          return this.searchQuery.every((f) => {\n            if (f.prop === ADV_FILTER_ALL_COLS_VALUE) {\n              // advFilterSelectOptions comes from Advanced Filtering mixin\n              // remove the All Columns option from the list so that we don't iterate over it\n              const allCols = this.advFilterSelectOptions.slice(1);\n              let searchFields = [];\n\n              allCols.forEach((col) => {\n                if (col.value.includes('[') && col.value.includes(']')) {\n                  searchFields = searchFields.concat(JSON.parse(col.value));\n                } else {\n                  // this means we are on the presence of a label, which should be dealt\n                // carefully because of object path such row.metadata.labels.\"app.kubernetes.io/managed-by\n                  const value = col.isLabel ? `${ col.label }${ LABEL_IDENTIFIER }` : col.value;\n\n                  searchFields.push(value);\n                }\n              });\n\n              return handleStringSearch(searchFields, [f.value], row);\n            } else {\n              if (f.prop.includes('[') && f.prop.includes(']')) {\n                return handleStringSearch(JSON.parse(f.prop), [f.value], row);\n              }\n\n              let prop = f.prop;\n\n              // this means we are on the presence of a label, which should be dealt\n              // carefully because of object path such row.metadata.labels.\"app.kubernetes.io/managed-by\"\n              if (f.prop.includes('metadata.labels')) {\n                prop = `${ f.label }${ LABEL_IDENTIFIER }`;\n              }\n\n              return handleStringSearch([prop], [f.value], row);\n            }\n          });\n        });\n\n        return res;\n      }\n\n      // return arrangedRows array if we don't have anything to search for...\n      return this.arrangedRows;\n    },\n\n    handleFiltering() {\n      const searchText = (this.searchQuery || '').trim().toLowerCase();\n      let out;\n\n      if ( searchText && this.previousResult && searchText.startsWith(this.previousFilter) ) {\n        // If the new search is an addition to the last one, we can start with the same set of results as last time\n        // and filter those down, since adding more searchText can only reduce the number of results.\n        out = this.previousResult.slice();\n      } else {\n        this.previousResult = null;\n        out = (this.arrangedRows || []).slice();\n      }\n\n      this.previousFilter = searchText;\n\n      if ( !searchText.length ) {\n        this.subMatches = null;\n        this.previousResult = null;\n\n        return out;\n      }\n\n      const searchFields = this.searchFields;\n      const searchTokens = searchText.split(/\\s*[, ]\\s*/);\n      const subSearch = this.subSearch;\n      const subFields = this.subFields;\n      const subMatches = {};\n\n      for ( let i = out.length - 1 ; i >= 0 ; i-- ) {\n        const row = out[i];\n        let hits = 0;\n        let mainFound = true;\n\n        mainFound = handleStringSearch(searchFields, searchTokens, row);\n\n        if ( subFields && subSearch) {\n          const subRows = row[subSearch] || [];\n\n          for ( let k = subRows.length - 1 ; k >= 0 ; k-- ) {\n            let subFound = true;\n\n            subFound = handleStringSearch(subFields, searchTokens, row);\n\n            if ( subFound ) {\n              hits++;\n            }\n          }\n\n          subMatches[get(row, this.keyField)] = hits;\n        }\n\n        if ( !mainFound && hits === 0 ) {\n          removeAt(out, i);\n        }\n      }\n\n      this.subMatches = subMatches;\n      this.previousResult = out;\n\n      return out;\n    }\n  },\n\n  watch: {\n    arrangedRows(q) {\n      // The rows changed so the old filter result is no longer useful\n      this.previousResult = null;\n    }\n  },\n};\n\nfunction columnsToSearchField(columns) {\n  const out = [];\n\n  (columns || []).forEach((column) => {\n    const field = column.search;\n\n    if ( field ) {\n      if ( typeof field === 'string' ) {\n        addObject(out, field);\n      } else if ( isArray(field) ) {\n        addObjects(out, field);\n      }\n    } else if ( field === false ) {\n      // Don't add the name\n    } else {\n      // Use value/name as the default\n      addObject(out, column.value || column.name);\n    }\n  });\n\n  return out.filter((x) => !!x);\n}\n\nconst ipLike = /^[0-9a-f\\.:]+$/i;\n\nfunction handleStringSearch(searchFields, searchTokens, row) {\n  for ( let j = 0 ; j < searchTokens.length ; j++ ) {\n    let expect = true;\n    let token = searchTokens[j];\n\n    if ( token.substr(0, 1) === '!' ) {\n      expect = false;\n      token = token.substr(1);\n    }\n\n    if ( token && matches(searchFields, token, row) !== expect ) {\n      return false;\n    }\n\n    return true;\n  }\n}\n\nfunction matches(fields, token, item) {\n  for ( let field of fields ) {\n    if ( !field ) {\n      continue;\n    }\n\n    // some items might not even have metadata.labels or metadata.labels.something... ignore those items. Nothing to filter by\n    if (typeof field !== 'function' &&\n    field.includes(LABEL_IDENTIFIER) &&\n    (!item.metadata.labels || !item.metadata.labels[field.replace(LABEL_IDENTIFIER, '')])) {\n      continue;\n    }\n\n    let modifier;\n    let val;\n\n    if (typeof field === 'function') {\n      val = field(item);\n    } else if (field.includes(LABEL_IDENTIFIER)) {\n      val = item.metadata.labels[field.replace(LABEL_IDENTIFIER, '')];\n    } else {\n      const idx = field.indexOf(':');\n\n      if ( idx > 0 ) {\n        modifier = field.substr(idx + 1);\n        field = field.substr(0, idx);\n      }\n\n      if ( field.includes('.') ) {\n        val = get(item, field);\n      } else {\n        val = item[field];\n      }\n    }\n\n    if ( val === undefined ) {\n      continue;\n    }\n\n    val = (`${ val }`).toLowerCase();\n    if ( !val ) {\n      continue;\n    }\n\n    if ( !modifier ) {\n      if ( val.includes((`${ token }`).toLowerCase()) ) {\n        return true;\n      }\n    } else if ( modifier === 'exact' ) {\n      if ( val === token ) {\n        return true;\n      }\n    } else if ( modifier === 'ip' ) {\n      const tokenMayBeIp = ipLike.test(token);\n\n      if ( tokenMayBeIp ) {\n        const re = new RegExp(`(?:^|\\\\.)${ token }(?:\\\\.|$)`);\n\n        if ( re.test(val) ) {\n          return true;\n        }\n      }\n    } else if ( modifier === 'prefix' ) {\n      if ( val.indexOf(token) === 0) {\n        return true;\n      }\n    }\n  }\n\n  return false;\n}\n"],"mappings":"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"}]}