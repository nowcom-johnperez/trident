{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/store/prefs.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/store/prefs.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/babel.config.js","mtime":1716430386791},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgU0VUVElORyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2V0dGluZ3MnOwppbXBvcnQgeyBNQU5BR0VNRU5ULCBTVEVWRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBjbG9uZSB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmNvbnN0IGRlZmluaXRpb25zID0ge307Ci8qKgogKiBLZXkvdmFsdWUgb2YgcHJlZnJlbmNlcyBhcmUgc3RvcmVkIGJlZm9yZSBsb2dpbiBoZXJlIGFuZCBjb29raWVzIGR1ZSBsYWNrIG9mIGFjY2VzcyBwZXJtaXNzaW9uLgogKiBPbmNlIHVzZXIgaXMgbG9nZ2VkIGluIHdoaWxlIHNldHRpbmcgYXNVc2VyUHJlZmVyZW5jZSwgdXBkYXRlIHN0b3JlZCBiZWZvcmUgbG9naW4gS2V5L3ZhbHVlIHRvIHRoZSBiYWNrZW5kIGluIGxvYWRTZXJ2ZXIgZnVuY3Rpb24uCiAqLwpsZXQgcHJlZnNCZWZvcmVMb2dpbiA9IHt9OwpleHBvcnQgY29uc3QgY3JlYXRlID0gZnVuY3Rpb24gKG5hbWUsIGRlZiwgb3B0ID0ge30pIHsKICBjb25zdCBwYXJzZUpTT04gPSBvcHQucGFyc2VKU09OID09PSB0cnVlOwogIGNvbnN0IGFzQ29va2llID0gb3B0LmFzQ29va2llID09PSB0cnVlOwogIGNvbnN0IGFzVXNlclByZWZlcmVuY2UgPSBvcHQuYXNVc2VyUHJlZmVyZW5jZSAhPT0gZmFsc2U7CiAgY29uc3Qgb3B0aW9ucyA9IG9wdC5vcHRpb25zOwogIGNvbnN0IGluaGVyaXRGcm9tID0gb3B0LmluaGVyaXRGcm9tOwogIGRlZmluaXRpb25zW25hbWVdID0gewogICAgZGVmLAogICAgb3B0aW9ucywKICAgIHBhcnNlSlNPTiwKICAgIGFzQ29va2llLAogICAgYXNVc2VyUHJlZmVyZW5jZSwKICAgIGluaGVyaXRGcm9tLAogICAgLy8gaWYgdmFsdWUgaXMgbm90IGRlZmluZWQgb24gc2VydmVyLCB3ZSBjYW4gZGVmYXVsdCBpdCB0byBhbm90aGVyIHByZWYKICAgIG1hbmdsZVJlYWQ6IG9wdC5tYW5nbGVSZWFkLAogICAgLy8gQWx0ZXIgdGhlIHZhbHVlIHJlYWQgZnJvbSB0aGUgQVBJICh0byBtYXRjaCBvbGQgUmFuY2hlciBleHBlY3RhdGlvbnMpCiAgICBtYW5nbGVXcml0ZTogb3B0Lm1hbmdsZVdyaXRlIC8vIEFsdGVyIHRoZSB2YWx1ZSB3cml0dGVuIGJhY2sgdG8gdGhlIEFQSSAoZGl0dG8pCiAgfTsKICByZXR1cm4gbmFtZTsKfTsKZXhwb3J0IGNvbnN0IG1hcFByZWYgPSBmdW5jdGlvbiAobmFtZSkgewogIHJldHVybiB7CiAgICBnZXQoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydwcmVmcy9nZXQnXShuYW1lKTsKICAgIH0sCiAgICBzZXQodmFsdWUpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3ByZWZzL3NldCcsIHsKICAgICAgICBrZXk6IG5hbWUsCiAgICAgICAgdmFsdWUKICAgICAgfSk7CiAgICB9CiAgfTsKfTsKCi8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tCmNvbnN0IHBhcnNlSlNPTiA9IHRydWU7IC8vIFNob3J0Y3V0IGZvciBzZXR0aW5nIGl0IGJlbG93CmNvbnN0IGFzQ29va2llID0gdHJ1ZTsgLy8gU3RvcmUgYXMgYSBjb29raWUgc28gdGhhdCBpdCdzIGF2YWlsYWJsZSBiZWZvcmUgYXV0aCArIG9uIHNlcnZlci1zaWRlCgovLyBLZXlzIG11c3QgYmUgbG93ZXJjYXNlIGFuZCB2YWxpZCBkbnMgbGFiZWwgKGEteiAwLTkgLSkKZXhwb3J0IGNvbnN0IENMVVNURVIgPSBjcmVhdGUoJ2NsdXN0ZXInLCAnJyk7CmV4cG9ydCBjb25zdCBMQVNUX05BTUVTUEFDRSA9IGNyZWF0ZSgnbGFzdC1uYW1lc3BhY2UnLCAnJyk7CmV4cG9ydCBjb25zdCBOQU1FU1BBQ0VfRklMVEVSUyA9IGNyZWF0ZSgnbnMtYnktY2x1c3RlcicsIHt9LCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgV09SS1NQQUNFID0gY3JlYXRlKCd3b3Jrc3BhY2UnLCAnJyk7CmV4cG9ydCBjb25zdCBFWFBBTkRFRF9HUk9VUFMgPSBjcmVhdGUoJ29wZW4tZ3JvdXBzJywgWydjbHVzdGVyJywgJ3BvbGljeScsICdyYmFjJywgJ3NlcnZpY2VEaXNjb3ZlcnknLCAnc3RvcmFnZScsICd3b3JrbG9hZCddLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgRkFWT1JJVEVfVFlQRVMgPSBjcmVhdGUoJ2Zhdi10eXBlJywgW10sIHsKICBwYXJzZUpTT04KfSk7CmV4cG9ydCBjb25zdCBQSU5ORURfQ0xVU1RFUlMgPSBjcmVhdGUoJ3Bpbm5lZC1jbHVzdGVycycsIFtdLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgR1JPVVBfUkVTT1VSQ0VTID0gY3JlYXRlKCdncm91cC1ieScsICduYW1lc3BhY2UnKTsKZXhwb3J0IGNvbnN0IERJRkYgPSBjcmVhdGUoJ2RpZmYnLCAndW5pZmllZCcsIHsKICBvcHRpb25zOiBbJ3VuaWZpZWQnLCAnc3BsaXQnXQp9KTsKZXhwb3J0IGNvbnN0IFRIRU1FID0gY3JlYXRlKCd0aGVtZScsICdhdXRvJywgewogIG9wdGlvbnM6IFsnbGlnaHQnLCAnYXV0bycsICdkYXJrJ10sCiAgYXNDb29raWUsCiAgcGFyc2VKU09OLAogIG1hbmdsZVJlYWQ6IHggPT4geC5yZXBsYWNlKC9edWktLywgJycpLAogIG1hbmdsZVdyaXRlOiB4ID0+IGB1aS0ke3h9YAp9KTsKZXhwb3J0IGNvbnN0IFBSRUZFUlNfU0NIRU1FID0gY3JlYXRlKCdwY3MnLCAnJywgewogIGFzQ29va2llLAogIGFzVXNlclByZWZlcmVuY2U6IGZhbHNlCn0pOwpleHBvcnQgY29uc3QgTE9DQUxFID0gY3JlYXRlKCdsb2NhbGUnLCAnZW4tdXMnLCB7CiAgYXNDb29raWUKfSk7CmV4cG9ydCBjb25zdCBLRVlNQVAgPSBjcmVhdGUoJ2tleW1hcCcsICdzdWJsaW1lJywgewogIG9wdGlvbnM6IFsnc3VibGltZScsICdlbWFjcycsICd2aW0nXQp9KTsKZXhwb3J0IGNvbnN0IFJPV1NfUEVSX1BBR0UgPSBjcmVhdGUoJ3Blci1wYWdlJywgMTAwLCB7CiAgb3B0aW9uczogWzEwLCAyNSwgNTAsIDEwMF0sCiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgTE9HU19XUkFQID0gY3JlYXRlKCdsb2dzLXdyYXAnLCB0cnVlLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgTE9HU19USU1FID0gY3JlYXRlKCdsb2dzLXRpbWUnLCB0cnVlLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgTE9HU19SQU5HRSA9IGNyZWF0ZSgnbG9ncy1yYW5nZScsICczMCBtaW51dGVzJywgewogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IEhJREVfUkVQT1MgPSBjcmVhdGUoJ2hpZGUtcmVwb3MnLCBbXSwgewogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IEhJREVfREVTQyA9IGNyZWF0ZSgnaGlkZS1kZXNjJywgW10sIHsKICBwYXJzZUpTT04KfSk7CmV4cG9ydCBjb25zdCBISURFX1NFTlNJVElWRSA9IGNyZWF0ZSgnaGlkZS1zZW5zaXRpdmUnLCB0cnVlLCB7CiAgb3B0aW9uczogW3RydWUsIGZhbHNlXSwKICBwYXJzZUpTT04KfSk7CmV4cG9ydCBjb25zdCBTSE9XX1BSRV9SRUxFQVNFID0gY3JlYXRlKCdzaG93LXByZS1yZWxlYXNlJywgZmFsc2UsIHsKICBvcHRpb25zOiBbZmFsc2UsIHRydWVdLAogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IFNIT1dfQ0hBUlRfTU9ERSA9IGNyZWF0ZSgnY2hhcnQtbW9kZScsICdmZWF0dXJlZCcsIHsKICBwYXJzZUpTT04KfSk7CmV4cG9ydCBjb25zdCBEQVRFX0ZPUk1BVCA9IGNyZWF0ZSgnZGF0ZS1mb3JtYXQnLCAnZGRkLCBNTU0gRCBZWVlZJywgewogIG9wdGlvbnM6IFsnZGRkLCBNTU0gRCBZWVlZJywgJ2RkZCwgRCBNTU0gWVlZWScsICdEL00vWVlZWScsICdNL0QvWVlZWScsICdZWVlZLU1NLUREJ10KfSk7CmV4cG9ydCBjb25zdCBUSU1FX0ZPUk1BVCA9IGNyZWF0ZSgndGltZS1mb3JtYXQnLCAnaDptbTpzcyBhJywgewogIG9wdGlvbnM6IFsnaDptbTpzcyBhJywgJ0hIOm1tOnNzJ10KfSk7CmV4cG9ydCBjb25zdCBUSU1FX1pPTkUgPSBjcmVhdGUoJ3RpbWUtem9uZScsICdsb2NhbCcpOwovLyBERVYgd2lsbCBiZSBkZXByZWNhdGVkIG9uIHYyLjcuMCwgYnV0IGlzIG5lZWRlZCBzbyB0aGF0IHdlIGNhbiBncmFiIHRoZSB2YWx1ZSBmb3IgdGhlIG5ldyBzZXR0aW5ncyB0aGF0IGRlcml2ZWQgZnJvbSBpdAovLyBzdWNoIGFzOiBWSUVXX0lOX0FQSSwgQUxMX05BTUVTUEFDRVMsIFRIRU1FX1NIT1JUQ1VUCmV4cG9ydCBjb25zdCBERVYgPSBjcmVhdGUoJ2RldicsIGZhbHNlLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgVklFV19JTl9BUEkgPSBjcmVhdGUoJ3ZpZXctaW4tYXBpJywgZmFsc2UsIHsKICBwYXJzZUpTT04sCiAgaW5oZXJpdEZyb206IERFVgp9KTsKZXhwb3J0IGNvbnN0IEFMTF9OQU1FU1BBQ0VTID0gY3JlYXRlKCdhbGwtbmFtZXNwYWNlcycsIGZhbHNlLCB7CiAgcGFyc2VKU09OLAogIGluaGVyaXRGcm9tOiBERVYKfSk7CmV4cG9ydCBjb25zdCBUSEVNRV9TSE9SVENVVCA9IGNyZWF0ZSgndGhlbWUtc2hvcnRjdXQnLCBmYWxzZSwgewogIHBhcnNlSlNPTiwKICBpbmhlcml0RnJvbTogREVWCn0pOwpleHBvcnQgY29uc3QgTEFTVF9WSVNJVEVEID0gY3JlYXRlKCdsYXN0LXZpc2l0ZWQnLCAnaG9tZScsIHsKICBwYXJzZUpTT04KfSk7CmV4cG9ydCBjb25zdCBTRUVOX1dIQVRTX05FVyA9IGNyZWF0ZSgnc2Vlbi13aGF0c25ldycsICcnLCB7CiAgcGFyc2VKU09OCn0pOwpleHBvcnQgY29uc3QgUkVBRF9XSEFUU19ORVcgPSBjcmVhdGUoJ3JlYWQtd2hhdHNuZXcnLCAnJywgewogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IEFGVEVSX0xPR0lOX1JPVVRFID0gY3JlYXRlKCdhZnRlci1sb2dpbi1yb3V0ZScsICdob21lJywgewogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IEhJREVfSE9NRV9QQUdFX0NBUkRTID0gY3JlYXRlKCdob21lLXBhZ2UtY2FyZHMnLCB7fSwgewogIHBhcnNlSlNPTgp9KTsKZXhwb3J0IGNvbnN0IFBMVUdJTl9ERVZFTE9QRVIgPSBjcmVhdGUoJ3BsdWdpbi1kZXZlbG9wZXInLCBmYWxzZSwgewogIHBhcnNlSlNPTiwKICBpbmhlcml0RnJvbTogREVWCn0pOyAvLyBJcyB0aGUgdXNlciBhIHBsdWdpbiBkZXZlbG9wZXI/CgpleHBvcnQgY29uc3QgX1JLRTEgPSAncmtlMSc7CmV4cG9ydCBjb25zdCBfUktFMiA9ICdya2UyJzsKZXhwb3J0IGNvbnN0IFBST1ZJU0lPTkVSID0gY3JlYXRlKCdwcm92aXNpb25lcicsIF9SS0UyLCB7CiAgb3B0aW9uczogW19SS0UxLCBfUktFMl0KfSk7CgovLyBQcm9tbyBmb3IgUG9kIFNlY3VyaXR5IFBvbGljaWVzIChQU1BzKSBiZWluZyBkZXByZWNhdGVkIG9uIGt1YmUgdmVyc2lvbiAxLjI1IG9uIENsdXN0ZXIgRGFzaGJvYXJkIHBhZ2UKZXhwb3J0IGNvbnN0IFBTUF9ERVBSRUNBVElPTl9CQU5ORVIgPSBjcmVhdGUoJ2hpZGUtcHNwLWRlcHJlY2F0aW9uLWJhbm5lcicsIGZhbHNlLCB7CiAgcGFyc2VKU09OCn0pOwoKLy8gTWF4aW11bSBudW1iZXIgb2YgY2x1c3RlcnMgdG8gc2hvdyBpbiB0aGUgc2xpZGUtaW4gbWVudQpleHBvcnQgY29uc3QgTUVOVV9NQVhfQ0xVU1RFUlMgPSAxMDsKLy8gUHJvbXB0IGZvciBjb25maXJtIHdoZW4gc2NhbGluZyBkb3duIG5vZGUgcG9vbCBpbiBHVUkgYW5kIHNhdmUgdGhlIHByZWYKZXhwb3J0IGNvbnN0IFNDQUxFX1BPT0xfUFJPTVBUID0gY3JlYXRlKCdzY2FsZS1wb29sLXByb21wdCcsIG51bGwsIHsKICBwYXJzZUpTT04KfSk7Ci8vIC0tLS0tLS0tLS0tLS0tLS0tLS0tCgpjb25zdCBjb29raWVQcmVmaXggPSAnUl8nOwpjb25zdCBjb29raWVPcHRpb25zID0gewogIG1heEFnZTogMzY1ICogODY0MDAsCiAgcGF0aDogJy8nLAogIHNhbWVTaXRlOiB0cnVlLAogIHNlY3VyZTogdHJ1ZQp9OwpleHBvcnQgY29uc3Qgc3RhdGUgPSBmdW5jdGlvbiAoKSB7CiAgcmV0dXJuIHsKICAgIGNvb2tpZXNMb2FkZWQ6IGZhbHNlLAogICAgZGF0YToge30sCiAgICBkZWZpbml0aW9ucwogIH07Cn07CmV4cG9ydCBjb25zdCBnZXR0ZXJzID0gewogIGdldDogc3RhdGUgPT4ga2V5ID0+IHsKICAgIGNvbnN0IGRlZmluaXRpb24gPSBzdGF0ZS5kZWZpbml0aW9uc1trZXldOwogICAgaWYgKCFkZWZpbml0aW9uKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwcmVmZXJlbmNlOiAke2tleX1gKTsKICAgIH0KICAgIGNvbnN0IHVzZXIgPSBzdGF0ZS5kYXRhW2tleV07CiAgICBpZiAodXNlciAhPT0gdW5kZWZpbmVkKSB7CiAgICAgIHJldHVybiBjbG9uZSh1c2VyKTsKICAgIH0KICAgIGNvbnN0IGRlZiA9IGNsb25lKGRlZmluaXRpb24uZGVmKTsKICAgIHJldHVybiBkZWY7CiAgfSwKICBkZWZhdWx0VmFsdWU6IHN0YXRlID0+IGtleSA9PiB7CiAgICBjb25zdCBkZWZpbml0aW9uID0gc3RhdGUuZGVmaW5pdGlvbnNba2V5XTsKICAgIGlmICghZGVmaW5pdGlvbikgewogICAgICB0aHJvdyBuZXcgRXJyb3IoYFVua25vd24gcHJlZmVyZW5jZTogJHtrZXl9YCk7CiAgICB9CiAgICByZXR1cm4gY2xvbmUoZGVmaW5pdGlvbi5kZWYpOwogIH0sCiAgb3B0aW9uczogc3RhdGUgPT4ga2V5ID0+IHsKICAgIGNvbnN0IGRlZmluaXRpb24gPSBzdGF0ZS5kZWZpbml0aW9uc1trZXldOwogICAgaWYgKCFkZWZpbml0aW9uKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5rbm93biBwcmVmZXJlbmNlOiAke2tleX1gKTsKICAgIH0KICAgIGlmICghZGVmaW5pdGlvbi5vcHRpb25zKSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgUHJlZmVyZW5jZSBkb2VzIG5vdCBoYXZlIG9wdGlvbnM6ICR7a2V5fWApOwogICAgfQogICAgcmV0dXJuIGRlZmluaXRpb24ub3B0aW9ucy5zbGljZSgpOwogIH0sCiAgdGhlbWU6IChzdGF0ZSwgZ2V0dGVycywgcm9vdFN0YXRlLCByb290R2V0dGVycykgPT4gewogICAgY29uc3Qgc2V0dGluZyA9IHJvb3RHZXR0ZXJzWydtYW5hZ2VtZW50L2J5SWQnXShNQU5BR0VNRU5ULlNFVFRJTkcsIFNFVFRJTkcuVEhFTUUpOwogICAgaWYgKHNldHRpbmcgIT09IG51bGwgJiYgc2V0dGluZyAhPT0gdm9pZCAwICYmIHNldHRpbmcudmFsdWUpIHsKICAgICAgcmV0dXJuIHNldHRpbmcgPT09IG51bGwgfHwgc2V0dGluZyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2V0dGluZy52YWx1ZTsKICAgIH0KICAgIGxldCB0aGVtZSA9IGdldHRlcnNbJ2dldCddKFRIRU1FKTsKICAgIGNvbnN0IHBjcyA9IGdldHRlcnNbJ2dldCddKFBSRUZFUlNfU0NIRU1FKTsKCiAgICAvLyBjb25zb2xlLmxvZygnR2V0IFRoZW1lJywgdGhlbWUsIHBjcyk7CgogICAgLy8gRW1iZXIgVUkgdXNlcyB0aGlzIHByZWZpeAogICAgaWYgKHRoZW1lLnN0YXJ0c1dpdGgoJ3VpLScpKSB7CiAgICAgIHRoZW1lID0gdGhlbWUuc3Vic3RyKDMpOwogICAgfQogICAgaWYgKHRoZW1lID09PSAnYXV0bycpIHsKICAgICAgaWYgKHBjcyA9PT0gJ2xpZ2h0JyB8fCBwY3MgPT09ICdkYXJrJykgewogICAgICAgIHJldHVybiBwY3M7CiAgICAgIH0KICAgICAgcmV0dXJuICdkYXJrJzsKICAgIH0KICAgIHJldHVybiB0aGVtZTsKICB9LAogIGFmdGVyTG9naW5Sb3V0ZTogKHN0YXRlLCBnZXR0ZXJzKSA9PiB7CiAgICBjb25zdCBhZnRlckxvZ2luUm91dGVQcmVmID0gZ2V0dGVyc1snZ2V0J10oQUZURVJfTE9HSU5fUk9VVEUpOwogICAgaWYgKHR5cGVvZiBhZnRlckxvZ2luUm91dGVQcmVmICE9PSAnc3RyaW5nJykgewogICAgICByZXR1cm4gYWZ0ZXJMb2dpblJvdXRlUHJlZjsKICAgIH0KICAgIHN3aXRjaCAodHJ1ZSkgewogICAgICBjYXNlIGFmdGVyTG9naW5Sb3V0ZVByZWYgPT09ICdob21lJzoKICAgICAgICByZXR1cm4gewogICAgICAgICAgbmFtZTogJ2hvbWUnCiAgICAgICAgfTsKICAgICAgY2FzZSBhZnRlckxvZ2luUm91dGVQcmVmID09PSAnbGFzdC12aXNpdGVkJzoKICAgICAgICB7CiAgICAgICAgICBjb25zdCBsYXN0VmlzaXRlZFByZWYgPSBnZXR0ZXJzWydnZXQnXShMQVNUX1ZJU0lURUQpOwogICAgICAgICAgaWYgKGxhc3RWaXNpdGVkUHJlZikgewogICAgICAgICAgICByZXR1cm4gbGFzdFZpc2l0ZWRQcmVmOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgY2x1c3RlclByZWYgPSBnZXR0ZXJzWydnZXQnXShDTFVTVEVSKTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG5hbWU6ICdjLWNsdXN0ZXItZXhwbG9yZXInLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBwcm9kdWN0OiAnZXhwbG9yZXInLAogICAgICAgICAgICAgIGNsdXN0ZXI6IGNsdXN0ZXJQcmVmCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICBjYXNlICEhYWZ0ZXJMb2dpblJvdXRlUHJlZi5tYXRjaCgvListZGFzaGJvYXJkJC8pOgogICAgICAgIHsKICAgICAgICAgIGNvbnN0IGNsdXN0ZXJJZCA9IGFmdGVyTG9naW5Sb3V0ZVByZWYuc3BsaXQoJy1kYXNoYm9hcmQnKVswXTsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIG5hbWU6ICdjLWNsdXN0ZXItZXhwbG9yZXInLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBwcm9kdWN0OiAnZXhwbG9yZXInLAogICAgICAgICAgICAgIGNsdXN0ZXI6IGNsdXN0ZXJJZAogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4gewogICAgICAgICAgbmFtZTogYWZ0ZXJMb2dpblJvdXRlUHJlZgogICAgICAgIH07CiAgICB9CiAgfQp9OwpleHBvcnQgY29uc3QgbXV0YXRpb25zID0gewogIGxvYWQoc3RhdGUsIHsKICAgIGtleSwKICAgIHZhbHVlCiAgfSkgewogICAgVnVlLnNldChzdGF0ZS5kYXRhLCBrZXksIHZhbHVlKTsKICB9LAogIGNvb2tpZXNMb2FkZWQoc3RhdGUpIHsKICAgIHN0YXRlLmNvb2tpZXNMb2FkZWQgPSB0cnVlOwogIH0sCiAgcmVzZXQoc3RhdGUpIHsKICAgIGZvciAoY29uc3Qga2V5IGluIHN0YXRlLmRlZmluaXRpb25zKSB7CiAgICAgIHZhciBfc3RhdGUkZGVmaW5pdGlvbnMka2U7CiAgICAgIGlmICgoX3N0YXRlJGRlZmluaXRpb25zJGtlID0gc3RhdGUuZGVmaW5pdGlvbnNba2V5XSkgIT09IG51bGwgJiYgX3N0YXRlJGRlZmluaXRpb25zJGtlICE9PSB2b2lkIDAgJiYgX3N0YXRlJGRlZmluaXRpb25zJGtlLmFzQ29va2llKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgZGVsZXRlIHN0YXRlLmRhdGFba2V5XTsKICAgIH0KICB9LAogIHNldERlZmluaXRpb24oc3RhdGUsIHsKICAgIG5hbWUsCiAgICBkZWZpbml0aW9uID0ge30KICB9KSB7CiAgICBzdGF0ZS5kZWZpbml0aW9uc1tuYW1lXSA9IGRlZmluaXRpb247CiAgfQp9OwpleHBvcnQgY29uc3QgYWN0aW9ucyA9IHsKICBhc3luYyBzZXQoewogICAgZGlzcGF0Y2gsCiAgICBjb21taXQsCiAgICByb290R2V0dGVycywKICAgIHN0YXRlCiAgfSwgb3B0KSB7CiAgICBsZXQgewogICAgICBrZXksCiAgICAgIHZhbHVlCiAgICB9ID0gb3B0OyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIHByZWZlci1jb25zdAogICAgY29uc3QgZGVmaW5pdGlvbiA9IHN0YXRlLmRlZmluaXRpb25zW2tleV07CiAgICBsZXQgc2VydmVyOwogICAgaWYgKG9wdC52YWwpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdVc2UgdmFsdWUsIG5vdCB2YWwnKTsKICAgIH0KICAgIGNvbW1pdCgnbG9hZCcsIHsKICAgICAga2V5LAogICAgICB2YWx1ZQogICAgfSk7CiAgICBpZiAoZGVmaW5pdGlvbi5hc0Nvb2tpZSkgewogICAgICBjb25zdCBvcHQgPSB7CiAgICAgICAgLi4uY29va2llT3B0aW9ucywKICAgICAgICBwYXJzZUpTT046IGRlZmluaXRpb24ucGFyc2VKU09OID09PSB0cnVlCiAgICAgIH07CiAgICAgIHRoaXMuJGNvb2tpZXMuc2V0KGAke2Nvb2tpZVByZWZpeH0ke2tleX1gLnRvVXBwZXJDYXNlKCksIHZhbHVlLCBvcHQpOwogICAgfQogICAgaWYgKGRlZmluaXRpb24uYXNVc2VyUHJlZmVyZW5jZSkgewogICAgICBjb25zdCBjaGVja0xvZ2luID0gcm9vdEdldHRlcnNbJ2F1dGgvbG9nZ2VkSW4nXTsKCiAgICAgIC8vIENoZWNrIGZvciBsb2dpbiBzdGF0dXMKICAgICAgaWYgKCFjaGVja0xvZ2luKSB7CiAgICAgICAgcHJlZnNCZWZvcmVMb2dpbltrZXldID0gdmFsdWU7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIF9zZXJ2ZXI7CiAgICAgICAgc2VydmVyID0gYXdhaXQgZGlzcGF0Y2goJ2xvYWRTZXJ2ZXInLCBrZXkpOyAvLyBUaGVyZSdzIG5vIHdhdGNoIG9uIHByZWZzLCBzbyBnZXQgYmVmb3JlIHNldC4uLgoKICAgICAgICBpZiAoKF9zZXJ2ZXIgPSBzZXJ2ZXIpICE9PSBudWxsICYmIF9zZXJ2ZXIgIT09IHZvaWQgMCAmJiBfc2VydmVyLmRhdGEpIHsKICAgICAgICAgIGlmIChkZWZpbml0aW9uLm1hbmdsZVdyaXRlKSB7CiAgICAgICAgICAgIHZhbHVlID0gZGVmaW5pdGlvbi5tYW5nbGVXcml0ZSh2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoZGVmaW5pdGlvbi5wYXJzZUpTT04pIHsKICAgICAgICAgICAgVnVlLnNldChzZXJ2ZXIuZGF0YSwga2V5LCBKU09OLnN0cmluZ2lmeSh2YWx1ZSkpOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgVnVlLnNldChzZXJ2ZXIuZGF0YSwga2V5LCB2YWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgICBhd2FpdCBzZXJ2ZXIuc2F2ZSh7CiAgICAgICAgICAgIHJlZGlyZWN0VW5hdXRob3JpemVkOiBmYWxzZQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gV2VsbCBpdCBmYWlsZWQsIGJ1dCBub3QgbXVjaCB0byBkbyBhYm91dCBpdC4uLgoKICAgICAgICAvLyBSZXR1cm4gdGhlIGVycm9yCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIHR5cGU6IGUudHlwZSwKICAgICAgICAgIHN0YXR1czogZS5zdGF0dXMKICAgICAgICB9OwogICAgICB9CiAgICB9CiAgfSwKICBhc3luYyBzZXRUaGVtZSh7CiAgICBkaXNwYXRjaAogIH0sIHZhbCkgewogICAgYXdhaXQgZGlzcGF0Y2goJ3NldCcsIHsKICAgICAga2V5OiBUSEVNRSwKICAgICAgdmFsdWU6IHZhbAogICAgfSk7CiAgfSwKICBsb2FkQ29va2llcyh7CiAgICBzdGF0ZSwKICAgIGNvbW1pdAogIH0pIHsKICAgIGlmIChzdGF0ZS5jb29raWVzTG9hZGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGZvciAoY29uc3Qga2V5IGluIHN0YXRlLmRlZmluaXRpb25zKSB7CiAgICAgIGNvbnN0IGRlZmluaXRpb24gPSBzdGF0ZS5kZWZpbml0aW9uc1trZXldOwogICAgICBpZiAoIWRlZmluaXRpb24uYXNDb29raWUpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBjb25zdCBvcHQgPSB7CiAgICAgICAgcGFyc2VKU09OOiBkZWZpbml0aW9uLnBhcnNlSlNPTiA9PT0gdHJ1ZQogICAgICB9OwogICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuJGNvb2tpZXMuZ2V0KGAke2Nvb2tpZVByZWZpeH0ke2tleX1gLnRvVXBwZXJDYXNlKCksIG9wdCk7CiAgICAgIGlmICh2YWx1ZSAhPT0gdW5kZWZpbmVkKSB7CiAgICAgICAgY29tbWl0KCdsb2FkJywgewogICAgICAgICAga2V5LAogICAgICAgICAgdmFsdWUKICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgY29tbWl0KCdjb29raWVzTG9hZGVkJyk7CiAgfSwKICBsb2FkVGhlbWUoewogICAgc3RhdGUsCiAgICBkaXNwYXRjaAogIH0pIHsKICAgIGlmIChwcm9jZXNzLmNsaWVudCkgewogICAgICBjb25zdCB3YXRjaERhcmsgPSB3aW5kb3cubWF0Y2hNZWRpYSgnKHByZWZlcnMtY29sb3Itc2NoZW1lOiBkYXJrKScpOwogICAgICBjb25zdCB3YXRjaExpZ2h0ID0gd2luZG93Lm1hdGNoTWVkaWEoJyhwcmVmZXJzLWNvbG9yLXNjaGVtZTogbGlnaHQpJyk7CiAgICAgIGNvbnN0IHdhdGNoTm9uZSA9IHdpbmRvdy5tYXRjaE1lZGlhKCcocHJlZmVycy1jb2xvci1zY2hlbWU6IG5vLXByZWZlcmVuY2UpJyk7CiAgICAgIGNvbnN0IGludGVydmFsID0gMzAgKiA2MCAqIDEwMDA7CiAgICAgIGNvbnN0IG5leHRIYWxmSG91ciA9IGludGVydmFsIC0gTWF0aC5yb3VuZChuZXcgRGF0ZSgpLmdldFRpbWUoKSkgJSBpbnRlcnZhbDsKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgZGlzcGF0Y2goJ2xvYWRUaGVtZScpOwogICAgICB9LCBuZXh0SGFsZkhvdXIpOwogICAgICAvLyBjb25zb2xlLmxvZygnVXBkYXRlIHRoZW1lIGluJywgbmV4dEhhbGZIb3VyLCAnbXMnKTsKCiAgICAgIGlmICh3YXRjaERhcmsubWF0Y2hlcykgewogICAgICAgIGNoYW5nZWQoJ2RhcmsnKTsKICAgICAgfSBlbHNlIGlmICh3YXRjaExpZ2h0Lm1hdGNoZXMpIHsKICAgICAgICBjaGFuZ2VkKCdsaWdodCcpOwogICAgICB9IGVsc2UgewogICAgICAgIGNoYW5nZWQoZnJvbUNsb2NrKCkpOwogICAgICB9CiAgICAgIHdhdGNoRGFyay5hZGRMaXN0ZW5lcihlID0+IHsKICAgICAgICBpZiAoZS5tYXRjaGVzKSB7CiAgICAgICAgICBjaGFuZ2VkKCdkYXJrJyk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgd2F0Y2hMaWdodC5hZGRMaXN0ZW5lcihlID0+IHsKICAgICAgICBpZiAoZS5tYXRjaGVzKSB7CiAgICAgICAgICBjaGFuZ2VkKCdsaWdodCcpOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHdhdGNoTm9uZS5hZGRMaXN0ZW5lcihlID0+IHsKICAgICAgICBpZiAoZS5tYXRjaGVzKSB7CiAgICAgICAgICBjaGFuZ2VkKGZyb21DbG9jaygpKTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogICAgZnVuY3Rpb24gY2hhbmdlZCh2YWx1ZSkgewogICAgICAvLyBjb25zb2xlLmxvZygnUHJlZmVycyBUaGVtZTonLCB2YWx1ZSk7CiAgICAgIGRpc3BhdGNoKCdzZXQnLCB7CiAgICAgICAga2V5OiBQUkVGRVJTX1NDSEVNRSwKICAgICAgICB2YWx1ZQogICAgICB9KTsKICAgIH0KICAgIGZ1bmN0aW9uIGZyb21DbG9jaygpIHsKICAgICAgY29uc3QgaG91ciA9IG5ldyBEYXRlKCkuZ2V0SG91cnMoKTsKICAgICAgaWYgKGhvdXIgPCA3IHx8IGhvdXIgPj0gMTgpIHsKICAgICAgICByZXR1cm4gJ2RhcmsnOwogICAgICB9CiAgICAgIHJldHVybiAnbGlnaHQnOwogICAgfQogIH0sCiAgYXN5bmMgbG9hZFNlcnZlcih7CiAgICBzdGF0ZSwKICAgIGRpc3BhdGNoLAogICAgY29tbWl0LAogICAgcm9vdFN0YXRlLAogICAgcm9vdEdldHRlcnMKICB9LCBpZ25vcmVLZXkpIHsKICAgIHZhciBfc2VydmVyMjsKICAgIGxldCBzZXJ2ZXIgPSB7CiAgICAgIGRhdGE6IHt9CiAgICB9OwogICAgdHJ5IHsKICAgICAgY29uc3QgYWxsID0gYXdhaXQgZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsKICAgICAgICB0eXBlOiBTVEVWRS5QUkVGRVJFTkNFLAogICAgICAgIG9wdDogewogICAgICAgICAgdXJsOiAndXNlcnByZWZlcmVuY2VzJywKICAgICAgICAgIGZvcmNlOiB0cnVlLAogICAgICAgICAgd2F0Y2g6IGZhbHNlLAogICAgICAgICAgcmVkaXJlY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLAogICAgICAgICAgc3RyZWFtOiBmYWxzZQogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICAgIHNlcnZlciA9IGFsbCA9PT0gbnVsbCB8fCBhbGwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFsbFswXTsKICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgbG9hZGluZyBwcmVmZXJlbmNlcycsIGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKCiAgICAgIHJldHVybjsKICAgIH0KICAgIGlmICghKChfc2VydmVyMiA9IHNlcnZlcikgIT09IG51bGwgJiYgX3NlcnZlcjIgIT09IHZvaWQgMCAmJiBfc2VydmVyMi5kYXRhKSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gaWYgcHJlZnNCZWZvcmVMb2dpbiBoYXMgdmFsdWVzIGZyb20gbG9naW4gcGFnZSwgdXBkYXRlIHRoZSBiYWNrZW5kCiAgICBpZiAoT2JqZWN0LmtleXMocHJlZnNCZWZvcmVMb2dpbikubGVuZ3RoID4gMCkgewogICAgICBPYmplY3Qua2V5cyhwcmVmc0JlZm9yZUxvZ2luKS5mb3JFYWNoKGtleSA9PiB7CiAgICAgICAgc2VydmVyLmRhdGFba2V5XSA9IHByZWZzQmVmb3JlTG9naW5ba2V5XTsKICAgICAgfSk7CiAgICAgIGF3YWl0IHNlcnZlci5zYXZlKHsKICAgICAgICByZWRpcmVjdFVuYXV0aG9yaXplZDogZmFsc2UKICAgICAgfSk7CgogICAgICAvLyBDbGVhciBwcmVmc0JlZm9yZUxvZ2luLCBhcyB3ZSBoYXZlIG5vdyBzYXZlZCB0aGVzZXMKICAgICAgcHJlZnNCZWZvcmVMb2dpbiA9IHt9OwogICAgfQogICAgZm9yIChjb25zdCBrZXkgaW4gc3RhdGUuZGVmaW5pdGlvbnMpIHsKICAgICAgY29uc3QgZGVmaW5pdGlvbiA9IHN0YXRlLmRlZmluaXRpb25zW2tleV07CiAgICAgIGxldCB2YWx1ZSA9IGNsb25lKHNlcnZlci5kYXRhW2tleV0pOwogICAgICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCAmJiBkZWZpbml0aW9uLmluaGVyaXRGcm9tKSB7CiAgICAgICAgdmFsdWUgPSBjbG9uZShzZXJ2ZXIuZGF0YVtkZWZpbml0aW9uLmluaGVyaXRGcm9tXSk7CiAgICAgIH0KICAgICAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQgfHwga2V5ID09PSBpZ25vcmVLZXkpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoZGVmaW5pdGlvbi5wYXJzZUpTT04pIHsKICAgICAgICB0cnkgewogICAgICAgICAgdmFsdWUgPSBKU09OLnBhcnNlKHZhbHVlKTsKICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgc2VydmVyIHByZWYnLCBrZXksIHZhbHVlLCBlcnIpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoZGVmaW5pdGlvbi5tYW5nbGVSZWFkKSB7CiAgICAgICAgdmFsdWUgPSBkZWZpbml0aW9uLm1hbmdsZVJlYWQodmFsdWUpOwogICAgICB9CiAgICAgIGNvbW1pdCgnbG9hZCcsIHsKICAgICAgICBrZXksCiAgICAgICAgdmFsdWUKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gc2VydmVyOwogIH0sCiAgc2V0TGFzdFZpc2l0ZWQoewogICAgc3RhdGUsCiAgICBkaXNwYXRjaCwKICAgIGdldHRlcnMKICB9LCByb3V0ZSkgewogICAgaWYgKCFyb3V0ZSkgewogICAgICByZXR1cm47CiAgICB9CgogICAgLy8gT25seSBzYXZlIHRoZSBsYXN0IHZpc2l0ZWQgcGFnZSBpZiB0aGUgdXNlciBoYXMgdGhhdCBzZXQgYXMgdGhlIGxvZ2luIHJvdXRlIHByZWZlcmVuY2UKICAgIGNvbnN0IGFmdGVyTG9naW5Sb3V0ZVByZWYgPSBnZXR0ZXJzWydnZXQnXShBRlRFUl9MT0dJTl9ST1VURSk7CiAgICBjb25zdCBkb05vdFRyYWNrTGFzdFZpc2l0ZWQgPSB0eXBlb2YgYWZ0ZXJMb2dpblJvdXRlUHJlZiAhPT0gJ3N0cmluZycgfHwgYWZ0ZXJMb2dpblJvdXRlUHJlZiAhPT0gJ2xhc3QtdmlzaXRlZCc7CiAgICBpZiAoZG9Ob3RUcmFja0xhc3RWaXNpdGVkKSB7CiAgICAgIHJldHVybjsKICAgIH0KICAgIGNvbnN0IHRvU2F2ZSA9IGdldExvZ2luUm91dGUocm91dGUpOwogICAgcmV0dXJuIGRpc3BhdGNoKCdzZXQnLCB7CiAgICAgIGtleTogTEFTVF9WSVNJVEVELAogICAgICB2YWx1ZTogdG9TYXZlCiAgICB9KTsKICB9LAogIHRvZ2dsZVRoZW1lKHsKICAgIGdldHRlcnMsCiAgICBkaXNwYXRjaAogIH0pIHsKICAgIGNvbnN0IHZhbHVlID0gZ2V0dGVyc1tUSEVNRV0gPT09ICdsaWdodCcgPyAnZGFyaycgOiAnbGlnaHQnOwogICAgcmV0dXJuIGRpc3BhdGNoKCdzZXQnLCB7CiAgICAgIGtleTogVEhFTUUsCiAgICAgIHZhbHVlCiAgICB9KTsKICB9LAogIHNldEJyYW5kU3R5bGUoewogICAgcm9vdFN0YXRlLAogICAgcm9vdEdldHRlcnMKICB9LCBkYXJrID0gZmFsc2UpIHsKICAgIGlmIChyb290U3RhdGUubWFuYWdlbWVudFJlYWR5KSB7CiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgYnJhbmRTZXR0aW5nID0gcm9vdEdldHRlcnNbJ21hbmFnZW1lbnQvYnlJZCddKE1BTkFHRU1FTlQuU0VUVElORywgU0VUVElORy5CUkFORCk7CiAgICAgICAgaWYgKGJyYW5kU2V0dGluZyAmJiBicmFuZFNldHRpbmcudmFsdWUgJiYgYnJhbmRTZXR0aW5nLnZhbHVlICE9PSAnJykgewogICAgICAgICAgY29uc3QgYnJhbmQgPSBicmFuZFNldHRpbmcudmFsdWU7CiAgICAgICAgICBjb25zdCBicmFuZE1ldGEgPSByZXF1aXJlKGB+c2hlbGwvYXNzZXRzL2JyYW5kLyR7YnJhbmR9L21ldGFkYXRhLmpzb25gKTsKICAgICAgICAgIGNvbnN0IGhhc1N0eWxlc2hlZXQgPSBicmFuZE1ldGEuaGFzU3R5bGVzaGVldCA9PT0gJ3RydWUnOwogICAgICAgICAgaWYgKGhhc1N0eWxlc2hlZXQpIHsKICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuYWRkKGJyYW5kKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIC8vIFRPRE8gb3B0aW9uIGFwcGx5IGNvbG9yIGF0IHJ1bnRpbWUKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gY2F0Y2gge30KICAgIH0KICB9Cn07CmZ1bmN0aW9uIGdldExvZ2luUm91dGUocm91dGUpIHsKICB2YXIgX3JvdXRlJG5hbWU7CiAgbGV0IHBhcnRzID0gKChfcm91dGUkbmFtZSA9IHJvdXRlLm5hbWUpID09PSBudWxsIHx8IF9yb3V0ZSRuYW1lID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcm91dGUkbmFtZS5zcGxpdCgnLScpKSB8fCBbXTsKICBjb25zdCBwYXJhbXMgPSB7fTsKICBjb25zdCByb3V0ZVBhcmFtcyA9IHJvdXRlLnBhcmFtcyB8fCB7fTsKCiAgLy8gRmluZCB0aGUgJ3Jlc291cmNlJyBwYXJ0IG9mIHRoZSByb3V0ZSwgaWYgaXQgaXMgdGhlcmUKICBjb25zdCBpbmRleCA9IHBhcnRzLmZpbmRJbmRleChwID0+IHAgPT09ICdyZXNvdXJjZScpOwogIGlmIChpbmRleCA+PSAwKSB7CiAgICBwYXJ0cyA9IHBhcnRzLnNsaWNlKDAsIGluZGV4KTsKICB9CgogIC8vIEp1c3Qga2VlcCB0aGUgcGFyYW1zIHRoYXQgYXJlIG5lZWRlZAogIHBhcnRzLmZvckVhY2gocGFyYW0gPT4gewogICAgaWYgKHJvdXRlUGFyYW1zW3BhcmFtXSkgewogICAgICBwYXJhbXNbcGFyYW1dID0gcm91dGVQYXJhbXNbcGFyYW1dOwogICAgfQogIH0pOwogIHJldHVybiB7CiAgICBuYW1lOiBwYXJ0cy5qb2luKCctJyksCiAgICBwYXJhbXMKICB9Owp9"},{"version":3,"names":["SETTING","MANAGEMENT","STEVE","clone","Vue","definitions","prefsBeforeLogin","create","name","def","opt","parseJSON","asCookie","asUserPreference","options","inheritFrom","mangleRead","mangleWrite","mapPref","get","$store","getters","set","value","dispatch","key","CLUSTER","LAST_NAMESPACE","NAMESPACE_FILTERS","WORKSPACE","EXPANDED_GROUPS","FAVORITE_TYPES","PINNED_CLUSTERS","GROUP_RESOURCES","DIFF","THEME","x","replace","PREFERS_SCHEME","LOCALE","KEYMAP","ROWS_PER_PAGE","LOGS_WRAP","LOGS_TIME","LOGS_RANGE","HIDE_REPOS","HIDE_DESC","HIDE_SENSITIVE","SHOW_PRE_RELEASE","SHOW_CHART_MODE","DATE_FORMAT","TIME_FORMAT","TIME_ZONE","DEV","VIEW_IN_API","ALL_NAMESPACES","THEME_SHORTCUT","LAST_VISITED","SEEN_WHATS_NEW","READ_WHATS_NEW","AFTER_LOGIN_ROUTE","HIDE_HOME_PAGE_CARDS","PLUGIN_DEVELOPER","_RKE1","_RKE2","PROVISIONER","PSP_DEPRECATION_BANNER","MENU_MAX_CLUSTERS","SCALE_POOL_PROMPT","cookiePrefix","cookieOptions","maxAge","path","sameSite","secure","state","cookiesLoaded","data","definition","Error","user","undefined","defaultValue","slice","theme","rootState","rootGetters","setting","pcs","startsWith","substr","afterLoginRoute","afterLoginRoutePref","lastVisitedPref","clusterPref","params","product","cluster","match","clusterId","split","mutations","load","reset","_state$definitions$ke","setDefinition","actions","commit","server","val","$cookies","toUpperCase","checkLogin","_server","JSON","stringify","save","redirectUnauthorized","e","type","status","setTheme","loadCookies","loadTheme","process","client","watchDark","window","matchMedia","watchLight","watchNone","interval","nextHalfHour","Math","round","Date","getTime","setTimeout","matches","changed","fromClock","addListener","hour","getHours","loadServer","ignoreKey","_server2","all","PREFERENCE","url","force","watch","stream","root","console","error","Object","keys","length","forEach","parse","err","setLastVisited","route","doNotTrackLastVisited","toSave","getLoginRoute","toggleTheme","setBrandStyle","dark","managementReady","brandSetting","BRAND","brand","brandMeta","require","hasStylesheet","document","body","classList","add","_route$name","parts","routeParams","index","findIndex","p","param","join"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/store/prefs.js"],"sourcesContent":["import { SETTING } from '@shell/config/settings';\nimport { MANAGEMENT, STEVE } from '@shell/config/types';\nimport { clone } from '@shell/utils/object';\nimport Vue from 'vue';\n\nconst definitions = {};\n/**\n * Key/value of prefrences are stored before login here and cookies due lack of access permission.\n * Once user is logged in while setting asUserPreference, update stored before login Key/value to the backend in loadServer function.\n */\nlet prefsBeforeLogin = {};\n\nexport const create = function(name, def, opt = {}) {\n  const parseJSON = opt.parseJSON === true;\n  const asCookie = opt.asCookie === true;\n  const asUserPreference = opt.asUserPreference !== false;\n  const options = opt.options;\n  const inheritFrom = opt.inheritFrom;\n\n  definitions[name] = {\n    def,\n    options,\n    parseJSON,\n    asCookie,\n    asUserPreference,\n    inheritFrom, // if value is not defined on server, we can default it to another pref\n    mangleRead:  opt.mangleRead, // Alter the value read from the API (to match old Rancher expectations)\n    mangleWrite: opt.mangleWrite, // Alter the value written back to the API (ditto)\n  };\n\n  return name;\n};\n\nexport const mapPref = function(name) {\n  return {\n    get() {\n      return this.$store.getters['prefs/get'](name);\n    },\n\n    set(value) {\n      this.$store.dispatch('prefs/set', { key: name, value });\n    }\n  };\n};\n\n// --------------------\nconst parseJSON = true; // Shortcut for setting it below\nconst asCookie = true; // Store as a cookie so that it's available before auth + on server-side\n\n// Keys must be lowercase and valid dns label (a-z 0-9 -)\nexport const CLUSTER = create('cluster', '');\nexport const LAST_NAMESPACE = create('last-namespace', '');\nexport const NAMESPACE_FILTERS = create('ns-by-cluster', {}, { parseJSON });\nexport const WORKSPACE = create('workspace', '');\nexport const EXPANDED_GROUPS = create('open-groups', ['cluster', 'policy', 'rbac', 'serviceDiscovery', 'storage', 'workload'], { parseJSON });\nexport const FAVORITE_TYPES = create('fav-type', [], { parseJSON });\nexport const PINNED_CLUSTERS = create('pinned-clusters', [], { parseJSON });\nexport const GROUP_RESOURCES = create('group-by', 'namespace');\nexport const DIFF = create('diff', 'unified', { options: ['unified', 'split'] });\nexport const THEME = create('theme', 'auto', {\n  options:     ['light', 'auto', 'dark'],\n  asCookie,\n  parseJSON,\n  mangleRead:  (x) => x.replace(/^ui-/, ''),\n  mangleWrite: (x) => `ui-${ x }`,\n});\nexport const PREFERS_SCHEME = create('pcs', '', { asCookie, asUserPreference: false });\nexport const LOCALE = create('locale', 'en-us', { asCookie });\nexport const KEYMAP = create('keymap', 'sublime', { options: ['sublime', 'emacs', 'vim'] });\nexport const ROWS_PER_PAGE = create('per-page', 100, { options: [10, 25, 50, 100], parseJSON });\nexport const LOGS_WRAP = create('logs-wrap', true, { parseJSON });\nexport const LOGS_TIME = create('logs-time', true, { parseJSON });\nexport const LOGS_RANGE = create('logs-range', '30 minutes', { parseJSON });\nexport const HIDE_REPOS = create('hide-repos', [], { parseJSON });\nexport const HIDE_DESC = create('hide-desc', [], { parseJSON });\nexport const HIDE_SENSITIVE = create('hide-sensitive', true, { options: [true, false], parseJSON });\nexport const SHOW_PRE_RELEASE = create('show-pre-release', false, { options: [false, true], parseJSON });\nexport const SHOW_CHART_MODE = create('chart-mode', 'featured', { parseJSON });\n\nexport const DATE_FORMAT = create('date-format', 'ddd, MMM D YYYY', {\n  options: [\n    'ddd, MMM D YYYY',\n    'ddd, D MMM YYYY',\n    'D/M/YYYY',\n    'M/D/YYYY',\n    'YYYY-MM-DD'\n  ]\n});\n\nexport const TIME_FORMAT = create('time-format', 'h:mm:ss a', {\n  options: [\n    'h:mm:ss a',\n    'HH:mm:ss'\n  ]\n});\n\nexport const TIME_ZONE = create('time-zone', 'local');\n// DEV will be deprecated on v2.7.0, but is needed so that we can grab the value for the new settings that derived from it\n// such as: VIEW_IN_API, ALL_NAMESPACES, THEME_SHORTCUT\nexport const DEV = create('dev', false, { parseJSON });\nexport const VIEW_IN_API = create('view-in-api', false, { parseJSON, inheritFrom: DEV });\nexport const ALL_NAMESPACES = create('all-namespaces', false, { parseJSON, inheritFrom: DEV });\nexport const THEME_SHORTCUT = create('theme-shortcut', false, { parseJSON, inheritFrom: DEV });\nexport const LAST_VISITED = create('last-visited', 'home', { parseJSON });\nexport const SEEN_WHATS_NEW = create('seen-whatsnew', '', { parseJSON });\nexport const READ_WHATS_NEW = create('read-whatsnew', '', { parseJSON });\nexport const AFTER_LOGIN_ROUTE = create('after-login-route', 'home', { parseJSON } );\nexport const HIDE_HOME_PAGE_CARDS = create('home-page-cards', {}, { parseJSON } );\nexport const PLUGIN_DEVELOPER = create('plugin-developer', false, { parseJSON, inheritFrom: DEV }); // Is the user a plugin developer?\n\nexport const _RKE1 = 'rke1';\nexport const _RKE2 = 'rke2';\nexport const PROVISIONER = create('provisioner', _RKE2, { options: [_RKE1, _RKE2] });\n\n// Promo for Pod Security Policies (PSPs) being deprecated on kube version 1.25 on Cluster Dashboard page\nexport const PSP_DEPRECATION_BANNER = create('hide-psp-deprecation-banner', false, { parseJSON });\n\n// Maximum number of clusters to show in the slide-in menu\nexport const MENU_MAX_CLUSTERS = 10;\n// Prompt for confirm when scaling down node pool in GUI and save the pref\nexport const SCALE_POOL_PROMPT = create('scale-pool-prompt', null, { parseJSON });\n// --------------------\n\nconst cookiePrefix = 'R_';\nconst cookieOptions = {\n  maxAge:   365 * 86400,\n  path:     '/',\n  sameSite: true,\n  secure:   true,\n};\n\nexport const state = function() {\n  return {\n    cookiesLoaded: false,\n    data:          {},\n    definitions,\n  };\n};\n\nexport const getters = {\n  get: (state) => (key) => {\n    const definition = state.definitions[key];\n\n    if (!definition) {\n      throw new Error(`Unknown preference: ${ key }`);\n    }\n\n    const user = state.data[key];\n\n    if (user !== undefined) {\n      return clone(user);\n    }\n\n    const def = clone(definition.def);\n\n    return def;\n  },\n\n  defaultValue: (state) => (key) => {\n    const definition = state.definitions[key];\n\n    if (!definition) {\n      throw new Error(`Unknown preference: ${ key }`);\n    }\n\n    return clone(definition.def);\n  },\n\n  options: (state) => (key) => {\n    const definition = state.definitions[key];\n\n    if (!definition) {\n      throw new Error(`Unknown preference: ${ key }`);\n    }\n\n    if (!definition.options) {\n      throw new Error(`Preference does not have options: ${ key }`);\n    }\n\n    return definition.options.slice();\n  },\n\n  theme: (state, getters, rootState, rootGetters) => {\n    const setting = rootGetters['management/byId'](MANAGEMENT.SETTING, SETTING.THEME);\n\n    if (setting?.value) {\n      return setting?.value;\n    }\n\n    let theme = getters['get'](THEME);\n    const pcs = getters['get'](PREFERS_SCHEME);\n\n    // console.log('Get Theme', theme, pcs);\n\n    // Ember UI uses this prefix\n    if ( theme.startsWith('ui-') ) {\n      theme = theme.substr(3);\n    }\n\n    if ( theme === 'auto' ) {\n      if ( pcs === 'light' || pcs === 'dark' ) {\n        return pcs;\n      }\n\n      return 'dark';\n    }\n\n    return theme;\n  },\n\n  afterLoginRoute: (state, getters) => {\n    const afterLoginRoutePref = getters['get'](AFTER_LOGIN_ROUTE);\n\n    if (typeof afterLoginRoutePref !== 'string') {\n      return afterLoginRoutePref;\n    }\n\n    switch (true) {\n    case (afterLoginRoutePref === 'home'):\n      return { name: 'home' };\n    case (afterLoginRoutePref === 'last-visited'): {\n      const lastVisitedPref = getters['get'](LAST_VISITED);\n\n      if (lastVisitedPref) {\n        return lastVisitedPref;\n      }\n      const clusterPref = getters['get'](CLUSTER);\n\n      return { name: 'c-cluster-explorer', params: { product: 'explorer', cluster: clusterPref } };\n    }\n    case (!!afterLoginRoutePref.match(/.+-dashboard$/)):\n    {\n      const clusterId = afterLoginRoutePref.split('-dashboard')[0];\n\n      return { name: 'c-cluster-explorer', params: { product: 'explorer', cluster: clusterId } };\n    }\n    default:\n      return { name: afterLoginRoutePref };\n    }\n  }\n};\n\nexport const mutations = {\n  load(state, { key, value }) {\n    Vue.set(state.data, key, value);\n  },\n\n  cookiesLoaded(state) {\n    state.cookiesLoaded = true;\n  },\n\n  reset(state) {\n    for (const key in state.definitions) {\n      if ( state.definitions[key]?.asCookie ) {\n        continue;\n      }\n      delete state.data[key];\n    }\n  },\n\n  setDefinition(state, { name, definition = {} }) {\n    state.definitions[name] = definition;\n  },\n};\n\nexport const actions = {\n  async set({\n    dispatch, commit, rootGetters, state\n  }, opt) {\n    let { key, value } = opt; // eslint-disable-line prefer-const\n    const definition = state.definitions[key];\n    let server;\n\n    if ( opt.val ) {\n      throw new Error('Use value, not val');\n    }\n\n    commit('load', { key, value });\n\n    if ( definition.asCookie ) {\n      const opt = {\n        ...cookieOptions,\n        parseJSON: definition.parseJSON === true\n      };\n\n      this.$cookies.set(`${ cookiePrefix }${ key }`.toUpperCase(), value, opt);\n    }\n\n    if ( definition.asUserPreference ) {\n      const checkLogin = rootGetters['auth/loggedIn'];\n\n      // Check for login status\n      if (!checkLogin) {\n        prefsBeforeLogin[key] = value;\n\n        return;\n      }\n\n      try {\n        server = await dispatch('loadServer', key); // There's no watch on prefs, so get before set...\n\n        if ( server?.data ) {\n          if ( definition.mangleWrite ) {\n            value = definition.mangleWrite(value);\n          }\n\n          if ( definition.parseJSON ) {\n            Vue.set(server.data, key, JSON.stringify(value));\n          } else {\n            Vue.set(server.data, key, value);\n          }\n\n          await server.save({ redirectUnauthorized: false });\n        }\n      } catch (e) {\n        // Well it failed, but not much to do about it...\n\n        // Return the error\n        return { type: e.type, status: e.status };\n      }\n    }\n  },\n\n  async setTheme({ dispatch }, val) {\n    await dispatch('set', { key: THEME, value: val });\n  },\n\n  loadCookies({ state, commit }) {\n    if ( state.cookiesLoaded ) {\n      return;\n    }\n\n    for (const key in state.definitions) {\n      const definition = state.definitions[key];\n\n      if ( !definition.asCookie ) {\n        continue;\n      }\n\n      const opt = { parseJSON: definition.parseJSON === true };\n      const value = this.$cookies.get(`${ cookiePrefix }${ key }`.toUpperCase(), opt);\n\n      if (value !== undefined) {\n        commit('load', { key, value });\n      }\n    }\n\n    commit('cookiesLoaded');\n  },\n\n  loadTheme({ state, dispatch }) {\n    if ( process.client ) {\n      const watchDark = window.matchMedia('(prefers-color-scheme: dark)');\n      const watchLight = window.matchMedia('(prefers-color-scheme: light)');\n      const watchNone = window.matchMedia('(prefers-color-scheme: no-preference)');\n\n      const interval = 30 * 60 * 1000;\n      const nextHalfHour = interval - Math.round(new Date().getTime()) % interval;\n\n      setTimeout(() => {\n        dispatch('loadTheme');\n      }, nextHalfHour);\n      // console.log('Update theme in', nextHalfHour, 'ms');\n\n      if ( watchDark.matches ) {\n        changed('dark');\n      } else if ( watchLight.matches ) {\n        changed('light');\n      } else {\n        changed(fromClock());\n      }\n\n      watchDark.addListener((e) => {\n        if ( e.matches ) {\n          changed('dark');\n        }\n      });\n\n      watchLight.addListener((e) => {\n        if ( e.matches ) {\n          changed('light');\n        }\n      });\n\n      watchNone.addListener((e) => {\n        if ( e.matches ) {\n          changed(fromClock());\n        }\n      });\n    }\n\n    function changed(value) {\n      // console.log('Prefers Theme:', value);\n      dispatch('set', { key: PREFERS_SCHEME, value });\n    }\n\n    function fromClock() {\n      const hour = new Date().getHours();\n\n      if ( hour < 7 || hour >= 18 ) {\n        return 'dark';\n      }\n\n      return 'light';\n    }\n  },\n\n  async loadServer( {\n    state, dispatch, commit, rootState, rootGetters\n  }, ignoreKey) {\n    let server = { data: {} };\n\n    try {\n      const all = await dispatch('management/findAll', {\n        type: STEVE.PREFERENCE,\n        opt:  {\n          url:                  'userpreferences',\n          force:                true,\n          watch:                false,\n          redirectUnauthorized: false,\n          stream:               false,\n        }\n      }, { root: true });\n\n      server = all?.[0];\n    } catch (e) {\n      console.error('Error loading preferences', e); // eslint-disable-line no-console\n\n      return;\n    }\n\n    if ( !server?.data ) {\n      return;\n    }\n\n    // if prefsBeforeLogin has values from login page, update the backend\n    if (Object.keys(prefsBeforeLogin).length > 0) {\n      Object.keys(prefsBeforeLogin).forEach((key) => {\n        server.data[key] = prefsBeforeLogin[key];\n      });\n\n      await server.save({ redirectUnauthorized: false });\n\n      // Clear prefsBeforeLogin, as we have now saved theses\n      prefsBeforeLogin = {};\n    }\n\n    for (const key in state.definitions) {\n      const definition = state.definitions[key];\n      let value = clone(server.data[key]);\n\n      if (value === undefined && definition.inheritFrom) {\n        value = clone(server.data[definition.inheritFrom]);\n      }\n\n      if ( value === undefined || key === ignoreKey) {\n        continue;\n      }\n\n      if ( definition.parseJSON ) {\n        try {\n          value = JSON.parse(value);\n        } catch (err) {\n          console.error('Error parsing server pref', key, value, err); // eslint-disable-line no-console\n          continue;\n        }\n      }\n\n      if ( definition.mangleRead ) {\n        value = definition.mangleRead(value);\n      }\n\n      commit('load', { key, value });\n    }\n\n    return server;\n  },\n\n  setLastVisited({ state, dispatch, getters }, route) {\n    if (!route) {\n      return;\n    }\n\n    // Only save the last visited page if the user has that set as the login route preference\n    const afterLoginRoutePref = getters['get'](AFTER_LOGIN_ROUTE);\n    const doNotTrackLastVisited = typeof afterLoginRoutePref !== 'string' || afterLoginRoutePref !== 'last-visited';\n\n    if (doNotTrackLastVisited) {\n      return;\n    }\n\n    const toSave = getLoginRoute(route);\n\n    return dispatch('set', { key: LAST_VISITED, value: toSave });\n  },\n\n  toggleTheme({ getters, dispatch }) {\n    const value = getters[THEME] === 'light' ? 'dark' : 'light';\n\n    return dispatch('set', { key: THEME, value });\n  },\n\n  setBrandStyle({ rootState, rootGetters }, dark = false) {\n    if (rootState.managementReady) {\n      try {\n        const brandSetting = rootGetters['management/byId'](MANAGEMENT.SETTING, SETTING.BRAND);\n\n        if (brandSetting && brandSetting.value && brandSetting.value !== '') {\n          const brand = brandSetting.value;\n\n          const brandMeta = require(`~shell/assets/brand/${ brand }/metadata.json`);\n          const hasStylesheet = brandMeta.hasStylesheet === 'true';\n\n          if (hasStylesheet) {\n            document.body.classList.add(brand);\n          } else {\n            // TODO option apply color at runtime\n          }\n        }\n      } catch {}\n    }\n  }\n};\n\nfunction getLoginRoute(route) {\n  let parts = route.name?.split('-') || [];\n  const params = {};\n  const routeParams = route.params || {};\n\n  // Find the 'resource' part of the route, if it is there\n  const index = parts.findIndex((p) => p === 'resource');\n\n  if (index >= 0) {\n    parts = parts.slice(0, index);\n  }\n\n  // Just keep the params that are needed\n  parts.forEach((param) => {\n    if (routeParams[param]) {\n      params[param] = routeParams[param];\n    }\n  });\n\n  return {\n    name: parts.join('-'),\n    params\n  };\n}\n"],"mappings":"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"}]}