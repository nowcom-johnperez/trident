{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/resource-fetch.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/resource-fetch.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/babel.config.js","mtime":1716430386791},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBDT1VOVCwgTUFOQUdFTUVOVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBTRVRUSU5HLCBERUZBVUxUX1BFUkZfU0VUVElORyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2V0dGluZ3MnOwppbXBvcnQgUmVzb3VyY2VGZXRjaE5hbWVzcGFjZWQgZnJvbSAnQHNoZWxsL21peGlucy9yZXNvdXJjZS1mZXRjaC1uYW1lc3BhY2VkJzsKCi8vIE51bWJlciBvZiBwYWdlcyB0byBmZXRjaCB3aGVuIGxvYWRpbmcgaW5jcmVtZW50YWxseQpjb25zdCBQQUdFUyA9IDQ7CmV4cG9ydCBkZWZhdWx0IHsKICBtaXhpbnM6IFtSZXNvdXJjZUZldGNoTmFtZXNwYWNlZF0sCiAgZGF0YSgpIHsKICAgIC8vIGZldGNoaW5nIHRoZSBzZXR0aW5ncyByZWxhdGVkIHRvIG1hbnVhbCByZWZyZXNoIGZyb20gZ2xvYmFsIHNldHRpbmdzCiAgICBjb25zdCBwZXJmU2V0dGluZyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYnlJZCddKE1BTkFHRU1FTlQuU0VUVElORywgU0VUVElORy5VSV9QRVJGT1JNQU5DRSk7CiAgICBsZXQgcGVyZkNvbmZpZyA9IHt9OwogICAgaWYgKHBlcmZTZXR0aW5nICYmIHBlcmZTZXR0aW5nLnZhbHVlKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcGVyZkNvbmZpZyA9IEpTT04ucGFyc2UocGVyZlNldHRpbmcudmFsdWUpOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgY29uc29sZS53YXJuKCd1aS1wZXJmb3JtYW5jZSBzZXR0aW5nIGNvbnRhaW5zIGludmFsaWQgZGF0YScpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcGVyZkNvbmZpZyA9IERFRkFVTFRfUEVSRl9TRVRUSU5HOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgcGVyZkNvbmZpZywKICAgICAgaW5pdDogZmFsc2UsCiAgICAgIG11bHRpcGxlUmVzb3VyY2VzOiBbXSwKICAgICAgbG9hZFJlc291cmNlczogW3RoaXMucmVzb3VyY2VdLAogICAgICAvLyBtYW51YWwgcmVmcmVzaCB2YXJzCiAgICAgIGhhc01hbnVhbFJlZnJlc2g6IGZhbHNlLAogICAgICB3YXRjaDogdHJ1ZSwKICAgICAgaXNUb29NYW55SXRlbXNUb0F1dG9VcGRhdGU6IGZhbHNlLAogICAgICBmb3JjZTogZmFsc2UsCiAgICAgIC8vIGluY3JlbWVudGFsIGxvYWRpbmcgdmFycwogICAgICBpbmNyZW1lbnRhbDogZmFsc2UsCiAgICAgIGZldGNoZWRSZXNvdXJjZVR5cGU6IFtdCiAgICB9OwogIH0sCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIC8vIG1ha2Ugc3VyZSB0aGlzIG9ubHkgcnVucyBvbmNlLCBmb3IgdGhlIGluaXRpYWxpemVkIGluc3RhbmNlCiAgICBpZiAodGhpcy5pbml0KSB7CiAgICAgIC8vIGNsZWFyIHVwIHRoZSBzdG9yZSB0byBtYWtlIHN1cmUgd2UgYXJlbid0IHN0b3JpbmcgYW55dGhpbmcgdGhhdCBtaWdodCBpbnRlcmZlcmUgd2l0aCB0aGUgbmV4dCByZW5kZXJlZCBsaXN0IHZpZXcKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3Jlc291cmNlLWZldGNoL2NsZWFyRGF0YScpOwogICAgICB0aGlzLmZldGNoZWRSZXNvdXJjZVR5cGUuZm9yRWFjaChpdGVtID0+IHsKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChgJHtpdGVtLmN1cnJTdG9yZX0vaW5jcmVtZW50TG9hZENvdW50ZXJgLCBpdGVtLnR5cGUpOwogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKHsKICAgICAgcmVmcmVzaEZsYWc6ICdyZXNvdXJjZS1mZXRjaC9yZWZyZXNoRmxhZycKICAgIH0pLAogICAgcm93cygpIHsKICAgICAgY29uc3QgY3VyclJlc291cmNlID0gdGhpcy5mZXRjaGVkUmVzb3VyY2VUeXBlLmZpbmQoaXRlbSA9PiBpdGVtLnR5cGUgPT09IHRoaXMucmVzb3VyY2UpOwogICAgICBpZiAoY3VyclJlc291cmNlKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbYCR7Y3VyclJlc291cmNlLmN1cnJTdG9yZX0vYWxsYF0odGhpcy5yZXNvdXJjZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgbG9hZGluZygpIHsKICAgICAgcmV0dXJuIHRoaXMucm93cy5sZW5ndGggPyBmYWxzZSA6IHRoaXMuJGZldGNoU3RhdGUucGVuZGluZzsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICByZWZyZXNoRmxhZyhuZXUpIHsKICAgICAgLy8gdGhpcyBpcyB3aGVyZSB0aGUgZGF0YSBhc3NpZ25tZW50IHdpbGwgdHJpZ2dlciB0aGUgdXBkYXRlIG9mIHRoZSBsaXN0IHZpZXcuLi4KICAgICAgaWYgKHRoaXMuaW5pdCAmJiBuZXUpIHsKICAgICAgICB0aGlzLiRmZXRjaCgpOwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAvLyB0aGlzIGRlZmluZXMgYWxsIHRoZSBmbGFncyBuZWVkZWQgZm9yIHRoZSBtZWNoYW5pc20KICAgIC8vIHRvIHdvcmsuIFRoZXkgc2hvdWxkIGJlIGRlZmluZWQgYmFzZWQgb24gdGhlIG1haW4gbGlzdCB2aWV3CiAgICAvLyByZXNvdXJjZSB0aGF0IGlzIHRvIGJlIGRpc3BsYXllZC4gVGhlIHNlY29uZGFyeSByZXNvdXJjZXMKICAgIC8vIGZldGNoZWQgc2hvdWxkIGZvbGxvdyB3aGF0IHdhcyBkZWZpbmVkIChpZiBpdCBpcyBtYW51YWwgYW5kL29yIGluY3JlbWVudGFsKQogICAgJGluaXRpYWxpemVGZXRjaERhdGEodHlwZSwgbXVsdGlwbGVSZXNvdXJjZXMgPSBbXSwgc3RvcmVUeXBlKSB7CiAgICAgIGlmICghdGhpcy5pbml0KSB7CiAgICAgICAgY29uc3QgY3VyclN0b3JlID0gc3RvcmVUeXBlIHx8IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRTdG9yZSddKCk7CiAgICAgICAgdGhpcy5fX2dhdGhlclJlc291cmNlRmV0Y2hEYXRhKHR5cGUsIG11bHRpcGxlUmVzb3VyY2VzLCBjdXJyU3RvcmUpOwoKICAgICAgICAvLyBtYWtlIHN1cmUgYWZ0ZXIgaW5pdCB0aGF0LCBpZiB3ZSBoYXZlIGEgbWFudWFsIHJlZnJlc2gsIHdlIGFsd2F5cyBzZXQgdGhlIGZvcmNlID0gdHJ1ZQogICAgICAgIGlmICghdGhpcy53YXRjaCkgewogICAgICAgICAgdGhpcy5mb3JjZSA9IHRydWU7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmlzVG9vTWFueUl0ZW1zVG9BdXRvVXBkYXRlKSB7CiAgICAgICAgICB0aGlzLmhhc01hbnVhbFJlZnJlc2ggPSB0cnVlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIC8vIGRhdGEgZmV0Y2hpbmcgZm9yIHRoZSBtZWNoYW5pc20KICAgICRmZXRjaFR5cGUodHlwZSwgbXVsdGlwbGVSZXNvdXJjZXMgPSBbXSwgc3RvcmVUeXBlKSB7CiAgICAgIHZhciBfc2NoZW1hJGF0dHJpYnV0ZXM7CiAgICAgIGNvbnN0IGN1cnJTdG9yZSA9IHN0b3JlVHlwZSB8fCB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50U3RvcmUnXSgpOwogICAgICB0aGlzLiRpbml0aWFsaXplRmV0Y2hEYXRhKHR5cGUsIG11bHRpcGxlUmVzb3VyY2VzLCBjdXJyU3RvcmUpOwogICAgICBpZiAoIXRoaXMuZmV0Y2hlZFJlc291cmNlVHlwZS5maW5kKGl0ZW0gPT4gaXRlbS50eXBlID09PSB0eXBlKSkgewogICAgICAgIHRoaXMuZmV0Y2hlZFJlc291cmNlVHlwZS5wdXNoKHsKICAgICAgICAgIHR5cGUsCiAgICAgICAgICBjdXJyU3RvcmUKICAgICAgICB9KTsKICAgICAgfQogICAgICBsZXQgaW5jcmVtZW50YWwgPSAwOwogICAgICBpZiAodGhpcy5pbmNyZW1lbnRhbCkgewogICAgICAgIGNvbnN0IHJlc291cmNlQ291bnQgPSB0aGlzLl9fZ2V0Q291bnRGb3JSZXNvdXJjZXMoW3R5cGVdLCB0aGlzLm5hbWVzcGFjZUZpbHRlciwgY3VyclN0b3JlKTsKICAgICAgICBpbmNyZW1lbnRhbCA9IE1hdGguY2VpbChyZXNvdXJjZUNvdW50IC8gUEFHRVMpOwogICAgICB9CiAgICAgIGNvbnN0IG9wdCA9IHsKICAgICAgICBpbmNyZW1lbnRhbCwKICAgICAgICB3YXRjaDogdGhpcy53YXRjaCwKICAgICAgICBmb3JjZTogdGhpcy5mb3JjZSwKICAgICAgICBoYXNNYW51YWxSZWZyZXNoOiB0aGlzLmhhc01hbnVhbFJlZnJlc2gKICAgICAgfTsKICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHtjdXJyU3RvcmV9L3NjaGVtYUZvcmBdKHR5cGUpOwogICAgICBpZiAoc2NoZW1hICE9PSBudWxsICYmIHNjaGVtYSAhPT0gdm9pZCAwICYmIChfc2NoZW1hJGF0dHJpYnV0ZXMgPSBzY2hlbWEuYXR0cmlidXRlcykgIT09IG51bGwgJiYgX3NjaGVtYSRhdHRyaWJ1dGVzICE9PSB2b2lkIDAgJiYgX3NjaGVtYSRhdHRyaWJ1dGVzLm5hbWVzcGFjZWQpIHsKICAgICAgICAvLyBJcyB0aGlzIHNwZWNpZmljIHJlc291cmNlIG5hbWVzcGFjZWQgKGNvdWxkIGJlIHByaW1hcnkgb3Igc2Vjb25kYXJ5IHJlc291cmNlKT8KICAgICAgICBvcHQubmFtZXNwYWNlZCA9IHRoaXMubmFtZXNwYWNlRmlsdGVyOyAvLyBuYW1lc3BhY2VGaWx0ZXIgd2lsbCBvbmx5IGJlIHBvcHVsYXRlZCBpZiBhcHBsaWNhYmxlIGZvciBwcmltYXJ5IHJlc291cmNlCiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmRpc3BhdGNoKGAke2N1cnJTdG9yZX0vZmluZEFsbGAsIHsKICAgICAgICB0eXBlLAogICAgICAgIG9wdAogICAgICB9KTsKICAgIH0sCiAgICBfX2dldENvdW50Rm9yUmVzb3VyY2VzKHJlc291cmNlTmFtZXMsIG5hbWVzcGFjZSwgc3RvcmVUeXBlKSB7CiAgICAgIGNvbnN0IGN1cnJTdG9yZSA9IHN0b3JlVHlwZSB8fCB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50U3RvcmUnXSgpOwogICAgICByZXR1cm4gcmVzb3VyY2VOYW1lcy5yZWR1Y2UoKHJlcywgdHlwZSkgPT4gcmVzICsgdGhpcy5fX2dldENvdW50Rm9yUmVzb3VyY2UodHlwZSwgbmFtZXNwYWNlLCBjdXJyU3RvcmUpLCAwKTsKICAgIH0sCiAgICBfX2dldENvdW50Rm9yUmVzb3VyY2UocmVzb3VyY2VOYW1lLCBuYW1lc3BhY2UsIHN0b3JlVHlwZSkgewogICAgICB2YXIgX3RoaXMkJHN0b3JlJGdldHRlcnMkLCBfcmVzb3VyY2VDb3VudHMkbmFtZXMsIF9yZXNvdXJjZUNvdW50cyRzdW1tYTsKICAgICAgY29uc3QgcmVzb3VyY2VDb3VudHMgPSAoX3RoaXMkJHN0b3JlJGdldHRlcnMkID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHtzdG9yZVR5cGV9L2FsbGBdKENPVU5UKVswXSkgPT09IG51bGwgfHwgX3RoaXMkJHN0b3JlJGdldHRlcnMkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyQkc3RvcmUkZ2V0dGVycyQuY291bnRzW2Ake3Jlc291cmNlTmFtZX1gXTsgLy8gTkIgYHJhbmNoZXJgIHN0b3JlIGJlaGF2ZXMgZGlmZmVyZW50bHksIGxhY2tzIGNvdW50cyBidXQgaGFzIHJlc291cmNlCiAgICAgIGNvbnN0IHJlc291cmNlQ291bnQgPSBuYW1lc3BhY2UgJiYgcmVzb3VyY2VDb3VudHMgIT09IG51bGwgJiYgcmVzb3VyY2VDb3VudHMgIT09IHZvaWQgMCAmJiByZXNvdXJjZUNvdW50cy5uYW1lc3BhY2VzID8gcmVzb3VyY2VDb3VudHMgPT09IG51bGwgfHwgcmVzb3VyY2VDb3VudHMgPT09IHZvaWQgMCB8fCAoX3Jlc291cmNlQ291bnRzJG5hbWVzID0gcmVzb3VyY2VDb3VudHMubmFtZXNwYWNlc1tuYW1lc3BhY2VdKSA9PT0gbnVsbCB8fCBfcmVzb3VyY2VDb3VudHMkbmFtZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yZXNvdXJjZUNvdW50cyRuYW1lcy5jb3VudCA6IHJlc291cmNlQ291bnRzID09PSBudWxsIHx8IHJlc291cmNlQ291bnRzID09PSB2b2lkIDAgfHwgKF9yZXNvdXJjZUNvdW50cyRzdW1tYSA9IHJlc291cmNlQ291bnRzLnN1bW1hcnkpID09PSBudWxsIHx8IF9yZXNvdXJjZUNvdW50cyRzdW1tYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc291cmNlQ291bnRzJHN1bW1hLmNvdW50OwogICAgICByZXR1cm4gcmVzb3VyY2VDb3VudCB8fCAwOwogICAgfSwKICAgIF9fZ2F0aGVyUmVzb3VyY2VGZXRjaERhdGEocmVzb3VyY2VOYW1lLCBtdWx0aXBsZVJlc291cmNlcywgY3VyclN0b3JlKSB7CiAgICAgIHZhciBfdGhpcyRwZXJmQ29uZmlnLCBfdGhpcyRwZXJmQ29uZmlnMiwgX3RoaXMkcGVyZkNvbmZpZzMsIF90aGlzJHBlcmZDb25maWc0OwogICAgICAvLyBmbGFnIHRvIHByZXZlbnQgYSBmaXJzdCBkYXRhIHVwZGF0ZSBiZWluZyB0cmlnZ2VyZWQgZnJvbSB0aGUgcmVxdWVzdERhdGEgd2F0Y2hlcgogICAgICB0aGlzLmluaXQgPSB0cnVlOwoKICAgICAgLy8gbWFudWFsIHJlZnJlc2ggc2V0dGluZ3MgY29uZmlnCiAgICAgIGNvbnN0IG1hbnVhbERhdGFSZWZyZXNoRW5hYmxlZCA9IChfdGhpcyRwZXJmQ29uZmlnID0gdGhpcy5wZXJmQ29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRwZXJmQ29uZmlnID09PSB2b2lkIDAgfHwgKF90aGlzJHBlcmZDb25maWcgPSBfdGhpcyRwZXJmQ29uZmlnLm1hbnVhbFJlZnJlc2gpID09PSBudWxsIHx8IF90aGlzJHBlcmZDb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHBlcmZDb25maWcuZW5hYmxlZDsKICAgICAgY29uc3QgbWFudWFsRGF0YVJlZnJlc2hUaHJlc2hvbGQgPSBwYXJzZUludCgoKF90aGlzJHBlcmZDb25maWcyID0gdGhpcy5wZXJmQ29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRwZXJmQ29uZmlnMiA9PT0gdm9pZCAwIHx8IChfdGhpcyRwZXJmQ29uZmlnMiA9IF90aGlzJHBlcmZDb25maWcyLm1hbnVhbFJlZnJlc2gpID09PSBudWxsIHx8IF90aGlzJHBlcmZDb25maWcyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwZXJmQ29uZmlnMi50aHJlc2hvbGQpIHx8ICcwJywgMTApOwoKICAgICAgLy8gaW5jcmVtZW50YWwgbG9hZGluZyBzZXR0aW5ncyBjb25maWcKICAgICAgY29uc3QgaW5jcmVtZW50YWxMb2FkaW5nRW5hYmxlZCA9IChfdGhpcyRwZXJmQ29uZmlnMyA9IHRoaXMucGVyZkNvbmZpZykgPT09IG51bGwgfHwgX3RoaXMkcGVyZkNvbmZpZzMgPT09IHZvaWQgMCB8fCAoX3RoaXMkcGVyZkNvbmZpZzMgPSBfdGhpcyRwZXJmQ29uZmlnMy5pbmNyZW1lbnRhbExvYWRpbmcpID09PSBudWxsIHx8IF90aGlzJHBlcmZDb25maWczID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRwZXJmQ29uZmlnMy5lbmFibGVkOwogICAgICBjb25zdCBpbmNyZW1lbnRhbExvYWRpbmdUaHJlc2hvbGQgPSBwYXJzZUludCgoKF90aGlzJHBlcmZDb25maWc0ID0gdGhpcy5wZXJmQ29uZmlnKSA9PT0gbnVsbCB8fCBfdGhpcyRwZXJmQ29uZmlnNCA9PT0gdm9pZCAwIHx8IChfdGhpcyRwZXJmQ29uZmlnNCA9IF90aGlzJHBlcmZDb25maWc0LmluY3JlbWVudGFsTG9hZGluZykgPT09IG51bGwgfHwgX3RoaXMkcGVyZkNvbmZpZzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHBlcmZDb25maWc0LnRocmVzaG9sZCkgfHwgJzAnLCAxMCk7CgogICAgICAvLyBvdGhlciB2YXJzCiAgICAgIHRoaXMubXVsdGlwbGVSZXNvdXJjZXMgPSBtdWx0aXBsZVJlc291cmNlczsKICAgICAgbGV0IHJlc291cmNlQ291bnQgPSAwOwoKICAgICAgLy8gbWFudWFsIHJlZnJlc2ggdmFycwogICAgICBsZXQgd2F0Y2ggPSB0cnVlOwogICAgICBsZXQgaXNUb29NYW55SXRlbXNUb0F1dG9VcGRhdGUgPSBmYWxzZTsKCiAgICAgIC8vIGluY3JlbWVudGFsIGxvYWRpbmcgdmFycwogICAgICBsZXQgaW5jcmVtZW50YWwgPSBmYWxzZTsKCiAgICAgIC8vIGdldCByZXNvdXJjZSBjb3VudHMKICAgICAgY29uc3QgcmVzb3VyY2VzRm9yQ291bnQgPSB0aGlzLm11bHRpcGxlUmVzb3VyY2VzLmxlbmd0aCA/IHRoaXMubXVsdGlwbGVSZXNvdXJjZXMgOiBbcmVzb3VyY2VOYW1lXTsKICAgICAgcmVzb3VyY2VDb3VudCA9IHRoaXMuX19nZXRDb3VudEZvclJlc291cmNlcyhyZXNvdXJjZXNGb3JDb3VudCwgdGhpcy5uYW1lc3BhY2VGaWx0ZXIsIGN1cnJTdG9yZSk7CgogICAgICAvLyBtYW51YWwgcmVmcmVzaCBjaGVjawogICAgICBpZiAobWFudWFsRGF0YVJlZnJlc2hFbmFibGVkICYmIHJlc291cmNlQ291bnQgPj0gbWFudWFsRGF0YVJlZnJlc2hUaHJlc2hvbGQpIHsKICAgICAgICB3YXRjaCA9IGZhbHNlOwogICAgICAgIGlzVG9vTWFueUl0ZW1zVG9BdXRvVXBkYXRlID0gdHJ1ZTsKICAgICAgfQoKICAgICAgLy8gaW5jcmVtZW50YWwgbG9hZGluZyBjaGVjawogICAgICBpbmNyZW1lbnRhbCA9IGluY3JlbWVudGFsTG9hZGluZ0VuYWJsZWQgJiYgaW5jcmVtZW50YWxMb2FkaW5nVGhyZXNob2xkID4gMCAmJiByZXNvdXJjZUNvdW50ID49IGluY3JlbWVudGFsTG9hZGluZ1RocmVzaG9sZDsKCiAgICAgIC8vIHBhc3Mgb24gdGhlIGZsYWcgdGhhdCBjb250cm9scyB0aGUgYXBwZWFyYW5jZSBvZiB0aGUgbWFudWFsIHJlZnJlc2ggYnV0dG9uIG9uIHRoZSBzb3J0YWJsZSB0YWJsZQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncmVzb3VyY2UtZmV0Y2gvdXBkYXRlSXNUb29NYW55SXRlbXMnLCBpc1Rvb01hbnlJdGVtc1RvQXV0b1VwZGF0ZSk7CgogICAgICAvLyBzZXQgdmFycyBvbiBtaXhpbiB0byBiZSB1c2VkIG9uICRmZXRjaFR5cGUKICAgICAgdGhpcy53YXRjaCA9IHdhdGNoOwogICAgICB0aGlzLmlzVG9vTWFueUl0ZW1zVG9BdXRvVXBkYXRlID0gaXNUb29NYW55SXRlbXNUb0F1dG9VcGRhdGU7CiAgICAgIHRoaXMuaW5jcmVtZW50YWwgPSBpbmNyZW1lbnRhbDsKICAgIH0KICB9Cn07"},{"version":3,"names":["mapGetters","COUNT","MANAGEMENT","SETTING","DEFAULT_PERF_SETTING","ResourceFetchNamespaced","PAGES","mixins","data","perfSetting","$store","getters","UI_PERFORMANCE","perfConfig","value","JSON","parse","e","console","warn","init","multipleResources","loadResources","resource","hasManualRefresh","watch","isTooManyItemsToAutoUpdate","force","incremental","fetchedResourceType","beforeDestroy","dispatch","forEach","item","currStore","type","computed","refreshFlag","rows","currResource","find","loading","length","$fetchState","pending","neu","$fetch","methods","$initializeFetchData","storeType","__gatherResourceFetchData","$fetchType","_schema$attributes","push","resourceCount","__getCountForResources","namespaceFilter","Math","ceil","opt","schema","attributes","namespaced","resourceNames","namespace","reduce","res","__getCountForResource","resourceName","_this$$store$getters$","_resourceCounts$names","_resourceCounts$summa","resourceCounts","counts","namespaces","count","summary","_this$perfConfig","_this$perfConfig2","_this$perfConfig3","_this$perfConfig4","manualDataRefreshEnabled","manualRefresh","enabled","manualDataRefreshThreshold","parseInt","threshold","incrementalLoadingEnabled","incrementalLoading","incrementalLoadingThreshold","resourcesForCount"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/resource-fetch.js"],"sourcesContent":["import { mapGetters } from 'vuex';\nimport { COUNT, MANAGEMENT } from '@shell/config/types';\nimport { SETTING, DEFAULT_PERF_SETTING } from '@shell/config/settings';\nimport ResourceFetchNamespaced from '@shell/mixins/resource-fetch-namespaced';\n\n// Number of pages to fetch when loading incrementally\nconst PAGES = 4;\n\nexport default {\n\n  mixins: [ResourceFetchNamespaced],\n\n  data() {\n    // fetching the settings related to manual refresh from global settings\n    const perfSetting = this.$store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.UI_PERFORMANCE);\n    let perfConfig = {};\n\n    if (perfSetting && perfSetting.value) {\n      try {\n        perfConfig = JSON.parse(perfSetting.value);\n      } catch (e) {\n        console.warn('ui-performance setting contains invalid data'); // eslint-disable-line no-console\n      }\n    } else {\n      perfConfig = DEFAULT_PERF_SETTING;\n    }\n\n    return {\n      perfConfig,\n      init:                       false,\n      multipleResources:          [],\n      loadResources:              [this.resource],\n      // manual refresh vars\n      hasManualRefresh:           false,\n      watch:                      true,\n      isTooManyItemsToAutoUpdate: false,\n      force:                      false,\n      // incremental loading vars\n      incremental:                false,\n      fetchedResourceType:        [],\n    };\n  },\n  beforeDestroy() {\n    // make sure this only runs once, for the initialized instance\n    if (this.init) {\n      // clear up the store to make sure we aren't storing anything that might interfere with the next rendered list view\n      this.$store.dispatch('resource-fetch/clearData');\n\n      this.fetchedResourceType.forEach((item) => {\n        this.$store.dispatch(`${ item.currStore }/incrementLoadCounter`, item.type);\n      });\n    }\n  },\n\n  computed: {\n    ...mapGetters({ refreshFlag: 'resource-fetch/refreshFlag' }),\n    rows() {\n      const currResource = this.fetchedResourceType.find((item) => item.type === this.resource);\n\n      if (currResource) {\n        return this.$store.getters[`${ currResource.currStore }/all`](this.resource);\n      } else {\n        return [];\n      }\n    },\n    loading() {\n      return this.rows.length ? false : this.$fetchState.pending;\n    },\n  },\n  watch: {\n    refreshFlag(neu) {\n      // this is where the data assignment will trigger the update of the list view...\n      if (this.init && neu) {\n        this.$fetch();\n      }\n    }\n  },\n  methods: {\n    // this defines all the flags needed for the mechanism\n    // to work. They should be defined based on the main list view\n    // resource that is to be displayed. The secondary resources\n    // fetched should follow what was defined (if it is manual and/or incremental)\n    $initializeFetchData(type, multipleResources = [], storeType) {\n      if (!this.init) {\n        const currStore = storeType || this.$store.getters['currentStore']();\n\n        this.__gatherResourceFetchData(type, multipleResources, currStore);\n\n        // make sure after init that, if we have a manual refresh, we always set the force = true\n        if (!this.watch) {\n          this.force = true;\n        }\n\n        if (this.isTooManyItemsToAutoUpdate) {\n          this.hasManualRefresh = true;\n        }\n      }\n    },\n    // data fetching for the mechanism\n    $fetchType(type, multipleResources = [], storeType) {\n      const currStore = storeType || this.$store.getters['currentStore']();\n\n      this.$initializeFetchData(type, multipleResources, currStore);\n\n      if (!this.fetchedResourceType.find((item) => item.type === type)) {\n        this.fetchedResourceType.push({\n          type,\n          currStore\n        });\n      }\n\n      let incremental = 0;\n\n      if (this.incremental) {\n        const resourceCount = this.__getCountForResources([type], this.namespaceFilter, currStore);\n\n        incremental = Math.ceil(resourceCount / PAGES);\n      }\n\n      const opt = {\n        incremental,\n        watch:            this.watch,\n        force:            this.force,\n        hasManualRefresh: this.hasManualRefresh\n      };\n\n      const schema = this.$store.getters[`${ currStore }/schemaFor`](type);\n\n      if (schema?.attributes?.namespaced) { // Is this specific resource namespaced (could be primary or secondary resource)?\n        opt.namespaced = this.namespaceFilter; // namespaceFilter will only be populated if applicable for primary resource\n      }\n\n      return this.$store.dispatch(`${ currStore }/findAll`, {\n        type,\n        opt\n      });\n    },\n\n    __getCountForResources(resourceNames, namespace, storeType) {\n      const currStore = storeType || this.$store.getters['currentStore']();\n\n      return resourceNames.reduce((res, type) => res + this.__getCountForResource(type, namespace, currStore), 0);\n    },\n\n    __getCountForResource(resourceName, namespace, storeType) {\n      const resourceCounts = this.$store.getters[`${ storeType }/all`](COUNT)[0]?.counts[`${ resourceName }`]; // NB `rancher` store behaves differently, lacks counts but has resource\n      const resourceCount = namespace && resourceCounts?.namespaces ? resourceCounts?.namespaces[namespace]?.count : resourceCounts?.summary?.count;\n\n      return resourceCount || 0;\n    },\n\n    __gatherResourceFetchData(resourceName, multipleResources, currStore) {\n      // flag to prevent a first data update being triggered from the requestData watcher\n      this.init = true;\n\n      // manual refresh settings config\n      const manualDataRefreshEnabled = this.perfConfig?.manualRefresh?.enabled;\n      const manualDataRefreshThreshold = parseInt(this.perfConfig?.manualRefresh?.threshold || '0', 10);\n\n      // incremental loading settings config\n      const incrementalLoadingEnabled = this.perfConfig?.incrementalLoading?.enabled;\n      const incrementalLoadingThreshold = parseInt(this.perfConfig?.incrementalLoading?.threshold || '0', 10);\n\n      // other vars\n      this.multipleResources = multipleResources;\n      let resourceCount = 0;\n\n      // manual refresh vars\n      let watch = true;\n      let isTooManyItemsToAutoUpdate = false;\n\n      // incremental loading vars\n      let incremental = false;\n\n      // get resource counts\n      const resourcesForCount = this.multipleResources.length ? this.multipleResources : [resourceName];\n\n      resourceCount = this.__getCountForResources(resourcesForCount, this.namespaceFilter, currStore);\n\n      // manual refresh check\n      if (manualDataRefreshEnabled && resourceCount >= manualDataRefreshThreshold) {\n        watch = false;\n        isTooManyItemsToAutoUpdate = true;\n      }\n\n      // incremental loading check\n      incremental = incrementalLoadingEnabled && incrementalLoadingThreshold > 0 && resourceCount >= incrementalLoadingThreshold;\n\n      // pass on the flag that controls the appearance of the manual refresh button on the sortable table\n      this.$store.dispatch('resource-fetch/updateIsTooManyItems', isTooManyItemsToAutoUpdate);\n\n      // set vars on mixin to be used on $fetchType\n      this.watch = watch;\n      this.isTooManyItemsToAutoUpdate = isTooManyItemsToAutoUpdate;\n      this.incremental = incremental;\n    },\n  },\n};\n"],"mappings":"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"}]}