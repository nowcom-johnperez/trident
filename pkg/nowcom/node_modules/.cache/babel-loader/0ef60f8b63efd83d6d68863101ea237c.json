{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--2-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ResourceYaml.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ResourceYaml.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/babel.config.js","mtime":1716430386791},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGpzeWFtbCBmcm9tICdqcy15YW1sJzsKaW1wb3J0IFlhbWxFZGl0b3IsIHsgRURJVE9SX01PREVTIH0gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvWWFtbEVkaXRvcic7CmltcG9ydCBGaWxlU2VsZWN0b3IgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9GaWxlU2VsZWN0b3InOwppbXBvcnQgRm9vdGVyIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vRm9vdGVyJzsKaW1wb3J0IHsgQU5OT1RBVElPTlNfVE9fRk9MRCB9IGZyb20gJ0BzaGVsbC9jb25maWcvbGFiZWxzLWFubm90YXRpb25zJzsKaW1wb3J0IHsgZW5zdXJlUmVnZXggfSBmcm9tICdAc2hlbGwvdXRpbHMvc3RyaW5nJzsKaW1wb3J0IHsgdHlwZU9mIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyBfQ1JFQVRFLCBfVklFVywgUFJFVklFVywgX0ZMQUdHRUQsIF9VTkZMQUcsIF9FRElUIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgeyBCRUZPUkVfU0FWRV9IT09LUywgQUZURVJfU0FWRV9IT09LUyB9IGZyb20gJ0BzaGVsbC9taXhpbnMvY2hpbGQtaG9vayc7CmltcG9ydCB7IGV4Y2VwdGlvblRvRXJyb3JzQXJyYXkgfSBmcm9tICdAc2hlbGwvdXRpbHMvZXJyb3InOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgRm9vdGVyLAogICAgRmlsZVNlbGVjdG9yLAogICAgWWFtbEVkaXRvcgogIH0sCiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBpbml0aWFsWWFtbEZvckRpZmY6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgeWFtbDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgZG9uZVJvdXRlOiB7CiAgICAgIHR5cGU6IFtTdHJpbmcsIE9iamVjdF0sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBvZmZlclByZXZpZXc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKICAgIHBhcmVudFBhcmFtczogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBkb25lT3ZlcnJpZGU6IHsKICAgICAgdHlwZTogW0Z1bmN0aW9uLCBPYmplY3RdLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgc2hvd0Zvb3RlcjogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgYXBwbHlIb29rczogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIC8vIEluaXRpYWwgbG9hZCB3aXRoIGEgcHJldmlldyBzaG93aW5nIG5vIGRpZmYgaXNuJ3QgdmVyeSB1c2VmdWwKICAgIHRoaXMuJHJvdXRlci5hcHBseVF1ZXJ5KHsKICAgICAgW1BSRVZJRVddOiBfVU5GTEFHCiAgICB9KTsKICAgIHJldHVybiB7CiAgICAgIGluaXRpYWxZYW1sOiB0aGlzLmluaXRpYWxZYW1sRm9yRGlmZiB8fCB0aGlzLnlhbWwsCiAgICAgIGN1cnJlbnRZYW1sOiB0aGlzLnlhbWwsCiAgICAgIHNob3dQcmV2aWV3OiBmYWxzZSwKICAgICAgZXJyb3JzOiBudWxsLAogICAgICBjbTogbnVsbCwKICAgICAgaW5pdGlhbFJlYWR5OiB0cnVlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNjaGVtYSgpIHsKICAgICAgY29uc3QgaW5TdG9yZSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRTdG9yZSddKHRoaXMudmFsdWUudHlwZSk7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzW2Ake2luU3RvcmV9L3NjaGVtYUZvcmBdKHRoaXMudmFsdWUudHlwZSk7CiAgICB9LAogICAgaXNDcmVhdGUoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGUgPT09IF9DUkVBVEU7CiAgICB9LAogICAgaXNWaWV3KCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfVklFVzsKICAgIH0sCiAgICBpc0VkaXQoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGUgPT09IF9FRElUOwogICAgfSwKICAgIGVkaXRvck1vZGUoKSB7CiAgICAgIC8vIEluY2x1ZGUgdGhlIG1vZGUgaW4gdGhlIHJvdXRlIGFzIGEgZGVwZW5kZW5jeQogICAgICAvLyBvZiB0aGlzIGNvbXB1dGVkIHByb3BlcnR5IHNvIHRoYXQgdGhlIGVkaXRvcgogICAgICAvLyB0b2dnbGVzIHdoZW4geW91IG5hdmlnYXRlIGJhY2sgYW5kIGZvcnRoIGJldHdlZW4KICAgICAgLy8gZWRpdCBhbmQgdmlldy4KICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5Lm1vZGUgPT09IF9WSUVXIHx8IHRoaXMuaXNWaWV3ICYmICh0aGlzLiRyb3V0ZS5xdWVyeS5tb2RlICE9PSBfRURJVCB8fCB0aGlzLiRyb3V0ZS5xdWVyeS5tb2RlICE9PSBfVklFVykpIHsKICAgICAgICByZXR1cm4gRURJVE9SX01PREVTLlZJRVdfQ09ERTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnNob3dQcmV2aWV3KSB7CiAgICAgICAgcmV0dXJuIEVESVRPUl9NT0RFUy5ESUZGX0NPREU7CiAgICAgIH0KICAgICAgcmV0dXJuIEVESVRPUl9NT0RFUy5FRElUX0NPREU7CiAgICB9LAogICAgY2FuRGlmZigpIHsKICAgICAgcmV0dXJuIHRoaXMuaW5pdGlhbFlhbWwgIT09IHRoaXMuY3VycmVudFlhbWw7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgeWFtbChuZXUpIHsKICAgICAgaWYgKHRoaXMubW9kZSA9PT0gX1ZJRVcpIHsKICAgICAgICB0aGlzLmN1cnJlbnRZYW1sID0gbmV1OwogICAgICB9CiAgICB9LAogICAgbW9kZShuZXUsIG9sZCkgewogICAgICAvLyBpZiB0aGlzIGNvbXBvbmVudCBpcyBjaGFuZ2luZyBmcm9tIHZpZXdpbmcgYSByZXNvdXJjZSB0byAnY3JlYXRpbmcnIHRoYXQgcmVzb3VyY2UsIGl0IG11c3QgYWN0dWFsbHkgYmUgY2xvbmluZwogICAgICAvLyBjbGVhbiB5YW1sIGFjY29yZGluZ2x5CiAgICAgIGlmIChuZXUgPT09IF9DUkVBVEUgJiYgb2xkID09PSBfVklFVykgewogICAgICAgIHRoaXMuY3VycmVudFlhbWwgPSB0aGlzLnZhbHVlLmNsZWFuWWFtbCh0aGlzLnlhbWwsIG5ldSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIG9uSW5wdXQoeWFtbCkgewogICAgICB0aGlzLmN1cnJlbnRZYW1sID0geWFtbDsKICAgICAgdGhpcy5vblJlYWR5KHRoaXMuY20pOwogICAgfSwKICAgIG9uUmVhZHkoY20pIHsKICAgICAgaWYgKCF0aGlzLmluaXRpYWxSZWFkeSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLmluaXRpYWxSZWFkeSA9IGZhbHNlOwogICAgICB0aGlzLmNtID0gY207CiAgICAgIGlmICh0aGlzLmlzRWRpdCkgewogICAgICAgIGNtLmZvbGRMaW5lc01hdGNoaW5nKC9ec3RhdHVzOlxzKiQvKTsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIHZhciBfcGFyc2VkJG1ldGFkYXRhOwogICAgICAgIGNvbnN0IHBhcnNlZCA9IGpzeWFtbC5sb2FkKHRoaXMuY3VycmVudFlhbWwpOwogICAgICAgIGNvbnN0IGFubm90YXRpb25zID0gT2JqZWN0LmtleXMoKHBhcnNlZCA9PT0gbnVsbCB8fCBwYXJzZWQgPT09IHZvaWQgMCB8fCAoX3BhcnNlZCRtZXRhZGF0YSA9IHBhcnNlZC5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3BhcnNlZCRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BhcnNlZCRtZXRhZGF0YS5hbm5vdGF0aW9ucykgfHwge30pOwogICAgICAgIGNvbnN0IHJlZ2V4ZXMgPSBBTk5PVEFUSU9OU19UT19GT0xELm1hcCh4ID0+IGVuc3VyZVJlZ2V4KHgpKTsKICAgICAgICBsZXQgZm9sZEFubm90YXRpb25zID0gZmFsc2U7CiAgICAgICAgZm9yIChjb25zdCBrIG9mIGFubm90YXRpb25zKSB7CiAgICAgICAgICBpZiAoZm9sZEFubm90YXRpb25zKSB7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgZm9yIChjb25zdCByZWdleCBvZiByZWdleGVzKSB7CiAgICAgICAgICAgIGlmIChrLm1hdGNoKHJlZ2V4KSkgewogICAgICAgICAgICAgIGZvbGRBbm5vdGF0aW9ucyA9IHRydWU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKGZvbGRBbm5vdGF0aW9ucykgewogICAgICAgICAgY20uZm9sZExpbmVzTWF0Y2hpbmcoL15ccythbm5vdGF0aW9uczpccyokLyk7CiAgICAgICAgfQogICAgICB9IGNhdGNoIChlKSB7fQogICAgICBjbS5mb2xkTGluZXNNYXRjaGluZygvbWFuYWdlZEZpZWxkcy8pOwoKICAgICAgLy8gcmVnYXJkbGVzcyBvZiBlZGl0IG9yIGNyZWF0ZSB3ZSBzaG91bGQgcHJvYmFibHkgZm9sZCBhbGwgdGhlIGNvbW1lbnRzIHNvIHRoZXkgZG9udCBnZXQgb3V0IG9mIGhhbmQuCiAgICAgIGNvbnN0IHNhdmVkID0gY20uZ2V0TW9kZSgpLmZvbGQ7CiAgICAgIGNtLmdldE1vZGUoKS5mb2xkID0gJ3lhbWxjb21tZW50cyc7CiAgICAgIGNtLmV4ZWNDb21tYW5kKCdmb2xkQWxsJyk7CiAgICAgIGNtLmdldE1vZGUoKS5mb2xkID0gc2F2ZWQ7CiAgICB9LAogICAgb25DaGFuZ2VzKGNtLCBjaGFuZ2VzKSB7CiAgICAgIGlmIChjaGFuZ2VzLmxlbmd0aCAhPT0gMSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCBjaGFuZ2UgPSBjaGFuZ2VzWzBdOwogICAgICBpZiAoY2hhbmdlLmZyb20ubGluZSAhPT0gY2hhbmdlLnRvLmxpbmUpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgbGV0IGxpbmUgPSBjaGFuZ2UuZnJvbS5saW5lOwogICAgICBsZXQgc3RyID0gY20uZ2V0TGluZShsaW5lKTsKICAgICAgbGV0IG1heEluZGVudCA9IGluZGVudENoYXJzKHN0cik7CiAgICAgIGlmIChtYXhJbmRlbnQgPT09IG51bGwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgY20ucmVwbGFjZVJhbmdlKCcnLCB7CiAgICAgICAgbGluZSwKICAgICAgICBjaDogMAogICAgICB9LCB7CiAgICAgICAgbGluZSwKICAgICAgICBjaDogMQogICAgICB9LCAnK2lucHV0Jyk7CiAgICAgIHdoaWxlIChsaW5lID4gMCkgewogICAgICAgIGxpbmUtLTsKICAgICAgICBzdHIgPSBjbS5nZXRMaW5lKGxpbmUpOwogICAgICAgIGNvbnN0IGluZGVudCA9IGluZGVudENoYXJzKHN0cik7CiAgICAgICAgaWYgKGluZGVudCA9PT0gbnVsbCkgewogICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGlmIChpbmRlbnQgPCBtYXhJbmRlbnQpIHsKICAgICAgICAgIGNtLnJlcGxhY2VSYW5nZSgnJywgewogICAgICAgICAgICBsaW5lLAogICAgICAgICAgICBjaDogMAogICAgICAgICAgfSwgewogICAgICAgICAgICBsaW5lLAogICAgICAgICAgICBjaDogMQogICAgICAgICAgfSwgJytpbnB1dCcpOwogICAgICAgICAgaWYgKGluZGVudCA9PT0gMCkgewogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIG1heEluZGVudCA9IGluZGVudDsKICAgICAgICB9CiAgICAgIH0KICAgICAgZnVuY3Rpb24gaW5kZW50Q2hhcnMoc3RyKSB7CiAgICAgICAgY29uc3QgbWF0Y2ggPSBzdHIubWF0Y2goL14jKFxzKykvKTsKICAgICAgICBpZiAobWF0Y2gpIHsKICAgICAgICAgIHJldHVybiBtYXRjaFsxXS5sZW5ndGg7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICB9LAogICAgdXBkYXRlVmFsdWUodmFsdWUpIHsKICAgICAgdGhpcy4kcmVmcy55YW1sZWRpdG9yLnVwZGF0ZVZhbHVlKHZhbHVlKTsKICAgIH0sCiAgICBwcmV2aWV3KCkgewogICAgICB0aGlzLnVwZGF0ZVZhbHVlKHRoaXMuY3VycmVudFlhbWwpOwogICAgICB0aGlzLnNob3dQcmV2aWV3ID0gdHJ1ZTsKICAgICAgdGhpcy4kcm91dGVyLmFwcGx5UXVlcnkoewogICAgICAgIFtQUkVWSUVXXTogX0ZMQUdHRUQKICAgICAgfSk7CiAgICB9LAogICAgdW5wcmV2aWV3KCkgewogICAgICB0aGlzLnNob3dQcmV2aWV3ID0gZmFsc2U7CiAgICAgIHRoaXMuJHJvdXRlci5hcHBseVF1ZXJ5KHsKICAgICAgICBbUFJFVklFV106IF9VTkZMQUcKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgc2F2ZShidXR0b25Eb25lKSB7CiAgICAgIGNvbnN0IHlhbWwgPSB0aGlzLnZhbHVlLnlhbWxGb3JTYXZlKHRoaXMuY3VycmVudFlhbWwpIHx8IHRoaXMuY3VycmVudFlhbWw7CiAgICAgIHRyeSB7CiAgICAgICAgaWYgKHRoaXMuYXBwbHlIb29rcykgewogICAgICAgICAgYXdhaXQgdGhpcy5hcHBseUhvb2tzKEJFRk9SRV9TQVZFX0hPT0tTKTsKICAgICAgICB9CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGF3YWl0IHRoaXMudmFsdWUuc2F2ZVlhbWwoeWFtbCk7CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICByZXR1cm4gb25FcnJvci5jYWxsKHRoaXMsIGVycik7CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmFwcGx5SG9va3MpIHsKICAgICAgICAgIGF3YWl0IHRoaXMuYXBwbHlIb29rcyhBRlRFUl9TQVZFX0hPT0tTKTsKICAgICAgICB9CiAgICAgICAgYnV0dG9uRG9uZSh0cnVlKTsKICAgICAgICB0aGlzLmRvbmUoKTsKICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgcmV0dXJuIG9uRXJyb3IuY2FsbCh0aGlzLCBlcnIpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIG9uRXJyb3IoZXJyKSB7CiAgICAgICAgaWYgKGVyciAmJiBlcnIucmVzcG9uc2UgJiYgZXJyLnJlc3BvbnNlLmRhdGEpIHsKICAgICAgICAgIGNvbnN0IGJvZHkgPSBlcnIucmVzcG9uc2UuZGF0YTsKICAgICAgICAgIGlmIChib2R5ICYmIGJvZHkubWVzc2FnZSkgewogICAgICAgICAgICB0aGlzLmVycm9ycyA9IFtib2R5Lm1lc3NhZ2VdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5lcnJvcnMgPSBbZXJyXTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5lcnJvcnMgPSBbZXJyXTsKICAgICAgICB9CiAgICAgICAgYnV0dG9uRG9uZShmYWxzZSk7CiAgICAgICAgdGhpcy4kZW1pdCgnZXJyb3InLCBleGNlcHRpb25Ub0Vycm9yc0FycmF5KGVycikpOwogICAgICB9CiAgICB9LAogICAgZG9uZSgpIHsKICAgICAgaWYgKHRoaXMuZG9uZU92ZXJyaWRlKSB7CiAgICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLmRvbmVPdmVycmlkZSA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuZG9uZU92ZXJyaWRlKCkgOiB0aGlzLiRyb3V0ZXIucmVwbGFjZSh0aGlzLmRvbmVPdmVycmlkZSk7CiAgICAgIH0KICAgICAgaWYgKCF0aGlzLmRvbmVSb3V0ZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAodHlwZU9mKHRoaXMuZG9uZVJvdXRlKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh0aGlzLmRvbmVSb3V0ZSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICBuYW1lOiB0aGlzLmRvbmVSb3V0ZSwKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHJlc291cmNlOiB0aGlzLnZhbHVlLnR5cGUKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIG9uRmlsZVNlbGVjdGVkKHZhbHVlKSB7CiAgICAgIGNvbnN0IGNvbXBvbmVudCA9IHRoaXMuJHJlZnMueWFtbGVkaXRvcjsKICAgICAgaWYgKGNvbXBvbmVudCkgewogICAgICAgIGNvbXBvbmVudC51cGRhdGVWYWx1ZSh2YWx1ZSk7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["jsyaml","YamlEditor","EDITOR_MODES","FileSelector","Footer","ANNOTATIONS_TO_FOLD","ensureRegex","typeOf","_CREATE","_VIEW","PREVIEW","_FLAGGED","_UNFLAG","_EDIT","BEFORE_SAVE_HOOKS","AFTER_SAVE_HOOKS","exceptionToErrorsArray","components","props","mode","type","String","required","value","Object","initialYamlForDiff","default","yaml","doneRoute","offerPreview","Boolean","parentParams","doneOverride","Function","showFooter","applyHooks","data","$router","applyQuery","initialYaml","currentYaml","showPreview","errors","cm","initialReady","computed","schema","inStore","$store","getters","isCreate","isView","isEdit","editorMode","$route","query","VIEW_CODE","DIFF_CODE","EDIT_CODE","canDiff","watch","neu","old","cleanYaml","methods","onInput","onReady","foldLinesMatching","_parsed$metadata","parsed","load","annotations","keys","metadata","regexes","map","x","foldAnnotations","k","regex","match","e","saved","getMode","fold","execCommand","onChanges","changes","length","change","from","line","to","str","getLine","maxIndent","indentChars","replaceRange","ch","indent","updateValue","$refs","yamleditor","preview","unpreview","save","buttonDone","yamlForSave","saveYaml","err","onError","call","done","response","body","message","$emit","replace","name","params","resource","onFileSelected","component"],"sources":["../../node_modules/@rancher/shell/components/ResourceYaml.vue"],"sourcesContent":["<script>\nimport jsyaml from 'js-yaml';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport FileSelector from '@shell/components/form/FileSelector';\nimport Footer from '@shell/components/form/Footer';\nimport { ANNOTATIONS_TO_FOLD } from '@shell/config/labels-annotations';\nimport { ensureRegex } from '@shell/utils/string';\nimport { typeOf } from '@shell/utils/sort';\n\nimport {\n  _CREATE,\n  _VIEW,\n  PREVIEW,\n  _FLAGGED,\n  _UNFLAG,\n  _EDIT,\n} from '@shell/config/query-params';\nimport { BEFORE_SAVE_HOOKS, AFTER_SAVE_HOOKS } from '@shell/mixins/child-hook';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\n\nexport default {\n  components: {\n    Footer,\n    FileSelector,\n    YamlEditor\n  },\n\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    value: {\n      type:     Object,\n      required: true,\n    },\n\n    initialYamlForDiff: {\n      type:    String,\n      default: null,\n    },\n\n    yaml: {\n      type:     String,\n      required: true,\n    },\n\n    doneRoute: {\n      type:    [String, Object],\n      default: null,\n    },\n\n    offerPreview: {\n      type:    Boolean,\n      default: true,\n    },\n\n    parentParams: {\n      type:    Object,\n      default: null,\n    },\n\n    doneOverride: {\n      type:    [Function, Object],\n      default: null\n    },\n\n    showFooter: {\n      type:    Boolean,\n      default: true\n    },\n\n    applyHooks: {\n      type:    Function,\n      default: null,\n    }\n  },\n\n  data() {\n    // Initial load with a preview showing no diff isn't very useful\n    this.$router.applyQuery({ [PREVIEW]: _UNFLAG });\n\n    return {\n      initialYaml:  this.initialYamlForDiff || this.yaml,\n      currentYaml:  this.yaml,\n      showPreview:  false,\n      errors:       null,\n      cm:           null,\n      initialReady: true\n    };\n  },\n\n  computed: {\n    schema() {\n      const inStore = this.$store.getters['currentStore'](this.value.type);\n\n      return this.$store.getters[`${ inStore }/schemaFor`]( this.value.type );\n    },\n\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    isEdit() {\n      return this.mode === _EDIT;\n    },\n\n    editorMode() {\n      // Include the mode in the route as a dependency\n      // of this computed property so that the editor\n      // toggles when you navigate back and forth between\n      // edit and view.\n      if ( this.$route.query.mode === _VIEW || (this.isView && (this.$route.query.mode !== _EDIT || this.$route.query.mode !== _VIEW))) {\n        return EDITOR_MODES.VIEW_CODE;\n      } else if ( this.showPreview ) {\n        return EDITOR_MODES.DIFF_CODE;\n      }\n\n      return EDITOR_MODES.EDIT_CODE;\n    },\n\n    canDiff() {\n      return this.initialYaml !== this.currentYaml;\n    },\n  },\n\n  watch: {\n    yaml(neu) {\n      if ( this.mode === _VIEW ) {\n        this.currentYaml = neu;\n      }\n    },\n\n    mode(neu, old) {\n      // if this component is changing from viewing a resource to 'creating' that resource, it must actually be cloning\n      // clean yaml accordingly\n      if (neu === _CREATE && old === _VIEW) {\n        this.currentYaml = this.value.cleanYaml(this.yaml, neu);\n      }\n    }\n  },\n\n  methods: {\n    onInput(yaml) {\n      this.currentYaml = yaml;\n      this.onReady(this.cm);\n    },\n\n    onReady(cm) {\n      if (!this.initialReady) {\n        return;\n      }\n      this.initialReady = false;\n\n      this.cm = cm;\n\n      if ( this.isEdit ) {\n        cm.foldLinesMatching(/^status:\\s*$/);\n      }\n\n      try {\n        const parsed = jsyaml.load(this.currentYaml);\n        const annotations = Object.keys(parsed?.metadata?.annotations || {});\n        const regexes = ANNOTATIONS_TO_FOLD.map((x) => ensureRegex(x));\n\n        let foldAnnotations = false;\n\n        for ( const k of annotations ) {\n          if ( foldAnnotations ) {\n            break;\n          }\n\n          for ( const regex of regexes ) {\n            if ( k.match(regex) ) {\n              foldAnnotations = true;\n              break;\n            }\n          }\n        }\n\n        if ( foldAnnotations ) {\n          cm.foldLinesMatching(/^\\s+annotations:\\s*$/);\n        }\n      } catch (e) {}\n\n      cm.foldLinesMatching(/managedFields/);\n\n      // regardless of edit or create we should probably fold all the comments so they dont get out of hand.\n      const saved = cm.getMode().fold;\n\n      cm.getMode().fold = 'yamlcomments';\n      cm.execCommand('foldAll');\n      cm.getMode().fold = saved;\n    },\n\n    onChanges(cm, changes) {\n      if ( changes.length !== 1 ) {\n        return;\n      }\n\n      const change = changes[0];\n\n      if ( change.from.line !== change.to.line ) {\n        return;\n      }\n\n      let line = change.from.line;\n      let str = cm.getLine(line);\n      let maxIndent = indentChars(str);\n\n      if ( maxIndent === null ) {\n        return;\n      }\n\n      cm.replaceRange('', { line, ch: 0 }, { line, ch: 1 }, '+input');\n\n      while ( line > 0 ) {\n        line--;\n        str = cm.getLine(line);\n        const indent = indentChars(str);\n\n        if ( indent === null ) {\n          break;\n        }\n\n        if ( indent < maxIndent ) {\n          cm.replaceRange('', { line, ch: 0 }, { line, ch: 1 }, '+input');\n\n          if ( indent === 0 ) {\n            break;\n          }\n\n          maxIndent = indent;\n        }\n      }\n\n      function indentChars(str) {\n        const match = str.match(/^#(\\s+)/);\n\n        if ( match ) {\n          return match[1].length;\n        }\n\n        return null;\n      }\n    },\n\n    updateValue(value) {\n      this.$refs.yamleditor.updateValue(value);\n    },\n\n    preview() {\n      this.updateValue(this.currentYaml);\n      this.showPreview = true;\n      this.$router.applyQuery({ [PREVIEW]: _FLAGGED });\n    },\n\n    unpreview() {\n      this.showPreview = false;\n      this.$router.applyQuery({ [PREVIEW]: _UNFLAG });\n    },\n\n    async save(buttonDone) {\n      const yaml = this.value.yamlForSave(this.currentYaml) || this.currentYaml;\n\n      try {\n        if ( this.applyHooks ) {\n          await this.applyHooks(BEFORE_SAVE_HOOKS);\n        }\n\n        try {\n          await this.value.saveYaml(yaml);\n        } catch (err) {\n          return onError.call(this, err);\n        }\n\n        if ( this.applyHooks ) {\n          await this.applyHooks(AFTER_SAVE_HOOKS);\n        }\n\n        buttonDone(true);\n        this.done();\n      } catch (err) {\n        return onError.call(this, err);\n      }\n\n      function onError(err) {\n        if ( err && err.response && err.response.data ) {\n          const body = err.response.data;\n\n          if ( body && body.message ) {\n            this.errors = [body.message];\n          } else {\n            this.errors = [err];\n          }\n        } else {\n          this.errors = [err];\n        }\n\n        buttonDone(false);\n\n        this.$emit('error', exceptionToErrorsArray(err));\n      }\n    },\n\n    done() {\n      if (this.doneOverride) {\n        return typeof (this.doneOverride) === 'function' ? this.doneOverride() : this.$router.replace(this.doneOverride);\n      }\n      if ( !this.doneRoute ) {\n        return;\n      }\n      if (typeOf(this.doneRoute) === 'object') {\n        this.$router.replace(this.doneRoute);\n\n        return;\n      }\n      this.$router.replace({\n        name:   this.doneRoute,\n        params: { resource: this.value.type }\n      });\n    },\n\n    onFileSelected(value) {\n      const component = this.$refs.yamleditor;\n\n      if (component) {\n        component.updateValue(value);\n      }\n    },\n\n  }\n};\n</script>\n\n<template>\n  <div class=\"root resource-yaml\">\n    <YamlEditor\n      ref=\"yamleditor\"\n      v-model=\"currentYaml\"\n      :initial-yaml-values=\"initialYaml\"\n      class=\"yaml-editor flex-content\"\n      :editor-mode=\"editorMode\"\n      @onInput=\"onInput\"\n      @onReady=\"onReady\"\n      @onChanges=\"onChanges\"\n    />\n    <slot\n      name=\"yamlFooter\"\n      :currentYaml=\"currentYaml\"\n      :showPreview=\"showPreview\"\n      :yamlPreview=\"preview\"\n      :yamlSave=\"save\"\n      :yamlUnpreview=\"unpreview\"\n    >\n      <Footer\n        v-if=\"showFooter\"\n        :mode=\"mode\"\n        :errors=\"errors\"\n        @save=\"save\"\n        @done=\"done\"\n      >\n        <template\n          v-if=\"!isView\"\n          #left\n        >\n          <FileSelector\n            class=\"btn role-secondary\"\n            :label=\"t('generic.readFromFile')\"\n            @selected=\"onFileSelected\"\n          />\n        </template>\n        <template\n          v-if=\"!isView\"\n          #middle\n        >\n          <button\n            v-if=\"showPreview\"\n            type=\"button\"\n            class=\"btn role-secondary\"\n            @click=\"unpreview\"\n          >\n            <t k=\"resourceYaml.buttons.continue\" />\n          </button>\n          <button\n            v-else-if=\"offerPreview\"\n            :disabled=\"!canDiff\"\n            type=\"button\"\n            class=\"btn role-secondary\"\n            @click=\"preview\"\n          >\n            <t k=\"resourceYaml.buttons.diff\" />\n          </button>\n        </template>\n      </Footer>\n    </slot>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.flex-content {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n}\n</style>\n\n<style lang=\"scss\">\n.resource-yaml {\n  .yaml-editor {\n    min-height: 200px;\n  }\n\n  footer .actions {\n    text-align: right;\n  }\n}\n\n</style>\n"],"mappings":"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"}]}