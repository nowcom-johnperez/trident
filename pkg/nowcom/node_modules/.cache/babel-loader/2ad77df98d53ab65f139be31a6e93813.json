{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/child-hook.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/child-hook.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/babel.config.js","mtime":1716430386791},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgZmluZEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwpsZXQgTkVYVF9JRCA9IDE7CmV4cG9ydCBjb25zdCBCRUZPUkVfU0FWRV9IT09LUyA9ICdfYmVmb3JlU2F2ZUhvb2tzJzsKZXhwb3J0IGNvbnN0IEFGVEVSX1NBVkVfSE9PS1MgPSAnX2FmdGVyU2F2ZUhvb2tzJzsKZXhwb3J0IGRlZmF1bHQgewogIG1ldGhvZHM6IHsKICAgIHJlZ2lzdGVyQmVmb3JlSG9vayhib3VuZEZuLCBuYW1lLCBwcmlvcml0eSA9IDk5LCBib3VuZEZuQ29udGV4dCkgewogICAgICB0aGlzLl9yZWdpc3Rlckhvb2soQkVGT1JFX1NBVkVfSE9PS1MsIGJvdW5kRm4sIG5hbWUsIHByaW9yaXR5LCBib3VuZEZuQ29udGV4dCk7CiAgICB9LAogICAgdW5yZWdpc3RlckJlZm9yZVNhdmVIb29rKG5hbWUpIHsKICAgICAgdGhpc1tCRUZPUkVfU0FWRV9IT09LU10gPSB0aGlzW0JFRk9SRV9TQVZFX0hPT0tTXS5maWx0ZXIoaG9vayA9PiB7CiAgICAgICAgLy8gQkVGT1JFX1NBVkVfSE9PS1MgaXMgYW4gYXJyYXkgb2Ygb2JqZWN0cyB3aXRoIGtleXMKICAgICAgICAvLyBmbiwgbmFtZSBhbmQgcHJpb3JpdHkuCiAgICAgICAgcmV0dXJuIGhvb2submFtZSAhPT0gbmFtZTsKICAgICAgfSk7CiAgICB9LAogICAgcmVnaXN0ZXJBZnRlckhvb2soYm91bmRGbiwgbmFtZSwgcHJpb3JpdHkgPSA5OSwgYm91bmRGbkNvbnRleHQpIHsKICAgICAgdGhpcy5fcmVnaXN0ZXJIb29rKEFGVEVSX1NBVkVfSE9PS1MsIGJvdW5kRm4sIG5hbWUsIHByaW9yaXR5LCBib3VuZEZuQ29udGV4dCk7CiAgICB9LAogICAgYXN5bmMgYXBwbHlIb29rcyhrZXksIC4uLmFyZ3MpIHsKICAgICAgaWYgKCFrZXkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3BlY2lmeSBrZXknKTsKICAgICAgfQogICAgICBjb25zdCBob29rcyA9IHNvcnRCeSh0aGlzW2tleV0gfHwgW10sIFsncHJpb3JpdHknLCAnbmFtZSddKTsKICAgICAgY29uc3Qgb3V0ID0ge307CiAgICAgIGZvciAoY29uc3QgeCBvZiBob29rcykgewogICAgICAgIGNvbnNvbGUuZGVidWcoJ0FwcGx5aW5nIGhvb2snLCB4Lm5hbWUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICBvdXRbeC5uYW1lXSA9IGF3YWl0IHguZm4uYXBwbHkoeC5mbkNvbnRleHQgfHwgdGhpcywgYXJncyk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICBfcmVnaXN0ZXJIb29rKGtleSwgZm4sIG5hbWUsIHByaW9yaXR5LCBmbkNvbnRleHQpIHsKICAgICAgaWYgKCFrZXkpIHsKICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ011c3Qgc3BlY2lmeSBrZXknKTsKICAgICAgfQogICAgICBpZiAoIW5hbWUpIHsKICAgICAgICBuYW1lID0gYGhvb2tfJHtORVhUX0lEfWA7CiAgICAgICAgTkVYVF9JRCsrOwogICAgICB9CiAgICAgIGlmICghcHJpb3JpdHkpIHsKICAgICAgICBwcmlvcml0eSA9IDk5OwogICAgICB9CiAgICAgIGxldCBob29rcyA9IHRoaXNba2V5XTsKICAgICAgaWYgKCFob29rcykgewogICAgICAgIGhvb2tzID0gW107CiAgICAgICAgdGhpc1trZXldID0gaG9va3M7CiAgICAgIH0KICAgICAgbGV0IGVudHJ5ID0gZmluZEJ5KGhvb2tzLCAnbmFtZScsIG5hbWUpOwogICAgICBpZiAoZW50cnkpIHsKICAgICAgICBlbnRyeS5wcmlvcml0eSA9IHByaW9yaXR5OwogICAgICAgIGVudHJ5LmZuID0gZm47CiAgICAgICAgZW50cnkuZm5Db250ZXh0ID0gZm5Db250ZXh0OwogICAgICB9IGVsc2UgewogICAgICAgIGVudHJ5ID0gewogICAgICAgICAgbmFtZSwKICAgICAgICAgIHByaW9yaXR5LAogICAgICAgICAgZm4sCiAgICAgICAgICBmbkNvbnRleHQKICAgICAgICB9OwogICAgICAgIGhvb2tzLnB1c2goZW50cnkpOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["findBy","sortBy","NEXT_ID","BEFORE_SAVE_HOOKS","AFTER_SAVE_HOOKS","methods","registerBeforeHook","boundFn","name","priority","boundFnContext","_registerHook","unregisterBeforeSaveHook","filter","hook","registerAfterHook","applyHooks","key","args","Error","hooks","out","x","console","debug","fn","apply","fnContext","entry","push"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/child-hook.js"],"sourcesContent":["import { findBy } from '@shell/utils/array';\nimport { sortBy } from '@shell/utils/sort';\n\nlet NEXT_ID = 1;\n\nexport const BEFORE_SAVE_HOOKS = '_beforeSaveHooks';\nexport const AFTER_SAVE_HOOKS = '_afterSaveHooks';\n\nexport default {\n  methods: {\n    registerBeforeHook(boundFn, name, priority = 99, boundFnContext) {\n      this._registerHook(BEFORE_SAVE_HOOKS, boundFn, name, priority, boundFnContext);\n    },\n\n    unregisterBeforeSaveHook(name) {\n      this[BEFORE_SAVE_HOOKS] = this[BEFORE_SAVE_HOOKS].filter((hook) => {\n        // BEFORE_SAVE_HOOKS is an array of objects with keys\n        // fn, name and priority.\n        return hook.name !== name;\n      });\n    },\n\n    registerAfterHook(boundFn, name, priority = 99, boundFnContext) {\n      this._registerHook(AFTER_SAVE_HOOKS, boundFn, name, priority, boundFnContext);\n    },\n\n    async applyHooks(key, ...args) {\n      if (!key) {\n        throw new Error('Must specify key');\n      }\n\n      const hooks = sortBy(this[key] || [], ['priority', 'name']);\n      const out = {};\n\n      for (const x of hooks) {\n        console.debug('Applying hook', x.name); // eslint-disable-line no-console\n        out[x.name] = await x.fn.apply(x.fnContext || this, args);\n      }\n\n      return out;\n    },\n\n    _registerHook(key, fn, name, priority, fnContext) {\n      if ( !key ) {\n        throw new Error('Must specify key');\n      }\n\n      if ( !name ) {\n        name = `hook_${ NEXT_ID }`;\n        NEXT_ID++;\n      }\n\n      if ( !priority ) {\n        priority = 99;\n      }\n\n      let hooks = this[key];\n\n      if ( !hooks ) {\n        hooks = [];\n        this[key] = hooks;\n      }\n\n      let entry = findBy(hooks, 'name', name);\n\n      if ( entry ) {\n        entry.priority = priority;\n        entry.fn = fn;\n        entry.fnContext = fnContext;\n      } else {\n        entry = {\n          name,\n          priority,\n          fn,\n          fnContext\n        };\n\n        hooks.push(entry);\n      }\n    },\n  },\n};\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,oBAAoB;AAC3C,SAASC,MAAM,QAAQ,mBAAmB;AAE1C,IAAIC,OAAO,GAAG,CAAC;AAEf,OAAO,MAAMC,iBAAiB,GAAG,kBAAkB;AACnD,OAAO,MAAMC,gBAAgB,GAAG,iBAAiB;AAEjD,eAAe;EACbC,OAAO,EAAE;IACPC,kBAAkBA,CAACC,OAAO,EAAEC,IAAI,EAAEC,QAAQ,GAAG,EAAE,EAAEC,cAAc,EAAE;MAC/D,IAAI,CAACC,aAAa,CAACR,iBAAiB,EAAEI,OAAO,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,cAAc,CAAC;IAChF,CAAC;IAEDE,wBAAwBA,CAACJ,IAAI,EAAE;MAC7B,IAAI,CAACL,iBAAiB,CAAC,GAAG,IAAI,CAACA,iBAAiB,CAAC,CAACU,MAAM,CAAEC,IAAI,IAAK;QACjE;QACA;QACA,OAAOA,IAAI,CAACN,IAAI,KAAKA,IAAI;MAC3B,CAAC,CAAC;IACJ,CAAC;IAEDO,iBAAiBA,CAACR,OAAO,EAAEC,IAAI,EAAEC,QAAQ,GAAG,EAAE,EAAEC,cAAc,EAAE;MAC9D,IAAI,CAACC,aAAa,CAACP,gBAAgB,EAAEG,OAAO,EAAEC,IAAI,EAAEC,QAAQ,EAAEC,cAAc,CAAC;IAC/E,CAAC;IAED,MAAMM,UAAUA,CAACC,GAAG,EAAE,GAAGC,IAAI,EAAE;MAC7B,IAAI,CAACD,GAAG,EAAE;QACR,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;MACrC;MAEA,MAAMC,KAAK,GAAGnB,MAAM,CAAC,IAAI,CAACgB,GAAG,CAAC,IAAI,EAAE,EAAE,CAAC,UAAU,EAAE,MAAM,CAAC,CAAC;MAC3D,MAAMI,GAAG,GAAG,CAAC,CAAC;MAEd,KAAK,MAAMC,CAAC,IAAIF,KAAK,EAAE;QACrBG,OAAO,CAACC,KAAK,CAAC,eAAe,EAAEF,CAAC,CAACd,IAAI,CAAC,CAAC,CAAC;QACxCa,GAAG,CAACC,CAAC,CAACd,IAAI,CAAC,GAAG,MAAMc,CAAC,CAACG,EAAE,CAACC,KAAK,CAACJ,CAAC,CAACK,SAAS,IAAI,IAAI,EAAET,IAAI,CAAC;MAC3D;MAEA,OAAOG,GAAG;IACZ,CAAC;IAEDV,aAAaA,CAACM,GAAG,EAAEQ,EAAE,EAAEjB,IAAI,EAAEC,QAAQ,EAAEkB,SAAS,EAAE;MAChD,IAAK,CAACV,GAAG,EAAG;QACV,MAAM,IAAIE,KAAK,CAAC,kBAAkB,CAAC;MACrC;MAEA,IAAK,CAACX,IAAI,EAAG;QACXA,IAAI,GAAI,QAAQN,OAAS,EAAC;QAC1BA,OAAO,EAAE;MACX;MAEA,IAAK,CAACO,QAAQ,EAAG;QACfA,QAAQ,GAAG,EAAE;MACf;MAEA,IAAIW,KAAK,GAAG,IAAI,CAACH,GAAG,CAAC;MAErB,IAAK,CAACG,KAAK,EAAG;QACZA,KAAK,GAAG,EAAE;QACV,IAAI,CAACH,GAAG,CAAC,GAAGG,KAAK;MACnB;MAEA,IAAIQ,KAAK,GAAG5B,MAAM,CAACoB,KAAK,EAAE,MAAM,EAAEZ,IAAI,CAAC;MAEvC,IAAKoB,KAAK,EAAG;QACXA,KAAK,CAACnB,QAAQ,GAAGA,QAAQ;QACzBmB,KAAK,CAACH,EAAE,GAAGA,EAAE;QACbG,KAAK,CAACD,SAAS,GAAGA,SAAS;MAC7B,CAAC,MAAM;QACLC,KAAK,GAAG;UACNpB,IAAI;UACJC,QAAQ;UACRgB,EAAE;UACFE;QACF,CAAC;QAEDP,KAAK,CAACS,IAAI,CAACD,KAAK,CAAC;MACnB;IACF;EACF;AACF,CAAC"}]}