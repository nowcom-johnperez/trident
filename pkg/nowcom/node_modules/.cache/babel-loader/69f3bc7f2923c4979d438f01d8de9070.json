{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--2-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/components/forms/AddSubnet.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/components/forms/AddSubnet.vue","mtime":1716430386792},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/babel.config.js","mtime":1716430386791},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgaXNWYWxpZElQIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvaGVscGVycy91dGlscyc7CmltcG9ydCB7IHZOZXRTZXJ2aWNlIH0gZnJvbSAnLi4vLi4vc2VydmljZXMvYXBpL3ZuZXQnOwppbXBvcnQgY0J1dHRvbiBmcm9tICcuLi9jb21tb24vQnV0dG9uJzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdBZGRTdWJuZXQnLAogIHByb3BzOiB7CiAgICBpc09wZW46IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBjdXJyZW50TmV0d29yazogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBjQnV0dG9uCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3VibmV0TmFtZTogJycsCiAgICAgIHN1Ym5ldElQOiAnMTAuNTUuMC4wJywKICAgICAgbG9hZGluZzogZmFsc2UKICAgIH07CiAgfSwKICB3YXRjaGVyOiB7CiAgICBpc09wZW4odmFsKSB7CiAgICAgIGlmICghdmFsKSB0aGlzLnJlc2V0Rm9ybSgpOwogICAgfQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzQWRkU3VibmV0RGlzYWJsZWQoKSB7CiAgICAgIC8vIENoZWNrIGNvbmRpdGlvbnMgdG8gZGlzYWJsZSB0aGUgYnV0dG9uCiAgICAgIHJldHVybiAhdGhpcy5zdWJuZXROYW1lIHx8ICF0aGlzLnN1Ym5ldElQIHx8ICF0aGlzLmlzU3VibmV0SVBWYWxpZDsKICAgIH0sCiAgICBpc1N1Ym5ldElQVmFsaWQoKSB7CiAgICAgIHJldHVybiBpc1ZhbGlkSVAodGhpcy5zdWJuZXRJUCk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICByZXNldEZvcm0oKSB7CiAgICAgIHRoaXMuc3VibmV0TmFtZSA9ICcnOwogICAgICB0aGlzLnN1Ym5ldElQID0gJzEwLjU1LjAuMCc7CiAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSwKICAgIGFzeW5jIGFkZFN1Ym5ldCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBuZXR3b3JrID0gewogICAgICAgICAgLi4udGhpcy5jdXJyZW50TmV0d29yawogICAgICAgIH07CiAgICAgICAgdGhpcy5hcGlFcnJvciA9IG51bGw7IC8vIFJlc2V0IGVycm9yIHN0YXRlCiAgICAgICAgLy8gdjAuMgogICAgICAgIGNvbnN0IHN1Ym5ldE5hbWUgPSB0aGlzLnN1Ym5ldE5hbWUudG9Mb3dlckNhc2UoKTsKICAgICAgICBjb25zdCBzdWJuZXRfZGF0YSA9IHsKICAgICAgICAgIGxvbmdOYW1lOiBgJHtuZXR3b3JrLm5hbWV9LSR7c3VibmV0TmFtZX0tJHt0aGlzLnN1Ym5ldElQfS0yNGAsCiAgICAgICAgICBuYW1lOiBzdWJuZXROYW1lLAogICAgICAgICAgYWRkcmVzczogdGhpcy5zdWJuZXRJUCwKICAgICAgICAgIGZvcm1hdHRlZEFkZHJlc3M6IGAke3RoaXMuc3VibmV0SVB9LzI0YCwKICAgICAgICAgIHByZWZpeF9sZW46IDI0CiAgICAgICAgfTsKICAgICAgICBuZXR3b3JrLnN1Ym5ldHMucHVzaChzdWJuZXRfZGF0YSk7CiAgICAgICAgY29uc3Qgdm5ldF9kYXRhID0gewogICAgICAgICAgYXBpVmVyc2lvbjogJ3BhY2tldGxpZnRlci5kZXYvdjEnLAogICAgICAgICAga2luZDogJ1ZuZXQnLAogICAgICAgICAgLy8gdm5ldF92bGFuOiB0aGlzLnNlbGVjdGVkVm5ldFZsYW4sCiAgICAgICAgICBtZXRhZGF0YTogewogICAgICAgICAgICBuYW1lOiBuZXR3b3JrLm5hbWUudG9Mb3dlckNhc2UoKSwKICAgICAgICAgICAgbmFtZXNwYWNlOiAnZGVmYXVsdCcKICAgICAgICAgIH0sCiAgICAgICAgICBzcGVjOiB7CiAgICAgICAgICAgIG5hbWU6IG5ldHdvcmsubmFtZS50b0xvd2VyQ2FzZSgpLAogICAgICAgICAgICBzdWJuZXRzOiBuZXR3b3JrLnN1Ym5ldHMKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGNvbnNvbGUubG9nKCdzZW5kIHRvIEFQSScsIHN1Ym5ldF9kYXRhKTsKICAgICAgICBjb25zb2xlLmxvZygnbG9nJywgbmV0d29yayk7CiAgICAgICAgdGhpcy5sb2FkaW5nID0gdHJ1ZTsKICAgICAgICBhd2FpdCB2TmV0U2VydmljZS5wYXRjaFN1Ym5ldChuZXR3b3JrLm5hbWUsIHZuZXRfZGF0YSk7CiAgICAgICAgdGhpcy5yZXNldEZvcm0oKTsKICAgICAgICB0aGlzLiRlbWl0KCdzdWNjZXNzJyk7CiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgY29uc29sZS5sb2coZXJyb3IpOwogICAgICAgIHRoaXMubG9hZGluZyA9IGZhbHNlOwogICAgICAgIC8vIHRoaXMuc3VibmV0UmVzcG9uc2VNZXNzYWdlID0gJ0Vycm9yJzsKICAgICAgICAvLyBTZXQgdGhlIEFQSSBlcnJvciBpbiB0aGUgY29tcG9uZW50CiAgICAgICAgLy8gdGhpcy5hcGlFcnJvciA9ICdFcnJvciBjcmVhdGluZyBTdWJuZXQnOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["isValidIP","vNetService","cButton","name","props","isOpen","type","Boolean","required","currentNetwork","Object","components","data","subnetName","subnetIP","loading","watcher","val","resetForm","computed","isAddSubnetDisabled","isSubnetIPValid","methods","addSubnet","network","apiError","toLowerCase","subnet_data","longName","address","formattedAddress","prefix_len","subnets","push","vnet_data","apiVersion","kind","metadata","namespace","spec","console","log","patchSubnet","$emit","error"],"sources":["components/forms/AddSubnet.vue"],"sourcesContent":["<template>\n    <div>\n        <h2>Add Subnet</h2>\n        <!-- ... your content for adding subnet -->\n        <div class=\"add-form-row\">\n            <input v-model=\"subnetName\" type=\"text\" placeholder=\"Subnet Name\" title=\"Subnet Name\" />\n        </div>\n        <div class=\"add-form-row\">\n            <input\n                v-model=\"subnetIP\"\n                type=\"text\"\n                placeholder=\"Enter subnet (e.g., 10.0.0.0)\"\n                pattern=\"\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\"\n                title=\"Please enter a valid IP address\"\n            />\n            <p v-if=\"!isSubnetIPValid\" class=\"text-danger\" style=\"font-weight: bold;\">Invalid IP Address</p>\n        </div>\n        <div class=\"add-form-row\">\n            <cButton class=\"cbtn btn-light\" :disabled=\"isAddSubnetDisabled || loading\" @click=\"addSubnet\">\n                <template v-if=\"!loading\">\n                    <i class=\"fa fa-plus fa-lg mr-5\"></i> Add Subnet\n                </template>\n                <template v-else>\n                    <i class=\"fa fa-spinner fa-spin fa-lg mr-5\"></i> Processing\n                </template>\n            </cButton> \n        </div>\n    </div>\n</template>\n\n<script>\nimport { isValidIP } from '../../services/helpers/utils'\nimport { vNetService } from '../../services/api/vnet';\nimport cButton from '../common/Button'\nexport default {\n    name: 'AddSubnet',\n    props: {\n        isOpen: {\n            type: Boolean,\n            required: true\n        },\n        currentNetwork: {\n            type: Object,\n            required: true\n        }\n    },\n    components: {\n        cButton\n    },\n    data() {\n        return {\n            subnetName: '',\n            subnetIP: '10.55.0.0',\n            loading: false,\n        }\n    },\n    watcher: {\n        isOpen (val) {\n            if (!val) this.resetForm();\n        } \n    },\n    computed: {\n        isAddSubnetDisabled() {\n            // Check conditions to disable the button\n            return !this.subnetName || !this.subnetIP || !this.isSubnetIPValid;\n        },\n        isSubnetIPValid() {\n            return isValidIP(this.subnetIP)\n        }\n    },\n    methods: {\n        resetForm() {\n            this.subnetName = '';\n            this.subnetIP = '10.55.0.0';\n            this.loading = false;\n        },\n        async addSubnet() {\n            try {\n                const network = {...this.currentNetwork};\n                this.apiError = null; // Reset error state\n                // v0.2\n                const subnetName = this.subnetName.toLowerCase();\n                const subnet_data = {\n                    longName: `${network.name}-${subnetName}-${this.subnetIP}-24`,\n                    name:      subnetName,\n                    address:   this.subnetIP,\n                    formattedAddress: `${this.subnetIP}/24`,\n                    prefix_len: 24\n                };\n\n                network.subnets.push(subnet_data);\n\n                const vnet_data = {\n                    apiVersion: 'packetlifter.dev/v1',\n                    kind:       'Vnet',\n                    // vnet_vlan: this.selectedVnetVlan,\n                    metadata:   {\n                        name:      network.name.toLowerCase(),\n                        namespace: 'default'\n                    },\n                    spec: {\n                        name:    network.name.toLowerCase(),\n                        subnets: network.subnets,\n                    }\n                };\n\n                console.log('send to API', subnet_data);\n                console.log('log', network);\n\n                this.loading = true\n\n                await vNetService.patchSubnet(network.name, vnet_data);\n                this.resetForm();\n                this.$emit('success')\n            } catch(error) {\n                console.log(error);\n                this.loading = false;\n                // this.subnetResponseMessage = 'Error';\n                // Set the API error in the component\n                // this.apiError = 'Error creating Subnet';\n            }\n        },\n    }\n}\n</script>\n\n<style scoped>\n.add-form-row {\n  width: 300px;\n  /* display: grid; */\n  justify-content: center;\n  align-items: center;\n  /* Add this line for vertical alignment if needed */\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n</style>"],"mappings":"AA+BA,SAAAA,SAAA;AACA,SAAAC,WAAA;AACA,OAAAC,OAAA;AACA;EACAC,IAAA;EACAC,KAAA;IACAC,MAAA;MACAC,IAAA,EAAAC,OAAA;MACAC,QAAA;IACA;IACAC,cAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,QAAA;IACA;EACA;EACAG,UAAA;IACAT;EACA;EACAU,KAAA;IACA;MACAC,UAAA;MACAC,QAAA;MACAC,OAAA;IACA;EACA;EACAC,OAAA;IACAX,OAAAY,GAAA;MACA,KAAAA,GAAA,OAAAC,SAAA;IACA;EACA;EACAC,QAAA;IACAC,oBAAA;MACA;MACA,aAAAP,UAAA,UAAAC,QAAA,UAAAO,eAAA;IACA;IACAA,gBAAA;MACA,OAAArB,SAAA,MAAAc,QAAA;IACA;EACA;EACAQ,OAAA;IACAJ,UAAA;MACA,KAAAL,UAAA;MACA,KAAAC,QAAA;MACA,KAAAC,OAAA;IACA;IACA,MAAAQ,UAAA;MACA;QACA,MAAAC,OAAA;UAAA,QAAAf;QAAA;QACA,KAAAgB,QAAA;QACA;QACA,MAAAZ,UAAA,QAAAA,UAAA,CAAAa,WAAA;QACA,MAAAC,WAAA;UACAC,QAAA,KAAAJ,OAAA,CAAArB,IAAA,IAAAU,UAAA,SAAAC,QAAA;UACAX,IAAA,EAAAU,UAAA;UACAgB,OAAA,OAAAf,QAAA;UACAgB,gBAAA,UAAAhB,QAAA;UACAiB,UAAA;QACA;QAEAP,OAAA,CAAAQ,OAAA,CAAAC,IAAA,CAAAN,WAAA;QAEA,MAAAO,SAAA;UACAC,UAAA;UACAC,IAAA;UACA;UACAC,QAAA;YACAlC,IAAA,EAAAqB,OAAA,CAAArB,IAAA,CAAAuB,WAAA;YACAY,SAAA;UACA;UACAC,IAAA;YACApC,IAAA,EAAAqB,OAAA,CAAArB,IAAA,CAAAuB,WAAA;YACAM,OAAA,EAAAR,OAAA,CAAAQ;UACA;QACA;QAEAQ,OAAA,CAAAC,GAAA,gBAAAd,WAAA;QACAa,OAAA,CAAAC,GAAA,QAAAjB,OAAA;QAEA,KAAAT,OAAA;QAEA,MAAAd,WAAA,CAAAyC,WAAA,CAAAlB,OAAA,CAAArB,IAAA,EAAA+B,SAAA;QACA,KAAAhB,SAAA;QACA,KAAAyB,KAAA;MACA,SAAAC,KAAA;QACAJ,OAAA,CAAAC,GAAA,CAAAG,KAAA;QACA,KAAA7B,OAAA;QACA;QACA;QACA;MACA;IACA;EACA;AACA"}]}