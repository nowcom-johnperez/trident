{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/create-yaml.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/create-yaml.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/trident/babel.config.js","mtime":1716430386784},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgaW5kZW50IGFzIF9pbmRlbnQgfSBmcm9tICdAc2hlbGwvdXRpbHMvc3RyaW5nJzsKaW1wb3J0IHsgYWRkT2JqZWN0LCBmaW5kQnksIHJlbW92ZU9iamVjdCwgcmVtb3ZlT2JqZWN0cyB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCBqc3lhbWwgZnJvbSAnanMteWFtbCc7CmltcG9ydCB7IGNsZWFuVXAsIGlzRW1wdHkgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKZXhwb3J0IGNvbnN0IFNJTVBMRV9UWVBFUyA9IFsnc3RyaW5nJywgJ211bHRpbGluZScsICdtYXNrZWQnLCAncGFzc3dvcmQnLCAnZmxvYXQnLCAnaW50JywgJ2RhdGUnLCAnYmxvYicsICdib29sZWFuJywgJ3ZlcnNpb24nXTsKY29uc3QgQUxXQVlTX0FERCA9IFsnYXBpVmVyc2lvbicsICdraW5kJywgJ21ldGFkYXRhJywgJ21ldGFkYXRhLm5hbWUnLCAnc3BlYycsICdzcGVjLnNlbGVjdG9yJywgJ3NwZWMuc2VsZWN0b3IubWF0Y2hMYWJlbHMnLCAnc3BlYy50ZW1wbGF0ZScsICdzcGVjLnRlbXBsYXRlLm1ldGFkYXRhJywgJ3NwZWMudGVtcGxhdGUubWV0YWRhdGEubGFiZWxzJywgJ3NwZWMudGVtcGxhdGUuc3BlYy5jb250YWluZXJzLm5hbWUnLCAnc3BlYy50ZW1wbGF0ZS5zcGVjLmNvbnRhaW5lcnMuaW1hZ2UnXTsKZXhwb3J0IGNvbnN0IE5FVkVSX0FERCA9IFsnbWV0YWRhdGEuY2x1c3Rlck5hbWUnLCAnbWV0YWRhdGEuY2x1c3Rlck5hbWUnLCAnbWV0YWRhdGEuY3JlYXRpb25UaW1lc3RhbXAnLCAnbWV0YWRhdGEuZGVsZXRpb25HcmFjZVBlcmlvZFNlY29uZHMnLCAnbWV0YWRhdGEuZGVsZXRpb25UaW1lc3RhbXAnLCAnbWV0YWRhdGEuZmluYWxpemVycycsICdtZXRhZGF0YS5nZW5lcmF0ZU5hbWUnLCAnbWV0YWRhdGEuZ2VuZXJhdGlvbicsICdtZXRhZGF0YS5pbml0aWFsaXplcnMnLCAnbWV0YWRhdGEubWFuYWdlZEZpZWxkcycsICdtZXRhZGF0YS5vd25lclJlZmVyZW5jZXMnLCAnbWV0YWRhdGEucmVzb3VyY2VWZXJzaW9uJywgJ21ldGFkYXRhLnJlbGF0aW9uc2hpcHMnLCAnbWV0YWRhdGEuc2VsZkxpbmsnLCAnbWV0YWRhdGEudWlkJywKLy8gQ1JEIC0+IFNjaGVtYSBkZXNjcmliZXMgdGhlIHNjaGVtYSB1c2VkIGZvciB2YWxpZGF0aW9uLCBwcnVuaW5nLCBhbmQgZGVmYXVsdGluZyBvZiB0aGlzIHZlcnNpb24gb2YgdGhlIGN1c3RvbSByZXNvdXJjZS4gSWYgd2UgYWxsb3cgcHJvY2Vzc2luZyB3ZSBmYWxsIGludG8gaW5mIGxvb3Agb24gb3BlbkFQSVYzU2NoZW1hLmFsbE9mIHdoaWNoIGNvbnRhaW5zIGEgY3ljbGljYWwgcmVmIG9mIGFsbE9mIHByb3BzLgonc3BlYy52ZXJzaW9ucy5zY2hlbWEnLCAnc3RhdHVzJywgJ3N0cmluZ0RhdGEnXTsKZXhwb3J0IGNvbnN0IEFDVElWRUxZX1JFTU9WRSA9IFsnbWV0YWRhdGEubWFuYWdlZEZpZWxkcycsICdtZXRhZGF0YS5yZWxhdGlvbnNoaXBzJywgJ21ldGFkYXRhLnN0YXRlJywgJ3N0YXR1cycsICdsaW5rcycsICd0eXBlJywgJ2lkJ107CmNvbnN0IElOREVOVCA9IDI7CmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVZYW1sV2l0aE9wdGlvbnMoc2NoZW1hcywgdHlwZSwgZGF0YSwgb3B0aW9ucykgewogIHJldHVybiBjcmVhdGVZYW1sKHNjaGVtYXMsIHR5cGUsIGRhdGEsIHRydWUsIDAsICcnLCBudWxsLCBvcHRpb25zKTsKfQpleHBvcnQgZnVuY3Rpb24gY3JlYXRlWWFtbChzY2hlbWFzLCB0eXBlLCBkYXRhLCBwcm9jZXNzQWx3YXlzQWRkID0gdHJ1ZSwgZGVwdGggPSAwLCBwYXRoID0gJycsIHJvb3RUeXBlID0gbnVsbCwgZGF0YU9wdGlvbnMgPSB7fSkgewogIGNvbnN0IHNjaGVtYSA9IGZpbmRCeShzY2hlbWFzLCAnaWQnLCB0eXBlKTsKICBpZiAoIXJvb3RUeXBlKSB7CiAgICByb290VHlwZSA9IHR5cGU7CiAgfQogIGlmICghc2NoZW1hKSB7CiAgICByZXR1cm4gYEVycm9yIGxvYWRpbmcgc2NoZW1hIGZvciAke3R5cGV9YDsKICB9CiAgZGF0YSA9IGRhdGEgfHwge307CiAgaWYgKGRlcHRoID09PSAwKSB7CiAgICBjb25zdCBhdHRyID0gc2NoZW1hLmF0dHJpYnV0ZXMgfHwge307CgogICAgLy8gRGVmYXVsdCB0byBkYXRhLmFwaVZlcnNpb24va2luZCB0byBhY2NvbW1vZGF0ZSBzcG9vZmVkIHR5cGVzIHRoYXQgYWdncmVnYXRlIG11bHRpcGxlIHR5cGVzCiAgICBkYXRhLmFwaVZlcnNpb24gPSAoYXR0ci5ncm91cCA/IGAke2F0dHIuZ3JvdXB9LyR7YXR0ci52ZXJzaW9ufWAgOiBhdHRyLnZlcnNpb24pIHx8IGRhdGEuYXBpVmVyc2lvbjsKICAgIGRhdGEua2luZCA9IGF0dHIua2luZCB8fCBkYXRhLmtpbmQ7CiAgfQogIGNvbnN0IHJlZ3VsYXJGaWVsZHMgPSBbXTsKICBpZiAocHJvY2Vzc0Fsd2F5c0FkZCkgewogICAgLy8gQWRkIGFsbCB0aGUgcGFyZW50cyBvZiBlYWNoIGtleSBzbyB0aGF0IHNwZWMudGVtcGxhdGUuZm9vLmJsYWgKICAgIC8vIGNhdXNlcyAnc3BlYycsICd0ZW1wbGF0ZScgYW5kICdmb28nIGtleXMgdG8gYmUgY3JlYXRlZAogICAgY29uc3QgYWx3YXlzID0gQUxXQVlTX0FERC5zbGljZSgpOwogICAgZm9yIChsZXQgaSA9IGFsd2F5cy5sZW5ndGggLSAxOyBpID49IDA7IGktLSkgewogICAgICBsZXQgZW50cnkgPSBhbHdheXNbaV0uc3BsaXQoL1wuLyk7CiAgICAgIHdoaWxlIChlbnRyeS5sZW5ndGgpIHsKICAgICAgICBhZGRPYmplY3QoYWx3YXlzLCBlbnRyeS5qb2luKCcuJykpOwogICAgICAgIGVudHJ5ID0gZW50cnkuc2xpY2UoMCwgLTEpOwogICAgICB9CiAgICB9CgogICAgLy8gTWFyayBhbHdheXMgZmllbGRzIGFzIHJlZ3VsYXIgc28gdGhleSdyZSBub3QgY29tbWVudGVkIG91dAogICAgZm9yIChjb25zdCBlbnRyeSBvZiBhbHdheXMpIHsKICAgICAgY29uc3QgcGFydHMgPSBlbnRyeS5zcGxpdCgvXC4vKTsKICAgICAgY29uc3Qga2V5ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07CiAgICAgIGNvbnN0IHByZWZpeCA9IHBhcnRzLnNsaWNlKDAsIC0xKS5qb2luKCcuJyk7CiAgICAgIGlmIChwcmVmaXggPT09IHBhdGggJiYgc2NoZW1hLnJlc291cmNlRmllbGRzICYmIHNjaGVtYS5yZXNvdXJjZUZpZWxkc1trZXldKSB7CiAgICAgICAgYWRkT2JqZWN0KHJlZ3VsYXJGaWVsZHMsIGtleSk7CiAgICAgIH0KICAgIH0KICB9CgogIC8vIEluY2x1ZGUgYWxsIGZpZWxkcyBpbiBzY2hlbWEncyByZXNvdXJjZUZpZWxkcyBhcyBjb21tZW50cwogIGNvbnN0IGNvbW1lbnRGaWVsZHMgPSBPYmplY3Qua2V5cyhzY2hlbWEucmVzb3VyY2VGaWVsZHMgfHwge30pOwogIGNvbW1lbnRGaWVsZHMuZm9yRWFjaChrZXkgPT4gewogICAgaWYgKHR5cGVvZiBkYXRhW2tleV0gIT09ICd1bmRlZmluZWQnIHx8IGRlcHRoID09PSAwICYmIGtleSA9PT0gJ190eXBlJykgewogICAgICBhZGRPYmplY3QocmVndWxhckZpZWxkcywga2V5KTsKICAgIH0KICB9KTsKCiAgLy8gYWRkIGFueSBmaWVsZHMgZGVmaW5lZCBpbiBkYXRhIGFzIHVuY29tbWVudGVkIGZpZWxkcyBpbiB5YW1sCiAgZm9yIChjb25zdCBrZXkgaW4gZGF0YSkgewogICAgaWYgKHR5cGVvZiBkYXRhW2tleV0gIT09ICd1bmRlZmluZWQnKSB7CiAgICAgIGFkZE9iamVjdChyZWd1bGFyRmllbGRzLCBrZXkpOwogICAgfQogIH0KCiAgLy8gQUNUSVZFTFlfUkVNT1ZFIGFyZSBmaWVsZHMgdGhhdCBzaG91bGQgYmUgcmVtb3ZlZCBldmVuIGlmIHRoZXkgYXJlIGRlZmluZWQgaW4gZGF0YQogIGZvciAoY29uc3QgZW50cnkgb2YgQUNUSVZFTFlfUkVNT1ZFKSB7CiAgICBjb25zdCBwYXJ0cyA9IGVudHJ5LnNwbGl0KC9cLi8pOwogICAgY29uc3Qga2V5ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07CiAgICBjb25zdCBwcmVmaXggPSBwYXJ0cy5zbGljZSgwLCAtMSkuam9pbignLicpOwogICAgaWYgKHByZWZpeCA9PT0gcGF0aCkgewogICAgICByZW1vdmVPYmplY3QocmVndWxhckZpZWxkcywga2V5KTsKICAgIH0KICB9CgogIC8vIE5FVkVSX0FERCBhcmUgZmllbGRzIHRoYXQgc2hvdWxkIG5vdCBiZSBhZGRlZCBhcyBjb21tZW50cywgYnV0IG1heSBhZGRlZCBhcyByZWd1bGFyIGZpZWxkcyBpZiBhbHJlYWR5IGRlZmluZWQgaW4gZGF0YQogIGZvciAoY29uc3QgZW50cnkgb2YgTkVWRVJfQUREKSB7CiAgICBjb25zdCBwYXJ0cyA9IGVudHJ5LnNwbGl0KC9cLi8pOwogICAgY29uc3Qga2V5ID0gcGFydHNbcGFydHMubGVuZ3RoIC0gMV07CiAgICBjb25zdCBwcmVmaXggPSBwYXJ0cy5zbGljZSgwLCAtMSkuam9pbignLicpOwogICAgaWYgKHByZWZpeCA9PT0gcGF0aCAmJiBzY2hlbWEucmVzb3VyY2VGaWVsZHMgJiYgc2NoZW1hLnJlc291cmNlRmllbGRzW2tleV0pIHsKICAgICAgcmVtb3ZlT2JqZWN0KGNvbW1lbnRGaWVsZHMsIGtleSk7CiAgICB9CiAgfQoKICAvLyBkbyBub3QgaW5jbHVkZSBjb21tZW50ZWQgZmllbGRzIGlmIGFscmVhZHkgZGVmaW5lZCBpbiBkYXRhCiAgcmVtb3ZlT2JqZWN0cyhjb21tZW50RmllbGRzLCByZWd1bGFyRmllbGRzKTsKICBjb25zdCByZWd1bGFyID0gcmVndWxhckZpZWxkcy5tYXAoayA9PiBzdHJpbmdpZnlGaWVsZChrKSk7CiAgY29uc3QgY29tbWVudHMgPSBjb21tZW50RmllbGRzLm1hcChrID0+IHsKICAgIC8vIERvbid0IGFkZCBhIG5hbWVzcGFjZSBjb21tZW50IGZvciB0eXBlcyB0aGF0IGFyZW4ndCBuYW1lc3BhY2VkLgogICAgaWYgKHBhdGggPT09ICdtZXRhZGF0YScgJiYgayA9PT0gJ25hbWVzcGFjZScpIHsKICAgICAgdmFyIF9yb290U2NoZW1hJGF0dHJpYnV0ZTsKICAgICAgY29uc3Qgcm9vdFNjaGVtYSA9IGZpbmRCeShzY2hlbWFzLCAnaWQnLCByb290VHlwZSk7CiAgICAgIGlmIChyb290U2NoZW1hICYmICEoKF9yb290U2NoZW1hJGF0dHJpYnV0ZSA9IHJvb3RTY2hlbWEuYXR0cmlidXRlcykgIT09IG51bGwgJiYgX3Jvb3RTY2hlbWEkYXR0cmlidXRlICE9PSB2b2lkIDAgJiYgX3Jvb3RTY2hlbWEkYXR0cmlidXRlLm5hbWVzcGFjZWQpKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBjb21tZW50KHN0cmluZ2lmeUZpZWxkKGspKTsKICB9KTsKICBjb25zdCBvdXQgPSBbLi4ucmVndWxhciwgLi4uY29tbWVudHNdLmZpbHRlcih4ID0+IHggIT09IG51bGwpLmpvaW4oJ1xuJykudHJpbSgpOwogIHJldHVybiBvdXQ7CgogIC8vIC0tLS0tLS0tLS0tLS0tLQoKICBmdW5jdGlvbiBzdHJpbmdpZnlGaWVsZChrZXkpIHsKICAgIHZhciBfc2NoZW1hJHJlc291cmNlRmllbGQ7CiAgICBjb25zdCBmaWVsZCA9IChfc2NoZW1hJHJlc291cmNlRmllbGQgPSBzY2hlbWEucmVzb3VyY2VGaWVsZHMpID09PSBudWxsIHx8IF9zY2hlbWEkcmVzb3VyY2VGaWVsZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NjaGVtYSRyZXNvdXJjZUZpZWxkW2tleV07CiAgICBsZXQgb3V0ID0gYCR7a2V5fTpgOwoKICAgIC8vICdfdHlwZScgaW4gc3RldmUgbWFwcyB0byBrdWJlcm5ldGVzICd0eXBlJyBmaWVsZDsgc2hvdyAndHlwZScgZmllbGQgaW4geWFtbAogICAgaWYgKGtleSA9PT0gJ190eXBlJykgewogICAgICBvdXQgPSAndHlwZTonOwogICAgfQoKICAgIC8vIGlmIGEga2V5IG9uIGRhdGEgaXMgbm90IGxpc3RlZCBpbiB0aGUgc2NoZW1hJ3MgcmVzb3VyY2VGaWVsZHMsIGp1c3QgY29udmVydCBpdCB0byB5YW1sLCBhZGQgaW5kZW50cyB3aGVyZSBuZWVkZWQsIGFuZCByZXR1cm4KICAgIGlmICghZmllbGQpIHsKICAgICAgaWYgKGRhdGFba2V5XSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW5VcChkYXRhKTsKICAgICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBqc3lhbWwuZHVtcChjbGVhbmVkW2tleV0pOwogICAgICAgICAgaWYgKHR5cGVvZiBkYXRhW2tleV0gPT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkoZGF0YVtrZXldKSkgewogICAgICAgICAgICBvdXQgKz0gYFxuJHtpbmRlbnQocGFyc2VkRGF0YS50cmltKCkpfWA7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBvdXQgKz0gYCAke3BhcnNlZERhdGEudHJpbSgpfWA7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yOiBVbmFibGUgdG8gcGFyc2UgbWFwIGRhdGEgZm9yIHlhbWwga2V5OiAke2tleX1gLCBlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfQogICAgY29uc3QgdHlwZSA9IHR5cGVNdW5nZShmaWVsZC50eXBlKTsKICAgIGNvbnN0IG1hcE9mID0gdHlwZVJlZignbWFwJywgdHlwZSk7CiAgICBjb25zdCBhcnJheU9mID0gdHlwZVJlZignYXJyYXknLCB0eXBlKTsKICAgIGNvbnN0IHJlZmVyZW5jZVRvID0gdHlwZVJlZigncmVmZXJlbmNlJywgdHlwZSk7CgogICAgLy8gdHlwZSA9PSBtYXBbbWFwT2ZdCiAgICBpZiAobWFwT2YpIHsKICAgICAgLy8gaWYga2V5IGlzIGRlZmluZWQgaW4gZGF0YSwgY29udmVydCB0aGUgdmFsdWUgdG8geWFtbCwgYWRkIG5ld2xpbmUraW5kZW50IGFuZCBhZGQgdG8gb3V0cHV0IHlhbWwgc3RyaW5nCiAgICAgIGlmIChkYXRhW2tleV0pIHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgY2xlYW5lZCA9IGNsZWFuVXAoZGF0YSk7CiAgICAgICAgICBjb25zdCBwYXJzZWREYXRhID0gZHVtcEJsb2NrKGNsZWFuZWRba2V5XSwgZGF0YU9wdGlvbnNba2V5XSk7CiAgICAgICAgICBvdXQgKz0gYFxuJHtpbmRlbnQocGFyc2VkRGF0YSl9YDsKICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvcjogVW5hYmxlIHRvIHBhcnNlIG1hcCBkYXRhIGZvciB5YW1sIG9mIHR5cGU6ICR7dHlwZX1gLCBlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChTSU1QTEVfVFlQRVMuaW5jbHVkZXMobWFwT2YpKSB7CiAgICAgICAgb3V0ICs9IGAjICBrZXk6ICR7bWFwT2Z9YDsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBJZiBub3QgYSBzaW1wbGUgdHlwZSBpZSBzb21lIHNvcnQgb2Ygb2JqZWN0L2FycmF5LCByZWN1c2l2ZWx5IGJ1aWxkIG91dCBjb21tZW50ZWQgZmllbGRzIChub3RlIGRhdGEgPSBudWxsIGhlcmUpIHBlciB0aGUgdHlwZSdzIChtYXBPZidzKSBzY2hlbWEKICAgICAgICBjb25zdCBjaHVuayA9IGNyZWF0ZVlhbWwoc2NoZW1hcywgbWFwT2YsIG51bGwsIHByb2Nlc3NBbHdheXNBZGQsIGRlcHRoICsgMSwgcGF0aCA/IGAke3BhdGh9LiR7a2V5fWAgOiBrZXksIHJvb3RUeXBlLCBkYXRhT3B0aW9ucyk7CiAgICAgICAgbGV0IGluZGVudGVkID0gaW5kZW50KGNodW5rKTsKCiAgICAgICAgLy8gY29udmVydCAiIyAgICBmb28iIHRvICIjZm9vIgogICAgICAgIGluZGVudGVkID0gaW5kZW50ZWQucmVwbGFjZSgvXigjKT9cc1xzXHNccy8sICckMScpOwogICAgICAgIG91dCArPSBgJHtpbmRlbnRlZH1gOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CgogICAgLy8gdHlwZSA9PSBhcnJheVthcnJheU9mXQogICAgaWYgKGFycmF5T2YpIHsKICAgICAgaWYgKGRhdGFba2V5XSkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBjbGVhbmVkID0gY2xlYW5VcChkYXRhKTsKICAgICAgICAgIGlmIChjbGVhbmVkICE9PSBudWxsICYmIGNsZWFuZWQgIT09IHZvaWQgMCAmJiBjbGVhbmVkW2tleV0pIHsKICAgICAgICAgICAgY29uc3QgcGFyc2VkRGF0YSA9IGpzeWFtbC5kdW1wKGNsZWFuZWRba2V5XSk7CiAgICAgICAgICAgIG91dCArPSBgXG4ke2luZGVudChwYXJzZWREYXRhLnRyaW0oKSl9YDsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvcjogVW5hbGUgdG8gcGFyc2UgYXJyYXkgZGF0YSBmb3IgeWFtbCBvZiB0eXBlOiAke3R5cGV9YCwgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoU0lNUExFX1RZUEVTLmluY2x1ZGVzKGFycmF5T2YpKSB7CiAgICAgICAgb3V0ICs9IGBcbiMgIC0gJHthcnJheU9mfWA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgY2h1bmsgPSBjcmVhdGVZYW1sKHNjaGVtYXMsIGFycmF5T2YsIG51bGwsIGZhbHNlLCBkZXB0aCArIDEsIHBhdGggPyBgJHtwYXRofS4ke2tleX1gIDoga2V5LCByb290VHlwZSwgZGF0YU9wdGlvbnMpOwogICAgICAgIGxldCBpbmRlbnRlZCA9IGluZGVudChjaHVuaywgMik7CgogICAgICAgIC8vIHR1cm4gIiMgICAgICAgIGZvbyIgaW50byAiIyAgLSBmb28iCiAgICAgICAgaW5kZW50ZWQgPSBpbmRlbnRlZC5yZXBsYWNlKC9eKCMpP1xzKlxzXHMoW15cc10pLywgJyQxICAtICQyJyk7CiAgICAgICAgb3V0ICs9IGBcbiR7aW5kZW50ZWR9YDsKICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfQogICAgaWYgKHJlZmVyZW5jZVRvKSB7CiAgICAgIG91dCArPSBgICMke3JlZmVyZW5jZVRvfWA7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICBpZiAoU0lNUExFX1RZUEVTLmluY2x1ZGVzKHR5cGUpKSB7CiAgICAgIGlmIChrZXkgPT09ICdfdHlwZScgJiYgdHlwZW9mIGRhdGFba2V5XSA9PT0gJ3VuZGVmaW5lZCcgJiYgdHlwZW9mIGRhdGFbJ3R5cGUnXSAhPT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICBvdXQgKz0gYCAke3NlcmlhbGl6ZVNpbXBsZVZhbHVlKGRhdGFbJ3R5cGUnXSl9YDsKICAgICAgfSBlbHNlIGlmICh0eXBlb2YgZGF0YVtrZXldID09PSAndW5kZWZpbmVkJykgewogICAgICAgIG91dCArPSBgICMke3NlcmlhbGl6ZVNpbXBsZVZhbHVlKHR5cGUpfWA7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3V0ICs9IGAgJHtzZXJpYWxpemVTaW1wbGVWYWx1ZShkYXRhW2tleV0pfWA7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KCiAgICAvKioKICAgICAqIC5zcGVjIGlzIHRoZSB0eXBlIHVzZWQgZm9yIHRoZSBMb2dnaW5nIGNoYXJ0IE91dHB1dCBhbmQgQ2x1c3Rlck91dHB1dCByZXNvdXJjZSBzcGVjLgogICAgICogV2l0aG91dCB0aGlzIE91dHB1dCBhbmQgQ2x1c3Rlck91dHB1dCBzcGVjcyBhcmUgZW1wdHkuCiAgICAgKi8KICAgIGlmICh0eXBlID09PSAnanNvbicgfHwgdHlwZSA9PT0gJy5zcGVjJykgewogICAgICB0cnkgewogICAgICAgIGNvbnN0IHBhcnNlZERhdGEgPSBqc3lhbWwuZHVtcChkYXRhW2tleV0pOwogICAgICAgIGlmIChwYXJzZWREYXRhKSB7CiAgICAgICAgICBvdXQgKz0gYFxuJHtpbmRlbnQocGFyc2VkRGF0YS50cmltKCkpfWA7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG91dCArPSBgICMke3R5cGV9YDsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIG91dDsKICAgICAgfSBjYXRjaCAoZSkge30KICAgIH0KICAgIGNvbnN0IHN1YkRlZiA9IGZpbmRCeShzY2hlbWFzLCAnaWQnLCB0eXBlKTsKICAgIGlmIChzdWJEZWYpIHsKICAgICAgbGV0IGNodW5rOwogICAgICBpZiAoc3ViRGVmICE9PSBudWxsICYmIHN1YkRlZiAhPT0gdm9pZCAwICYmIHN1YkRlZi5yZXNvdXJjZUZpZWxkcyAmJiAhaXNFbXB0eShzdWJEZWYgPT09IG51bGwgfHwgc3ViRGVmID09PSB2b2lkIDAgPyB2b2lkIDAgOiBzdWJEZWYucmVzb3VyY2VGaWVsZHMpKSB7CiAgICAgICAgY2h1bmsgPSBjcmVhdGVZYW1sKHNjaGVtYXMsIHR5cGUsIGRhdGFba2V5XSwgcHJvY2Vzc0Fsd2F5c0FkZCwgZGVwdGggKyAxLCBwYXRoID8gYCR7cGF0aH0uJHtrZXl9YCA6IGtleSwgcm9vdFR5cGUsIGRhdGFPcHRpb25zKTsKICAgICAgfSBlbHNlIGlmIChkYXRhW2tleV0pIHsKICAgICAgICAvLyBpZiB0aGVyZSBhcmUgbm8gZmllbGRzIGRlZmluZWQgb24gdGhlIHNjaGVtYSBidXQgdGhlcmUgYXJlIGluIHRoZSBkYXRhLCBqdXN0IGZvcm1hdCBkYXRhIGFzIHlhbWwgYW5kIGFkZCB0byBvdXRwdXQgeWFtbAogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBqc3lhbWwuZHVtcChkYXRhW2tleV0pOwogICAgICAgICAgY2h1bmsgPSBwYXJzZWQudHJpbSgpOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yOiBVbmFsZSB0byBwYXJzZSBkYXRhIGZvciB5YW1sIG9mIHR5cGU6ICR7dHlwZX1gLCBlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgfQogICAgICB9CiAgICAgIG91dCArPSBgXG4ke2luZGVudChjaHVuayl9YDsKICAgIH0gZWxzZSB7CiAgICAgIG91dCArPSBgICMke3R5cGV9YDsKICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfQp9CmZ1bmN0aW9uIGNvbW1lbnQobGluZXMpIHsKICByZXR1cm4gKGxpbmVzIHx8ICcnKS5zcGxpdCgnXG4nKS5tYXAoeCA9PiBgIyR7eC5yZXBsYWNlKC8jL2csICcnKX1gKS5qb2luKCdcbicpOwp9CmZ1bmN0aW9uIGluZGVudChsaW5lcywgZGVwdGggPSAxKSB7CiAgcmV0dXJuIF9pbmRlbnQobGluZXMsIGRlcHRoICogSU5ERU5ULCAnICcsIC9eIy8pOwp9CmZ1bmN0aW9uIHNlcmlhbGl6ZVNpbXBsZVZhbHVlKGRhdGEpIHsKICByZXR1cm4ganN5YW1sLmR1bXAoZGF0YSkudHJpbSgpOwp9CmV4cG9ydCBmdW5jdGlvbiBnZXRCbG9ja0Rlc2NyaXB0b3IodmFsdWUsIGtleSkgewogIGNvbnN0IGhlYWRlciA9IGdldEJsb2NrSGVhZGVyKHZhbHVlLCBrZXkpOwogIHJldHVybiB7CiAgICBoZWFkZXIsCiAgICBpbmRlbnRhdGlvbjogZ2V0QmxvY2tJbmRlbnRhdGlvbihoZWFkZXIpCiAgfTsKfQoKLyoqCiAqCiAqIEBwYXJhbSB7c3RyaW5nfSB2YWx1ZSB0aGUgYmxvY2sgb2YgdGV4dCB0byBiZSBwYXJzZWQKICogQHBhcmFtIHsqfSBibG9ja0tleSB0aGUga2V5IG9mIHRoZSBibG9jawogKiBAcmV0dXJucyB0aGUga2V5ICsgdGhlIGJsb2NrIHNjYWxhciBpbmRpY2F0b3JzLCBzZWUgaHR0cHM6Ly95YW1sLW11bHRpbGluZS5pbmZvIC0gQmxvY2sgU2NhbGFycwogKi8KZnVuY3Rpb24gZ2V0QmxvY2tIZWFkZXIodmFsdWUsIGJsb2NrS2V5KSB7CiAgY29uc3QgY2FyZCA9IGAoJHtibG9ja0tleX0pW1xcOl1bXFxzfFxcdF0rW1xcfFxcPl1bXFxkXSpbXFwtXFwrXT9gOwogIGNvbnN0IHJlID0gbmV3IFJlZ0V4cChjYXJkLCAnZ2knKTsKICBjb25zdCBmb3VuZCA9IHZhbHVlLm1hdGNoKHJlKTsKICByZXR1cm4gKGZvdW5kID09PSBudWxsIHx8IGZvdW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBmb3VuZFswXSkgfHwgJyc7Cn0KCi8qKgogKgogKiBAcGFyYW0ge3N0cmluZ30gYmxvY2tIZWFkZXIgdGhlIGtleSArIHRoZSBibG9jayBzY2FsYXIgaW5kaWNhdG9ycwogKiBAcmV0dXJucyB0aGUgaW5kZW50YXRpb24gaW5kaWNhdG9yIGZyb20gdGhlIGJsb2NrIGhlYWRlciwgc2VlIGh0dHBzOi8veWFtbC1tdWx0aWxpbmUuaW5mbyAtIEluZGVudGF0aW9uCiAqLwpmdW5jdGlvbiBnZXRCbG9ja0luZGVudGF0aW9uKGJsb2NrSGVhZGVyKSB7CiAgY29uc3QgYmxvY2tTY2FsYXJzID0gYmxvY2tIZWFkZXIuc3Vic3RyKGJsb2NrSGVhZGVyLmluZGV4T2YoJzonKSArIDEpOwogIGNvbnN0IGluZGVudGF0aW9uID0gYmxvY2tTY2FsYXJzLm1hdGNoKC9cZCsvKTsKICByZXR1cm4gKGluZGVudGF0aW9uID09PSBudWxsIHx8IGluZGVudGF0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpbmRlbnRhdGlvblswXSkgfHwgJyc7Cn0KZXhwb3J0IGZ1bmN0aW9uIHR5cGVSZWYodHlwZSwgc3RyKSB7CiAgY29uc3QgcmUgPSBuZXcgUmVnRXhwKGBeJHt0eXBlfVxcWyguKilcXF0kYCk7CiAgY29uc3QgbWF0Y2ggPSBzdHIubWF0Y2gocmUpOwogIGlmIChtYXRjaCkgewogICAgcmV0dXJuIHR5cGVNdW5nZShtYXRjaFsxXSk7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiB0eXBlTXVuZ2UodHlwZSkgewogIGlmICh0eXBlID09PSAnaW50ZWdlcicpIHsKICAgIHJldHVybiAnaW50JzsKICB9CiAgaWYgKHR5cGUgPT09ICdpby5rOHMuYXBpbWFjaGluZXJ5LnBrZy5hcGkucmVzb3VyY2UuUXVhbnRpdHknKSB7CiAgICByZXR1cm4gJ3N0cmluZyc7CiAgfQogIHJldHVybiB0eXBlOwp9CmV4cG9ydCBmdW5jdGlvbiBzYWZlckR1bXAob2JqKSB7CiAgY29uc3Qgb3V0ID0ganN5YW1sLmR1bXAob2JqIHx8IHt9KTsKICBpZiAob3V0ID09PSAne31cbicpIHsKICAgIHJldHVybiAnJzsKICB9CiAgcmV0dXJuIG91dDsKfQoKLyoqCiAqIEhhbmRsZXMgbmV3bGluZXMgaW5kaWNhdG9ycyBpbiB0aGUgbXVsdGlsaW5lIGJsb2Nrcy4KICoKICogdGhpcyBpcyByZXF1aXJlZCBzaW5jZSBqc3lhbWwuZHVtcCBkb2Vzbid0IHN1cHBvcnQgY2hvbXBpbmcgYW5kIHNjYWxhciBzdHlsZSBhdCB0aGUgbW9tZW50LgogKiBzZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlY2EvanMteWFtbC9pc3N1ZXMvMTcxCiAqCiAqIEBwYXJhbSB7Kn0gZGF0YSB0aGUgbXVsdGlsaW5lIGJsb2NrCiAqIEBwYXJhbSB7Kn0gb3B0aW9ucyBibG9ja3MgaW5kaWNhdG9ycywgc2VlOiBodHRwczovL3lhbWwtbXVsdGlsaW5lLmluZm8KICoKICogLSBzY2FsYXJTdHlsZToKICogICAgIG9uZSBvZiAnfCcsICc+JwogKiAgICAgZGVmYXVsdCAnfCcKICogLSBjaG9tcGluZzoKICogICAgIG9uZSBvZjogbnVsbCwgJycsICctJywgJysnCiAqICAgICBkZWZhdWx0OiBudWxsCiAqIEByZXR1cm5zIHRoZSByZXN1bHQgb2YganN5YW1sLmR1bXAgd2l0aCB0aGUgYWRkaXRpb24gb2YgbXVsdGlsaW5lIGluZGljYXRvcnMKICovCmV4cG9ydCBmdW5jdGlvbiBkdW1wQmxvY2soZGF0YSwgb3B0aW9ucyA9IHt9KSB7CiAgY29uc3QgcGFyc2VkID0ganN5YW1sLmR1bXAoZGF0YSk7CiAgbGV0IG91dCA9IHBhcnNlZDsKICBjb25zdCBibG9ja0ZpZWxkcyA9IE9iamVjdC5rZXlzKGRhdGEpLmZpbHRlcihrID0+IGRhdGFba10uaW5jbHVkZXMoJ1xuJykpOwogIGlmIChibG9ja0ZpZWxkcy5sZW5ndGgpIHsKICAgIGZvciAoY29uc3Qga2V5IG9mIGJsb2NrRmllbGRzKSB7CiAgICAgIHZhciBfb3B0aW9ucyRrZXkkc2NhbGFyU3QsIF9vcHRpb25zJGtleSwgX29wdGlvbnMka2V5JGNob21waW5nLCBfb3B0aW9ucyRrZXkyOwogICAgICBjb25zdCB7CiAgICAgICAgaGVhZGVyLAogICAgICAgIGluZGVudGF0aW9uCiAgICAgIH0gPSBnZXRCbG9ja0Rlc2NyaXB0b3Iob3V0LCBrZXkpOwogICAgICBjb25zdCBzY2FsYXJTdHlsZSA9IChfb3B0aW9ucyRrZXkkc2NhbGFyU3QgPSAoX29wdGlvbnMka2V5ID0gb3B0aW9uc1trZXldKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRrZXkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vcHRpb25zJGtleS5zY2FsYXJTdHlsZSkgIT09IG51bGwgJiYgX29wdGlvbnMka2V5JHNjYWxhclN0ICE9PSB2b2lkIDAgPyBfb3B0aW9ucyRrZXkkc2NhbGFyU3QgOiAnfCc7CiAgICAgIGNvbnN0IGNob21waW5nID0gKF9vcHRpb25zJGtleSRjaG9tcGluZyA9IChfb3B0aW9ucyRrZXkyID0gb3B0aW9uc1trZXldKSA9PT0gbnVsbCB8fCBfb3B0aW9ucyRrZXkyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb3B0aW9ucyRrZXkyLmNob21waW5nKSAhPT0gbnVsbCAmJiBfb3B0aW9ucyRrZXkkY2hvbXBpbmcgIT09IHZvaWQgMCA/IF9vcHRpb25zJGtleSRjaG9tcGluZyA6ICcnOwoKICAgICAgLyoqCiAgICAgICAqIFJlcGxhY2UgdGhlIG9yaWdpbmFsIGJsb2NrIGluZGljYXRvcnMgd2l0aCB0aGUgb25lcyBwcm92aWRlZCBpbiB0aGUgb3B0aW9ucyBwYXJhbQogICAgICAgKi8KICAgICAgb3V0ID0gb3V0LnJlcGxhY2UoaGVhZGVyLCBgJHtrZXl9OiAke3NjYWxhclN0eWxlfSR7Y2hvbXBpbmd9JHtpbmRlbnRhdGlvbn1gKTsKICAgIH0KICB9CiAgcmV0dXJuIG91dDsKfQ=="},{"version":3,"names":["indent","_indent","addObject","findBy","removeObject","removeObjects","jsyaml","cleanUp","isEmpty","SIMPLE_TYPES","ALWAYS_ADD","NEVER_ADD","ACTIVELY_REMOVE","INDENT","createYamlWithOptions","schemas","type","data","options","createYaml","processAlwaysAdd","depth","path","rootType","dataOptions","schema","attr","attributes","apiVersion","group","version","kind","regularFields","always","slice","i","length","entry","split","join","parts","key","prefix","resourceFields","commentFields","Object","keys","forEach","regular","map","k","stringifyField","comments","_rootSchema$attribute","rootSchema","namespaced","comment","out","filter","x","trim","_schema$resourceField","field","cleaned","parsedData","dump","Array","isArray","e","console","error","typeMunge","mapOf","typeRef","arrayOf","referenceTo","dumpBlock","includes","chunk","indented","replace","serializeSimpleValue","subDef","parsed","lines","getBlockDescriptor","value","header","getBlockHeader","indentation","getBlockIndentation","blockKey","card","re","RegExp","found","match","blockHeader","blockScalars","substr","indexOf","str","saferDump","obj","blockFields","_options$key$scalarSt","_options$key","_options$key$chomping","_options$key2","scalarStyle","chomping"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/create-yaml.js"],"sourcesContent":["import { indent as _indent } from '@shell/utils/string';\nimport { addObject, findBy, removeObject, removeObjects } from '@shell/utils/array';\nimport jsyaml from 'js-yaml';\nimport { cleanUp, isEmpty } from '@shell/utils/object';\n\nexport const SIMPLE_TYPES = [\n  'string',\n  'multiline',\n  'masked',\n  'password',\n  'float',\n  'int',\n  'date',\n  'blob',\n  'boolean',\n  'version'\n];\n\nconst ALWAYS_ADD = [\n  'apiVersion',\n  'kind',\n  'metadata',\n  'metadata.name',\n  'spec',\n  'spec.selector',\n  'spec.selector.matchLabels',\n  'spec.template',\n  'spec.template.metadata',\n  'spec.template.metadata.labels',\n  'spec.template.spec.containers.name',\n  'spec.template.spec.containers.image',\n];\n\nexport const NEVER_ADD = [\n  'metadata.clusterName',\n  'metadata.clusterName',\n  'metadata.creationTimestamp',\n  'metadata.deletionGracePeriodSeconds',\n  'metadata.deletionTimestamp',\n  'metadata.finalizers',\n  'metadata.generateName',\n  'metadata.generation',\n  'metadata.initializers',\n  'metadata.managedFields',\n  'metadata.ownerReferences',\n  'metadata.resourceVersion',\n  'metadata.relationships',\n  'metadata.selfLink',\n  'metadata.uid',\n  // CRD -> Schema describes the schema used for validation, pruning, and defaulting of this version of the custom resource. If we allow processing we fall into inf loop on openAPIV3Schema.allOf which contains a cyclical ref of allOf props.\n  'spec.versions.schema',\n  'status',\n  'stringData',\n];\n\nexport const ACTIVELY_REMOVE = [\n  'metadata.managedFields',\n  'metadata.relationships',\n  'metadata.state',\n  'status',\n  'links',\n  'type',\n  'id'\n];\n\nconst INDENT = 2;\n\nexport function createYamlWithOptions(schemas, type, data, options) {\n  return createYaml(\n    schemas,\n    type,\n    data,\n    true, 0, '', null,\n    options\n  );\n}\n\nexport function createYaml(\n  schemas,\n  type,\n  data,\n  processAlwaysAdd = true,\n  depth = 0,\n  path = '',\n  rootType = null,\n  dataOptions = {}\n) {\n  const schema = findBy(schemas, 'id', type);\n\n  if ( !rootType ) {\n    rootType = type;\n  }\n\n  if ( !schema ) {\n    return `Error loading schema for ${ type }`;\n  }\n\n  data = data || {};\n\n  if ( depth === 0 ) {\n    const attr = schema.attributes || {};\n\n    // Default to data.apiVersion/kind to accommodate spoofed types that aggregate multiple types\n    data.apiVersion = (attr.group ? `${ attr.group }/${ attr.version }` : attr.version) || data.apiVersion;\n    data.kind = attr.kind || data.kind;\n  }\n\n  const regularFields = [];\n\n  if (processAlwaysAdd) {\n    // Add all the parents of each key so that spec.template.foo.blah\n    // causes 'spec', 'template' and 'foo' keys to be created\n    const always = ALWAYS_ADD.slice();\n\n    for ( let i = always.length - 1 ; i >= 0 ; i-- ) {\n      let entry = always[i].split(/\\./);\n\n      while ( entry.length ) {\n        addObject(always, entry.join('.'));\n        entry = entry.slice(0, -1);\n      }\n    }\n\n    // Mark always fields as regular so they're not commented out\n    for ( const entry of always ) {\n      const parts = entry.split(/\\./);\n      const key = parts[parts.length - 1];\n      const prefix = parts.slice(0, -1).join('.');\n\n      if ( prefix === path && schema.resourceFields && schema.resourceFields[key] ) {\n        addObject(regularFields, key);\n      }\n    }\n  }\n\n  // Include all fields in schema's resourceFields as comments\n  const commentFields = Object.keys(schema.resourceFields || {});\n\n  commentFields.forEach((key) => {\n    if ( typeof data[key] !== 'undefined' || (depth === 0 && key === '_type') ) {\n      addObject(regularFields, key);\n    }\n  });\n\n  // add any fields defined in data as uncommented fields in yaml\n  for ( const key in data ) {\n    if ( typeof data[key] !== 'undefined' ) {\n      addObject(regularFields, key);\n    }\n  }\n\n  // ACTIVELY_REMOVE are fields that should be removed even if they are defined in data\n  for ( const entry of ACTIVELY_REMOVE ) {\n    const parts = entry.split(/\\./);\n    const key = parts[parts.length - 1];\n    const prefix = parts.slice(0, -1).join('.');\n\n    if ( prefix === path) {\n      removeObject(regularFields, key);\n    }\n  }\n\n  // NEVER_ADD are fields that should not be added as comments, but may added as regular fields if already defined in data\n  for ( const entry of NEVER_ADD ) {\n    const parts = entry.split(/\\./);\n    const key = parts[parts.length - 1];\n    const prefix = parts.slice(0, -1).join('.');\n\n    if ( prefix === path && schema.resourceFields && schema.resourceFields[key] ) {\n      removeObject(commentFields, key);\n    }\n  }\n\n  // do not include commented fields if already defined in data\n  removeObjects(commentFields, regularFields);\n\n  const regular = regularFields.map((k) => stringifyField(k));\n  const comments = commentFields.map((k) => {\n    // Don't add a namespace comment for types that aren't namespaced.\n    if ( path === 'metadata' && k === 'namespace' ) {\n      const rootSchema = findBy(schemas, 'id', rootType);\n\n      if ( rootSchema && !rootSchema.attributes?.namespaced ) {\n        return null;\n      }\n    }\n\n    return comment(stringifyField(k));\n  });\n\n  const out = [...regular, ...comments]\n    .filter((x) => x !== null)\n    .join('\\n')\n    .trim();\n\n  return out;\n\n  // ---------------\n\n  function stringifyField(key) {\n    const field = schema.resourceFields?.[key];\n    let out = `${ key }:`;\n\n    // '_type' in steve maps to kubernetes 'type' field; show 'type' field in yaml\n    if (key === '_type') {\n      out = 'type:';\n    }\n\n    // if a key on data is not listed in the schema's resourceFields, just convert it to yaml, add indents where needed, and return\n    if ( !field ) {\n      if (data[key]) {\n        try {\n          const cleaned = cleanUp(data);\n          const parsedData = jsyaml.dump(cleaned[key]);\n\n          if ( typeof data[key] === 'object' || Array.isArray(data[key]) ) {\n            out += `\\n${ indent(parsedData.trim()) }`;\n          } else {\n            out += ` ${ parsedData.trim() }`;\n          }\n\n          return out;\n        } catch (e) {\n          console.error(`Error: Unable to parse map data for yaml key: ${ key }`, e); // eslint-disable-line no-console\n        }\n      }\n\n      return null;\n    }\n\n    const type = typeMunge(field.type);\n    const mapOf = typeRef('map', type);\n    const arrayOf = typeRef('array', type);\n    const referenceTo = typeRef('reference', type);\n\n    // type == map[mapOf]\n    if ( mapOf ) {\n      // if key is defined in data, convert the value to yaml, add newline+indent and add to output yaml string\n      if (data[key]) {\n        try {\n          const cleaned = cleanUp(data);\n          const parsedData = dumpBlock(cleaned[key], dataOptions[key]);\n\n          out += `\\n${ indent(parsedData) }`;\n        } catch (e) {\n          console.error(`Error: Unable to parse map data for yaml of type: ${ type }`, e); // eslint-disable-line no-console\n        }\n      }\n\n      if ( SIMPLE_TYPES.includes(mapOf) ) {\n        out += `#  key: ${ mapOf }`;\n      } else {\n        // If not a simple type ie some sort of object/array, recusively build out commented fields (note data = null here) per the type's (mapOf's) schema\n        const chunk = createYaml(schemas, mapOf, null, processAlwaysAdd, depth + 1, (path ? `${ path }.${ key }` : key), rootType, dataOptions);\n        let indented = indent(chunk);\n\n        // convert \"#    foo\" to \"#foo\"\n        indented = indented.replace(/^(#)?\\s\\s\\s\\s/, '$1');\n\n        out += `${ indented }`;\n      }\n\n      return out;\n    }\n\n    // type == array[arrayOf]\n    if ( arrayOf ) {\n      if (data[key]) {\n        try {\n          const cleaned = cleanUp(data);\n\n          if ( cleaned?.[key] ) {\n            const parsedData = jsyaml.dump(cleaned[key]);\n\n            out += `\\n${ indent(parsedData.trim()) }`;\n          }\n        } catch (e) {\n          console.error(`Error: Unale to parse array data for yaml of type: ${ type }`, e); // eslint-disable-line no-console\n        }\n      }\n\n      if ( SIMPLE_TYPES.includes(arrayOf) ) {\n        out += `\\n#  - ${ arrayOf }`;\n      } else {\n        const chunk = createYaml(schemas, arrayOf, null, false, depth + 1, (path ? `${ path }.${ key }` : key), rootType, dataOptions);\n        let indented = indent(chunk, 2);\n\n        // turn \"#        foo\" into \"#  - foo\"\n        indented = indented.replace(/^(#)?\\s*\\s\\s([^\\s])/, '$1  - $2');\n\n        out += `\\n${ indented }`;\n      }\n\n      return out;\n    }\n\n    if ( referenceTo ) {\n      out += ` #${ referenceTo }`;\n\n      return out;\n    }\n\n    if ( SIMPLE_TYPES.includes(type) ) {\n      if (key === '_type' && typeof data[key] === 'undefined' && typeof data['type'] !== 'undefined') {\n        out += ` ${ serializeSimpleValue(data['type']) }`;\n      } else if ( typeof data[key] === 'undefined' ) {\n        out += ` #${ serializeSimpleValue(type) }`;\n      } else {\n        out += ` ${ serializeSimpleValue(data[key]) }`;\n      }\n\n      return out;\n    }\n\n    /**\n     * .spec is the type used for the Logging chart Output and ClusterOutput resource spec.\n     * Without this Output and ClusterOutput specs are empty.\n     */\n    if ( type === 'json' || type === '.spec') {\n      try {\n        const parsedData = jsyaml.dump(data[key]);\n\n        if (parsedData) {\n          out += `\\n${ indent(parsedData.trim()) }`;\n        } else {\n          out += ` #${ type }`;\n        }\n\n        return out;\n      } catch (e) {\n      }\n    }\n\n    const subDef = findBy(schemas, 'id', type);\n\n    if ( subDef) {\n      let chunk;\n\n      if (subDef?.resourceFields && !isEmpty(subDef?.resourceFields)) {\n        chunk = createYaml(schemas, type, data[key], processAlwaysAdd, depth + 1, (path ? `${ path }.${ key }` : key), rootType, dataOptions);\n      } else if (data[key]) {\n        // if there are no fields defined on the schema but there are in the data, just format data as yaml and add to output yaml\n        try {\n          const parsed = jsyaml.dump(data[key]);\n\n          chunk = parsed.trim();\n        } catch (e) {\n          console.error(`Error: Unale to parse data for yaml of type: ${ type }`, e); // eslint-disable-line no-console\n        }\n      }\n\n      out += `\\n${ indent(chunk) }`;\n    } else {\n      out += ` #${ type }`;\n    }\n\n    return out;\n  }\n}\n\nfunction comment(lines) {\n  return (lines || '').split('\\n').map((x) => `#${ x.replace(/#/g, '') }`).join('\\n');\n}\n\nfunction indent(lines, depth = 1) {\n  return _indent(lines, depth * INDENT, ' ', /^#/);\n}\n\nfunction serializeSimpleValue(data) {\n  return jsyaml.dump(data).trim();\n}\n\nexport function getBlockDescriptor(value, key) {\n  const header = getBlockHeader(value, key);\n\n  return {\n    header,\n    indentation: getBlockIndentation(header),\n  };\n}\n\n/**\n *\n * @param {string} value the block of text to be parsed\n * @param {*} blockKey the key of the block\n * @returns the key + the block scalar indicators, see https://yaml-multiline.info - Block Scalars\n */\nfunction getBlockHeader(value, blockKey) {\n  const card = `(${ blockKey })[\\\\:][\\\\s|\\\\t]+[\\\\|\\\\>][\\\\d]*[\\\\-\\\\+]?`;\n  const re = new RegExp(card, 'gi');\n\n  const found = value.match(re);\n\n  return found?.[0] || '';\n}\n\n/**\n *\n * @param {string} blockHeader the key + the block scalar indicators\n * @returns the indentation indicator from the block header, see https://yaml-multiline.info - Indentation\n */\nfunction getBlockIndentation(blockHeader) {\n  const blockScalars = blockHeader.substr(blockHeader.indexOf(':') + 1);\n\n  const indentation = blockScalars.match(/\\d+/);\n\n  return indentation?.[0] || '';\n}\n\nexport function typeRef(type, str) {\n  const re = new RegExp(`^${ type }\\\\[(.*)\\\\]$`);\n  const match = str.match(re);\n\n  if ( match ) {\n    return typeMunge(match[1]);\n  }\n}\n\nexport function typeMunge(type) {\n  if ( type === 'integer' ) {\n    return 'int';\n  }\n\n  if ( type === 'io.k8s.apimachinery.pkg.api.resource.Quantity' ) {\n    return 'string';\n  }\n\n  return type;\n}\n\nexport function saferDump(obj) {\n  const out = jsyaml.dump(obj || {});\n\n  if ( out === '{}\\n' ) {\n    return '';\n  }\n\n  return out;\n}\n\n/**\n * Handles newlines indicators in the multiline blocks.\n *\n * this is required since jsyaml.dump doesn't support chomping and scalar style at the moment.\n * see: https://github.com/nodeca/js-yaml/issues/171\n *\n * @param {*} data the multiline block\n * @param {*} options blocks indicators, see: https://yaml-multiline.info\n *\n * - scalarStyle:\n *     one of '|', '>'\n *     default '|'\n * - chomping:\n *     one of: null, '', '-', '+'\n *     default: null\n * @returns the result of jsyaml.dump with the addition of multiline indicators\n */\nexport function dumpBlock(data, options = {}) {\n  const parsed = jsyaml.dump(data);\n\n  let out = parsed;\n\n  const blockFields = Object.keys(data).filter((k) => data[k].includes('\\n'));\n\n  if (blockFields.length) {\n    for (const key of blockFields) {\n      const { header, indentation } = getBlockDescriptor(out, key);\n\n      const scalarStyle = options[key]?.scalarStyle ?? '|';\n      const chomping = options[key]?.chomping ?? '';\n\n      /**\n       * Replace the original block indicators with the ones provided in the options param\n       */\n      out = out.replace(header, `${ key }: ${ scalarStyle }${ chomping }${ indentation }`);\n    }\n  }\n\n  return out;\n}\n"],"mappings":"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"}]}