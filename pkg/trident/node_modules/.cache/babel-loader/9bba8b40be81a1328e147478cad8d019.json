{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/dashboard-store/resource-class.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/dashboard-store/resource-class.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/trident/babel.config.js","mtime":1716430386784},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgTk9STUFOX05BTUUgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCB7IF9DTE9ORSwgX0NPTkZJRywgX0VESVQsIF9VTkZMQUcsIF9WSUVXLCBfWUFNTCwgQVMsIE1PREUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IFZJRVdfSU5fQVBJIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3ByZWZzJzsKaW1wb3J0IHsgYWRkT2JqZWN0LCBhZGRPYmplY3RzLCBmaW5kQnksIHJlbW92ZUF0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IEN1c3RvbVZhbGlkYXRvcnMgZnJvbSAnQHNoZWxsL3V0aWxzL2N1c3RvbS12YWxpZGF0b3JzJzsKaW1wb3J0IHsgZG93bmxvYWRGaWxlLCBnZW5lcmF0ZVppcCB9IGZyb20gJ0BzaGVsbC91dGlscy9kb3dubG9hZCc7CmltcG9ydCB7IGNsb25lLCBnZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgZWFjaExpbWl0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3Byb21pc2UnOwppbXBvcnQgeyBzb3J0YWJsZU51bWVyaWNTdWZmaXggfSBmcm9tICdAc2hlbGwvdXRpbHMvc29ydCc7CmltcG9ydCB7IGNvZXJjZVN0cmluZ1R5cGVUb1NjYWxhclR5cGUsIGVzY2FwZUh0bWwsIHVjRmlyc3QgfSBmcm9tICdAc2hlbGwvdXRpbHMvc3RyaW5nJzsKaW1wb3J0IHsgZGlzcGxheUtleUZvciwgdmFsaWRhdGVCb29sZWFuLCB2YWxpZGF0ZUNoYXJzLCB2YWxpZGF0ZURuc0xpa2VUeXBlcywgdmFsaWRhdGVMZW5ndGggfSBmcm9tICdAc2hlbGwvdXRpbHMvdmFsaWRhdG9ycyc7CmltcG9ydCBmb3JtUnVsZXNHZW5lcmF0b3IgZnJvbSAnQHNoZWxsL3V0aWxzL3ZhbGlkYXRvcnMvZm9ybVJ1bGVzL2luZGV4JzsKaW1wb3J0IHsgd2FpdEZvciB9IGZyb20gJ0BzaGVsbC91dGlscy9hc3luYyc7CmltcG9ydCBqc3lhbWwgZnJvbSAnanMteWFtbCc7CmltcG9ydCBjb21wYWN0IGZyb20gJ2xvZGFzaC9jb21wYWN0JzsKaW1wb3J0IGZvckluIGZyb20gJ2xvZGFzaC9mb3JJbic7CmltcG9ydCBpc0VtcHR5IGZyb20gJ2xvZGFzaC9pc0VtcHR5JzsKaW1wb3J0IGlzRnVuY3Rpb24gZnJvbSAnbG9kYXNoL2lzRnVuY3Rpb24nOwppbXBvcnQgaXNTdHJpbmcgZnJvbSAnbG9kYXNoL2lzU3RyaW5nJzsKaW1wb3J0IHVuaXEgZnJvbSAnbG9kYXNoL3VuaXEnOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IG5vcm1hbGl6ZVR5cGUgfSBmcm9tICcuL25vcm1hbGl6ZSc7CmltcG9ydCB7IEV4dGVuc2lvblBvaW50LCBBY3Rpb25Mb2NhdGlvbiB9IGZyb20gJ0BzaGVsbC9jb3JlL3R5cGVzJzsKaW1wb3J0IHsgZ2V0QXBwbGljYWJsZUV4dGVuc2lvbkVuaGFuY2VtZW50cyB9IGZyb20gJ0BzaGVsbC9jb3JlL3BsdWdpbi1oZWxwZXJzJzsKY29uc3QgU1RSSU5HX0xJS0VfVFlQRVMgPSBbJ3N0cmluZycsICdkYXRlJywgJ2Jsb2InLCAnZW51bScsICdtdWx0aWxpbmUnLCAnbWFza2VkJywgJ3Bhc3N3b3JkJywgJ2Ruc0xhYmVsJywgJ2hvc3RuYW1lJ107CmNvbnN0IEROU19MSUtFX1RZUEVTID0gWydkbnNMYWJlbCcsICdkbnNMYWJlbFJlc3RyaWN0ZWQnLCAnaG9zdG5hbWUnXTsKY29uc3QgUkVNQVBfU1RBVEUgPSB7CiAgZGlzYWJsZWQ6ICdpbmFjdGl2ZScsCiAgbm90YXBwbGllZDogJ05vdCBBcHBsaWVkJywKICBub3RyZWFkeTogJ05vdCBSZWFkeScsCiAgd2FpdGFwcGxpZWQ6ICdXYWl0IEFwcGxpZWQnLAogIG91dG9mc3luYzogJ091dCBvZiBTeW5jJywKICAnaW4tcHJvZ3Jlc3MnOiAnSW4gUHJvZ3Jlc3MnLAogIGdpdHVwZGF0aW5nOiAnR2l0IFVwZGF0aW5nJywKICBlcnJhcHBsaWVkOiAnRXJyIEFwcGxpZWQnLAogIHdhaXRjaGVja2luOiAnV2FpdCBDaGVjay1JbicsCiAgb2ZmOiAnRGlzYWJsZWQnLAogIHdhaXRpbmdmb3JpbmZyYXN0cnVjdHVyZTogJ1dhaXRpbmcgZm9yIEluZnJhJywKICB3YWl0aW5nZm9ybm9kZXJlZjogJ1dhaXRpbmcgZm9yIE5vZGUgUmVmJwp9Owpjb25zdCBERUZBVUxUX0NPTE9SID0gJ3dhcm5pbmcnOwpjb25zdCBERUZBVUxUX0lDT04gPSAneCc7CmNvbnN0IERFRkFVTFRfV0FJVF9JTlRFUlZBTCA9IDEwMDA7CmNvbnN0IERFRkFVTFRfV0FJVF9UTUlNRU9VVCA9IDMwMDAwOwpleHBvcnQgY29uc3QgU1RBVEVTX0VOVU0gPSB7CiAgSU5fVVNFOiAnaW4tdXNlJywKICBJTl9QUk9HUkVTUzogJ2luLXByb2dyZXNzJywKICBQRU5ESU5HX1JPTExCQUNLOiAncGVuZGluZy1yb2xsYmFjaycsCiAgUEVORElOR19VUEdSQURFOiAncGVuZGluZy11cGdyYWRlJywKICBBQk9SVEVEOiAnYWJvcnRlZCcsCiAgQUNUSVZBVElORzogJ2FjdGl2YXRpbmcnLAogIEFDVElWRTogJ2FjdGl2ZScsCiAgQVZBSUxBQkxFOiAnYXZhaWxhYmxlJywKICBCQUNLRURfVVA6ICdiYWNrZWR1cCcsCiAgQk9VTkQ6ICdib3VuZCcsCiAgQlVJTERJTkc6ICdidWlsZGluZycsCiAgQ09NUExFVEVEOiAnY29tcGxldGVkJywKICBDT1JET05FRDogJ2NvcmRvbmVkJywKICBDT1VOVDogJ2NvdW50JywKICBDUkVBVEVEOiAnY3JlYXRlZCcsCiAgQ1JFQVRJTkc6ICdjcmVhdGluZycsCiAgREVBQ1RJVkFUSU5HOiAnZGVhY3RpdmF0aW5nJywKICBERUdSQURFRDogJ2RlZ3JhZGVkJywKICBERU5JRUQ6ICdkZW5pZWQnLAogIERFUExPWUVEOiAnZGVwbG95ZWQnLAogIERFUExPWUlORzogJ2RlcGxveWluZycsCiAgRElTQUJMRUQ6ICdkaXNhYmxlZCcsCiAgRElTQ09OTkVDVEVEOiAnZGlzY29ubmVjdGVkJywKICBEUkFJTkVEOiAnZHJhaW5lZCcsCiAgRFJBSU5JTkc6ICdkcmFpbmluZycsCiAgRVJSX0FQUExJRUQ6ICdlcnJhcHBsaWVkJywKICBFUlJPUjogJ2Vycm9yJywKICBFUlJPUklORzogJ2Vycm9yaW5nJywKICBFUlJPUlM6ICdlcnJvcnMnLAogIEVYUElSRUQ6ICdleHBpcmVkJywKICBGQUlMOiAnZmFpbCcsCiAgRkFJTEVEOiAnZmFpbGVkJywKICBIRUFMVEhZOiAnaGVhbHRoeScsCiAgSU5BQ1RJVkU6ICdpbmFjdGl2ZScsCiAgSU5GTzogJ2luZm8nLAogIElOSVRJQUxJWklORzogJ2luaXRpYWxpemluZycsCiAgSU5QUk9HUkVTUzogJ2lucHJvZ3Jlc3MnLAogIExPQ0tFRDogJ2xvY2tlZCcsCiAgTUlHUkFUSU5HOiAnbWlncmF0aW5nJywKICBNSVNTSU5HOiAnbWlzc2luZycsCiAgTU9ESUZJRUQ6ICdtb2RpZmllZCcsCiAgTk9UX0FQUExJQ0FCTEU6ICdub3RBcHBsaWNhYmxlJywKICBOT1RfQVBMTElFRDogJ25vdGFwcGxpZWQnLAogIE5PVF9SRUFEWTogJ25vdHJlYWR5JywKICBPRkY6ICdvZmYnLAogIE9SUEhBTkVEOiAnb3JwaGFuZWQnLAogIE9USEVSOiAnb3RoZXInLAogIE9VVF9PRl9TWU5DOiAnb3V0b2ZzeW5jJywKICBPTl9HT0lORzogJ29uLWdvaW5nJywKICBQQVNTOiAncGFzcycsCiAgUEFTU0VEOiAncGFzc2VkJywKICBQQVVTRUQ6ICdwYXVzZWQnLAogIFBFTkRJTkc6ICdwZW5kaW5nJywKICBQUk9WSVNJT05JTkc6ICdwcm92aXNpb25pbmcnLAogIFBST1ZJU0lPTkVEOiAncHJvdmlzaW9uZWQnLAogIFBVUkdFRDogJ3B1cmdlZCcsCiAgUFVSR0lORzogJ3B1cmdpbmcnLAogIFJFQURZOiAncmVhZHknLAogIFJFQ09OTkVDVElORzogJ3JlY29ubmVjdGluZycsCiAgUkVHSVNURVJJTkc6ICdyZWdpc3RlcmluZycsCiAgUkVJTklUSUFMSVpJTkc6ICdyZWluaXRpYWxpemluZycsCiAgUkVMRUFTRUQ6ICdyZWxlYXNlZCcsCiAgUkVNT1ZFRDogJ3JlbW92ZWQnLAogIFJFTU9WSU5HOiAncmVtb3ZpbmcnLAogIFJFUVVFU1RFRDogJ3JlcXVlc3RlZCcsCiAgUkVTVEFSVElORzogJ3Jlc3RhcnRpbmcnLAogIFJFU1RPUklORzogJ3Jlc3RvcmluZycsCiAgUkVTSVpJTkc6ICdyZXNpemluZycsCiAgUlVOTklORzogJ3J1bm5pbmcnLAogIFNLSVA6ICdza2lwJywKICBTS0lQUEVEOiAnc2tpcHBlZCcsCiAgU1RBUlRJTkc6ICdzdGFydGluZycsCiAgU1RPUFBFRDogJ3N0b3BwZWQnLAogIFNUT1BQSU5HOiAnc3RvcHBpbmcnLAogIFNVQ0NFRURFRDogJ3N1Y2NlZWRlZCcsCiAgU1VDQ0VTUzogJ3N1Y2Nlc3MnLAogIFNVQ0NFU1NGVUw6ICdzdWNjZXNzZnVsJywKICBTVVBFUlNFREVEOiAnc3VwZXJzZWRlZCcsCiAgU1VTUEVOREVEOiAnc3VzcGVuZGVkJywKICBVTkFWQUlMQUJMRTogJ3VuYXZhaWxhYmxlJywKICBVTkhFQUxUSFk6ICd1bmhlYWx0aHknLAogIFVOSU5TVEFMTEVEOiAndW5pbnN0YWxsZWQnLAogIFVOSU5TVEFMTElORzogJ3VuaW5zdGFsbGluZycsCiAgVU5LTk9XTjogJ3Vua25vd24nLAogIFVOVFJJR0dFUkVEOiAndW50cmlnZ2VyZWQnLAogIFVQREFUSU5HOiAndXBkYXRpbmcnLAogIFdBSVRfQVBQTElFRDogJ3dhaXRhcHBsaWVkJywKICBXQUlUX0NIRUNLSU46ICd3YWl0Y2hlY2tpbicsCiAgV0FJVElORzogJ3dhaXRpbmcnLAogIFdBUk5JTkc6ICd3YXJuaW5nJwp9OwpleHBvcnQgY29uc3QgU1RBVEVTID0gewogIFtTVEFURVNfRU5VTS5JTl9VU0VdOiB7CiAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgaWNvbjogJ2RvdC1vcGVuJywKICAgIGxhYmVsOiAnSW4gVXNlJywKICAgIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKICB9LAogIFtTVEFURVNfRU5VTS5JTl9QUk9HUkVTU106IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAndGFnJywKICAgIGxhYmVsOiAnSW4gUHJvZ3Jlc3MnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5QRU5ESU5HX1JPTExCQUNLXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdkb3QtaGFsZicsCiAgICBsYWJlbDogJ1BlbmRpbmcgUm9sbGJhY2snLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5QRU5ESU5HX1VQR1JBREVdOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2RvdC1oYWxmJywKICAgIGxhYmVsOiAnUGVuZGluZyBVcGRhdGUnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5BQk9SVEVEXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ0Fib3J0ZWQnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5BQ1RJVkFUSU5HXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdBY3RpdmF0aW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uQUNUSVZFXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3Qtb3BlbicsCiAgICBsYWJlbDogJ0FjdGl2ZScsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uQVZBSUxBQkxFXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3Qtb3BlbicsCiAgICBsYWJlbDogJ0F2YWlsYWJsZScsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uQkFDS0VEX1VQXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdiYWNrdXAnLAogICAgbGFiZWw6ICdCYWNrZWQgVXAnLAogICAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwogIH0sCiAgW1NUQVRFU19FTlVNLkJPVU5EXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3QnLAogICAgbGFiZWw6ICdCb3VuZCcsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uQlVJTERJTkddOiB7CiAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgaWNvbjogJ2RvdC1vcGVuJywKICAgIGxhYmVsOiAnQnVpbGRpbmcnLAogICAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwogIH0sCiAgW1NUQVRFU19FTlVNLkNPTVBMRVRFRF06IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90JywKICAgIGxhYmVsOiAnQ29tcGxldGVkJywKICAgIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKICB9LAogIFtTVEFURVNfRU5VTS5DT1JET05FRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAndGFnJywKICAgIGxhYmVsOiAnQ29yZG9uZWQnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5DT1VOVF06IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdDb3VudCcsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uQ1JFQVRFRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAndGFnJywKICAgIGxhYmVsOiAnQ3JlYXRlZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLkNSRUFUSU5HXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdDcmVhdGluZycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLkRFQUNUSVZBVElOR106IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAnYWRqdXN0JywKICAgIGxhYmVsOiAnRGVhY3RpdmF0aW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uREVHUkFERURdOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnRGVncmFkZWQnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5ERU5JRURdOiB7CiAgICBjb2xvcjogJ2Vycm9yJywKICAgIGljb246ICdhZGp1c3QnLAogICAgbGFiZWw6ICdEZW5pZWQnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uREVQTE9ZRURdOiB7CiAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgaWNvbjogJ2RvdC1vcGVuJywKICAgIGxhYmVsOiAnRGVwbG95ZWQnLAogICAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwogIH0sCiAgW1NUQVRFU19FTlVNLkRJU0FCTEVEXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ0Rpc2FibGVkJywKICAgIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCiAgfSwKICBbU1RBVEVTX0VOVU0uRElTQ09OTkVDVEVEXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ0Rpc2Nvbm5lY3RlZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLkRSQUlORURdOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ0RyYWluZWQnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5EUkFJTklOR106IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAndGFnJywKICAgIGxhYmVsOiAnRHJhaW5pbmcnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5FUlJfQVBQTElFRF06IHsKICAgIGNvbG9yOiAnZXJyb3InLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnRXJyb3IgQXBwbGllZCcsCiAgICBjb21wb3VuZEljb246ICdlcnJvcicKICB9LAogIFtTVEFURVNfRU5VTS5FUlJPUl06IHsKICAgIGNvbG9yOiAnZXJyb3InLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnRXJyb3InLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uRVJST1JJTkddOiB7CiAgICBjb2xvcjogJ2Vycm9yJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ0Vycm9yaW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwogIH0sCiAgW1NUQVRFU19FTlVNLkVSUk9SU106IHsKICAgIGNvbG9yOiAnZXJyb3InLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnRXJyb3JzJywKICAgIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwogIH0sCiAgW1NUQVRFU19FTlVNLkVYUElSRURdOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnRXhwaXJlZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLkZBSUxdOiB7CiAgICBjb2xvcjogJ2Vycm9yJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ0ZhaWwnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uRkFJTEVEXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdGYWlsZWQnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uSEVBTFRIWV06IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdIZWFsdGh5JywKICAgIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKICB9LAogIFtTVEFURVNfRU5VTS5JTkFDVElWRV06IHsKICAgIGNvbG9yOiAnZXJyb3InLAogICAgaWNvbjogJ2RvdCcsCiAgICBsYWJlbDogJ0luYWN0aXZlJywKICAgIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwogIH0sCiAgW1NUQVRFU19FTlVNLklOSVRJQUxJWklOR106IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdJbml0aWFsaXppbmcnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5JTlBST0dSRVNTXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdzcGlubmVyJywKICAgIGxhYmVsOiAnSW4gUHJvZ3Jlc3MnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5JTkZPXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdpbmZvJywKICAgIGxhYmVsOiAnSW5mbycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLkxPQ0tFRF06IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAnYWRqdXN0JywKICAgIGxhYmVsOiAnTG9ja2VkJywKICAgIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCiAgfSwKICBbU1RBVEVTX0VOVU0uTUlHUkFUSU5HXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdpbmZvJywKICAgIGxhYmVsOiAnTWlncmF0ZWQnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5NSVNTSU5HXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICdhZGp1c3QnLAogICAgbGFiZWw6ICdNaXNzaW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCiAgfSwKICBbU1RBVEVTX0VOVU0uTU9ESUZJRURdOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ2VkaXQnLAogICAgbGFiZWw6ICdNb2RpZmllZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLk5PVF9BUFBMSUNBQkxFXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdOb3QgQXBwbGljYWJsZScsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLk5PVF9BUExMSUVEXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdOb3QgQXBwbGllZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLk5PVF9SRUFEWV06IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAndGFnJywKICAgIGxhYmVsOiAnTm90IFJlYWR5JywKICAgIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCiAgfSwKICBbU1RBVEVTX0VOVU0uT0ZGXTogewogICAgY29sb3I6ICdkYXJrZXInLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnT2ZmJwogIH0sCiAgW1NUQVRFU19FTlVNLk9OX0dPSU5HXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdpbmZvJywKICAgIGxhYmVsOiAnSW5mbycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLk9SUEhBTkVEXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdPcnBoYW5lZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLk9USEVSXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdpbmZvJywKICAgIGxhYmVsOiAnT3RoZXInLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5PVVRfT0ZfU1lOQ106IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAndGFnJywKICAgIGxhYmVsOiAnT3V0IE9mIFN5bmMnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5QQVNTXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3QtZG90ZmlsbCcsCiAgICBsYWJlbDogJ1Bhc3MnLAogICAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwogIH0sCiAgW1NUQVRFU19FTlVNLlBBU1NFRF06IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LWRvdGZpbGwnLAogICAgbGFiZWw6ICdQYXNzZWQnLAogICAgY29tcG91bmRJY29uOiAnY2hlY2ttYXJrJwogIH0sCiAgW1NUQVRFU19FTlVNLlBBVVNFRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAnaW5mbycsCiAgICBsYWJlbDogJ1BhdXNlZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlBFTkRJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1BlbmRpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5QUk9WSVNJT05JTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2RvdCcsCiAgICBsYWJlbDogJ1Byb3Zpc2lvbmluZycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlBST1ZJU0lPTkVEXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3QnLAogICAgbGFiZWw6ICdQcm92aXNpb25lZCcsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uUFVSR0VEXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAncHVyZ2VkJywKICAgIGxhYmVsOiAnUHVyZ2VkJywKICAgIGNvbXBvdW5kSWNvbjogJ2Vycm9yJwogIH0sCiAgW1NUQVRFU19FTlVNLlBVUkdJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3B1cmdlZCcsCiAgICBsYWJlbDogJ1B1cmdpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5SRUFEWV06IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdSZWFkeScsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uUkVDT05ORUNUSU5HXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdSZWNvbm5lY3RpbmcnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uUkVHSVNURVJJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1JlZ2lzdGVyaW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uUkVJTklUSUFMSVpJTkddOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ2Vycm9yJywKICAgIGxhYmVsOiAnUmVpbml0aWFsaXppbmcnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5SRUxFQVNFRF06IHsKICAgIGNvbG9yOiAnd2FybmluZycsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdSZWxlYXNlZCcsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLlJFTU9WRURdOiB7CiAgICBjb2xvcjogJ2Vycm9yJywKICAgIGljb246ICd0cmFzaCcsCiAgICBsYWJlbDogJ1JlbW92ZWQnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uUkVNT1ZJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RyYXNoJywKICAgIGxhYmVsOiAnUmVtb3ZpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5SRVFVRVNURURdOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1JlcXVlc3RlZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlJFU1RBUlRJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2FkanVzdCcsCiAgICBsYWJlbDogJ1Jlc3RhcnRpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5SRVNUT1JJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ21lZGljYWxjcm9zcycsCiAgICBsYWJlbDogJ1Jlc3RvcmluZycsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlJFU0laSU5HXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICdkb3QnLAogICAgbGFiZWw6ICdSZXNpemluZycsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLlJVTk5JTkddOiB7CiAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgaWNvbjogJ2RvdC1vcGVuJywKICAgIGxhYmVsOiAnUnVubmluZycsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uU0tJUF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdTa2lwJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uU0tJUFBFRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdTa2lwcGVkJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uU1RBUlRJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2FkanVzdCcsCiAgICBsYWJlbDogJ1N0YXJ0aW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uU1RPUFBFRF06IHsKICAgIGNvbG9yOiAnZXJyb3InLAogICAgaWNvbjogJ2RvdCcsCiAgICBsYWJlbDogJ1N0b3BwZWQnLAogICAgY29tcG91bmRJY29uOiAnZXJyb3InCiAgfSwKICBbU1RBVEVTX0VOVU0uU1RPUFBJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2FkanVzdCcsCiAgICBsYWJlbDogJ1N0b3BwaW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uU1VDQ0VFREVEXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3QtZG90ZmlsbCcsCiAgICBsYWJlbDogJ1N1Y2NlZWRlZCcsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uU1VDQ0VTU106IHsKICAgIGNvbG9yOiAnc3VjY2VzcycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdTdWNjZXNzJywKICAgIGNvbXBvdW5kSWNvbjogJ2NoZWNrbWFyaycKICB9LAogIFtTVEFURVNfRU5VTS5TVUNDRVNTRlVMXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICdkb3Qtb3BlbicsCiAgICBsYWJlbDogJ1N1Y2Nlc3NmdWwnCiAgfSwKICBbU1RBVEVTX0VOVU0uU1VQRVJTRURFRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAnZG90LW9wZW4nLAogICAgbGFiZWw6ICdTdXBlcnNlZGVkJywKICAgIGNvbXBvdW5kSWNvbjogJ2luZm8nCiAgfSwKICBbU1RBVEVTX0VOVU0uU1VTUEVOREVEXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICdwYXVzZScsCiAgICBsYWJlbDogJ1N1c3BlbmRlZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlVOQVZBSUxBQkxFXTogewogICAgY29sb3I6ICdlcnJvcicsCiAgICBpY29uOiAnZXJyb3InLAogICAgbGFiZWw6ICdVbmF2YWlsYWJsZScsCiAgICBjb21wb3VuZEljb246ICdlcnJvcicKICB9LAogIFtTVEFURVNfRU5VTS5VTkhFQUxUSFldOiB7CiAgICBjb2xvcjogJ2Vycm9yJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ1VuaGVhbHRoeScsCiAgICBjb21wb3VuZEljb246ICdlcnJvcicKICB9LAogIFtTVEFURVNfRU5VTS5VTklOU1RBTExFRF06IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAndHJhc2gnLAogICAgbGFiZWw6ICdVbmluc3RhbGxlZCcsCiAgICBjb21wb3VuZEljb246ICdpbmZvJwogIH0sCiAgW1NUQVRFU19FTlVNLlVOSU5TVEFMTElOR106IHsKICAgIGNvbG9yOiAnaW5mbycsCiAgICBpY29uOiAndHJhc2gnLAogICAgbGFiZWw6ICdVbmluc3RhbGxpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5VTktOT1dOXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICd4JywKICAgIGxhYmVsOiAnVW5rbm93bicsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLlVOVFJJR0dFUkVEXTogewogICAgY29sb3I6ICdzdWNjZXNzJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdVbnRyaWdnZXJlZCcsCiAgICBjb21wb3VuZEljb246ICdjaGVja21hcmsnCiAgfSwKICBbU1RBVEVTX0VOVU0uVVBEQVRJTkddOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1VwZGF0aW5nJywKICAgIGNvbXBvdW5kSWNvbjogJ3dhcm5pbmcnCiAgfSwKICBbU1RBVEVTX0VOVU0uV0FJVF9BUFBMSUVEXTogewogICAgY29sb3I6ICdpbmZvJywKICAgIGljb246ICd0YWcnLAogICAgbGFiZWw6ICdXYWl0IEFwcGxpZWQnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5XQUlUX0NIRUNLSU5dOiB7CiAgICBjb2xvcjogJ3dhcm5pbmcnLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1dhaXQgQ2hlY2tpbicsCiAgICBjb21wb3VuZEljb246ICd3YXJuaW5nJwogIH0sCiAgW1NUQVRFU19FTlVNLldBSVRJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ3RhZycsCiAgICBsYWJlbDogJ1dhaXRpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9LAogIFtTVEFURVNfRU5VTS5XQVJOSU5HXTogewogICAgY29sb3I6ICd3YXJuaW5nJywKICAgIGljb246ICdlcnJvcicsCiAgICBsYWJlbDogJ1dhcm5pbmcnLAogICAgY29tcG91bmRJY29uOiAnd2FybmluZycKICB9LAogIFtTVEFURVNfRU5VTS5ERVBMT1lJTkddOiB7CiAgICBjb2xvcjogJ2luZm8nLAogICAgaWNvbjogJ2luZm8nLAogICAgbGFiZWw6ICdEZXBsb3lpbmcnLAogICAgY29tcG91bmRJY29uOiAnaW5mbycKICB9Cn07CmV4cG9ydCBmdW5jdGlvbiBnZXRTdGF0ZXNCeVR5cGUodHlwZSA9ICdpbmZvJykgewogIGNvbnN0IG91dCA9IHsKICAgIGluZm86IFtdLAogICAgZXJyb3I6IFtdLAogICAgc3VjY2VzczogW10sCiAgICB3YXJuaW5nOiBbXSwKICAgIHVua25vd246IFtdCiAgfTsKICBmb3JJbihTVEFURVMsIChzdGF0ZSwgc3RhdGVLZXkpID0+IHsKICAgIGlmIChzdGF0ZS5jb2xvcikgewogICAgICBpZiAob3V0W3N0YXRlLmNvbG9yXSkgewogICAgICAgIG91dFtzdGF0ZS5jb2xvcl0ucHVzaChzdGF0ZUtleSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3V0LnVua25vd24ucHVzaChzdGF0ZUtleSk7CiAgICAgIH0KICAgIH0KICB9KTsKICByZXR1cm4gb3V0Owp9CmNvbnN0IFNPUlRfT1JERVIgPSB7CiAgZXJyb3I6IDEsCiAgd2FybmluZzogMiwKICBpbmZvOiAzLAogIHN1Y2Nlc3M6IDQsCiAgcmVhZHk6IDUsCiAgbm90cmVhZHk6IDYsCiAgb3RoZXI6IDcKfTsKZXhwb3J0IGZ1bmN0aW9uIGdldFN0YXRlTGFiZWwoc3RhdGUpIHsKICBjb25zdCBsb3dlcmNhc2VTdGF0ZSA9IHN0YXRlLnRvTG93ZXJDYXNlKCk7CiAgcmV0dXJuIFNUQVRFU1tsb3dlcmNhc2VTdGF0ZV0gPyBTVEFURVNbbG93ZXJjYXNlU3RhdGVdLmxhYmVsIDogU1RBVEVTW1NUQVRFU19FTlVNLlVOS05PV05dLmxhYmVsOwp9CmV4cG9ydCBmdW5jdGlvbiBjb2xvckZvclN0YXRlKHN0YXRlLCBpc0Vycm9yLCBpc1RyYW5zaXRpb25pbmcpIHsKICBpZiAoaXNFcnJvcikgewogICAgcmV0dXJuICd0ZXh0LWVycm9yJzsKICB9CiAgaWYgKGlzVHJhbnNpdGlvbmluZykgewogICAgcmV0dXJuICd0ZXh0LWluZm8nOwogIH0KICBjb25zdCBrZXkgPSAoc3RhdGUgfHwgJ2FjdGl2ZScpLnRvTG93ZXJDYXNlKCk7CiAgbGV0IGNvbG9yOwogIGlmIChTVEFURVNba2V5XSAmJiBTVEFURVNba2V5XS5jb2xvcikgewogICAgY29sb3IgPSBtYXliZUZuLmNhbGwodGhpcywgU1RBVEVTW2tleV0uY29sb3IpOwogIH0KICBpZiAoIWNvbG9yKSB7CiAgICBjb2xvciA9IERFRkFVTFRfQ09MT1I7CiAgfQogIHJldHVybiBgdGV4dC0ke2NvbG9yfWA7Cn0KZXhwb3J0IGZ1bmN0aW9uIHN0YXRlRGlzcGxheShzdGF0ZSkgewogIC8vIEBUT0RPIHVzZSB0cmFuc2xhdGlvbnMKICBjb25zdCBrZXkgPSAoc3RhdGUgfHwgJ2FjdGl2ZScpLnRvTG93ZXJDYXNlKCk7CiAgaWYgKFJFTUFQX1NUQVRFW2tleV0pIHsKICAgIHJldHVybiBSRU1BUF9TVEFURVtrZXldOwogIH0KICByZXR1cm4ga2V5LnNwbGl0KC8tLykubWFwKHVjRmlyc3QpLmpvaW4oJy0nKTsKfQpleHBvcnQgZnVuY3Rpb24gc3RhdGVTb3J0KGNvbG9yLCBkaXNwbGF5KSB7CiAgY29sb3IgPSBjb2xvci5yZXBsYWNlKC9eKHRleHR8YmcpLS8sICcnKTsKICByZXR1cm4gYCR7U09SVF9PUkRFUltjb2xvcl0gfHwgU09SVF9PUkRFUlsnb3RoZXInXX0gJHtkaXNwbGF5fWA7Cn0KZXhwb3J0IGZ1bmN0aW9uIGlzQ29uZGl0aW9uUmVhZHlBbmRXYWl0aW5nKGNvbmRpdGlvbikgewogIHZhciBfY29uZGl0aW9uJHR5cGUsIF9jb25kaXRpb24kcmVhc29uOwogIGlmICghY29uZGl0aW9uKSB7CiAgICByZXR1cm4gZmFsc2U7CiAgfQogIHJldHVybiAoY29uZGl0aW9uID09PSBudWxsIHx8IGNvbmRpdGlvbiA9PT0gdm9pZCAwIHx8IChfY29uZGl0aW9uJHR5cGUgPSBjb25kaXRpb24udHlwZSkgPT09IG51bGwgfHwgX2NvbmRpdGlvbiR0eXBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY29uZGl0aW9uJHR5cGUudG9Mb3dlckNhc2UoKSkgPT09ICdyZWFkeScgJiYgKGNvbmRpdGlvbiA9PT0gbnVsbCB8fCBjb25kaXRpb24gPT09IHZvaWQgMCB8fCAoX2NvbmRpdGlvbiRyZWFzb24gPSBjb25kaXRpb24ucmVhc29uKSA9PT0gbnVsbCB8fCBfY29uZGl0aW9uJHJlYXNvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NvbmRpdGlvbiRyZWFzb24udG9Mb3dlckNhc2UoKSkgPT09ICd3YWl0aW5nJzsKfQpmdW5jdGlvbiBtYXliZUZuKHZhbCkgewogIGlmIChpc0Z1bmN0aW9uKHZhbCkpIHsKICAgIHJldHVybiB2YWwodGhpcyk7CiAgfQogIHJldHVybiB2YWw7Cn0KZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmVzb3VyY2UgewogIGNvbnN0cnVjdG9yKGRhdGEsIGN0eCwgcmVoeWRyYXRlTmFtZXNwYWNlID0gbnVsbCwgc2V0Q2xvbmUgPSBmYWxzZSkgewogICAgZm9yIChjb25zdCBrIGluIGRhdGEpIHsKICAgICAgdGhpc1trXSA9IGRhdGFba107CiAgICB9CiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcywgJyRjdHgnLCB7CiAgICAgIHZhbHVlOiBjdHgsCiAgICAgIGVudW1lcmFibGU6IGZhbHNlCiAgICB9KTsKICAgIGlmIChyZWh5ZHJhdGVOYW1lc3BhY2UpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsICdfX3JlaHlkcmF0ZScsIHsKICAgICAgICB2YWx1ZTogcmVoeWRyYXRlTmFtZXNwYWNlLAogICAgICAgIGVudW1lcmFibGU6IHRydWUsCiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlCiAgICAgIH0pOwogICAgfQogICAgaWYgKHNldENsb25lKSB7CiAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnX19jbG9uZScsIHsKICAgICAgICB2YWx1ZTogdHJ1ZSwKICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLAogICAgICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSwKICAgICAgICB3cml0YWJsZTogdHJ1ZQogICAgICB9KTsKICAgIH0KICB9CiAgZ2V0ICckZ2V0dGVycycoKSB7CiAgICByZXR1cm4gdGhpcy4kY3R4LmdldHRlcnM7CiAgfQogIGdldCAnJHJvb3RHZXR0ZXJzJygpIHsKICAgIHJldHVybiB0aGlzLiRjdHgucm9vdEdldHRlcnM7CiAgfQogIGdldCAnJGRpc3BhdGNoJygpIHsKICAgIHJldHVybiB0aGlzLiRjdHguZGlzcGF0Y2g7CiAgfQogIGdldCAnJHN0YXRlJygpIHsKICAgIHJldHVybiB0aGlzLiRjdHguc3RhdGU7CiAgfQogIGdldCAnJHJvb3RTdGF0ZScoKSB7CiAgICByZXR1cm4gdGhpcy4kY3R4LnJvb3RTdGF0ZTsKICB9CiAgZ2V0IGN1c3RvbVZhbGlkYXRpb25SdWxlcygpIHsKICAgIHJldHVybiBbCiAgICAgIC8qKgogICAgICAgKiBFc3NlbnRpYWxseSBhIGZha2Ugc2NoZW1hIG9iamVjdCB3aXRoIGFkZGl0aW9uYWwgcGFyYW1zIHRvIGV4dGVuZCB2YWxpZGF0aW9uCiAgICAgICAqCiAgICAgICAqIEBwYXJhbSB7bnVsbGFibGV9IFZhbHVlIGlzIG51bGxhYmxlCiAgICAgICAqIEBwYXJhbSB7cGF0aH0gUGF0aCBvbiB0aGUgcmVzb3VyY2UgdG8gdGhlIHZhbHVlIHRvIHZhbGlkYXRlCiAgICAgICAqIEBwYXJhbSB7cmVxdWlyZWR9IFZhbHVlIHJlcXVpcmVkCiAgICAgICAqIEBwYXJhbSB7cmVxdWlyZWRJZn0gVmFsdWUgcmVxdWlyZWQgaWYgdmFsdWUgYXQgcGF0aCBub3QgZW1wdHkKICAgICAgICogQHBhcmFtIHt0cmFuc2xhdGlvbktleX0gSHVtYW4gcmVhZGFibGUgZGlzcGxheSBrZXkgZm9yIHBhcmFtIGluIHBhdGggZS5nLiBtZXRhZGF0YS5uYW1lID09PSBOYW1lCiAgICAgICAqIEBwYXJhbSB7dHlwZX0gVHlwZSBvZiBmaWVsZCB0byB2YWxpZGF0ZQogICAgICAgKiBAcGFyYW0ge3ZhbGlkYXRvcnN9IGFycmF5IG9mIHN0cmluZ3Mgd2hlcmUgaXRlbSBpcyBuYW1lIG9mIGV4cG9ydGVkIHZhbGlkYXRvciBmdW5jdGlvbiBpbiBjdXN0b20tdmFsaWRhdG9ycywgYXJncyBjYW4gYmUgcGFzc2VkIGJ5IHByZXBlbmRpbmcgYXJncyBzZXBhcmF0ZWQgYnkgY29sb24uIGUuZyBtYXhMZW5ndGg6NjMKICAgICAgICovCiAgICAgIC8qIHsKICAgICAgICBudWxsYWJsZTogICAgICAgZmFsc2UsCiAgICAgICAgcGF0aDogICAgICAgICAgICdzcGVjLnBvcnRzJywKICAgICAgICByZXF1aXJlZDogICAgICAgdHJ1ZSwKICAgICAgICB0eXBlOiAgICAgICAgICAgJ2FycmF5JywKICAgICAgICB2YWxpZGF0b3JzOiAgICAgWydzZXJ2aWNlUG9ydCddLAogICAgICB9ICovCiAgICBdOwogIH0KICBnZXQgX2tleSgpIHsKICAgIGNvbnN0IG0gPSB0aGlzLm1ldGFkYXRhOwogICAgaWYgKG0pIHsKICAgICAgaWYgKG0udWlkKSB7CiAgICAgICAgcmV0dXJuIG0udWlkOwogICAgICB9CiAgICAgIGlmIChtLm5hbWVzcGFjZSkgewogICAgICAgIHJldHVybiBgJHt0aGlzLnR5cGV9LyR7bS5uYW1lc3BhY2V9LyR7bS5uYW1lfWA7CiAgICAgIH0KICAgIH0KICAgIGlmICh0aGlzLmlkKSB7CiAgICAgIHJldHVybiBgJHt0aGlzLnR5cGV9LyR7dGhpcy5pZH1gOwogICAgfQogICAgcmV0dXJuIGAke3RoaXMudHlwZX0vJHtNYXRoLnJhbmRvbSgpfWA7CiAgfQogIGdldCBzY2hlbWEoKSB7CiAgICByZXR1cm4gdGhpcy4kZ2V0dGVyc1snc2NoZW1hRm9yJ10odGhpcy50eXBlKTsKICB9CiAgdG9TdHJpbmcoKSB7CiAgICByZXR1cm4gYFske3RoaXMudHlwZX06ICR7dGhpcy5pZH1dYDsKICB9CiAgZ2V0IHR5cGVEaXNwbGF5KCkgewogICAgY29uc3Qgc2NoZW1hID0gdGhpcy5zY2hlbWE7CiAgICBpZiAoc2NoZW1hKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb290R2V0dGVyc1sndHlwZS1tYXAvbGFiZWxGb3InXShzY2hlbWEpOwogICAgfQogICAgcmV0dXJuICc/JzsKICB9CiAgZ2V0IG5hbWVEaXNwbGF5KCkgewogICAgdmFyIF90aGlzJHNwZWMsIF90aGlzJG1ldGFkYXRhLCBfdGhpcyRtZXRhZGF0YTI7CiAgICByZXR1cm4gdGhpcy5kaXNwbGF5TmFtZSB8fCAoKF90aGlzJHNwZWMgPSB0aGlzLnNwZWMpID09PSBudWxsIHx8IF90aGlzJHNwZWMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNwZWMuZGlzcGxheU5hbWUpIHx8ICgoX3RoaXMkbWV0YWRhdGEgPSB0aGlzLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YSA9PT0gdm9pZCAwIHx8IChfdGhpcyRtZXRhZGF0YSA9IF90aGlzJG1ldGFkYXRhLmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGFbTk9STUFOX05BTUVdKSB8fCB0aGlzLm5hbWUgfHwgKChfdGhpcyRtZXRhZGF0YTIgPSB0aGlzLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1ldGFkYXRhMi5uYW1lKSB8fCB0aGlzLmlkOwogIH0KICBnZXQgbmFtZVNvcnQoKSB7CiAgICByZXR1cm4gc29ydGFibGVOdW1lcmljU3VmZml4KHRoaXMubmFtZURpc3BsYXkpLnRvTG93ZXJDYXNlKCk7CiAgfQogIGdldCBuYW1lc3BhY2VkTmFtZSgpIHsKICAgIHZhciBfdGhpcyRtZXRhZGF0YTM7CiAgICBjb25zdCBuYW1lc3BhY2UgPSAoX3RoaXMkbWV0YWRhdGEzID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YTMubmFtZXNwYWNlOwogICAgY29uc3QgbmFtZSA9IHRoaXMubmFtZURpc3BsYXk7CiAgICBpZiAobmFtZXNwYWNlKSB7CiAgICAgIHJldHVybiBgJHtuYW1lc3BhY2V9OiR7bmFtZX1gOwogICAgfQogICAgcmV0dXJuIG5hbWU7CiAgfQogIGdldCBuYW1lc3BhY2VkTmFtZVNvcnQoKSB7CiAgICByZXR1cm4gc29ydGFibGVOdW1lcmljU3VmZml4KHRoaXMubmFtZXNwYWNlZE5hbWUpLnRvTG93ZXJDYXNlKCk7CiAgfQogIGdldCBncm91cEJ5TGFiZWwoKSB7CiAgICB2YXIgX3RoaXMkbWV0YWRhdGE0OwogICAgY29uc3QgbmFtZSA9IChfdGhpcyRtZXRhZGF0YTQgPSB0aGlzLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YTQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1ldGFkYXRhNC5uYW1lc3BhY2U7CiAgICBsZXQgb3V0OwogICAgaWYgKG5hbWUpIHsKICAgICAgb3V0ID0gdGhpcy50KCdyZXNvdXJjZVRhYmxlLmdyb3VwTGFiZWwubmFtZXNwYWNlJywgewogICAgICAgIG5hbWU6IGVzY2FwZUh0bWwobmFtZSkKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICBvdXQgPSB0aGlzLnQoJ3Jlc291cmNlVGFibGUuZ3JvdXBMYWJlbC5ub3RJbkFOYW1lc3BhY2UnKTsKICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfQogIHNldExhYmVscyggLyogdmFsICovCiAgKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ltcGxlbWVudCBzZXRMYWJlbHMgaW4gc3ViY2xhc3MnKTsKICB9CiAgc2V0TGFiZWwoIC8qIGtleSwgdmFsICovCiAgKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0ltcGxlbWVudCBzZXRMYWJlbCBpbiBzdWJjbGFzcycpOwogIH0KICBzZXRBbm5vdGF0aW9ucyh2YWwpIHsKICAgIHRocm93IG5ldyBFcnJvcignSW1wbGVtZW50IHNldEFubm90YXRpb25zIGluIHN1YmNsYXNzJyk7CiAgfQogIHNldEFubm90YXRpb24oa2V5LCB2YWwpIHsKICAgIHRocm93IG5ldyBFcnJvcignSW1wbGVtZW50IHNldEFubm90YXRpb24gaW4gc3ViY2xhc3MnKTsKICB9CgogIC8vIFlvdSBjYW4gb3ZlcnJpZGUgdGhlIGRpc3BsYXllZCBieSBwcm92aWRpbmcgeW91ciBvd24gc3RhdGVEaXNwbGF5IChhbmQgcG9zc2libHkgdXNpbmcgdGhlIGZ1bmN0aW9uIGV4cG9ydGVkIGFib3ZlKQogIGdldCBzdGF0ZURpc3BsYXkoKSB7CiAgICByZXR1cm4gc3RhdGVEaXNwbGF5KHRoaXMuc3RhdGUpOwogIH0KICBnZXQgc3RhdGVDb2xvcigpIHsKICAgIHZhciBfdGhpcyRzdGF0ZU9iaiwgX3RoaXMkc3RhdGVPYmoyOwogICAgcmV0dXJuIGNvbG9yRm9yU3RhdGUuY2FsbCh0aGlzLCB0aGlzLnN0YXRlLCAoX3RoaXMkc3RhdGVPYmogPSB0aGlzLnN0YXRlT2JqKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0ZU9iaiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdGVPYmouZXJyb3IsIChfdGhpcyRzdGF0ZU9iajIgPSB0aGlzLnN0YXRlT2JqKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0ZU9iajIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXRlT2JqMi50cmFuc2l0aW9uaW5nKTsKICB9CiAgZ2V0IHN0YXRlQmFja2dyb3VuZCgpIHsKICAgIHJldHVybiB0aGlzLnN0YXRlQ29sb3IucmVwbGFjZSgndGV4dC0nLCAnYmctJyk7CiAgfQogIGdldCBzdGF0ZUljb24oKSB7CiAgICBsZXQgdHJhbnMgPSBmYWxzZTsKICAgIGxldCBlcnJvciA9IGZhbHNlOwogICAgaWYgKHRoaXMubWV0YWRhdGEgJiYgdGhpcy5tZXRhZGF0YS5zdGF0ZSkgewogICAgICB0cmFucyA9IHRoaXMubWV0YWRhdGEuc3RhdGUudHJhbnNpdGlvbmluZzsKICAgICAgZXJyb3IgPSB0aGlzLm1ldGFkYXRhLnN0YXRlLmVycm9yOwogICAgfQogICAgaWYgKHRyYW5zKSB7CiAgICAgIHJldHVybiAnaWNvbiBpY29uLXNwaW5uZXIgaWNvbi1zcGluJzsKICAgIH0KICAgIGlmIChlcnJvcikgewogICAgICByZXR1cm4gJ2ljb24gaWNvbi1lcnJvcic7CiAgICB9CiAgICBjb25zdCBrZXkgPSAodGhpcy5zdGF0ZSB8fCAnJykudG9Mb3dlckNhc2UoKTsKICAgIGxldCBpY29uOwogICAgaWYgKFNUQVRFU1trZXldICYmIFNUQVRFU1trZXldLmljb24pIHsKICAgICAgaWNvbiA9IG1heWJlRm4uY2FsbCh0aGlzLCBTVEFURVNba2V5XS5pY29uKTsKICAgIH0KICAgIGlmICghaWNvbikgewogICAgICBpY29uID0gREVGQVVMVF9JQ09OOwogICAgfQogICAgcmV0dXJuIGBpY29uIGljb24tJHtpY29ufWA7CiAgfQogIGdldCBzdGF0ZVNvcnQoKSB7CiAgICByZXR1cm4gc3RhdGVTb3J0KHRoaXMuc3RhdGVDb2xvciwgdGhpcy5zdGF0ZURpc3BsYXkpOwogIH0KICBnZXQgc3RhdGVEZXNjcmlwdGlvbigpIHsKICAgIHZhciBfdGhpcyRzdGF0ZU9iajMsIF90aGlzJHN0YXRlT2JqNCwgX3RoaXMkc3RhdGVPYmo1OwogICAgY29uc3QgdHJhbnMgPSAoKF90aGlzJHN0YXRlT2JqMyA9IHRoaXMuc3RhdGVPYmopID09PSBudWxsIHx8IF90aGlzJHN0YXRlT2JqMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdGVPYmozLnRyYW5zaXRpb25pbmcpIHx8IGZhbHNlOwogICAgY29uc3QgZXJyb3IgPSAoKF90aGlzJHN0YXRlT2JqNCA9IHRoaXMuc3RhdGVPYmopID09PSBudWxsIHx8IF90aGlzJHN0YXRlT2JqNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdGVPYmo0LmVycm9yKSB8fCBmYWxzZTsKICAgIGNvbnN0IG1lc3NhZ2UgPSAoX3RoaXMkc3RhdGVPYmo1ID0gdGhpcy5zdGF0ZU9iaikgPT09IG51bGwgfHwgX3RoaXMkc3RhdGVPYmo1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0ZU9iajUubWVzc2FnZTsKICAgIHJldHVybiB0cmFucyB8fCBlcnJvciA/IHVjRmlyc3QobWVzc2FnZSkgOiAnJzsKICB9CiAgZ2V0IHN0YXRlT2JqKCkgewogICAgdmFyIF90aGlzJG1ldGFkYXRhNTsKICAgIHJldHVybiAoX3RoaXMkbWV0YWRhdGE1ID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGE1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YTUuc3RhdGU7CiAgfQoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgd2FpdEZvclRlc3RGbihmbiwgbXNnLCB0aW1lb3V0TXMsIGludGVydmFsTXMpIHsKICAgIHJldHVybiB3YWl0Rm9yKCgpID0+IGZuLmFwcGx5KHRoaXMpLCBtc2csIHRpbWVvdXRNcyB8fCBERUZBVUxUX1dBSVRfVE1JTUVPVVQsIGludGVydmFsTXMgfHwgREVGQVVMVF9XQUlUX0lOVEVSVkFMLCB0cnVlKTsKICB9CiAgd2FpdEZvclN0YXRlKHN0YXRlLCB0aW1lb3V0LCBpbnRlcnZhbCkgewogICAgcmV0dXJuIHRoaXMud2FpdEZvclRlc3RGbigoKSA9PiB7CiAgICAgIHJldHVybiAodGhpcy5zdGF0ZSB8fCAnJykudG9Mb3dlckNhc2UoKSA9PT0gc3RhdGUudG9Mb3dlckNhc2UoKTsKICAgIH0sIGBzdGF0ZT0ke3N0YXRlfWAsIHRpbWVvdXQsIGludGVydmFsKTsKICB9CiAgd2FpdEZvclRyYW5zaXRpb24oKSB7CiAgICByZXR1cm4gdGhpcy53YWl0Rm9yVGVzdEZuKCgpID0+IHsKICAgICAgcmV0dXJuICF0aGlzLnRyYW5zaXRpb25pbmc7CiAgICB9LCAndHJhbnNpdGlvbiBjb21wbGV0aW9uJywgdW5kZWZpbmVkLCB1bmRlZmluZWQpOwogIH0KICB3YWl0Rm9yQWN0aW9uKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLndhaXRGb3JUZXN0Rm4oKCkgPT4gewogICAgICByZXR1cm4gdGhpcy5oYXNBY3Rpb24obmFtZSk7CiAgICB9LCBgYWN0aW9uPSR7bmFtZX1gLCB1bmRlZmluZWQsIHVuZGVmaW5lZCk7CiAgfQogIHdhaXRGb3JMaW5rKG5hbWUpIHsKICAgIHJldHVybiB0aGlzLndhaXRGb3JUZXN0Rm4oKCkgPT4gewogICAgICByZXR1cm4gdGhpcy5oYXNMaW5rKG5hbWUpOwogICAgfSwgYGxpbms9JHtuYW1lfWAsIHVuZGVmaW5lZCwgdW5kZWZpbmVkKTsKICB9CiAgaGFzQ29uZGl0aW9uKGNvbmRpdGlvbikgewogICAgcmV0dXJuIHRoaXMuaXNDb25kaXRpb24oY29uZGl0aW9uLCBudWxsKTsKICB9CiAgaXNDb25kaXRpb24oY29uZGl0aW9uLCB3aXRoU3RhdHVzID0gJ1RydWUnKSB7CiAgICBpZiAoIXRoaXMuc3RhdHVzIHx8ICF0aGlzLnN0YXR1cy5jb25kaXRpb25zKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGNvbnN0IGVudHJ5ID0gZmluZEJ5KHRoaXMuc3RhdHVzLmNvbmRpdGlvbnMgfHwgW10sICd0eXBlJywgY29uZGl0aW9uKTsKICAgIGlmICghZW50cnkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKCF3aXRoU3RhdHVzKSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogICAgcmV0dXJuIChlbnRyeS5zdGF0dXMgfHwgJycpLnRvTG93ZXJDYXNlKCkgPT09IGAke3dpdGhTdGF0dXN9YC50b0xvd2VyQ2FzZSgpOwogIH0KICB3YWl0Rm9yQ29uZGl0aW9uKG5hbWUsIHdpdGhTdGF0dXMgPSAnVHJ1ZScsIHRpbWVvdXRNcyA9IERFRkFVTFRfV0FJVF9UTUlNRU9VVCwgaW50ZXJ2YWxNcyA9IERFRkFVTFRfV0FJVF9JTlRFUlZBTCkgewogICAgcmV0dXJuIHRoaXMud2FpdEZvclRlc3RGbigoKSA9PiB7CiAgICAgIHJldHVybiB0aGlzLmlzQ29uZGl0aW9uKG5hbWUsIHdpdGhTdGF0dXMpOwogICAgfSwgYGNvbmRpdGlvbiAke25hbWV9PSR7d2l0aFN0YXR1c31gLCB0aW1lb3V0TXMsIGludGVydmFsTXMpOwogIH0KCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIGdldCBhdmFpbGFibGVBY3Rpb25zKCkgewogICAgY29uc3QgYWxsID0gdGhpcy5fYXZhaWxhYmxlQWN0aW9uczsKCiAgICAvLyBSZW1vdmUgZGlzYWJsZWQgaXRlbXMgYW5kIGNvbnNlY3V0aXZlIGRpdmlkZXJzCiAgICBsZXQgbGFzdCA9IG51bGw7CiAgICBjb25zdCBvdXQgPSBhbGwuZmlsdGVyKGl0ZW0gPT4gewogICAgICBpZiAoaXRlbS5lbmFibGVkID09PSBmYWxzZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBjb25zdCBjdXIgPSBpdGVtLmRpdmlkZXI7CiAgICAgIGNvbnN0IG9rID0gIWN1ciB8fCBjdXIgJiYgIWxhc3Q7CiAgICAgIGxhc3QgPSBjdXI7CiAgICAgIHJldHVybiBvazsKICAgIH0pOwoKICAgIC8vIFJlbW92ZSBkaXZpZGVycyBhdCB0aGUgYmVnaW5uaW5nCiAgICB3aGlsZSAob3V0Lmxlbmd0aCAmJiBvdXRbMF0uZGl2aWRlcikgewogICAgICBvdXQuc2hpZnQoKTsKICAgIH0KCiAgICAvLyBSZW1vdmUgZGl2aWRlcnMgYXQgdGhlIGVuZAogICAgd2hpbGUgKG91dC5sZW5ndGggJiYgb3V0W291dC5sZW5ndGggLSAxXS5kaXZpZGVyKSB7CiAgICAgIG91dC5wb3AoKTsKICAgIH0KCiAgICAvLyBSZW1vdmUgY29uc2VjdXRpdmUgZGl2aWRlcnMgaW4gdGhlIG1pZGRsZQogICAgZm9yIChsZXQgaSA9IDE7IGkgPCBvdXQubGVuZ3RoOyBpKyspIHsKICAgICAgaWYgKG91dFtpXS5kaXZpZGVyICYmIG91dFtpIC0gMV0uZGl2aWRlcikgewogICAgICAgIHJlbW92ZUF0KG91dCwgaSwgMSk7CiAgICAgICAgaS0tOwogICAgICB9CiAgICB9CiAgICByZXR1cm4gb3V0OwogIH0KCiAgLy8gWW91IGNhbiBhZGQgY3VzdG9tIGFjdGlvbnMgYnkgb3ZlcnJpZGluZyB5b3VyIG93biBhdmFpbGFibGVBY3Rpb25zIChhbmQgcHJvYmFibHkgcmVhZGluZyBzdXBlci5fYXZhaWxhYmxlQWN0aW9ucykKICBnZXQgX2F2YWlsYWJsZUFjdGlvbnMoKSB7CiAgICAvLyBnZXQgbWVudSBhY3Rpb25zIGF2YWlsYWJsZSBieSBwbHVnaW5zIGNvbmZpZ3VyYXRpb24KICAgIGNvbnN0IGN1cnJlbnRSb3V0ZSA9IHRoaXMuY3VycmVudFJvdXRlcigpLmFwcC5fcm91dGU7CiAgICBjb25zdCBleHRlbnNpb25NZW51QWN0aW9ucyA9IGdldEFwcGxpY2FibGVFeHRlbnNpb25FbmhhbmNlbWVudHModGhpcy4kcm9vdFN0YXRlLCBFeHRlbnNpb25Qb2ludC5BQ1RJT04sIEFjdGlvbkxvY2F0aW9uLlRBQkxFLCBjdXJyZW50Um91dGUsIHRoaXMpOwogICAgY29uc3QgYWxsID0gW3sKICAgICAgZGl2aWRlcjogdHJ1ZQogICAgfSwgewogICAgICBhY3Rpb246IHRoaXMuY2FuVXBkYXRlID8gJ2dvVG9FZGl0JyA6ICdnb1RvVmlld0NvbmZpZycsCiAgICAgIGxhYmVsOiB0aGlzLnQodGhpcy5jYW5VcGRhdGUgPyAnYWN0aW9uLmVkaXQnIDogJ2FjdGlvbi52aWV3JyksCiAgICAgIGljb246ICdpY29uIGljb24tZWRpdCcsCiAgICAgIGVuYWJsZWQ6IHRoaXMuY2FuQ3VzdG9tRWRpdAogICAgfSwgewogICAgICBhY3Rpb246IHRoaXMuY2FuRWRpdFlhbWwgPyAnZ29Ub0VkaXRZYW1sJyA6ICdnb1RvVmlld1lhbWwnLAogICAgICBsYWJlbDogdGhpcy50KHRoaXMuY2FuRWRpdFlhbWwgPyAnYWN0aW9uLmVkaXRZYW1sJyA6ICdhY3Rpb24udmlld1lhbWwnKSwKICAgICAgaWNvbjogJ2ljb24gaWNvbi1maWxlJywKICAgICAgZW5hYmxlZDogdGhpcy5jYW5ZYW1sCiAgICB9LCB7CiAgICAgIGFjdGlvbjogdGhpcy5jYW5DdXN0b21FZGl0ID8gJ2dvVG9DbG9uZScgOiAnY2xvbmVZYW1sJywKICAgICAgbGFiZWw6IHRoaXMudCgnYWN0aW9uLmNsb25lJyksCiAgICAgIGljb246ICdpY29uIGljb24tY29weScsCiAgICAgIGVuYWJsZWQ6IHRoaXMuY2FuQ2xvbmUgJiYgdGhpcy5jYW5DcmVhdGUgJiYgKHRoaXMuY2FuQ3VzdG9tRWRpdCB8fCB0aGlzLmNhbllhbWwpCiAgICB9LCB7CiAgICAgIGRpdmlkZXI6IHRydWUKICAgIH0sIHsKICAgICAgYWN0aW9uOiAnZG93bmxvYWQnLAogICAgICBsYWJlbDogdGhpcy50KCdhY3Rpb24uZG93bmxvYWQnKSwKICAgICAgaWNvbjogJ2ljb24gaWNvbi1kb3dubG9hZCcsCiAgICAgIGJ1bGthYmxlOiB0cnVlLAogICAgICBidWxrQWN0aW9uOiAnZG93bmxvYWRCdWxrJywKICAgICAgZW5hYmxlZDogdGhpcy5jYW5ZYW1sLAogICAgICB3ZWlnaHQ6IC05CiAgICB9LCB7CiAgICAgIGFjdGlvbjogJ3ZpZXdJbkFwaScsCiAgICAgIGxhYmVsOiB0aGlzLnQoJ2FjdGlvbi52aWV3SW5BcGknKSwKICAgICAgaWNvbjogJ2ljb24gaWNvbi1leHRlcm5hbC1saW5rJywKICAgICAgZW5hYmxlZDogdGhpcy5jYW5WaWV3SW5BcGkKICAgIH0sIHsKICAgICAgYWN0aW9uOiAncHJvbXB0UmVtb3ZlJywKICAgICAgYWx0QWN0aW9uOiAncmVtb3ZlJywKICAgICAgbGFiZWw6IHRoaXMudCgnYWN0aW9uLnJlbW92ZScpLAogICAgICBpY29uOiAnaWNvbiBpY29uLXRyYXNoJywKICAgICAgYnVsa2FibGU6IHRydWUsCiAgICAgIGVuYWJsZWQ6IHRoaXMuY2FuRGVsZXRlLAogICAgICBidWxrQWN0aW9uOiAncHJvbXB0UmVtb3ZlJywKICAgICAgd2VpZ2h0OiAtMTAgLy8gRGVsZXRlIGFsd2F5cyBnb2VzIGxhc3QKICAgIH1dOwoKICAgIC8vIEV4dGVuc2lvbiBhY3Rpb25zIGdldCBhZGRlZCB0byB0aGUgZW5kLCBzbyBhZGQgYSBkaXZpZGVyIGlmIHRoZXJlIGFyZSBhbnkKICAgIGlmIChleHRlbnNpb25NZW51QWN0aW9ucy5sZW5ndGgpIHsKICAgICAgLy8gQWRkIGEgZGl2aWRlciBmaXJzdAogICAgICBhbGwucHVzaCh7CiAgICAgICAgZGl2aWRlcjogdHJ1ZQogICAgICB9KTsKICAgICAgZXh0ZW5zaW9uTWVudUFjdGlvbnMuZm9yRWFjaChhY3Rpb24gPT4gewogICAgICAgIGNvbnN0IG5ld0FjdGlvbkluc3RhbmNlID0gewogICAgICAgICAgLi4uYWN0aW9uCiAgICAgICAgfTsKICAgICAgICBjb25zdCBlbmFibGVkRm4gPSBuZXdBY3Rpb25JbnN0YW5jZS5lbmFibGVkOwogICAgICAgIGNvbnN0IHR5cGVvZkVuYWJsZWQgPSB0eXBlb2YgZW5hYmxlZEZuOwogICAgICAgIHN3aXRjaCAodHlwZW9mRW5hYmxlZCkgewogICAgICAgICAgY2FzZSAndW5kZWZpbmVkJzoKICAgICAgICAgICAgbmV3QWN0aW9uSW5zdGFuY2UuZW5hYmxlZCA9IHRydWU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAnZnVuY3Rpb24nOgogICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkobmV3QWN0aW9uSW5zdGFuY2UsICdlbmFibGVkJywgewogICAgICAgICAgICAgIGdldDogKCkgPT4gZW5hYmxlZEZuKHRoaXMpCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgJ2Jvb2xlYW4nOgogICAgICAgICAgICAvLyBubyBvcCwganVzdCB1c2UgaXQgZGlyZWN0bHkKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBkZWZhdWx0OgogICAgICAgICAgICAvLyB1bnN1cHBvcnRlZCB2YWx1ZQogICAgICAgICAgICBjb25zb2xlLndhcm4oYFVuc3VwcG9ydGVkICdlbmFibGVkJyBwcm9wZXJ0eSB0eXBlIGZvciBhY3Rpb246ICR7YWN0aW9uLmxhYmVsIHx8IGFjdGlvbi5sYWJlbEtleX1gKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgIGRlbGV0ZSBuZXdBY3Rpb25JbnN0YW5jZS5lbmFibGVkOwogICAgICAgICAgICBicmVhazsKICAgICAgICB9CiAgICAgICAgYWxsLnB1c2gobmV3QWN0aW9uSW5zdGFuY2UpOwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBhbGw7CiAgfQoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgZ2V0IGNhbkRlbGV0ZSgpIHsKICAgIHJldHVybiB0aGlzLl9jYW5EZWxldGU7CiAgfQogIGdldCBfY2FuRGVsZXRlKCkgewogICAgcmV0dXJuIHRoaXMuaGFzTGluaygncmVtb3ZlJykgJiYgdGhpcy4kcm9vdEdldHRlcnNbJ3R5cGUtbWFwL29wdGlvbnNGb3InXSh0aGlzLnR5cGUpLmlzUmVtb3ZhYmxlOwogIH0KICBnZXQgY2FuQ2xvbmUoKSB7CiAgICByZXR1cm4gdHJ1ZTsKICB9CiAgZ2V0IGNhblVwZGF0ZSgpIHsKICAgIHJldHVybiB0aGlzLmhhc0xpbmsoJ3VwZGF0ZScpICYmIHRoaXMuJHJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9vcHRpb25zRm9yJ10odGhpcy50eXBlKS5pc0VkaXRhYmxlOwogIH0KICBnZXQgY2FuQ3VzdG9tRWRpdCgpIHsKICAgIHJldHVybiB0aGlzLiRyb290R2V0dGVyc1sndHlwZS1tYXAvaGFzQ3VzdG9tRWRpdCddKHRoaXMudHlwZSwgdGhpcy5pZCk7CiAgfQogIGdldCBjYW5DcmVhdGUoKSB7CiAgICB2YXIgX3RoaXMkc2NoZW1hOwogICAgaWYgKHRoaXMuc2NoZW1hICYmICEoKF90aGlzJHNjaGVtYSA9IHRoaXMuc2NoZW1hKSAhPT0gbnVsbCAmJiBfdGhpcyRzY2hlbWEgIT09IHZvaWQgMCAmJiBfdGhpcyRzY2hlbWEuY29sbGVjdGlvbk1ldGhvZHMuZmluZCh4ID0+IHgudG9Mb3dlckNhc2UoKSA9PT0gJ3Bvc3QnKSkpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgcmV0dXJuIHRoaXMuJHJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9vcHRpb25zRm9yJ10odGhpcy50eXBlKS5pc0NyZWF0YWJsZTsKICB9CiAgZ2V0IGNhblZpZXdJbkFwaSgpIHsKICAgIHJldHVybiB0aGlzLmhhc0xpbmsoJ3NlbGYnKSAmJiB0aGlzLiRyb290R2V0dGVyc1sncHJlZnMvZ2V0J10oVklFV19JTl9BUEkpOwogIH0KICBnZXQgY2FuWWFtbCgpIHsKICAgIHJldHVybiB0aGlzLmhhc0xpbmsoJ3ZpZXcnKTsKICB9CiAgZ2V0IGNhbkVkaXRZYW1sKCkgewogICAgdmFyIF90aGlzJHNjaGVtYTI7CiAgICByZXR1cm4gKF90aGlzJHNjaGVtYTIgPSB0aGlzLnNjaGVtYSkgIT09IG51bGwgJiYgX3RoaXMkc2NoZW1hMiAhPT0gdm9pZCAwICYmIChfdGhpcyRzY2hlbWEyID0gX3RoaXMkc2NoZW1hMi5yZXNvdXJjZU1ldGhvZHMpICE9PSBudWxsICYmIF90aGlzJHNjaGVtYTIgIT09IHZvaWQgMCAmJiBfdGhpcyRzY2hlbWEyLmZpbmQoeCA9PiB4ID09PSAnYmxvY2tlZC1QVVQnKSA/IGZhbHNlIDogdGhpcy5jYW5VcGRhdGU7CiAgfQoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgaGFzTGluayhsaW5rTmFtZSkgewogICAgcmV0dXJuICEhdGhpcy5saW5rRm9yKGxpbmtOYW1lKTsKICB9CiAgbGlua0ZvcihsaW5rTmFtZSkgewogICAgcmV0dXJuICh0aGlzLmxpbmtzIHx8IHt9KVtsaW5rTmFtZV07CiAgfQogIGZvbGxvd0xpbmsobGlua05hbWUsIG9wdCA9IHt9KSB7CiAgICBpZiAoIW9wdC51cmwpIHsKICAgICAgb3B0LnVybCA9ICh0aGlzLmxpbmtzIHx8IHt9KVtsaW5rTmFtZV07CiAgICB9CiAgICBpZiAob3B0LnVybFN1ZmZpeCkgewogICAgICBvcHQudXJsICs9IG9wdC51cmxTdWZmaXg7CiAgICB9CiAgICBpZiAoIW9wdC51cmwpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKGBVbmtub3duIGxpbmsgJHtsaW5rTmFtZX0gb24gJHt0aGlzLnR5cGV9ICR7dGhpcy5pZH1gKTsKICAgIH0KICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgncmVxdWVzdCcsIHsKICAgICAgb3B0LAogICAgICB0eXBlOiB0aGlzLnR5cGUKICAgIH0pOwogIH0KCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIGhhc0FjdGlvbihhY3Rpb25OYW1lKSB7CiAgICByZXR1cm4gISF0aGlzLmFjdGlvbkxpbmtGb3IoYWN0aW9uTmFtZSk7CiAgfQogIGFjdGlvbkxpbmtGb3IoYWN0aW9uTmFtZSkgewogICAgcmV0dXJuICh0aGlzLmFjdGlvbnMgfHwgdGhpcy5hY3Rpb25MaW5rcyB8fCB7fSlbYWN0aW9uTmFtZV07CiAgfQogIGRvQWN0aW9uKGFjdGlvbk5hbWUsIGJvZHksIG9wdCA9IHt9KSB7CiAgICByZXR1cm4gdGhpcy4kZGlzcGF0Y2goJ3Jlc291cmNlQWN0aW9uJywgewogICAgICByZXNvdXJjZTogdGhpcywKICAgICAgYWN0aW9uTmFtZSwKICAgICAgYm9keSwKICAgICAgb3B0CiAgICB9KTsKICB9CiAgYXN5bmMgZG9BY3Rpb25Hcm93bChhY3Rpb25OYW1lLCBib2R5LCBvcHQgPSB7fSkgewogICAgdHJ5IHsKICAgICAgYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ3Jlc291cmNlQWN0aW9uJywgewogICAgICAgIHJlc291cmNlOiB0aGlzLAogICAgICAgIGFjdGlvbk5hbWUsCiAgICAgICAgYm9keSwKICAgICAgICBvcHQKICAgICAgfSk7CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgdGhpcy4kZGlzcGF0Y2goJ2dyb3dsL2Zyb21FcnJvcicsIHsKICAgICAgICB0aXRsZTogdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vdCddKCdnZW5lcmljLm5vdGlmaWNhdGlvbi50aXRsZS5lcnJvcicpLAogICAgICAgIGVycjogZXJyLmRhdGEgfHwgZXJyCiAgICAgIH0sIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgfQogIH0KCiAgLy8gLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tCgogIHBhdGNoKGRhdGEsIG9wdCA9IHt9LCBtZXJnZSA9IGZhbHNlLCBhbGVydE9uRXJyb3IgPSBmYWxzZSkgewogICAgaWYgKCFvcHQudXJsKSB7CiAgICAgIC8vIFdvcmthcm91bmQgZm9yIHRoZSBsaW5rcyBub3QgYmVpbmcgY29ycmVjdCAtIHZpZXcgbGluayBpcyB0aGUgb25seSBvbmUgdGhhdCBzZWVtcyBjb3JyZWN0CiAgICAgIG9wdC51cmwgPSB0aGlzLmxpbmtGb3IoJ3ZpZXcnKSB8fCB0aGlzLmxpbmtGb3IoJ3NlbGYnKTsKICAgIH0KICAgIG9wdC5tZXRob2QgPSAncGF0Y2gnOwogICAgb3B0LmhlYWRlcnMgPSBvcHQuaGVhZGVycyB8fCB7fTsKICAgIGlmICghb3B0LmhlYWRlcnNbJ2NvbnRlbnQtdHlwZSddKSB7CiAgICAgIGNvbnN0IGNvbnRlbnRUeXBlID0gbWVyZ2UgPyAnYXBwbGljYXRpb24vc3RyYXRlZ2ljLW1lcmdlLXBhdGNoK2pzb24nIDogJ2FwcGxpY2F0aW9uL2pzb24tcGF0Y2granNvbic7CiAgICAgIG9wdC5oZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGNvbnRlbnRUeXBlOwogICAgfQogICAgb3B0LmRhdGEgPSBkYXRhOwogICAgY29uc3QgZGlzcGF0Y2ggPSB0aGlzLiRkaXNwYXRjaCgncmVxdWVzdCcsIHsKICAgICAgb3B0LAogICAgICB0eXBlOiB0aGlzLnR5cGUKICAgIH0pOwogICAgcmV0dXJuICFhbGVydE9uRXJyb3IgPyBkaXNwYXRjaCA6IGRpc3BhdGNoLmNhdGNoKGUgPT4gewogICAgICBjb25zdCB0aXRsZSA9IHRoaXMudCgncmVzb3VyY2UuZXJyb3JzLnVwZGF0ZScsIHsKICAgICAgICBuYW1lOiB0aGlzLm5hbWUKICAgICAgfSk7CiAgICAgIGNvbnNvbGUuZXJyb3IodGl0bGUsIGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKCiAgICAgIHRoaXMuJGRpc3BhdGNoKCdncm93bC9lcnJvcicsIHsKICAgICAgICB0aXRsZSwKICAgICAgICBtZXNzYWdlOiBlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUubWVzc2FnZSwKICAgICAgICB0aW1lb3V0OiA1MDAwCiAgICAgIH0sIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgfSk7CiAgfQogIHNhdmUoKSB7CiAgICByZXR1cm4gdGhpcy5fc2F2ZSguLi5hcmd1bWVudHMpOwogIH0KCiAgLyoqCiAgICogQWxsb3cgdG8gaGFuZGxlIHRoZSByZXNwb25zZSBvZiB0aGUgc2F2ZSByZXF1ZXN0CiAgICogQHBhcmFtIHsqfSByZXMgRnVsbCByZXF1ZXN0IHJlc3BvbnNlCiAgICovCiAgcHJvY2Vzc1NhdmVSZXNwb25zZShyZXMpIHt9CiAgYXN5bmMgX3NhdmUob3B0ID0ge30pIHsKICAgIHZhciBfdGhpcyRtZXRhZGF0YTY7CiAgICBkZWxldGUgdGhpcy5fX3JlaHlkcmF0ZTsKICAgIGRlbGV0ZSB0aGlzLl9fY2xvbmU7CiAgICBjb25zdCBmb3JOZXcgPSAhdGhpcy5pZDsKICAgIGNvbnN0IGVycm9ycyA9IGF3YWl0IHRoaXMudmFsaWRhdGlvbkVycm9ycyh0aGlzLCBvcHQuaWdub3JlRmllbGRzKTsKICAgIGlmICghaXNFbXB0eShlcnJvcnMpKSB7CiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcnMpOwogICAgfQogICAgaWYgKChfdGhpcyRtZXRhZGF0YTYgPSB0aGlzLm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfdGhpcyRtZXRhZGF0YTYgIT09IHZvaWQgMCAmJiBfdGhpcyRtZXRhZGF0YTYucmVzb3VyY2VWZXJzaW9uKSB7CiAgICAgIHRoaXMubWV0YWRhdGEucmVzb3VyY2VWZXJzaW9uID0gYCR7dGhpcy5tZXRhZGF0YS5yZXNvdXJjZVZlcnNpb259YDsKICAgIH0KICAgIGlmICghb3B0LnVybCkgewogICAgICBpZiAoZm9yTmV3KSB7CiAgICAgICAgY29uc3Qgc2NoZW1hID0gdGhpcy4kZ2V0dGVyc1snc2NoZW1hRm9yJ10odGhpcy50eXBlKTsKICAgICAgICBsZXQgdXJsID0gc2NoZW1hLmxpbmtGb3IoJ2NvbGxlY3Rpb24nKTsKICAgICAgICBpZiAoc2NoZW1hLmF0dHJpYnV0ZXMgJiYgc2NoZW1hLmF0dHJpYnV0ZXMubmFtZXNwYWNlZCAmJiB0aGlzLm1ldGFkYXRhICYmIHRoaXMubWV0YWRhdGEubmFtZXNwYWNlKSB7CiAgICAgICAgICB1cmwgKz0gYC8ke3RoaXMubWV0YWRhdGEubmFtZXNwYWNlfWA7CiAgICAgICAgfQogICAgICAgIG9wdC51cmwgPSB1cmw7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3B0LnVybCA9IHRoaXMubGlua0ZvcigndXBkYXRlJykgfHwgdGhpcy5saW5rRm9yKCdzZWxmJyk7CiAgICAgIH0KICAgIH0KICAgIGlmICghb3B0Lm1ldGhvZCkgewogICAgICBvcHQubWV0aG9kID0gZm9yTmV3ID8gJ3Bvc3QnIDogJ3B1dCc7CiAgICB9CiAgICBpZiAoIW9wdC5oZWFkZXJzKSB7CiAgICAgIG9wdC5oZWFkZXJzID0ge307CiAgICB9CiAgICBpZiAoIW9wdC5oZWFkZXJzWydjb250ZW50LXR5cGUnXSkgewogICAgICBvcHQuaGVhZGVyc1snY29udGVudC10eXBlJ10gPSAnYXBwbGljYXRpb24vanNvbic7CiAgICB9CiAgICBpZiAoIW9wdC5oZWFkZXJzWydhY2NlcHQnXSkgewogICAgICBvcHQuaGVhZGVyc1snYWNjZXB0J10gPSAnYXBwbGljYXRpb24vanNvbic7CiAgICB9CgogICAgLy8gQFRPRE8gcmVtb3ZlIHRoaXMgb25jZSB0aGUgQVBJIG1hcHMgc3RldmUgX3R5cGUgPC0+IGs4cyB0eXBlIGluIGJvdGggZGlyZWN0aW9ucwogICAgb3B0LmRhdGEgPSB0aGlzLnRvU2F2ZSgpIHx8IHsKICAgICAgLi4udGhpcwogICAgfTsKICAgIGlmIChvcHQgIT09IG51bGwgJiYgb3B0ICE9PSB2b2lkIDAgJiYgb3B0LmRhdGEuX3R5cGUpIHsKICAgICAgb3B0LmRhdGEudHlwZSA9IG9wdC5kYXRhLl90eXBlOwogICAgfQogICAgaWYgKG9wdCAhPT0gbnVsbCAmJiBvcHQgIT09IHZvaWQgMCAmJiBvcHQuZGF0YS5fbmFtZSkgewogICAgICBvcHQuZGF0YS5uYW1lID0gb3B0LmRhdGEuX25hbWU7CiAgICB9CiAgICBpZiAob3B0ICE9PSBudWxsICYmIG9wdCAhPT0gdm9pZCAwICYmIG9wdC5kYXRhLl9sYWJlbHMpIHsKICAgICAgb3B0LmRhdGEubGFiZWxzID0gb3B0LmRhdGEuX2xhYmVsczsKICAgIH0KICAgIGlmIChvcHQgIT09IG51bGwgJiYgb3B0ICE9PSB2b2lkIDAgJiYgb3B0LmRhdGEuX2Fubm90YXRpb25zKSB7CiAgICAgIG9wdC5kYXRhLmFubm90YXRpb25zID0gb3B0LmRhdGEuX2Fubm90YXRpb25zOwogICAgfQoKICAgIC8vIGhhbmRsZSAicmVwbGFjZSIgb3B0IGFzIGEgcXVlcnkgcGFyYW0gX3JlcGxhY2U9dHJ1ZSBmb3Igbm9ybWFuIFBVVCByZXF1ZXN0cwogICAgaWYgKG9wdCAhPT0gbnVsbCAmJiBvcHQgIT09IHZvaWQgMCAmJiBvcHQucmVwbGFjZSAmJiBvcHQubWV0aG9kID09PSAncHV0JykgewogICAgICBjb25zdCBhcmdQYXJhbSA9IG9wdC51cmwuaW5jbHVkZXMoJz8nKSA/ICcmJyA6ICc/JzsKICAgICAgb3B0LnVybCA9IGAke29wdC51cmx9JHthcmdQYXJhbX1fcmVwbGFjZT10cnVlYDsKICAgICAgZGVsZXRlIG9wdC5yZXBsYWNlOwogICAgfQogICAgdHJ5IHsKICAgICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ3JlcXVlc3QnLCB7CiAgICAgICAgb3B0LAogICAgICAgIHR5cGU6IHRoaXMudHlwZQogICAgICB9KTsKCiAgICAgIC8vIEFsbG93IHRvIHByb2Nlc3MgcmVzcG9uc2UgaW5kZXBlbmRlbnRseSBmcm9tIHRoZSByZWxhdGVkIG1vZGVscwogICAgICB0aGlzLnByb2Nlc3NTYXZlUmVzcG9uc2UocmVzKTsKCiAgICAgIC8vIFN0ZXZlIHNvbWV0aW1lcyByZXR1cm5zIFRhYmxlIHJlc3BvbnNlcyBpbnN0ZWFkIG9mIHRoZSByZXNvdXJjZSB5b3UganVzdCBzYXZlZC4uIGlnbm9yZQogICAgICBpZiAocmVzICYmIHJlcy5raW5kICE9PSAnVGFibGUnKSB7CiAgICAgICAgYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ2xvYWQnLCB7CiAgICAgICAgICBkYXRhOiByZXMsCiAgICAgICAgICBleGlzdGluZzogZm9yTmV3ID8gdGhpcyA6IHVuZGVmaW5lZAogICAgICAgIH0pOwogICAgICB9CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgJiYgdGhpcy5pZCAmJiAoZSA9PT0gbnVsbCB8fCBlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBlLl9zdGF0dXMpID09PSA0MDkpIHsKICAgICAgICAvLyBJZiB0aGVyZSdzIGEgY29uZmxpY3QsIHRyeSB0byBsb2FkIHRoZSBuZXcgdmVyc2lvbgogICAgICAgIGF3YWl0IHRoaXMuJGRpc3BhdGNoKCdmaW5kJywgewogICAgICAgICAgdHlwZTogdGhpcy50eXBlLAogICAgICAgICAgaWQ6IHRoaXMuaWQsCiAgICAgICAgICBvcHQ6IHsKICAgICAgICAgICAgZm9yY2U6IHRydWUKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZSk7CiAgICB9CiAgICByZXR1cm4gdGhpczsKICB9CiAgcmVtb3ZlKCkgewogICAgcmV0dXJuIHRoaXMuX3JlbW92ZSguLi5hcmd1bWVudHMpOwogIH0KICBhc3luYyBfcmVtb3ZlKG9wdCA9IHt9KSB7CiAgICBpZiAoIW9wdC51cmwpIHsKICAgICAgb3B0LnVybCA9IHRoaXMubGlua0Zvcignc2VsZicpOwogICAgfQogICAgb3B0Lm1ldGhvZCA9ICdkZWxldGUnOwogICAgY29uc3QgcmVzID0gYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ3JlcXVlc3QnLCB7CiAgICAgIG9wdCwKICAgICAgdHlwZTogdGhpcy50eXBlCiAgICB9KTsKICAgIGlmICgocmVzID09PSBudWxsIHx8IHJlcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogcmVzLl9zdGF0dXMpID09PSAyMDQpIHsKICAgICAgLy8gSWYgdGhlcmUncyBubyBib2R5LCBhc3N1bWUgdGhlIHJlc291cmNlIHdhcyBpbW1lZGlhdGVseSBkZWxldGVkCiAgICAgIC8vIGFuZCBkcm9wIGl0IGZyb20gdGhlIHN0b3JlIGFzIGlmIGEgcmVtb3ZlIGV2ZW50IGhhcHBlbmVkLgogICAgICBhd2FpdCB0aGlzLiRkaXNwYXRjaCgnd3MucmVzb3VyY2UucmVtb3ZlJywgewogICAgICAgIGRhdGE6IHRoaXMKICAgICAgfSk7CiAgICB9CiAgfQoKICAvLyAtLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCiAgY3VycmVudFJvdXRlKCkgewogICAgaWYgKHByb2Nlc3Muc2VydmVyKSB7CiAgICAgIHJldHVybiB0aGlzLiRyb290U3RhdGUuJHJvdXRlOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHdpbmRvdy4kbnV4dC4kcm91dGU7CiAgICB9CiAgfQogIGN1cnJlbnRSb3V0ZXIoKSB7CiAgICBpZiAocHJvY2Vzcy5zZXJ2ZXIpIHsKICAgICAgcmV0dXJuIHRoaXMuJHJvb3RTdGF0ZS4kcm91dGVyOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHdpbmRvdy4kbnV4dC4kcm91dGVyOwogICAgfQogIH0KICBnZXQgbGlzdExvY2F0aW9uKCkgewogICAgcmV0dXJuIHsKICAgICAgbmFtZTogYGMtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlYCwKICAgICAgcGFyYW1zOiB7CiAgICAgICAgcHJvZHVjdDogdGhpcy4kcm9vdEdldHRlcnNbJ3Byb2R1Y3RJZCddLAogICAgICAgIGNsdXN0ZXI6IHRoaXMuJHJvb3RHZXR0ZXJzWydjbHVzdGVySWQnXSwKICAgICAgICByZXNvdXJjZTogdGhpcy50eXBlCiAgICAgIH0KICAgIH07CiAgfQogIGdldCBfZGV0YWlsTG9jYXRpb24oKSB7CiAgICB2YXIgX3RoaXMkaWQsIF9zY2hlbWEkYXR0cmlidXRlcywgX3RoaXMkbWV0YWRhdGE3OwogICAgY29uc3Qgc2NoZW1hID0gdGhpcy4kZ2V0dGVyc1snc2NoZW1hRm9yJ10odGhpcy50eXBlKTsKICAgIGNvbnN0IGlkID0gKF90aGlzJGlkID0gdGhpcy5pZCkgPT09IG51bGwgfHwgX3RoaXMkaWQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGlkLnJlcGxhY2UoLy4qXC8vLCAnJyk7CiAgICByZXR1cm4gewogICAgICBuYW1lOiBgYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2Uke3NjaGVtYSAhPT0gbnVsbCAmJiBzY2hlbWEgIT09IHZvaWQgMCAmJiAoX3NjaGVtYSRhdHRyaWJ1dGVzID0gc2NoZW1hLmF0dHJpYnV0ZXMpICE9PSBudWxsICYmIF9zY2hlbWEkYXR0cmlidXRlcyAhPT0gdm9pZCAwICYmIF9zY2hlbWEkYXR0cmlidXRlcy5uYW1lc3BhY2VkID8gJy1uYW1lc3BhY2UnIDogJyd9LWlkYCwKICAgICAgcGFyYW1zOiB7CiAgICAgICAgcHJvZHVjdDogdGhpcy4kcm9vdEdldHRlcnNbJ3Byb2R1Y3RJZCddLAogICAgICAgIGNsdXN0ZXI6IHRoaXMuJHJvb3RHZXR0ZXJzWydjbHVzdGVySWQnXSwKICAgICAgICByZXNvdXJjZTogdGhpcy50eXBlLAogICAgICAgIG5hbWVzcGFjZTogKF90aGlzJG1ldGFkYXRhNyA9IHRoaXMubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJG1ldGFkYXRhNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkbWV0YWRhdGE3Lm5hbWVzcGFjZSwKICAgICAgICBpZAogICAgICB9CiAgICB9OwogIH0KICBnZXQgZGV0YWlsTG9jYXRpb24oKSB7CiAgICByZXR1cm4gdGhpcy5fZGV0YWlsTG9jYXRpb247CiAgfQogIGdvVG9EZXRhaWwoKSB7CiAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKHRoaXMuZGV0YWlsTG9jYXRpb24pOwogIH0KICBnb1RvQ2xvbmUobW9yZVF1ZXJ5ID0ge30pIHsKICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5kZXRhaWxMb2NhdGlvbjsKICAgIGxvY2F0aW9uLnF1ZXJ5ID0gewogICAgICAuLi5sb2NhdGlvbi5xdWVyeSwKICAgICAgW01PREVdOiBfQ0xPTkUsCiAgICAgIFtBU106IF9VTkZMQUcsCiAgICAgIC4uLm1vcmVRdWVyeQogICAgfTsKICAgIHRoaXMuY3VycmVudFJvdXRlcigpLnB1c2gobG9jYXRpb24pOwogIH0KICBnb1RvRWRpdChtb3JlUXVlcnkgPSB7fSkgewogICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmRldGFpbExvY2F0aW9uOwogICAgbG9jYXRpb24ucXVlcnkgPSB7CiAgICAgIC4uLmxvY2F0aW9uLnF1ZXJ5LAogICAgICBbTU9ERV06IF9FRElULAogICAgICBbQVNdOiBfVU5GTEFHLAogICAgICAuLi5tb3JlUXVlcnkKICAgIH07CiAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGxvY2F0aW9uKTsKICB9CiAgZ29Ub1ZpZXdDb25maWcobW9yZVF1ZXJ5ID0ge30pIHsKICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5kZXRhaWxMb2NhdGlvbjsKICAgIGxvY2F0aW9uLnF1ZXJ5ID0gewogICAgICAuLi5sb2NhdGlvbi5xdWVyeSwKICAgICAgW01PREVdOiBfVklFVywKICAgICAgW0FTXTogX0NPTkZJRywKICAgICAgLi4ubW9yZVF1ZXJ5CiAgICB9OwogICAgdGhpcy5jdXJyZW50Um91dGVyKCkucHVzaChsb2NhdGlvbik7CiAgfQogIGdvVG9FZGl0WWFtbCgpIHsKICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5kZXRhaWxMb2NhdGlvbjsKICAgIGxvY2F0aW9uLnF1ZXJ5ID0gewogICAgICAuLi5sb2NhdGlvbi5xdWVyeSwKICAgICAgW01PREVdOiBfRURJVCwKICAgICAgW0FTXTogX1lBTUwKICAgIH07CiAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGxvY2F0aW9uKTsKICB9CiAgZ29Ub1ZpZXdZYW1sKCkgewogICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmRldGFpbExvY2F0aW9uOwogICAgbG9jYXRpb24ucXVlcnkgPSB7CiAgICAgIC4uLmxvY2F0aW9uLnF1ZXJ5LAogICAgICBbTU9ERV06IF9WSUVXLAogICAgICBbQVNdOiBfWUFNTAogICAgfTsKICAgIHRoaXMuY3VycmVudFJvdXRlcigpLnB1c2gobG9jYXRpb24pOwogIH0KICBjbG9uZVlhbWwobW9yZVF1ZXJ5ID0ge30pIHsKICAgIGNvbnN0IGxvY2F0aW9uID0gdGhpcy5kZXRhaWxMb2NhdGlvbjsKICAgIGxvY2F0aW9uLnF1ZXJ5ID0gewogICAgICAuLi5sb2NhdGlvbi5xdWVyeSwKICAgICAgW01PREVdOiBfQ0xPTkUsCiAgICAgIFtBU106IF9ZQU1MLAogICAgICAuLi5tb3JlUXVlcnkKICAgIH07CiAgICB0aGlzLmN1cnJlbnRSb3V0ZXIoKS5wdXNoKGxvY2F0aW9uKTsKICB9CiAgYXN5bmMgZG93bmxvYWQoKSB7CiAgICBjb25zdCB2YWx1ZSA9IGF3YWl0IHRoaXMuZm9sbG93TGluaygndmlldycsIHsKICAgICAgaGVhZGVyczogewogICAgICAgIGFjY2VwdDogJ2FwcGxpY2F0aW9uL3lhbWwnCiAgICAgIH0KICAgIH0pOwogICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMuJGRpc3BhdGNoKCdjbGVhbkZvckRvd25sb2FkJywgdmFsdWUuZGF0YSk7CiAgICBkb3dubG9hZEZpbGUoYCR7dGhpcy5uYW1lRGlzcGxheX0ueWFtbGAsIGRhdGEsICdhcHBsaWNhdGlvbi95YW1sJyk7CiAgfQogIGFzeW5jIGRvd25sb2FkQnVsayhpdGVtcykgewogICAgY29uc3QgZmlsZXMgPSB7fTsKICAgIGNvbnN0IG5hbWVzID0gW107CiAgICBmb3IgKGNvbnN0IGl0ZW0gb2YgaXRlbXMpIHsKICAgICAgbGV0IG5hbWUgPSBgJHtpdGVtLm5hbWVEaXNwbGF5fS55YW1sYDsKICAgICAgbGV0IGkgPSAyOwogICAgICB3aGlsZSAobmFtZXMuaW5jbHVkZXMobmFtZSkpIHsKICAgICAgICBuYW1lID0gYCR7aXRlbS5uYW1lRGlzcGxheX1fJHtpKyt9LnlhbWxgOwogICAgICB9CiAgICAgIG5hbWVzLnB1c2gobmFtZSk7CiAgICB9CiAgICBhd2FpdCBlYWNoTGltaXQoaXRlbXMsIDEwLCAoaXRlbSwgaWR4KSA9PiB7CiAgICAgIHJldHVybiBpdGVtLmZvbGxvd0xpbmsoJ3ZpZXcnLCB7CiAgICAgICAgaGVhZGVyczogewogICAgICAgICAgYWNjZXB0OiAnYXBwbGljYXRpb24veWFtbCcKICAgICAgICB9CiAgICAgIH0pLnRoZW4oYXN5bmMgZGF0YSA9PiB7CiAgICAgICAgY29uc3QgeWFtbCA9IGRhdGEuZGF0YSB8fCBkYXRhOwogICAgICAgIGNvbnN0IGNsZWFuZWRZYW1sID0gYXdhaXQgdGhpcy4kZGlzcGF0Y2goJ2NsZWFuRm9yRG93bmxvYWQnLCB5YW1sKTsKICAgICAgICBmaWxlc1tgcmVzb3VyY2VzLyR7bmFtZXNbaWR4XX1gXSA9IGNsZWFuZWRZYW1sOwogICAgICB9KTsKICAgIH0pOwogICAgY29uc3QgemlwID0gYXdhaXQgZ2VuZXJhdGVaaXAoZmlsZXMpOwogICAgZG93bmxvYWRGaWxlKCdyZXNvdXJjZXMuemlwJywgemlwLCAnYXBwbGljYXRpb24vemlwJyk7CiAgfQogIHZpZXdJbkFwaSgpIHsKICAgIHdpbmRvdy5vcGVuKHRoaXMubGlua3Muc2VsZiwgJ19ibGFuaycpOwogIH0KICBwcm9tcHRSZW1vdmUocmVzb3VyY2VzKSB7CiAgICBpZiAoIXJlc291cmNlcykgewogICAgICByZXNvdXJjZXMgPSB0aGlzOwogICAgfQogICAgdGhpcy4kZGlzcGF0Y2goJ3Byb21wdFJlbW92ZScsIHJlc291cmNlcyk7CiAgfQogIGdldCBjb25maXJtUmVtb3ZlKCkgewogICAgcmV0dXJuIGZhbHNlOwogIH0KICBhcHBseURlZmF1bHRzKCkge30KICBnZXQgdXJsRnJvbUF0dHJzKCkgewogICAgY29uc3Qgc2NoZW1hID0gdGhpcy4kZ2V0dGVyc1snc2NoZW1hRm9yJ10odGhpcy50eXBlKTsKICAgIGNvbnN0IHsKICAgICAgbWV0YWRhdGE6IHsKICAgICAgICBuYW1lc3BhY2UgPSAnZGVmYXVsdCcKICAgICAgfQogICAgfSA9IHRoaXM7CiAgICBsZXQgdXJsID0gc2NoZW1hLmxpbmtzLmNvbGxlY3Rpb247CiAgICBjb25zdCBhdHRyaWJ1dGVzID0gc2NoZW1hID09PSBudWxsIHx8IHNjaGVtYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2NoZW1hLmF0dHJpYnV0ZXM7CiAgICBpZiAoIWF0dHJpYnV0ZXMpIHsKICAgICAgdGhyb3cgbmV3IEVycm9yKCdBdHRyaWJ1dGVzIG11c3QgYmUgcHJlc2VudCBvbiB0aGUgc2NoZW1hJyk7CiAgICB9CiAgICBjb25zdCB7CiAgICAgIGdyb3VwLAogICAgICByZXNvdXJjZQogICAgfSA9IGF0dHJpYnV0ZXM7CiAgICB1cmwgPSBgJHt1cmwuc2xpY2UoMCwgdXJsLmluZGV4T2YoJy92MScpKX0vYXBpcy8ke2dyb3VwfS9uYW1lc3BhY2VzLyR7bmFtZXNwYWNlfS8ke3Jlc291cmNlfWA7CiAgICByZXR1cm4gdXJsOwogIH0KCiAgLy8gY29udmVydCB5YW1sIHRvIG9iamVjdCwgY2xlYW4gZm9yIG5ldyBpZiBjcmVhdGluZy9jbG9uaW5nCiAgLy8gbWFwIF90eXBlIHRvIHR5cGUKICBjbGVhbllhbWwoeWFtbCwgbW9kZSA9ICdlZGl0JykgewogICAgdHJ5IHsKICAgICAgY29uc3Qgb2JqID0ganN5YW1sLmxvYWQoeWFtbCk7CiAgICAgIGlmIChtb2RlICE9PSAnZWRpdCcpIHsKICAgICAgICB0aGlzLiRkaXNwYXRjaChgY2xlYW5Gb3JOZXdgLCBvYmopOwogICAgICB9CiAgICAgIGlmIChvYmouX3R5cGUpIHsKICAgICAgICBvYmoudHlwZSA9IG9iai5fdHlwZTsKICAgICAgICBkZWxldGUgb2JqLl90eXBlOwogICAgICB9CiAgICAgIGNvbnN0IG91dCA9IGpzeWFtbC5kdW1wKG9iaiwgewogICAgICAgIHNraXBJbnZhbGlkOiB0cnVlCiAgICAgIH0pOwogICAgICByZXR1cm4gb3V0OwogICAgfSBjYXRjaCAoZSkgewogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9CiAgY2xlYW5Gb3JOZXcoKSB7CiAgICB0aGlzLiRkaXNwYXRjaChgY2xlYW5Gb3JOZXdgLCB0aGlzKTsKICB9CiAgY2xlYW5Gb3JEaWZmKCkgewogICAgdGhpcy4kZGlzcGF0Y2goYGNsZWFuRm9yRGlmZmAsIHRoaXMudG9KU09OKCkpOwogIH0KICB5YW1sRm9yU2F2ZSh5YW1sKSB7CiAgICB0cnkgewogICAgICBjb25zdCBvYmogPSBqc3lhbWwubG9hZCh5YW1sKTsKICAgICAgaWYgKG9iaikgewogICAgICAgIGlmICh0aGlzLl90eXBlKSB7CiAgICAgICAgICBvYmouX3R5cGUgPSBvYmoudHlwZTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIGpzeWFtbC5kdW1wKG9iaik7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQogIGFzeW5jIHNhdmVZYW1sKHlhbWwpIHsKICAgIGF3YWl0IHRoaXMuX3NhdmVZYW1sKHlhbWwpOwogIH0KICBhc3luYyBfc2F2ZVlhbWwoeWFtbCkgewogICAgdmFyIF90aGlzJHNjaGVtYTM7CiAgICAvKiBNdWx0aXBhcnQgc3VwcG9ydCwgYnV0IG5lZWQgdG8ga25vdyB0aGUgcmlnaHQgY2x1c3RlciBhbmQgd29yayBmb3IgbWFuYWdlbWVudCBzdG9yZQogICAgICBhbmQgImFwcGx5IiBzZWVtcyB0byBvbmx5IHdvcmsgZm9yIGNyZWF0ZSwgbm90IHVwZGF0ZS4KICAgICBjb25zdCBhcnkgPSBqc3lhbWwubG9hZEFsbCh5YW1sKTsgLy8gd2lsbCB0aHJvdyBvbiBpbnZhbGlkIHlhbWwsIGFuZCByZXR1cm4gb25lIG9yIG1vcmUgZG9jdW1lbnRzICh1c3VhbGx5IG9uZSkKICAgICBpZiAoIGFyeS5sZW5ndGggPiAxICkgewogICAgICBhd2FpdCB0aGlzLiRyb290R2V0dGVyc1snY3VycmVudENsdXN0ZXInXS5kb0FjdGlvbignYXBwbHknLCB7CiAgICAgICAgeWFtbCwKICAgICAgICBkZWZhdWx0TmFtZXNwYWNlOiB0aGlzLm1ldGFkYXRhLm5hbWVzcGFjZSwKICAgICAgfSk7CiAgICB9CiAgICAgY29uc3QgcGFyc2VkID0gYXJ5WzBdOwogICAgKi8KCiAgICBjb25zdCBwYXJzZWQgPSBqc3lhbWwubG9hZCh5YW1sKTsgLy8gd2lsbCB0aHJvdyBvbiBpbnZhbGlkIHlhbWwsIGFuZCByZXR1cm4gb25lIG9yIG1vcmUgZG9jdW1lbnRzICh1c3VhbGx5IG9uZSkKCiAgICBpZiAoKF90aGlzJHNjaGVtYTMgPSB0aGlzLnNjaGVtYSkgIT09IG51bGwgJiYgX3RoaXMkc2NoZW1hMyAhPT0gdm9pZCAwICYmIChfdGhpcyRzY2hlbWEzID0gX3RoaXMkc2NoZW1hMy5hdHRyaWJ1dGVzKSAhPT0gbnVsbCAmJiBfdGhpcyRzY2hlbWEzICE9PSB2b2lkIDAgJiYgX3RoaXMkc2NoZW1hMy5uYW1lc3BhY2VkICYmICFwYXJzZWQubWV0YWRhdGEubmFtZXNwYWNlKSB7CiAgICAgIGNvbnN0IGVyciA9IHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXSgncmVzb3VyY2VZYW1sLmVycm9ycy5uYW1lc3BhY2VSZXF1aXJlZCcpOwogICAgICB0aHJvdyBlcnI7CiAgICB9CiAgICBsZXQgcmVzOwogICAgY29uc3QgaXNDcmVhdGUgPSAhdGhpcy5pZDsKICAgIGNvbnN0IGhlYWRlcnMgPSB7CiAgICAgICdjb250ZW50LXR5cGUnOiAnYXBwbGljYXRpb24veWFtbCcsCiAgICAgIGFjY2VwdDogJ2FwcGxpY2F0aW9uL2pzb24nCiAgICB9OwogICAgaWYgKGlzQ3JlYXRlKSB7CiAgICAgIHJlcyA9IGF3YWl0IHRoaXMuc2NoZW1hLmZvbGxvd0xpbmsoJ2NvbGxlY3Rpb24nLCB7CiAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgaGVhZGVycywKICAgICAgICBkYXRhOiB5YW1sCiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgcmVzID0gYXdhaXQgdGhpcy5mb2xsb3dMaW5rKCd1cGRhdGUnLCB7CiAgICAgICAgbWV0aG9kOiAnUFVUJywKICAgICAgICBoZWFkZXJzLAogICAgICAgIGRhdGE6IHlhbWwKICAgICAgfSk7CiAgICB9CiAgICBhd2FpdCB0aGlzLiRkaXNwYXRjaChgbG9hZGAsIHsKICAgICAgZGF0YTogcmVzLAogICAgICBleGlzdGluZzogaXNDcmVhdGUgPyB0aGlzIDogdW5kZWZpbmVkCiAgICB9KTsKICAgIGlmICh0aGlzLmlzU3Bvb2ZlZCkgewogICAgICBhd2FpdCB0aGlzLiRkaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgICAgIHR5cGU6IHRoaXMudHlwZSwKICAgICAgICBvcHQ6IHsKICAgICAgICAgIGZvcmNlOiB0cnVlCiAgICAgICAgfQogICAgICB9LCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgIH0KICB9CiAgZ2V0IG1vZGVsVmFsaWRhdGlvblJ1bGVzKCkgewogICAgY29uc3QgcnVsZXMgPSBbXTsKICAgIGNvbnN0IGN1c3RvbVZhbGlkYXRpb25SdWxlc2V0cyA9IHRoaXMgPT09IG51bGwgfHwgdGhpcyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdGhpcy5jdXN0b21WYWxpZGF0aW9uUnVsZXMuZmlsdGVyKHJ1bGUgPT4gISFydWxlLnZhbGlkYXRvcnMgfHwgISFydWxlLnJlcXVpcmVkKS5tYXAocnVsZSA9PiB7CiAgICAgIGNvbnN0IGZvcm1SdWxlcyA9IGZvcm1SdWxlc0dlbmVyYXRvcih0aGlzLnQsIHsKICAgICAgICBkaXNwbGF5S2V5OiBydWxlICE9PSBudWxsICYmIHJ1bGUgIT09IHZvaWQgMCAmJiBydWxlLnRyYW5zbGF0aW9uS2V5ID8gdGhpcy50KHJ1bGUudHJhbnNsYXRpb25LZXkpIDogJ1ZhbHVlJwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBwYXRoOiBydWxlLnBhdGgsCiAgICAgICAgcnVsZXM6IFsuLi4ocnVsZS52YWxpZGF0b3JzIHx8IFtdKSwgLi4uKHJ1bGUucmVxdWlyZWQgPyBbJ3JlcXVpcmVkJ10gOiBbXSksIC4uLihbJ2Ruc0xhYmVsJywgJ2Ruc0xhYmVsUmVzdHJpY3RlZCcsICdob3N0bmFtZSddLmluY2x1ZGVzKHJ1bGUudHlwZSkgPyBbcnVsZS50eXBlXSA6IFtdKV0ubWFwKHJ1bGUgPT4gewogICAgICAgICAgaWYgKHJ1bGUuaW5jbHVkZXMoJzonKSkgewogICAgICAgICAgICBjb25zdCBbcnVsZUtleSwgcnVsZUFyZ10gPSBydWxlLnNwbGl0KCc6Jyk7CiAgICAgICAgICAgIHJldHVybiBmb3JtUnVsZXNbcnVsZUtleV0ocnVsZUFyZyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gZm9ybVJ1bGVzW3J1bGVdOwogICAgICAgIH0pLmZpbHRlcihydWxlID0+ICEhcnVsZSkKICAgICAgfTsKICAgIH0pLmZpbHRlcihydWxlc2V0ID0+IHJ1bGVzZXQucnVsZXMubGVuZ3RoID4gMCk7CiAgICBydWxlcy5wdXNoKC4uLmN1c3RvbVZhbGlkYXRpb25SdWxlc2V0cyk7CiAgICByZXR1cm4gcnVsZXM7CiAgfQogIGN1c3RvbVZhbGlkYXRpb25FcnJvcnMoZGF0YSwgaWdub3JlUGF0aHMgPSBbXSkgewogICAgY29uc3QgZXJyb3JzID0gW107CiAgICBsZXQgewogICAgICBjdXN0b21WYWxpZGF0aW9uUnVsZXMKICAgIH0gPSB0aGlzOwogICAgaWYgKCFpc0VtcHR5KGN1c3RvbVZhbGlkYXRpb25SdWxlcykpIHsKICAgICAgaWYgKGlzRnVuY3Rpb24oY3VzdG9tVmFsaWRhdGlvblJ1bGVzKSkgewogICAgICAgIGN1c3RvbVZhbGlkYXRpb25SdWxlcyA9IGN1c3RvbVZhbGlkYXRpb25SdWxlcygpOwogICAgICB9CiAgICAgIGN1c3RvbVZhbGlkYXRpb25SdWxlcy5maWx0ZXIocnVsZSA9PiAhaWdub3JlUGF0aHMuaW5jbHVkZXMocnVsZS5wYXRoKSkuZm9yRWFjaChydWxlID0+IHsKICAgICAgICBjb25zdCB7CiAgICAgICAgICBwYXRoLAogICAgICAgICAgcmVxdWlyZWRJZjogcmVxdWlyZWRJZlBhdGgsCiAgICAgICAgICB2YWxpZGF0b3JzID0gW10sCiAgICAgICAgICB0eXBlOiBmaWVsZFR5cGUKICAgICAgICB9ID0gcnVsZTsKICAgICAgICBsZXQgcGF0aFZhbHVlID0gZ2V0KGRhdGEsIHBhdGgpOwogICAgICAgIGNvbnN0IHBhcnNlZFJ1bGVzID0gY29tcGFjdCh2YWxpZGF0b3JzIHx8IFtdKTsKICAgICAgICBsZXQgZGlzcGxheUtleSA9IHBhdGg7CiAgICAgICAgaWYgKHJ1bGUudHJhbnNsYXRpb25LZXkgJiYgdGhpcy4kcm9vdEdldHRlcnNbJ2kxOG4vZXhpc3RzJ10ocnVsZS50cmFuc2xhdGlvbktleSkpIHsKICAgICAgICAgIGRpc3BsYXlLZXkgPSB0aGlzLnQocnVsZS50cmFuc2xhdGlvbktleSk7CiAgICAgICAgfQogICAgICAgIGlmIChpc1N0cmluZyhwYXRoVmFsdWUpKSB7CiAgICAgICAgICBwYXRoVmFsdWUgPSBwYXRoVmFsdWUudHJpbSgpOwogICAgICAgIH0KICAgICAgICBpZiAocmVxdWlyZWRJZlBhdGgpIHsKICAgICAgICAgIGNvbnN0IHJlcUlmVmFsID0gZ2V0KGRhdGEsIHJlcXVpcmVkSWZQYXRoKTsKICAgICAgICAgIGlmICghaXNFbXB0eShyZXFJZlZhbCkgJiYgaXNFbXB0eShwYXRoVmFsdWUpICYmIHBhdGhWYWx1ZSAhPT0gMCkgewogICAgICAgICAgICBlcnJvcnMucHVzaCh0aGlzLnQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7CiAgICAgICAgICAgICAga2V5OiBkaXNwbGF5S2V5CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgdmFsaWRhdGVMZW5ndGgocGF0aFZhbHVlLCBydWxlLCBkaXNwbGF5S2V5LCB0aGlzLiRyb290R2V0dGVycywgZXJyb3JzKTsKICAgICAgICB2YWxpZGF0ZUNoYXJzKHBhdGhWYWx1ZSwgcnVsZSwgZGlzcGxheUtleSwgdGhpcy4kcm9vdEdldHRlcnMsIGVycm9ycyk7CiAgICAgICAgaWYgKCFpc0VtcHR5KHBhdGhWYWx1ZSkgJiYgRE5TX0xJS0VfVFlQRVMuaW5jbHVkZXMoZmllbGRUeXBlKSkgewogICAgICAgICAgLy8gRE5TIHR5cGVzIHNob3VsZCBiZSBsb3dlcmNhc2UKICAgICAgICAgIGNvbnN0IHRvbG93ZXIgPSAocGF0aFZhbHVlIHx8ICcnKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgaWYgKHRvbG93ZXIgIT09IHBhdGhWYWx1ZSkgewogICAgICAgICAgICBwYXRoVmFsdWUgPSB0b2xvd2VyOwogICAgICAgICAgICBWdWUuc2V0KGRhdGEsIHBhdGgsIHBhdGhWYWx1ZSk7CiAgICAgICAgICB9CiAgICAgICAgICBlcnJvcnMucHVzaCguLi52YWxpZGF0ZURuc0xpa2VUeXBlcyhwYXRoVmFsdWUsIGZpZWxkVHlwZSwgZGlzcGxheUtleSwgdGhpcy4kcm9vdEdldHRlcnMsIGVycm9ycykpOwogICAgICAgIH0KICAgICAgICBwYXJzZWRSdWxlcy5mb3JFYWNoKHZhbGlkYXRvciA9PiB7CiAgICAgICAgICBjb25zdCB2YWxpZGF0b3JBbmRBcmdzID0gdmFsaWRhdG9yLnNwbGl0KCc6Jyk7CiAgICAgICAgICBjb25zdCB2YWxpZGF0b3JOYW1lID0gdmFsaWRhdG9yQW5kQXJncy5zbGljZSgwLCAxKTsKICAgICAgICAgIGNvbnN0IHZhbGlkYXRvckFyZ3MgPSB2YWxpZGF0b3JBbmRBcmdzLnNsaWNlKDEpIHx8IG51bGw7CiAgICAgICAgICBjb25zdCB2YWxpZGF0b3JFeGlzdHMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwoQ3VzdG9tVmFsaWRhdG9ycywgdmFsaWRhdG9yTmFtZSk7CiAgICAgICAgICBpZiAoIWlzRW1wdHkodmFsaWRhdG9yTmFtZSkgJiYgdmFsaWRhdG9yRXhpc3RzKSB7CiAgICAgICAgICAgIEN1c3RvbVZhbGlkYXRvcnNbdmFsaWRhdG9yTmFtZV0ocGF0aFZhbHVlLCB0aGlzLiRyb290R2V0dGVycywgZXJyb3JzLCB2YWxpZGF0b3JBcmdzLCBkaXNwbGF5S2V5LCBkYXRhKTsKICAgICAgICAgIH0gZWxzZSBpZiAoIWlzRW1wdHkodmFsaWRhdG9yTmFtZSkgJiYgIXZhbGlkYXRvckV4aXN0cykgewogICAgICAgICAgICB2YXIgX3RoaXMkJHJvb3RTdGF0ZSQkcGx1OwogICAgICAgICAgICAvLyBDaGVjayBpZiB2YWxpZGF0b3IgaXMgaW1wb3J0ZWQgZnJvbSBwbHVnaW4KICAgICAgICAgICAgY29uc3QgcGx1Z2luVmFsaWRhdG9yID0gKF90aGlzJCRyb290U3RhdGUkJHBsdSA9IHRoaXMuJHJvb3RTdGF0ZS4kcGx1Z2luKSA9PT0gbnVsbCB8fCBfdGhpcyQkcm9vdFN0YXRlJCRwbHUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJCRyb290U3RhdGUkJHBsdS5nZXRWYWxpZGF0b3IodmFsaWRhdG9yTmFtZSk7CiAgICAgICAgICAgIGlmIChwbHVnaW5WYWxpZGF0b3IpIHsKICAgICAgICAgICAgICBwbHVnaW5WYWxpZGF0b3IocGF0aFZhbHVlLCB0aGlzLiRyb290R2V0dGVycywgZXJyb3JzLCB2YWxpZGF0b3JBcmdzLCBkaXNwbGF5S2V5LCBkYXRhKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgICAgICAgICBjb25zb2xlLndhcm4odGhpcy50KCd2YWxpZGF0aW9uLmN1c3RvbS5taXNzaW5nJywgewogICAgICAgICAgICAgICAgdmFsaWRhdG9yTmFtZQogICAgICAgICAgICAgIH0pKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBlcnJvcnM7CiAgfQogIHZhbGlkYXRpb25FcnJvcnMoZGF0YSA9IHRoaXMsIGlnbm9yZUZpZWxkcykgewogICAgY29uc3QgZXJyb3JzID0gW107CiAgICBjb25zdCB7CiAgICAgIHR5cGU6IG9yaWdpbmFsVHlwZSwKICAgICAgc2NoZW1hCiAgICB9ID0gZGF0YTsKICAgIGNvbnN0IHR5cGUgPSBub3JtYWxpemVUeXBlKG9yaWdpbmFsVHlwZSk7CiAgICBpZiAoIW9yaWdpbmFsVHlwZSkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgY29uc29sZS53YXJuKHRoaXMudCgndmFsaWRhdGlvbi5ub1R5cGUnKSwgZGF0YSk7CiAgICAgIHJldHVybiBlcnJvcnM7CiAgICB9CiAgICBpZiAoIXNjaGVtYSkgewogICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUKICAgICAgLy8gY29uc29sZS53YXJuKHRoaXMudCgndmFsaWRhdGlvbi5ub1NjaGVtYScpLCBvcmlnaW5hbFR5cGUsIGRhdGEpOwoKICAgICAgcmV0dXJuIGVycm9yczsKICAgIH0KICAgIGNvbnN0IGZpZWxkcyA9IHNjaGVtYS5yZXNvdXJjZUZpZWxkcyB8fCB7fTsKICAgIGNvbnN0IGtleXMgPSBPYmplY3Qua2V5cyhmaWVsZHMpOwogICAgbGV0IGZpZWxkLCBrZXksIHZhbCwgZGlzcGxheUtleTsKICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICB2YXIgX2ZpZWxkOwogICAgICBjb25zdCBmaWVsZEVycm9ycyA9IFtdOwogICAgICBrZXkgPSBrZXlzW2ldOwogICAgICBmaWVsZCA9IGZpZWxkc1trZXldOwogICAgICB2YWwgPSBnZXQoZGF0YSwga2V5KTsKICAgICAgZGlzcGxheUtleSA9IGRpc3BsYXlLZXlGb3IodHlwZSwga2V5LCB0aGlzLiRyb290R2V0dGVycyk7CiAgICAgIGNvbnN0IGZpZWxkVHlwZSA9IChfZmllbGQgPSBmaWVsZCkgIT09IG51bGwgJiYgX2ZpZWxkICE9PSB2b2lkIDAgJiYgX2ZpZWxkLnR5cGUgPyBub3JtYWxpemVUeXBlKGZpZWxkLnR5cGUpIDogbnVsbDsKICAgICAgY29uc3QgdmFsSXNTdHJpbmcgPSBpc1N0cmluZyh2YWwpOwogICAgICBpZiAoaWdub3JlRmllbGRzICYmIGlnbm9yZUZpZWxkcy5pbmNsdWRlcyhrZXkpKSB7CiAgICAgICAgY29udGludWU7CiAgICAgIH0KICAgICAgaWYgKHZhbCA9PT0gdW5kZWZpbmVkKSB7CiAgICAgICAgdmFsID0gbnVsbDsKICAgICAgfQogICAgICBpZiAodmFsSXNTdHJpbmcpIHsKICAgICAgICBpZiAoZmllbGRUeXBlKSB7CiAgICAgICAgICBWdWUuc2V0KGRhdGEsIGtleSwgY29lcmNlU3RyaW5nVHlwZVRvU2NhbGFyVHlwZSh2YWwsIGZpZWxkVHlwZSkpOwogICAgICAgIH0KCiAgICAgICAgLy8gRW1wdHkgc3RyaW5ncyBvbiBudWxsYWJsZSBzdHJpbmcgZmllbGRzIC0+IG51bGwKICAgICAgICBpZiAoZmllbGQubnVsbGFibGUgJiYgdmFsLmxlbmd0aCA9PT0gMCAmJiBTVFJJTkdfTElLRV9UWVBFUy5pbmNsdWRlcyhmaWVsZFR5cGUpKSB7CiAgICAgICAgICB2YWwgPSBudWxsOwogICAgICAgICAgVnVlLnNldChkYXRhLCBrZXksIHZhbCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChmaWVsZFR5cGUgPT09ICdib29sZWFuJykgewogICAgICAgIHZhbGlkYXRlQm9vbGVhbih2YWwsIGZpZWxkLCBkaXNwbGF5S2V5LCB0aGlzLiRyb290R2V0dGVycywgZmllbGRFcnJvcnMpOwogICAgICB9IGVsc2UgewogICAgICAgIHZhbGlkYXRlTGVuZ3RoKHZhbCwgZmllbGQsIGRpc3BsYXlLZXksIHRoaXMuJHJvb3RHZXR0ZXJzLCBmaWVsZEVycm9ycyk7CiAgICAgICAgdmFsaWRhdGVDaGFycyh2YWwsIGZpZWxkLCBkaXNwbGF5S2V5LCB0aGlzLiRyb290R2V0dGVycywgZmllbGRFcnJvcnMpOwogICAgICB9CiAgICAgIGlmIChmaWVsZEVycm9ycy5sZW5ndGggPiAwKSB7CiAgICAgICAgZmllbGRFcnJvcnMucHVzaCh0aGlzLnQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7CiAgICAgICAgICBrZXk6IGRpc3BsYXlLZXkKICAgICAgICB9KSk7CiAgICAgICAgZXJyb3JzLnB1c2goLi4uZmllbGRFcnJvcnMpOwogICAgICAgIGNvbnRpbnVlOwogICAgICB9CgogICAgICAvLyBJRHMgY2xhaW0gdG8gYmUgdGhlc2UgYnV0IGFyZSBsaWVzLi4uCiAgICAgIGlmIChrZXkgIT09ICdpZCcgJiYgIWlzRW1wdHkodmFsKSAmJiBETlNfTElLRV9UWVBFUy5pbmNsdWRlcyhmaWVsZFR5cGUpKSB7CiAgICAgICAgLy8gRE5TIHR5cGVzIHNob3VsZCBiZSBsb3dlcmNhc2UKICAgICAgICBjb25zdCB0b2xvd2VyID0gKHZhbCB8fCAnJykudG9Mb3dlckNhc2UoKTsKICAgICAgICBpZiAodG9sb3dlciAhPT0gdmFsKSB7CiAgICAgICAgICB2YWwgPSB0b2xvd2VyOwogICAgICAgICAgVnVlLnNldChkYXRhLCBrZXksIHZhbCk7CiAgICAgICAgfQogICAgICAgIGZpZWxkRXJyb3JzLnB1c2goLi4udmFsaWRhdGVEbnNMaWtlVHlwZXModmFsLCBmaWVsZFR5cGUsIGRpc3BsYXlLZXksIHRoaXMuJHJvb3RHZXR0ZXJzLCBmaWVsZEVycm9ycykpOwogICAgICB9CiAgICAgIGVycm9ycy5wdXNoKC4uLmZpZWxkRXJyb3JzKTsKICAgIH0KICAgIHJldHVybiB1bmlxKFsuLi5lcnJvcnMsIC4uLnRoaXMuY3VzdG9tVmFsaWRhdGlvbkVycm9ycyhkYXRhKV0pOwogIH0KICBnZXQgb3duZXJzQnlUeXBlKCkgewogICAgdmFyIF90aGlzJG1ldGFkYXRhODsKICAgIGNvbnN0IG93bmVyUmVmZXJlbmNlcyA9ICgoX3RoaXMkbWV0YWRhdGE4ID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGE4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YTgub3duZXJSZWZlcmVuY2VzKSB8fCBbXTsKICAgIGNvbnN0IG93bmVyc0J5VHlwZSA9IHt9OwogICAgb3duZXJSZWZlcmVuY2VzLmZvckVhY2gob3duZXIgPT4gewogICAgICBpZiAoIW93bmVyc0J5VHlwZVtvd25lci5raW5kXSkgewogICAgICAgIG93bmVyc0J5VHlwZVtvd25lci5raW5kXSA9IFtvd25lcl07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgb3duZXJzQnlUeXBlW293bmVyLmtpbmRdLnB1c2gob3duZXIpOwogICAgICB9CiAgICB9KTsKICAgIHJldHVybiBvd25lcnNCeVR5cGU7CiAgfQogIGdldCBvd25lcnMoKSB7CiAgICBjb25zdCBvd25lcnMgPSBbXTsKICAgIGZvciAoY29uc3Qga2luZCBpbiB0aGlzLm93bmVyc0J5VHlwZSkgewogICAgICBjb25zdCBzY2hlbWEgPSB0aGlzLiRyb290R2V0dGVyc1snY2x1c3Rlci9zY2hlbWEnXShraW5kKTsKICAgICAgaWYgKHNjaGVtYSkgewogICAgICAgIGNvbnN0IHR5cGUgPSBzY2hlbWEuaWQ7CiAgICAgICAgY29uc3QgYWxsT2ZSZXNvdXJjZVR5cGUgPSB0aGlzLiRyb290R2V0dGVyc1snY2x1c3Rlci9hbGwnXSh0eXBlKTsKICAgICAgICB0aGlzLm93bmVyc0J5VHlwZVtraW5kXS5mb3JFYWNoKChyZXNvdXJjZSwgaWR4KSA9PiB7CiAgICAgICAgICBjb25zdCByZXNvdXJjZUluc3RhbmNlID0gYWxsT2ZSZXNvdXJjZVR5cGUuZmluZChyZXNvdXJjZUJ5VHlwZSA9PiB7CiAgICAgICAgICAgIHZhciBfcmVzb3VyY2VCeVR5cGUkbWV0YWQ7CiAgICAgICAgICAgIHJldHVybiAocmVzb3VyY2VCeVR5cGUgPT09IG51bGwgfHwgcmVzb3VyY2VCeVR5cGUgPT09IHZvaWQgMCB8fCAoX3Jlc291cmNlQnlUeXBlJG1ldGFkID0gcmVzb3VyY2VCeVR5cGUubWV0YWRhdGEpID09PSBudWxsIHx8IF9yZXNvdXJjZUJ5VHlwZSRtZXRhZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Jlc291cmNlQnlUeXBlJG1ldGFkLnVpZCkgPT09IHJlc291cmNlLnVpZDsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHJlc291cmNlSW5zdGFuY2UpIHsKICAgICAgICAgICAgb3duZXJzLnB1c2gocmVzb3VyY2VJbnN0YW5jZSk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBvd25lcnM7CiAgfQogIGdldCBkZXRhaWxzKCkgewogICAgcmV0dXJuIHRoaXMuX2RldGFpbHM7CiAgfQogIGdldCBfZGV0YWlscygpIHsKICAgIHZhciBfdGhpcyRvd25lcnM7CiAgICBjb25zdCBkZXRhaWxzID0gW107CiAgICBpZiAoKChfdGhpcyRvd25lcnMgPSB0aGlzLm93bmVycykgPT09IG51bGwgfHwgX3RoaXMkb3duZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRvd25lcnMubGVuZ3RoKSA+IDApIHsKICAgICAgZGV0YWlscy5wdXNoKHsKICAgICAgICBsYWJlbDogdGhpcy50KCdyZXNvdXJjZURldGFpbC5kZXRhaWxUb3Aub3duZXJSZWZlcmVuY2VzJywgewogICAgICAgICAgY291bnQ6IHRoaXMub3duZXJzLmxlbmd0aAogICAgICAgIH0pLAogICAgICAgIGZvcm1hdHRlcjogJ0xpc3RMaW5rRGV0YWlsJywKICAgICAgICBjb250ZW50OiB0aGlzLm93bmVycy5tYXAob3duZXIgPT4gKHsKICAgICAgICAgIGtleTogb3duZXIuaWQsCiAgICAgICAgICByb3c6IG93bmVyLAogICAgICAgICAgY29sOiB7fSwKICAgICAgICAgIHZhbHVlOiBvd25lci5tZXRhZGF0YS5uYW1lCiAgICAgICAgfSkpCiAgICAgIH0pOwogICAgfQogICAgaWYgKGdldCh0aGlzLCAnbWV0YWRhdGEuZGVsZXRpb25UaW1lc3RhbXAnKSkgewogICAgICBkZXRhaWxzLnB1c2goewogICAgICAgIGxhYmVsOiB0aGlzLnQoJ3Jlc291cmNlRGV0YWlsLmRldGFpbFRvcC5kZWxldGVkJyksCiAgICAgICAgZm9ybWF0dGVyOiAnTGl2ZURhdGUnLAogICAgICAgIGZvcm1hdHRlck9wdHM6IHsKICAgICAgICAgIGFkZFN1ZmZpeDogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgY29udGVudDogZ2V0KHRoaXMsICdtZXRhZGF0YS5kZWxldGlvblRpbWVzdGFtcCcpCiAgICAgIH0pOwogICAgfQogICAgcmV0dXJuIGRldGFpbHM7CiAgfQogIGdldCB0KCkgewogICAgcmV0dXJuIHRoaXMuJHJvb3RHZXR0ZXJzWydpMThuL3QnXTsKICB9CgogIC8vIFJldHVybnMgYXJyYXkgb2YgTU9ERUxTIHRoYXQgb3duIHRoaXMgcmVzb3VyY2UgKGFzeW5jLCBuZXR3b3JrIGNhbGwpCiAgZmluZE93bmVycygpIHsKICAgIHJldHVybiB0aGlzLl9nZXRSZWxhdGlvbnNoaXAoJ293bmVyJywgJ2Zyb20nKTsKICB9CgogIC8vIFJldHVybnMgYXJyYXkgb2Yge3R5cGUsIG5hbWVzcGFjZSwgaWR9IG9iamVjdHMgdGhhdCBvd24gdGhpcyByZXNvdXJjZSAoc3luYykKICBnZXRPd25lcnMoKSB7CiAgICByZXR1cm4gdGhpcy5fZ2V0UmVsYXRpb25zaGlwKCdvd25lcicsICdmcm9tJyk7CiAgfQogIGZpbmRPd25lZCgpIHsKICAgIHJldHVybiB0aGlzLl9maW5kUmVsYXRpb25zaGlwKCdvd25lcicsICd0bycpOwogIH0KICBfcmVsYXRpb25zaGlwc0ZvcihyZWwsIGRpcmVjdGlvbikgewogICAgdmFyIF90aGlzJG1ldGFkYXRhOTsKICAgIGNvbnN0IG91dCA9IHsKICAgICAgc2VsZWN0b3JzOiBbXSwKICAgICAgaWRzOiBbXQogICAgfTsKICAgIGlmICghKChfdGhpcyRtZXRhZGF0YTkgPSB0aGlzLm1ldGFkYXRhKSAhPT0gbnVsbCAmJiBfdGhpcyRtZXRhZGF0YTkgIT09IHZvaWQgMCAmJiAoX3RoaXMkbWV0YWRhdGE5ID0gX3RoaXMkbWV0YWRhdGE5LnJlbGF0aW9uc2hpcHMpICE9PSBudWxsICYmIF90aGlzJG1ldGFkYXRhOSAhPT0gdm9pZCAwICYmIF90aGlzJG1ldGFkYXRhOS5sZW5ndGgpKSB7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgICBmb3IgKGNvbnN0IHIgb2YgdGhpcy5tZXRhZGF0YS5yZWxhdGlvbnNoaXBzKSB7CiAgICAgIGlmIChyZWwgIT09ICdhbnknICYmIHIucmVsICE9PSByZWwpIHsKICAgICAgICBjb250aW51ZTsKICAgICAgfQogICAgICBpZiAoIXJbYCR7ZGlyZWN0aW9ufVR5cGVgXSkgewogICAgICAgIGNvbnRpbnVlOwogICAgICB9CiAgICAgIGlmIChyLnNlbGVjdG9yKSB7CiAgICAgICAgYWRkT2JqZWN0cyhvdXQuc2VsZWN0b3JzLCB7CiAgICAgICAgICB0eXBlOiByLnRvVHlwZSwKICAgICAgICAgIG5hbWVzcGFjZTogci50b05hbWVzcGFjZSwKICAgICAgICAgIHNlbGVjdG9yOiByLnNlbGVjdG9yCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY29uc3QgdHlwZSA9IHJbYCR7ZGlyZWN0aW9ufVR5cGVgXTsKICAgICAgICBsZXQgbmFtZXNwYWNlID0gcltgJHtkaXJlY3Rpb259TmFtZXNwYWNlYF07CiAgICAgICAgbGV0IG5hbWUgPSByW2Ake2RpcmVjdGlvbn1JZGBdOwogICAgICAgIGlmICghbmFtZXNwYWNlICYmIG5hbWUuaW5jbHVkZXMoJy8nKSkgewogICAgICAgICAgY29uc3QgaWR4ID0gbmFtZS5pbmRleE9mKCcvJyk7CiAgICAgICAgICBuYW1lc3BhY2UgPSBuYW1lLnN1YnN0cigwLCBpZHgpOwogICAgICAgICAgbmFtZSA9IG5hbWUuc3Vic3RyKGlkeCArIDEpOwogICAgICAgIH0KICAgICAgICBjb25zdCBpZCA9IChuYW1lc3BhY2UgPyBgJHtuYW1lc3BhY2V9L2AgOiAnJykgKyBuYW1lOwogICAgICAgIGFkZE9iamVjdChvdXQuaWRzLCB7CiAgICAgICAgICB0eXBlLAogICAgICAgICAgbmFtZXNwYWNlLAogICAgICAgICAgbmFtZSwKICAgICAgICAgIGlkCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfQogIF9nZXRSZWxhdGlvbnNoaXAocmVsLCBkaXJlY3Rpb24pIHsKICAgIHZhciBfcmVzJHNlbGVjdG9yczsKICAgIGNvbnN0IHJlcyA9IHRoaXMuX3JlbGF0aW9uc2hpcHNGb3IocmVsLCBkaXJlY3Rpb24pOwogICAgaWYgKChfcmVzJHNlbGVjdG9ycyA9IHJlcy5zZWxlY3RvcnMpICE9PSBudWxsICYmIF9yZXMkc2VsZWN0b3JzICE9PSB2b2lkIDAgJiYgX3JlcyRzZWxlY3RvcnMubGVuZ3RoKSB7CiAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby1jb25zb2xlCiAgICAgIGNvbnNvbGUud2FybignU3luYyByZXF1ZXN0IGZvciBhIHJlbGF0aW9uc2hpcCB0aGF0IGlzIGEgc2VsZWN0b3InKTsKICAgIH0KICAgIHJldHVybiByZXMuaWRzIHx8IFtdOwogIH0KICBhc3luYyBfZmluZFJlbGF0aW9uc2hpcChyZWwsIGRpcmVjdGlvbikgewogICAgY29uc3QgewogICAgICBzZWxlY3RvcnMsCiAgICAgIGlkcwogICAgfSA9IHRoaXMuX3JlbGF0aW9uc2hpcHNGb3IocmVsLCBkaXJlY3Rpb24pOwogICAgY29uc3Qgb3V0ID0gW107CiAgICBmb3IgKGNvbnN0IHNlbCBvZiBzZWxlY3RvcnMpIHsKICAgICAgY29uc3QgbWF0Y2hpbmcgPSBhd2FpdCB0aGlzLiRkaXNwYXRjaCgnZmluZE1hdGNoaW5nJywgc2VsKTsKICAgICAgYWRkT2JqZWN0cyhvdXQsIG1hdGNoaW5nLmRhdGEpOwogICAgfQogICAgZm9yIChjb25zdCBvYmogb2YgaWRzKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICB0eXBlLAogICAgICAgIGlkCiAgICAgIH0gPSBvYmo7CiAgICAgIGxldCBtYXRjaGluZyA9IHRoaXMuJGdldHRlcnNbJ2J5SWQnXSh0eXBlLCBpZCk7CiAgICAgIGlmICghbWF0Y2hpbmcpIHsKICAgICAgICB0cnkgewogICAgICAgICAgbWF0Y2hpbmcgPSBhd2FpdCB0aGlzLiRkaXNwYXRjaCgnZmluZCcsIHsKICAgICAgICAgICAgdHlwZSwKICAgICAgICAgICAgaWQKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2gge30KICAgICAgfQogICAgICBpZiAobWF0Y2hpbmcpIHsKICAgICAgICBhZGRPYmplY3Qob3V0LCBtYXRjaGluZyk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBvdXQ7CiAgfQogIGdldCBzaG9ydElkKCkgewogICAgY29uc3Qgc3BsaXRJZCA9IHRoaXMuaWQuc3BsaXQoJy8nKTsKICAgIHJldHVybiBzcGxpdElkLmxlbmd0aCA+IDEgPyBzcGxpdElkWzFdIDogc3BsaXRJZFswXTsKICB9CiAgdG9KU09OKCkgewogICAgY29uc3Qgb3V0ID0ge307CiAgICBjb25zdCBrZXlzID0gT2JqZWN0LmtleXModGhpcyk7CiAgICBmb3IgKGNvbnN0IGsgb2Yga2V5cykgewogICAgICB2YXIgX3RoaXMkazsKICAgICAgaWYgKChfdGhpcyRrID0gdGhpc1trXSkgIT09IG51bGwgJiYgX3RoaXMkayAhPT0gdm9pZCAwICYmIF90aGlzJGsudG9KU09OKSB7CiAgICAgICAgb3V0W2tdID0gdGhpc1trXS50b0pTT04oKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBvdXRba10gPSBjbG9uZSh0aGlzW2tdKTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIG91dDsKICB9CgogIC8qKgogICAqIEFsbG93IG1vZGVscyB0byBvdmVycmlkZSB0aGUgb2JqZWN0IHRoYXQgaXMgc2VudCB3aGVuIHNhdmluZyB0aGlzIHJlc291cmNlCiAgICovCiAgdG9TYXZlKCkgewogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9CiAgZ2V0IGNyZWF0aW9uVGltZXN0YW1wKCkgewogICAgdmFyIF90aGlzJG1ldGFkYXRhMTA7CiAgICByZXR1cm4gKF90aGlzJG1ldGFkYXRhMTAgPSB0aGlzLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRtZXRhZGF0YTEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YTEwLmNyZWF0aW9uVGltZXN0YW1wOwogIH0KfQ=="},{"version":3,"names":["NORMAN_NAME","_CLONE","_CONFIG","_EDIT","_UNFLAG","_VIEW","_YAML","AS","MODE","VIEW_IN_API","addObject","addObjects","findBy","removeAt","CustomValidators","downloadFile","generateZip","clone","get","eachLimit","sortableNumericSuffix","coerceStringTypeToScalarType","escapeHtml","ucFirst","displayKeyFor","validateBoolean","validateChars","validateDnsLikeTypes","validateLength","formRulesGenerator","waitFor","jsyaml","compact","forIn","isEmpty","isFunction","isString","uniq","Vue","normalizeType","ExtensionPoint","ActionLocation","getApplicableExtensionEnhancements","STRING_LIKE_TYPES","DNS_LIKE_TYPES","REMAP_STATE","disabled","notapplied","notready","waitapplied","outofsync","gitupdating","errapplied","waitcheckin","off","waitingforinfrastructure","waitingfornoderef","DEFAULT_COLOR","DEFAULT_ICON","DEFAULT_WAIT_INTERVAL","DEFAULT_WAIT_TMIMEOUT","STATES_ENUM","IN_USE","IN_PROGRESS","PENDING_ROLLBACK","PENDING_UPGRADE","ABORTED","ACTIVATING","ACTIVE","AVAILABLE","BACKED_UP","BOUND","BUILDING","COMPLETED","CORDONED","COUNT","CREATED","CREATING","DEACTIVATING","DEGRADED","DENIED","DEPLOYED","DEPLOYING","DISABLED","DISCONNECTED","DRAINED","DRAINING","ERR_APPLIED","ERROR","ERRORING","ERRORS","EXPIRED","FAIL","FAILED","HEALTHY","INACTIVE","INFO","INITIALIZING","INPROGRESS","LOCKED","MIGRATING","MISSING","MODIFIED","NOT_APPLICABLE","NOT_APLLIED","NOT_READY","OFF","ORPHANED","OTHER","OUT_OF_SYNC","ON_GOING","PASS","PASSED","PAUSED","PENDING","PROVISIONING","PROVISIONED","PURGED","PURGING","READY","RECONNECTING","REGISTERING","REINITIALIZING","RELEASED","REMOVED","REMOVING","REQUESTED","RESTARTING","RESTORING","RESIZING","RUNNING","SKIP","SKIPPED","STARTING","STOPPED","STOPPING","SUCCEEDED","SUCCESS","SUCCESSFUL","SUPERSEDED","SUSPENDED","UNAVAILABLE","UNHEALTHY","UNINSTALLED","UNINSTALLING","UNKNOWN","UNTRIGGERED","UPDATING","WAIT_APPLIED","WAIT_CHECKIN","WAITING","WARNING","STATES","color","icon","label","compoundIcon","getStatesByType","type","out","info","error","success","warning","unknown","state","stateKey","push","SORT_ORDER","ready","other","getStateLabel","lowercaseState","toLowerCase","colorForState","isError","isTransitioning","key","maybeFn","call","stateDisplay","split","map","join","stateSort","display","replace","isConditionReadyAndWaiting","condition","_condition$type","_condition$reason","reason","val","Resource","constructor","data","ctx","rehydrateNamespace","setClone","k","Object","defineProperty","value","enumerable","configurable","writable","$getters","$ctx","getters","$rootGetters","rootGetters","$dispatch","dispatch","$state","$rootState","rootState","customValidationRules","_key","m","metadata","uid","namespace","name","id","Math","random","schema","toString","typeDisplay","nameDisplay","_this$spec","_this$metadata","_this$metadata2","displayName","spec","annotations","nameSort","namespacedName","_this$metadata3","namespacedNameSort","groupByLabel","_this$metadata4","t","setLabels","Error","setLabel","setAnnotations","setAnnotation","stateColor","_this$stateObj","_this$stateObj2","stateObj","transitioning","stateBackground","stateIcon","trans","stateDescription","_this$stateObj3","_this$stateObj4","_this$stateObj5","message","_this$metadata5","waitForTestFn","fn","msg","timeoutMs","intervalMs","apply","waitForState","timeout","interval","waitForTransition","undefined","waitForAction","hasAction","waitForLink","hasLink","hasCondition","isCondition","withStatus","status","conditions","entry","waitForCondition","availableActions","all","_availableActions","last","filter","item","enabled","cur","divider","ok","length","shift","pop","i","currentRoute","currentRouter","app","_route","extensionMenuActions","ACTION","TABLE","action","canUpdate","canCustomEdit","canEditYaml","canYaml","canClone","canCreate","bulkable","bulkAction","weight","canViewInApi","altAction","canDelete","forEach","newActionInstance","enabledFn","typeofEnabled","console","warn","labelKey","_canDelete","isRemovable","isEditable","_this$schema","collectionMethods","find","x","isCreatable","_this$schema2","resourceMethods","linkName","linkFor","links","followLink","opt","url","urlSuffix","actionName","actionLinkFor","actions","actionLinks","doAction","body","resource","doActionGrowl","err","title","root","patch","merge","alertOnError","method","headers","contentType","catch","e","save","_save","arguments","processSaveResponse","res","_this$metadata6","__rehydrate","__clone","forNew","errors","validationErrors","ignoreFields","Promise","reject","resourceVersion","attributes","namespaced","toSave","_type","_name","_labels","labels","_annotations","argParam","includes","kind","existing","_status","force","remove","_remove","process","server","$route","window","$nuxt","$router","listLocation","params","product","cluster","_detailLocation","_this$id","_schema$attributes","_this$metadata7","detailLocation","goToDetail","goToClone","moreQuery","location","query","goToEdit","goToViewConfig","goToEditYaml","goToViewYaml","cloneYaml","download","accept","downloadBulk","items","files","names","idx","then","yaml","cleanedYaml","zip","viewInApi","open","self","promptRemove","resources","confirmRemove","applyDefaults","urlFromAttrs","collection","group","slice","indexOf","cleanYaml","mode","obj","load","dump","skipInvalid","cleanForNew","cleanForDiff","toJSON","yamlForSave","saveYaml","_saveYaml","_this$schema3","parsed","isCreate","isSpoofed","modelValidationRules","rules","customValidationRulesets","rule","validators","required","formRules","displayKey","translationKey","path","ruleKey","ruleArg","ruleset","customValidationErrors","ignorePaths","requiredIf","requiredIfPath","fieldType","pathValue","parsedRules","trim","reqIfVal","tolower","set","validator","validatorAndArgs","validatorName","validatorArgs","validatorExists","prototype","hasOwnProperty","_this$$rootState$$plu","pluginValidator","$plugin","getValidator","originalType","fields","resourceFields","keys","field","_field","fieldErrors","valIsString","nullable","ownersByType","_this$metadata8","ownerReferences","owner","owners","allOfResourceType","resourceInstance","resourceByType","_resourceByType$metad","details","_details","_this$owners","count","formatter","content","row","col","formatterOpts","addSuffix","findOwners","_getRelationship","getOwners","findOwned","_findRelationship","_relationshipsFor","rel","direction","_this$metadata9","selectors","ids","relationships","r","selector","toType","toNamespace","substr","_res$selectors","sel","matching","shortId","splitId","_this$k","creationTimestamp","_this$metadata10"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/dashboard-store/resource-class.js"],"sourcesContent":["import { NORMAN_NAME } from '@shell/config/labels-annotations';\nimport {\n  _CLONE,\n  _CONFIG,\n  _EDIT,\n  _UNFLAG,\n  _VIEW,\n  _YAML,\n  AS,\n  MODE\n} from '@shell/config/query-params';\nimport { VIEW_IN_API } from '@shell/store/prefs';\nimport { addObject, addObjects, findBy, removeAt } from '@shell/utils/array';\nimport CustomValidators from '@shell/utils/custom-validators';\nimport { downloadFile, generateZip } from '@shell/utils/download';\nimport { clone, get } from '@shell/utils/object';\nimport { eachLimit } from '@shell/utils/promise';\nimport { sortableNumericSuffix } from '@shell/utils/sort';\nimport { coerceStringTypeToScalarType, escapeHtml, ucFirst } from '@shell/utils/string';\nimport {\n  displayKeyFor,\n  validateBoolean,\n  validateChars,\n  validateDnsLikeTypes,\n  validateLength,\n} from '@shell/utils/validators';\nimport formRulesGenerator from '@shell/utils/validators/formRules/index';\nimport { waitFor } from '@shell/utils/async';\nimport jsyaml from 'js-yaml';\nimport compact from 'lodash/compact';\nimport forIn from 'lodash/forIn';\nimport isEmpty from 'lodash/isEmpty';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nimport uniq from 'lodash/uniq';\nimport Vue from 'vue';\n\nimport { normalizeType } from './normalize';\n\nimport { ExtensionPoint, ActionLocation } from '@shell/core/types';\nimport { getApplicableExtensionEnhancements } from '@shell/core/plugin-helpers';\n\nconst STRING_LIKE_TYPES = [\n  'string',\n  'date',\n  'blob',\n  'enum',\n  'multiline',\n  'masked',\n  'password',\n  'dnsLabel',\n  'hostname',\n];\nconst DNS_LIKE_TYPES = ['dnsLabel', 'dnsLabelRestricted', 'hostname'];\n\nconst REMAP_STATE = {\n  disabled:                 'inactive',\n  notapplied:               'Not Applied',\n  notready:                 'Not Ready',\n  waitapplied:              'Wait Applied',\n  outofsync:                'Out of Sync',\n  'in-progress':            'In Progress',\n  gitupdating:              'Git Updating',\n  errapplied:               'Err Applied',\n  waitcheckin:              'Wait Check-In',\n  off:                      'Disabled',\n  waitingforinfrastructure: 'Waiting for Infra',\n  waitingfornoderef:        'Waiting for Node Ref'\n};\n\nconst DEFAULT_COLOR = 'warning';\nconst DEFAULT_ICON = 'x';\n\nconst DEFAULT_WAIT_INTERVAL = 1000;\nconst DEFAULT_WAIT_TMIMEOUT = 30000;\n\nexport const STATES_ENUM = {\n  IN_USE:           'in-use',\n  IN_PROGRESS:      'in-progress',\n  PENDING_ROLLBACK: 'pending-rollback',\n  PENDING_UPGRADE:  'pending-upgrade',\n  ABORTED:          'aborted',\n  ACTIVATING:       'activating',\n  ACTIVE:           'active',\n  AVAILABLE:        'available',\n  BACKED_UP:        'backedup',\n  BOUND:            'bound',\n  BUILDING:         'building',\n  COMPLETED:        'completed',\n  CORDONED:         'cordoned',\n  COUNT:            'count',\n  CREATED:          'created',\n  CREATING:         'creating',\n  DEACTIVATING:     'deactivating',\n  DEGRADED:         'degraded',\n  DENIED:           'denied',\n  DEPLOYED:         'deployed',\n  DEPLOYING:        'deploying',\n  DISABLED:         'disabled',\n  DISCONNECTED:     'disconnected',\n  DRAINED:          'drained',\n  DRAINING:         'draining',\n  ERR_APPLIED:      'errapplied',\n  ERROR:            'error',\n  ERRORING:         'erroring',\n  ERRORS:           'errors',\n  EXPIRED:          'expired',\n  FAIL:             'fail',\n  FAILED:           'failed',\n  HEALTHY:          'healthy',\n  INACTIVE:         'inactive',\n  INFO:             'info',\n  INITIALIZING:     'initializing',\n  INPROGRESS:       'inprogress',\n  LOCKED:           'locked',\n  MIGRATING:        'migrating',\n  MISSING:          'missing',\n  MODIFIED:         'modified',\n  NOT_APPLICABLE:   'notApplicable',\n  NOT_APLLIED:      'notapplied',\n  NOT_READY:        'notready',\n  OFF:              'off',\n  ORPHANED:         'orphaned',\n  OTHER:            'other',\n  OUT_OF_SYNC:      'outofsync',\n  ON_GOING:         'on-going',\n  PASS:             'pass',\n  PASSED:           'passed',\n  PAUSED:           'paused',\n  PENDING:          'pending',\n  PROVISIONING:     'provisioning',\n  PROVISIONED:      'provisioned',\n  PURGED:           'purged',\n  PURGING:          'purging',\n  READY:            'ready',\n  RECONNECTING:     'reconnecting',\n  REGISTERING:      'registering',\n  REINITIALIZING:   'reinitializing',\n  RELEASED:         'released',\n  REMOVED:          'removed',\n  REMOVING:         'removing',\n  REQUESTED:        'requested',\n  RESTARTING:       'restarting',\n  RESTORING:        'restoring',\n  RESIZING:         'resizing',\n  RUNNING:          'running',\n  SKIP:             'skip',\n  SKIPPED:          'skipped',\n  STARTING:         'starting',\n  STOPPED:          'stopped',\n  STOPPING:         'stopping',\n  SUCCEEDED:        'succeeded',\n  SUCCESS:          'success',\n  SUCCESSFUL:       'successful',\n  SUPERSEDED:       'superseded',\n  SUSPENDED:        'suspended',\n  UNAVAILABLE:      'unavailable',\n  UNHEALTHY:        'unhealthy',\n  UNINSTALLED:      'uninstalled',\n  UNINSTALLING:     'uninstalling',\n  UNKNOWN:          'unknown',\n  UNTRIGGERED:      'untriggered',\n  UPDATING:         'updating',\n  WAIT_APPLIED:     'waitapplied',\n  WAIT_CHECKIN:     'waitcheckin',\n  WAITING:          'waiting',\n  WARNING:          'warning',\n};\n\nexport const STATES = {\n  [STATES_ENUM.IN_USE]: {\n    color: 'success', icon: 'dot-open', label: 'In Use', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.IN_PROGRESS]: {\n    color: 'info', icon: 'tag', label: 'In Progress', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PENDING_ROLLBACK]: {\n    color: 'info', icon: 'dot-half', label: 'Pending Rollback', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PENDING_UPGRADE]: {\n    color: 'info', icon: 'dot-half', label: 'Pending Update', compoundIcon: 'info'\n  },\n  [STATES_ENUM.ABORTED]: {\n    color: 'warning', icon: 'error', label: 'Aborted', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.ACTIVATING]: {\n    color: 'info', icon: 'tag', label: 'Activating', compoundIcon: 'info'\n  },\n  [STATES_ENUM.ACTIVE]: {\n    color: 'success', icon: 'dot-open', label: 'Active', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.AVAILABLE]: {\n    color: 'success', icon: 'dot-open', label: 'Available', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.BACKED_UP]: {\n    color: 'success', icon: 'backup', label: 'Backed Up', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.BOUND]: {\n    color: 'success', icon: 'dot', label: 'Bound', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.BUILDING]: {\n    color: 'success', icon: 'dot-open', label: 'Building', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.COMPLETED]: {\n    color: 'success', icon: 'dot', label: 'Completed', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.CORDONED]: {\n    color: 'info', icon: 'tag', label: 'Cordoned', compoundIcon: 'info'\n  },\n  [STATES_ENUM.COUNT]: {\n    color: 'success', icon: 'dot-open', label: 'Count', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.CREATED]: {\n    color: 'info', icon: 'tag', label: 'Created', compoundIcon: 'info'\n  },\n  [STATES_ENUM.CREATING]: {\n    color: 'info', icon: 'tag', label: 'Creating', compoundIcon: 'info'\n  },\n  [STATES_ENUM.DEACTIVATING]: {\n    color: 'info', icon: 'adjust', label: 'Deactivating', compoundIcon: 'info'\n  },\n  [STATES_ENUM.DEGRADED]: {\n    color: 'warning', icon: 'error', label: 'Degraded', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DENIED]: {\n    color: 'error', icon: 'adjust', label: 'Denied', compoundIcon: 'error'\n  },\n  [STATES_ENUM.DEPLOYED]: {\n    color: 'success', icon: 'dot-open', label: 'Deployed', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.DISABLED]: {\n    color: 'warning', icon: 'error', label: 'Disabled', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DISCONNECTED]: {\n    color: 'warning', icon: 'error', label: 'Disconnected', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DRAINED]: {\n    color: 'info', icon: 'tag', label: 'Drained', compoundIcon: 'info'\n  },\n  [STATES_ENUM.DRAINING]: {\n    color: 'warning', icon: 'tag', label: 'Draining', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.ERR_APPLIED]: {\n    color: 'error', icon: 'error', label: 'Error Applied', compoundIcon: 'error'\n  },\n  [STATES_ENUM.ERROR]: {\n    color: 'error', icon: 'error', label: 'Error', compoundIcon: 'error'\n  },\n  [STATES_ENUM.ERRORING]: {\n    color: 'error', icon: 'error', label: 'Erroring', compoundIcon: 'error'\n  },\n  [STATES_ENUM.ERRORS]: {\n    color: 'error', icon: 'error', label: 'Errors', compoundIcon: 'error'\n  },\n  [STATES_ENUM.EXPIRED]: {\n    color: 'warning', icon: 'error', label: 'Expired', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.FAIL]: {\n    color: 'error', icon: 'error', label: 'Fail', compoundIcon: 'error'\n  },\n  [STATES_ENUM.FAILED]: {\n    color: 'error', icon: 'error', label: 'Failed', compoundIcon: 'error'\n  },\n  [STATES_ENUM.HEALTHY]: {\n    color: 'success', icon: 'dot-open', label: 'Healthy', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.INACTIVE]: {\n    color: 'error', icon: 'dot', label: 'Inactive', compoundIcon: 'error'\n  },\n  [STATES_ENUM.INITIALIZING]: {\n    color: 'warning', icon: 'error', label: 'Initializing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.INPROGRESS]: {\n    color: 'info', icon: 'spinner', label: 'In Progress', compoundIcon: 'info'\n  },\n  [STATES_ENUM.INFO]: {\n    color: 'info', icon: 'info', label: 'Info', compoundIcon: 'info'\n  },\n  [STATES_ENUM.LOCKED]: {\n    color: 'warning', icon: 'adjust', label: 'Locked', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.MIGRATING]: {\n    color: 'info', icon: 'info', label: 'Migrated', compoundIcon: 'info'\n  },\n  [STATES_ENUM.MISSING]: {\n    color: 'warning', icon: 'adjust', label: 'Missing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.MODIFIED]: {\n    color: 'warning', icon: 'edit', label: 'Modified', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.NOT_APPLICABLE]: {\n    color: 'warning', icon: 'tag', label: 'Not Applicable', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.NOT_APLLIED]: {\n    color: 'warning', icon: 'tag', label: 'Not Applied', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.NOT_READY]: {\n    color: 'warning', icon: 'tag', label: 'Not Ready', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.OFF]: {\n    color: 'darker', icon: 'error', label: 'Off'\n  },\n  [STATES_ENUM.ON_GOING]: {\n    color: 'info', icon: 'info', label: 'Info', compoundIcon: 'info'\n  },\n  [STATES_ENUM.ORPHANED]: {\n    color: 'warning', icon: 'tag', label: 'Orphaned', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.OTHER]: {\n    color: 'info', icon: 'info', label: 'Other', compoundIcon: 'info'\n  },\n  [STATES_ENUM.OUT_OF_SYNC]: {\n    color: 'warning', icon: 'tag', label: 'Out Of Sync', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.PASS]: {\n    color: 'success', icon: 'dot-dotfill', label: 'Pass', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.PASSED]: {\n    color: 'success', icon: 'dot-dotfill', label: 'Passed', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.PAUSED]: {\n    color: 'info', icon: 'info', label: 'Paused', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PENDING]: {\n    color: 'info', icon: 'tag', label: 'Pending', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PROVISIONING]: {\n    color: 'info', icon: 'dot', label: 'Provisioning', compoundIcon: 'info'\n  },\n  [STATES_ENUM.PROVISIONED]: {\n    color: 'success', icon: 'dot', label: 'Provisioned', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.PURGED]: {\n    color: 'error', icon: 'purged', label: 'Purged', compoundIcon: 'error'\n  },\n  [STATES_ENUM.PURGING]: {\n    color: 'info', icon: 'purged', label: 'Purging', compoundIcon: 'info'\n  },\n  [STATES_ENUM.READY]: {\n    color: 'success', icon: 'dot-open', label: 'Ready', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.RECONNECTING]: {\n    color: 'error', icon: 'error', label: 'Reconnecting', compoundIcon: 'error'\n  },\n  [STATES_ENUM.REGISTERING]: {\n    color: 'info', icon: 'tag', label: 'Registering', compoundIcon: 'info'\n  },\n  [STATES_ENUM.REINITIALIZING]: {\n    color: 'warning', icon: 'error', label: 'Reinitializing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.RELEASED]: {\n    color: 'warning', icon: 'error', label: 'Released', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.REMOVED]: {\n    color: 'error', icon: 'trash', label: 'Removed', compoundIcon: 'error'\n  },\n  [STATES_ENUM.REMOVING]: {\n    color: 'info', icon: 'trash', label: 'Removing', compoundIcon: 'info'\n  },\n  [STATES_ENUM.REQUESTED]: {\n    color: 'info', icon: 'tag', label: 'Requested', compoundIcon: 'info'\n  },\n  [STATES_ENUM.RESTARTING]: {\n    color: 'info', icon: 'adjust', label: 'Restarting', compoundIcon: 'info'\n  },\n  [STATES_ENUM.RESTORING]: {\n    color: 'info', icon: 'medicalcross', label: 'Restoring', compoundIcon: 'info'\n  },\n  [STATES_ENUM.RESIZING]: {\n    color: 'warning', icon: 'dot', label: 'Resizing', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.RUNNING]: {\n    color: 'success', icon: 'dot-open', label: 'Running', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.SKIP]: {\n    color: 'info', icon: 'dot-open', label: 'Skip', compoundIcon: 'info'\n  },\n  [STATES_ENUM.SKIPPED]: {\n    color: 'info', icon: 'dot-open', label: 'Skipped', compoundIcon: 'info'\n  },\n  [STATES_ENUM.STARTING]: {\n    color: 'info', icon: 'adjust', label: 'Starting', compoundIcon: 'info'\n  },\n  [STATES_ENUM.STOPPED]: {\n    color: 'error', icon: 'dot', label: 'Stopped', compoundIcon: 'error'\n  },\n  [STATES_ENUM.STOPPING]: {\n    color: 'info', icon: 'adjust', label: 'Stopping', compoundIcon: 'info'\n  },\n  [STATES_ENUM.SUCCEEDED]: {\n    color: 'success', icon: 'dot-dotfill', label: 'Succeeded', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.SUCCESS]: {\n    color: 'success', icon: 'dot-open', label: 'Success', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.SUCCESSFUL]: {\n    color: 'success', icon: 'dot-open', label: 'Successful'\n  },\n  [STATES_ENUM.SUPERSEDED]: {\n    color: 'info', icon: 'dot-open', label: 'Superseded', compoundIcon: 'info'\n  },\n  [STATES_ENUM.SUSPENDED]: {\n    color: 'info', icon: 'pause', label: 'Suspended', compoundIcon: 'info'\n  },\n  [STATES_ENUM.UNAVAILABLE]: {\n    color: 'error', icon: 'error', label: 'Unavailable', compoundIcon: 'error'\n  },\n  [STATES_ENUM.UNHEALTHY]: {\n    color: 'error', icon: 'error', label: 'Unhealthy', compoundIcon: 'error'\n  },\n  [STATES_ENUM.UNINSTALLED]: {\n    color: 'info', icon: 'trash', label: 'Uninstalled', compoundIcon: 'info'\n  },\n  [STATES_ENUM.UNINSTALLING]: {\n    color: 'info', icon: 'trash', label: 'Uninstalling', compoundIcon: 'info'\n  },\n  [STATES_ENUM.UNKNOWN]: {\n    color: 'warning', icon: 'x', label: 'Unknown', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.UNTRIGGERED]: {\n    color: 'success', icon: 'tag', label: 'Untriggered', compoundIcon: 'checkmark'\n  },\n  [STATES_ENUM.UPDATING]: {\n    color: 'warning', icon: 'tag', label: 'Updating', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.WAIT_APPLIED]: {\n    color: 'info', icon: 'tag', label: 'Wait Applied', compoundIcon: 'info'\n  },\n  [STATES_ENUM.WAIT_CHECKIN]: {\n    color: 'warning', icon: 'tag', label: 'Wait Checkin', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.WAITING]: {\n    color: 'info', icon: 'tag', label: 'Waiting', compoundIcon: 'info'\n  },\n  [STATES_ENUM.WARNING]: {\n    color: 'warning', icon: 'error', label: 'Warning', compoundIcon: 'warning'\n  },\n  [STATES_ENUM.DEPLOYING]: {\n    color: 'info', icon: 'info', label: 'Deploying', compoundIcon: 'info'\n  },\n};\n\nexport function getStatesByType(type = 'info') {\n  const out = {\n    info:    [],\n    error:   [],\n    success: [],\n    warning: [],\n    unknown: [],\n  };\n\n  forIn(STATES, (state, stateKey) => {\n    if (state.color) {\n      if (out[state.color]) {\n        out[state.color].push(stateKey);\n      } else {\n        out.unknown.push(stateKey);\n      }\n    }\n  });\n\n  return out;\n}\n\nconst SORT_ORDER = {\n  error:    1,\n  warning:  2,\n  info:     3,\n  success:  4,\n  ready:    5,\n  notready: 6,\n  other:    7,\n};\n\nexport function getStateLabel(state) {\n  const lowercaseState = state.toLowerCase();\n\n  return STATES[lowercaseState] ? STATES[lowercaseState].label : STATES[STATES_ENUM.UNKNOWN].label;\n}\n\nexport function colorForState(state, isError, isTransitioning) {\n  if ( isError ) {\n    return 'text-error';\n  }\n\n  if ( isTransitioning ) {\n    return 'text-info';\n  }\n\n  const key = (state || 'active').toLowerCase();\n  let color;\n\n  if ( STATES[key] && STATES[key].color ) {\n    color = maybeFn.call(this, STATES[key].color);\n  }\n\n  if ( !color ) {\n    color = DEFAULT_COLOR;\n  }\n\n  return `text-${ color }`;\n}\n\nexport function stateDisplay(state) {\n  // @TODO use translations\n  const key = (state || 'active').toLowerCase();\n\n  if ( REMAP_STATE[key] ) {\n    return REMAP_STATE[key];\n  }\n\n  return key.split(/-/).map(ucFirst).join('-');\n}\n\nexport function stateSort(color, display) {\n  color = color.replace(/^(text|bg)-/, '');\n\n  return `${ SORT_ORDER[color] || SORT_ORDER['other'] } ${ display }`;\n}\n\nexport function isConditionReadyAndWaiting(condition) {\n  if (!condition) {\n    return false;\n  }\n\n  return condition?.type?.toLowerCase() === 'ready' && condition?.reason?.toLowerCase() === 'waiting';\n}\n\nfunction maybeFn(val) {\n  if ( isFunction(val) ) {\n    return val(this);\n  }\n\n  return val;\n}\n\nexport default class Resource {\n  constructor(data, ctx, rehydrateNamespace = null, setClone = false) {\n    for ( const k in data ) {\n      this[k] = data[k];\n    }\n\n    Object.defineProperty(this, '$ctx', {\n      value:      ctx,\n      enumerable: false,\n    });\n\n    if ( rehydrateNamespace ) {\n      Object.defineProperty(this, '__rehydrate', {\n        value:        rehydrateNamespace,\n        enumerable:   true,\n        configurable: true\n      });\n    }\n\n    if ( setClone ) {\n      Object.defineProperty(this, '__clone', {\n        value:        true,\n        enumerable:   true,\n        configurable: true,\n        writable:     true\n      });\n    }\n  }\n\n  get '$getters'() {\n    return this.$ctx.getters;\n  }\n\n  get '$rootGetters'() {\n    return this.$ctx.rootGetters;\n  }\n\n  get '$dispatch'() {\n    return this.$ctx.dispatch;\n  }\n\n  get '$state'() {\n    return this.$ctx.state;\n  }\n\n  get '$rootState'() {\n    return this.$ctx.rootState;\n  }\n\n  get customValidationRules() {\n    return [\n      /**\n       * Essentially a fake schema object with additional params to extend validation\n       *\n       * @param {nullable} Value is nullable\n       * @param {path} Path on the resource to the value to validate\n       * @param {required} Value required\n       * @param {requiredIf} Value required if value at path not empty\n       * @param {translationKey} Human readable display key for param in path e.g. metadata.name === Name\n       * @param {type} Type of field to validate\n       * @param {validators} array of strings where item is name of exported validator function in custom-validators, args can be passed by prepending args separated by colon. e.g maxLength:63\n       */\n      /* {\n        nullable:       false,\n        path:           'spec.ports',\n        required:       true,\n        type:           'array',\n        validators:     ['servicePort'],\n      } */\n    ];\n  }\n\n  get _key() {\n    const m = this.metadata;\n\n    if ( m ) {\n      if ( m.uid ) {\n        return m.uid;\n      }\n\n      if ( m.namespace ) {\n        return `${ this.type }/${ m.namespace }/${ m.name }`;\n      }\n    }\n\n    if ( this.id ) {\n      return `${ this.type }/${ this.id }`;\n    }\n\n    return `${ this.type }/${ Math.random() }`;\n  }\n\n  get schema() {\n    return this.$getters['schemaFor'](this.type);\n  }\n\n  toString() {\n    return `[${ this.type }: ${ this.id }]`;\n  }\n\n  get typeDisplay() {\n    const schema = this.schema;\n\n    if ( schema ) {\n      return this.$rootGetters['type-map/labelFor'](schema);\n    }\n\n    return '?';\n  }\n\n  get nameDisplay() {\n    return this.displayName || this.spec?.displayName || this.metadata?.annotations?.[NORMAN_NAME] || this.name || this.metadata?.name || this.id;\n  }\n\n  get nameSort() {\n    return sortableNumericSuffix(this.nameDisplay).toLowerCase();\n  }\n\n  get namespacedName() {\n    const namespace = this.metadata?.namespace;\n    const name = this.nameDisplay;\n\n    if ( namespace ) {\n      return `${ namespace }:${ name }`;\n    }\n\n    return name;\n  }\n\n  get namespacedNameSort() {\n    return sortableNumericSuffix(this.namespacedName).toLowerCase();\n  }\n\n  get groupByLabel() {\n    const name = this.metadata?.namespace;\n    let out;\n\n    if ( name ) {\n      out = this.t('resourceTable.groupLabel.namespace', { name: escapeHtml(name) });\n    } else {\n      out = this.t('resourceTable.groupLabel.notInANamespace');\n    }\n\n    return out;\n  }\n\n  setLabels(/* val */) {\n    throw new Error('Implement setLabels in subclass');\n  }\n\n  setLabel(/* key, val */) {\n    throw new Error('Implement setLabel in subclass');\n  }\n\n  setAnnotations(val) {\n    throw new Error('Implement setAnnotations in subclass');\n  }\n\n  setAnnotation(key, val) {\n    throw new Error('Implement setAnnotation in subclass');\n  }\n\n  // You can override the displayed by providing your own stateDisplay (and possibly using the function exported above)\n  get stateDisplay() {\n    return stateDisplay(this.state);\n  }\n\n  get stateColor() {\n    return colorForState.call(\n      this,\n      this.state,\n      this.stateObj?.error,\n      this.stateObj?.transitioning\n    );\n  }\n\n  get stateBackground() {\n    return this.stateColor.replace('text-', 'bg-');\n  }\n\n  get stateIcon() {\n    let trans = false;\n    let error = false;\n\n    if ( this.metadata && this.metadata.state ) {\n      trans = this.metadata.state.transitioning;\n      error = this.metadata.state.error;\n    }\n\n    if ( trans ) {\n      return 'icon icon-spinner icon-spin';\n    }\n\n    if ( error ) {\n      return 'icon icon-error';\n    }\n\n    const key = (this.state || '').toLowerCase();\n    let icon;\n\n    if ( STATES[key] && STATES[key].icon ) {\n      icon = maybeFn.call(this, STATES[key].icon);\n    }\n\n    if ( !icon ) {\n      icon = DEFAULT_ICON;\n    }\n\n    return `icon icon-${ icon }`;\n  }\n\n  get stateSort() {\n    return stateSort(this.stateColor, this.stateDisplay);\n  }\n\n  get stateDescription() {\n    const trans = this.stateObj?.transitioning || false;\n    const error = this.stateObj?.error || false;\n    const message = this.stateObj?.message;\n\n    return trans || error ? ucFirst(message) : '';\n  }\n\n  get stateObj() {\n    return this.metadata?.state;\n  }\n\n  // ------------------------------------------------------------------\n\n  waitForTestFn(fn, msg, timeoutMs, intervalMs) {\n    return waitFor(() => fn.apply(this), msg, timeoutMs || DEFAULT_WAIT_TMIMEOUT, intervalMs || DEFAULT_WAIT_INTERVAL, true);\n  }\n\n  waitForState(state, timeout, interval) {\n    return this.waitForTestFn(() => {\n      return (this.state || '').toLowerCase() === state.toLowerCase();\n    }, `state=${ state }`, timeout, interval);\n  }\n\n  waitForTransition() {\n    return this.waitForTestFn(() => {\n      return !this.transitioning;\n    }, 'transition completion', undefined, undefined);\n  }\n\n  waitForAction(name) {\n    return this.waitForTestFn(() => {\n      return this.hasAction(name);\n    }, `action=${ name }`, undefined, undefined);\n  }\n\n  waitForLink(name) {\n    return this.waitForTestFn(() => {\n      return this.hasLink(name);\n    }, `link=${ name }`, undefined, undefined);\n  }\n\n  hasCondition(condition) {\n    return this.isCondition(condition, null);\n  }\n\n  isCondition(condition, withStatus = 'True') {\n    if ( !this.status || !this.status.conditions ) {\n      return false;\n    }\n\n    const entry = findBy((this.status.conditions || []), 'type', condition);\n\n    if ( !entry ) {\n      return false;\n    }\n\n    if ( !withStatus ) {\n      return true;\n    }\n\n    return (entry.status || '').toLowerCase() === `${ withStatus }`.toLowerCase();\n  }\n\n  waitForCondition(name, withStatus = 'True', timeoutMs = DEFAULT_WAIT_TMIMEOUT, intervalMs = DEFAULT_WAIT_INTERVAL) {\n    return this.waitForTestFn(() => {\n      return this.isCondition(name, withStatus);\n    }, `condition ${ name }=${ withStatus }`, timeoutMs, intervalMs);\n  }\n\n  // ------------------------------------------------------------------\n\n  get availableActions() {\n    const all = this._availableActions;\n\n    // Remove disabled items and consecutive dividers\n    let last = null;\n    const out = all.filter((item) => {\n      if ( item.enabled === false ) {\n        return false;\n      }\n\n      const cur = item.divider;\n      const ok = !cur || (cur && !last);\n\n      last = cur;\n\n      return ok;\n    });\n\n    // Remove dividers at the beginning\n    while ( out.length && out[0].divider ) {\n      out.shift();\n    }\n\n    // Remove dividers at the end\n    while ( out.length && out[out.length - 1].divider ) {\n      out.pop();\n    }\n\n    // Remove consecutive dividers in the middle\n    for ( let i = 1 ; i < out.length ; i++ ) {\n      if ( out[i].divider && out[i - 1].divider ) {\n        removeAt(out, i, 1);\n        i--;\n      }\n    }\n\n    return out;\n  }\n\n  // You can add custom actions by overriding your own availableActions (and probably reading super._availableActions)\n  get _availableActions() {\n    // get menu actions available by plugins configuration\n    const currentRoute = this.currentRouter().app._route;\n    const extensionMenuActions = getApplicableExtensionEnhancements(this.$rootState, ExtensionPoint.ACTION, ActionLocation.TABLE, currentRoute, this);\n\n    const all = [\n      { divider: true },\n      {\n        action:  this.canUpdate ? 'goToEdit' : 'goToViewConfig',\n        label:   this.t(this.canUpdate ? 'action.edit' : 'action.view'),\n        icon:    'icon icon-edit',\n        enabled: this.canCustomEdit,\n      },\n      {\n        action:  this.canEditYaml ? 'goToEditYaml' : 'goToViewYaml',\n        label:   this.t(this.canEditYaml ? 'action.editYaml' : 'action.viewYaml'),\n        icon:    'icon icon-file',\n        enabled: this.canYaml,\n      },\n      {\n        action:  (this.canCustomEdit ? 'goToClone' : 'cloneYaml'),\n        label:   this.t('action.clone'),\n        icon:    'icon icon-copy',\n        enabled: this.canClone && this.canCreate && (this.canCustomEdit || this.canYaml),\n      },\n      { divider: true },\n      {\n        action:     'download',\n        label:      this.t('action.download'),\n        icon:       'icon icon-download',\n        bulkable:   true,\n        bulkAction: 'downloadBulk',\n        enabled:    this.canYaml,\n        weight:     -9,\n      },\n      {\n        action:  'viewInApi',\n        label:   this.t('action.viewInApi'),\n        icon:    'icon icon-external-link',\n        enabled: this.canViewInApi,\n      },\n      {\n        action:     'promptRemove',\n        altAction:  'remove',\n        label:      this.t('action.remove'),\n        icon:       'icon icon-trash',\n        bulkable:   true,\n        enabled:    this.canDelete,\n        bulkAction: 'promptRemove',\n        weight:     -10, // Delete always goes last\n      },\n    ];\n\n    // Extension actions get added to the end, so add a divider if there are any\n    if (extensionMenuActions.length) {\n      // Add a divider first\n      all.push({ divider: true });\n\n      extensionMenuActions.forEach((action) => {\n        const newActionInstance = { ...action };\n\n        const enabledFn = newActionInstance.enabled;\n        const typeofEnabled = typeof enabledFn;\n\n        switch (typeofEnabled) {\n        case 'undefined':\n          newActionInstance.enabled = true;\n          break;\n        case 'function':\n          Object.defineProperty(newActionInstance, 'enabled', { get: () => enabledFn(this) });\n          break;\n        case 'boolean':\n          // no op, just use it directly\n          break;\n        default:\n          // unsupported value\n          console.warn(`Unsupported 'enabled' property type for action: ${ action.label || action.labelKey }` ); // eslint-disable-line no-console\n          delete newActionInstance.enabled;\n          break;\n        }\n\n        all.push(newActionInstance);\n      });\n    }\n\n    return all;\n  }\n\n  // ------------------------------------------------------------------\n\n  get canDelete() {\n    return this._canDelete;\n  }\n\n  get _canDelete() {\n    return this.hasLink('remove') && this.$rootGetters['type-map/optionsFor'](this.type).isRemovable;\n  }\n\n  get canClone() {\n    return true;\n  }\n\n  get canUpdate() {\n    return this.hasLink('update') && this.$rootGetters['type-map/optionsFor'](this.type).isEditable;\n  }\n\n  get canCustomEdit() {\n    return this.$rootGetters['type-map/hasCustomEdit'](this.type, this.id);\n  }\n\n  get canCreate() {\n    if ( this.schema && !this.schema?.collectionMethods.find((x) => x.toLowerCase() === 'post') ) {\n      return false;\n    }\n\n    return this.$rootGetters['type-map/optionsFor'](this.type).isCreatable;\n  }\n\n  get canViewInApi() {\n    return this.hasLink('self') && this.$rootGetters['prefs/get'](VIEW_IN_API);\n  }\n\n  get canYaml() {\n    return this.hasLink('view');\n  }\n\n  get canEditYaml() {\n    return this.schema?.resourceMethods?.find((x) => x === 'blocked-PUT') ? false : this.canUpdate;\n  }\n\n  // ------------------------------------------------------------------\n\n  hasLink(linkName) {\n    return !!this.linkFor(linkName);\n  }\n\n  linkFor(linkName) {\n    return (this.links || {})[linkName];\n  }\n\n  followLink(linkName, opt = {}) {\n    if ( !opt.url ) {\n      opt.url = (this.links || {})[linkName];\n    }\n\n    if ( opt.urlSuffix ) {\n      opt.url += opt.urlSuffix;\n    }\n\n    if ( !opt.url ) {\n      throw new Error(`Unknown link ${ linkName } on ${ this.type } ${ this.id }`);\n    }\n\n    return this.$dispatch('request', { opt, type: this.type } );\n  }\n\n  // ------------------------------------------------------------------\n\n  hasAction(actionName) {\n    return !!this.actionLinkFor(actionName);\n  }\n\n  actionLinkFor(actionName) {\n    return (this.actions || this.actionLinks || {})[actionName];\n  }\n\n  doAction(actionName, body, opt = {}) {\n    return this.$dispatch('resourceAction', {\n      resource: this,\n      actionName,\n      body,\n      opt,\n    });\n  }\n\n  async doActionGrowl(actionName, body, opt = {}) {\n    try {\n      await this.$dispatch('resourceAction', {\n        resource: this,\n        actionName,\n        body,\n        opt,\n      });\n    } catch (err) {\n      this.$dispatch('growl/fromError', {\n        title: this.$rootGetters['i18n/t']('generic.notification.title.error'),\n        err:   err.data || err,\n      }, { root: true });\n    }\n  }\n\n  // ------------------------------------------------------------------\n\n  patch(data, opt = {}, merge = false, alertOnError = false) {\n    if ( !opt.url ) {\n      // Workaround for the links not being correct - view link is the only one that seems correct\n      opt.url = this.linkFor('view') || this.linkFor('self');\n    }\n\n    opt.method = 'patch';\n    opt.headers = opt.headers || {};\n\n    if (!opt.headers['content-type']) {\n      const contentType = merge ? 'application/strategic-merge-patch+json' : 'application/json-patch+json';\n\n      opt.headers['content-type'] = contentType;\n    }\n    opt.data = data;\n\n    const dispatch = this.$dispatch('request', { opt, type: this.type } );\n\n    return !alertOnError ? dispatch : dispatch.catch((e) => {\n      const title = this.t('resource.errors.update', { name: this.name });\n\n      console.error(title, e); // eslint-disable-line no-console\n\n      this.$dispatch('growl/error', {\n        title,\n        message: e?.message,\n        timeout: 5000\n      }, { root: true });\n    });\n  }\n\n  save() {\n    return this._save(...arguments);\n  }\n\n  /**\n   * Allow to handle the response of the save request\n   * @param {*} res Full request response\n   */\n  processSaveResponse(res) { }\n\n  async _save(opt = {}) {\n    delete this.__rehydrate;\n    delete this.__clone;\n\n    const forNew = !this.id;\n\n    const errors = await this.validationErrors(this, opt.ignoreFields);\n\n    if (!isEmpty(errors)) {\n      return Promise.reject(errors);\n    }\n\n    if ( this.metadata?.resourceVersion ) {\n      this.metadata.resourceVersion = `${ this.metadata.resourceVersion }`;\n    }\n\n    if ( !opt.url ) {\n      if ( forNew ) {\n        const schema = this.$getters['schemaFor'](this.type);\n        let url = schema.linkFor('collection');\n\n        if ( schema.attributes && schema.attributes.namespaced && this.metadata && this.metadata.namespace ) {\n          url += `/${ this.metadata.namespace }`;\n        }\n\n        opt.url = url;\n      } else {\n        opt.url = this.linkFor('update') || this.linkFor('self');\n      }\n    }\n\n    if ( !opt.method ) {\n      opt.method = ( forNew ? 'post' : 'put' );\n    }\n\n    if ( !opt.headers ) {\n      opt.headers = {};\n    }\n\n    if ( !opt.headers['content-type'] ) {\n      opt.headers['content-type'] = 'application/json';\n    }\n\n    if ( !opt.headers['accept'] ) {\n      opt.headers['accept'] = 'application/json';\n    }\n\n    // @TODO remove this once the API maps steve _type <-> k8s type in both directions\n    opt.data = this.toSave() || { ...this };\n\n    if (opt?.data._type) {\n      opt.data.type = opt.data._type;\n    }\n\n    if (opt?.data._name) {\n      opt.data.name = opt.data._name;\n    }\n\n    if (opt?.data._labels) {\n      opt.data.labels = opt.data._labels;\n    }\n\n    if (opt?.data._annotations) {\n      opt.data.annotations = opt.data._annotations;\n    }\n\n    // handle \"replace\" opt as a query param _replace=true for norman PUT requests\n    if (opt?.replace && opt.method === 'put') {\n      const argParam = opt.url.includes('?') ? '&' : '?';\n\n      opt.url = `${ opt.url }${ argParam }_replace=true`;\n      delete opt.replace;\n    }\n\n    try {\n      const res = await this.$dispatch('request', { opt, type: this.type } );\n\n      // Allow to process response independently from the related models\n      this.processSaveResponse(res);\n\n      // Steve sometimes returns Table responses instead of the resource you just saved.. ignore\n      if ( res && res.kind !== 'Table') {\n        await this.$dispatch('load', { data: res, existing: (forNew ? this : undefined ) });\n      }\n    } catch (e) {\n      if ( this.type && this.id && e?._status === 409) {\n        // If there's a conflict, try to load the new version\n        await this.$dispatch('find', {\n          type: this.type,\n          id:   this.id,\n          opt:  { force: true }\n        });\n      }\n\n      return Promise.reject(e);\n    }\n\n    return this;\n  }\n\n  remove() {\n    return this._remove(...arguments);\n  }\n\n  async _remove(opt = {}) {\n    if ( !opt.url ) {\n      opt.url = this.linkFor('self');\n    }\n\n    opt.method = 'delete';\n\n    const res = await this.$dispatch('request', { opt, type: this.type } );\n\n    if ( res?._status === 204 ) {\n      // If there's no body, assume the resource was immediately deleted\n      // and drop it from the store as if a remove event happened.\n      await this.$dispatch('ws.resource.remove', { data: this });\n    }\n  }\n\n  // ------------------------------------------------------------------\n\n  currentRoute() {\n    if ( process.server ) {\n      return this.$rootState.$route;\n    } else {\n      return window.$nuxt.$route;\n    }\n  }\n\n  currentRouter() {\n    if ( process.server ) {\n      return this.$rootState.$router;\n    } else {\n      return window.$nuxt.$router;\n    }\n  }\n\n  get listLocation() {\n    return {\n      name:   `c-cluster-product-resource`,\n      params: {\n        product:  this.$rootGetters['productId'],\n        cluster:  this.$rootGetters['clusterId'],\n        resource: this.type,\n      }\n    };\n  }\n\n  get _detailLocation() {\n    const schema = this.$getters['schemaFor'](this.type);\n\n    const id = this.id?.replace(/.*\\//, '');\n\n    return {\n      name:   `c-cluster-product-resource${ schema?.attributes?.namespaced ? '-namespace' : '' }-id`,\n      params: {\n        product:   this.$rootGetters['productId'],\n        cluster:   this.$rootGetters['clusterId'],\n        resource:  this.type,\n        namespace: this.metadata?.namespace,\n        id,\n      }\n    };\n  }\n\n  get detailLocation() {\n    return this._detailLocation;\n  }\n\n  goToDetail() {\n    this.currentRouter().push(this.detailLocation);\n  }\n\n  goToClone(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _CLONE,\n      [AS]:   _UNFLAG,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToEdit(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _EDIT,\n      [AS]:   _UNFLAG,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToViewConfig(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _VIEW,\n      [AS]:   _CONFIG,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToEditYaml() {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _EDIT,\n      [AS]:   _YAML\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  goToViewYaml() {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _VIEW,\n      [AS]:   _YAML\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  cloneYaml(moreQuery = {}) {\n    const location = this.detailLocation;\n\n    location.query = {\n      ...location.query,\n      [MODE]: _CLONE,\n      [AS]:   _YAML,\n      ...moreQuery\n    };\n\n    this.currentRouter().push(location);\n  }\n\n  async download() {\n    const value = await this.followLink('view', { headers: { accept: 'application/yaml' } });\n    const data = await this.$dispatch('cleanForDownload', value.data);\n\n    downloadFile(`${ this.nameDisplay }.yaml`, data, 'application/yaml');\n  }\n\n  async downloadBulk(items) {\n    const files = {};\n    const names = [];\n\n    for ( const item of items ) {\n      let name = `${ item.nameDisplay }.yaml`;\n      let i = 2;\n\n      while ( names.includes(name) ) {\n        name = `${ item.nameDisplay }_${ i++ }.yaml`;\n      }\n\n      names.push(name);\n    }\n\n    await eachLimit(items, 10, (item, idx) => {\n      return item.followLink('view', { headers: { accept: 'application/yaml' } } ).then(async(data) => {\n        const yaml = data.data || data;\n        const cleanedYaml = await this.$dispatch('cleanForDownload', yaml);\n\n        files[`resources/${ names[idx] }`] = cleanedYaml;\n      });\n    });\n\n    const zip = await generateZip(files);\n\n    downloadFile('resources.zip', zip, 'application/zip');\n  }\n\n  viewInApi() {\n    window.open(this.links.self, '_blank');\n  }\n\n  promptRemove(resources) {\n    if ( !resources ) {\n      resources = this;\n    }\n\n    this.$dispatch('promptRemove', resources);\n  }\n\n  get confirmRemove() {\n    return false;\n  }\n\n  applyDefaults() {\n  }\n\n  get urlFromAttrs() {\n    const schema = this.$getters['schemaFor'](this.type);\n    const { metadata:{ namespace = 'default' } } = this;\n    let url = schema.links.collection;\n\n    const attributes = schema?.attributes;\n\n    if (!attributes) {\n      throw new Error('Attributes must be present on the schema');\n    }\n    const { group, resource } = attributes;\n\n    url = `${ url.slice(0, url.indexOf('/v1')) }/apis/${ group }/namespaces/${ namespace }/${ resource }`;\n\n    return url;\n  }\n\n  // convert yaml to object, clean for new if creating/cloning\n  // map _type to type\n  cleanYaml(yaml, mode = 'edit') {\n    try {\n      const obj = jsyaml.load(yaml);\n\n      if (mode !== 'edit') {\n        this.$dispatch(`cleanForNew`, obj);\n      }\n\n      if (obj._type) {\n        obj.type = obj._type;\n        delete obj._type;\n      }\n      const out = jsyaml.dump(obj, { skipInvalid: true });\n\n      return out;\n    } catch (e) {\n      return null;\n    }\n  }\n\n  cleanForNew() {\n    this.$dispatch(`cleanForNew`, this);\n  }\n\n  cleanForDiff() {\n    this.$dispatch(`cleanForDiff`, this.toJSON());\n  }\n\n  yamlForSave(yaml) {\n    try {\n      const obj = jsyaml.load(yaml);\n\n      if (obj) {\n        if (this._type) {\n          obj._type = obj.type;\n        }\n\n        return jsyaml.dump(obj);\n      }\n    } catch (e) {\n      return null;\n    }\n  }\n\n  async saveYaml(yaml) {\n    await this._saveYaml(yaml);\n  }\n\n  async _saveYaml(yaml) {\n    /* Multipart support, but need to know the right cluster and work for management store\n      and \"apply\" seems to only work for create, not update.\n\n    const ary = jsyaml.loadAll(yaml); // will throw on invalid yaml, and return one or more documents (usually one)\n\n    if ( ary.length > 1 ) {\n      await this.$rootGetters['currentCluster'].doAction('apply', {\n        yaml,\n        defaultNamespace: this.metadata.namespace,\n      });\n    }\n\n    const parsed = ary[0];\n    */\n\n    const parsed = jsyaml.load(yaml); // will throw on invalid yaml, and return one or more documents (usually one)\n\n    if ( this.schema?.attributes?.namespaced && !parsed.metadata.namespace ) {\n      const err = this.$rootGetters['i18n/t']('resourceYaml.errors.namespaceRequired');\n\n      throw err;\n    }\n\n    let res;\n    const isCreate = !this.id;\n    const headers = {\n      'content-type': 'application/yaml',\n      accept:         'application/json',\n    };\n\n    if ( isCreate ) {\n      res = await this.schema.followLink('collection', {\n        method: 'POST',\n        headers,\n        data:   yaml\n      });\n    } else {\n      res = await this.followLink('update', {\n        method: 'PUT',\n        headers,\n        data:   yaml\n      });\n    }\n\n    await this.$dispatch(`load`, {\n      data:     res,\n      existing: (isCreate ? this : undefined)\n    });\n\n    if (this.isSpoofed) {\n      await this.$dispatch('cluster/findAll', { type: this.type, opt: { force: true } }, { root: true });\n    }\n  }\n\n  get modelValidationRules() {\n    const rules = [];\n\n    const customValidationRulesets = this?.customValidationRules\n      .filter((rule) => !!rule.validators || !!rule.required)\n      .map((rule) => {\n        const formRules = formRulesGenerator(this.t, { displayKey: rule?.translationKey ? this.t(rule.translationKey) : 'Value' });\n\n        return {\n          path:  rule.path,\n          rules: [\n            ...(rule.validators || []),\n            ...rule.required ? ['required'] : [],\n            ...['dnsLabel', 'dnsLabelRestricted', 'hostname'].includes(rule.type) ? [rule.type] : []\n          ]\n            .map((rule) => {\n              if (rule.includes(':')) {\n                const [ruleKey, ruleArg] = rule.split(':');\n\n                return formRules[ruleKey](ruleArg);\n              }\n\n              return formRules[rule];\n            }\n            )\n            .filter((rule) => !!rule)\n        };\n      })\n      .filter((ruleset) => ruleset.rules.length > 0);\n\n    rules.push(...customValidationRulesets);\n\n    return rules;\n  }\n\n  customValidationErrors(data, ignorePaths = []) {\n    const errors = [];\n\n    let { customValidationRules } = this;\n\n    if (!isEmpty(customValidationRules)) {\n      if (isFunction(customValidationRules)) {\n        customValidationRules = customValidationRules();\n      }\n\n      customValidationRules.filter((rule) => !ignorePaths.includes(rule.path)).forEach((rule) => {\n        const {\n          path,\n          requiredIf: requiredIfPath,\n          validators = [],\n          type: fieldType,\n        } = rule;\n        let pathValue = get(data, path);\n\n        const parsedRules = compact((validators || []));\n        let displayKey = path;\n\n        if (rule.translationKey && this.$rootGetters['i18n/exists'](rule.translationKey)) {\n          displayKey = this.t(rule.translationKey);\n        }\n\n        if (isString(pathValue)) {\n          pathValue = pathValue.trim();\n        }\n        if (requiredIfPath) {\n          const reqIfVal = get(data, requiredIfPath);\n\n          if (!isEmpty(reqIfVal) && (isEmpty(pathValue) && pathValue !== 0)) {\n            errors.push(this.t('validation.required', { key: displayKey }));\n          }\n        }\n\n        validateLength(pathValue, rule, displayKey, this.$rootGetters, errors);\n        validateChars(pathValue, rule, displayKey, this.$rootGetters, errors);\n\n        if ( !isEmpty(pathValue) && DNS_LIKE_TYPES.includes(fieldType) ) {\n          // DNS types should be lowercase\n          const tolower = (pathValue || '').toLowerCase();\n\n          if ( tolower !== pathValue ) {\n            pathValue = tolower;\n\n            Vue.set(data, path, pathValue);\n          }\n\n          errors.push(...validateDnsLikeTypes(pathValue, fieldType, displayKey, this.$rootGetters, errors));\n        }\n\n        parsedRules.forEach((validator) => {\n          const validatorAndArgs = validator.split(':');\n          const validatorName = validatorAndArgs.slice(0, 1);\n          const validatorArgs = validatorAndArgs.slice(1) || null;\n          const validatorExists = Object.prototype.hasOwnProperty.call(CustomValidators, validatorName);\n\n          if (!isEmpty(validatorName) && validatorExists) {\n            CustomValidators[validatorName](pathValue, this.$rootGetters, errors, validatorArgs, displayKey, data);\n          } else if (!isEmpty(validatorName) && !validatorExists) {\n            // Check if validator is imported from plugin\n            const pluginValidator = this.$rootState.$plugin?.getValidator(validatorName);\n\n            if (pluginValidator) {\n              pluginValidator(pathValue, this.$rootGetters, errors, validatorArgs, displayKey, data);\n            } else {\n              // eslint-disable-next-line\n              console.warn(this.t('validation.custom.missing', { validatorName }));\n            }\n          }\n        });\n      });\n    }\n\n    return errors;\n  }\n\n  validationErrors(data = this, ignoreFields) {\n    const errors = [];\n    const {\n      type: originalType,\n      schema\n    } = data;\n    const type = normalizeType(originalType);\n\n    if ( !originalType ) {\n      // eslint-disable-next-line\n      console.warn(this.t('validation.noType'), data);\n\n      return errors;\n    }\n\n    if ( !schema ) {\n      // eslint-disable-next-line\n      // console.warn(this.t('validation.noSchema'), originalType, data);\n\n      return errors;\n    }\n\n    const fields = schema.resourceFields || {};\n    const keys = Object.keys(fields);\n    let field, key, val, displayKey;\n\n    for ( let i = 0 ; i < keys.length ; i++ ) {\n      const fieldErrors = [];\n\n      key = keys[i];\n      field = fields[key];\n      val = get(data, key);\n      displayKey = displayKeyFor(type, key, this.$rootGetters);\n\n      const fieldType = field?.type ? normalizeType(field.type) : null;\n      const valIsString = isString(val);\n\n      if ( ignoreFields && ignoreFields.includes(key) ) {\n        continue;\n      }\n\n      if ( val === undefined ) {\n        val = null;\n      }\n\n      if (valIsString) {\n        if (fieldType) {\n          Vue.set(data, key, coerceStringTypeToScalarType(val, fieldType));\n        }\n\n        // Empty strings on nullable string fields -> null\n        if ( field.nullable && val.length === 0 && STRING_LIKE_TYPES.includes(fieldType)) {\n          val = null;\n\n          Vue.set(data, key, val);\n        }\n      }\n      if (fieldType === 'boolean') {\n        validateBoolean(val, field, displayKey, this.$rootGetters, fieldErrors);\n      } else {\n        validateLength(val, field, displayKey, this.$rootGetters, fieldErrors);\n        validateChars(val, field, displayKey, this.$rootGetters, fieldErrors);\n      }\n\n      if (fieldErrors.length > 0) {\n        fieldErrors.push(this.t('validation.required', { key: displayKey }));\n        errors.push(...fieldErrors);\n        continue;\n      }\n\n      // IDs claim to be these but are lies...\n      if ( key !== 'id' && !isEmpty(val) && DNS_LIKE_TYPES.includes(fieldType) ) {\n        // DNS types should be lowercase\n        const tolower = (val || '').toLowerCase();\n\n        if ( tolower !== val ) {\n          val = tolower;\n\n          Vue.set(data, key, val);\n        }\n\n        fieldErrors.push(...validateDnsLikeTypes(val, fieldType, displayKey, this.$rootGetters, fieldErrors));\n      }\n      errors.push(...fieldErrors);\n    }\n\n    return uniq([...errors, ...this.customValidationErrors(data)]);\n  }\n\n  get ownersByType() {\n    const ownerReferences = this.metadata?.ownerReferences || [];\n    const ownersByType = {};\n\n    ownerReferences.forEach((owner) => {\n      if (!ownersByType[owner.kind]) {\n        ownersByType[owner.kind] = [owner];\n      } else {\n        ownersByType[owner.kind].push(owner);\n      }\n    });\n\n    return ownersByType;\n  }\n\n  get owners() {\n    const owners = [];\n\n    for ( const kind in this.ownersByType) {\n      const schema = this.$rootGetters['cluster/schema'](kind);\n\n      if (schema) {\n        const type = schema.id;\n        const allOfResourceType = this.$rootGetters['cluster/all']( type );\n\n        this.ownersByType[kind].forEach((resource, idx) => {\n          const resourceInstance = allOfResourceType.find((resourceByType) => resourceByType?.metadata?.uid === resource.uid);\n\n          if (resourceInstance) {\n            owners.push(resourceInstance);\n          }\n        });\n      }\n    }\n\n    return owners;\n  }\n\n  get details() {\n    return this._details;\n  }\n\n  get _details() {\n    const details = [];\n\n    if (this.owners?.length > 0) {\n      details.push({\n        label:     this.t('resourceDetail.detailTop.ownerReferences', { count: this.owners.length }),\n        formatter: 'ListLinkDetail',\n        content:   this.owners.map((owner) => ({\n          key:   owner.id,\n          row:   owner,\n          col:   {},\n          value: owner.metadata.name\n        }))\n      });\n    }\n\n    if (get(this, 'metadata.deletionTimestamp')) {\n      details.push({\n        label:         this.t('resourceDetail.detailTop.deleted'),\n        formatter:     'LiveDate',\n        formatterOpts: { addSuffix: true },\n        content:       get(this, 'metadata.deletionTimestamp')\n      });\n    }\n\n    return details;\n  }\n\n  get t() {\n    return this.$rootGetters['i18n/t'];\n  }\n\n  // Returns array of MODELS that own this resource (async, network call)\n  findOwners() {\n    return this._getRelationship('owner', 'from');\n  }\n\n  // Returns array of {type, namespace, id} objects that own this resource (sync)\n  getOwners() {\n    return this._getRelationship('owner', 'from');\n  }\n\n  findOwned() {\n    return this._findRelationship('owner', 'to');\n  }\n\n  _relationshipsFor(rel, direction) {\n    const out = { selectors: [], ids: [] };\n\n    if ( !this.metadata?.relationships?.length ) {\n      return out;\n    }\n\n    for ( const r of this.metadata.relationships ) {\n      if ( rel !== 'any' && r.rel !== rel ) {\n        continue;\n      }\n\n      if ( !r[`${ direction }Type`] ) {\n        continue;\n      }\n\n      if ( r.selector ) {\n        addObjects(out.selectors, {\n          type:      r.toType,\n          namespace: r.toNamespace,\n          selector:  r.selector\n        });\n      } else {\n        const type = r[`${ direction }Type`];\n        let namespace = r[`${ direction }Namespace`];\n        let name = r[`${ direction }Id`];\n\n        if ( !namespace && name.includes('/') ) {\n          const idx = name.indexOf('/');\n\n          namespace = name.substr(0, idx);\n          name = name.substr(idx + 1);\n        }\n\n        const id = (namespace ? `${ namespace }/` : '') + name;\n\n        addObject(out.ids, {\n          type,\n          namespace,\n          name,\n          id,\n        });\n      }\n    }\n\n    return out;\n  }\n\n  _getRelationship(rel, direction) {\n    const res = this._relationshipsFor(rel, direction);\n\n    if ( res.selectors?.length ) {\n      // eslint-disable-next-line no-console\n      console.warn('Sync request for a relationship that is a selector');\n    }\n\n    return res.ids || [];\n  }\n\n  async _findRelationship(rel, direction) {\n    const { selectors, ids } = this._relationshipsFor(rel, direction);\n    const out = [];\n\n    for ( const sel of selectors ) {\n      const matching = await this.$dispatch('findMatching', sel);\n\n      addObjects(out, matching.data);\n    }\n\n    for ( const obj of ids ) {\n      const { type, id } = obj;\n      let matching = this.$getters['byId'](type, id);\n\n      if ( !matching ) {\n        try {\n          matching = await this.$dispatch('find', { type, id });\n        } catch {\n        }\n      }\n      if (matching) {\n        addObject(out, matching);\n      }\n    }\n\n    return out;\n  }\n\n  get shortId() {\n    const splitId = this.id.split('/');\n\n    return splitId.length > 1 ? splitId[1] : splitId[0];\n  }\n\n  toJSON() {\n    const out = {};\n    const keys = Object.keys(this);\n\n    for ( const k of keys ) {\n      if ( this[k]?.toJSON ) {\n        out[k] = this[k].toJSON();\n      } else {\n        out[k] = clone(this[k]);\n      }\n    }\n\n    return out;\n  }\n\n  /**\n   * Allow models to override the object that is sent when saving this resource\n   */\n  toSave() {\n    return undefined;\n  }\n\n  get creationTimestamp() {\n    return this.metadata?.creationTimestamp;\n  }\n}\n"],"mappings":"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"}]}