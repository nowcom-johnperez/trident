{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/cluster.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/cluster.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/trident/babel.config.js","mtime":1716430386784},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/thread-loader/dist/cjs.js","mtime":1716430465967},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHNlbXZlciBmcm9tICdzZW12ZXInOwppbXBvcnQgeyBDQVBJIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgeyBNQU5BR0VNRU5ULCBWSVJUVUFMX0hBUlZFU1RFUl9QUk9WSURFUiB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBTRVRUSU5HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZXR0aW5ncyc7CgovLyBGaWx0ZXIgb3V0IGFueSBjbHVzdGVycyB0aGF0IGFyZSBub3QgS3ViZXJuZXRlcyBDbHVzdGVycwpleHBvcnQgZnVuY3Rpb24gZmlsdGVyT25seUt1YmVybmV0ZXNDbHVzdGVycyhtZ210Q2x1c3RlcnMsIHN0b3JlKSB7CiAgY29uc3Qgb3BlbkhhcnZlc3RlckNvbnRhaW5lcldvcmtsb2FkID0gc3RvcmUuZ2V0dGVyc1snZmVhdHVyZXMvZ2V0J10oJ2hhcnZlc3Rlci1iYXJlbWV0YWwtY29udGFpbmVyLXdvcmtsb2FkJyk7CiAgcmV0dXJuIG1nbXRDbHVzdGVycy5maWx0ZXIoYyA9PiB7CiAgICByZXR1cm4gb3BlbkhhcnZlc3RlckNvbnRhaW5lcldvcmtsb2FkID8gdHJ1ZSA6ICFpc0hhcnZlc3RlckNsdXN0ZXIoYyk7CiAgfSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGlzSGFydmVzdGVyQ2x1c3RlcihtZ210Q2x1c3RlcikgewogIHZhciBfbWdtdENsdXN0ZXIkbWV0YWRhdGEsIF9tZ210Q2x1c3RlciRzdGF0dXM7CiAgLy8gVXNlIHRoZSBwcm92aWRlciBpZiBpdCBpcyBzZXQgb3RoZXJ3aXNlIHVzZSB0aGUgbGFiZWwKICBjb25zdCBwcm92aWRlciA9IChtZ210Q2x1c3RlciA9PT0gbnVsbCB8fCBtZ210Q2x1c3RlciA9PT0gdm9pZCAwIHx8IChfbWdtdENsdXN0ZXIkbWV0YWRhdGEgPSBtZ210Q2x1c3Rlci5tZXRhZGF0YSkgPT09IG51bGwgfHwgX21nbXRDbHVzdGVyJG1ldGFkYXRhID09PSB2b2lkIDAgfHwgKF9tZ210Q2x1c3RlciRtZXRhZGF0YSA9IF9tZ210Q2x1c3RlciRtZXRhZGF0YS5sYWJlbHMpID09PSBudWxsIHx8IF9tZ210Q2x1c3RlciRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX21nbXRDbHVzdGVyJG1ldGFkYXRhW0NBUEkuUFJPVklERVJdKSB8fCAobWdtdENsdXN0ZXIgPT09IG51bGwgfHwgbWdtdENsdXN0ZXIgPT09IHZvaWQgMCB8fCAoX21nbXRDbHVzdGVyJHN0YXR1cyA9IG1nbXRDbHVzdGVyLnN0YXR1cykgPT09IG51bGwgfHwgX21nbXRDbHVzdGVyJHN0YXR1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX21nbXRDbHVzdGVyJHN0YXR1cy5wcm92aWRlcik7CiAgcmV0dXJuIHByb3ZpZGVyID09PSBWSVJUVUFMX0hBUlZFU1RFUl9QUk9WSURFUjsKfQpleHBvcnQgZnVuY3Rpb24gaXNIYXJ2ZXN0ZXJTYXRpc2ZpZXNWZXJzaW9uKHZlcnNpb24gPSAnJykgewogIGlmICh2ZXJzaW9uLnN0YXJ0c1dpdGgoJ3YxLjIxLjQrcmtlMnInKSkgewogICAgY29uc3QgcmtlVmVyc2lvbiA9IHZlcnNpb24ucmVwbGFjZSgvLitya2Uyci9pLCAnJyk7CiAgICByZXR1cm4gTnVtYmVyKHJrZVZlcnNpb24pID49IDQ7CiAgfSBlbHNlIHsKICAgIHJldHVybiBzZW12ZXIuc2F0aXNmaWVzKHNlbXZlci5jb2VyY2UodmVyc2lvbiksICc+PXYxLjIxLjQrcmtlMnI0Jyk7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiBmaWx0ZXJIaWRkZW5Mb2NhbENsdXN0ZXIobWdtdENsdXN0ZXJzLCBzdG9yZSkgewogIGNvbnN0IGhpZGVMb2NhbFNldHRpbmcgPSBzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L2J5SWQnXShNQU5BR0VNRU5ULlNFVFRJTkcsIFNFVFRJTkcuSElERV9MT0NBTF9DTFVTVEVSKSB8fCB7fTsKICBjb25zdCB2YWx1ZSA9IGhpZGVMb2NhbFNldHRpbmcudmFsdWUgfHwgaGlkZUxvY2FsU2V0dGluZy5kZWZhdWx0IHx8ICdmYWxzZSc7CiAgY29uc3QgaGlkZUxvY2FsID0gdmFsdWUgPT09ICd0cnVlJzsKICBpZiAoIWhpZGVMb2NhbCkgewogICAgcmV0dXJuIG1nbXRDbHVzdGVyczsKICB9CiAgcmV0dXJuIG1nbXRDbHVzdGVycy5maWx0ZXIoYyA9PiB7CiAgICBjb25zdCB0YXJnZXQgPSBjLm1nbXQgfHwgYzsKICAgIHJldHVybiAhdGFyZ2V0LmlzTG9jYWw7CiAgfSk7Cn0KY29uc3QgY2x1c3Rlck5hbWVTZWdtZW50cyA9IC8oW0EtWmEtel0rfFxkKykvZzsKCi8qKgogKiBTaG9ydGVucyBhbiBpbnB1dCBzdHJpbmcgYmFzZWQgb24gdGhlIG51bWJlciBvZiBzZWdtZW50cyBpdCBjb250YWlucy4KICogQHBhcmFtIHtzdHJpbmd9IGlucHV0IC0gVGhlIGlucHV0IHN0cmluZyB0byBiZSBzaG9ydGVuZWQuCiAqIEByZXR1cm5zIHtzdHJpbmd9IC0gVGhlIHNob3J0ZW5lZCBzdHJpbmcuCiAqIEBleGFtcGxlIHNtYWxsSWRlbnRpZmllcignbG9jYWwnKSA9PiAnbGNsJwogKiBAZXhhbXBsZSBzbWFsbElkZW50aWZpZXIoJ3dvcmQtd2lkZS13ZWInKSA9PiAnd3d3JwogKi8KZXhwb3J0IGZ1bmN0aW9uIGFiYnJldmlhdGVDbHVzdGVyTmFtZShpbnB1dCkgewogIGlmICghaW5wdXQpIHsKICAgIHJldHVybiAnJzsKICB9CiAgaWYgKGlucHV0Lmxlbmd0aCA8PSAzKSB7CiAgICByZXR1cm4gaW5wdXQ7CiAgfQogIGNvbnN0IHNlZ21lbnRzID0gaW5wdXQubWF0Y2goY2x1c3Rlck5hbWVTZWdtZW50cyk7CiAgaWYgKCFzZWdtZW50cykgcmV0dXJuICcnOyAvLyBJbiBjYXNlIG5vIHZhbGlkIHNlZ21lbnRzIGFyZSBmb3VuZAoKICBsZXQgcmVzdWx0ID0gJyc7CiAgc3dpdGNoIChzZWdtZW50cy5sZW5ndGgpIHsKICAgIGNhc2UgMToKICAgICAgewogICAgICAgIGNvbnN0IHdvcmQgPSBzZWdtZW50c1swXTsKICAgICAgICByZXN1bHQgPSBgJHt3b3JkWzBdfSR7d29yZFtNYXRoLmZsb29yKHdvcmQubGVuZ3RoIC8gMildfSR7d29yZFt3b3JkLmxlbmd0aCAtIDFdfWA7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIGNhc2UgMjoKICAgICAgewogICAgICAgIGNvbnN0IHcxID0gYCR7c2VnbWVudHNbMF1bMF19YDsKICAgICAgICBjb25zdCB3MiA9IGAke3NlZ21lbnRzWzBdLmxlbmd0aCA+PSAyID8gc2VnbWVudHNbMF1bc2VnbWVudHNbMF0ubGVuZ3RoIC0gMV0gOiBzZWdtZW50c1sxXVswXX1gOwogICAgICAgIGNvbnN0IHczID0gYCR7c2VnbWVudHNbMV1bc2VnbWVudHNbMV0ubGVuZ3RoIC0gMV19YDsKICAgICAgICByZXN1bHQgPSB3MSArIHcyICsgdzM7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIGRlZmF1bHQ6CiAgICAgIHJlc3VsdCA9IHNlZ21lbnRzLnNsaWNlKDAsIDMpLm1hcChzZWdtZW50ID0+IHNlZ21lbnRbMF0pLmpvaW4oJycpOwogIH0KICByZXR1cm4gcmVzdWx0Owp9"},{"version":3,"names":["semver","CAPI","MANAGEMENT","VIRTUAL_HARVESTER_PROVIDER","SETTING","filterOnlyKubernetesClusters","mgmtClusters","store","openHarvesterContainerWorkload","getters","filter","c","isHarvesterCluster","mgmtCluster","_mgmtCluster$metadata","_mgmtCluster$status","provider","metadata","labels","PROVIDER","status","isHarvesterSatisfiesVersion","version","startsWith","rkeVersion","replace","Number","satisfies","coerce","filterHiddenLocalCluster","hideLocalSetting","HIDE_LOCAL_CLUSTER","value","default","hideLocal","target","mgmt","isLocal","clusterNameSegments","abbreviateClusterName","input","length","segments","match","result","word","Math","floor","w1","w2","w3","slice","map","segment","join"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/cluster.js"],"sourcesContent":["import semver from 'semver';\nimport { CAPI } from '@shell/config/labels-annotations';\nimport { MANAGEMENT, VIRTUAL_HARVESTER_PROVIDER } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\n\n// Filter out any clusters that are not Kubernetes Clusters\nexport function filterOnlyKubernetesClusters(mgmtClusters, store) {\n  const openHarvesterContainerWorkload = store.getters['features/get']('harvester-baremetal-container-workload');\n\n  return mgmtClusters.filter((c) => {\n    return openHarvesterContainerWorkload ? true : !isHarvesterCluster(c);\n  });\n}\n\nexport function isHarvesterCluster(mgmtCluster) {\n  // Use the provider if it is set otherwise use the label\n  const provider = mgmtCluster?.metadata?.labels?.[CAPI.PROVIDER] || mgmtCluster?.status?.provider;\n\n  return provider === VIRTUAL_HARVESTER_PROVIDER;\n}\n\nexport function isHarvesterSatisfiesVersion(version = '') {\n  if (version.startsWith('v1.21.4+rke2r')) {\n    const rkeVersion = version.replace(/.+rke2r/i, '');\n\n    return Number(rkeVersion) >= 4;\n  } else {\n    return semver.satisfies(semver.coerce(version), '>=v1.21.4+rke2r4');\n  }\n}\n\nexport function filterHiddenLocalCluster(mgmtClusters, store) {\n  const hideLocalSetting = store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.HIDE_LOCAL_CLUSTER) || {};\n  const value = hideLocalSetting.value || hideLocalSetting.default || 'false';\n  const hideLocal = value === 'true';\n\n  if (!hideLocal) {\n    return mgmtClusters;\n  }\n\n  return mgmtClusters.filter((c) => {\n    const target = c.mgmt || c;\n\n    return !target.isLocal;\n  });\n}\n\nconst clusterNameSegments = /([A-Za-z]+|\\d+)/g;\n\n/**\n * Shortens an input string based on the number of segments it contains.\n * @param {string} input - The input string to be shortened.\n * @returns {string} - The shortened string.\n * @example smallIdentifier('local') => 'lcl'\n * @example smallIdentifier('word-wide-web') => 'www'\n */\nexport function abbreviateClusterName(input) {\n  if (!input) {\n    return '';\n  }\n\n  if (input.length <= 3) {\n    return input;\n  }\n\n  const segments = input.match(clusterNameSegments);\n\n  if (!segments) return ''; // In case no valid segments are found\n\n  let result = '';\n\n  switch (segments.length) {\n  case 1: {\n    const word = segments[0];\n\n    result = `${ word[0] }${ word[Math.floor(word.length / 2)] }${ word[word.length - 1] }`;\n    break;\n  }\n  case 2: {\n    const w1 = `${ segments[0][0] }`;\n    const w2 = `${ segments[0].length >= 2 ? segments[0][segments[0].length - 1] : segments[1][0] }`;\n    const w3 = `${ segments[1][segments[1].length - 1] }`;\n\n    result = w1 + w2 + w3;\n    break;\n  }\n  default:\n    result = segments.slice(0, 3).map((segment) => segment[0]).join('');\n  }\n\n  return result;\n}\n"],"mappings":"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"}]}