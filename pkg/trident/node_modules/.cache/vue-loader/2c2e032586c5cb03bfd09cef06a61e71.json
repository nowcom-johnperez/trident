{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/EmberPage.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/EmberPage.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgeyBtYXBHZXR0ZXJzLCBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBOQU1FIGFzIE1BTkFHRVIgfSBmcm9tICdAc2hlbGwvY29uZmlnL3Byb2R1Y3QvbWFuYWdlcic7CmltcG9ydCB7IENBUEksIE1BTkFHRU1FTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgU0VUVElORyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2V0dGluZ3MnOwppbXBvcnQgeyBmaW5kRW1iZXJQYWdlLCBjbGVhckVtYmVySW5hY3RpdmVUaW1lciwgc3RhcnRFbWJlckluYWN0aXZlVGltZXIsIEVNQkVSX0ZSQU1FIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2VtYmVyLXBhZ2UnOwoKY29uc3QgRU1CRVJfRlJBTUVfSElERV9DTEFTUyA9ICdlbWJlci1pZnJhbWUtaGlkZGVuJzsKY29uc3QgUEFHRV9DSEVDS19USU1FT1VUID0gMzAwMDA7CmNvbnN0IFdJTkRPV19NQU5BR0VSID0gJ3dpbmRvd21hbmFnZXInOwoKLy8gUGFnZXMgdGhhdCB3ZSBzaG91bGQgaW50ZXJjZXB0IHdoZW4gbG9hZGVkIGluIHRoZSBJRlJBTUUgYW5kIGluc3RlYWQKLy8gbmF2aWdhdGUgdG8gYSBwYWdlIGluIENsdXN0ZXIgRGFzaGJvYXJkCi8vIGV4YW1wbGUgaWYgdGhlIEVtYmVyIGNsdXN0ZXJzIHBhZ2UgdGhhdCBpcyBuYXZpZ2F0ZWQgdG8gd2hlbiB0aGUgdXNlciBwcmVzc2VzIGNhbmNlbCBvbiBzb21lIHBhZ2VzCi8vIHdlIGludGVyY2VwdCB0aGlzIGFuZCBnbyB0aGUgdGhlIHZ1ZSBDbHVzdGVycyBwYWdlIGluc3RlYWQKY29uc3QgSU5URVJDRVBUUyA9IHsKICAnZ2xvYmFsLWFkbWluLmNsdXN0ZXJzLmluZGV4JzogewogICAgbmFtZTogICAnYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2UnLAogICAgcGFyYW1zOiB7CiAgICAgIGNsdXN0ZXI6ICAnJywKICAgICAgcHJvZHVjdDogIE1BTkFHRVIsCiAgICAgIHJlc291cmNlOiBDQVBJLlJBTkNIRVJfQ0xVU1RFUiwKICAgIH0KICB9LAogICdhdXRoZW50aWNhdGVkLmNsdXN0ZXIuaW5kZXgnOiB7CiAgICBuYW1lOiAgICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZScsCiAgICBwYXJhbXM6IHsKICAgICAgY2x1c3RlcjogICcnLAogICAgICBwcm9kdWN0OiAgTUFOQUdFUiwKICAgICAgcmVzb3VyY2U6IENBUEkuUkFOQ0hFUl9DTFVTVEVSLAogICAgfQogIH0sCiAgJ2dsb2JhbC1hZG1pbi5jYXRhbG9nJzogewogICAgbmFtZTogICAnYy1jbHVzdGVyLW1jYXBwcy1wYWdlcy1wYWdlJywKICAgIHBhcmFtczogewogICAgICBjbHVzdGVyOiAnbG9jYWwnLAogICAgICBwcm9kdWN0OiAnbWNhcHBzJywKICAgICAgcGFnZTogICAgJ2NhdGFsb2dzJwogICAgfQogIH0sCiAgJ2F1dGhlbnRpY2F0ZWQuY2x1c3Rlci5pc3Rpby5jbHVzdGVyLXNldHRpbmcnOiB7IG5hbWU6ICdjLWNsdXN0ZXItZXhwbG9yZXItdG9vbHMnIH0sCn07CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBMb2FkaW5nIH0sCgogIHByb3BzOiB7CiAgICBzcmM6IHsKICAgICAgdHlwZTogICAgIFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBwb3A6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBpbmxpbmU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKICAgIC8vIGZvcmNlIGlubGluZSBwYWdlcyB0byByZXVzZSBjYWNoZWQgRW1iZXIgcGFnZXMKICAgIGZvcmNlSW5saW5lUmV1c2U6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICAvLyBEbyBub3QgcmV1c2UgY2FjaGVkIHBhZ2VzCiAgICBmb3JjZU5ldzogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpZnJhbWVFbDogICAgICAgICBudWxsLAogICAgICBsb2FkZWQ6ICAgICAgICAgICB0cnVlLAogICAgICBsb2FkUmVxdWlyZWQ6ICAgICBmYWxzZSwKICAgICAgZW1iZXJDaGVjazogICAgICAgbnVsbCwKICAgICAgZXJyb3I6ICAgICAgICAgICAgZmFsc2UsCiAgICAgIGhlaWdodFN5bmM6ICAgICAgIG51bGwsCiAgICAgIGZyYW1lSGVpZ2h0OiAgICAgIC0xLAogICAgICBmcmFtZVdpZHRoOiAgICAgICAtMSwKICAgICAgd21IZWlnaHQ6ICAgICAgICAgLTEsCiAgICAgIHNob3dIZWFkZXJCYW5uZXI6IGZhbHNlLAogICAgICBzaG93Rm9vdGVyQmFubmVyOiBmYWxzZSwKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoeyB0aGVtZTogJ3ByZWZzL3RoZW1lJyB9KSwKICAgIC4uLm1hcEdldHRlcnMoWydjbHVzdGVySWQnLCAncHJvZHVjdElkJ10pLAogICAgLi4ubWFwU3RhdGUoJ3dtJywgWydvcGVuJ10pLAogICAgbG9jYWxlKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi9jdXJyZW50J10oKTsKICAgIH0KICB9LAoKICB3YXRjaDogewogICAgdGhlbWUodGhlbWUpIHsKICAgICAgdGhpcy5ub3RpZnlUaGVtZSh0aGVtZSk7CiAgICB9LAoKICAgIC8vIFVwZGF0ZSB3aGVuIHNvdXJjZSBwcm9wZXJ0eSBjaGFuZ2VzCiAgICBzcmMobnVlLCBvbGQpIHsKICAgICAgaWYgKG51ZSAhPT0gb2xkKSB7CiAgICAgICAgdGhpcy5pbml0RnJhbWUoKTsKICAgICAgfQogICAgfSwKCiAgICAvLyBXYXRjaCBvbiB0aGUgd2luZG93IG1hbmFnZXIgb3BlbmluZy9jbG9zaW5nCiAgICBvcGVuKG51ZSwgb2xkKSB7CiAgICAgIGlmIChudWUgIT09IG9sZCkgewogICAgICAgIGlmIChudWUpIHsKICAgICAgICAgIHRoaXMuc3luY1NpemUoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuaGVpZ2h0U3luYyk7CiAgICAgICAgICBjb25zdCBpZnJhbWVFbCA9IGZpbmRFbWJlclBhZ2UoKTsKCiAgICAgICAgICAvLyBSZXNldCB0aGUgaGVpZ2h0IHdoZW4gdGhlIHdpbmRvdyBtYW5hZ2VyIGlzIGNsb3NlZAogICAgICAgICAgdGhpcy5oZWlnaHRTeW5jID0gbnVsbDsKICAgICAgICAgIHRoaXMud21IZWlnaHQgPSAtMTsKCiAgICAgICAgICBpZiAoaWZyYW1lRWwpIHsKICAgICAgICAgICAgaWZyYW1lRWwuc3R5bGUuaGVpZ2h0ID0gJyc7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgbG9jYWxlKCkgewogICAgICB0aGlzLnN5bmNMb2NhbGUoKTsKICAgIH0KICB9LAoKICBtb3VudGVkKCkgewogICAgLy8gRW1iZWRkZWQgcGFnZSB2aXNpdGVkLCBzbyBjYW5jZWwgdGltZSB0byByZW1vdmUgSUZSQU1FIHdoZW4gaW5hY3RpdmUKICAgIGNsZWFyRW1iZXJJbmFjdGl2ZVRpbWVyKCk7CiAgICB3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIHRoaXMucmVjZWl2ZU1lc3NhZ2UpOwogICAgdGhpcy5pbml0RnJhbWUoKTsKICB9LAoKICBiZWZvcmVEZXN0cm95KCkgewogICAgd2luZG93LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21lc3NhZ2UnLCB0aGlzLnJlY2VpdmVNZXNzYWdlKTsKCiAgICBpZiAodGhpcy5oZWlnaHRTeW5jKSB7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhlaWdodFN5bmMpOwogICAgfQoKICAgIGlmICh0aGlzLmlubGluZSkgewogICAgICBjb25zdCBpZnJhbWVFbCA9IGZpbmRFbWJlclBhZ2UoKTsKCiAgICAgIC8vIFJlbW92ZSB0aGUgSUZSQU1FIC0gd2UgY2FuJ3QgcmV1c2UgaXQgb25lIGl0cyBiZWVuIG1vdmVkIGlubGluZQogICAgICBpZiAoaWZyYW1lRWwpIHsKICAgICAgICBpZnJhbWVFbC5yZW1vdmUoKTsKICAgICAgfQogICAgfQoKICAgIC8vIEhpZGUgdGhlIGlmcmFtZQogICAgaWYgKHRoaXMuaWZyYW1lRWwpIHsKICAgICAgdGhpcy5pZnJhbWVFbC5jbGFzc0xpc3QuYWRkKEVNQkVSX0ZSQU1FX0hJREVfQ0xBU1MpOwogICAgfQoKICAgIC8vIENhbmNlbCBhbnkgcGVuZGluZyBodHRwIHJlcXVlc3QgdG8gY2hlY2sgRW1iZXIgVUkgYXZhaWxhYmlsaXR5CiAgICBpZiAodGhpcy5lbWJlckNoZWNrKSB7CiAgICAgIHRoaXMuZW1iZXJDaGVjay5jYW5jZWwoJ1VzZXIgbGVmdCBwYWdlJyk7CiAgICB9CgogICAgLy8gU2V0IHVwIGEgdGltZXIgdG8gcmVtb3ZlIHRoZSBJRnJhbWUgYWZ0ZXIgYSBwZXJpb2Qgb2YgaW5hY3Rpdml0eQogICAgc3RhcnRFbWJlckluYWN0aXZlVGltZXIoKTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBhZGRCYW5uZXJDbGFzc2VzKGVsbSwgcHJlZml4KSB7CiAgICAgIGlmICghZWxtKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBlbG0uY2xhc3NMaXN0LnJlbW92ZShgJHsgcHJlZml4IH0tdG9wLWJhbm5lcmApOwogICAgICBlbG0uY2xhc3NMaXN0LnJlbW92ZShgJHsgcHJlZml4IH0tb25lLWJhbm5lcmApOwogICAgICBlbG0uY2xhc3NMaXN0LnJlbW92ZShgJHsgcHJlZml4IH0tdHdvLWJhbm5lcnNgKTsKCiAgICAgIGlmICh0aGlzLnNob3dIZWFkZXJCYW5uZXIpIHsKICAgICAgICBlbG0uY2xhc3NMaXN0LmFkZChgJHsgcHJlZml4IH0tdG9wLWJhbm5lcmApOwogICAgICAgIGlmICh0aGlzLnNob3dGb290ZXJCYW5uZXIpIHsKICAgICAgICAgIGVsbS5jbGFzc0xpc3QuYWRkKGAkeyBwcmVmaXggfS10d28tYmFubmVyc2ApOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh0aGlzLnNob3dGb290ZXJCYW5uZXIpIHsKICAgICAgICBlbG0uY2xhc3NMaXN0LmFkZChgJHsgcHJlZml4IH0tb25lLWJhbm5lcmApOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGluaXRGcmFtZSgpIHsKICAgICAgY29uc3QgYmFubmVyU2V0dGluZyA9IGF3YWl0IHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYnlJZCddKE1BTkFHRU1FTlQuU0VUVElORywgU0VUVElORy5CQU5ORVJTKTsKCiAgICAgIHRyeSB7CiAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZShiYW5uZXJTZXR0aW5nLnZhbHVlKTsKCiAgICAgICAgdGhpcy5zaG93SGVhZGVyQmFubmVyID0gcGFyc2VkLnNob3dIZWFkZXIgPT09ICd0cnVlJzsKICAgICAgICB0aGlzLnNob3dGb290ZXJCYW5uZXIgPSBwYXJzZWQuc2hvd0Zvb3RlciA9PT0gJ3RydWUnOwogICAgICB9IGNhdGNoIHt9CgogICAgICB0aGlzLmxvYWRlZCA9IHRydWU7CiAgICAgIHRoaXMubG9hZFJlcXVpcmVkID0gZmFsc2U7CgogICAgICAvLyBHZXQgdGhlIGV4aXN0aW5nIGlmcmFtZSBpZiBpdCBleGlzdHMKICAgICAgbGV0IGlmcmFtZUVsID0gZmluZEVtYmVyUGFnZSgpOwoKICAgICAgLy8gSWYgdGhlIGlmcmFtZSBhbHJlYWR5IGV4aXN0cywgY2hlY2sgaWYgaXQgaXMgcmVhZHkgZm9yIHVzIHRvIHJldXNlCiAgICAgIC8vIGJ5IG5hdmlnYXRpbmcgd2l0aGluIHRoZSBhcHAgdGhhdCBpcyBhbHJlYWR5IGxvYWRlZAogICAgICBpZiAoaWZyYW1lRWwgIT09IG51bGwpIHsKICAgICAgICBjb25zdCByZWFkeSA9IGlmcmFtZUVsLmdldEF0dHJpYnV0ZSgnZGF0YS1yZWFkeScpID09PSAndHJ1ZSc7CiAgICAgICAgY29uc3QgbGFzdERpZExvYWQgPSBpZnJhbWVFbC5nZXRBdHRyaWJ1dGUoJ2RhdGEtbG9hZGVkJykgPT09ICd0cnVlJzsKICAgICAgICBjb25zdCBkb05vdFJldXNlID0gKCEhdGhpcy5pbmxpbmUgJiYgIXRoaXMuZm9yY2VJbmxpbmVSZXVzZSkgfHwgdGhpcy5mb3JjZU5ldzsKICAgICAgICAvLyBXYXMgbm90IGlubGluZSBidXQgbm93IGlzIC0gY2FuJ3QgcmV1c2UKICAgICAgICBjb25zdCBpbmxpbmVDaGFuZ2VkID0gISF0aGlzLmlubGluZSAmJiAoaWZyYW1lRWwucGFyZW50RWxlbWVudCA9PT0gZG9jdW1lbnQuYm9keSk7CgogICAgICAgIGlmICghcmVhZHkgfHwgZG9Ob3RSZXVzZSB8fCAhbGFzdERpZExvYWQgfHwgaW5saW5lQ2hhbmdlZCkgewogICAgICAgICAgaWZyYW1lRWwucmVtb3ZlKCk7CiAgICAgICAgICBpZnJhbWVFbCA9IG51bGw7CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoaWZyYW1lRWwgPT09IG51bGwgJiYgcHJvY2Vzcy5lbnYuZGV2KSB7CiAgICAgICAgLy8gRmV0Y2ggYSBwYWdlIHRvIGNoZWNrIHRoYXQgdGhlIEVtYmVyIFVJIGlzIGF2YWlsYWJsZQogICAgICAgIHRyeSB7CiAgICAgICAgICB0aGlzLmVycm9yID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmxvYWRlZCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5lbWJlckNoZWNrID0gdGhpcy4kYXhpb3MuQ2FuY2VsVG9rZW4uc291cmNlKCk7CgogICAgICAgICAgLy8gTWFrZSBhIGhlYWQgcmVxdWVzdCB0byBhIGtub3duIGFzc2V0IG9mIHRoZSBFbWJlciBVSQogICAgICAgICAgY29uc3QgcGFnZVVybCA9IGAkeyB3aW5kb3cubG9jYXRpb24ub3JpZ2luIH0vYXNzZXRzL2ltYWdlcy9sb2dvcy9ya2Uuc3ZnYDsKICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4kYXhpb3MuaGVhZChwYWdlVXJsLCB7CiAgICAgICAgICAgIHRpbWVvdXQ6ICAgICBQQUdFX0NIRUNLX1RJTUVPVVQsCiAgICAgICAgICAgIGNhbmNlbFRva2VuOiB0aGlzLmVtYmVyQ2hlY2sudG9rZW4sCiAgICAgICAgICB9KTsKCiAgICAgICAgICBpZiAocmVzcG9uc2Uuc3RhdHVzICE9PSAyMDApIHsKICAgICAgICAgICAgdGhpcy5sb2FkZWQgPSB0cnVlOwogICAgICAgICAgICB0aGlzLmVycm9yID0gdHJ1ZTsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgICBpZiAoIXRoaXMuJGF4aW9zLmlzQ2FuY2VsKGUpKSB7CiAgICAgICAgICAgIHRoaXMubG9hZGVkID0gdHJ1ZTsKICAgICAgICAgICAgdGhpcy5lcnJvciA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAodGhpcy5lcnJvcikgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKGlmcmFtZUVsID09PSBudWxsKSB7CiAgICAgICAgaWZyYW1lRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTsKICAgICAgICBpZnJhbWVFbC5zZXRBdHRyaWJ1dGUoJ2lkJywgRU1CRVJfRlJBTUUpOwogICAgICAgIGlmcmFtZUVsLnNldEF0dHJpYnV0ZSgnZGF0YS10ZXN0aWQnLCBFTUJFUl9GUkFNRSk7CiAgICAgICAgaWZyYW1lRWwuY2xhc3NMaXN0LmFkZChFTUJFUl9GUkFNRV9ISURFX0NMQVNTKTsKCiAgICAgICAgaWYgKHRoaXMuaW5saW5lKSB7CiAgICAgICAgICBjb25zdCBmcmFtZVBhcmVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuaW5saW5lKTsKCiAgICAgICAgICBmcmFtZVBhcmVudC5hcHBlbmRDaGlsZChpZnJhbWVFbCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kKGlmcmFtZUVsKTsKICAgICAgICB9CiAgICAgICAgaWZyYW1lRWwuc2V0QXR0cmlidXRlKCdzcmMnLCB0aGlzLnNyYyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gUmVzZXQgc2Nyb2xsIHBvc2l0aW9uIHRvIHRvcAogICAgICAgIGlmIChpZnJhbWVFbC5jb250ZW50V2luZG93Py5zY3JvbGxUbykgewogICAgICAgICAgaWZyYW1lRWwuY29udGVudFdpbmRvdy5zY3JvbGxUbygwLCAwKTsKICAgICAgICB9CgogICAgICAgIC8vIFBvc3QgYSBtZXNzYWdlIHRvIG5hdmlnYXRlIHdpdGhpbiB0aGUgZXhpc3RpbmcgYXBwCiAgICAgICAgaWZyYW1lRWwuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICBhY3Rpb246ICduYXZpZ2F0ZScsCiAgICAgICAgICBuYW1lOiAgIHRoaXMuc3JjCiAgICAgICAgfSk7CgogICAgICAgIC8vIEVuc3VyZSBpZnJhbWUgZ2V0cyB0aGUgbGF0ZXN0IHRoZW1lIGlmIGl0IGhhcyBjaGFuZ2VkCiAgICAgICAgdGhpcy5ub3RpZnlUaGVtZSh0aGlzLnRoZW1lKTsKCiAgICAgICAgY29uc3QgY3VycmVudFVybCA9IGlmcmFtZUVsLmNvbnRlbnRXaW5kb3cubG9jYXRpb24ucGF0aG5hbWU7CiAgICAgICAgY29uc3Qgc3JjID0gdGhpcy50cmltVVJMKHRoaXMuc3JjKTsKCiAgICAgICAgaWYgKHNyYyAhPT0gY3VycmVudFVybCkgewogICAgICAgICAgaWZyYW1lRWwuY2xhc3NMaXN0LmFkZChFTUJFUl9GUkFNRV9ISURFX0NMQVNTKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgaWZyYW1lRWwuY2xhc3NMaXN0LnJlbW92ZShFTUJFUl9GUkFNRV9ISURFX0NMQVNTKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuaWZyYW1lRWwgPSBpZnJhbWVFbDsKCiAgICAgIGlmICghdGhpcy5pbmxpbmUpIHsKICAgICAgICBpZnJhbWVFbC5jbGFzc0xpc3QuYWRkKCdlbWJlci1pZnJhbWUnKTsKICAgICAgICBpZnJhbWVFbC5jbGFzc0xpc3QucmVtb3ZlKCdlbWJlci1pZnJhbWUtaW5saW5lJyk7CiAgICAgICAgdGhpcy5hZGRCYW5uZXJDbGFzc2VzKHRoaXMuJHJlZnMuZW1iZXJQYWdlLCAnZml4ZWQnKTsKICAgICAgICB0aGlzLmFkZEJhbm5lckNsYXNzZXMoaWZyYW1lRWwsICdlbWJlci1pZnJhbWUnKTsKCiAgICAgICAgLy8gSWYgdGhlIHdpbmRvdyBtYW5hZ2VyIGlzIG9wZW4sIHN5bmMgdGhlIHNpemUKICAgICAgICBpZiAodGhpcy5vcGVuKSB7CiAgICAgICAgICB0aGlzLnN5bmNTaXplKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmcmFtZUVsLmNsYXNzTGlzdC5yZW1vdmUoJ2VtYmVyLWlmcmFtZScpOwogICAgICAgIGlmcmFtZUVsLmNsYXNzTGlzdC5hZGQoJ2VtYmVyLWlmcmFtZS1pbmxpbmUnKTsKICAgICAgICBpZnJhbWVFbC5oZWlnaHQgPSAwOwogICAgICAgIHRoaXMuc3luY1NpemUoKTsKICAgICAgfQogICAgfSwKCiAgICBzeW5jU2l6ZSgpIHsKICAgICAgaWYgKHRoaXMuaGVpZ2h0U3luYykgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmhlaWdodFN5bmMpOwogICAgICB9CgogICAgICB0aGlzLmhlaWdodFN5bmMgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmRvc3luY1NpemUoKTsKICAgICAgICB0aGlzLnN5bmNTaXplKCk7CiAgICAgIH0sIDUwMCk7CiAgICB9LAoKICAgIGRvc3luY1NpemUoKSB7CiAgICAgIGlmICh0aGlzLmlubGluZSkgewogICAgICAgIGNvbnN0IGlmcmFtZUVsID0gZmluZEVtYmVyUGFnZSgpOwogICAgICAgIGNvbnN0IGRvYyA9IGlmcmFtZUVsLmNvbnRlbnRXaW5kb3cuZG9jdW1lbnQ7CiAgICAgICAgY29uc3QgYXBwID0gZG9jLmdldEVsZW1lbnRCeUlkKCdhcHBsaWNhdGlvbicpOwogICAgICAgIGNvbnN0IGggPSBhcHA/Lm9mZnNldEhlaWdodDsKCiAgICAgICAgaWYgKGggJiYgdGhpcy5mcmFtZUhlaWdodCAhPT0gaCkgewogICAgICAgICAgdGhpcy5mcmFtZUhlaWdodCA9IGg7CiAgICAgICAgICBpZnJhbWVFbC5oZWlnaHQgPSBoOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgZnJhbWVQYXJlbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmlubGluZSk7CiAgICAgICAgY29uc3QgdyA9IGZyYW1lUGFyZW50Lm9mZnNldFdpZHRoOwoKICAgICAgICBpZiAodyAmJiB0aGlzLmZyYW1lV2lkdGggIT09IHcpIHsKICAgICAgICAgIHRoaXMuZnJhbWVXaWR0aCA9IHc7CiAgICAgICAgICBpZnJhbWVFbC53aWR0aCA9IHc7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIC8vIEVuc3VyZSB0aGUgaGVpZ2h0IHRha2VzIGludG8gY291bnQgdGhlIHdpbmRvdyBtYW5nZXIgaGVpZ2h0CiAgICAgICAgY29uc3Qgd20gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChXSU5ET1dfTUFOQUdFUik7CgogICAgICAgIGlmICh3bSkgewogICAgICAgICAgY29uc3Qgd21oID0gd20ub2Zmc2V0SGVpZ2h0OwoKICAgICAgICAgIGlmICh3bWggIT09IHRoaXMud21IZWlnaHQpIHsKICAgICAgICAgICAgLy8gQWRqdXN0IHRoZSBib3R0b20KICAgICAgICAgICAgY29uc3QgaWZyYW1lRWwgPSBmaW5kRW1iZXJQYWdlKCk7CgogICAgICAgICAgICBpZnJhbWVFbC5zdHlsZS5oZWlnaHQgPSBgY2FsYygxMDB2aCAtIHZhcigtLWhlYWRlci1oZWlnaHQpIC0gJHsgd21oIH1weClgOwogICAgICAgICAgICB0aGlzLndtSGVpZ2h0ID0gd21oOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQogICAgfSwKCiAgICBub3RpZnlUaGVtZSh0aGVtZSkgewogICAgICBjb25zdCBpZnJhbWVFbCA9IGZpbmRFbWJlclBhZ2UoKTsKCiAgICAgIGlmIChpZnJhbWVFbCkgewogICAgICAgIGNvbnN0IGVtYmVyVGhlbWUgPSB0aGVtZSA9PT0gJ2xpZ2h0JyA/ICd1aS1saWdodCcgOiAndWktZGFyayc7CgogICAgICAgIC8vIEVuc3VyZSB0aGUgZW1iZWRkZWQgVUkgdXNlcyB0aGUgY29ycmVjdCB0aGVtZQogICAgICAgIGlmcmFtZUVsLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoewogICAgICAgICAgYWN0aW9uOiAnc2V0LXRoZW1lJywKICAgICAgICAgIG5hbWU6ICAgZW1iZXJUaGVtZQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIHRyaW1VUkwodXJsKSB7CiAgICAgIGlmICh1cmwgJiYgdXJsLmVuZHNXaXRoKCcvJykpIHsKICAgICAgICB1cmwgPSB1cmwuc3Vic3RyKDAsIHVybC5sZW5ndGggLSAxKTsKICAgICAgfQoKICAgICAgcmV0dXJuIHVybDsKICAgIH0sCgogICAgLy8gV2UgdXNlIFBvc3RNZXNzYWdlIGJldHdlZW4gdGhlIEVtYmVkZGVkIEVtYmVyIFVJIGFuZCB0aGUgRGFzaGJvYXJkIFVJCiAgICByZWNlaXZlTWVzc2FnZShldmVudCkgewogICAgICBjb25zdCBtc2cgPSBldmVudC5kYXRhOwoKICAgICAgaWYgKG1zZy5hY3Rpb24gPT09ICduYXZpZ2F0ZScpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7CiAgICAgICAgICBuYW1lOiAgICdjLWNsdXN0ZXItZXhwbG9yZXInLAogICAgICAgICAgcGFyYW1zOiB7IGNsdXN0ZXI6IG1zZy5jbHVzdGVyIH0KICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChtc2cuYWN0aW9uID09PSAnYmVmb3JlLW5hdmlnYXRpb24nKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnYmVmb3JlLW5hdicsIG1zZy50YXJnZXQpOwoKICAgICAgICAvLyBFbWJlciB3aWxsVHJhbnNpdGlvbiBldmVudAogICAgICAgIGlmIChJTlRFUkNFUFRTW21zZy50YXJnZXRdKSB7CiAgICAgICAgICBjb25zdCBkZXN0ID0gSU5URVJDRVBUU1ttc2cudGFyZ2V0XTsKCiAgICAgICAgICBpZiAodGhpcy5pc0N1cnJlbnRSb3V0ZShkZXN0KSkgewogICAgICAgICAgICB0aGlzLnNldExvYWRlZCh0cnVlKTsKCiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KCiAgICAgICAgICB0aGlzLnNldExvYWRlZChmYWxzZSk7CiAgICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh0aGlzLmZpbGxSb3V0ZShkZXN0KSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKG1zZy5hY3Rpb24gPT09ICdsb2FkaW5nJykgewogICAgICAgIHRoaXMuc2V0TG9hZGVkKCFtc2cuc3RhdGUpOwogICAgICAgIHRoaXMudXBkYXRlRnJhbWVWaXNpYmlsaXR5KCk7CiAgICAgIH0gZWxzZSBpZiAobXNnLmFjdGlvbiA9PT0gJ3JlYWR5JykgewogICAgICAgIC8vIEVjaG8gYmFjayBhIHBpbmcKICAgICAgICB0aGlzLmlmcmFtZUVsLmNvbnRlbnRXaW5kb3cucG9zdE1lc3NhZ2UoeyBhY3Rpb246ICdlY2hvLWJhY2snIH0pOwogICAgICAgIHRoaXMuaWZyYW1lRWwuc2V0QXR0cmlidXRlKCdkYXRhLXJlYWR5JywgdHJ1ZSk7CgogICAgICAgIGNvbnN0IGRvYyA9IHRoaXMuaWZyYW1lRWwuY29udGVudFdpbmRvdz8uZG9jdW1lbnQ/LmJvZHk7CgogICAgICAgIGlmICh0aGlzLmlubGluZSkgewogICAgICAgICAgZG9jLmNsYXNzTGlzdC5hZGQoJ2VtYmVkZGVkLW5vLW92ZXJmbG93Jyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRvYy5jbGFzc0xpc3QucmVtb3ZlKCdlbWJlZGRlZC1uby1vdmVyZmxvdycpOwogICAgICAgIH0KICAgICAgICB0aGlzLnN5bmNMb2NhbGUoKTsKICAgICAgfSBlbHNlIGlmIChtc2cuYWN0aW9uID09PSAnbmVlZC10by1sb2FkJykgewogICAgICAgIHRoaXMubG9hZFJlcXVpcmVkID0gdHJ1ZTsKICAgICAgfSBlbHNlIGlmIChtc2cuYWN0aW9uID09PSAnZGlkLXRyYW5zaXRpb24nKSB7CiAgICAgICAgaWYgKCF0aGlzLmxvYWRSZXF1aXJlZCkgewogICAgICAgICAgdGhpcy5zZXRMb2FkZWQodHJ1ZSk7CiAgICAgICAgICB0aGlzLnVwZGF0ZUZyYW1lVmlzaWJpbGl0eSgpOwogICAgICAgICAgdGhpcy5kb3N5bmNTaXplKCk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKG1zZy5hY3Rpb24gPT09ICdkYXNoYm9hcmQnKSB7CiAgICAgICAgdGhpcy5pZnJhbWVFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtcmVhZHknLCBmYWxzZSk7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UobXNnLnBhZ2UpOwogICAgICB9IGVsc2UgaWYgKG1zZy5hY3Rpb24gPT09ICdyZWxvYWQnKSB7CiAgICAgICAgdGhpcy5sb2FkZWQgPSBmYWxzZTsKICAgICAgICB0aGlzLmlmcmFtZUVsLnJlbW92ZSgpOwogICAgICAgIHRoaXMuaW5pdEZyYW1lKCk7CiAgICAgIH0gZWxzZSBpZiAoIG1zZy5hY3Rpb24gPT09ICdsb2dvdXQnICkgewogICAgICAgIHRoaXMubG9hZGVkID0gZmFsc2U7CiAgICAgICAgdGhpcy5pZnJhbWVFbC5yZW1vdmUoKTsKICAgICAgICB0aGlzLmluaXRGcmFtZSgpOwogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhdXRoL2xvZ291dCcpOwogICAgICB9CiAgICB9LAoKICAgIHNldExvYWRlZChsb2FkZWQpIHsKICAgICAgdGhpcy5sb2FkZWQgPSBsb2FkZWQ7CiAgICAgIGlmICh0aGlzLmlmcmFtZUVsKSB7CiAgICAgICAgdGhpcy5pZnJhbWVFbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtbG9hZGVkJywgbG9hZGVkKTsKICAgICAgfQogICAgfSwKCiAgICB1cGRhdGVGcmFtZVZpc2liaWxpdHkoKSB7CiAgICAgIGlmICh0aGlzLmxvYWRlZCkgewogICAgICAgIGlmICh0aGlzLmlmcmFtZUVsKSB7CiAgICAgICAgICB0aGlzLmlmcmFtZUVsLmNsYXNzTGlzdC5yZW1vdmUoRU1CRVJfRlJBTUVfSElERV9DTEFTUyk7CgogICAgICAgICAgLy8gTm90aWZ5IHRoZSBlbWJlZGRlZCBVSSBvZiB0aGUgcHJpbWFyeSBhbmQgcHJpbWFyeSB0ZXh0IGNvbG9ycwogICAgICAgICAgY29uc3QgcHJpbWFyeSA9IHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKGRvY3VtZW50LmJvZHkpLmdldFByb3BlcnR5VmFsdWUoJy0tcHJpbWFyeScpOwogICAgICAgICAgY29uc3QgcHJpbWFyeVRleHQgPSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZShkb2N1bWVudC5ib2R5KS5nZXRQcm9wZXJ0eVZhbHVlKCctLXByaW1hcnktdGV4dCcpOwoKICAgICAgICAgIHRoaXMuaWZyYW1lRWwuY29udGVudFdpbmRvdy5wb3N0TWVzc2FnZSh7CiAgICAgICAgICAgIGFjdGlvbjogJ2NvbG9ycycsCiAgICAgICAgICAgIHByaW1hcnksCiAgICAgICAgICAgIHByaW1hcnlUZXh0LAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGZpbGxSb3V0ZShyb3V0ZSkgewogICAgICBpZiAodHlwZW9mIHJvdXRlID09PSAnb2JqZWN0JykgewogICAgICAgIC8vIEZpbGwgaW4gc3RhbmRhcmQgcGFyYW1zCiAgICAgICAgaWYgKHJvdXRlLnBhcmFtcykgewogICAgICAgICAgaWYgKCdjbHVzdGVyJyBpbiByb3V0ZS5wYXJhbXMpIHsKICAgICAgICAgICAgcm91dGUucGFyYW1zLmNsdXN0ZXIgPSB0aGlzLmNsdXN0ZXJJZDsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgncHJvZHVjdCcgaW4gcm91dGUucGFyYW1zKSB7CiAgICAgICAgICAgIHJvdXRlLnBhcmFtcy5wcm9kdWN0ID0gdGhpcy5wcm9kdWN0SWQ7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gcm91dGU7CiAgICB9LAoKICAgIGlzQ3VycmVudFJvdXRlKHJvdXRlKSB7CiAgICAgIGNvbnN0IGN1cnJlbnQgPSB0aGlzLiRyb3V0ZTsKCiAgICAgIGlmIChjdXJyZW50Lm5hbWUgPT09IHJvdXRlLm5hbWUpIHsKICAgICAgICBsZXQgc2FtZSA9IHRydWU7CgogICAgICAgIE9iamVjdC5rZXlzKGN1cnJlbnQucGFyYW1zKS5mb3JFYWNoKChwKSA9PiB7CiAgICAgICAgICBpZiAocm91dGUucGFyYW1zW3BdICE9PSBjdXJyZW50LnBhcmFtc1twXSkgewogICAgICAgICAgICBzYW1lID0gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSk7CgogICAgICAgIHJldHVybiBzYW1lOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAoKICAgIHN5bmNMb2NhbGUoKSB7CiAgICAgIGNvbnN0IGlmcmFtZUVsID0gZmluZEVtYmVyUGFnZSgpOwoKICAgICAgaWZyYW1lRWw/LmNvbnRlbnRXaW5kb3c/LmxzKCd1c2VyLWxhbmd1YWdlJyk/LnNpZGVMb2FkTGFuZ3VhZ2UodGhpcy5sb2NhbGUpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["EmberPage.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA","file":"EmberPage.vue","sourceRoot":"../../node_modules/@rancher/shell/components","sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport { mapGetters, mapState } from 'vuex';\nimport { NAME as MANAGER } from '@shell/config/product/manager';\nimport { CAPI, MANAGEMENT } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\nimport { findEmberPage, clearEmberInactiveTimer, startEmberInactiveTimer, EMBER_FRAME } from '@shell/utils/ember-page';\n\nconst EMBER_FRAME_HIDE_CLASS = 'ember-iframe-hidden';\nconst PAGE_CHECK_TIMEOUT = 30000;\nconst WINDOW_MANAGER = 'windowmanager';\n\n// Pages that we should intercept when loaded in the IFRAME and instead\n// navigate to a page in Cluster Dashboard\n// example if the Ember clusters page that is navigated to when the user presses cancel on some pages\n// we intercept this and go the the vue Clusters page instead\nconst INTERCEPTS = {\n  'global-admin.clusters.index': {\n    name:   'c-cluster-product-resource',\n    params: {\n      cluster:  '',\n      product:  MANAGER,\n      resource: CAPI.RANCHER_CLUSTER,\n    }\n  },\n  'authenticated.cluster.index': {\n    name:   'c-cluster-product-resource',\n    params: {\n      cluster:  '',\n      product:  MANAGER,\n      resource: CAPI.RANCHER_CLUSTER,\n    }\n  },\n  'global-admin.catalog': {\n    name:   'c-cluster-mcapps-pages-page',\n    params: {\n      cluster: 'local',\n      product: 'mcapps',\n      page:    'catalogs'\n    }\n  },\n  'authenticated.cluster.istio.cluster-setting': { name: 'c-cluster-explorer-tools' },\n};\n\nexport default {\n  components: { Loading },\n\n  props: {\n    src: {\n      type:     String,\n      required: true\n    },\n    pop: {\n      type:    Boolean,\n      default: false\n    },\n    inline: {\n      type:    String,\n      default: ''\n    },\n    // force inline pages to reuse cached Ember pages\n    forceInlineReuse: {\n      type:    Boolean,\n      default: false\n    },\n    // Do not reuse cached pages\n    forceNew: {\n      type:    Boolean,\n      default: false\n    }\n  },\n\n  data() {\n    return {\n      iframeEl:         null,\n      loaded:           true,\n      loadRequired:     false,\n      emberCheck:       null,\n      error:            false,\n      heightSync:       null,\n      frameHeight:      -1,\n      frameWidth:       -1,\n      wmHeight:         -1,\n      showHeaderBanner: false,\n      showFooterBanner: false,\n    };\n  },\n\n  computed: {\n    ...mapGetters({ theme: 'prefs/theme' }),\n    ...mapGetters(['clusterId', 'productId']),\n    ...mapState('wm', ['open']),\n    locale() {\n      return this.$store.getters['i18n/current']();\n    }\n  },\n\n  watch: {\n    theme(theme) {\n      this.notifyTheme(theme);\n    },\n\n    // Update when source property changes\n    src(nue, old) {\n      if (nue !== old) {\n        this.initFrame();\n      }\n    },\n\n    // Watch on the window manager opening/closing\n    open(nue, old) {\n      if (nue !== old) {\n        if (nue) {\n          this.syncSize();\n        } else {\n          clearTimeout(this.heightSync);\n          const iframeEl = findEmberPage();\n\n          // Reset the height when the window manager is closed\n          this.heightSync = null;\n          this.wmHeight = -1;\n\n          if (iframeEl) {\n            iframeEl.style.height = '';\n          }\n        }\n      }\n    },\n    locale() {\n      this.syncLocale();\n    }\n  },\n\n  mounted() {\n    // Embedded page visited, so cancel time to remove IFRAME when inactive\n    clearEmberInactiveTimer();\n    window.addEventListener('message', this.receiveMessage);\n    this.initFrame();\n  },\n\n  beforeDestroy() {\n    window.removeEventListener('message', this.receiveMessage);\n\n    if (this.heightSync) {\n      clearTimeout(this.heightSync);\n    }\n\n    if (this.inline) {\n      const iframeEl = findEmberPage();\n\n      // Remove the IFRAME - we can't reuse it one its been moved inline\n      if (iframeEl) {\n        iframeEl.remove();\n      }\n    }\n\n    // Hide the iframe\n    if (this.iframeEl) {\n      this.iframeEl.classList.add(EMBER_FRAME_HIDE_CLASS);\n    }\n\n    // Cancel any pending http request to check Ember UI availability\n    if (this.emberCheck) {\n      this.emberCheck.cancel('User left page');\n    }\n\n    // Set up a timer to remove the IFrame after a period of inactivity\n    startEmberInactiveTimer();\n  },\n\n  methods: {\n    addBannerClasses(elm, prefix) {\n      if (!elm) {\n        return;\n      }\n\n      elm.classList.remove(`${ prefix }-top-banner`);\n      elm.classList.remove(`${ prefix }-one-banner`);\n      elm.classList.remove(`${ prefix }-two-banners`);\n\n      if (this.showHeaderBanner) {\n        elm.classList.add(`${ prefix }-top-banner`);\n        if (this.showFooterBanner) {\n          elm.classList.add(`${ prefix }-two-banners`);\n        }\n      } else if (this.showFooterBanner) {\n        elm.classList.add(`${ prefix }-one-banner`);\n      }\n    },\n\n    async initFrame() {\n      const bannerSetting = await this.$store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.BANNERS);\n\n      try {\n        const parsed = JSON.parse(bannerSetting.value);\n\n        this.showHeaderBanner = parsed.showHeader === 'true';\n        this.showFooterBanner = parsed.showFooter === 'true';\n      } catch {}\n\n      this.loaded = true;\n      this.loadRequired = false;\n\n      // Get the existing iframe if it exists\n      let iframeEl = findEmberPage();\n\n      // If the iframe already exists, check if it is ready for us to reuse\n      // by navigating within the app that is already loaded\n      if (iframeEl !== null) {\n        const ready = iframeEl.getAttribute('data-ready') === 'true';\n        const lastDidLoad = iframeEl.getAttribute('data-loaded') === 'true';\n        const doNotReuse = (!!this.inline && !this.forceInlineReuse) || this.forceNew;\n        // Was not inline but now is - can't reuse\n        const inlineChanged = !!this.inline && (iframeEl.parentElement === document.body);\n\n        if (!ready || doNotReuse || !lastDidLoad || inlineChanged) {\n          iframeEl.remove();\n          iframeEl = null;\n        }\n      }\n\n      if (iframeEl === null && process.env.dev) {\n        // Fetch a page to check that the Ember UI is available\n        try {\n          this.error = false;\n          this.loaded = false;\n          this.emberCheck = this.$axios.CancelToken.source();\n\n          // Make a head request to a known asset of the Ember UI\n          const pageUrl = `${ window.location.origin }/assets/images/logos/rke.svg`;\n          const response = await this.$axios.head(pageUrl, {\n            timeout:     PAGE_CHECK_TIMEOUT,\n            cancelToken: this.emberCheck.token,\n          });\n\n          if (response.status !== 200) {\n            this.loaded = true;\n            this.error = true;\n          }\n        } catch (e) {\n          if (!this.$axios.isCancel(e)) {\n            this.loaded = true;\n            this.error = true;\n          }\n        }\n      }\n\n      if (this.error) {\n        return;\n      }\n\n      if (iframeEl === null) {\n        iframeEl = document.createElement('iframe');\n        iframeEl.setAttribute('id', EMBER_FRAME);\n        iframeEl.setAttribute('data-testid', EMBER_FRAME);\n        iframeEl.classList.add(EMBER_FRAME_HIDE_CLASS);\n\n        if (this.inline) {\n          const frameParent = document.getElementById(this.inline);\n\n          frameParent.appendChild(iframeEl);\n        } else {\n          document.body.append(iframeEl);\n        }\n        iframeEl.setAttribute('src', this.src);\n      } else {\n        // Reset scroll position to top\n        if (iframeEl.contentWindow?.scrollTo) {\n          iframeEl.contentWindow.scrollTo(0, 0);\n        }\n\n        // Post a message to navigate within the existing app\n        iframeEl.contentWindow.postMessage({\n          action: 'navigate',\n          name:   this.src\n        });\n\n        // Ensure iframe gets the latest theme if it has changed\n        this.notifyTheme(this.theme);\n\n        const currentUrl = iframeEl.contentWindow.location.pathname;\n        const src = this.trimURL(this.src);\n\n        if (src !== currentUrl) {\n          iframeEl.classList.add(EMBER_FRAME_HIDE_CLASS);\n        } else {\n          iframeEl.classList.remove(EMBER_FRAME_HIDE_CLASS);\n        }\n      }\n\n      this.iframeEl = iframeEl;\n\n      if (!this.inline) {\n        iframeEl.classList.add('ember-iframe');\n        iframeEl.classList.remove('ember-iframe-inline');\n        this.addBannerClasses(this.$refs.emberPage, 'fixed');\n        this.addBannerClasses(iframeEl, 'ember-iframe');\n\n        // If the window manager is open, sync the size\n        if (this.open) {\n          this.syncSize();\n        }\n      } else {\n        iframeEl.classList.remove('ember-iframe');\n        iframeEl.classList.add('ember-iframe-inline');\n        iframeEl.height = 0;\n        this.syncSize();\n      }\n    },\n\n    syncSize() {\n      if (this.heightSync) {\n        clearTimeout(this.heightSync);\n      }\n\n      this.heightSync = setTimeout(() => {\n        this.dosyncSize();\n        this.syncSize();\n      }, 500);\n    },\n\n    dosyncSize() {\n      if (this.inline) {\n        const iframeEl = findEmberPage();\n        const doc = iframeEl.contentWindow.document;\n        const app = doc.getElementById('application');\n        const h = app?.offsetHeight;\n\n        if (h && this.frameHeight !== h) {\n          this.frameHeight = h;\n          iframeEl.height = h;\n        }\n\n        const frameParent = document.getElementById(this.inline);\n        const w = frameParent.offsetWidth;\n\n        if (w && this.frameWidth !== w) {\n          this.frameWidth = w;\n          iframeEl.width = w;\n        }\n      } else {\n        // Ensure the height takes into count the window manger height\n        const wm = document.getElementById(WINDOW_MANAGER);\n\n        if (wm) {\n          const wmh = wm.offsetHeight;\n\n          if (wmh !== this.wmHeight) {\n            // Adjust the bottom\n            const iframeEl = findEmberPage();\n\n            iframeEl.style.height = `calc(100vh - var(--header-height) - ${ wmh }px)`;\n            this.wmHeight = wmh;\n          }\n        }\n      }\n    },\n\n    notifyTheme(theme) {\n      const iframeEl = findEmberPage();\n\n      if (iframeEl) {\n        const emberTheme = theme === 'light' ? 'ui-light' : 'ui-dark';\n\n        // Ensure the embedded UI uses the correct theme\n        iframeEl.contentWindow.postMessage({\n          action: 'set-theme',\n          name:   emberTheme\n        });\n      }\n    },\n\n    trimURL(url) {\n      if (url && url.endsWith('/')) {\n        url = url.substr(0, url.length - 1);\n      }\n\n      return url;\n    },\n\n    // We use PostMessage between the Embedded Ember UI and the Dashboard UI\n    receiveMessage(event) {\n      const msg = event.data;\n\n      if (msg.action === 'navigate') {\n        this.$router.replace({\n          name:   'c-cluster-explorer',\n          params: { cluster: msg.cluster }\n        });\n      } else if (msg.action === 'before-navigation') {\n        this.$emit('before-nav', msg.target);\n\n        // Ember willTransition event\n        if (INTERCEPTS[msg.target]) {\n          const dest = INTERCEPTS[msg.target];\n\n          if (this.isCurrentRoute(dest)) {\n            this.setLoaded(true);\n\n            return;\n          }\n\n          this.setLoaded(false);\n          this.$router.replace(this.fillRoute(dest));\n        }\n      } else if (msg.action === 'loading') {\n        this.setLoaded(!msg.state);\n        this.updateFrameVisibility();\n      } else if (msg.action === 'ready') {\n        // Echo back a ping\n        this.iframeEl.contentWindow.postMessage({ action: 'echo-back' });\n        this.iframeEl.setAttribute('data-ready', true);\n\n        const doc = this.iframeEl.contentWindow?.document?.body;\n\n        if (this.inline) {\n          doc.classList.add('embedded-no-overflow');\n        } else {\n          doc.classList.remove('embedded-no-overflow');\n        }\n        this.syncLocale();\n      } else if (msg.action === 'need-to-load') {\n        this.loadRequired = true;\n      } else if (msg.action === 'did-transition') {\n        if (!this.loadRequired) {\n          this.setLoaded(true);\n          this.updateFrameVisibility();\n          this.dosyncSize();\n        }\n      } else if (msg.action === 'dashboard') {\n        this.iframeEl.setAttribute('data-ready', false);\n        this.$router.replace(msg.page);\n      } else if (msg.action === 'reload') {\n        this.loaded = false;\n        this.iframeEl.remove();\n        this.initFrame();\n      } else if ( msg.action === 'logout' ) {\n        this.loaded = false;\n        this.iframeEl.remove();\n        this.initFrame();\n        this.$store.dispatch('auth/logout');\n      }\n    },\n\n    setLoaded(loaded) {\n      this.loaded = loaded;\n      if (this.iframeEl) {\n        this.iframeEl.setAttribute('data-loaded', loaded);\n      }\n    },\n\n    updateFrameVisibility() {\n      if (this.loaded) {\n        if (this.iframeEl) {\n          this.iframeEl.classList.remove(EMBER_FRAME_HIDE_CLASS);\n\n          // Notify the embedded UI of the primary and primary text colors\n          const primary = window.getComputedStyle(document.body).getPropertyValue('--primary');\n          const primaryText = window.getComputedStyle(document.body).getPropertyValue('--primary-text');\n\n          this.iframeEl.contentWindow.postMessage({\n            action: 'colors',\n            primary,\n            primaryText,\n          });\n        }\n      }\n    },\n\n    fillRoute(route) {\n      if (typeof route === 'object') {\n        // Fill in standard params\n        if (route.params) {\n          if ('cluster' in route.params) {\n            route.params.cluster = this.clusterId;\n          }\n          if ('product' in route.params) {\n            route.params.product = this.productId;\n          }\n        }\n      }\n\n      return route;\n    },\n\n    isCurrentRoute(route) {\n      const current = this.$route;\n\n      if (current.name === route.name) {\n        let same = true;\n\n        Object.keys(current.params).forEach((p) => {\n          if (route.params[p] !== current.params[p]) {\n            same = false;\n          }\n        });\n\n        return same;\n      }\n\n      return false;\n    },\n\n    syncLocale() {\n      const iframeEl = findEmberPage();\n\n      iframeEl?.contentWindow?.ls('user-language')?.sideLoadLanguage(this.locale);\n    }\n  }\n};\n</script>\n\n<template>\n  <div\n    ref=\"emberPage\"\n    class=\"ember-page\"\n  >\n    <Loading\n      v-if=\"!inline\"\n      :loading=\"!loaded\"\n      mode=\"content\"\n      :no-delay=\"true\"\n    />\n    <div\n      v-if=\"inline && !loaded\"\n      v-clean-html=\"t('generic.loading', {}, true)\"\n      class=\"inline-loading\"\n    />\n    <div\n      v-if=\"error\"\n      class=\"ember-page-error\"\n    >\n      <div>{{ t('embedding.unavailable') }}</div>\n      <button\n        class=\"btn role-primary\"\n        @click=\"initFrame()\"\n      >\n        {{ t('embedding.retry') }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  $banner-height: 2em;\n\n  .fixed-top-banner {\n    top: calc(#{$banner-height} + var(--header-height));\n  }\n\n  .fixed-one-banner {\n    height: calc(100vh - var(--header-height) - #{$banner-height});\n  }\n\n  .fixed-two-banners {\n    height: calc(100vh - var(--header-height) - #{$banner-height} - #{$banner-height});\n  }\n\n  .ember-page {\n    display: flex;\n    height: 100%;\n    padding: 0;\n  }\n\n  .frame {\n    flex: 1;\n    visibility: hidden;\n  }\n  .frame.pop {\n    margin: -20px;\n  }\n\n  .loading {\n    visibility: visible;\n  }\n  .ember-page-error {\n    display: flex;\n    align-items: center;\n    flex: 1;\n    flex-direction: column;\n    justify-content: center;\n    > div {\n      font-size: 20px;\n      padding-bottom: 20px;\n    }\n  }\n  .inline-loading {\n    border: 1px solid var(--border);\n    border-radius: 5px;\n    padding: 10px;\n    text-align: center;\n    width: 100%;\n  }\n</style>\n<style lang=\"scss\">\n  $banner-height: 2em;\n\n  .ember-iframe {\n    border: 0;\n    left: var(--nav-width);\n    height: calc(100vh - var(--header-height));\n    position: absolute;\n    top: var(--header-height);\n    width: calc(100vw - var(--nav-width));\n    visibility: show;\n  }\n\n  .ember-iframe-top-banner {\n    top: calc(#{$banner-height} + var(--header-height));\n  }\n\n  .ember-iframe-one-banner {\n    height: calc(100vh - var(--header-height) - #{$banner-height});\n  }\n\n  .ember-iframe-two-banners {\n    height: calc(100vh - var(--header-height) - #{$banner-height} - #{$banner-height});\n  }\n\n  .ember-iframe-inline {\n    border: 0;\n    overflow: hidden;\n  }\n\n  .ember-iframe-hidden {\n    visibility: hidden;\n  }\n</style>\n"]}]}