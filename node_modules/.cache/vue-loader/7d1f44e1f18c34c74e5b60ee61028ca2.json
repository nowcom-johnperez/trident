{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/SelectOrCreateAuthSecret.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/SelectOrCreateAuthSecret.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IF9FRElUIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgeyBMYWJlbGVkSW5wdXQgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0xhYmVsZWRJbnB1dCc7CmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7CmltcG9ydCB7IEFVVEhfVFlQRSwgTk9STUFOLCBTRUNSRVQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgU0VDUkVUX1RZUEVTIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZWNyZXQnOwppbXBvcnQgeyBiYXNlNjRFbmNvZGUgfSBmcm9tICdAc2hlbGwvdXRpbHMvY3J5cHRvJzsKaW1wb3J0IHsgYWRkT2JqZWN0cywgaW5zZXJ0QXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwppbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdAc2hlbGwvdXRpbHMvc29ydCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ1NlbGVjdE9yQ3JlYXRlQXV0aFNlY3JldCcsCgogIGNvbXBvbmVudHM6IHsKICAgIExhYmVsZWRJbnB1dCwKICAgIExhYmVsZWRTZWxlY3QsCiAgfSwKCiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiBfRURJVCwKICAgIH0sCgogICAgcHJlU2VsZWN0OiB7CiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCgogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgW1N0cmluZywgT2JqZWN0XSwKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCgogICAgaW5TdG9yZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjbHVzdGVyJywKICAgIH0sCgogICAgbGFiZWxLZXk6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnc2VsZWN0T3JDcmVhdGVBdXRoU2VjcmV0LmxhYmVsJywKICAgIH0sCgogICAgbmFtZXNwYWNlOiB7CiAgICAgIHR5cGU6ICAgICBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgfSwKCiAgICBsaW1pdFRvTmFtZXNwYWNlOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAoKICAgIGdlbmVyYXRlTmFtZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdhdXRoLScsCiAgICB9LAoKICAgIGFsbG93Tm9uZTogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlLAogICAgfSwKCiAgICBhbGxvd1NzaDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlLAogICAgfSwKCiAgICBhbGxvd0Jhc2ljOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAoKICAgIGFsbG93UzM6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAoKICAgIGFsbG93UmtlOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKCiAgICByZWdpc3RlckJlZm9yZUhvb2s6IHsKICAgICAgdHlwZTogICAgIEZ1bmN0aW9uLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCgogICAgaG9va05hbWU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAncmVnaXN0ZXJBdXRoU2VjcmV0JwogICAgfSwKCiAgICBhcHBlbmRVbmlxdWVJZFRvSG9vazogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKCiAgICBob29rUHJpb3JpdHk6IHsKICAgICAgdHlwZTogICAgTnVtYmVyLAogICAgICBkZWZhdWx0OiA5OSwKICAgIH0sCgogICAgdmVydGljYWw6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAoKICAgIC8qKgogICAgICogVGhpcyBjb21wb25lbnQgaXMgdXNlZCBpbiBNdWx0aVN0ZXAgUHJpb2Nlc3MKICAgICAqIFNvIHdoZW4gdXNlciBjbGljayB0aHJvdWdoIHRvIGZpbmFsIHN0ZXAgYW5kIHN1Ym1pdCB0aGUgZm9ybQogICAgICogVGhpcyBjb21wb25lbnQgZ2V0IHJlY3JlYXRlZCB0aGVyZWZvcmUgcmVnaXN0ZXIgYGRvQ3JlYXRlYCBhcyBhIGhvb2sgZWFjaCB0aW1lCiAgICAgKiBBbHNvLCB0aGUgcGFyZW50IHN0ZXAgY29tcG9uZW50IGlzIG5vdCBhd2FyZSB0aGF0IGNyZWRlbnRpYWwgaXMgY3JlYXRlZAogICAgICoKICAgICAqIFRoaXMgcHJvcGVydHkgaXMgaW1wbGVtZW50IHRvIHByZXZlbnQgdGhpcyBpc3N1ZSBhbmQgZGVsZWdhdGUgaXQgdG8gcGFyZW50IGNvbXBvbmVudC4KICAgICAqLwogICAgZGVsZWdhdGVDcmVhdGVUb1BhcmVudDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCgogIGFzeW5jIGZldGNoKCkgewogICAgaWYgKCAodGhpcy5hbGxvd1NzaCB8fCB0aGlzLmFsbG93QmFzaWMgfHwgdGhpcy5hbGxvd1JrZSkgJiYgdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHsgdGhpcy5pblN0b3JlIH0vc2NoZW1hRm9yYF0oU0VDUkVUKSApIHsKICAgICAgLy8gQXZvaWQgYW4gYXN5bmMgY2FsbCBhbmQgbG9hZGluZyBzY3JlZW4gaWYgYWxyZWFkeSBsb2FkZWQgYnkgc29tZW9uZSBlbHNlCiAgICAgIGlmICggdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHsgdGhpcy5pblN0b3JlIH0vaGF2ZUFsbGBdKFNFQ1JFVCkgKSB7CiAgICAgICAgdGhpcy5hbGxTZWNyZXRzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHsgdGhpcy5pblN0b3JlIH0vYWxsYF0oU0VDUkVUKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmFsbFNlY3JldHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaChgJHsgdGhpcy5pblN0b3JlIH0vZmluZEFsbGAsIHsgdHlwZTogU0VDUkVUIH0pOwogICAgICB9CiAgICB9CgogICAgaWYgKCB0aGlzLmFsbG93UzMgJiYgdGhpcy4kc3RvcmUuZ2V0dGVyc1sncmFuY2hlci9jYW5MaXN0J10oTk9STUFOLkNMT1VEX0NSRURFTlRJQUwpICkgewogICAgICAvLyBBdm9pZCBhbiBhc3luYyBjYWxsIGFuZCBsb2FkaW5nIHNjcmVlbiBpZiBhbHJlYWR5IGxvYWRlZCBieSBzb21lb25lIGVsc2UKICAgICAgaWYgKCB0aGlzLiRzdG9yZS5nZXR0ZXJzWydyYW5jaGVyL2hhdmVBbGwnXShOT1JNQU4uQ0xPVURfQ1JFREVOVElBTCkgKSB7CiAgICAgICAgdGhpcy5hbGxDbG91ZENyZWRzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1sncmFuY2hlci9hbGwnXShOT1JNQU4uQ0xPVURfQ1JFREVOVElBTCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5hbGxDbG91ZENyZWRzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZEFsbCcsIHsgdHlwZTogTk9STUFOLkNMT1VEX0NSRURFTlRJQUwgfSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuYWxsQ2xvdWRDcmVkcyA9IFtdOwogICAgfQoKICAgIGxldCBzZWxlY3RlZCA9IHRoaXMucHJlU2VsZWN0Py5zZWxlY3RlZCB8fCBBVVRIX1RZUEUuX05PTkU7CgogICAgaWYgKCAhdGhpcy52YWx1ZSApIHsKICAgICAgdGhpcy5wdWJsaWNLZXkgPSB0aGlzLnByZVNlbGVjdD8ucHVibGljS2V5IHx8ICcnOwogICAgICB0aGlzLnByaXZhdGVLZXkgPSB0aGlzLnByZVNlbGVjdD8ucHJpdmF0ZUtleSB8fCAnJzsKICAgIH0KCiAgICBpZiAoIHRoaXMudmFsdWUgKSB7CiAgICAgIGlmICggdHlwZW9mIHRoaXMudmFsdWUgPT09ICdvYmplY3QnICkgewogICAgICAgIHNlbGVjdGVkID0gYCR7IHRoaXMudmFsdWUubmFtZXNwYWNlIH0vJHsgdGhpcy52YWx1ZS5uYW1lIH1gOwogICAgICB9IGVsc2UgaWYgKCB0aGlzLnZhbHVlLmluY2x1ZGVzKCcvJykgfHwgdGhpcy52YWx1ZS5pbmNsdWRlcygnOicpICkgewogICAgICAgIHNlbGVjdGVkID0gdGhpcy52YWx1ZTsKICAgICAgfSBlbHNlIGlmICggdGhpcy5uYW1lc3BhY2UgKSB7CiAgICAgICAgc2VsZWN0ZWQgPSBgJHsgdGhpcy5uYW1lc3BhY2UgfS8keyB0aGlzLnZhbHVlIH1gOwogICAgICB9IGVsc2UgewogICAgICAgIHNlbGVjdGVkID0gdGhpcy52YWx1ZTsKICAgICAgfQogICAgfQoKICAgIHRoaXMuc2VsZWN0ZWQgPSBzZWxlY3RlZDsKCiAgICB0aGlzLnVwZGF0ZSgpOwogIH0sCgogIGRhdGEocHJvcHMpIHsKICAgIHJldHVybiB7CiAgICAgIGFsbENsb3VkQ3JlZHM6IFtdLAogICAgICBhbGxTZWNyZXRzOiAgICBbXSwKICAgICAgc2VsZWN0ZWQ6ICAgICAgbnVsbCwKCiAgICAgIHB1YmxpY0tleTogICcnLAogICAgICBwcml2YXRlS2V5OiAnJywKICAgICAgdW5pcXVlSWQ6ICAgbmV3IERhdGUoKS5nZXRUaW1lKCkgLy8gQWxsb3dzIGZvcm0gc3RhdGUgdG8gYmUgaW5kaXZpZHVhbGx5IHRyYWNrZWQgaWYgdGhlIGZvcm0gaXMgaW4gYSBsaXN0CiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBfU1NIKCkgewogICAgICByZXR1cm4gQVVUSF9UWVBFLl9TU0g7CiAgICB9LAoKICAgIF9CQVNJQygpIHsKICAgICAgcmV0dXJuIEFVVEhfVFlQRS5fQkFTSUM7CiAgICB9LAoKICAgIF9TMygpIHsKICAgICAgcmV0dXJuIEFVVEhfVFlQRS5fUzM7CiAgICB9LAoKICAgIG9wdGlvbnMoKSB7CiAgICAgIGNvbnN0IHR5cGVzID0gW107CiAgICAgIGNvbnN0IGtleXMgPSBbXTsKCiAgICAgIGlmICggdGhpcy5hbGxvd1NzaCApIHsKICAgICAgICB0eXBlcy5wdXNoKFNFQ1JFVF9UWVBFUy5TU0gpOwogICAgICB9CgogICAgICBpZiAoIHRoaXMuYWxsb3dCYXNpYyApIHsKICAgICAgICB0eXBlcy5wdXNoKFNFQ1JFVF9UWVBFUy5CQVNJQyk7CiAgICAgIH0KCiAgICAgIGlmICggdGhpcy5hbGxvd1JrZSApIHsKICAgICAgICB0eXBlcy5wdXNoKFNFQ1JFVF9UWVBFUy5SS0VfQVVUSF9DT05GSUcpOwogICAgICB9CgogICAgICBjb25zdCBvdXQgPSB0aGlzLmFsbFNlY3JldHMKICAgICAgICAuZmlsdGVyKCh4KSA9PiB0aGlzLm5hbWVzcGFjZSAmJiB0aGlzLmxpbWl0VG9OYW1lc3BhY2UgPyB4Lm1ldGFkYXRhLm5hbWVzcGFjZSA9PT0gdGhpcy5uYW1lc3BhY2UgOiB0cnVlKQogICAgICAgIC5maWx0ZXIoKHgpID0+IHsKICAgICAgICAgIC8vIE11c3QgbWF0Y2ggb25lIG9mIHRoZSB0eXBlcyBpZiBnaXZlbgogICAgICAgICAgaWYgKCB0eXBlcy5sZW5ndGggJiYgIXR5cGVzLmluY2x1ZGVzKHguX3R5cGUpICkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CgogICAgICAgICAgLy8gTXVzdCBtYXRjaCBBTEwgb2YgdGhlIGtleXMgaWYgZ2l2ZW4KICAgICAgICAgIGlmICgga2V5cy5sZW5ndGggKSB7CiAgICAgICAgICAgIGNvbnN0IGRhdGFLZXlzID0gT2JqZWN0LmtleXMoeC5kYXRhIHx8IHt9KTsKCiAgICAgICAgICAgIGlmICggIWtleXMuZXZlcnkoKGtleSkgPT4gZGF0YUtleXMuaW5jbHVkZXMoa2V5KSkgKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfSkubWFwKCh4KSA9PiB7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGRhdGFQcmV2aWV3LCBzdWJUeXBlRGlzcGxheSwgbWV0YWRhdGEsIGlkCiAgICAgICAgICB9ID0geDsKCiAgICAgICAgICBjb25zdCBsYWJlbCA9IHN1YlR5cGVEaXNwbGF5ICYmIGRhdGFQcmV2aWV3ID8gYCR7IG1ldGFkYXRhLm5hbWUgfSAoJHsgc3ViVHlwZURpc3BsYXkgfTogJHsgZGF0YVByZXZpZXcgfSlgIDogYCR7IG1ldGFkYXRhLm5hbWUgfSAoJHsgc3ViVHlwZURpc3BsYXkgfSlgOwoKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGxhYmVsLAogICAgICAgICAgICBncm91cDogbWV0YWRhdGEubmFtZXNwYWNlLAogICAgICAgICAgICB2YWx1ZTogaWQsCiAgICAgICAgICB9OwogICAgICAgIH0pOwoKICAgICAgaWYgKCB0aGlzLmFsbG93UzMgKSB7CiAgICAgICAgY29uc3QgbW9yZSA9IHRoaXMuYWxsQ2xvdWRDcmVkcwogICAgICAgICAgLmZpbHRlcigoeCkgPT4gWydhd3MnLCAnczMnXS5pbmNsdWRlcyh4LnByb3ZpZGVyKSApCiAgICAgICAgICAubWFwKCh4KSA9PiB7CiAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgbGFiZWw6IGAkeyB4Lm5hbWVEaXNwbGF5IH0gKCR7IHgucHJvdmlkZXJEaXNwbGF5IH0pYCwKICAgICAgICAgICAgICBncm91cDogJ0Nsb3VkIENyZWRlbnRpYWxzJywKICAgICAgICAgICAgICB2YWx1ZTogeC5pZCwKICAgICAgICAgICAgfTsKICAgICAgICAgIH0pOwoKICAgICAgICBhZGRPYmplY3RzKG91dCwgbW9yZSk7CiAgICAgIH0KCiAgICAgIGlmICggIXRoaXMubGltaXRUb05hbWVzcGFjZSApIHsKICAgICAgICBzb3J0Qnkob3V0LCAnZ3JvdXAnKTsKICAgICAgICBpZiAoIG91dC5sZW5ndGggKSB7CiAgICAgICAgICBsZXQgbGFzdEdyb3VwID0gJyc7CgogICAgICAgICAgZm9yICggbGV0IGkgPSAwIDsgaSA8IG91dC5sZW5ndGggOyBpKysgKSB7CiAgICAgICAgICAgIGlmICggb3V0W2ldLmdyb3VwICE9PSBsYXN0R3JvdXAgKSB7CiAgICAgICAgICAgICAgbGFzdEdyb3VwID0gb3V0W2ldLmdyb3VwOwoKICAgICAgICAgICAgICBpbnNlcnRBdChvdXQsIGksIHsKICAgICAgICAgICAgICAgIGtpbmQ6ICAgICAndGl0bGUnLAogICAgICAgICAgICAgICAgbGFiZWw6ICAgIHRoaXMudCgnc2VsZWN0T3JDcmVhdGVBdXRoU2VjcmV0Lm5hbWVzcGFjZUdyb3VwJywgeyBuYW1lOiBsYXN0R3JvdXAgfSksCiAgICAgICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9CgogICAgICBpZiAoIG91dC5sZW5ndGggKSB7CiAgICAgICAgb3V0LnVuc2hpZnQoewogICAgICAgICAga2luZDogICAgICd0aXRsZScsCiAgICAgICAgICBsYWJlbDogICAgdGhpcy50KCdzZWxlY3RPckNyZWF0ZUF1dGhTZWNyZXQuY2hvb3NlRXhpc3RpbmcnKSwKICAgICAgICAgIGRpc2FibGVkOiB0cnVlCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKCB0aGlzLmFsbG93Tm9uZSApIHsKICAgICAgICBvdXQudW5zaGlmdCh7CiAgICAgICAgICBsYWJlbDogdGhpcy50KCdnZW5lcmljLm5vbmUnKSwKICAgICAgICAgIHZhbHVlOiBBVVRIX1RZUEUuX05PTkUsCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmFsbG93U3NoIHx8IHRoaXMuYWxsb3dTMyB8fCB0aGlzLmFsbG93QmFzaWMpIHsKICAgICAgICBvdXQudW5zaGlmdCh7CiAgICAgICAgICBsYWJlbDogICAgJ2RpdmlkZXInLAogICAgICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgICAgICBraW5kOiAgICAgJ2RpdmlkZXInCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGlmICggdGhpcy5hbGxvd1NzaCApIHsKICAgICAgICBvdXQudW5zaGlmdCh7CiAgICAgICAgICBsYWJlbDogdGhpcy50KCdzZWxlY3RPckNyZWF0ZUF1dGhTZWNyZXQuY3JlYXRlU3NoJyksCiAgICAgICAgICB2YWx1ZTogQVVUSF9UWVBFLl9TU0gsCiAgICAgICAgICBraW5kOiAgJ2hpZ2hsaWdodGVkJwogICAgICAgIH0pOwogICAgICB9CgogICAgICBpZiAoIHRoaXMuYWxsb3dTMyApIHsKICAgICAgICBvdXQudW5zaGlmdCh7CiAgICAgICAgICBsYWJlbDogdGhpcy50KCdzZWxlY3RPckNyZWF0ZUF1dGhTZWNyZXQuY3JlYXRlUzMnKSwKICAgICAgICAgIHZhbHVlOiBBVVRIX1RZUEUuX1MzLAogICAgICAgICAga2luZDogICdoaWdobGlnaHRlZCcKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKCB0aGlzLmFsbG93QmFzaWMgKSB7CiAgICAgICAgb3V0LnVuc2hpZnQoewogICAgICAgICAgbGFiZWw6IHRoaXMudCgnc2VsZWN0T3JDcmVhdGVBdXRoU2VjcmV0LmNyZWF0ZUJhc2ljJyksCiAgICAgICAgICB2YWx1ZTogQVVUSF9UWVBFLl9CQVNJQywKICAgICAgICAgIGtpbmQ6ICAnaGlnaGxpZ2h0ZWQnCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAoKICAgIGZpcnN0Q29sKCkgewogICAgICBpZiAoIHRoaXMudmVydGljYWwgKSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CgogICAgICBpZiAoIHRoaXMuc2VsZWN0ZWQgPT09IEFVVEhfVFlQRS5fU1NIIHx8IHRoaXMuc2VsZWN0ZWQgPT09IEFVVEhfVFlQRS5fQkFTSUMgfHwgdGhpcy5zZWxlY3RlZCA9PT0gQVVUSF9UWVBFLl9TMyApIHsKICAgICAgICByZXR1cm4gJ2NvbCBzcGFuLTQnOwogICAgICB9CgogICAgICByZXR1cm4gJ2NvbCBzcGFuLTYnOwogICAgfSwKCiAgICBtb3JlQ29scygpIHsKICAgICAgaWYgKCB0aGlzLnZlcnRpY2FsICkgewogICAgICAgIHJldHVybiAnbXQtMjAnOwogICAgICB9CgogICAgICByZXR1cm4gJ2NvbCBzcGFuLTQnOwogICAgfQogIH0sCgogIHdhdGNoOiB7CiAgICBzZWxlY3RlZDogICAndXBkYXRlJywKICAgIHB1YmxpY0tleTogICd1cGRhdGVLZXlWYWwnLAogICAgcHJpdmF0ZUtleTogJ3VwZGF0ZUtleVZhbCcsCgogICAgbmFtZXNwYWNlKG5zKSB7CiAgICAgIGlmICggbnMgJiYgIXRoaXMuc2VsZWN0ZWQuc3RhcnRzV2l0aChgJHsgbnMgfS9gKSApIHsKICAgICAgICB0aGlzLnNlbGVjdGVkID0gQVVUSF9UWVBFLl9OT05FOwogICAgICB9CiAgICB9CiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIGlmICh0aGlzLnJlZ2lzdGVyQmVmb3JlSG9vaykgewogICAgICBjb25zdCBob29rTmFtZSA9IHRoaXMuYXBwZW5kVW5pcXVlSWRUb0hvb2sgPyB0aGlzLmhvb2tOYW1lICsgdGhpcy51bmlxdWVJZCA6IHRoaXMuaG9va05hbWU7CgogICAgICBpZiAoIXRoaXMuZGVsZWdhdGVDcmVhdGVUb1BhcmVudCkgewogICAgICAgIHRoaXMucmVnaXN0ZXJCZWZvcmVIb29rKHRoaXMuZG9DcmVhdGUsIGhvb2tOYW1lLCB0aGlzLmhvb2tQcmlvcml0eSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcignQmVmb3JlIEhvb2sgaXMgbWlzc2luZycpOwogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZUtleVZhbCgpIHsKICAgICAgaWYgKCAhW0FVVEhfVFlQRS5fU1NILCBBVVRIX1RZUEUuX0JBU0lDLCBBVVRIX1RZUEUuX1MzXS5pbmNsdWRlcyh0aGlzLnNlbGVjdGVkKSkgewogICAgICAgIHRoaXMucHJpdmF0ZUtleSA9ICcnOwogICAgICAgIHRoaXMucHVibGljS2V5ID0gJyc7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0YXV0aHZhbCcsIHsKICAgICAgICBzZWxlY3RlZDogICB0aGlzLnNlbGVjdGVkLAogICAgICAgIHByaXZhdGVLZXk6IHRoaXMucHJpdmF0ZUtleSwKICAgICAgICBwdWJsaWNLZXk6ICB0aGlzLnB1YmxpY0tleQogICAgICB9KTsKICAgIH0sCgogICAgdXBkYXRlKCkgewogICAgICBpZiAoICghdGhpcy5zZWxlY3RlZCB8fCBbQVVUSF9UWVBFLl9TU0gsIEFVVEhfVFlQRS5fQkFTSUMsIEFVVEhfVFlQRS5fUzMsIEFVVEhfVFlQRS5fTk9ORV0uaW5jbHVkZXModGhpcy5zZWxlY3RlZCkpKSB7CiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBudWxsKTsKICAgICAgfSBlbHNlIGlmICggdGhpcy5zZWxlY3RlZC5pbmNsdWRlcygnOicpICkgewogICAgICAgIC8vIENsb3VkIGNyZWRzCiAgICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB0aGlzLnNlbGVjdGVkKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBzcGxpdCA9IHRoaXMuc2VsZWN0ZWQuc3BsaXQoJy8nKTsKCiAgICAgICAgaWYgKCB0aGlzLmxpbWl0VG9OYW1lc3BhY2UgKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIHNwbGl0WzFdKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc3Qgb3V0ID0gewogICAgICAgICAgICBuYW1lc3BhY2U6IHNwbGl0WzBdLAogICAgICAgICAgICBuYW1lOiAgICAgIHNwbGl0WzFdCiAgICAgICAgICB9OwoKICAgICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0Jywgb3V0KTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMudXBkYXRlS2V5VmFsKCk7CiAgICB9LAoKICAgIGFzeW5jIGRvQ3JlYXRlKCkgewogICAgICBpZiAoICFbQVVUSF9UWVBFLl9TU0gsIEFVVEhfVFlQRS5fQkFTSUMsIEFVVEhfVFlQRS5fUzNdLmluY2x1ZGVzKHRoaXMuc2VsZWN0ZWQpIHx8IHRoaXMuZGVsZWdhdGVDcmVhdGVUb1BhcmVudCApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxldCBzZWNyZXQ7CgogICAgICBpZiAoIHRoaXMuc2VsZWN0ZWQgPT09IEFVVEhfVFlQRS5fUzMgKSB7CiAgICAgICAgc2VjcmV0ID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goYHJhbmNoZXIvY3JlYXRlYCwgewogICAgICAgICAgdHlwZTogICAgICAgICAgICAgICBOT1JNQU4uQ0xPVURfQ1JFREVOVElBTCwKICAgICAgICAgIHMzY3JlZGVudGlhbENvbmZpZzogewogICAgICAgICAgICBhY2Nlc3NLZXk6IHRoaXMucHVibGljS2V5LAogICAgICAgICAgICBzZWNyZXRLZXk6IHRoaXMucHJpdmF0ZUtleSwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VjcmV0ID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goYCR7IHRoaXMuaW5TdG9yZSB9L2NyZWF0ZWAsIHsKICAgICAgICAgIHR5cGU6ICAgICBTRUNSRVQsCiAgICAgICAgICBtZXRhZGF0YTogewogICAgICAgICAgICBuYW1lc3BhY2U6ICAgIHRoaXMubmFtZXNwYWNlLAogICAgICAgICAgICBnZW5lcmF0ZU5hbWU6IHRoaXMuZ2VuZXJhdGVOYW1lCiAgICAgICAgICB9LAogICAgICAgIH0pOwoKICAgICAgICBsZXQgdHlwZSwgcHVibGljRmllbGQsIHByaXZhdGVGaWVsZDsKCiAgICAgICAgc3dpdGNoICggdGhpcy5zZWxlY3RlZCApIHsKICAgICAgICBjYXNlIEFVVEhfVFlQRS5fU1NIOgogICAgICAgICAgdHlwZSA9IFNFQ1JFVF9UWVBFUy5TU0g7CiAgICAgICAgICBwdWJsaWNGaWVsZCA9ICdzc2gtcHVibGlja2V5JzsKICAgICAgICAgIHByaXZhdGVGaWVsZCA9ICdzc2gtcHJpdmF0ZWtleSc7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIEFVVEhfVFlQRS5fQkFTSUM6CiAgICAgICAgICB0eXBlID0gU0VDUkVUX1RZUEVTLkJBU0lDOwogICAgICAgICAgcHVibGljRmllbGQgPSAndXNlcm5hbWUnOwogICAgICAgICAgcHJpdmF0ZUZpZWxkID0gJ3Bhc3N3b3JkJzsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Vua25vd24gdHlwZScpOwogICAgICAgIH0KCiAgICAgICAgc2VjcmV0Ll90eXBlID0gdHlwZTsKICAgICAgICBzZWNyZXQuZGF0YSA9IHsKICAgICAgICAgIFtwdWJsaWNGaWVsZF06ICBiYXNlNjRFbmNvZGUodGhpcy5wdWJsaWNLZXkpLAogICAgICAgICAgW3ByaXZhdGVGaWVsZF06IGJhc2U2NEVuY29kZSh0aGlzLnByaXZhdGVLZXkpLAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGF3YWl0IHNlY3JldC5zYXZlKCk7CgogICAgICBhd2FpdCB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy5zZWxlY3RlZCA9IHNlY3JldC5pZDsKICAgICAgfSk7CgogICAgICByZXR1cm4gc2VjcmV0OwogICAgfSwKICB9LAp9Owo="},{"version":3,"sources":["SelectOrCreateAuthSecret.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"SelectOrCreateAuthSecret.vue","sourceRoot":"node_modules/@rancher/shell/components/form","sourcesContent":["<script>\nimport { _EDIT } from '@shell/config/query-params';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { AUTH_TYPE, NORMAN, SECRET } from '@shell/config/types';\nimport { SECRET_TYPES } from '@shell/config/secret';\nimport { base64Encode } from '@shell/utils/crypto';\nimport { addObjects, insertAt } from '@shell/utils/array';\nimport { sortBy } from '@shell/utils/sort';\n\nexport default {\n  name: 'SelectOrCreateAuthSecret',\n\n  components: {\n    LabeledInput,\n    LabeledSelect,\n  },\n\n  props: {\n    mode: {\n      type:    String,\n      default: _EDIT,\n    },\n\n    preSelect: {\n      type:    Object,\n      default: null,\n    },\n\n    value: {\n      type:    [String, Object],\n      default: null,\n    },\n\n    inStore: {\n      type:    String,\n      default: 'cluster',\n    },\n\n    labelKey: {\n      type:    String,\n      default: 'selectOrCreateAuthSecret.label',\n    },\n\n    namespace: {\n      type:     String,\n      required: true,\n    },\n\n    limitToNamespace: {\n      type:    Boolean,\n      default: true,\n    },\n\n    generateName: {\n      type:    String,\n      default: 'auth-',\n    },\n\n    allowNone: {\n      type:    Boolean,\n      default: true,\n    },\n\n    allowSsh: {\n      type:    Boolean,\n      default: true,\n    },\n\n    allowBasic: {\n      type:    Boolean,\n      default: true,\n    },\n\n    allowS3: {\n      type:    Boolean,\n      default: false,\n    },\n\n    allowRke: {\n      type:    Boolean,\n      default: false,\n    },\n\n    registerBeforeHook: {\n      type:     Function,\n      required: true,\n    },\n\n    hookName: {\n      type:    String,\n      default: 'registerAuthSecret'\n    },\n\n    appendUniqueIdToHook: {\n      type:    Boolean,\n      default: false\n    },\n\n    hookPriority: {\n      type:    Number,\n      default: 99,\n    },\n\n    vertical: {\n      type:    Boolean,\n      default: false,\n    },\n\n    /**\n     * This component is used in MultiStep Priocess\n     * So when user click through to final step and submit the form\n     * This component get recreated therefore register `doCreate` as a hook each time\n     * Also, the parent step component is not aware that credential is created\n     *\n     * This property is implement to prevent this issue and delegate it to parent component.\n     */\n    delegateCreateToParent: {\n      type:    Boolean,\n      default: false\n    }\n  },\n\n  async fetch() {\n    if ( (this.allowSsh || this.allowBasic || this.allowRke) && this.$store.getters[`${ this.inStore }/schemaFor`](SECRET) ) {\n      // Avoid an async call and loading screen if already loaded by someone else\n      if ( this.$store.getters[`${ this.inStore }/haveAll`](SECRET) ) {\n        this.allSecrets = this.$store.getters[`${ this.inStore }/all`](SECRET);\n      } else {\n        this.allSecrets = await this.$store.dispatch(`${ this.inStore }/findAll`, { type: SECRET });\n      }\n    }\n\n    if ( this.allowS3 && this.$store.getters['rancher/canList'](NORMAN.CLOUD_CREDENTIAL) ) {\n      // Avoid an async call and loading screen if already loaded by someone else\n      if ( this.$store.getters['rancher/haveAll'](NORMAN.CLOUD_CREDENTIAL) ) {\n        this.allCloudCreds = this.$store.getters['rancher/all'](NORMAN.CLOUD_CREDENTIAL);\n      } else {\n        this.allCloudCreds = await this.$store.dispatch('rancher/findAll', { type: NORMAN.CLOUD_CREDENTIAL });\n      }\n    } else {\n      this.allCloudCreds = [];\n    }\n\n    let selected = this.preSelect?.selected || AUTH_TYPE._NONE;\n\n    if ( !this.value ) {\n      this.publicKey = this.preSelect?.publicKey || '';\n      this.privateKey = this.preSelect?.privateKey || '';\n    }\n\n    if ( this.value ) {\n      if ( typeof this.value === 'object' ) {\n        selected = `${ this.value.namespace }/${ this.value.name }`;\n      } else if ( this.value.includes('/') || this.value.includes(':') ) {\n        selected = this.value;\n      } else if ( this.namespace ) {\n        selected = `${ this.namespace }/${ this.value }`;\n      } else {\n        selected = this.value;\n      }\n    }\n\n    this.selected = selected;\n\n    this.update();\n  },\n\n  data(props) {\n    return {\n      allCloudCreds: [],\n      allSecrets:    [],\n      selected:      null,\n\n      publicKey:  '',\n      privateKey: '',\n      uniqueId:   new Date().getTime() // Allows form state to be individually tracked if the form is in a list\n    };\n  },\n\n  computed: {\n    _SSH() {\n      return AUTH_TYPE._SSH;\n    },\n\n    _BASIC() {\n      return AUTH_TYPE._BASIC;\n    },\n\n    _S3() {\n      return AUTH_TYPE._S3;\n    },\n\n    options() {\n      const types = [];\n      const keys = [];\n\n      if ( this.allowSsh ) {\n        types.push(SECRET_TYPES.SSH);\n      }\n\n      if ( this.allowBasic ) {\n        types.push(SECRET_TYPES.BASIC);\n      }\n\n      if ( this.allowRke ) {\n        types.push(SECRET_TYPES.RKE_AUTH_CONFIG);\n      }\n\n      const out = this.allSecrets\n        .filter((x) => this.namespace && this.limitToNamespace ? x.metadata.namespace === this.namespace : true)\n        .filter((x) => {\n          // Must match one of the types if given\n          if ( types.length && !types.includes(x._type) ) {\n            return false;\n          }\n\n          // Must match ALL of the keys if given\n          if ( keys.length ) {\n            const dataKeys = Object.keys(x.data || {});\n\n            if ( !keys.every((key) => dataKeys.includes(key)) ) {\n              return false;\n            }\n          }\n\n          return true;\n        }).map((x) => {\n          const {\n            dataPreview, subTypeDisplay, metadata, id\n          } = x;\n\n          const label = subTypeDisplay && dataPreview ? `${ metadata.name } (${ subTypeDisplay }: ${ dataPreview })` : `${ metadata.name } (${ subTypeDisplay })`;\n\n          return {\n            label,\n            group: metadata.namespace,\n            value: id,\n          };\n        });\n\n      if ( this.allowS3 ) {\n        const more = this.allCloudCreds\n          .filter((x) => ['aws', 's3'].includes(x.provider) )\n          .map((x) => {\n            return {\n              label: `${ x.nameDisplay } (${ x.providerDisplay })`,\n              group: 'Cloud Credentials',\n              value: x.id,\n            };\n          });\n\n        addObjects(out, more);\n      }\n\n      if ( !this.limitToNamespace ) {\n        sortBy(out, 'group');\n        if ( out.length ) {\n          let lastGroup = '';\n\n          for ( let i = 0 ; i < out.length ; i++ ) {\n            if ( out[i].group !== lastGroup ) {\n              lastGroup = out[i].group;\n\n              insertAt(out, i, {\n                kind:     'title',\n                label:    this.t('selectOrCreateAuthSecret.namespaceGroup', { name: lastGroup }),\n                disabled: true,\n              });\n\n              i++;\n            }\n          }\n        }\n      }\n\n      if ( out.length ) {\n        out.unshift({\n          kind:     'title',\n          label:    this.t('selectOrCreateAuthSecret.chooseExisting'),\n          disabled: true\n        });\n      }\n      if ( this.allowNone ) {\n        out.unshift({\n          label: this.t('generic.none'),\n          value: AUTH_TYPE._NONE,\n        });\n      }\n\n      if (this.allowSsh || this.allowS3 || this.allowBasic) {\n        out.unshift({\n          label:    'divider',\n          disabled: true,\n          kind:     'divider'\n        });\n      }\n\n      if ( this.allowSsh ) {\n        out.unshift({\n          label: this.t('selectOrCreateAuthSecret.createSsh'),\n          value: AUTH_TYPE._SSH,\n          kind:  'highlighted'\n        });\n      }\n\n      if ( this.allowS3 ) {\n        out.unshift({\n          label: this.t('selectOrCreateAuthSecret.createS3'),\n          value: AUTH_TYPE._S3,\n          kind:  'highlighted'\n        });\n      }\n\n      if ( this.allowBasic ) {\n        out.unshift({\n          label: this.t('selectOrCreateAuthSecret.createBasic'),\n          value: AUTH_TYPE._BASIC,\n          kind:  'highlighted'\n        });\n      }\n\n      return out;\n    },\n\n    firstCol() {\n      if ( this.vertical ) {\n        return '';\n      }\n\n      if ( this.selected === AUTH_TYPE._SSH || this.selected === AUTH_TYPE._BASIC || this.selected === AUTH_TYPE._S3 ) {\n        return 'col span-4';\n      }\n\n      return 'col span-6';\n    },\n\n    moreCols() {\n      if ( this.vertical ) {\n        return 'mt-20';\n      }\n\n      return 'col span-4';\n    }\n  },\n\n  watch: {\n    selected:   'update',\n    publicKey:  'updateKeyVal',\n    privateKey: 'updateKeyVal',\n\n    namespace(ns) {\n      if ( ns && !this.selected.startsWith(`${ ns }/`) ) {\n        this.selected = AUTH_TYPE._NONE;\n      }\n    }\n  },\n\n  created() {\n    if (this.registerBeforeHook) {\n      const hookName = this.appendUniqueIdToHook ? this.hookName + this.uniqueId : this.hookName;\n\n      if (!this.delegateCreateToParent) {\n        this.registerBeforeHook(this.doCreate, hookName, this.hookPriority);\n      }\n    } else {\n      throw new Error('Before Hook is missing');\n    }\n  },\n\n  methods: {\n    updateKeyVal() {\n      if ( ![AUTH_TYPE._SSH, AUTH_TYPE._BASIC, AUTH_TYPE._S3].includes(this.selected)) {\n        this.privateKey = '';\n        this.publicKey = '';\n      }\n\n      this.$emit('inputauthval', {\n        selected:   this.selected,\n        privateKey: this.privateKey,\n        publicKey:  this.publicKey\n      });\n    },\n\n    update() {\n      if ( (!this.selected || [AUTH_TYPE._SSH, AUTH_TYPE._BASIC, AUTH_TYPE._S3, AUTH_TYPE._NONE].includes(this.selected))) {\n        this.$emit('input', null);\n      } else if ( this.selected.includes(':') ) {\n        // Cloud creds\n        this.$emit('input', this.selected);\n      } else {\n        const split = this.selected.split('/');\n\n        if ( this.limitToNamespace ) {\n          this.$emit('input', split[1]);\n        } else {\n          const out = {\n            namespace: split[0],\n            name:      split[1]\n          };\n\n          this.$emit('input', out);\n        }\n      }\n\n      this.updateKeyVal();\n    },\n\n    async doCreate() {\n      if ( ![AUTH_TYPE._SSH, AUTH_TYPE._BASIC, AUTH_TYPE._S3].includes(this.selected) || this.delegateCreateToParent ) {\n        return;\n      }\n\n      let secret;\n\n      if ( this.selected === AUTH_TYPE._S3 ) {\n        secret = await this.$store.dispatch(`rancher/create`, {\n          type:               NORMAN.CLOUD_CREDENTIAL,\n          s3credentialConfig: {\n            accessKey: this.publicKey,\n            secretKey: this.privateKey,\n          },\n        });\n      } else {\n        secret = await this.$store.dispatch(`${ this.inStore }/create`, {\n          type:     SECRET,\n          metadata: {\n            namespace:    this.namespace,\n            generateName: this.generateName\n          },\n        });\n\n        let type, publicField, privateField;\n\n        switch ( this.selected ) {\n        case AUTH_TYPE._SSH:\n          type = SECRET_TYPES.SSH;\n          publicField = 'ssh-publickey';\n          privateField = 'ssh-privatekey';\n          break;\n        case AUTH_TYPE._BASIC:\n          type = SECRET_TYPES.BASIC;\n          publicField = 'username';\n          privateField = 'password';\n          break;\n        default:\n          throw new Error('Unknown type');\n        }\n\n        secret._type = type;\n        secret.data = {\n          [publicField]:  base64Encode(this.publicKey),\n          [privateField]: base64Encode(this.privateKey),\n        };\n      }\n\n      await secret.save();\n\n      await this.$nextTick(() => {\n        this.selected = secret.id;\n      });\n\n      return secret;\n    },\n  },\n};\n</script>\n\n<template>\n  <div\n    class=\"select-or-create-auth-secret\"\n  >\n    <div\n      class=\"mt-20\"\n      :class=\"{'row': !vertical}\"\n    >\n      <div :class=\"firstCol\">\n        <LabeledSelect\n          v-model=\"selected\"\n          data-testid=\"auth-secret-select\"\n          :mode=\"mode\"\n          :label-key=\"labelKey\"\n          :loading=\"$fetchState.pending\"\n          :options=\"options\"\n          :selectable=\"option => !option.disabled\"\n        />\n      </div>\n      <template v-if=\"selected === _SSH\">\n        <div :class=\"moreCols\">\n          <LabeledInput\n            v-model=\"publicKey\"\n            data-testid=\"auth-secret-ssh-public-key\"\n            :mode=\"mode\"\n            type=\"multiline\"\n            label-key=\"selectOrCreateAuthSecret.ssh.publicKey\"\n          />\n        </div>\n        <div :class=\"moreCols\">\n          <LabeledInput\n            v-model=\"privateKey\"\n            data-testid=\"auth-secret-ssh-private-key\"\n            :mode=\"mode\"\n            type=\"multiline\"\n            label-key=\"selectOrCreateAuthSecret.ssh.privateKey\"\n          />\n        </div>\n      </template>\n      <template v-else-if=\"selected === _BASIC\">\n        <div :class=\"moreCols\">\n          <LabeledInput\n            v-model=\"publicKey\"\n            data-testid=\"auth-secret-basic-public-key\"\n            :mode=\"mode\"\n            label-key=\"selectOrCreateAuthSecret.basic.username\"\n          />\n        </div>\n        <div :class=\"moreCols\">\n          <LabeledInput\n            v-model=\"privateKey\"\n            data-testid=\"auth-secret-basic-private-key\"\n            :mode=\"mode\"\n            type=\"password\"\n            label-key=\"selectOrCreateAuthSecret.basic.password\"\n          />\n        </div>\n      </template>\n      <template v-else-if=\"selected === _S3\">\n        <div :class=\"moreCols\">\n          <LabeledInput\n            v-model=\"publicKey\"\n            data-testid=\"auth-secret-s3-public-key\"\n            :mode=\"mode\"\n            label-key=\"selectOrCreateAuthSecret.s3.accessKey\"\n          />\n        </div>\n        <div :class=\"moreCols\">\n          <LabeledInput\n            v-model=\"privateKey\"\n            data-testid=\"auth-secret-s3-private-key\"\n            :mode=\"mode\"\n            type=\"password\"\n            label-key=\"selectOrCreateAuthSecret.s3.secretKey\"\n          />\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.select-or-create-auth-secret div.labeled-select {\n  min-height: $input-height;\n}\n</style>\n"]}]}