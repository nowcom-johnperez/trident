{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/components/forms/AddSubnet.vue?vue&type=style&index=0&id=33c0dae8&scoped=true&lang=css","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/pkg/nowcom/components/forms/AddSubnet.vue","mtime":1716430386792},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":1716430467357},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1716430467929},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/postcss-loader/src/index.js","mtime":1716430467882},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5hZGQtZm9ybS1yb3cgewogIHdpZHRoOiAzMDBweDsKICAvKiBkaXNwbGF5OiBncmlkOyAqLwogIGp1c3RpZnktY29udGVudDogY2VudGVyOwogIGFsaWduLWl0ZW1zOiBjZW50ZXI7CiAgLyogQWRkIHRoaXMgbGluZSBmb3IgdmVydGljYWwgYWxpZ25tZW50IGlmIG5lZWRlZCAqLwogIG1hcmdpbi10b3A6IDEwcHg7CiAgbWFyZ2luLWJvdHRvbTogMTBweDsKfQo="},{"version":3,"sources":["AddSubnet.vue"],"names":[],"mappings":";AA+HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddSubnet.vue","sourceRoot":"pkg/nowcom/components/forms","sourcesContent":["<template>\n    <div>\n        <h2>Add Subnet</h2>\n        <!-- ... your content for adding subnet -->\n        <div class=\"add-form-row\">\n            <input v-model=\"subnetName\" type=\"text\" placeholder=\"Subnet Name\" title=\"Subnet Name\" />\n        </div>\n        <div class=\"add-form-row\">\n            <input\n                v-model=\"subnetIP\"\n                type=\"text\"\n                placeholder=\"Enter subnet (e.g., 10.0.0.0)\"\n                pattern=\"\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\"\n                title=\"Please enter a valid IP address\"\n            />\n            <p v-if=\"!isSubnetIPValid\" class=\"text-danger\" style=\"font-weight: bold;\">Invalid IP Address</p>\n        </div>\n        <div class=\"add-form-row\">\n            <cButton class=\"cbtn btn-light\" :disabled=\"isAddSubnetDisabled || loading\" @click=\"addSubnet\">\n                <template v-if=\"!loading\">\n                    <i class=\"fa fa-plus fa-lg mr-5\"></i> Add Subnet\n                </template>\n                <template v-else>\n                    <i class=\"fa fa-spinner fa-spin fa-lg mr-5\"></i> Processing\n                </template>\n            </cButton> \n        </div>\n    </div>\n</template>\n\n<script>\nimport { isValidIP } from '../../services/helpers/utils'\nimport { vNetService } from '../../services/api/vnet';\nimport cButton from '../common/Button'\nexport default {\n    name: 'AddSubnet',\n    props: {\n        isOpen: {\n            type: Boolean,\n            required: true\n        },\n        currentNetwork: {\n            type: Object,\n            required: true\n        }\n    },\n    components: {\n        cButton\n    },\n    data() {\n        return {\n            subnetName: '',\n            subnetIP: '10.55.0.0',\n            loading: false,\n        }\n    },\n    watcher: {\n        isOpen (val) {\n            if (!val) this.resetForm();\n        } \n    },\n    computed: {\n        isAddSubnetDisabled() {\n            // Check conditions to disable the button\n            return !this.subnetName || !this.subnetIP || !this.isSubnetIPValid;\n        },\n        isSubnetIPValid() {\n            return isValidIP(this.subnetIP)\n        }\n    },\n    methods: {\n        resetForm() {\n            this.subnetName = '';\n            this.subnetIP = '10.55.0.0';\n            this.loading = false;\n        },\n        async addSubnet() {\n            try {\n                const network = {...this.currentNetwork};\n                this.apiError = null; // Reset error state\n                // v0.2\n                const subnetName = this.subnetName.toLowerCase();\n                const subnet_data = {\n                    longName: `${network.name}-${subnetName}-${this.subnetIP}-24`,\n                    name:      subnetName,\n                    address:   this.subnetIP,\n                    formattedAddress: `${this.subnetIP}/24`,\n                    prefix_len: 24\n                };\n\n                network.subnets.push(subnet_data);\n\n                const vnet_data = {\n                    apiVersion: 'packetlifter.dev/v1',\n                    kind:       'Vnet',\n                    // vnet_vlan: this.selectedVnetVlan,\n                    metadata:   {\n                        name:      network.name.toLowerCase(),\n                        namespace: 'default'\n                    },\n                    spec: {\n                        name:    network.name.toLowerCase(),\n                        subnets: network.subnets,\n                    }\n                };\n\n                console.log('send to API', subnet_data);\n                console.log('log', network);\n\n                this.loading = true\n\n                await vNetService.patchSubnet(network.name, vnet_data);\n                this.resetForm();\n                this.$emit('success')\n            } catch(error) {\n                console.log(error);\n                this.loading = false;\n                // this.subnetResponseMessage = 'Error';\n                // Set the API error in the component\n                // this.apiError = 'Error creating Subnet';\n            }\n        },\n    }\n}\n</script>\n\n<style scoped>\n.add-form-row {\n  width: 300px;\n  /* display: grid; */\n  justify-content: center;\n  align-items: center;\n  /* Add this line for vertical alignment if needed */\n  margin-top: 10px;\n  margin-bottom: 10px;\n}\n</style>"]}]}