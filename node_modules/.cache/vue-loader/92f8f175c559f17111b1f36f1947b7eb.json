{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ActionMenu.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ActionMenu.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgQVVUTywgQ0VOVEVSLCBmaXRPblNjcmVlbiB9IGZyb20gJ0BzaGVsbC91dGlscy9wb3NpdGlvbic7CmltcG9ydCB7IGlzQWx0ZXJuYXRlIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3BsYXRmb3JtJzsKaW1wb3J0IEljb25PclN2ZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9JY29uT3JTdmcnOwoKY29uc3QgSElEREVOID0gJ2hpZGUnOwpjb25zdCBDQUxDID0gJ2NhbGN1bGF0ZSc7CmNvbnN0IFNIT1cgPSAnc2hvdyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogICAgICAgJ0FjdGlvbk1lbnUnLAogIGNvbXBvbmVudHM6IHsgSWNvbk9yU3ZnIH0sCiAgcHJvcHM6ICAgICAgewogICAgY3VzdG9tQWN0aW9uczogewogICAgICAvLyBDdXN0b20gYWN0aW9ucyBjYW4gYmUgdXNlZCBpZiB5b3UgbmVlZCB0aGUgYWN0aW9uCiAgICAgIC8vIG1lbnUgdG8gd29yayBmb3Igc29tZXRoaW5nIHRoYXQgaXMgbm90IGEgS3ViZXJuZXRlcwogICAgICAvLyByZXNvdXJjZSwgZm9yIGV4YW1wbGUsIGEgcmVjZWl2ZXIgd2l0aGluIGFuCiAgICAgIC8vIEFsZXJ0bWFuYWdlckNvbmZpZy4KCiAgICAgIC8vIFRoaXMgcHJvcCBjYW4gYWxzbyBiZSB1c2VkIHRvIGF2b2lkCiAgICAgIC8vIGEgZGVwZW5kZW5jeSBvbiBWdWV4LiBGb3Igbm93LCB0aGlzIGNvbXBvbmVudCBjYW4gaGF2ZQogICAgICAvLyBpdHMgc3RhdGUgY29udHJvbGxlZCBieSBlaXRoZXIgcHJvcHMgT1IgYnkgVnVleCwgYnV0IGlmIGl0CiAgICAgIC8vIGdldHMgdW53aWVsZHksIGl0IGNvdWxkIGxhdGVyIGJlIHNwbGl0IGludG8gdHdvIGNvbXBvbmVudHMsCiAgICAgIC8vIG9uZSB3aXRoIHRoZSBkZXBlbmRlbmN5IG9uIFZ1ZXggYW5kIG9uZSB3aXRob3V0LgogICAgICB0eXBlOiAgICBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIG9wZW46IHsKICAgICAgLy8gVXNlIHRoaXMgcHJvcCB0byBzaG93IGFuZCBoaWRlIHRoZSBhY3Rpb24gbWVudSBpZgogICAgICAvLyB5b3Ugd2FudCB0byBhdm9pZCBhbiB1bm5lY2Vzc2FyeSBkZXBlbmRlbmN5IG9uIFZ1ZXguCgogICAgICAvLyBOb3RlOiBUaGVyZSBhcmUga25vd24gaXNzdWVzIHdpdGggcGVyZm9ybWFuY2UgaWYgdGhpcyBjb21wb25lbnQKICAgICAgLy8gaXMgaW5jbHVkZWQgd2l0aCBldmVyeSByb3cgb2YgYSB0YWJsZSwgc28gZG9uJ3QgZG8gdGhhdC4KICAgICAgLy8gSW5zdGVhZCB0aGUgQWN0aW9uTWVudSBjb21wb25lbnQgY2FuIGJlIGluY2x1ZGVkIG9uY2Ugb24gYSBwYWdlLAogICAgICAvLyBhbmQgdGhlbiBpZiB5b3UgY2xpY2sgb24gYSBsaXN0IGl0ZW0sIHRoYXQgY2FuIGNoYW5nZQogICAgICAvLyB0aGUgbWVudSdzIHRhcmdldCBzbyB0aGF0IGl0IGNhbiBvcGVuIGluIGRpZmZlcmVudCBsb2NhdGlvbnMuCiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgdXNlQ3VzdG9tVGFyZ2V0RWxlbWVudDogewogICAgICAvLyBUaGUgY3VzdG9tIHRhcmdldCBlbGVtZW50IGNhbiBiZSBhCiAgICAgIC8vIHZhcmlhYmxlIGluIHRoZSBjb21wb25lbnQgc3RhdGUgb2YgYSBsaXN0IG9yIGRldGFpbCBwYWdlCiAgICAgIC8vIGlmIHlvdSBkb24ndCB3YW50IGEgZGVwZW5kZW5jeSBvbiBWdWV4LgogICAgICAvLyBUaGVuIHdoZW4gYW4gYWN0aW9uIG1lbnUgYnV0dG9uIGlzIGNsaWNrZWQsIGl0IGNhbiBlbWl0IGFuIGV2ZW50CiAgICAgIC8vIHRoYXQgdHJpZ2dlcnMgdGhlIHRhcmdldCB0byBiZSBzZXQgdG8gdGhlIGNsaWNrZWQgZWxlbWVudCwKICAgICAgLy8gc28gdGhhdCB0aGUgZHJvcGRvd24gbWVudSBjYW4gb3BlbiB3aGVyZSB0aGUgY29udGV4dCBtZW51CiAgICAgIC8vIHdhcyBjbGlja2VkLgogICAgICAvLyBUaGlzIGZsYWcgdGVsbHMgdGhlIGNvbXBvbmVudCB0byBsb29rIGZvciBhbmQgdXNlIHRoZQogICAgICAvLyBjdXN0b20gdGFyZ2V0IGVsZW1lbnQuCiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgY3VzdG9tVGFyZ2V0RWxlbWVudDogewogICAgICB0eXBlOiAgICBIVE1MRWxlbWVudCwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGN1c3RvbVRhcmdldEV2ZW50OiB7CiAgICAgIC8vIFRoZSBldmVudCBkZXRhaWxzIGZyb20gdGhlIHVzZXIncyBjbGljayBjYW4gYmUgdXNlZAogICAgICAvLyBmb3IgcG9zaXRpb25pbmcgdGhlIG1lbnUgb24gdGhlIHBhZ2UuCiAgICAgIHR5cGU6ICAgIFtQb2ludGVyRXZlbnQsIE1vdXNlRXZlbnRdLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAoKICAgIC8qKgogICAgICogSW5oZXJpdGVkIGdsb2JhbCBpZGVudGlmaWVyIHByZWZpeCBmb3IgdGVzdHMKICAgICAqIERlZmluZSBhIHRlcm0gYmFzZWQgb24gdGhlIHBhcmVudCBjb21wb25lbnQgdG8gYXZvaWQgY29uZmxpY3RzIG9uIG11bHRpcGxlIGNvbXBvbmVudHMKICAgICAqLwogICAgY29tcG9uZW50VGVzdGlkOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ2FjdGlvbi1tZW51JwogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4geyBwaGFzZTogSElEREVOLCBzdHlsZToge30gfTsKICB9LAoKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIC8vIFVzZSBlaXRoZXIgdGhlc2UgVnVleCBnZXR0ZXJzCiAgICAgIC8vIE9SIHRoZSBwcm9wcyB0byBzZXQgdGhlIGFjdGlvbiBtZW51IHN0YXRlLAogICAgICAvLyBidXQgZG9uJ3QgdXNlIGJvdGguCiAgICAgIHRhcmdldEVsZW06ICAnYWN0aW9uLW1lbnUvZWxlbScsCiAgICAgIHRhcmdldEV2ZW50OiAnYWN0aW9uLW1lbnUvZXZlbnQnLAogICAgICBzaG91bGRTaG93OiAgJ2FjdGlvbi1tZW51L3Nob3dpbmcnLAogICAgICBvcHRpb25zOiAgICAgJ2FjdGlvbi1tZW51L29wdGlvbnMnCiAgICB9KSwKCiAgICBzaG93aW5nKCkgewogICAgICByZXR1cm4gdGhpcy5waGFzZSAhPT0gSElEREVOOwogICAgfSwKICAgIG1lbnVPcHRpb25zKCkgewogICAgICBpZiAodGhpcy5jdXN0b21BY3Rpb25zLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gdGhpcy5jdXN0b21BY3Rpb25zOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5vcHRpb25zOwogICAgfSwKICB9LAoKICB3YXRjaDogewogICAgc2hvdWxkU2hvdzogewogICAgICBoYW5kbGVyKHNob3cpIHsKICAgICAgICBpZiAoIHNob3cgKSB7CiAgICAgICAgICB0aGlzLnBoYXNlID0gQ0FMQzsKICAgICAgICAgIHRoaXMudXBkYXRlU3R5bGUoKTsKICAgICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgICAgaWYgKCB0aGlzLnBoYXNlID09PSBDQUxDICkgewogICAgICAgICAgICAgIHRoaXMucGhhc2UgPSBTSE9XOwogICAgICAgICAgICAgIHRoaXMudXBkYXRlU3R5bGUoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMucGhhc2UgPSBISURERU47CiAgICAgICAgfQogICAgICB9LAogICAgfSwKCiAgICBvcGVuKCkgewogICAgICAvLyBUaGlzIGNvbXBvbmVudCBoYXMgYSB0aW1pbmcgaXNzdWUgd2hlcmUgdGhlCiAgICAgIC8vIG1vdW50ZWQgc2l6ZSBvZiB0aGUgZXhwYW5kZWQgbWVudSBpcyB1c2VkIHRvCiAgICAgIC8vIGNhbGN1bGF0ZSB3aGVyZSBpdHMgcG9zaXRpb24gc2hvdWxkIGJlLiBUaGF0IG1lYW5zCiAgICAgIC8vIGl0IHdvbid0IHdvcmsgaWYgdGhlIHN0eWxlIGlzIGEgY29tcHV0ZWQgcHJvcGVydHksCiAgICAgIC8vIHNvIHdlIHB1dCBhIHdhdGNoZXIgaGVyZSB0byB1cGRhdGUgdGhlIHN0eWxlIGluc3RlYWQuCiAgICAgIHRoaXMudXBkYXRlU3R5bGUoKTsKICAgIH0sCgogICAgJyRyb3V0ZS5wYXRoJyh2YWwsIG9sZCkgewogICAgICB0aGlzLmhpZGUoKTsKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBoaWRlKCkgewogICAgICBpZiAodGhpcy51c2VDdXN0b21UYXJnZXRFbGVtZW50KSB7CiAgICAgICAgLy8gSWYgdGhlIHNob3cvaGlkZSBzdGF0ZSBpcyBjb250cm9sbGVkCiAgICAgICAgLy8gYnkgcHJvcHMsIGVtaXQgYW4gZXZlbnQgdG8gY2xvc2UgdGhlIG1lbnUuCiAgICAgICAgdGhpcy4kZW1pdCgnY2xvc2UnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICAvLyBJZiB0aGUgc2hvdy9oaWRlIHN0YXRlIGlzIGNvbnRyb2xsZWQKICAgICAgICAvLyBieSBWdWV4LCBtdXRhdGUgdGhlIHN0b3JlIHRvIGNsb3NlIHRoZSBtZW51LgogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnYWN0aW9uLW1lbnUvaGlkZScpOwogICAgICB9CiAgICB9LAoKICAgIHVwZGF0ZVN0eWxlKCkgewogICAgICBpZiAoIHRoaXMucGhhc2UgPT09IFNIT1cgJiYgIXRoaXMudXNlQ3VzdG9tVGFyZ2V0RWxlbWVudCkgewogICAgICAgIGNvbnN0IG1lbnUgPSB0aGlzLiRlbD8ucXVlcnlTZWxlY3RvciAmJiB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcubWVudScpOwogICAgICAgIGNvbnN0IGV2ZW50ID0gdGhpcy50YXJnZXRFdmVudDsKICAgICAgICBjb25zdCBlbGVtID0gdGhpcy50YXJnZXRFbGVtOwoKICAgICAgICAvLyBJZiB0aGUgYWN0aW9uIG1lbnUgc3RhdGUgaXMgY29udHJvbGxlZCB3aXRoIFZ1ZXgsCiAgICAgICAgLy8gdXNlIHRoZSB0YXJnZXQgZWxlbWVudCBhbmQgdGhlIHRhcmdldCBldmVudAogICAgICAgIC8vIHRvIHBvc2l0aW9uIHRoZSBtZW51LgogICAgICAgIHRoaXMuc3R5bGUgPSBmaXRPblNjcmVlbihtZW51LCBlbGVtIHx8IGV2ZW50LCB7CiAgICAgICAgICBvdmVybGFwWDogIHRydWUsCiAgICAgICAgICBmdWRnZVg6ICAgIGVsZW0gPyAtMiA6IDAsCiAgICAgICAgICBmdWRnZVk6ICAgIGVsZW0gPyAyMCA6IDAsCiAgICAgICAgICBwb3NpdGlvblg6IChlbGVtID8gQVVUTyA6IENFTlRFUiksCiAgICAgICAgICBwb3NpdGlvblk6IEFVVE8sCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5zdHlsZS52aXNpYmlsaXR5ID0gJ3Zpc2libGUnOwoKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGlmICggdGhpcy5vcGVuICYmIHRoaXMudXNlQ3VzdG9tVGFyZ2V0RWxlbWVudCkgewogICAgICAgIGNvbnN0IG1lbnUgPSB0aGlzLiRlbD8ucXVlcnlTZWxlY3RvciAmJiB0aGlzLiRlbC5xdWVyeVNlbGVjdG9yKCcubWVudScpOwogICAgICAgIGNvbnN0IGVsZW0gPSB0aGlzLmN1c3RvbVRhcmdldEVsZW1lbnQ7CgogICAgICAgIC8vIElmIHRoZSBhY3Rpb24gbWVudSBzdGF0ZSBpcyBjb250cm9sbGVkIHdpdGgKICAgICAgICAvLyBwcm9wcywgdXNlIHRoZSB0YXJnZXQgZWxlbWVudCB0byBwb3NpdGlvbiB0aGUgbWVudS4KICAgICAgICB0aGlzLnN0eWxlID0gZml0T25TY3JlZW4obWVudSwgZWxlbSwgewogICAgICAgICAgb3ZlcmxhcFg6ICB0cnVlLAogICAgICAgICAgZnVkZ2VYOiAgICBlbGVtID8gNCA6IDAsCiAgICAgICAgICBmdWRnZVk6ICAgIGVsZW0gPyA0IDogMCwKICAgICAgICAgIHBvc2l0aW9uWDogKGVsZW0gPyBBVVRPIDogQ0VOVEVSKSwKICAgICAgICAgIHBvc2l0aW9uWTogQVVUTywKICAgICAgICB9LCB0cnVlICk7CgogICAgICAgIHRoaXMuc3R5bGUudmlzaWJpbGl0eSA9ICd2aXNpYmxlJzsKCiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICB0aGlzLnN0eWxlID0ge307CiAgICB9LAoKICAgIGV4ZWN1dGUoYWN0aW9uLCBldmVudCwgYXJncykgewogICAgICBpZiAoYWN0aW9uLmRpc2FibGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICAvLyB0aGlzIHdpbGwgY29tZSBmcm9tIGV4dGVuc2lvbnMuLi4KICAgICAgaWYgKGFjdGlvbi5pbnZva2UpIHsKICAgICAgICBjb25zdCBmbiA9IGFjdGlvbi5pbnZva2U7CgogICAgICAgIGlmIChmbiAmJiBhY3Rpb24uZW5hYmxlZCkgewogICAgICAgICAgY29uc3QgcmVzb3VyY2VzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snYWN0aW9uLW1lbnUvcmVzb3VyY2VzJ107CiAgICAgICAgICBjb25zdCBvcHRzID0gewogICAgICAgICAgICBldmVudCwKICAgICAgICAgICAgYWN0aW9uLAogICAgICAgICAgICBpc0FsdDogaXNBbHRlcm5hdGUoZXZlbnQpCiAgICAgICAgICB9OwoKICAgICAgICAgIGlmIChyZXNvdXJjZXMubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgIGZuLmFwcGx5KHRoaXMsIFtvcHRzLCByZXNvdXJjZXNdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGhpcy51c2VDdXN0b21UYXJnZXRFbGVtZW50KSB7CiAgICAgICAgLy8gSWYgdGhlIHN0YXRlIG9mIHRoaXMgY29tcG9uZW50IGlzIGNvbnRyb2xsZWQKICAgICAgICAvLyBieSBwcm9wcyBpbnN0ZWFkIG9mIFZ1ZXgsIHdlIGFzc3VtZSB5b3Ugd291bGRuJ3Qgd2FudAogICAgICAgIC8vIHRoZSBtdXRhdGlvbiB0byBoYXZlIGEgZGVwZW5kZW5jeSBvbiBWdWV4IGVpdGhlci4KICAgICAgICAvLyBTbyBpbiB0aGF0IGNhc2Ugd2UgdXNlIGV2ZW50cyB0byBleGVjdXRlIGFjdGlvbnMgaW5zdGVhZC4KICAgICAgICAvLyBJZiBhbiBhY3Rpb24gbGlzdCBpdGVtIGlzIGNsaWNrZWQsIHRoaXMKICAgICAgICAvLyBjb21wb25lbnQgZW1pdHMgdGhhdCBldmVudCwgdGhlbiB3ZSBhc3N1bWUgdGhlIHBhcmVudAogICAgICAgIC8vIGNvbXBvbmVudCB3aWxsIGV4ZWN1dGUgdGhlIGFjdGlvbi4KICAgICAgICB0aGlzLiRlbWl0KGFjdGlvbi5hY3Rpb24sIHsKICAgICAgICAgIGFjdGlvbiwKICAgICAgICAgIGV2ZW50LAogICAgICAgICAgLi4uYXJncywKICAgICAgICAgIHJvdXRlOiB0aGlzLiRyb3V0ZQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIElmIHRoZSBzdGF0ZSBvZiB0aGlzIGNvbXBvbmVudCBpcyBjb250cm9sbGVkCiAgICAgICAgLy8gYnkgVnVleCwgbXV0YXRlIHRoZSBzdG9yZSB3aGVuIGFuIGFjdGlvbiBpcyBjbGlja2VkLgogICAgICAgIGNvbnN0IG9wdHMgPSB7IGFsdDogaXNBbHRlcm5hdGUoZXZlbnQpIH07CgogICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhY3Rpb24tbWVudS9leGVjdXRlJywgewogICAgICAgICAgYWN0aW9uLCBhcmdzLCBvcHRzCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIHRoaXMuaGlkZSgpOwogICAgfSwKCiAgICBoYXNPcHRpb25zKG9wdGlvbnMpIHsKICAgICAgcmV0dXJuIG9wdGlvbnMubGVuZ3RoICE9PSB1bmRlZmluZWQgPyBvcHRpb25zLmxlbmd0aCA6IE9iamVjdC5rZXlzKG9wdGlvbnMpLmxlbmd0aCA+IDA7CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["ActionMenu.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"ActionMenu.vue","sourceRoot":"node_modules/@rancher/shell/components","sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport { AUTO, CENTER, fitOnScreen } from '@shell/utils/position';\nimport { isAlternate } from '@shell/utils/platform';\nimport IconOrSvg from '@shell/components/IconOrSvg';\n\nconst HIDDEN = 'hide';\nconst CALC = 'calculate';\nconst SHOW = 'show';\n\nexport default {\n  name:       'ActionMenu',\n  components: { IconOrSvg },\n  props:      {\n    customActions: {\n      // Custom actions can be used if you need the action\n      // menu to work for something that is not a Kubernetes\n      // resource, for example, a receiver within an\n      // AlertmanagerConfig.\n\n      // This prop can also be used to avoid\n      // a dependency on Vuex. For now, this component can have\n      // its state controlled by either props OR by Vuex, but if it\n      // gets unwieldy, it could later be split into two components,\n      // one with the dependency on Vuex and one without.\n      type:    Array,\n      default: () => {\n        return [];\n      }\n    },\n    open: {\n      // Use this prop to show and hide the action menu if\n      // you want to avoid an unnecessary dependency on Vuex.\n\n      // Note: There are known issues with performance if this component\n      // is included with every row of a table, so don't do that.\n      // Instead the ActionMenu component can be included once on a page,\n      // and then if you click on a list item, that can change\n      // the menu's target so that it can open in different locations.\n      type:    Boolean,\n      default: false\n    },\n    useCustomTargetElement: {\n      // The custom target element can be a\n      // variable in the component state of a list or detail page\n      // if you don't want a dependency on Vuex.\n      // Then when an action menu button is clicked, it can emit an event\n      // that triggers the target to be set to the clicked element,\n      // so that the dropdown menu can open where the context menu\n      // was clicked.\n      // This flag tells the component to look for and use the\n      // custom target element.\n      type:    Boolean,\n      default: false\n    },\n    customTargetElement: {\n      type:    HTMLElement,\n      default: null\n    },\n    customTargetEvent: {\n      // The event details from the user's click can be used\n      // for positioning the menu on the page.\n      type:    [PointerEvent, MouseEvent],\n      default: null\n    },\n\n    /**\n     * Inherited global identifier prefix for tests\n     * Define a term based on the parent component to avoid conflicts on multiple components\n     */\n    componentTestid: {\n      type:    String,\n      default: 'action-menu'\n    }\n  },\n\n  data() {\n    return { phase: HIDDEN, style: {} };\n  },\n\n  computed: {\n    ...mapGetters({\n      // Use either these Vuex getters\n      // OR the props to set the action menu state,\n      // but don't use both.\n      targetElem:  'action-menu/elem',\n      targetEvent: 'action-menu/event',\n      shouldShow:  'action-menu/showing',\n      options:     'action-menu/options'\n    }),\n\n    showing() {\n      return this.phase !== HIDDEN;\n    },\n    menuOptions() {\n      if (this.customActions.length > 0) {\n        return this.customActions;\n      }\n\n      return this.options;\n    },\n  },\n\n  watch: {\n    shouldShow: {\n      handler(show) {\n        if ( show ) {\n          this.phase = CALC;\n          this.updateStyle();\n          this.$nextTick(() => {\n            if ( this.phase === CALC ) {\n              this.phase = SHOW;\n              this.updateStyle();\n            }\n          });\n        } else {\n          this.phase = HIDDEN;\n        }\n      },\n    },\n\n    open() {\n      // This component has a timing issue where the\n      // mounted size of the expanded menu is used to\n      // calculate where its position should be. That means\n      // it won't work if the style is a computed property,\n      // so we put a watcher here to update the style instead.\n      this.updateStyle();\n    },\n\n    '$route.path'(val, old) {\n      this.hide();\n    }\n  },\n\n  methods: {\n    hide() {\n      if (this.useCustomTargetElement) {\n        // If the show/hide state is controlled\n        // by props, emit an event to close the menu.\n        this.$emit('close');\n      } else {\n        // If the show/hide state is controlled\n        // by Vuex, mutate the store to close the menu.\n        this.$store.commit('action-menu/hide');\n      }\n    },\n\n    updateStyle() {\n      if ( this.phase === SHOW && !this.useCustomTargetElement) {\n        const menu = this.$el?.querySelector && this.$el.querySelector('.menu');\n        const event = this.targetEvent;\n        const elem = this.targetElem;\n\n        // If the action menu state is controlled with Vuex,\n        // use the target element and the target event\n        // to position the menu.\n        this.style = fitOnScreen(menu, elem || event, {\n          overlapX:  true,\n          fudgeX:    elem ? -2 : 0,\n          fudgeY:    elem ? 20 : 0,\n          positionX: (elem ? AUTO : CENTER),\n          positionY: AUTO,\n        });\n        this.style.visibility = 'visible';\n\n        return;\n      }\n\n      if ( this.open && this.useCustomTargetElement) {\n        const menu = this.$el?.querySelector && this.$el.querySelector('.menu');\n        const elem = this.customTargetElement;\n\n        // If the action menu state is controlled with\n        // props, use the target element to position the menu.\n        this.style = fitOnScreen(menu, elem, {\n          overlapX:  true,\n          fudgeX:    elem ? 4 : 0,\n          fudgeY:    elem ? 4 : 0,\n          positionX: (elem ? AUTO : CENTER),\n          positionY: AUTO,\n        }, true );\n\n        this.style.visibility = 'visible';\n\n        return;\n      }\n\n      this.style = {};\n    },\n\n    execute(action, event, args) {\n      if (action.disabled) {\n        return;\n      }\n\n      // this will come from extensions...\n      if (action.invoke) {\n        const fn = action.invoke;\n\n        if (fn && action.enabled) {\n          const resources = this.$store.getters['action-menu/resources'];\n          const opts = {\n            event,\n            action,\n            isAlt: isAlternate(event)\n          };\n\n          if (resources.length === 1) {\n            fn.apply(this, [opts, resources]);\n          }\n        }\n      } else if (this.useCustomTargetElement) {\n        // If the state of this component is controlled\n        // by props instead of Vuex, we assume you wouldn't want\n        // the mutation to have a dependency on Vuex either.\n        // So in that case we use events to execute actions instead.\n        // If an action list item is clicked, this\n        // component emits that event, then we assume the parent\n        // component will execute the action.\n        this.$emit(action.action, {\n          action,\n          event,\n          ...args,\n          route: this.$route\n        });\n      } else {\n        // If the state of this component is controlled\n        // by Vuex, mutate the store when an action is clicked.\n        const opts = { alt: isAlternate(event) };\n\n        this.$store.dispatch('action-menu/execute', {\n          action, args, opts\n        });\n      }\n\n      this.hide();\n    },\n\n    hasOptions(options) {\n      return options.length !== undefined ? options.length : Object.keys(options).length > 0;\n    }\n  },\n};\n</script>\n\n<template>\n  <div v-if=\"showing || open\">\n    <div\n      class=\"background\"\n      @click=\"hide\"\n      @contextmenu.prevent\n    />\n    <ul\n      class=\"list-unstyled menu\"\n      :style=\"style\"\n    >\n      <li\n        v-for=\"(opt, i) in menuOptions\"\n        :key=\"opt.action\"\n        :disabled=\"opt.disabled\"\n        :class=\"{divider: opt.divider}\"\n        :data-testid=\"componentTestid + '-' + i + '-item'\"\n        @click=\"execute(opt, $event)\"\n      >\n        <IconOrSvg\n          v-if=\"opt.icon || opt.svg\"\n          :icon=\"opt.icon\"\n          :src=\"opt.svg\"\n          class=\"icon\"\n          color=\"header\"\n        />\n        <span v-clean-html=\"opt.label\" />\n      </li>\n\n      <li\n        v-if=\"!hasOptions(menuOptions)\"\n        class=\"no-actions\"\n      >\n        <span v-t=\"'sortableTable.noActions'\" />\n      </li>\n    </ul>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .root {\n    position: absolute;\n  }\n\n  .menu {\n    position: absolute;\n    visibility: hidden;\n    top: 0;\n    left: 0;\n    z-index: z-index('dropdownContent');\n    min-width: 145px;\n\n    color: var(--dropdown-text);\n    background-color: var(--dropdown-bg);\n    border: 1px solid var(--dropdown-border);\n    border-radius: 5px;\n    box-shadow: 0 5px 20px var(--shadow);\n\n    LI {\n      align-items: center;\n      display: flex;\n      padding: 8px 10px;\n      margin: 0;\n\n      &[disabled] {\n        cursor: not-allowed  !important;\n        color: var(--disabled-text);\n      }\n\n      &.divider {\n        padding: 0;\n        border-bottom: 1px solid var(--dropdown-divider);\n      }\n\n      &:not(.divider):hover {\n        background-color: var(--dropdown-hover-bg);\n        color: var(--dropdown-hover-text);\n        cursor: pointer;\n      }\n\n      .icon {\n        display: unset;\n        width: 14px;\n        text-align: center;\n        margin-right: 8px;\n      }\n\n      &.no-actions {\n        color: var(--disabled-text);\n      }\n\n      &.no-actions:hover {\n        background-color: initial;\n        color: var(--disabled-text);\n        cursor: default;\n      }\n    }\n  }\n\n  .background {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    opacity: 0;\n    z-index: z-index('dropdownOverlay');\n  }\n</style>\n"]}]}