{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/autoscaling.horizontalpodautoscaler/metrics-row.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/autoscaling.horizontalpodautoscaler/metrics-row.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB2YWx1ZXMgZnJvbSAnbG9kYXNoL3ZhbHVlcyc7CmltcG9ydCBpc0VtcHR5IGZyb20gJ2xvZGFzaC9pc0VtcHR5JzsKCmltcG9ydCBFeHRlcm5hbE1ldHJpYywgeyBERUZBVUxUX0VYVEVSTkFMX01FVFJJQyB9IGZyb20gJ0BzaGVsbC9lZGl0L2F1dG9zY2FsaW5nLmhvcml6b250YWxwb2RhdXRvc2NhbGVyL2V4dGVybmFsLW1ldHJpYyc7CmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7CmltcG9ydCBPYmplY3RNZXRyaWMsIHsgREVGQVVMVF9PQkpFQ1RfTUVUUklDIH0gZnJvbSAnQHNoZWxsL2VkaXQvYXV0b3NjYWxpbmcuaG9yaXpvbnRhbHBvZGF1dG9zY2FsZXIvb2JqZWN0LW1ldHJpYyc7CmltcG9ydCBQb2RNZXRyaWMsIHsgREVGQVVMVF9QT0RfTUVUUklDIH0gZnJvbSAnQHNoZWxsL2VkaXQvYXV0b3NjYWxpbmcuaG9yaXpvbnRhbHBvZGF1dG9zY2FsZXIvcG9kLW1ldHJpYyc7CmltcG9ydCBSZXNvdXJjZU1ldHJpYywgeyBERUZBVUxUX1JFU09VUkNFX01FVFJJQyB9IGZyb20gJ0BzaGVsbC9lZGl0L2F1dG9zY2FsaW5nLmhvcml6b250YWxwb2RhdXRvc2NhbGVyL3Jlc291cmNlLW1ldHJpYyc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7Cgpjb25zdCBNRVRSSUNfVFlQRVMgPSB7CiAgZXh0ZXJuYWw6IHsgbGFiZWw6ICdFeHRlcm5hbCcgfSwKICBvYmplY3Q6ICAgeyBsYWJlbDogJ09iamVjdCcgfSwKICBwb2Q6ICAgICAgeyBsYWJlbDogJ1BvZHMnIH0sCiAgcmVzb3VyY2U6IHsgbGFiZWw6ICdSZXNvdXJjZScgfSwKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBCYW5uZXIsCiAgICBFeHRlcm5hbE1ldHJpYywKICAgIFJlc291cmNlTWV0cmljLAogICAgUG9kTWV0cmljLAogICAgT2JqZWN0TWV0cmljLAogICAgTGFiZWxlZFNlbGVjdCwKICB9LAoKICBwcm9wczogewogICAgcmVmZXJlbnQ6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiAoe30pLAogICAgfSwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gKHt9KSwKICAgIH0sCgogICAgbW9kZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjcmVhdGUnLAogICAgfSwKCiAgICBtZXRyaWNzQXZhaWxhYmxlOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBtZXRyaWNPcHRpb25zOiB2YWx1ZXMoTUVUUklDX1RZUEVTKSwKICAgICAgbWV0cmljVHlwZXM6ICAgTUVUUklDX1RZUEVTLAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgaXNQb2RNZXRyaWMoKSB7CiAgICAgIHJldHVybiB0aGlzLmNoZWNrU3BlY1R5cGUoJ3BvZCcsICdwb2RzJyk7CiAgICB9LAogICAgaXNSZXNvdXJjZU1ldHJpYygpIHsKICAgICAgcmV0dXJuIHRoaXMuY2hlY2tTcGVjVHlwZSgncmVzb3VyY2UnKTsKICAgIH0sCiAgICBpc09iamVjdE1ldHJpYygpIHsKICAgICAgcmV0dXJuIHRoaXMuY2hlY2tTcGVjVHlwZSgnb2JqZWN0Jyk7CiAgICB9LAogICAgaXNFeHRlcm5hbE1ldHJpYygpIHsKICAgICAgcmV0dXJuIHRoaXMuY2hlY2tTcGVjVHlwZSgnZXh0ZXJuYWwnKTsKICAgIH0sCiAgICBzaG93UmVmZXJlbnRXYXJuaW5nKCkgewogICAgICBjb25zdCB7IHJlZmVyZW50IH0gPSB0aGlzOwoKICAgICAgaWYgKCFpc0VtcHR5KHJlZmVyZW50KSkgewogICAgICAgIGNvbnN0IGNvbnRhaW5lclJlcXVlc3RzID0gcmVmZXJlbnQuc3BlYz8uY29udGFpbmVycz8uWzBdPy5yZXNvdXJjZXM/LnJlcXVlc3RzOwoKICAgICAgICBpZiAoY29udGFpbmVyUmVxdWVzdHMgJiYgIWNvbnRhaW5lclJlcXVlc3RzW3RoaXMudmFsdWUubmFtZV0pIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sCgogIHdhdGNoOiB7CiAgICAndmFsdWUudHlwZScobmV1VHlwZSwgb2xkVHlwZSkgewogICAgICBjb25zdCB7ICRzZXQgfSA9IHRoaXM7CiAgICAgIGxldCByZXNvdXJjZVNwZWMsIHBvZFNwZWMsIG9iamVjdFNwZWMsIGV4dGVybmFsU3BlYzsKCiAgICAgIHN3aXRjaCAobmV1VHlwZSkgewogICAgICBjYXNlICdFeHRlcm5hbCc6CiAgICAgICAgZXh0ZXJuYWxTcGVjID0gdGhpcy5pbml0RXh0ZXJuYWxTcGVjKCk7CgogICAgICAgICRzZXQodGhpcy52YWx1ZSwgJ2V4dGVybmFsJywgZXh0ZXJuYWxTcGVjKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnT2JqZWN0JzoKICAgICAgICBvYmplY3RTcGVjID0gdGhpcy5pbml0T2JqZWN0U3BlYygpOwoKICAgICAgICAkc2V0KHRoaXMudmFsdWUsICdvYmplY3QnLCBvYmplY3RTcGVjKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnUG9kcyc6CiAgICAgICAgcG9kU3BlYyA9IHRoaXMuaW5pdFBvZHNTcGVjKCk7CgogICAgICAgICRzZXQodGhpcy52YWx1ZSwgJ3BvZHMnLCBwb2RTcGVjKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnUmVzb3VyY2UnOgogICAgICAgIHJlc291cmNlU3BlYyA9IHRoaXMuaW5pdFJlc291cmNlU3BlYygpOwoKICAgICAgICAkc2V0KHRoaXMudmFsdWUsICdyZXNvdXJjZScsIHJlc291cmNlU3BlYy5yZXNvdXJjZSk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIGlmIChvbGRUeXBlID09PSAnUG9kcycpIHsKICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5wb2RzOwogICAgICB9IGVsc2UgewogICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlW29sZFR5cGUudG9Mb3dlckNhc2UoKV07CiAgICAgIH0KICAgIH0sCiAgfSwKCiAgbWV0aG9kczogewogICAgY2hlY2tTcGVjVHlwZSh0eXBlVG9DaGVjaywgc3BlY0tleSkgewogICAgICByZXR1cm4gKAogICAgICAgIHRoaXMudmFsdWU/LnR5cGUgPT09IHRoaXMubWV0cmljVHlwZXM/Llt0eXBlVG9DaGVja10/LmxhYmVsICYmCiAgICAgICAgIWlzRW1wdHkodGhpcy52YWx1ZT8uW3NwZWNLZXkgPz8gdHlwZVRvQ2hlY2tdKQogICAgICApOwogICAgfSwKICAgIGluaXRFeHRlcm5hbFNwZWMoKSB7CiAgICAgIHJldHVybiB7IC4uLkRFRkFVTFRfRVhURVJOQUxfTUVUUklDIH07CiAgICB9LAogICAgaW5pdE9iamVjdFNwZWMoKSB7CiAgICAgIHJldHVybiB7IC4uLkRFRkFVTFRfT0JKRUNUX01FVFJJQyB9OwogICAgfSwKICAgIGluaXRSZXNvdXJjZVNwZWMoKSB7CiAgICAgIHJldHVybiB7IC4uLkRFRkFVTFRfUkVTT1VSQ0VfTUVUUklDIH07CiAgICB9LAogICAgaW5pdFBvZHNTcGVjKCkgewogICAgICByZXR1cm4geyAuLi5ERUZBVUxUX1BPRF9NRVRSSUMgfTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["metrics-row.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"metrics-row.vue","sourceRoot":"node_modules/@rancher/shell/edit/autoscaling.horizontalpodautoscaler","sourcesContent":["<script>\nimport values from 'lodash/values';\nimport isEmpty from 'lodash/isEmpty';\n\nimport ExternalMetric, { DEFAULT_EXTERNAL_METRIC } from '@shell/edit/autoscaling.horizontalpodautoscaler/external-metric';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport ObjectMetric, { DEFAULT_OBJECT_METRIC } from '@shell/edit/autoscaling.horizontalpodautoscaler/object-metric';\nimport PodMetric, { DEFAULT_POD_METRIC } from '@shell/edit/autoscaling.horizontalpodautoscaler/pod-metric';\nimport ResourceMetric, { DEFAULT_RESOURCE_METRIC } from '@shell/edit/autoscaling.horizontalpodautoscaler/resource-metric';\nimport { Banner } from '@components/Banner';\n\nconst METRIC_TYPES = {\n  external: { label: 'External' },\n  object:   { label: 'Object' },\n  pod:      { label: 'Pods' },\n  resource: { label: 'Resource' },\n};\n\nexport default {\n  components: {\n    Banner,\n    ExternalMetric,\n    ResourceMetric,\n    PodMetric,\n    ObjectMetric,\n    LabeledSelect,\n  },\n\n  props: {\n    referent: {\n      type:    Object,\n      default: () => ({}),\n    },\n    value: {\n      type:    Object,\n      default: () => ({}),\n    },\n\n    mode: {\n      type:    String,\n      default: 'create',\n    },\n\n    metricsAvailable: {\n      type:    Boolean,\n      default: true,\n    },\n  },\n\n  data() {\n    return {\n      metricOptions: values(METRIC_TYPES),\n      metricTypes:   METRIC_TYPES,\n    };\n  },\n\n  computed: {\n    isPodMetric() {\n      return this.checkSpecType('pod', 'pods');\n    },\n    isResourceMetric() {\n      return this.checkSpecType('resource');\n    },\n    isObjectMetric() {\n      return this.checkSpecType('object');\n    },\n    isExternalMetric() {\n      return this.checkSpecType('external');\n    },\n    showReferentWarning() {\n      const { referent } = this;\n\n      if (!isEmpty(referent)) {\n        const containerRequests = referent.spec?.containers?.[0]?.resources?.requests;\n\n        if (containerRequests && !containerRequests[this.value.name]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n  },\n\n  watch: {\n    'value.type'(neuType, oldType) {\n      const { $set } = this;\n      let resourceSpec, podSpec, objectSpec, externalSpec;\n\n      switch (neuType) {\n      case 'External':\n        externalSpec = this.initExternalSpec();\n\n        $set(this.value, 'external', externalSpec);\n        break;\n      case 'Object':\n        objectSpec = this.initObjectSpec();\n\n        $set(this.value, 'object', objectSpec);\n        break;\n      case 'Pods':\n        podSpec = this.initPodsSpec();\n\n        $set(this.value, 'pods', podSpec);\n        break;\n      case 'Resource':\n        resourceSpec = this.initResourceSpec();\n\n        $set(this.value, 'resource', resourceSpec.resource);\n        break;\n      default:\n        break;\n      }\n\n      if (oldType === 'Pods') {\n        delete this.value.pods;\n      } else {\n        delete this.value[oldType.toLowerCase()];\n      }\n    },\n  },\n\n  methods: {\n    checkSpecType(typeToCheck, specKey) {\n      return (\n        this.value?.type === this.metricTypes?.[typeToCheck]?.label &&\n        !isEmpty(this.value?.[specKey ?? typeToCheck])\n      );\n    },\n    initExternalSpec() {\n      return { ...DEFAULT_EXTERNAL_METRIC };\n    },\n    initObjectSpec() {\n      return { ...DEFAULT_OBJECT_METRIC };\n    },\n    initResourceSpec() {\n      return { ...DEFAULT_RESOURCE_METRIC };\n    },\n    initPodsSpec() {\n      return { ...DEFAULT_POD_METRIC };\n    },\n  },\n};\n</script>\n\n<template>\n  <div class=\"metric-row\">\n    <Banner\n      v-if=\"!metricsAvailable\"\n      :label=\"t('hpa.warnings.noMetric')\"\n      color=\"warning\"\n    />\n    <Banner\n      v-if=\"!isResourceMetric\"\n      :label=\"isExternalMetric ? t('hpa.warnings.external') : t('hpa.warnings.custom')\"\n      color=\"warning\"\n    />\n    <Banner\n      v-if=\"showReferentWarning\"\n      :label=\"t('hpa.warnings.resource')\"\n      color=\"warning\"\n    />\n    <div class=\"row mb-20\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"value.type\"\n          :reduce=\"(val) => val.label\"\n          :mode=\"mode\"\n          :label=\"t('hpa.metrics.source')\"\n          :options=\"metricOptions\"\n        />\n      </div>\n    </div>\n    <div v-if=\"isPodMetric\">\n      <PodMetric\n        v-model=\"value.pods\"\n        :mode=\"mode\"\n      />\n    </div>\n    <div v-else-if=\"isExternalMetric\">\n      <ExternalMetric\n        v-model=\"value.external\"\n        :mode=\"mode\"\n      />\n    </div>\n    <div v-else-if=\"isObjectMetric\">\n      <ObjectMetric\n        v-model=\"value.object\"\n        :mode=\"mode\"\n      />\n    </div>\n    <div v-else-if=\"isResourceMetric\">\n      <ResourceMetric\n        v-model=\"value.resource\"\n        :mode=\"mode\"\n      />\n    </div>\n  </div>\n</template>\n"]}]}