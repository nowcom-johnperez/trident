{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/fleet.cattle.io.gitrepo.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/fleet.cattle.io.gitrepo.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgZXhjZXB0aW9uVG9FcnJvcnNBcnJheSB9IGZyb20gJ0BzaGVsbC91dGlscy9lcnJvcic7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsKICBBVVRIX1RZUEUsIEZMRUVULCBOT1JNQU4sIFNFQ1JFVCwgVklSVFVBTF9IQVJWRVNURVJfUFJPVklERVIKfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgc2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCBBcnJheUxpc3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9BcnJheUxpc3QnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgQ3JlYXRlRWRpdFZpZXcgZnJvbSAnQHNoZWxsL21peGlucy9jcmVhdGUtZWRpdC12aWV3JzsKaW1wb3J0IENydVJlc291cmNlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NydVJlc291cmNlJzsKaW1wb3J0IElucHV0V2l0aFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0lucHV0V2l0aFNlbGVjdCc7CmltcG9ydCBqc3lhbWwgZnJvbSAnanMteWFtbCc7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IExhYmVscyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVscyc7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgTmFtZU5zRGVzY3JpcHRpb24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9OYW1lTnNEZXNjcmlwdGlvbic7CmltcG9ydCBZYW1sRWRpdG9yIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1lhbWxFZGl0b3InOwppbXBvcnQgeyBiYXNlNjREZWNvZGUsIGJhc2U2NEVuY29kZSB9IGZyb20gJ0BzaGVsbC91dGlscy9jcnlwdG8nOwppbXBvcnQgU2VsZWN0T3JDcmVhdGVBdXRoU2VjcmV0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vU2VsZWN0T3JDcmVhdGVBdXRoU2VjcmV0JzsKaW1wb3J0IHsgX0NSRUFURSB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgaXNIYXJ2ZXN0ZXJDbHVzdGVyIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2NsdXN0ZXInOwppbXBvcnQgeyBDQVBJLCBDQVRBTE9HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgeyBTRUNSRVRfVFlQRVMgfSBmcm9tICdAc2hlbGwvY29uZmlnL3NlY3JldCc7CmltcG9ydCB7IGNoZWNrU2NoZW1hc0ZvckZpbmRBbGxIYXNoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2F1dGgnOwppbXBvcnQgQ2hlY2tib3ggZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9DaGVja2JveC9DaGVja2JveC52dWUnOwoKY29uc3QgX1ZFUklGWSA9ICd2ZXJpZnknOwpjb25zdCBfU0tJUCA9ICdza2lwJzsKY29uc3QgX1NQRUNJRlkgPSAnc3BlY2lmeSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NydUdpdFJlcG8nLAoKICBjb21wb25lbnRzOiB7CiAgICBDaGVja2JveCwKICAgIEFycmF5TGlzdCwKICAgIEJhbm5lciwKICAgIENydVJlc291cmNlLAogICAgSW5wdXRXaXRoU2VsZWN0LAogICAgTGFiZWxzLAogICAgTGFiZWxlZElucHV0LAogICAgTGFiZWxlZFNlbGVjdCwKICAgIExvYWRpbmcsCiAgICBOYW1lTnNEZXNjcmlwdGlvbiwKICAgIFlhbWxFZGl0b3IsCiAgICBTZWxlY3RPckNyZWF0ZUF1dGhTZWNyZXQsCiAgfSwKCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXddLAoKICBhc3luYyBmZXRjaCgpIHsKICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBjaGVja1NjaGVtYXNGb3JGaW5kQWxsSGFzaCh7CiAgICAgIGFsbENsdXN0ZXJzOiB7CiAgICAgICAgaW5TdG9yZVR5cGU6ICdtYW5hZ2VtZW50JywKICAgICAgICB0eXBlOiAgICAgICAgRkxFRVQuQ0xVU1RFUgogICAgICB9LAoKICAgICAgYWxsQ2x1c3Rlckdyb3VwczogewogICAgICAgIGluU3RvcmVUeXBlOiAnbWFuYWdlbWVudCcsCiAgICAgICAgdHlwZTogICAgICAgIEZMRUVULkNMVVNURVJfR1JPVVAKICAgICAgfQogICAgfSwgdGhpcy4kc3RvcmUpOwoKICAgIHRoaXMuYWxsQ2x1c3RlcnMgPSBoYXNoLmFsbENsdXN0ZXJzIHx8IFtdOwogICAgdGhpcy5hbGxDbHVzdGVyR3JvdXBzID0gaGFzaC5hbGxDbHVzdGVyR3JvdXBzIHx8IFtdOwoKICAgIGxldCB0bHMgPSBfVkVSSUZZOwoKICAgIGlmICggdGhpcy52YWx1ZS5zcGVjLmluc2VjdXJlU2tpcFRMU1ZlcmlmeSApIHsKICAgICAgdGxzID0gX1NLSVA7CiAgICB9IGVsc2UgaWYgKCB0aGlzLnZhbHVlLnNwZWMuY2FCdW5kbGUgKSB7CiAgICAgIHRyeSB7CiAgICAgICAgdGhpcy5jYUJ1bmRsZSA9IGJhc2U2NERlY29kZSh0aGlzLnZhbHVlLnNwZWMuY2FCdW5kbGUpOwogICAgICAgIHRscyA9IF9TUEVDSUZZOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgLy8gSG1tLi4uCiAgICAgIH0KICAgIH0KCiAgICB0aGlzLnRsc01vZGUgPSB0bHM7CgogICAgaWYgKHRoaXMudmFsdWUuc3BlYy5jb3JyZWN0RHJpZnQgPT09IHVuZGVmaW5lZCkgewogICAgICBWdWUuc2V0KHRoaXMudmFsdWUuc3BlYywgJ2NvcnJlY3REcmlmdCcsIHsgZW5hYmxlZDogZmFsc2UgfSk7CiAgICB9CgogICAgdGhpcy51cGRhdGVUYXJnZXRzKCk7CiAgfSwKCiAgZGF0YSgpIHsKICAgIGNvbnN0IHRhcmdldEluZm8gPSB0aGlzLnZhbHVlLnRhcmdldEluZm87CiAgICBjb25zdCB0YXJnZXRDbHVzdGVyID0gdGFyZ2V0SW5mby5jbHVzdGVyOwogICAgY29uc3QgdGFyZ2V0Q2x1c3Rlckdyb3VwID0gdGFyZ2V0SW5mby5jbHVzdGVyR3JvdXA7CiAgICBjb25zdCB0YXJnZXRBZHZhbmNlZCA9IHRhcmdldEluZm8uYWR2YW5jZWQ7CgogICAgY29uc3QgcmVmID0gKCB0aGlzLnZhbHVlLnNwZWM/LnJldmlzaW9uID8gJ3JldmlzaW9uJyA6ICdicmFuY2gnICk7CiAgICBjb25zdCByZWZWYWx1ZSA9IHRoaXMudmFsdWUuc3BlYz8uW3JlZl0gfHwgJyc7CgogICAgbGV0IHRhcmdldE1vZGUgPSB0YXJnZXRJbmZvLm1vZGU7CgogICAgaWYgKCB0aGlzLnJlYWxNb2RlID09PSBfQ1JFQVRFICkgewogICAgICB0YXJnZXRNb2RlID0gJ2FsbCc7CiAgICB9IGVsc2UgaWYgKCB0YXJnZXRNb2RlID09PSAnY2x1c3RlcicgKSB7CiAgICAgIHRhcmdldE1vZGUgPSBgY2x1c3RlcjovLyR7IHRhcmdldENsdXN0ZXIgfWA7CiAgICB9IGVsc2UgaWYgKCB0YXJnZXRNb2RlID09PSAnY2x1c3Rlckdyb3VwJyApIHsKICAgICAgdGFyZ2V0TW9kZSA9IGBncm91cDovLyR7IHRhcmdldENsdXN0ZXJHcm91cCB9YDsKICAgIH0KCiAgICBjb25zdCBzdGVwUmVwb0luZm8gPSB7CiAgICAgIG5hbWU6ICAgICAgICAgICAnc3RlcFJlcG9JbmZvJywKICAgICAgdGl0bGU6ICAgICAgICAgIHRoaXMudCgnZmxlZXQuZ2l0UmVwby5hZGQuc3RlcHMucmVwb0luZm8udGl0bGUnKSwKICAgICAgbGFiZWw6ICAgICAgICAgIHRoaXMudCgnZmxlZXQuZ2l0UmVwby5hZGQuc3RlcHMucmVwb0luZm8ubGFiZWwnKSwKICAgICAgc3VidGV4dDogICAgICAgIHRoaXMudCgnZmxlZXQuZ2l0UmVwby5hZGQuc3RlcHMucmVwb0luZm8uc3VidGV4dCcpLAogICAgICBkZXNjcmlwdGlvbktleTogJ2ZsZWV0LmdpdFJlcG8uYWRkLnN0ZXBzLnJlcG9JbmZvLmRlc2NyaXB0aW9uJywKICAgICAgcmVhZHk6ICAgICAgICAgIGZhbHNlLAogICAgICB3ZWlnaHQ6ICAgICAgICAgMzAKICAgIH07CgogICAgY29uc3Qgc3RlcFRhcmdldEluZm8gPSB7CiAgICAgIG5hbWU6ICAgICAgICAgICAnc3RlcFRhcmdldEluZm8nLAogICAgICB0aXRsZTogICAgICAgICAgdGhpcy50KCdmbGVldC5naXRSZXBvLmFkZC5zdGVwcy50YXJnZXRJbmZvLnRpdGxlJyksCiAgICAgIGxhYmVsOiAgICAgICAgICB0aGlzLnQoJ2ZsZWV0LmdpdFJlcG8uYWRkLnN0ZXBzLnRhcmdldEluZm8ubGFiZWwnKSwKICAgICAgc3VidGV4dDogICAgICAgIHRoaXMudCgnZmxlZXQuZ2l0UmVwby5hZGQuc3RlcHMudGFyZ2V0SW5mby5zdWJ0ZXh0JyksCiAgICAgIGRlc2NyaXB0aW9uS2V5OiAnZmxlZXQuZ2l0UmVwby5zdGVwcy5hZGQudGFyZ2V0SW5mby5kZXNjcmlwdGlvbicsCiAgICAgIHJlYWR5OiAgICAgICAgICB0cnVlLAogICAgICB3ZWlnaHQ6ICAgICAgICAgMzAKICAgIH07CgogICAgY29uc3QgYWRkUmVwb3NpdG9yeVN0ZXBzID0gW3N0ZXBSZXBvSW5mbywgc3RlcFRhcmdldEluZm9dLnNvcnQoKGEsIGIpID0+IChiLndlaWdodCB8fCAwKSAtIChhLndlaWdodCB8fCAwKSk7CgogICAgcmV0dXJuIHsKICAgICAgYWxsQ2x1c3RlcnM6ICAgICAgICAgICAgIFtdLAogICAgICBhbGxDbHVzdGVyR3JvdXBzOiAgICAgICAgW10sCiAgICAgIGFsbFdvcmtzcGFjZXM6ICAgICAgICAgICBbXSwKICAgICAgdGVtcENhY2hlZFZhbHVlczogICAgICAgIHt9LAogICAgICB1c2VybmFtZTogICAgICAgICAgICAgICAgbnVsbCwKICAgICAgcGFzc3dvcmQ6ICAgICAgICAgICAgICAgIG51bGwsCiAgICAgIHB1YmxpY0tleTogICAgICAgICAgICAgICBudWxsLAogICAgICBwcml2YXRlS2V5OiAgICAgICAgICAgICAgbnVsbCwKICAgICAgdGxzTW9kZTogICAgICAgICAgICAgICAgIG51bGwsCiAgICAgIGNhQnVuZGxlOiAgICAgICAgICAgICAgICBudWxsLAogICAgICB0YXJnZXRBZHZhbmNlZEVycm9yczogICAgbnVsbCwKICAgICAgbWF0Y2hpbmdDbHVzdGVyczogICAgICAgIG51bGwsCiAgICAgIHJlZiwKICAgICAgcmVmVmFsdWUsCiAgICAgIHRhcmdldE1vZGUsCiAgICAgIHRhcmdldENsdXN0ZXIsCiAgICAgIHRhcmdldENsdXN0ZXJHcm91cCwKICAgICAgdGFyZ2V0QWR2YW5jZWQsCiAgICAgIHN0ZXBSZXBvSW5mbywKICAgICAgc3RlcFRhcmdldEluZm8sCiAgICAgIGFkZFJlcG9zaXRvcnlTdGVwcywKICAgICAgZGlzcGxheUhlbG1SZXBvVVJMUmVnZXg6IGZhbHNlCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnd29ya3NwYWNlJ10pLAoKICAgIF9TUEVDSUZZKCkgewogICAgICByZXR1cm4gX1NQRUNJRlk7CiAgICB9LAoKICAgIGlzTG9jYWwoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWVzcGFjZSA9PT0gJ2ZsZWV0LWxvY2FsJzsKICAgIH0sCgogICAgaXNUbHMoKSB7CiAgICAgIHJldHVybiAhKHRoaXMudmFsdWU/LnNwZWM/LnJlcG8gfHwgJycpLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKTsKICAgIH0sCgogICAgdGFyZ2V0T3B0aW9ucygpIHsKICAgICAgY29uc3Qgb3V0ID0gWwogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiAnTm8gQ2x1c3RlcnMnLAogICAgICAgICAgdmFsdWU6ICdub25lJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbGFiZWw6ICdBbGwgQ2x1c3RlcnMgaW4gdGhlIFdvcmtzcGFjZScsCiAgICAgICAgICB2YWx1ZTogJ2FsbCcsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBsYWJlbDogJ0FkdmFuY2VkJywKICAgICAgICAgIHZhbHVlOiAnYWR2YW5jZWQnCiAgICAgICAgfSwKICAgICAgXTsKCiAgICAgIGNvbnN0IGNsdXN0ZXJzID0gdGhpcy5hbGxDbHVzdGVycwogICAgICAgIC5maWx0ZXIoKHgpID0+IHsKICAgICAgICAgIHJldHVybiB4Lm1ldGFkYXRhLm5hbWVzcGFjZSA9PT0gdGhpcy52YWx1ZS5tZXRhZGF0YS5uYW1lc3BhY2U7CiAgICAgICAgfSkKICAgICAgICAuZmlsdGVyKCh4KSA9PiAhaXNIYXJ2ZXN0ZXJDbHVzdGVyKHgpKQogICAgICAgIC5tYXAoKHgpID0+IHsKICAgICAgICAgIHJldHVybiB7IGxhYmVsOiB4Lm5hbWVEaXNwbGF5LCB2YWx1ZTogYGNsdXN0ZXI6Ly8keyB4Lm1ldGFkYXRhLm5hbWUgfWAgfTsKICAgICAgICB9KTsKCiAgICAgIGlmICggY2x1c3RlcnMubGVuZ3RoICkgewogICAgICAgIG91dC5wdXNoKHsga2luZDogJ2RpdmlkZXInLCBkaXNhYmxlZDogdHJ1ZSB9KTsKICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICBraW5kOiAgICAgJ3RpdGxlJywKICAgICAgICAgIGxhYmVsOiAgICAnQ2x1c3RlcnMnLAogICAgICAgICAgZGlzYWJsZWQ6IHRydWUsCiAgICAgICAgfSk7CgogICAgICAgIG91dC5wdXNoKC4uLmNsdXN0ZXJzKTsKICAgICAgfQoKICAgICAgY29uc3QgZ3JvdXBzID0gdGhpcy5hbGxDbHVzdGVyR3JvdXBzCiAgICAgICAgLmZpbHRlcigoeCkgPT4geC5tZXRhZGF0YS5uYW1lc3BhY2UgPT09IHRoaXMudmFsdWUubWV0YWRhdGEubmFtZXNwYWNlKQogICAgICAgIC5tYXAoKHgpID0+IHsKICAgICAgICAgIHJldHVybiB7IGxhYmVsOiB4Lm5hbWVEaXNwbGF5LCB2YWx1ZTogYGdyb3VwOi8vJHsgeC5tZXRhZGF0YS5uYW1lIH1gIH07CiAgICAgICAgfSk7CgogICAgICBpZiAoIGdyb3Vwcy5sZW5ndGggKSB7CiAgICAgICAgb3V0LnB1c2goeyBraW5kOiAnZGl2aWRlcicsIGRpc2FibGVkOiB0cnVlIH0pOwogICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgIGtpbmQ6ICAgICAndGl0bGUnLAogICAgICAgICAgbGFiZWw6ICAgICdDbHVzdGVyIEdyb3VwcycsCiAgICAgICAgICBkaXNhYmxlZDogdHJ1ZQogICAgICAgIH0pOwoKICAgICAgICBvdXQucHVzaCguLi5ncm91cHMpOwogICAgICB9CgogICAgICByZXR1cm4gb3V0OwogICAgfSwKCiAgICBjbHVzdGVyTmFtZXMoKSB7CiAgICAgIGNvbnN0IG91dCA9IHRoaXMuYWxsQ2x1c3RlcnMKICAgICAgICAuZmlsdGVyKCh4KSA9PiB4Lm1ldGFkYXRhLm5hbWVzcGFjZSA9PT0gdGhpcy52YWx1ZS5tZXRhZGF0YS5uYW1lc3BhY2UpCiAgICAgICAgLm1hcCgoeCkgPT4geC5tZXRhZGF0YS5uYW1lKTsKCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAoKICAgIGNsdXN0ZXJHcm91cE5hbWVzKCkgewogICAgICBjb25zdCBvdXQgPSB0aGlzLmFsbENsdXN0ZXJHcm91cHMKICAgICAgICAuZmlsdGVyKCh4KSA9PiB4Lm1ldGFkYXRhLm5hbWVzcGFjZSA9PT0gdGhpcy52YWx1ZS5tZXRhZGF0YS5uYW1lc3BhY2UpCiAgICAgICAgLm1hcCgoeCkgPT4geC5tZXRhZGF0YS5uYW1lKTsKCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAoKICAgIHRsc09wdGlvbnMoKSB7CiAgICAgIHJldHVybiBbCiAgICAgICAgeyBsYWJlbDogdGhpcy50KCdmbGVldC5naXRSZXBvLnRscy52ZXJpZnknKSwgdmFsdWU6IF9WRVJJRlkgfSwKICAgICAgICB7IGxhYmVsOiB0aGlzLnQoJ2ZsZWV0LmdpdFJlcG8udGxzLnNwZWNpZnknKSwgdmFsdWU6IF9TUEVDSUZZIH0sCiAgICAgICAgeyBsYWJlbDogdGhpcy50KCdmbGVldC5naXRSZXBvLnRscy5za2lwJyksIHZhbHVlOiBfU0tJUCB9LAogICAgICBdOwogICAgfSwKCiAgICBzdGVwT25lUmVxdWlyZXMoKSB7CiAgICAgIHJldHVybiAhIXRoaXMudmFsdWUubWV0YWRhdGEubmFtZSAmJiAhIXRoaXMucmVmVmFsdWU7CiAgICB9LAogIH0sCgogIHdhdGNoOiB7CiAgICAndmFsdWUubWV0YWRhdGEubmFtZXNwYWNlJzogJ3VwZGF0ZVRhcmdldHMnLAogICAgdGFyZ2V0TW9kZTogICAgICAgICAgICAgICAgICd1cGRhdGVUYXJnZXRzJywKICAgIHRhcmdldENsdXN0ZXI6ICAgICAgICAgICAgICAndXBkYXRlVGFyZ2V0cycsCiAgICB0YXJnZXRDbHVzdGVyR3JvdXA6ICAgICAgICAgJ3VwZGF0ZVRhcmdldHMnLAogICAgdGFyZ2V0QWR2YW5jZWQ6ICAgICAgICAgICAgICd1cGRhdGVUYXJnZXRzJywKICAgIHRsc01vZGU6ICAgICAgICAgICAgICAgICAgICAndXBkYXRlVGxzJywKICAgIGNhQnVuZGxlOiAgICAgICAgICAgICAgICAgICAndXBkYXRlVGxzJywKCiAgICB3b3Jrc3BhY2UobmV1KSB7CiAgICAgIGlmICggdGhpcy5pc0NyZWF0ZSApIHsKICAgICAgICBzZXQodGhpcy52YWx1ZSwgJ21ldGFkYXRhLm5hbWVzcGFjZScsIG5ldSk7CiAgICAgIH0KICAgIH0sCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMucmVnaXN0ZXJCZWZvcmVIb29rKHRoaXMuY2xlYW5UTFMsICdjbGVhblRMUycpOwogICAgdGhpcy5yZWdpc3RlckJlZm9yZUhvb2sodGhpcy5kb0NyZWF0ZVNlY3JldHMsIGByZWdpc3RlckF1dGhTZWNyZXRzJHsgbmV3IERhdGUoKS5nZXRUaW1lKCkgfWAsIDk5KTsKICB9LAoKICBtZXRob2RzOiB7CiAgICBzZXQsCgogICAgY2xlYW5UTFMoKSB7CiAgICAgIGlmICghdGhpcy5pc1RscykgewogICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLnNwZWMuaW5zZWN1cmVTa2lwVExTVmVyaWZ5OwogICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLnNwZWMuY2FCdW5kbGU7CiAgICAgIH0KICAgIH0sCgogICAgdXBkYXRlQ2FjaGVkQXV0aFZhbCh2YWwsIGtleSkgewogICAgICB0aGlzLnRlbXBDYWNoZWRWYWx1ZXNba2V5XSA9IHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnID8geyBzZWxlY3RlZDogdmFsIH0gOiB7IC4uLnZhbCB9OwoKICAgICAgaWYgKGtleSA9PT0gJ2hlbG1TZWNyZXROYW1lJykgewogICAgICAgIHRoaXMudG9nZ2xlSGVsbVJlcG9VUkxSZWdleCh2YWwgJiYgdmFsLnNlbGVjdGVkICE9PSBBVVRIX1RZUEUuX05PTkUpOwogICAgICB9CiAgICB9LAoKICAgIHVwZGF0ZUF1dGgodmFsLCBrZXkpIHsKICAgICAgY29uc3Qgc3BlYyA9IHRoaXMudmFsdWUuc3BlYzsKCiAgICAgIGlmICggdmFsICkgewogICAgICAgIHNwZWNba2V5XSA9IHZhbDsKICAgICAgfSBlbHNlIHsKICAgICAgICBkZWxldGUgc3BlY1trZXldOwogICAgICB9CgogICAgICB0aGlzLnVwZGF0ZUNhY2hlZEF1dGhWYWwodmFsLCBrZXkpOwogICAgfSwKCiAgICB0b2dnbGVIZWxtUmVwb1VSTFJlZ2V4KGFjdGl2ZSkgewogICAgICB0aGlzLmRpc3BsYXlIZWxtUmVwb1VSTFJlZ2V4ID0gYWN0aXZlOwoKICAgICAgaWYgKCFhY3RpdmUpIHsKICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5zcGVjPy5oZWxtUmVwb1VSTFJlZ2V4OwogICAgICB9CiAgICB9LAoKICAgIHVwZGF0ZVRhcmdldHMoKSB7CiAgICAgIGNvbnN0IHNwZWMgPSB0aGlzLnZhbHVlLnNwZWM7CiAgICAgIGNvbnN0IG1vZGUgPSB0aGlzLnRhcmdldE1vZGU7CgogICAgICBsZXQga2luZCwgdmFsdWU7CiAgICAgIGNvbnN0IG1hdGNoID0gbW9kZS5tYXRjaCgvKFteOl0rKSg6XC9cLyguKikpPyQvKTsKCiAgICAgIGlmICggbWF0Y2ggKSB7CiAgICAgICAga2luZCA9IG1hdGNoWzFdOwogICAgICAgIHZhbHVlID0gbWF0Y2hbM107CiAgICAgIH0KCiAgICAgIGlmICgga2luZCA9PT0gJ2FsbCcgKSB7CiAgICAgICAgc3BlYy50YXJnZXRzID0gW3sKICAgICAgICAgIGNsdXN0ZXJTZWxlY3RvcjogewogICAgICAgICAgICBtYXRjaEV4cHJlc3Npb25zOiBbewogICAgICAgICAgICAgIGtleTogICAgICBDQVBJLlBST1ZJREVSLAogICAgICAgICAgICAgIG9wZXJhdG9yOiAnTm90SW4nLAogICAgICAgICAgICAgIHZhbHVlczogICBbCiAgICAgICAgICAgICAgICBWSVJUVUFMX0hBUlZFU1RFUl9QUk9WSURFUgogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH1dLAogICAgICAgICAgfSwKICAgICAgICB9XTsKICAgICAgfSBlbHNlIGlmICgga2luZCA9PT0gJ25vbmUnICkgewogICAgICAgIHNwZWMudGFyZ2V0cyA9IFtdOwogICAgICB9IGVsc2UgaWYgKCBraW5kID09PSAnY2x1c3RlcicgKSB7CiAgICAgICAgc3BlYy50YXJnZXRzID0gWwogICAgICAgICAgeyBjbHVzdGVyTmFtZTogdmFsdWUgfSwKICAgICAgICBdOwogICAgICB9IGVsc2UgaWYgKCBraW5kID09PSAnZ3JvdXAnICkgewogICAgICAgIHNwZWMudGFyZ2V0cyA9IFsKICAgICAgICAgIHsgY2x1c3Rlckdyb3VwOiB2YWx1ZSB9CiAgICAgICAgXTsKICAgICAgfSBlbHNlIGlmICgga2luZCA9PT0gJ2FkdmFuY2VkJyApIHsKICAgICAgICB0cnkgewogICAgICAgICAgY29uc3QgcGFyc2VkID0ganN5YW1sLmxvYWQodGhpcy50YXJnZXRBZHZhbmNlZCk7CgogICAgICAgICAgc3BlYy50YXJnZXRzID0gcGFyc2VkOwogICAgICAgICAgdGhpcy50YXJnZXRBZHZhbmNlZEVycm9ycyA9IG51bGw7CiAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgdGhpcy50YXJnZXRBZHZhbmNlZEVycm9ycyA9IGV4Y2VwdGlvblRvRXJyb3JzQXJyYXkoZSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHNwZWMudGFyZ2V0cyA9IFtdOwogICAgICB9CgogICAgICB0aGlzLnN0ZXBPbmVSZWFkeSgpOwogICAgfSwKCiAgICBjaGFuZ2VSZWYoeyB0ZXh0LCBzZWxlY3RlZCB9KSB7CiAgICAgIHRoaXMucmVmID0gc2VsZWN0ZWQ7CiAgICAgIHRoaXMucmVmVmFsdWUgPSB0ZXh0OwogICAgICBjb25zdCBzcGVjID0gdGhpcy52YWx1ZS5zcGVjOwoKICAgICAgaWYgKCBzZWxlY3RlZCA9PT0gJ2JyYW5jaCcgKSB7CiAgICAgICAgc3BlYy5icmFuY2ggPSB0ZXh0OwogICAgICAgIGRlbGV0ZSBzcGVjLnJldmlzaW9uOwogICAgICB9IGVsc2UgewogICAgICAgIGRlbGV0ZSBzcGVjLmJyYW5jaDsKICAgICAgICBzcGVjLnJldmlzaW9uID0gdGV4dDsKICAgICAgfQoKICAgICAgdGhpcy5zdGVwT25lUmVhZHkoKTsKICAgIH0sCgogICAgYXN5bmMgZG9DcmVhdGVTZWNyZXRzKCkgewogICAgICBpZiAodGhpcy50ZW1wQ2FjaGVkVmFsdWVzLmNsaWVudFNlY3JldE5hbWUpIHsKICAgICAgICBhd2FpdCB0aGlzLmRvQ3JlYXRlKCdjbGllbnRTZWNyZXROYW1lJywgdGhpcy50ZW1wQ2FjaGVkVmFsdWVzLmNsaWVudFNlY3JldE5hbWUpOwogICAgICB9CgogICAgICBpZiAodGhpcy50ZW1wQ2FjaGVkVmFsdWVzLmhlbG1TZWNyZXROYW1lKSB7CiAgICAgICAgYXdhaXQgdGhpcy5kb0NyZWF0ZSgnaGVsbVNlY3JldE5hbWUnLCB0aGlzLnRlbXBDYWNoZWRWYWx1ZXMuaGVsbVNlY3JldE5hbWUpOwogICAgICB9CiAgICB9LAoKICAgIGFzeW5jIGRvQ3JlYXRlKG5hbWUsIGNyZWRlbnRpYWxzKSB7CiAgICAgIGNvbnN0IHsgc2VsZWN0ZWQsIHB1YmxpY0tleSwgcHJpdmF0ZUtleSB9ID0gY3JlZGVudGlhbHM7CgogICAgICBpZiAoICFbQVVUSF9UWVBFLl9TU0gsIEFVVEhfVFlQRS5fQkFTSUMsIEFVVEhfVFlQRS5fUzNdLmluY2x1ZGVzKHNlbGVjdGVkKSApIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIGxldCBzZWNyZXQ7CgogICAgICBpZiAoIHNlbGVjdGVkID09PSBBVVRIX1RZUEUuX1MzICkgewogICAgICAgIHNlY3JldCA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKGByYW5jaGVyL2NyZWF0ZWAsIHsKICAgICAgICAgIHR5cGU6ICAgICAgICAgICAgICAgTk9STUFOLkNMT1VEX0NSRURFTlRJQUwsCiAgICAgICAgICBzM2NyZWRlbnRpYWxDb25maWc6IHsKICAgICAgICAgICAgYWNjZXNzS2V5OiBwdWJsaWNLZXksCiAgICAgICAgICAgIHNlY3JldEtleTogcHJpdmF0ZUtleSwKICAgICAgICAgIH0sCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc2VjcmV0ID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goYCR7IENBVEFMT0cuX01BTkFHRU1FTlQgfS9jcmVhdGVgLCB7CiAgICAgICAgICB0eXBlOiAgICAgU0VDUkVULAogICAgICAgICAgbWV0YWRhdGE6IHsKICAgICAgICAgICAgbmFtZXNwYWNlOiAgICB0aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWVzcGFjZSwKICAgICAgICAgICAgZ2VuZXJhdGVOYW1lOiAnYXV0aC0nCiAgICAgICAgICB9LAogICAgICAgIH0pOwoKICAgICAgICBsZXQgdHlwZSwgcHVibGljRmllbGQsIHByaXZhdGVGaWVsZDsKCiAgICAgICAgc3dpdGNoICggc2VsZWN0ZWQgKSB7CiAgICAgICAgY2FzZSBBVVRIX1RZUEUuX1NTSDoKICAgICAgICAgIHR5cGUgPSBTRUNSRVRfVFlQRVMuU1NIOwogICAgICAgICAgcHVibGljRmllbGQgPSAnc3NoLXB1YmxpY2tleSc7CiAgICAgICAgICBwcml2YXRlRmllbGQgPSAnc3NoLXByaXZhdGVrZXknOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBBVVRIX1RZUEUuX0JBU0lDOgogICAgICAgICAgdHlwZSA9IFNFQ1JFVF9UWVBFUy5CQVNJQzsKICAgICAgICAgIHB1YmxpY0ZpZWxkID0gJ3VzZXJuYW1lJzsKICAgICAgICAgIHByaXZhdGVGaWVsZCA9ICdwYXNzd29yZCc7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVbmtub3duIHR5cGUnKTsKICAgICAgICB9CgogICAgICAgIHNlY3JldC5fdHlwZSA9IHR5cGU7CiAgICAgICAgc2VjcmV0LmRhdGEgPSB7CiAgICAgICAgICBbcHVibGljRmllbGRdOiAgYmFzZTY0RW5jb2RlKHB1YmxpY0tleSksCiAgICAgICAgICBbcHJpdmF0ZUZpZWxkXTogYmFzZTY0RW5jb2RlKHByaXZhdGVLZXkpLAogICAgICAgIH07CiAgICAgIH0KCiAgICAgIGF3YWl0IHNlY3JldC5zYXZlKCk7CgogICAgICBhd2FpdCB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgICAgdGhpcy51cGRhdGVBdXRoKHNlY3JldC5tZXRhZGF0YS5uYW1lLCBuYW1lKTsKICAgICAgfSk7CgogICAgICByZXR1cm4gc2VjcmV0OwogICAgfSwKCiAgICB1cGRhdGVUbHNNb2RlKGV2ZW50KSB7CiAgICAgIHRoaXMudGxzTW9kZSA9IGV2ZW50OwogICAgfSwKCiAgICBvblVwZGF0ZVJlcG9OYW1lKCkgewogICAgICB0aGlzLnN0ZXBPbmVSZWFkeSgpOwogICAgfSwKCiAgICBzdGVwT25lUmVhZHkoKSB7CiAgICAgIHRoaXMuJHNldCh0aGlzLmFkZFJlcG9zaXRvcnlTdGVwc1swXSwgJ3JlYWR5JywgdGhpcy5zdGVwT25lUmVxdWlyZXMpOwogICAgfSwKCiAgICB1cGRhdGVUbHMoKSB7CiAgICAgIGNvbnN0IHNwZWMgPSB0aGlzLnZhbHVlLnNwZWM7CgogICAgICBpZiAoIHRoaXMudGxzTW9kZSA9PT0gX1NQRUNJRlkgKSB7CiAgICAgICAgc3BlYy5pbnNlY3VyZVNraXBUTFNWZXJpZnkgPSBmYWxzZTsKICAgICAgICBjb25zdCBjYUJ1bmRsZSA9ICh0aGlzLmNhQnVuZGxlIHx8ICcnKS50cmltKCk7CgogICAgICAgIGlmICggY2FCdW5kbGUgKSB7CiAgICAgICAgICBzcGVjLmNhQnVuZGxlID0gYmFzZTY0RW5jb2RlKGAkeyBjYUJ1bmRsZSB9XG5gKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgZGVsZXRlIHNwZWMuY2FCdW5kbGU7CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIGlmICggdGhpcy50bHNNb2RlID09PSBfU0tJUCApIHsKICAgICAgICAgIHNwZWMuaW5zZWN1cmVTa2lwVExTVmVyaWZ5ID0gdHJ1ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgc3BlYy5pbnNlY3VyZVNraXBUTFNWZXJpZnkgPSBmYWxzZTsKICAgICAgICB9CgogICAgICAgIGlmICggdGhpcy5saXZlVmFsdWUuY2FCdW5kbGUgKSB7CiAgICAgICAgICBzcGVjLmNhQnVuZGxlID0gdGhpcy5saXZlVmFsdWUuY2FCdW5kbGU7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGRlbGV0ZSBzcGVjLmNhQnVuZGxlOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["fleet.cattle.io.gitrepo.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"fleet.cattle.io.gitrepo.vue","sourceRoot":"node_modules/@rancher/shell/edit","sourcesContent":["<script>\nimport Vue from 'vue';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\nimport { mapGetters } from 'vuex';\nimport {\n  AUTH_TYPE, FLEET, NORMAN, SECRET, VIRTUAL_HARVESTER_PROVIDER\n} from '@shell/config/types';\nimport { set } from '@shell/utils/object';\nimport ArrayList from '@shell/components/form/ArrayList';\nimport { Banner } from '@components/Banner';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport CruResource from '@shell/components/CruResource';\nimport InputWithSelect from '@shell/components/form/InputWithSelect';\nimport jsyaml from 'js-yaml';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport Labels from '@shell/components/form/Labels';\nimport Loading from '@shell/components/Loading';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport YamlEditor from '@shell/components/YamlEditor';\nimport { base64Decode, base64Encode } from '@shell/utils/crypto';\nimport SelectOrCreateAuthSecret from '@shell/components/form/SelectOrCreateAuthSecret';\nimport { _CREATE } from '@shell/config/query-params';\nimport { isHarvesterCluster } from '@shell/utils/cluster';\nimport { CAPI, CATALOG } from '@shell/config/labels-annotations';\nimport { SECRET_TYPES } from '@shell/config/secret';\nimport { checkSchemasForFindAllHash } from '@shell/utils/auth';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\n\nconst _VERIFY = 'verify';\nconst _SKIP = 'skip';\nconst _SPECIFY = 'specify';\n\nexport default {\n  name: 'CruGitRepo',\n\n  components: {\n    Checkbox,\n    ArrayList,\n    Banner,\n    CruResource,\n    InputWithSelect,\n    Labels,\n    LabeledInput,\n    LabeledSelect,\n    Loading,\n    NameNsDescription,\n    YamlEditor,\n    SelectOrCreateAuthSecret,\n  },\n\n  mixins: [CreateEditView],\n\n  async fetch() {\n    const hash = await checkSchemasForFindAllHash({\n      allClusters: {\n        inStoreType: 'management',\n        type:        FLEET.CLUSTER\n      },\n\n      allClusterGroups: {\n        inStoreType: 'management',\n        type:        FLEET.CLUSTER_GROUP\n      }\n    }, this.$store);\n\n    this.allClusters = hash.allClusters || [];\n    this.allClusterGroups = hash.allClusterGroups || [];\n\n    let tls = _VERIFY;\n\n    if ( this.value.spec.insecureSkipTLSVerify ) {\n      tls = _SKIP;\n    } else if ( this.value.spec.caBundle ) {\n      try {\n        this.caBundle = base64Decode(this.value.spec.caBundle);\n        tls = _SPECIFY;\n      } catch (e) {\n        // Hmm...\n      }\n    }\n\n    this.tlsMode = tls;\n\n    if (this.value.spec.correctDrift === undefined) {\n      Vue.set(this.value.spec, 'correctDrift', { enabled: false });\n    }\n\n    this.updateTargets();\n  },\n\n  data() {\n    const targetInfo = this.value.targetInfo;\n    const targetCluster = targetInfo.cluster;\n    const targetClusterGroup = targetInfo.clusterGroup;\n    const targetAdvanced = targetInfo.advanced;\n\n    const ref = ( this.value.spec?.revision ? 'revision' : 'branch' );\n    const refValue = this.value.spec?.[ref] || '';\n\n    let targetMode = targetInfo.mode;\n\n    if ( this.realMode === _CREATE ) {\n      targetMode = 'all';\n    } else if ( targetMode === 'cluster' ) {\n      targetMode = `cluster://${ targetCluster }`;\n    } else if ( targetMode === 'clusterGroup' ) {\n      targetMode = `group://${ targetClusterGroup }`;\n    }\n\n    const stepRepoInfo = {\n      name:           'stepRepoInfo',\n      title:          this.t('fleet.gitRepo.add.steps.repoInfo.title'),\n      label:          this.t('fleet.gitRepo.add.steps.repoInfo.label'),\n      subtext:        this.t('fleet.gitRepo.add.steps.repoInfo.subtext'),\n      descriptionKey: 'fleet.gitRepo.add.steps.repoInfo.description',\n      ready:          false,\n      weight:         30\n    };\n\n    const stepTargetInfo = {\n      name:           'stepTargetInfo',\n      title:          this.t('fleet.gitRepo.add.steps.targetInfo.title'),\n      label:          this.t('fleet.gitRepo.add.steps.targetInfo.label'),\n      subtext:        this.t('fleet.gitRepo.add.steps.targetInfo.subtext'),\n      descriptionKey: 'fleet.gitRepo.steps.add.targetInfo.description',\n      ready:          true,\n      weight:         30\n    };\n\n    const addRepositorySteps = [stepRepoInfo, stepTargetInfo].sort((a, b) => (b.weight || 0) - (a.weight || 0));\n\n    return {\n      allClusters:             [],\n      allClusterGroups:        [],\n      allWorkspaces:           [],\n      tempCachedValues:        {},\n      username:                null,\n      password:                null,\n      publicKey:               null,\n      privateKey:              null,\n      tlsMode:                 null,\n      caBundle:                null,\n      targetAdvancedErrors:    null,\n      matchingClusters:        null,\n      ref,\n      refValue,\n      targetMode,\n      targetCluster,\n      targetClusterGroup,\n      targetAdvanced,\n      stepRepoInfo,\n      stepTargetInfo,\n      addRepositorySteps,\n      displayHelmRepoURLRegex: false\n    };\n  },\n\n  computed: {\n    ...mapGetters(['workspace']),\n\n    _SPECIFY() {\n      return _SPECIFY;\n    },\n\n    isLocal() {\n      return this.value.metadata.namespace === 'fleet-local';\n    },\n\n    isTls() {\n      return !(this.value?.spec?.repo || '').startsWith('http://');\n    },\n\n    targetOptions() {\n      const out = [\n        {\n          label: 'No Clusters',\n          value: 'none'\n        },\n        {\n          label: 'All Clusters in the Workspace',\n          value: 'all',\n        },\n        {\n          label: 'Advanced',\n          value: 'advanced'\n        },\n      ];\n\n      const clusters = this.allClusters\n        .filter((x) => {\n          return x.metadata.namespace === this.value.metadata.namespace;\n        })\n        .filter((x) => !isHarvesterCluster(x))\n        .map((x) => {\n          return { label: x.nameDisplay, value: `cluster://${ x.metadata.name }` };\n        });\n\n      if ( clusters.length ) {\n        out.push({ kind: 'divider', disabled: true });\n        out.push({\n          kind:     'title',\n          label:    'Clusters',\n          disabled: true,\n        });\n\n        out.push(...clusters);\n      }\n\n      const groups = this.allClusterGroups\n        .filter((x) => x.metadata.namespace === this.value.metadata.namespace)\n        .map((x) => {\n          return { label: x.nameDisplay, value: `group://${ x.metadata.name }` };\n        });\n\n      if ( groups.length ) {\n        out.push({ kind: 'divider', disabled: true });\n        out.push({\n          kind:     'title',\n          label:    'Cluster Groups',\n          disabled: true\n        });\n\n        out.push(...groups);\n      }\n\n      return out;\n    },\n\n    clusterNames() {\n      const out = this.allClusters\n        .filter((x) => x.metadata.namespace === this.value.metadata.namespace)\n        .map((x) => x.metadata.name);\n\n      return out;\n    },\n\n    clusterGroupNames() {\n      const out = this.allClusterGroups\n        .filter((x) => x.metadata.namespace === this.value.metadata.namespace)\n        .map((x) => x.metadata.name);\n\n      return out;\n    },\n\n    tlsOptions() {\n      return [\n        { label: this.t('fleet.gitRepo.tls.verify'), value: _VERIFY },\n        { label: this.t('fleet.gitRepo.tls.specify'), value: _SPECIFY },\n        { label: this.t('fleet.gitRepo.tls.skip'), value: _SKIP },\n      ];\n    },\n\n    stepOneRequires() {\n      return !!this.value.metadata.name && !!this.refValue;\n    },\n  },\n\n  watch: {\n    'value.metadata.namespace': 'updateTargets',\n    targetMode:                 'updateTargets',\n    targetCluster:              'updateTargets',\n    targetClusterGroup:         'updateTargets',\n    targetAdvanced:             'updateTargets',\n    tlsMode:                    'updateTls',\n    caBundle:                   'updateTls',\n\n    workspace(neu) {\n      if ( this.isCreate ) {\n        set(this.value, 'metadata.namespace', neu);\n      }\n    },\n  },\n\n  created() {\n    this.registerBeforeHook(this.cleanTLS, 'cleanTLS');\n    this.registerBeforeHook(this.doCreateSecrets, `registerAuthSecrets${ new Date().getTime() }`, 99);\n  },\n\n  methods: {\n    set,\n\n    cleanTLS() {\n      if (!this.isTls) {\n        delete this.value.spec.insecureSkipTLSVerify;\n        delete this.value.spec.caBundle;\n      }\n    },\n\n    updateCachedAuthVal(val, key) {\n      this.tempCachedValues[key] = typeof val === 'string' ? { selected: val } : { ...val };\n\n      if (key === 'helmSecretName') {\n        this.toggleHelmRepoURLRegex(val && val.selected !== AUTH_TYPE._NONE);\n      }\n    },\n\n    updateAuth(val, key) {\n      const spec = this.value.spec;\n\n      if ( val ) {\n        spec[key] = val;\n      } else {\n        delete spec[key];\n      }\n\n      this.updateCachedAuthVal(val, key);\n    },\n\n    toggleHelmRepoURLRegex(active) {\n      this.displayHelmRepoURLRegex = active;\n\n      if (!active) {\n        delete this.value.spec?.helmRepoURLRegex;\n      }\n    },\n\n    updateTargets() {\n      const spec = this.value.spec;\n      const mode = this.targetMode;\n\n      let kind, value;\n      const match = mode.match(/([^:]+)(:\\/\\/(.*))?$/);\n\n      if ( match ) {\n        kind = match[1];\n        value = match[3];\n      }\n\n      if ( kind === 'all' ) {\n        spec.targets = [{\n          clusterSelector: {\n            matchExpressions: [{\n              key:      CAPI.PROVIDER,\n              operator: 'NotIn',\n              values:   [\n                VIRTUAL_HARVESTER_PROVIDER\n              ],\n            }],\n          },\n        }];\n      } else if ( kind === 'none' ) {\n        spec.targets = [];\n      } else if ( kind === 'cluster' ) {\n        spec.targets = [\n          { clusterName: value },\n        ];\n      } else if ( kind === 'group' ) {\n        spec.targets = [\n          { clusterGroup: value }\n        ];\n      } else if ( kind === 'advanced' ) {\n        try {\n          const parsed = jsyaml.load(this.targetAdvanced);\n\n          spec.targets = parsed;\n          this.targetAdvancedErrors = null;\n        } catch (e) {\n          this.targetAdvancedErrors = exceptionToErrorsArray(e);\n        }\n      } else {\n        spec.targets = [];\n      }\n\n      this.stepOneReady();\n    },\n\n    changeRef({ text, selected }) {\n      this.ref = selected;\n      this.refValue = text;\n      const spec = this.value.spec;\n\n      if ( selected === 'branch' ) {\n        spec.branch = text;\n        delete spec.revision;\n      } else {\n        delete spec.branch;\n        spec.revision = text;\n      }\n\n      this.stepOneReady();\n    },\n\n    async doCreateSecrets() {\n      if (this.tempCachedValues.clientSecretName) {\n        await this.doCreate('clientSecretName', this.tempCachedValues.clientSecretName);\n      }\n\n      if (this.tempCachedValues.helmSecretName) {\n        await this.doCreate('helmSecretName', this.tempCachedValues.helmSecretName);\n      }\n    },\n\n    async doCreate(name, credentials) {\n      const { selected, publicKey, privateKey } = credentials;\n\n      if ( ![AUTH_TYPE._SSH, AUTH_TYPE._BASIC, AUTH_TYPE._S3].includes(selected) ) {\n        return;\n      }\n\n      let secret;\n\n      if ( selected === AUTH_TYPE._S3 ) {\n        secret = await this.$store.dispatch(`rancher/create`, {\n          type:               NORMAN.CLOUD_CREDENTIAL,\n          s3credentialConfig: {\n            accessKey: publicKey,\n            secretKey: privateKey,\n          },\n        });\n      } else {\n        secret = await this.$store.dispatch(`${ CATALOG._MANAGEMENT }/create`, {\n          type:     SECRET,\n          metadata: {\n            namespace:    this.value.metadata.namespace,\n            generateName: 'auth-'\n          },\n        });\n\n        let type, publicField, privateField;\n\n        switch ( selected ) {\n        case AUTH_TYPE._SSH:\n          type = SECRET_TYPES.SSH;\n          publicField = 'ssh-publickey';\n          privateField = 'ssh-privatekey';\n          break;\n        case AUTH_TYPE._BASIC:\n          type = SECRET_TYPES.BASIC;\n          publicField = 'username';\n          privateField = 'password';\n          break;\n        default:\n          throw new Error('Unknown type');\n        }\n\n        secret._type = type;\n        secret.data = {\n          [publicField]:  base64Encode(publicKey),\n          [privateField]: base64Encode(privateKey),\n        };\n      }\n\n      await secret.save();\n\n      await this.$nextTick(() => {\n        this.updateAuth(secret.metadata.name, name);\n      });\n\n      return secret;\n    },\n\n    updateTlsMode(event) {\n      this.tlsMode = event;\n    },\n\n    onUpdateRepoName() {\n      this.stepOneReady();\n    },\n\n    stepOneReady() {\n      this.$set(this.addRepositorySteps[0], 'ready', this.stepOneRequires);\n    },\n\n    updateTls() {\n      const spec = this.value.spec;\n\n      if ( this.tlsMode === _SPECIFY ) {\n        spec.insecureSkipTLSVerify = false;\n        const caBundle = (this.caBundle || '').trim();\n\n        if ( caBundle ) {\n          spec.caBundle = base64Encode(`${ caBundle }\\n`);\n        } else {\n          delete spec.caBundle;\n        }\n      } else {\n        if ( this.tlsMode === _SKIP ) {\n          spec.insecureSkipTLSVerify = true;\n        } else {\n          spec.insecureSkipTLSVerify = false;\n        }\n\n        if ( this.liveValue.caBundle ) {\n          spec.caBundle = this.liveValue.caBundle;\n        } else {\n          delete spec.caBundle;\n        }\n      }\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n\n  <CruResource\n    v-else\n    :done-route=\"doneRoute\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :subtypes=\"[]\"\n    :validation-passed=\"true\"\n    :errors=\"errors\"\n    :steps=\"addRepositorySteps\"\n    :edit-first-step=\"true\"\n    :finish-mode=\"'finish'\"\n    class=\"wizard\"\n    @cancel=\"done\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n  >\n    <template #noticeBanner>\n      <Banner\n        v-if=\"isLocal && mode === 'create'\"\n        color=\"info\"\n      >\n        {{ t('fleet.gitRepo.createLocalBanner') }}\n      </Banner>\n    </template>\n    <template #stepRepoInfo>\n      <NameNsDescription\n        v-if=\"!isView\"\n        v-model=\"value\"\n        :namespaced=\"false\"\n        :mode=\"mode\"\n        @change=\"onUpdateRepoName\"\n      />\n\n      <div class=\"row\">\n        <div class=\"col span-6\">\n          <Banner\n            color=\"info col span-6\"\n          >\n            <div>\n              {{ t('fleet.gitRepo.repo.protocolBanner') }}\n            </div>\n          </Banner>\n        </div>\n      </div>\n      <div\n        class=\"row\"\n        :class=\"{'mt-20': isView}\"\n      >\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.spec.repo\"\n            :mode=\"mode\"\n            label-key=\"fleet.gitRepo.repo.label\"\n            :placeholder=\"t('fleet.gitRepo.repo.placeholder', null, true)\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <InputWithSelect\n            :data-testid=\"`gitrepo-${ref}`\"\n            :mode=\"mode\"\n            :select-label=\"t('fleet.gitRepo.ref.label')\"\n            :select-value=\"ref\"\n            :text-label=\"t(`fleet.gitRepo.ref.${ref}Label`)\"\n            :text-placeholder=\"t(`fleet.gitRepo.ref.${ref}Placeholder`)\"\n            :text-value=\"refValue\"\n            :text-required=\"true\"\n            :options=\"[{label: t('fleet.gitRepo.ref.branch'), value: 'branch'}, {label: t('fleet.gitRepo.ref.revision'), value: 'revision'}]\"\n            @input=\"changeRef($event)\"\n          />\n        </div>\n      </div>\n      <SelectOrCreateAuthSecret\n        :value=\"value.spec.clientSecretName\"\n        :register-before-hook=\"registerBeforeHook\"\n        :namespace=\"value.metadata.namespace\"\n        :delegate-create-to-parent=\"true\"\n        in-store=\"management\"\n        :pre-select=\"tempCachedValues.clientSecretName\"\n        :mode=\"mode\"\n        generate-name=\"gitrepo-auth-\"\n        label-key=\"fleet.gitRepo.auth.git\"\n        @input=\"updateAuth($event, 'clientSecretName')\"\n        @inputauthval=\"updateCachedAuthVal($event, 'clientSecretName')\"\n      />\n\n      <SelectOrCreateAuthSecret\n        data-testid=\"gitrepo-helm-auth\"\n        :value=\"value.spec.helmSecretName\"\n        :register-before-hook=\"registerBeforeHook\"\n        :namespace=\"value.metadata.namespace\"\n        :delegate-create-to-parent=\"true\"\n        in-store=\"management\"\n        :mode=\"mode\"\n        generate-name=\"helmrepo-auth-\"\n        label-key=\"fleet.gitRepo.auth.helm\"\n        :pre-select=\"tempCachedValues.helmSecretName\"\n        @input=\"updateAuth($event, 'helmSecretName')\"\n        @inputauthval=\"updateCachedAuthVal($event, 'helmSecretName')\"\n      />\n\n      <div\n        v-if=\"displayHelmRepoURLRegex\"\n        class=\"row mt-20\"\n      >\n        <div\n          class=\"col span-6\"\n          data-testid=\"gitrepo-helm-repo-url-regex\"\n        >\n          <LabeledInput\n            v-model=\"value.spec.helmRepoURLRegex\"\n            :mode=\"mode\"\n            label-key=\"fleet.gitRepo.helmRepoURLRegex\"\n          />\n        </div>\n      </div>\n\n      <template v-if=\"isTls\">\n        <div class=\"spacer\" />\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <LabeledSelect\n              :label=\"t('fleet.gitRepo.tls.label')\"\n              :mode=\"mode\"\n              :value=\"tlsMode\"\n              :options=\"tlsOptions\"\n              @input=\"updateTlsMode($event)\"\n            />\n          </div>\n          <div\n            v-if=\"tlsMode === _SPECIFY\"\n            class=\"col span-6\"\n          >\n            <LabeledInput\n              v-model=\"caBundle\"\n              :mode=\"mode\"\n              type=\"multiline\"\n              label-key=\"fleet.gitRepo.caBundle.label\"\n              placeholder-key=\"fleet.gitRepo.caBundle.placeholder\"\n            />\n          </div>\n        </div>\n      </template>\n      <div class=\"spacer\" />\n      <h2 v-t=\"'fleet.gitRepo.resources.label'\" />\n      <div>\n        <Checkbox\n          v-model=\"value.spec.correctDrift.enabled\"\n          data-testid=\"GitRepo-correctDrift-checkbox\"\n          class=\"check\"\n          type=\"checkbox\"\n          label-key=\"fleet.gitRepo.resources.correctDrift\"\n          :mode=\"mode\"\n        />\n        <Banner\n          data-testid=\"GitRepo-correctDrift-banner\"\n          color=\"info\"\n        >\n          {{ t('fleet.gitRepo.resources.correctDriftBanner') }}\n        </Banner>\n      </div>\n\n      <Checkbox\n        v-model=\"value.spec.keepResources\"\n        class=\"check\"\n        type=\"checkbox\"\n        label-key=\"fleet.gitRepo.resources.keepResources\"\n        :mode=\"mode\"\n      />\n      <Banner\n        color=\"info\"\n      >\n        {{ t('fleet.gitRepo.resources.keepResourcesBanner') }}\n      </Banner>\n      <div class=\"spacer\" />\n      <h2 v-t=\"'fleet.gitRepo.paths.label'\" />\n      <ArrayList\n        v-model=\"value.spec.paths\"\n        data-testid=\"gitRepo-paths\"\n        :mode=\"mode\"\n        :initial-empty-row=\"false\"\n        :value-placeholder=\"t('fleet.gitRepo.paths.placeholder')\"\n        :add-label=\"t('fleet.gitRepo.paths.addLabel')\"\n      >\n        <template #empty>\n          <Banner label-key=\"fleet.gitRepo.paths.empty\" />\n        </template>\n      </ArrayList>\n    </template>\n    <template #stepTargetInfo>\n      <h2 v-t=\"isLocal ? 'fleet.gitRepo.target.labelLocal' : 'fleet.gitRepo.target.label'\" />\n\n      <template v-if=\"!isLocal\">\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <LabeledSelect\n              v-model=\"targetMode\"\n              :options=\"targetOptions\"\n              option-key=\"value\"\n              :mode=\"mode\"\n              :selectable=\"option => !option.disabled\"\n              :label=\"t('fleet.gitRepo.target.selectLabel')\"\n            >\n              <template v-slot:option=\"opt\">\n                <hr v-if=\"opt.kind === 'divider'\">\n                <div v-else-if=\"opt.kind === 'title'\">\n                  {{ opt.label }}\n                </div>\n                <div v-else>\n                  {{ opt.label }}\n                </div>\n              </template>\n            </LabeledSelect>\n          </div>\n        </div>\n\n        <div\n          v-if=\"targetMode === 'advanced'\"\n          class=\"row mt-10\"\n        >\n          <div class=\"col span-12\">\n            <YamlEditor v-model=\"targetAdvanced\" />\n          </div>\n        </div>\n\n        <Banner\n          v-for=\"(err, i) in targetAdvancedErrors\"\n          :key=\"i\"\n          color=\"error\"\n          :label=\"err\"\n        />\n      </template>\n\n      <div class=\"row mt-20\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.spec.serviceAccount\"\n            :mode=\"mode\"\n            label-key=\"fleet.gitRepo.serviceAccount.label\"\n            placeholder-key=\"fleet.gitRepo.serviceAccount.placeholder\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.spec.targetNamespace\"\n            :mode=\"mode\"\n            label-key=\"fleet.gitRepo.targetNamespace.label\"\n            placeholder-key=\"fleet.gitRepo.targetNamespace.placeholder\"\n            label=\"Target Namespace\"\n            placeholder=\"Optional: Require all resources to be in this namespace\"\n          />\n        </div>\n      </div>\n      <div class=\"spacer\" />\n      <Labels\n        :value=\"value\"\n        :mode=\"mode\"\n        :display-side-by-side=\"false\"\n      />\n    </template>\n  </CruResource>\n</template>\n"]}]}