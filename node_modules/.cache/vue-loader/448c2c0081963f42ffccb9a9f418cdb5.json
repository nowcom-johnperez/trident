{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/VirtualServiceGateways.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/VirtualServiceGateways.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IGdldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgeyBJU1RJTyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAoKICAgIHJvdzogewogICAgICB0eXBlOiAgICBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0KICB9LAoKICBjb21wdXRlZDogewogICAgZ2F0ZXdheXMoKSB7CiAgICAgIGNvbnN0IG91dCA9IFtdOwogICAgICBjb25zdCBnYXRld2F5cyA9IGdldCh0aGlzLnZhbHVlLCAnZ2F0ZXdheXMnKTsKICAgICAgY29uc3QgaHR0cE1hdGNoZXMgPSAoZ2V0KHRoaXMudmFsdWUsICdodHRwJykgfHwgW10pLnJlZHVjZSgobWF0Y2hlcywgaHR0cFJvdXRlKSA9PiB7CiAgICAgICAgaWYgKGh0dHBSb3V0ZS5tYXRjaCkgewogICAgICAgICAgbWF0Y2hlcy5wdXNoKC4uLmh0dHBSb3V0ZS5tYXRjaCk7CgogICAgICAgICAgcmV0dXJuIG1hdGNoZXM7CiAgICAgICAgfQogICAgICB9LCBbXSk7CiAgICAgIGNvbnN0IHRsc01hdGNoZXMgPSAoZ2V0KHRoaXMudmFsdWUsICd0bHMnKSB8fCBbXSkucmVkdWNlKChtYXRjaGVzLCB0bHNSb3V0ZSkgPT4gewogICAgICAgIGlmICh0bHNSb3V0ZS5tYXRjaCkgewogICAgICAgICAgbWF0Y2hlcy5wdXNoKC4uLnRsc1JvdXRlLm1hdGNoKTsKCiAgICAgICAgICByZXR1cm4gbWF0Y2hlczsKICAgICAgICB9CiAgICAgIH0sIFtdKTsKCiAgICAgIGlmIChnYXRld2F5cykgewogICAgICAgIG91dC5wdXNoKC4uLmdhdGV3YXlzKTsKICAgICAgfQoKICAgICAgaWYgKGh0dHBNYXRjaGVzICYmIHR5cGVvZiBodHRwTWF0Y2hlcyA9PT0gJ29iamVjdCcpIHsKICAgICAgICBodHRwTWF0Y2hlcy5mb3JFYWNoKChtYXRjaEJsb2NrKSA9PiB7CiAgICAgICAgICBpZiAobWF0Y2hCbG9jay5nYXRld2F5cykgewogICAgICAgICAgICBvdXQucHVzaCguLi5tYXRjaEJsb2NrLmdhdGV3YXlzKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgaWYgKHRsc01hdGNoZXMgJiYgdHlwZW9mIHRsc01hdGNoZXMgPT09ICdvYmplY3QnKSB7CiAgICAgICAgdGxzTWF0Y2hlcy5mb3JFYWNoKChtYXRjaEJsb2NrKSA9PiB7CiAgICAgICAgICBpZiAobWF0Y2hCbG9jay5nYXRld2F5cykgewogICAgICAgICAgICBvdXQucHVzaCguLi5tYXRjaEJsb2NrLmdhdGV3YXlzKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICAuLi5tYXBHZXR0ZXJzKHsgdDogJ2kxOG4vdCcgfSkKICB9LAoKICBtZXRob2RzOiB7CiAgICBnYXRld2F5TGlua3MobmFtZSkgewogICAgICBsZXQgbmFtZXNwYWNlOwoKICAgICAgaWYgKCFuYW1lLmluY2x1ZGVzKCcvJykpIHsKICAgICAgICBuYW1lc3BhY2UgPSBnZXQodGhpcy5yb3csICdtZXRhZGF0YS5uYW1lc3BhY2UnKSB8fCAnaXN0aW8tc3lzdGVtJzsKICAgICAgfSBlbHNlIHsKICAgICAgICBbbmFtZXNwYWNlLCBuYW1lXSA9IG5hbWUuc3BsaXQoJy8nKTsKICAgICAgfQogICAgICBjb25zdCByb3V0ZVBhcmFtcyA9IHRoaXMuJHJvdXRlLnBhcmFtczsKICAgICAgY29uc3Qgcm91dGVOYW1lID0gJ2MtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlLW5hbWVzcGFjZS1pZCc7CiAgICAgIGNvbnN0IHBhcmFtcyA9IHsKICAgICAgICAuLi5yb3V0ZVBhcmFtcywKICAgICAgICBwcm9kdWN0OiAgJ2lzdGlvJywKICAgICAgICByZXNvdXJjZTogSVNUSU8uR0FURVdBWSwKICAgICAgICBuYW1lc3BhY2UsCiAgICAgICAgaWQ6ICAgICAgIG5hbWUKICAgICAgfTsKCiAgICAgIHJldHVybiB7IG5hbWU6IHJvdXRlTmFtZSwgcGFyYW1zIH07CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["VirtualServiceGateways.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"VirtualServiceGateways.vue","sourceRoot":"node_modules/@rancher/shell/components/formatter","sourcesContent":["<script>\nimport { get } from '@shell/utils/object';\nimport { ISTIO } from '@shell/config/types';\nimport { mapGetters } from 'vuex';\nexport default {\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    row: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n\n  computed: {\n    gateways() {\n      const out = [];\n      const gateways = get(this.value, 'gateways');\n      const httpMatches = (get(this.value, 'http') || []).reduce((matches, httpRoute) => {\n        if (httpRoute.match) {\n          matches.push(...httpRoute.match);\n\n          return matches;\n        }\n      }, []);\n      const tlsMatches = (get(this.value, 'tls') || []).reduce((matches, tlsRoute) => {\n        if (tlsRoute.match) {\n          matches.push(...tlsRoute.match);\n\n          return matches;\n        }\n      }, []);\n\n      if (gateways) {\n        out.push(...gateways);\n      }\n\n      if (httpMatches && typeof httpMatches === 'object') {\n        httpMatches.forEach((matchBlock) => {\n          if (matchBlock.gateways) {\n            out.push(...matchBlock.gateways);\n          }\n        });\n      }\n\n      if (tlsMatches && typeof tlsMatches === 'object') {\n        tlsMatches.forEach((matchBlock) => {\n          if (matchBlock.gateways) {\n            out.push(...matchBlock.gateways);\n          }\n        });\n      }\n\n      return out;\n    },\n    ...mapGetters({ t: 'i18n/t' })\n  },\n\n  methods: {\n    gatewayLinks(name) {\n      let namespace;\n\n      if (!name.includes('/')) {\n        namespace = get(this.row, 'metadata.namespace') || 'istio-system';\n      } else {\n        [namespace, name] = name.split('/');\n      }\n      const routeParams = this.$route.params;\n      const routeName = 'c-cluster-product-resource-namespace-id';\n      const params = {\n        ...routeParams,\n        product:  'istio',\n        resource: ISTIO.GATEWAY,\n        namespace,\n        id:       name\n      };\n\n      return { name: routeName, params };\n    }\n  }\n};\n</script>\n\n<template>\n  <span>\n    <span\n      v-for=\"(gateway, i) in gateways\"\n      :key=\"gateway\"\n    >\n      <template v-if=\"i < 5\">\n        <nuxt-link :to=\"gatewayLinks(gateway)\">\n          {{ gatewayLinks(gateway).params.id }}\n        </nuxt-link>\n        <span v-if=\"i<gateways.length-1 && i < 4\">,</span>\n      </template>\n    </span>\n    <span\n      v-if=\"gateways.length>7\"\n      class=\"text-muted\"\n    >\n      {{ t('generic.plusMore', {n: gateways.length-4}) }}\n    </span>\n  </span>\n</template>\n"]}]}