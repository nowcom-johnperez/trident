{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/ResourceTabs/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/ResourceTabs/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8qCiAgICBUYWIgY29tcG9uZW50IGZvciByZXNvdXJjZSBDUlUgcGFnZXMgZmVhdHVyaW5nOgogICAgTGFiZWxzIGFuZCBBbm5vdGF0aW9uIHRhYnMgd2l0aCBjb250ZW50IGZpbHRlcmVkIGJ5IGNyZWF0ZS1lZGl0LXZpZXcgbWl4aW4KKi8KaW1wb3J0IFRhYmJlZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQnOwppbXBvcnQgVGFiIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1RhYmJlZC9UYWInOwppbXBvcnQgQ3JlYXRlRWRpdFZpZXcgZnJvbSAnQHNoZWxsL21peGlucy9jcmVhdGUtZWRpdC12aWV3JzsKaW1wb3J0IENvbmRpdGlvbnMgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9Db25kaXRpb25zJzsKaW1wb3J0IHsgRVZFTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IFNvcnRhYmxlVGFibGUgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvU29ydGFibGVUYWJsZSc7CmltcG9ydCB7IF9WSUVXIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgUmVsYXRlZFJlc291cmNlcyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9SZWxhdGVkUmVzb3VyY2VzJzsKaW1wb3J0IHsgRXh0ZW5zaW9uUG9pbnQsIFRhYkxvY2F0aW9uIH0gZnJvbSAnQHNoZWxsL2NvcmUvdHlwZXMnOwppbXBvcnQgeyBnZXRBcHBsaWNhYmxlRXh0ZW5zaW9uRW5oYW5jZW1lbnRzIH0gZnJvbSAnQHNoZWxsL2NvcmUvcGx1Z2luLWhlbHBlcnMnOwppbXBvcnQgeyBpc0NvbmRpdGlvblJlYWR5QW5kV2FpdGluZyB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZS9yZXNvdXJjZS1jbGFzcyc7CgpleHBvcnQgZGVmYXVsdCB7CgogIG5hbWU6ICdSZXNvdXJjZVRhYnMnLAoKICBjb21wb25lbnRzOiB7CiAgICBUYWJiZWQsCiAgICBUYWIsCiAgICBDb25kaXRpb25zLAogICAgU29ydGFibGVUYWJsZSwKICAgIFJlbGF0ZWRSZXNvdXJjZXMsCiAgfSwKCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXddLAoKICBwcm9wczogewogICAgLy8gcmVzb3VyY2UgaW5zdGFuY2UKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfSwKICAgIC8vIGNyZWF0ZS1lZGl0LXZpZXcgbW9kZQogICAgbW9kZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IF9WSUVXLAogICAgfSwKCiAgICBkZWZhdWx0VGFiOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCgogICAgbmVlZENvbmRpdGlvbnM6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKCiAgICBuZWVkRXZlbnRzOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCgogICAgbmVlZFJlbGF0ZWQ6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfSwKCiAgICBleHRlbnNpb25QYXJhbXM6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKCiAgZGF0YSgpIHsKICAgIGNvbnN0IGluU3RvcmUgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50U3RvcmUnXShFVkVOVCk7CgogICAgcmV0dXJuIHsKICAgICAgaGFzRXZlbnRzOiAgICAgdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHsgaW5TdG9yZSB9L3NjaGVtYUZvcmBdKEVWRU5UKSwgLy8gQFRPRE8gYmUgc21hcnRlciBhYm91dCB3aGljaCByZXNvdXJjZXMgYWN0dWFsbHkgZXZlciBoYXZlIGV2ZW50cwogICAgICBhbGxFdmVudHM6ICAgICBbXSwKICAgICAgc2VsZWN0ZWRUYWI6ICAgdGhpcy5kZWZhdWx0VGFiLAogICAgICBkaWRMb2FkRXZlbnRzOiBmYWxzZSwKICAgICAgZXh0ZW5zaW9uVGFiczogZ2V0QXBwbGljYWJsZUV4dGVuc2lvbkVuaGFuY2VtZW50cyh0aGlzLCBFeHRlbnNpb25Qb2ludC5UQUIsIFRhYkxvY2F0aW9uLlJFU09VUkNFX0RFVEFJTCwgdGhpcy4kcm91dGUsIHRoaXMsIHRoaXMuZXh0ZW5zaW9uUGFyYW1zKSwKICAgIH07CiAgfSwKCiAgYmVmb3JlRGVzdHJveSgpIHsKICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjbHVzdGVyL2ZvcmdldFR5cGUnLCBFVkVOVCk7CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIHNob3dDb25kaXRpb25zKCkgewogICAgICBjb25zdCBpblN0b3JlID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFN0b3JlJ10odGhpcy52YWx1ZS50eXBlKTsKCiAgICAgIGlmICggdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHsgaW5TdG9yZSB9L3NjaGVtYUZvcmBdKHRoaXMudmFsdWUudHlwZSkgKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuaXNWaWV3ICYmIHRoaXMubmVlZENvbmRpdGlvbnMgJiYgdGhpcy52YWx1ZT8udHlwZSAmJiB0aGlzLiRzdG9yZS5nZXR0ZXJzW2AkeyBpblN0b3JlIH0vcGF0aEV4aXN0c0luU2NoZW1hYF0odGhpcy52YWx1ZS50eXBlLCAnc3RhdHVzLmNvbmRpdGlvbnMnKTsKICAgICAgfQoKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfSwKICAgIHNob3dFdmVudHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmlldyAmJiB0aGlzLm5lZWRFdmVudHMgJiYgdGhpcy5oYXNFdmVudHM7CiAgICB9LAogICAgc2hvd1JlbGF0ZWQoKSB7CiAgICAgIHJldHVybiB0aGlzLmlzVmlldyAmJiB0aGlzLm5lZWRSZWxhdGVkOwogICAgfSwKICAgIGV2ZW50SGVhZGVycygpIHsKICAgICAgcmV0dXJuIFsKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAgJ3R5cGUnLAogICAgICAgICAgbGFiZWw6IHRoaXMudCgndGFibGVIZWFkZXJzLnR5cGUnKSwKICAgICAgICAgIHZhbHVlOiAnZXZlbnRUeXBlJywKICAgICAgICAgIHNvcnQ6ICAnZXZlbnRUeXBlJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICAncmVhc29uJywKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ3RhYmxlSGVhZGVycy5yZWFzb24nKSwKICAgICAgICAgIHZhbHVlOiAncmVhc29uJywKICAgICAgICAgIHNvcnQ6ICAncmVhc29uJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICAgICAgICAgICdkYXRlJywKICAgICAgICAgIGxhYmVsOiAgICAgICAgIHRoaXMudCgndGFibGVIZWFkZXJzLnVwZGF0ZWQnKSwKICAgICAgICAgIHZhbHVlOiAgICAgICAgICdkYXRlJywKICAgICAgICAgIHNvcnQ6ICAgICAgICAgICdkYXRlOmRlc2MnLAogICAgICAgICAgZm9ybWF0dGVyOiAgICAgJ0xpdmVEYXRlJywKICAgICAgICAgIGZvcm1hdHRlck9wdHM6IHsgYWRkU3VmZml4OiB0cnVlIH0sCiAgICAgICAgICB3aWR0aDogICAgICAgICAxMjUKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICAnbWVzc2FnZScsCiAgICAgICAgICBsYWJlbDogdGhpcy50KCd0YWJsZUhlYWRlcnMubWVzc2FnZScpLAogICAgICAgICAgdmFsdWU6ICdtZXNzYWdlJywKICAgICAgICAgIHNvcnQ6ICAnbWVzc2FnZScsCiAgICAgICAgfSwKICAgICAgXTsKICAgIH0sCiAgICBldmVudHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmFsbEV2ZW50cy5maWx0ZXIoKGV2ZW50KSA9PiB7CiAgICAgICAgcmV0dXJuIGV2ZW50Lmludm9sdmVkT2JqZWN0Py51aWQgPT09IHRoaXMudmFsdWU/Lm1ldGFkYXRhPy51aWQ7CiAgICAgIH0pLm1hcCgoZXZlbnQpID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgcmVhc29uOiAgICAoYCR7IGV2ZW50LnJlYXNvbiB8fCB0aGlzLnQoJ2dlbmVyaWMudW5rbm93bicpIH0keyBldmVudC5jb3VudCA+IDEgPyBgICgkeyBldmVudC5jb3VudCB9KWAgOiAnJyB9YCkudHJpbSgpLAogICAgICAgICAgbWVzc2FnZTogICBldmVudC5tZXNzYWdlIHx8IHRoaXMudCgnZ2VuZXJpYy51bmtub3duJyksCiAgICAgICAgICBkYXRlOiAgICAgIGV2ZW50Lmxhc3RUaW1lc3RhbXAgfHwgZXZlbnQuZmlyc3RUaW1lc3RhbXAgfHwgZXZlbnQubWV0YWRhdGEuY3JlYXRpb25UaW1lc3RhbXAsCiAgICAgICAgICBldmVudFR5cGU6IGV2ZW50LmV2ZW50VHlwZQogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIGNvbmRpdGlvbnNIYXZlSXNzdWVzKCkgewogICAgICBpZiAodGhpcy5zaG93Q29uZGl0aW9ucykgewogICAgICAgIHJldHVybiB0aGlzLnZhbHVlLnN0YXR1cz8uY29uZGl0aW9ucz8uZmlsdGVyKChjb25kKSA9PiAhaXNDb25kaXRpb25SZWFkeUFuZFdhaXRpbmcoY29uZCkpLnNvbWUoKGNvbmQpID0+IGNvbmQuZXJyb3IpOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgLy8gRW5zdXJlcyB3ZSBvbmx5IGZldGNoIGV2ZW50cyBhbmQgc2hvdyB0aGUgdGFibGUgd2hlbiB0aGUgZXZlbnRzIHRhYiBoYXMgYmVlbiBhY3RpdmF0ZWQKICAgIHRhYkNoYW5nZShuZXUpIHsKICAgICAgdGhpcy5zZWxlY3RlZFRhYiA9IG5ldT8uc2VsZWN0ZWROYW1lOwoKICAgICAgaWYgKCF0aGlzLmRpZExvYWRFdmVudHMgJiYgdGhpcy5zZWxlY3RlZFRhYiA9PT0gJ2V2ZW50cycpIHsKICAgICAgICBjb25zdCBpblN0b3JlID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFN0b3JlJ10oRVZFTlQpOwoKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChgJHsgaW5TdG9yZSB9L2ZpbmRBbGxgLCB7IHR5cGU6IEVWRU5UIH0pLnRoZW4oKGV2ZW50cykgPT4gewogICAgICAgICAgdGhpcy5hbGxFdmVudHMgPSBldmVudHM7CiAgICAgICAgICB0aGlzLmRpZExvYWRFdmVudHMgPSB0cnVlOwogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/components/form/ResourceTabs","sourcesContent":["<script>\n/*\n    Tab component for resource CRU pages featuring:\n    Labels and Annotation tabs with content filtered by create-edit-view mixin\n*/\nimport Tabbed from '@shell/components/Tabbed';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport Conditions from '@shell/components/form/Conditions';\nimport { EVENT } from '@shell/config/types';\nimport SortableTable from '@shell/components/SortableTable';\nimport { _VIEW } from '@shell/config/query-params';\nimport RelatedResources from '@shell/components/RelatedResources';\nimport { ExtensionPoint, TabLocation } from '@shell/core/types';\nimport { getApplicableExtensionEnhancements } from '@shell/core/plugin-helpers';\nimport { isConditionReadyAndWaiting } from '@shell/plugins/dashboard-store/resource-class';\n\nexport default {\n\n  name: 'ResourceTabs',\n\n  components: {\n    Tabbed,\n    Tab,\n    Conditions,\n    SortableTable,\n    RelatedResources,\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    // resource instance\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n    // create-edit-view mode\n    mode: {\n      type:    String,\n      default: _VIEW,\n    },\n\n    defaultTab: {\n      type:    String,\n      default: null,\n    },\n\n    needConditions: {\n      type:    Boolean,\n      default: true\n    },\n\n    needEvents: {\n      type:    Boolean,\n      default: true\n    },\n\n    needRelated: {\n      type:    Boolean,\n      default: true\n    },\n\n    extensionParams: {\n      type:    Object,\n      default: null\n    }\n  },\n\n  data() {\n    const inStore = this.$store.getters['currentStore'](EVENT);\n\n    return {\n      hasEvents:     this.$store.getters[`${ inStore }/schemaFor`](EVENT), // @TODO be smarter about which resources actually ever have events\n      allEvents:     [],\n      selectedTab:   this.defaultTab,\n      didLoadEvents: false,\n      extensionTabs: getApplicableExtensionEnhancements(this, ExtensionPoint.TAB, TabLocation.RESOURCE_DETAIL, this.$route, this, this.extensionParams),\n    };\n  },\n\n  beforeDestroy() {\n    this.$store.dispatch('cluster/forgetType', EVENT);\n  },\n\n  computed: {\n    showConditions() {\n      const inStore = this.$store.getters['currentStore'](this.value.type);\n\n      if ( this.$store.getters[`${ inStore }/schemaFor`](this.value.type) ) {\n        return this.isView && this.needConditions && this.value?.type && this.$store.getters[`${ inStore }/pathExistsInSchema`](this.value.type, 'status.conditions');\n      }\n\n      return false;\n    },\n    showEvents() {\n      return this.isView && this.needEvents && this.hasEvents;\n    },\n    showRelated() {\n      return this.isView && this.needRelated;\n    },\n    eventHeaders() {\n      return [\n        {\n          name:  'type',\n          label: this.t('tableHeaders.type'),\n          value: 'eventType',\n          sort:  'eventType',\n        },\n        {\n          name:  'reason',\n          label: this.t('tableHeaders.reason'),\n          value: 'reason',\n          sort:  'reason',\n        },\n        {\n          name:          'date',\n          label:         this.t('tableHeaders.updated'),\n          value:         'date',\n          sort:          'date:desc',\n          formatter:     'LiveDate',\n          formatterOpts: { addSuffix: true },\n          width:         125\n        },\n        {\n          name:  'message',\n          label: this.t('tableHeaders.message'),\n          value: 'message',\n          sort:  'message',\n        },\n      ];\n    },\n    events() {\n      return this.allEvents.filter((event) => {\n        return event.involvedObject?.uid === this.value?.metadata?.uid;\n      }).map((event) => {\n        return {\n          reason:    (`${ event.reason || this.t('generic.unknown') }${ event.count > 1 ? ` (${ event.count })` : '' }`).trim(),\n          message:   event.message || this.t('generic.unknown'),\n          date:      event.lastTimestamp || event.firstTimestamp || event.metadata.creationTimestamp,\n          eventType: event.eventType\n        };\n      });\n    },\n    conditionsHaveIssues() {\n      if (this.showConditions) {\n        return this.value.status?.conditions?.filter((cond) => !isConditionReadyAndWaiting(cond)).some((cond) => cond.error);\n      }\n\n      return false;\n    }\n  },\n\n  methods: {\n    // Ensures we only fetch events and show the table when the events tab has been activated\n    tabChange(neu) {\n      this.selectedTab = neu?.selectedName;\n\n      if (!this.didLoadEvents && this.selectedTab === 'events') {\n        const inStore = this.$store.getters['currentStore'](EVENT);\n\n        this.$store.dispatch(`${ inStore }/findAll`, { type: EVENT }).then((events) => {\n          this.allEvents = events;\n          this.didLoadEvents = true;\n        });\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Tabbed\n    v-bind=\"$attrs\"\n    :default-tab=\"defaultTab\"\n    @changed=\"tabChange\"\n  >\n    <slot />\n\n    <Tab\n      v-if=\"showConditions\"\n      label-key=\"resourceTabs.conditions.tab\"\n      name=\"conditions\"\n      :weight=\"-1\"\n      :display-alert-icon=\"conditionsHaveIssues\"\n    >\n      <Conditions :value=\"value\" />\n    </Tab>\n\n    <Tab\n      v-if=\"showEvents\"\n      label-key=\"resourceTabs.events.tab\"\n      name=\"events\"\n      :weight=\"-2\"\n    >\n      <SortableTable\n        v-if=\"selectedTab === 'events'\"\n        :rows=\"events\"\n        :headers=\"eventHeaders\"\n        key-field=\"id\"\n        :search=\"false\"\n        :table-actions=\"false\"\n        :row-actions=\"false\"\n        default-sort-by=\"date\"\n      />\n    </Tab>\n\n    <Tab\n      v-if=\"showRelated\"\n      name=\"related\"\n      label-key=\"resourceTabs.related.tab\"\n      :weight=\"-3\"\n    >\n      <h3 v-t=\"'resourceTabs.related.from'\" />\n      <RelatedResources\n        :ignore-types=\"[value.type]\"\n        :value=\"value\"\n        direction=\"from\"\n      />\n\n      <h3\n        v-t=\"'resourceTabs.related.to'\"\n        class=\"mt-20\"\n      />\n      <RelatedResources\n        :ignore-types=\"[value.type]\"\n        :value=\"value\"\n        direction=\"to\"\n      />\n    </Tab>\n\n    <!-- Extension tabs -->\n    <Tab\n      v-for=\"tab, i in extensionTabs\"\n      :key=\"`${tab.name}${i}`\"\n      :name=\"tab.name\"\n      :label=\"tab.label\"\n      :label-key=\"tab.labelKey\"\n      :weight=\"tab.weight\"\n      :tooltip=\"tab.tooltip\"\n      :show-header=\"tab.showHeader\"\n      :display-alert-icon=\"tab.displayAlertIcon\"\n      :error=\"tab.error\"\n      :badge=\"tab.badge\"\n    >\n      <component\n        :is=\"tab.component\"\n        :resource=\"value\"\n      />\n    </Tab>\n  </Tabbed>\n</template>\n"]}]}