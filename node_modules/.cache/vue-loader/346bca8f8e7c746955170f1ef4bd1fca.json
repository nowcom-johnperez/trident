{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/FixedBanner.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/FixedBanner.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IE1BTkFHRU1FTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgU0VUVElORyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2V0dGluZ3MnOwppbXBvcnQgaXNFbXB0eSBmcm9tICdsb2Rhc2gvaXNFbXB0eSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGhlYWRlcjogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICAgIGNvbnNlbnQ6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgICBmb290ZXI6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0sCiAgfSwKCiAgYXN5bmMgZmV0Y2goKSB7CiAgICB0aGlzLmJhbm5lclNldHRpbmcgPSBhd2FpdCB0aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L2J5SWQnXShNQU5BR0VNRU5ULlNFVFRJTkcsIFNFVFRJTkcuQkFOTkVSUyk7CiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNob3dEaWFsb2c6ICAgIHRydWUsCiAgICAgIHNob3dIZWFkZXI6ICAgIGZhbHNlLAogICAgICBzaG93Rm9vdGVyOiAgICBmYWxzZSwKICAgICAgc2hvd0NvbnNlbnQ6ICAgZmFsc2UsCiAgICAgIGJhbm5lcjogICAgICAgIHt9LAogICAgICBiYW5uZXJTZXR0aW5nOiBudWxsCiAgICB9OwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGhpZGVEaWFsb2coKSB7CiAgICAgIHRoaXMuc2hvd0RpYWxvZyA9IGZhbHNlOwogICAgfSwKICAgIGhhbmRsZUxpbmVCcmVha3NDb25zZW50VGV4dChiYW5uZXIpIHsKICAgICAgaWYgKGJhbm5lci50ZXh0Py5sZW5ndGgpIHsKICAgICAgICAvLyBzcGxpdCB0ZXh0IGJ5IG5ld2xpbmUgY2hhcgogICAgICAgIGNvbnN0IHRleHRBcnJheSA9IGJhbm5lci50ZXh0LnNwbGl0KC9cXG4vKS5maWx0ZXIoKGVsZW1lbnQpID0+IGVsZW1lbnQpOwoKICAgICAgICBpZiAodGV4dEFycmF5Lmxlbmd0aCA+IDEpIHsKICAgICAgICAgIHRleHRBcnJheS5mb3JFYWNoKChzdHIsIGkpID0+IHsKICAgICAgICAgICAgdGV4dEFycmF5W2ldID0gc3RyLnRyaW0oKTsKICAgICAgICAgIH0pOwogICAgICAgICAgYmFubmVyLnRleHQgPSB0ZXh0QXJyYXk7CiAgICAgICAgfQogICAgICB9CgogICAgICByZXR1cm4gYmFubmVyOwogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBiYW5uZXJTdHlsZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBjb2xvcjogICAgICAgICAgICAgIHRoaXMuYmFubmVyLmNvbG9yLAogICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogdGhpcy5iYW5uZXIuYmFja2dyb3VuZCwKICAgICAgICAndGV4dC1hbGlnbic6ICAgICAgIHRoaXMuYmFubmVyLnRleHRBbGlnbm1lbnQsCiAgICAgICAgJ2ZvbnQtd2VpZ2h0JzogICAgICB0aGlzLmJhbm5lci5mb250V2VpZ2h0ID8gJ2JvbGQnIDogJycsCiAgICAgICAgJ2ZvbnQtc3R5bGUnOiAgICAgICB0aGlzLmJhbm5lci5mb250U3R5bGUgPyAnaXRhbGljJyA6ICcnLAogICAgICAgICdmb250LXNpemUnOiAgICAgICAgdGhpcy5iYW5uZXIuZm9udFNpemUsCiAgICAgICAgJ3RleHQtZGVjb3JhdGlvbic6ICB0aGlzLmJhbm5lci50ZXh0RGVjb3JhdGlvbiA/ICd1bmRlcmxpbmUnIDogJycKICAgICAgfTsKICAgIH0sCiAgICBkaWFsb2dTdHlsZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBjb2xvcjogICAgICAgICAgICAgIHRoaXMuYmFubmVyLmNvbG9yLAogICAgICAgICdiYWNrZ3JvdW5kLWNvbG9yJzogdGhpcy5iYW5uZXIuYmFja2dyb3VuZAogICAgICB9OwogICAgfSwKICAgIHNob3dCYW5uZXIoKSB7CiAgICAgIGlmICghdGhpcy5iYW5uZXIudGV4dCAmJiAhdGhpcy5iYW5uZXIuYmFja2dyb3VuZCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMuaGVhZGVyKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc2hvd0hlYWRlcjsKICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbnNlbnQpIHsKICAgICAgICByZXR1cm4gdGhpcy5zaG93Q29uc2VudDsKICAgICAgfSBlbHNlIGlmICh0aGlzLmZvb3RlcikgewogICAgICAgIHJldHVybiB0aGlzLnNob3dGb290ZXI7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIGlzVGV4dEFuQXJyYXkoKSB7CiAgICAgIHJldHVybiBBcnJheS5pc0FycmF5KHRoaXMuYmFubmVyPy50ZXh0KTsKICAgIH0sCiAgICBzaG93QXNEaWFsb2coKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnNlbnQgJiYgISF0aGlzLmJhbm5lci5idXR0b247CiAgICB9LAoKICAgIC8vIElEIHRvIHBsYWNlIG9uIHRoZSBCYW5uZXIgRElWCiAgICBpZCgpIHsKICAgICAgaWYgKHRoaXMuaGVhZGVyKSB7CiAgICAgICAgcmV0dXJuICdiYW5uZXItaGVhZGVyJzsKICAgICAgfSBlbHNlIGlmICh0aGlzLmNvbnNlbnQpIHsKICAgICAgICByZXR1cm4gJ2Jhbm5lci1jb25zZW50JzsKICAgICAgfSBlbHNlIGlmICh0aGlzLmZvb3RlcikgewogICAgICAgIHJldHVybiAnYmFubmVyLWZvb3Rlcic7CiAgICAgIH0KCiAgICAgIHJldHVybiAnYmFubmVyJzsKICAgIH0KICB9LAoKICB3YXRjaDogewogICAgYmFubmVyU2V0dGluZyhuZXUpIHsKICAgICAgaWYgKG5ldT8udmFsdWUgJiYgbmV1LnZhbHVlICE9PSAnJykgewogICAgICAgIHRyeSB7CiAgICAgICAgICBjb25zdCBwYXJzZWQgPSBKU09OLnBhcnNlKG5ldS52YWx1ZSk7CiAgICAgICAgICBjb25zdCB7CiAgICAgICAgICAgIGJhbm5lckhlYWRlciwgYmFubmVyRm9vdGVyLCBiYW5uZXJDb25zZW50LCBiYW5uZXIsIHNob3dIZWFkZXIsIHNob3dGb290ZXIsIHNob3dDb25zZW50CiAgICAgICAgICB9ID0gcGFyc2VkOwogICAgICAgICAgbGV0IGJhbm5lckNvbnRlbnQgPSBwYXJzZWQ/LmJhbm5lciB8fCB7fTsKCiAgICAgICAgICBpZiAoaXNFbXB0eShiYW5uZXIpKSB7CiAgICAgICAgICAgIGlmIChzaG93SGVhZGVyICYmIHRoaXMuaGVhZGVyKSB7CiAgICAgICAgICAgICAgYmFubmVyQ29udGVudCA9IGJhbm5lckhlYWRlciB8fCB7fTsKICAgICAgICAgICAgfSBlbHNlIGlmIChzaG93Q29uc2VudCAmJiB0aGlzLmNvbnNlbnQpIHsKICAgICAgICAgICAgICBiYW5uZXJDb250ZW50ID0gdGhpcy5oYW5kbGVMaW5lQnJlYWtzQ29uc2VudFRleHQoYmFubmVyQ29uc2VudCkgfHwge307CiAgICAgICAgICAgIH0gZWxzZSBpZiAoc2hvd0Zvb3RlciAmJiB0aGlzLmZvb3RlcikgewogICAgICAgICAgICAgIGJhbm5lckNvbnRlbnQgPSBiYW5uZXJGb290ZXIgfHwge307CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgYmFubmVyQ29udGVudCA9IHt9OwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgdGhpcy5zaG93SGVhZGVyID0gc2hvd0hlYWRlciA9PT0gJ3RydWUnOwogICAgICAgICAgdGhpcy5zaG93Rm9vdGVyID0gc2hvd0Zvb3RlciA9PT0gJ3RydWUnOwogICAgICAgICAgdGhpcy5zaG93Q29uc2VudCA9IHNob3dDb25zZW50ID09PSAndHJ1ZSc7CiAgICAgICAgICB0aGlzLmJhbm5lciA9IGJhbm5lckNvbnRlbnQ7CiAgICAgICAgfSBjYXRjaCB7fQogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["FixedBanner.vue"],"names":[],"mappings":";AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FixedBanner.vue","sourceRoot":"node_modules/@rancher/shell/components","sourcesContent":["<script>\nimport { MANAGEMENT } from '@shell/config/types';\nimport { SETTING } from '@shell/config/settings';\nimport isEmpty from 'lodash/isEmpty';\n\nexport default {\n  props: {\n    header: {\n      type:    Boolean,\n      default: false\n    },\n    consent: {\n      type:    Boolean,\n      default: false\n    },\n    footer: {\n      type:    Boolean,\n      default: false\n    },\n  },\n\n  async fetch() {\n    this.bannerSetting = await this.$store.getters['management/byId'](MANAGEMENT.SETTING, SETTING.BANNERS);\n  },\n\n  data() {\n    return {\n      showDialog:    true,\n      showHeader:    false,\n      showFooter:    false,\n      showConsent:   false,\n      banner:        {},\n      bannerSetting: null\n    };\n  },\n\n  methods: {\n    hideDialog() {\n      this.showDialog = false;\n    },\n    handleLineBreaksConsentText(banner) {\n      if (banner.text?.length) {\n        // split text by newline char\n        const textArray = banner.text.split(/\\\\n/).filter((element) => element);\n\n        if (textArray.length > 1) {\n          textArray.forEach((str, i) => {\n            textArray[i] = str.trim();\n          });\n          banner.text = textArray;\n        }\n      }\n\n      return banner;\n    }\n  },\n\n  computed: {\n    bannerStyle() {\n      return {\n        color:              this.banner.color,\n        'background-color': this.banner.background,\n        'text-align':       this.banner.textAlignment,\n        'font-weight':      this.banner.fontWeight ? 'bold' : '',\n        'font-style':       this.banner.fontStyle ? 'italic' : '',\n        'font-size':        this.banner.fontSize,\n        'text-decoration':  this.banner.textDecoration ? 'underline' : ''\n      };\n    },\n    dialogStyle() {\n      return {\n        color:              this.banner.color,\n        'background-color': this.banner.background\n      };\n    },\n    showBanner() {\n      if (!this.banner.text && !this.banner.background) {\n        return false;\n      }\n\n      if (this.header) {\n        return this.showHeader;\n      } else if (this.consent) {\n        return this.showConsent;\n      } else if (this.footer) {\n        return this.showFooter;\n      }\n\n      return null;\n    },\n    isTextAnArray() {\n      return Array.isArray(this.banner?.text);\n    },\n    showAsDialog() {\n      return this.consent && !!this.banner.button;\n    },\n\n    // ID to place on the Banner DIV\n    id() {\n      if (this.header) {\n        return 'banner-header';\n      } else if (this.consent) {\n        return 'banner-consent';\n      } else if (this.footer) {\n        return 'banner-footer';\n      }\n\n      return 'banner';\n    }\n  },\n\n  watch: {\n    bannerSetting(neu) {\n      if (neu?.value && neu.value !== '') {\n        try {\n          const parsed = JSON.parse(neu.value);\n          const {\n            bannerHeader, bannerFooter, bannerConsent, banner, showHeader, showFooter, showConsent\n          } = parsed;\n          let bannerContent = parsed?.banner || {};\n\n          if (isEmpty(banner)) {\n            if (showHeader && this.header) {\n              bannerContent = bannerHeader || {};\n            } else if (showConsent && this.consent) {\n              bannerContent = this.handleLineBreaksConsentText(bannerConsent) || {};\n            } else if (showFooter && this.footer) {\n              bannerContent = bannerFooter || {};\n            } else {\n              bannerContent = {};\n            }\n          }\n\n          this.showHeader = showHeader === 'true';\n          this.showFooter = showFooter === 'true';\n          this.showConsent = showConsent === 'true';\n          this.banner = bannerContent;\n        } catch {}\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div\n    v-if=\"showBanner\"\n    :id=\"id\"\n  >\n    <div\n      v-if=\"!showAsDialog\"\n      class=\"banner\"\n      :style=\"bannerStyle\"\n      :class=\"{'banner-consent': consent}\"\n    >\n      <!-- text as array to support line breaks programmatically rather than just exposing HTML -->\n      <div v-if=\"isTextAnArray\">\n        <p\n          v-for=\"(text, index) in banner.text\"\n          :key=\"index\"\n        >\n          {{ text }}\n        </p>\n      </div>\n      <p v-else>\n        {{ banner.text }}\n      </p>\n    </div>\n    <div v-else-if=\"showDialog\">\n      <div class=\"banner-dialog-glass\" />\n      <div class=\"banner-dialog\">\n        <div\n          class=\"banner-dialog-frame\"\n          :style=\"dialogStyle\"\n        >\n          <div\n            class=\"banner\"\n            :style=\"bannerStyle\"\n          >\n            <!-- text as array to support line breaks programmatically rather than just exposing HTML -->\n            <div v-if=\"isTextAnArray\">\n              <p\n                v-for=\"(text, index) in banner.text\"\n                :key=\"index\"\n              >\n                {{ text }}\n              </p>\n            </div>\n            <p v-else>\n              {{ banner.text }}\n            </p>\n          </div>\n          <button\n            class=\"btn role-primary\"\n            @click=\"hideDialog()\"\n          >\n            {{ banner.button }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .banner {\n    text-align: center;\n    line-height: 2em;\n    width: 100%;\n    padding: 0 20px;\n\n    &.banner-consent {\n      position: absolute;\n      height: unset;\n      min-height: 2em;\n      overflow: hidden;\n    }\n  }\n  .banner-dialog, .banner-dialog-glass {\n    position: absolute;\n    top: 0px;\n    left: 0px;\n    width: 100vw;\n    height: 100vh;\n  }\n  .banner-dialog-glass {\n    z-index: 5000;\n    background-color: var(--default);\n    opacity: 0.75;\n  }\n  .banner-dialog {\n    z-index: 5001;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n\n    .banner-dialog-frame {\n      border: 2px solid var(--border);\n      display: flex;\n      align-items: center;\n      flex-direction: column;\n      padding: 20px;\n      height: fit-content;\n      width: fit-content;\n      min-width: 50%;\n      max-width: 80%;\n      max-height: 90%;\n\n      .banner {\n        height: initial;\n        overflow-y: auto;\n      }\n\n      button {\n        margin-top: 10px;\n        max-width: 50%;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        white-space: nowrap;\n        width: fit-content;\n      }\n    }\n  }\n</style>\n"]}]}