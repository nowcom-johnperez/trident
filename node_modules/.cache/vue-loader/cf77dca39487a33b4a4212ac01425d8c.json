{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/autoscaling.horizontalpodautoscaler/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/autoscaling.horizontalpodautoscaler/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOwoKaW1wb3J0IENydVJlc291cmNlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NydVJlc291cmNlJzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwppbXBvcnQgTGFiZWxzIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxzJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBOYW1lTnNEZXNjcmlwdGlvbiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL05hbWVOc0Rlc2NyaXB0aW9uJzsKaW1wb3J0IFRhYiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvVGFiJzsKaW1wb3J0IFRhYmJlZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQnOwppbXBvcnQgTWV0cmljc1JvdyBmcm9tICdAc2hlbGwvZWRpdC9hdXRvc2NhbGluZy5ob3Jpem9udGFscG9kYXV0b3NjYWxlci9tZXRyaWNzLXJvdyc7CmltcG9ydCBBcnJheUxpc3RHcm91cGVkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vQXJyYXlMaXN0R3JvdXBlZCc7CmltcG9ydCB7IERFRkFVTFRfUkVTT1VSQ0VfTUVUUklDIH0gZnJvbSAnQHNoZWxsL2VkaXQvYXV0b3NjYWxpbmcuaG9yaXpvbnRhbHBvZGF1dG9zY2FsZXIvcmVzb3VyY2UtbWV0cmljJzsKaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0NoZWNrYm94JzsKCmltcG9ydCB7IEFQSV9TRVJWSUNFLCBTQ0FMQUJMRV9XT1JLTE9BRF9UWVBFUyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgaXNFbXB0eSBmcm9tICdsb2Rhc2gvaXNFbXB0eSc7CmltcG9ydCBmaW5kIGZyb20gJ2xvZGFzaC9maW5kJzsKaW1wb3J0IGVuZHNXaXRoIGZyb20gJ2xvZGFzaC9lbmRzV2l0aCc7CmltcG9ydCB7IGZpbmRCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCBIcGFTY2FsaW5nUnVsZSBmcm9tICdAc2hlbGwvZWRpdC9hdXRvc2NhbGluZy5ob3Jpem9udGFscG9kYXV0b3NjYWxlci9ocGEtc2NhbGluZy1ydWxlLnZ1ZSc7Cgpjb25zdCBSRVNPVVJDRV9NRVRSSUNTX0FQSV9HUk9VUCA9ICdtZXRyaWNzLms4cy5pbyc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NydUhQQScsCgogIGNvbXBvbmVudHM6IHsKICAgIEhwYVNjYWxpbmdSdWxlLAogICAgQXJyYXlMaXN0R3JvdXBlZCwKICAgIENoZWNrYm94LAogICAgQ3J1UmVzb3VyY2UsCiAgICBMYWJlbGVkSW5wdXQsCiAgICBMYWJlbGVkU2VsZWN0LAogICAgTGFiZWxzLAogICAgTG9hZGluZywKICAgIE5hbWVOc0Rlc2NyaXB0aW9uLAogICAgTWV0cmljc1JvdywKICAgIFRhYiwKICAgIFRhYmJlZCwKICB9LAoKICBtaXhpbnM6IFtDcmVhdGVFZGl0Vmlld10sCgogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiAgICAgT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCgogICAgbW9kZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjcmVhdGUnLAogICAgfSwKICB9LAoKICBmZXRjaCgpIHsKICAgIGNvbnN0IHByb21pc2VzID0gW3RoaXMubG9hZEFQSVNlcnZpY2VzKCksIHRoaXMubG9hZFdvcmtsb2FkcygpXTsKCiAgICByZXR1cm4gUHJvbWlzZS5hbGwocHJvbWlzZXMpOwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4geyBkZWZhdWx0UmVzb3VyY2VNZXRyaWM6IERFRkFVTFRfUkVTT1VSQ0VfTUVUUklDIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGFsbE1ldHJpY3MoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlPy5zcGVjPy5tZXRyaWNzOwogICAgfSwKICAgIGFsbFdvcmtsb2Fkc0ZpbHRlcmVkKCkgewogICAgICByZXR1cm4gKAogICAgICAgIE9iamVjdC52YWx1ZXMoU0NBTEFCTEVfV09SS0xPQURfVFlQRVMpCiAgICAgICAgICAuZmxhdE1hcCgodHlwZSkgPT4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY2x1c3Rlci9hbGwnXSh0eXBlKSkKICAgICAgICAgIC5maWx0ZXIoCiAgICAgICAgICAgIC8vIEZpbHRlciBvdXQgYW55dGhpbmcgdGhhdCBoYXMgYW4gb3duZXIsIHdoaWNoIHNob3VsZCBwcm9iYWJseSBiZSB0aGUgb25lIHdpdGggdGhlIEhQQQogICAgICAgICAgICAvLyBGb3IgZXhhbXBsZSBSZXBsaWNhU2V0cyBjYW4gYmUgYXNzb2NpYXRlZCB3aXRoIGEgSFBBIChodHRwczovL2t1YmVybmV0ZXMuaW8vZG9jcy9jb25jZXB0cy93b3JrbG9hZHMvY29udHJvbGxlcnMvcmVwbGljYXNldC8jcmVwbGljYXNldC1hcy1hLWhvcml6b250YWwtcG9kLWF1dG9zY2FsZXItdGFyZ2V0KQogICAgICAgICAgICAvLyBidXQgd291bGRuJ3QgbWFrZSBzZW5zZSBpZiBpdCdzIG93bmVkIGJ5IGEgZGVwbG95bWVudAogICAgICAgICAgICAod2wpID0+IHdsLm1ldGFkYXRhLm5hbWVzcGFjZSA9PT0gdGhpcy52YWx1ZS5tZXRhZGF0YS5uYW1lc3BhY2UgJiYgIXdsLm93bmVkQnlXb3JrbG9hZAogICAgICAgICAgKQogICAgICApOwogICAgfSwKICAgIGFsbFdvcmtsb2Fkc01hcHBlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYWxsV29ya2xvYWRzRmlsdGVyZWQKICAgICAgLy8gVXBkYXRlIHRvIHR5cGUgT0JKRUNUX1JFRkVSRU5DRSB3aGljaCBjYW4gYmUgc3RvcmVkIGRpcmVjdGx5IGFzIHNjYWxlVGFyZ2V0UmVmCiAgICAgICAgLm1hcCgod29ya2xvYWQpID0+ICh7CiAgICAgICAgICBraW5kOiAgICAgICB3b3JrbG9hZC5raW5kLAogICAgICAgICAgbmFtZTogICAgICAgd29ya2xvYWQubWV0YWRhdGEubmFtZSwKICAgICAgICAgIGFwaVZlcnNpb246IHdvcmtsb2FkLmFwaVZlcnNpb24sCiAgICAgICAgfSkpOwogICAgfSwKICAgIGFsbFNlcnZpY2VzKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY2x1c3Rlci9hbGwnXShBUElfU0VSVklDRSk7CiAgICB9LAogICAgcmVzb3VyY2VNZXRyaWNzQXZhaWxhYmxlKCkgewogICAgICBjb25zdCB7IGFsbFNlcnZpY2VzIH0gPSB0aGlzOwoKICAgICAgcmV0dXJuICFpc0VtcHR5KAogICAgICAgIGZpbmQoCiAgICAgICAgICBhbGxTZXJ2aWNlcywKICAgICAgICAgIChhcGkpID0+IGFwaS5uYW1lLnNwbGl0KCcuJykubGVuZ3RoID09PSA0ICYmCiAgICAgICAgICAgIGVuZHNXaXRoKGFwaS5uYW1lLCBSRVNPVVJDRV9NRVRSSUNTX0FQSV9HUk9VUCkKICAgICAgICApCiAgICAgICk7CiAgICB9LAogICAgc2VsZWN0ZWRUYXJnZXRSZWYoKSB7CiAgICAgIGNvbnN0IHsgc2NhbGVUYXJnZXRSZWY6IHsgbmFtZSB9IH0gPSB0aGlzLnZhbHVlLnNwZWM7CiAgICAgIGNvbnN0IHsgYWxsV29ya2xvYWRzRmlsdGVyZWQgfSA9IHRoaXM7CiAgICAgIGNvbnN0IG1hdGNoID0gZmluZEJ5KGFsbFdvcmtsb2Fkc0ZpbHRlcmVkLCAnbWV0YWRhdGEubmFtZScsIG5hbWUpOwoKICAgICAgcmV0dXJuIG1hdGNoID8/IG51bGw7CiAgICB9LAogICAgaGFzU2NhbGVEb3duUnVsZXM6IHsKICAgICAgZ2V0KCkgewogICAgICAgIHJldHVybiAhIXRoaXMudmFsdWUuc3BlYy5iZWhhdmlvcj8uc2NhbGVEb3duOwogICAgICB9LAogICAgICBzZXQoaGFzU2NhbGVEb3duUnVsZXMpIHsKICAgICAgICBpZiAoaGFzU2NhbGVEb3duUnVsZXMpIHsKICAgICAgICAgIGlmICghdGhpcy52YWx1ZS5zcGVjLmJlaGF2aW9yKSB7CiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLnNwZWMsICdiZWhhdmlvcicsIHt9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICghdGhpcy52YWx1ZS5zcGVjLmJlaGF2aW9yPy5zY2FsZURvd24pIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuc3BlYy5iZWhhdmlvciwgJ3NjYWxlRG93bicsIHt9KTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMudmFsdWUuc3BlYy5iZWhhdmlvciwgJ3NjYWxlRG93bicpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGhhc1NjYWxlVXBSdWxlczogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuICEhdGhpcy52YWx1ZS5zcGVjLmJlaGF2aW9yPy5zY2FsZVVwOwogICAgICB9LAogICAgICBzZXQoaGFzU2NhbGVVcFJ1bGVzKSB7CiAgICAgICAgaWYgKGhhc1NjYWxlVXBSdWxlcykgewogICAgICAgICAgaWYgKCF0aGlzLnZhbHVlLnNwZWMuYmVoYXZpb3IpIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuc3BlYywgJ2JlaGF2aW9yJywge30pOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCF0aGlzLnZhbHVlLnNwZWMuYmVoYXZpb3I/LnNjYWxlVXApIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuc3BlYy5iZWhhdmlvciwgJ3NjYWxlVXAnLCB7fSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLnZhbHVlLnNwZWMuYmVoYXZpb3IsICdzY2FsZVVwJyk7CiAgICAgICAgfQogICAgICB9CiAgICB9LAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICBpZiAoIXRoaXM/LnZhbHVlPy5zcGVjPy50eXBlKSB7CiAgICAgIGlmICghdGhpcy52YWx1ZT8uc3BlYykgewogICAgICAgIHRoaXMuaW5pdFNwZWMoKTsKICAgICAgfQogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGluaXRTcGVjKCkgewogICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ3NwZWMnLCB7CiAgICAgICAgdHlwZTogICAgICAgICAgICdpby5rOHMuYXBpLmF1dG9zY2FsaW5nLnYxLmhvcml6b250YWxwb2RhdXRvc2NhbGVyc3BlYycsCiAgICAgICAgbWluUmVwbGljYXM6ICAgIDEsCiAgICAgICAgbWF4UmVwbGljYXM6ICAgIDEwLAogICAgICAgIHNjYWxlVGFyZ2V0UmVmOiB7CiAgICAgICAgICBhcGlWZXJzaW9uOiAnJywKICAgICAgICAgIGtpbmQ6ICAgICAgICcnLAogICAgICAgICAgbmFtZTogICAgICAgJycsCiAgICAgICAgfSwKICAgICAgICBtZXRyaWNzOiBbeyAuLi50aGlzLmRlZmF1bHRSZXNvdXJjZU1ldHJpYyB9XSwKICAgICAgfSk7CiAgICB9LAogICAgYXN5bmMgbG9hZFdvcmtsb2FkcygpIHsKICAgICAgYXdhaXQgUHJvbWlzZS5hbGwoCiAgICAgICAgT2JqZWN0LnZhbHVlcyhTQ0FMQUJMRV9XT1JLTE9BRF9UWVBFUykubWFwKCh0eXBlKSA9PiB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgeyB0eXBlIH0pCiAgICAgICAgKQogICAgICApOwogICAgfSwKICAgIGFzeW5jIGxvYWRBUElTZXJ2aWNlcygpIHsKICAgICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvZmluZEFsbCcsIHsgdHlwZTogQVBJX1NFUlZJQ0UgfSk7CiAgICB9LAogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/edit/autoscaling.horizontalpodautoscaler","sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\n\nimport CruResource from '@shell/components/CruResource';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport Labels from '@shell/components/form/Labels';\nimport Loading from '@shell/components/Loading';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport Tabbed from '@shell/components/Tabbed';\nimport MetricsRow from '@shell/edit/autoscaling.horizontalpodautoscaler/metrics-row';\nimport ArrayListGrouped from '@shell/components/form/ArrayListGrouped';\nimport { DEFAULT_RESOURCE_METRIC } from '@shell/edit/autoscaling.horizontalpodautoscaler/resource-metric';\nimport { Checkbox } from '@components/Form/Checkbox';\n\nimport { API_SERVICE, SCALABLE_WORKLOAD_TYPES } from '@shell/config/types';\nimport isEmpty from 'lodash/isEmpty';\nimport find from 'lodash/find';\nimport endsWith from 'lodash/endsWith';\nimport { findBy } from '@shell/utils/array';\nimport HpaScalingRule from '@shell/edit/autoscaling.horizontalpodautoscaler/hpa-scaling-rule.vue';\n\nconst RESOURCE_METRICS_API_GROUP = 'metrics.k8s.io';\n\nexport default {\n  name: 'CruHPA',\n\n  components: {\n    HpaScalingRule,\n    ArrayListGrouped,\n    Checkbox,\n    CruResource,\n    LabeledInput,\n    LabeledSelect,\n    Labels,\n    Loading,\n    NameNsDescription,\n    MetricsRow,\n    Tab,\n    Tabbed,\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    value: {\n      type:     Object,\n      required: true,\n    },\n\n    mode: {\n      type:    String,\n      default: 'create',\n    },\n  },\n\n  fetch() {\n    const promises = [this.loadAPIServices(), this.loadWorkloads()];\n\n    return Promise.all(promises);\n  },\n\n  data() {\n    return { defaultResourceMetric: DEFAULT_RESOURCE_METRIC };\n  },\n\n  computed: {\n    allMetrics() {\n      return this.value?.spec?.metrics;\n    },\n    allWorkloadsFiltered() {\n      return (\n        Object.values(SCALABLE_WORKLOAD_TYPES)\n          .flatMap((type) => this.$store.getters['cluster/all'](type))\n          .filter(\n            // Filter out anything that has an owner, which should probably be the one with the HPA\n            // For example ReplicaSets can be associated with a HPA (https://kubernetes.io/docs/concepts/workloads/controllers/replicaset/#replicaset-as-a-horizontal-pod-autoscaler-target)\n            // but wouldn't make sense if it's owned by a deployment\n            (wl) => wl.metadata.namespace === this.value.metadata.namespace && !wl.ownedByWorkload\n          )\n      );\n    },\n    allWorkloadsMapped() {\n      return this.allWorkloadsFiltered\n      // Update to type OBJECT_REFERENCE which can be stored directly as scaleTargetRef\n        .map((workload) => ({\n          kind:       workload.kind,\n          name:       workload.metadata.name,\n          apiVersion: workload.apiVersion,\n        }));\n    },\n    allServices() {\n      return this.$store.getters['cluster/all'](API_SERVICE);\n    },\n    resourceMetricsAvailable() {\n      const { allServices } = this;\n\n      return !isEmpty(\n        find(\n          allServices,\n          (api) => api.name.split('.').length === 4 &&\n            endsWith(api.name, RESOURCE_METRICS_API_GROUP)\n        )\n      );\n    },\n    selectedTargetRef() {\n      const { scaleTargetRef: { name } } = this.value.spec;\n      const { allWorkloadsFiltered } = this;\n      const match = findBy(allWorkloadsFiltered, 'metadata.name', name);\n\n      return match ?? null;\n    },\n    hasScaleDownRules: {\n      get() {\n        return !!this.value.spec.behavior?.scaleDown;\n      },\n      set(hasScaleDownRules) {\n        if (hasScaleDownRules) {\n          if (!this.value.spec.behavior) {\n            this.$set(this.value.spec, 'behavior', {});\n          }\n          if (!this.value.spec.behavior?.scaleDown) {\n            this.$set(this.value.spec.behavior, 'scaleDown', {});\n          }\n        } else {\n          this.$delete(this.value.spec.behavior, 'scaleDown');\n        }\n      }\n    },\n    hasScaleUpRules: {\n      get() {\n        return !!this.value.spec.behavior?.scaleUp;\n      },\n      set(hasScaleUpRules) {\n        if (hasScaleUpRules) {\n          if (!this.value.spec.behavior) {\n            this.$set(this.value.spec, 'behavior', {});\n          }\n          if (!this.value.spec.behavior?.scaleUp) {\n            this.$set(this.value.spec.behavior, 'scaleUp', {});\n          }\n        } else {\n          this.$delete(this.value.spec.behavior, 'scaleUp');\n        }\n      }\n    },\n  },\n\n  created() {\n    if (!this?.value?.spec?.type) {\n      if (!this.value?.spec) {\n        this.initSpec();\n      }\n    }\n  },\n\n  methods: {\n    initSpec() {\n      this.$set(this.value, 'spec', {\n        type:           'io.k8s.api.autoscaling.v1.horizontalpodautoscalerspec',\n        minReplicas:    1,\n        maxReplicas:    10,\n        scaleTargetRef: {\n          apiVersion: '',\n          kind:       '',\n          name:       '',\n        },\n        metrics: [{ ...this.defaultResourceMetric }],\n      });\n    },\n    async loadWorkloads() {\n      await Promise.all(\n        Object.values(SCALABLE_WORKLOAD_TYPES).map((type) => this.$store.dispatch('cluster/findAll', { type })\n        )\n      );\n    },\n    async loadAPIServices() {\n      await this.$store.dispatch('cluster/findAll', { type: API_SERVICE });\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <form\n    v-else\n    class=\"filled-height\"\n  >\n    <CruResource\n      :done-route=\"doneRoute\"\n      :mode=\"mode\"\n      :resource=\"value\"\n      :validation-passed=\"true\"\n      :errors=\"errors\"\n      @error=\"(e) => (errors = e)\"\n      @finish=\"save\"\n      @cancel=\"done\"\n    >\n      <NameNsDescription\n        v-if=\"!isView\"\n        :value=\"value\"\n        :mode=\"mode\"\n      />\n\n      <Tabbed :side-tabs=\"true\">\n        <Tab\n          name=\"target\"\n          :label=\"t('hpa.tabs.target')\"\n          :weight=\"10\"\n        >\n          <div class=\"row mb-20\">\n            <div class=\"col span-6\">\n              <LabeledSelect\n                v-model=\"value.spec.scaleTargetRef\"\n                :get-option-label=\"(opt) => opt.name\"\n                :mode=\"mode\"\n                :label=\"t('hpa.workloadTab.targetReference')\"\n                :options=\"allWorkloadsMapped\"\n                :required=\"true\"\n              >\n                <template v-slot:option=\"option\">\n                  {{ option.name }}<span class=\"pull-right\">{{ option.kind }}</span>\n                </template>\n              </LabeledSelect>\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-model.number=\"value.spec.minReplicas\"\n                :mode=\"mode\"\n                :label=\"t('hpa.workloadTab.min')\"\n                placeholder=\"1\"\n                :required=\"true\"\n                type=\"number\"\n              />\n            </div>\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-model.number=\"value.spec.maxReplicas\"\n                :mode=\"mode\"\n                :label=\"t('hpa.workloadTab.max')\"\n                placeholder=\"1\"\n                :required=\"true\"\n                type=\"number\"\n              />\n            </div>\n          </div>\n        </Tab>\n        <Tab\n          name=\"metrics\"\n          :label=\"t('hpa.tabs.metrics')\"\n        >\n          <ArrayListGrouped\n            v-model=\"value.spec.metrics\"\n            :default-add-value=\"{ ...defaultResourceMetric }\"\n            :mode=\"mode\"\n            :initial-empty-row=\"true\"\n          >\n            <template #remove-button=\"removeProps\">\n              <button\n                v-if=\"value.spec.metrics.length > 1\"\n                type=\"button\"\n                class=\"btn role-link close btn-sm\"\n                @click=\"removeProps.remove\"\n              >\n                <i class=\"icon icon-x\" />\n              </button>\n              <span v-else />\n            </template>\n            <template #default=\"props\">\n              <MetricsRow\n                v-model=\"props.row.value\"\n                :mode=\"mode\"\n                :metrics-available=\"resourceMetricsAvailable\"\n                :referent=\"selectedTargetRef\"\n              />\n            </template>\n          </ArrayListGrouped>\n        </Tab>\n        <Tab\n          name=\"behavior\"\n          :label=\"t('hpa.tabs.behavior')\"\n        >\n          <div class=\"col span-12 mb-10\">\n            <h3>\n              {{ t('hpa.scaleDownRules.label') }}\n            </h3>\n            <div class=\"row mb-10\">\n              <Checkbox\n                v-model=\"hasScaleDownRules\"\n                :mode=\"mode\"\n                :label=\"t('hpa.scaleDownRules.enable')\"\n              />\n            </div>\n            <HpaScalingRule\n              v-if=\"hasScaleDownRules\"\n              v-model=\"value\"\n              type=\"scaleDown\"\n              :mode=\"mode\"\n            />\n          </div>\n          <div class=\"col span-12\">\n            <h3>\n              {{ t('hpa.scaleUpRules.label') }}\n            </h3>\n            <div class=\"row mb-10\">\n              <Checkbox\n                v-model=\"hasScaleUpRules\"\n                :mode=\"mode\"\n                :label=\"t('hpa.scaleUpRules.enable')\"\n              />\n            </div>\n            <HpaScalingRule\n              v-if=\"hasScaleUpRules\"\n              v-model=\"value\"\n              type=\"scaleUp\"\n              :mode=\"mode\"\n            />\n          </div>\n        </Tab>\n        <Tab\n          name=\"labels-and-annotations\"\n          :label=\"t('hpa.tabs.labels')\"\n          :weight=\"-1\"\n        >\n          <Labels\n            :default-container-class=\"'labels-and-annotations-container'\"\n            :value=\"value\"\n            :mode=\"mode\"\n            :display-side-by-side=\"false\"\n          />\n        </Tab>\n      </Tabbed>\n    </CruResource>\n  </form>\n</template>\n"]}]}