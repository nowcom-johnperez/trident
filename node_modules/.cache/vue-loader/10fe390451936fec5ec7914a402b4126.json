{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/machine-config/azure.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/machine-config/azure.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgQ3JlYXRlRWRpdFZpZXcgZnJvbSAnQHNoZWxsL21peGlucy9jcmVhdGUtZWRpdC12aWV3JzsKaW1wb3J0IEZvcm1WYWxpZGF0aW9uIGZyb20gJ0BzaGVsbC9taXhpbnMvZm9ybS12YWxpZGF0aW9uJzsKaW1wb3J0IHsgc3RyaW5naWZ5LCBleGNlcHRpb25Ub0Vycm9yc0FycmF5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2Vycm9yJzsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IG1lcmdlIGZyb20gJ2xvZGFzaC9tZXJnZSc7CmltcG9ydCBpc0VtcHR5IGZyb20gJ2xvZGFzaC9pc0VtcHR5JzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vQ2hlY2tib3gnOwppbXBvcnQgQXJyYXlMaXN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vQXJyYXlMaXN0JzsKaW1wb3J0IHsgcmFuZG9tU3RyIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7CmltcG9ydCB7IGFkZFBhcmFtLCBhZGRQYXJhbXMgfSBmcm9tICdAc2hlbGwvdXRpbHMvdXJsJzsKaW1wb3J0IEtleVZhbHVlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vS2V5VmFsdWUnOwppbXBvcnQgeyBSYWRpb0dyb3VwIH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9SYWRpbyc7CmltcG9ydCB7IF9DUkVBVEUsIF9FRElUIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwoKZXhwb3J0IGNvbnN0IGF6dXJlRW52aXJvbm1lbnRzID0gWwogIHsgdmFsdWU6ICdBenVyZVB1YmxpY0Nsb3VkJyB9LAogIHsgdmFsdWU6ICdBenVyZUdlcm1hbkNsb3VkJyB9LAogIHsgdmFsdWU6ICdBenVyZUNoaW5hQ2xvdWQnIH0sCiAgeyB2YWx1ZTogJ0F6dXJlVVNHb3Zlcm5tZW50Q2xvdWQnIH0sCl07Cgpjb25zdCBkZWZhdWx0Q29uZmlnID0gewogIGFjY2VsZXJhdGVkTmV0d29ya2luZzogZmFsc2UsCiAgYXZhaWxhYmlsaXR5U2V0OiAgICAgICAnZG9ja2VyLW1hY2hpbmUnLAogIGNsaWVudElkOiAgICAgICAgICAgICAgJycsCiAgY2xpZW50U2VjcmV0OiAgICAgICAgICAnJywKICBjdXN0b21EYXRhOiAgICAgICAgICAgICcnLAogIGRpc2tTaXplOiAgICAgICAgICAgICAgJzMwJywKICBkbnM6ICAgICAgICAgICAgICAgICAgICcnLAogIGVudmlyb25tZW50OiAgICAgICAgICAgJ0F6dXJlUHVibGljQ2xvdWQnLAogIGZhdWx0RG9tYWluQ291bnQ6ICAgICAgJzMnLAogIGltYWdlOiAgICAgICAgICAgICAgICAgJ2Nhbm9uaWNhbDpVYnVudHVTZXJ2ZXI6MTguMDQtTFRTOmxhdGVzdCcsCiAgbG9jYXRpb246ICAgICAgICAgICAgICAnd2VzdHVzJywKICBtYW5hZ2VkRGlza3M6ICAgICAgICAgIGZhbHNlLAogIG5vUHVibGljSXA6ICAgICAgICAgICAgZmFsc2UsCiAgbnNnOiAgICAgICAgICAgICAgICAgICBudWxsLAogIHByaXZhdGVJcEFkZHJlc3M6ICAgICAgbnVsbCwKICByZXNvdXJjZUdyb3VwOiAgICAgICAgICdkb2NrZXItbWFjaGluZScsCiAgc2l6ZTogICAgICAgICAgICAgICAgICAnU3RhbmRhcmRfRDJfdjInLAogIHNzaFVzZXI6ICAgICAgICAgICAgICAgJ2RvY2tlci11c2VyJywKICBzdGF0aWNQdWJsaWNJcDogICAgICAgIGZhbHNlLAogIHN0b3JhZ2VUeXBlOiAgICAgICAgICAgJ1N0YW5kYXJkX0xSUycsCiAgc3VibmV0OiAgICAgICAgICAgICAgICAnZG9ja2VyLW1hY2hpbmUnLAogIHN1Ym5ldFByZWZpeDogICAgICAgICAgJzE5Mi4xNjguMC4wLzE2JywKICBzdWJzY3JpcHRpb25JZDogICAgICAgICcnLAogIHRlbmFudElkOiAgICAgICAgICAgICAgJycsCiAgdXBkYXRlRG9tYWluQ291bnQ6ICAgICAnNScsCiAgdXNlUHJpdmF0ZUlwOiAgICAgICAgICBmYWxzZSwKICB2bmV0OiAgICAgICAgICAgICAgICAgICdkb2NrZXItbWFjaGluZS12bmV0JywKICBvcGVuUG9ydDogICAgICAgICAgICAgIFsKICAgICc2NDQzL3RjcCcsCiAgICAnMjM3OS90Y3AnLAogICAgJzIzODAvdGNwJywKICAgICc4NDcyL3VkcCcsCiAgICAnNDc4OS91ZHAnLAogICAgJzk3OTYvdGNwJywKICAgICcxMDI1Ni90Y3AnLAogICAgJzEwMjUwL3RjcCcsCiAgICAnMTAyNTEvdGNwJywKICAgICcxMDI1Mi90Y3AnLAogIF0sCiAgdGFnczogbnVsbAp9OwoKY29uc3Qgc3RvcmFnZVR5cGVzID0gWwogIHsKICAgIG5hbWU6ICAnU3RhbmRhcmQgTFJTJywKICAgIHZhbHVlOiAnU3RhbmRhcmRfTFJTJywKICB9LAogIHsKICAgIG5hbWU6ICAnU3RhbmRhcmQgWlJTJywKICAgIHZhbHVlOiAnU3RhbmRhcmRfWlJTJywKICB9LAogIHsKICAgIG5hbWU6ICAnU3RhbmRhcmQgR1JTJywKICAgIHZhbHVlOiAnU3RhbmRhcmRfR1JTJywKICB9LAogIHsKICAgIG5hbWU6ICAnU3RhbmRhcmQgUkFHUlMnLAogICAgdmFsdWU6ICdTdGFuZGFyZF9SQUdSUycsCiAgfSwKICB7CiAgICBuYW1lOiAgJ1ByZW1pdW0gTFJTJywKICAgIHZhbHVlOiAnUHJlbWl1bV9MUlMnLAogIH0sCiAgewogICAgbmFtZTogICdTdGFuZGFyZCBTU0QgTFJTJywKICAgIHZhbHVlOiAnU3RhbmRhcmRTU0RfTFJTJwogIH0KXTsKY29uc3QgREVGQVVMVF9SRUdJT04gPSAnd2VzdHVzJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBcnJheUxpc3QsCiAgICBCYW5uZXIsCiAgICBDaGVja2JveCwKICAgIEtleVZhbHVlLAogICAgTGFiZWxlZElucHV0LAogICAgTGFiZWxlZFNlbGVjdCwKICAgIExvYWRpbmcsCiAgICBSYWRpb0dyb3VwCiAgfSwKCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXcsIEZvcm1WYWxpZGF0aW9uXSwKCiAgcHJvcHM6IHsKICAgIGNyZWRlbnRpYWxJZDogewogICAgICB0eXBlOiAgICAgU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NyZWF0ZScsCiAgICB9LAogICAgdXVpZDogewogICAgICB0eXBlOiAgICAgU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgICBkaXNhYmxlZDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfSwKICB9LAoKICBhc3luYyBmZXRjaCgpIHsKICAgIHRoaXMuZXJyb3JzID0gW107CiAgICB0aGlzLmluaXRUYWdzKCk7CgogICAgdHJ5IHsKICAgICAgY29uc3QgewogICAgICAgIGNsaWVudElkLAogICAgICAgIGNsaWVudFNlY3JldCwKICAgICAgICBlbnZpcm9ubWVudCwKICAgICAgICBzdWJzY3JpcHRpb25JZCwKICAgICAgICB0ZW5hbnRJZCwKICAgICAgfSA9ICh0aGlzLmNyZWRlbnRpYWw/LmRlY29kZWREYXRhIHx8IHt9KTsKCiAgICAgIGlmICghaXNFbXB0eShjbGllbnRJZCkpIHsKICAgICAgICB0aGlzLnZhbHVlLmNsaWVudElkID0gY2xpZW50SWQ7CiAgICAgIH0KICAgICAgaWYgKCFpc0VtcHR5KGNsaWVudFNlY3JldCkpIHsKICAgICAgICB0aGlzLnZhbHVlLmNsaWVudFNlY3JldCA9IGNsaWVudFNlY3JldDsKICAgICAgfQogICAgICBpZiAoIWlzRW1wdHkoZW52aXJvbm1lbnQpKSB7CiAgICAgICAgdGhpcy52YWx1ZS5lbnZpcm9ubWVudCA9IGVudmlyb25tZW50OwogICAgICB9CiAgICAgIGlmICghaXNFbXB0eShzdWJzY3JpcHRpb25JZCkpIHsKICAgICAgICB0aGlzLnZhbHVlLnN1YnNjcmlwdGlvbklkID0gc3Vic2NyaXB0aW9uSWQ7CiAgICAgIH0KICAgICAgaWYgKCFpc0VtcHR5KHRlbmFudElkKSkgewogICAgICAgIHRoaXMudmFsdWUudGVuYW50SWQgPSB0ZW5hbnRJZDsKICAgICAgfQoKICAgICAgdGhpcy5sb2NhdGlvbk9wdGlvbnMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9yZXF1ZXN0JywgewogICAgICAgIHVybDogICAgYWRkUGFyYW0oJy9tZXRhL2Frc0xvY2F0aW9ucycsICdjbG91ZENyZWRlbnRpYWxJZCcsIHRoaXMuY3JlZGVudGlhbElkKSwKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICB9KTsKCiAgICAgIGlmICh0aGlzLm1vZGUgPT09IF9DUkVBVEUpIHsKICAgICAgICB0aGlzLnZhbHVlLmxvY2F0aW9uID0gREVGQVVMVF9SRUdJT047CgogICAgICAvLyB3aGVuIHlvdSBlZGl0IGFuIEF6dXJlIGNsdXN0ZXIgYW5kIGFkZCBhIG5ldyBtYWNoaW5lIHBvb2wgKGVkaXQpCiAgICAgIC8vIHRoZSBsb2NhdGlvbiBmaWVsZCBkb2Vzbid0IGNvbWUgcG9wdWxhdGVkIHdoaWNoIGNhdXNlcyB0aGUgdm1TaXplcyByZXF1ZXN0CiAgICAgIC8vIHRvIHJldHVybiAyMDAgYnV0IHdpdGggYSBudWxsIHJlc3BvbnNlIChhbHNvIGEgYnVuY2ggb2Ygb3RoZXIgZmllbGRzIGFyZSB1bmRlZmluZWQuLi4pCiAgICAgIC8vIHNvIGxldCdzIHByZWZpbGwgdGhlbSB3aXRoIHRoZSBkZWZhdWx0cwogICAgICB9IGVsc2UgaWYgKHRoaXMubW9kZSA9PT0gX0VESVQgJiYgIXRoaXMudmFsdWU/LmxvY2F0aW9uKSB7CiAgICAgICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5kZWZhdWx0Q29uZmlnKSB7CiAgICAgICAgICBpZiAodGhpcy52YWx1ZVtrZXldID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsIGtleSwgdGhpcy5kZWZhdWx0Q29uZmlnW2tleV0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfQoKICAgICAgdGhpcy52bVNpemVzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvcmVxdWVzdCcsIHsKICAgICAgICB1cmw6IGFkZFBhcmFtcygnL21ldGEvYWtzVk1TaXplc1YyJywgewogICAgICAgICAgY2xvdWRDcmVkZW50aWFsSWQ6IHRoaXMuY3JlZGVudGlhbElkLAogICAgICAgICAgcmVnaW9uOiAgICAgICAgICAgIHRoaXMudmFsdWUubG9jYXRpb24KICAgICAgICB9KSwKICAgICAgICBtZXRob2Q6ICdHRVQnLAogICAgICB9KTsKCiAgICAgIC8vIHNldCBjb3JyZWN0IG9wdGlvbiBmb3IgdXNlQXZhaWxhYmlsaXR5U2V0ICh3aWxsIGNvbnNpZGVyIGNvcnJlY3Qgc3RhdGUgZm9yIFVJIGZvcm0gYmFzZWQgb24gYXZhaWxhYmlsaXR5U2V0KQogICAgICBpZiAodGhpcy5tb2RlID09PSBfQ1JFQVRFKSB7CiAgICAgICAgdGhpcy51c2VBdmFpbGFiaWxpdHlTZXQgPSB0cnVlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudXNlQXZhaWxhYmlsaXR5U2V0ID0gISF0aGlzLnZhbHVlLmF2YWlsYWJpbGl0eVNldDsKICAgICAgfQogICAgfSBjYXRjaCAoZSkgewogICAgICB0aGlzLmVycm9ycyA9IGV4Y2VwdGlvblRvRXJyb3JzQXJyYXkoZSk7CiAgICB9CiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGF6dXJlRW52aXJvbm1lbnRzLAogICAgICBkZWZhdWx0Q29uZmlnLAogICAgICBzdG9yYWdlVHlwZXMsCiAgICAgIGNyZWRlbnRpYWw6ICAgICAgICAgbnVsbCwKICAgICAgbG9jYXRpb25PcHRpb25zOiAgICBbXSwKICAgICAgbG9hZGluZzogICAgICAgICAgICBmYWxzZSwKICAgICAgdXNlQXZhaWxhYmlsaXR5U2V0OiBmYWxzZSwKICAgICAgdm1TaXplczogICAgICAgICAgICBbXSwKICAgICAgdmFsdWVDb3B5OiAgICAgICAgICB0aGlzLnZhbHVlLAogICAgfTsKICB9LAoKICB3YXRjaDogewogICAgY3JlZGVudGlhbElkKCkgewogICAgICB0aGlzLiRmZXRjaCgpOwogICAgfSwKCiAgICAndmFsdWUuYXZhaWxhYmlsaXR5Wm9uZScobmV1KSB7CiAgICAgIGlmIChuZXUgJiYgKCF0aGlzLnZhbHVlLm1hbmFnZWREaXNrcyB8fCAhdGhpcy52YWx1ZS5lbmFibGVQdWJsaWNJcFN0YW5kYXJkU2t1IHx8ICF0aGlzLnZhbHVlLnN0YXRpY1B1YmxpY0lwKSkgewogICAgICAgIHRoaXMuJGVtaXQoJ2V4cGFuZEFkdmFuY2VkJyk7CiAgICAgIH0KICAgIH0KICB9LAoKICBjb21wdXRlZDogewogICAgbG9jYXRpb25PcHRpb25zSW5Ecm9wZG93bigpIHsKICAgICAgY29uc3QgbG9jYXRpb25PcHRpb25zQ29weSA9IFsuLi50aGlzLmxvY2F0aW9uT3B0aW9uc107CgogICAgICByZXR1cm4gbG9jYXRpb25PcHRpb25zQ29weS5zb3J0KChhLCBiKSA9PiB7CiAgICAgICAgLy8gSG9wZWZ1bGx5IGl0J3MgZWFzaWVyIHRvIGZpbmQgYSByZWdpb24gaWYgdGhlIGxpc3QgaXMgaW4KICAgICAgICAvLyBhbHBoYWJldGljYWwgb3JkZXIuCiAgICAgICAgaWYgKGEubmFtZSA+IGIubmFtZSkgewogICAgICAgICAgcmV0dXJuIDE7CiAgICAgICAgfQogICAgICAgIGlmIChhLm5hbWUgPCBiLm5hbWUpIHsKICAgICAgICAgIHJldHVybiAtMTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAwOwogICAgICB9ICkKICAgICAgICAubWFwKChvcHRpb24pID0+IHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGRpc3BsYXlOYW1lOiBgJHsgb3B0aW9uLmRpc3BsYXlOYW1lIH0gKCR7IG9wdGlvbi5uYW1lIH0pYCwKICAgICAgICAgICAgbmFtZTogICAgICAgIG9wdGlvbi5uYW1lLAogICAgICAgICAgfTsKICAgICAgICB9KTsKICAgIH0sCiAgICB2bXNXaXRoQWNjZWxlcmF0ZWROZXR3b3JraW5nKCkgewogICAgICByZXR1cm4gdGhpcy52bVNpemVzLmZpbHRlcigodm1EYXRhKSA9PiB7CiAgICAgICAgcmV0dXJuIHZtRGF0YS5BY2NlbGVyYXRlZE5ldHdvcmtpbmdTdXBwb3J0ZWQ7CiAgICAgIH0pOwogICAgfSwKICAgIHZtc1dpdGhvdXRBY2NlbGVyYXRlZE5ldHdvcmtpbmcoKSB7CiAgICAgIHJldHVybiB0aGlzLnZtU2l6ZXMuZmlsdGVyKCh2bURhdGEpID0+IHsKICAgICAgICByZXR1cm4gIXZtRGF0YS5BY2NlbGVyYXRlZE5ldHdvcmtpbmdTdXBwb3J0ZWQ7CiAgICAgIH0pOwogICAgfSwKICAgIHNlbGVjdGVkVm1TaXplU3VwcG9ydHNBTigpIHsKICAgICAgY29uc3Qgc2VsZWN0ZWRTaXplSXNWYWxpZCA9ICEhdGhpcy52bXNXaXRoQWNjZWxlcmF0ZWROZXR3b3JraW5nLmZpbmQoKHZtRGF0YSkgPT4gewogICAgICAgIHJldHVybiB0aGlzLnZhbHVlLnNpemUgPT09IHZtRGF0YS5OYW1lOwogICAgICB9KTsKCiAgICAgIHJldHVybiBzZWxlY3RlZFNpemVJc1ZhbGlkOwogICAgfSwKICAgIHZtU2l6ZUFjY2VsZXJhdGVkTmV0d29ya2luZ1dhcm5pbmcoKSB7CiAgICAgIGlmICghdGhpcy5zZWxlY3RlZFZtU2l6ZVN1cHBvcnRzQU4gJiYgdGhpcy52YWx1ZS5hY2NlbGVyYXRlZE5ldHdvcmtpbmcpIHsKICAgICAgICByZXR1cm4gdGhpcy50KCdjbHVzdGVyLm1hY2hpbmVDb25maWcuYXp1cmUuc2l6ZS5zZWxlY3RlZFNpemVBY2NlbGVyYXRlZE5ldHdvcmtpbmdXYXJuaW5nJyk7CiAgICAgIH0KCiAgICAgIHJldHVybiAnJzsKICAgIH0sCiAgICB2bXNXaXRoQXZhaWxhYmlsaXR5Wm9uZXMoKSB7CiAgICAgIHJldHVybiB0aGlzLnZtU2l6ZXMuZmlsdGVyKCh2bURhdGEpID0+IHsKICAgICAgICByZXR1cm4gdm1EYXRhLkF2YWlsYWJpbGl0eVpvbmVzLmxlbmd0aCA+IDA7CiAgICAgIH0pOwogICAgfSwKICAgIHZtU2l6ZUF2YWlsYWJpbGl0eVdhcm5pbmcoKSB7CiAgICAgIGNvbnN0IHNlbGVjdGVkVm1Jc0F2YWlsYWJsZUluU2VsZWN0ZWRSZWdpb24gPSB0aGlzLnZtU2l6ZXMuZmlsdGVyKCh2bURhdGEpID0+IHsKICAgICAgICByZXR1cm4gdm1EYXRhLk5hbWUgPT09IHRoaXMudmFsdWUuc2l6ZTsKICAgICAgfSkubGVuZ3RoID4gMDsKCiAgICAgIGlmICghc2VsZWN0ZWRWbUlzQXZhaWxhYmxlSW5TZWxlY3RlZFJlZ2lvbikgewogICAgICAgIHJldHVybiB0aGlzLnQoJ2NsdXN0ZXIubWFjaGluZUNvbmZpZy5henVyZS5zaXplLmF2YWlsYWJpbGl0eVdhcm5pbmcnKTsKICAgICAgfQoKICAgICAgcmV0dXJuICcnOwogICAgfSwKICAgIHNlbGVjdGVkVm1TaXplSGFzWm9uZXMoKSB7CiAgICAgIGNvbnN0IGRhdGFGb3JTZWxlY3RlZFNpemUgPSB0aGlzLnZtc1dpdGhBdmFpbGFiaWxpdHlab25lcy5maWx0ZXIoKHZtRGF0YSkgPT4gewogICAgICAgIGNvbnN0IHsgTmFtZSB9ID0gdm1EYXRhOwoKICAgICAgICByZXR1cm4gTmFtZSA9PT0gdGhpcy52YWx1ZS5zaXplOwogICAgICB9KTsKCiAgICAgIGlmIChkYXRhRm9yU2VsZWN0ZWRTaXplLmxlbmd0aCA+IDApIHsKICAgICAgICByZXR1cm4gZGF0YUZvclNlbGVjdGVkU2l6ZVswXS5BdmFpbGFiaWxpdHlab25lcy5sZW5ndGggPiAwOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgdm1BdmFpbGFiaWxpdHlab25lV2FybmluZygpIHsKICAgICAgaWYgKHRoaXMudXNlQXZhaWxhYmlsaXR5U2V0KSB7CiAgICAgICAgcmV0dXJuICcnOwogICAgICB9CiAgICAgIGlmICh0aGlzLnZtc1dpdGhBdmFpbGFiaWxpdHlab25lcy5sZW5ndGggPT09IDApIHsKICAgICAgICAvKioKICAgICAgICAgKiBTaG93IFVJIHdhcm5pbmc6IEF2YWlsYWJpbGl0eSB6b25lcyBhcmUgbm90IHN1cHBvcnRlZCBpbiB0aGUgc2VsZWN0ZWQKICAgICAgICAgKiByZWdpb24uIFBsZWFzZSBzZWxlY3QgYSBkaWZmZXJlbnQgcmVnaW9uIG9yIHVzZSBhbgogICAgICAgICAqIGF2YWlsYWJpbGl0eSBzZXQgaW5zdGVhZC4KICAgICAgICAgKi8KICAgICAgICByZXR1cm4gdGhpcy50KCdjbHVzdGVyLm1hY2hpbmVDb25maWcuYXp1cmUuc2l6ZS5yZWdpb25Eb2VzTm90U3VwcG9ydEF6cycpOwogICAgICB9CgogICAgICBpZiAodGhpcy52bXNXaXRoQXZhaWxhYmlsaXR5Wm9uZXMubGVuZ3RoID4gMCAmJiAhdGhpcy5zZWxlY3RlZFZtU2l6ZUhhc1pvbmVzKSB7CiAgICAgICAgLyoqCiAgICAgICAgICogU2hvdyBVSSB3YXJuaW5nOiBUaGUgc2VsZWN0ZWQgcmVnaW9uIGRvZXMgbm90IHN1cHBvcnQgYXZhaWxhYmlsaXR5CiAgICAgICAgICogem9uZXMgZm9yIHRoZSBzZWxlY3RlZCBWTSBzaXplLiBQbGVhc2Ugc2VsZWN0IGEKICAgICAgICAgKiBkaWZmZXJlbnQgcmVnaW9uIG9yIFZNIHNpemUuCiAgICAgICAgICovCiAgICAgICAgcmV0dXJuIHRoaXMudCgnY2x1c3Rlci5tYWNoaW5lQ29uZmlnLmF6dXJlLnNpemUucmVnaW9uU3VwcG9ydHNBenNCdXROb3RUaGlzU2l6ZScpOwogICAgICB9CgogICAgICByZXR1cm4gJyc7CiAgICB9LAogICAgdm1TaXplT3B0aW9uc0ZvckRyb3Bkb3duKCkgewogICAgICAvLyBleGFtcGxlIHZtU2l6ZSBvcHRpb24gZnJvbSBiYWNrZW5kOgogICAgICAvLyB7CiAgICAgIC8vICAgQWNjZWxlcmF0ZWROZXR3b3JraW5nU3VwcG9ydGVkOiBmYWxzZSwKICAgICAgLy8gICBBdmFpbGFiaWxpdHlab25lczogW10sCiAgICAgIC8vICAgTmFtZTogIkJhc2ljX0EwIgogICAgICAvLyB9CgogICAgICBjb25zdCBvdXQgPSBbCiAgICAgICAgeyBraW5kOiAnZ3JvdXAnLCBsYWJlbDogdGhpcy50KCdjbHVzdGVyLm1hY2hpbmVDb25maWcuYXp1cmUuc2l6ZS5zdXBwb3J0c0FjY2VsZXJhdGVkTmV0d29ya2luZycpIH0sCiAgICAgICAgLi4udGhpcy52bXNXaXRoQWNjZWxlcmF0ZWROZXR3b3JraW5nLAogICAgICAgIHsga2luZDogJ2dyb3VwJywgbGFiZWw6IHRoaXMudCgnY2x1c3Rlci5tYWNoaW5lQ29uZmlnLmF6dXJlLnNpemUuZG9lc05vdFN1cHBvcnRBY2NlbGVyYXRlZE5ldHdvcmtpbmcnKSB9LAogICAgICAgIC4uLnRoaXMudm1zV2l0aG91dEFjY2VsZXJhdGVkTmV0d29ya2luZywKICAgICAgXTsKCiAgICAgIGlmICghdGhpcy5zZWxlY3RlZFZtU2l6ZUV4aXN0c0luU2VsZWN0ZWRSZWdpb24pIHsKICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICBOYW1lOiAgICAgdGhpcy52YWx1ZS5zaXplLAogICAgICAgICAgZGlzYWJsZWQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIG91dC5tYXAoKHZtRGF0YSkgPT4gewogICAgICAgIGNvbnN0IHsgTmFtZSB9ID0gdm1EYXRhOwoKICAgICAgICBpZiAodm1EYXRhLmtpbmQgPT09ICdncm91cCcpIHsKICAgICAgICAgIHJldHVybiB2bURhdGE7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgbGFiZWw6ICAgIE5hbWUsCiAgICAgICAgICB2YWx1ZTogICAgTmFtZSwKICAgICAgICAgIGRpc2FibGVkOiB2bURhdGEuZGlzYWJsZWQgfHwgZmFsc2UsCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgc2VsZWN0ZWRWbVNpemVFeGlzdHNJblNlbGVjdGVkUmVnaW9uKCkgewogICAgICAvLyBJZiB0aGUgdXNlciBzZWxlY3RzIGEgcmVnaW9uIGFuZCB0aGVuIGEgVk0gc2l6ZQogICAgICAvLyB0aGF0IGRvZXMgbm90IGV4aXN0IGluIHRoZSByZWdpb24sIHRoZSBsaXN0IG9mIFZNCiAgICAgIC8vIHNpemVzIHdpbGwgdXBkYXRlLCBjYXVzaW5nIHRoZSBzZWxlY3RlZCBWTSBzaXplCiAgICAgIC8vIHRvIGRpc2FwcGVhci4gQSBkaXNhcHBlYXJpbmcgVk0gc2l6ZSBzZWVtcyBsaWtlIGEKICAgICAgLy8gYmFkIFVYLCBzbyB0aGlzIHZhbHVlIGFsbG93cyB0aGUgdmFsdWUgdG8gYmUKICAgICAgLy8gYWRkZWQgdG8gdGhlIFZNIHNpemUgZHJvcGRvd24sIHdoaWxlIGFuIGVycm9yIG1lc3NhZ2UKICAgICAgLy8gaW5kaWNhdGVzIHRoYXQgdGhlIHNpemUgaXMgaW52YWxpZC4KICAgICAgaWYgKHRoaXMudm1TaXplcy5maW5kKChzaXplKSA9PiB7CiAgICAgICAgcmV0dXJuIHNpemUuTmFtZSA9PT0gdGhpcy52YWx1ZS5zaXplOwogICAgICB9KSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAogICAgYXZhaWxhYmxlWm9uZXMoKSB7CiAgICAgIGNvbnN0IGRhdGEgPSB0aGlzLnZtU2l6ZXMuZmlsdGVyKCh2bURhdGEpID0+IHsKICAgICAgICByZXR1cm4gdm1EYXRhLk5hbWUgPT09IHRoaXMudmFsdWUuc2l6ZTsKICAgICAgfSk7CgogICAgICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7CiAgICAgICAgcmV0dXJuIGRhdGFbMF0uQXZhaWxhYmlsaXR5Wm9uZXMuc29ydCgoYSwgYikgPT4gewogICAgICAgICAgcmV0dXJuIGEgLSBiOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gW107CiAgICB9LAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy5tb2RlID09PSAnY3JlYXRlJykgewogICAgICBmb3IgKGNvbnN0IGtleSBpbiB0aGlzLmRlZmF1bHRDb25maWcpIHsKICAgICAgICBpZiAodGhpcy52YWx1ZVtrZXldID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCBrZXksIHRoaXMuZGVmYXVsdENvbmZpZ1trZXldKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgbWVyZ2UodGhpcy52YWx1ZSwgdGhpcy5kZWZhdWx0Q29uZmlnKTsKCiAgICAgIHRoaXMudmFsdWUubnNnID0gYHJhbmNoZXItbWFuYWdlZC0keyByYW5kb21TdHIoOCkgfWA7CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgZ2V0Vm1TaXplT3B0aW9uTGFiZWwodm1EYXRhKSB7CiAgICAgIHJldHVybiB2bURhdGEubGFiZWw7CiAgICB9LAogICAgaGFuZGxlVm1TaXplSW5wdXQoJGV2ZW50KSB7CiAgICAgIGlmICh0aGlzLnZtU2l6ZUFjY2VsZXJhdGVkTmV0d29ya2luZ1dhcm5pbmcpIHsKICAgICAgICB0aGlzLiRlbWl0KCdlcnJvcicsIHRoaXMudm1TaXplQWNjZWxlcmF0ZWROZXR3b3JraW5nV2FybmluZyk7CiAgICAgIH0KICAgIH0sCiAgICBzdHJpbmdpZnksCiAgICBhc3luYyBnZXRWbVNpemVzKCkgewogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICAvLyBUaGUgbGlzdCBvZiBWTSBzaXplcyBzaG91bGQgdXBkYXRlIHdoZW4gdGhlCiAgICAgIC8vIHNlbGVjdGVkIHJlZ2lvbiBpcyBjaGFuZ2VkIGJlY2F1c2UgZGlmZmVyZW50CiAgICAgIC8vIFZNcyBhcmUgc3VwcG9ydGVkIGluIGRpZmZlcmVudCByZWdpb25zLgoKICAgICAgLy8gRXhhbXBsZSB2bVNpemUgb3B0aW9uIGZyb20gYmFja2VuZDoKICAgICAgLy8gewogICAgICAvLyAgIEFjY2VsZXJhdGVkTmV0d29ya2luZ1N1cHBvcnRlZDogZmFsc2UsCiAgICAgIC8vICAgQXZhaWxhYmlsaXR5Wm9uZXM6IFtdLAogICAgICAvLyAgIE5hbWU6ICJCYXNpY19BMCIKICAgICAgLy8gfQogICAgICB0cnkgewogICAgICAgIHRoaXMudm1TaXplcyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L3JlcXVlc3QnLCB7CiAgICAgICAgICB1cmw6IGFkZFBhcmFtcygnL21ldGEvYWtzVk1TaXplc1YyJywgewogICAgICAgICAgICBjbG91ZENyZWRlbnRpYWxJZDogdGhpcy5jcmVkZW50aWFsSWQsCiAgICAgICAgICAgIHJlZ2lvbjogICAgICAgICAgICB0aGlzLnZhbHVlLmxvY2F0aW9uCiAgICAgICAgICB9KSwKICAgICAgICAgIG1ldGhvZDogJ0dFVCcsCiAgICAgICAgfSk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLmVycm9ycyA9IGV4Y2VwdGlvblRvRXJyb3JzQXJyYXkoZSk7CiAgICAgIH0KICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgc2V0TG9jYXRpb24obG9jYXRpb24pIHsKICAgICAgdGhpcy52YWx1ZS5sb2NhdGlvbiA9IGxvY2F0aW9uPy5uYW1lOwogICAgICB0aGlzLmdldFZtU2l6ZXMoKTsKICAgIH0sCiAgICBpbml0VGFncygpIHsKICAgICAgY29uc3QgcGFydHMgPSAodGhpcy52YWx1ZS50YWdzIHx8ICcnKS5zcGxpdCgvLC8pOwogICAgICBjb25zdCBvdXQgPSB7fTsKCiAgICAgIGxldCBpID0gMDsKCiAgICAgIHdoaWxlICggaSArIDEgPCBwYXJ0cy5sZW5ndGggKSB7CiAgICAgICAgY29uc3Qga2V5ID0gYCR7IHBhcnRzW2ldIH1gLnRyaW0oKTsKICAgICAgICBjb25zdCB2YWx1ZSA9IGAkeyBwYXJ0c1tpICsgMV0gfWAudHJpbSgpOwoKICAgICAgICBpZiAoIGtleSApIHsKICAgICAgICAgIG91dFtrZXldID0gdmFsdWU7CiAgICAgICAgfQoKICAgICAgICBpICs9IDI7CiAgICAgIH0KCiAgICAgIHRoaXMudGFncyA9IG91dDsKICAgIH0sCgogICAgdXBkYXRlVGFncyh0YWdzKSB7CiAgICAgIGNvbnN0IGFyeSA9IFtdOwoKICAgICAgZm9yICggY29uc3QgayBpbiB0YWdzICkgewogICAgICAgIGFyeS5wdXNoKGssIHRhZ3Nba10pOwogICAgICB9CgogICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ3RhZ3MnLCBhcnkuam9pbignLCcpKTsKICAgIH0sCiAgICBoYW5kbGVBekNoYW5nZSgpIHsKICAgICAgaWYgKHRoaXMudmFsdWUuYXZhaWxhYmlsaXR5U2V0KSB7CiAgICAgIC8vIElmIGFuIGF2YWlsYWJpbGl0eSBzZXQgZXhpc3RzLCBjbGVhciBpdCBvdXQgd2hlbgogICAgICAvLyBhbiBhdmFpbGFiaWxpdHkgem9uZSBpcyBzZWxlY3RlZC4gT3RoZXJ3aXNlIHRoZQogICAgICAvLyBzZXQgd2lsbCB0YWtlIHByZWNlZGVudCBhbmQgdGhlIHpvbmUgd2lsbCBub3QgYmUgc2F2ZWQuCiAgICAgICAgdGhpcy52YWx1ZS5hdmFpbGFiaWxpdHlTZXQgPSBudWxsOwogICAgICB9CiAgICB9CiAgfSwKfTsK"},{"version":3,"sources":["azure.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"azure.vue","sourceRoot":"node_modules/@rancher/shell/machine-config","sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport FormValidation from '@shell/mixins/form-validation';\nimport { stringify, exceptionToErrorsArray } from '@shell/utils/error';\nimport { Banner } from '@components/Banner';\nimport merge from 'lodash/merge';\nimport isEmpty from 'lodash/isEmpty';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport ArrayList from '@shell/components/form/ArrayList';\nimport { randomStr } from '@shell/utils/string';\nimport { addParam, addParams } from '@shell/utils/url';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport { RadioGroup } from '@components/Form/Radio';\nimport { _CREATE, _EDIT } from '@shell/config/query-params';\n\nexport const azureEnvironments = [\n  { value: 'AzurePublicCloud' },\n  { value: 'AzureGermanCloud' },\n  { value: 'AzureChinaCloud' },\n  { value: 'AzureUSGovernmentCloud' },\n];\n\nconst defaultConfig = {\n  acceleratedNetworking: false,\n  availabilitySet:       'docker-machine',\n  clientId:              '',\n  clientSecret:          '',\n  customData:            '',\n  diskSize:              '30',\n  dns:                   '',\n  environment:           'AzurePublicCloud',\n  faultDomainCount:      '3',\n  image:                 'canonical:UbuntuServer:18.04-LTS:latest',\n  location:              'westus',\n  managedDisks:          false,\n  noPublicIp:            false,\n  nsg:                   null,\n  privateIpAddress:      null,\n  resourceGroup:         'docker-machine',\n  size:                  'Standard_D2_v2',\n  sshUser:               'docker-user',\n  staticPublicIp:        false,\n  storageType:           'Standard_LRS',\n  subnet:                'docker-machine',\n  subnetPrefix:          '192.168.0.0/16',\n  subscriptionId:        '',\n  tenantId:              '',\n  updateDomainCount:     '5',\n  usePrivateIp:          false,\n  vnet:                  'docker-machine-vnet',\n  openPort:              [\n    '6443/tcp',\n    '2379/tcp',\n    '2380/tcp',\n    '8472/udp',\n    '4789/udp',\n    '9796/tcp',\n    '10256/tcp',\n    '10250/tcp',\n    '10251/tcp',\n    '10252/tcp',\n  ],\n  tags: null\n};\n\nconst storageTypes = [\n  {\n    name:  'Standard LRS',\n    value: 'Standard_LRS',\n  },\n  {\n    name:  'Standard ZRS',\n    value: 'Standard_ZRS',\n  },\n  {\n    name:  'Standard GRS',\n    value: 'Standard_GRS',\n  },\n  {\n    name:  'Standard RAGRS',\n    value: 'Standard_RAGRS',\n  },\n  {\n    name:  'Premium LRS',\n    value: 'Premium_LRS',\n  },\n  {\n    name:  'Standard SSD LRS',\n    value: 'StandardSSD_LRS'\n  }\n];\nconst DEFAULT_REGION = 'westus';\n\nexport default {\n  components: {\n    ArrayList,\n    Banner,\n    Checkbox,\n    KeyValue,\n    LabeledInput,\n    LabeledSelect,\n    Loading,\n    RadioGroup\n  },\n\n  mixins: [CreateEditView, FormValidation],\n\n  props: {\n    credentialId: {\n      type:     String,\n      required: true,\n    },\n    mode: {\n      type:    String,\n      default: 'create',\n    },\n    uuid: {\n      type:     String,\n      required: true,\n    },\n    disabled: {\n      type:    Boolean,\n      default: false\n    },\n  },\n\n  async fetch() {\n    this.errors = [];\n    this.initTags();\n\n    try {\n      const {\n        clientId,\n        clientSecret,\n        environment,\n        subscriptionId,\n        tenantId,\n      } = (this.credential?.decodedData || {});\n\n      if (!isEmpty(clientId)) {\n        this.value.clientId = clientId;\n      }\n      if (!isEmpty(clientSecret)) {\n        this.value.clientSecret = clientSecret;\n      }\n      if (!isEmpty(environment)) {\n        this.value.environment = environment;\n      }\n      if (!isEmpty(subscriptionId)) {\n        this.value.subscriptionId = subscriptionId;\n      }\n      if (!isEmpty(tenantId)) {\n        this.value.tenantId = tenantId;\n      }\n\n      this.locationOptions = await this.$store.dispatch('management/request', {\n        url:    addParam('/meta/aksLocations', 'cloudCredentialId', this.credentialId),\n        method: 'GET',\n      });\n\n      if (this.mode === _CREATE) {\n        this.value.location = DEFAULT_REGION;\n\n      // when you edit an Azure cluster and add a new machine pool (edit)\n      // the location field doesn't come populated which causes the vmSizes request\n      // to return 200 but with a null response (also a bunch of other fields are undefined...)\n      // so let's prefill them with the defaults\n      } else if (this.mode === _EDIT && !this.value?.location) {\n        for (const key in this.defaultConfig) {\n          if (this.value[key] === undefined) {\n            this.$set(this.value, key, this.defaultConfig[key]);\n          }\n        }\n      }\n\n      this.vmSizes = await this.$store.dispatch('management/request', {\n        url: addParams('/meta/aksVMSizesV2', {\n          cloudCredentialId: this.credentialId,\n          region:            this.value.location\n        }),\n        method: 'GET',\n      });\n\n      // set correct option for useAvailabilitySet (will consider correct state for UI form based on availabilitySet)\n      if (this.mode === _CREATE) {\n        this.useAvailabilitySet = true;\n      } else {\n        this.useAvailabilitySet = !!this.value.availabilitySet;\n      }\n    } catch (e) {\n      this.errors = exceptionToErrorsArray(e);\n    }\n  },\n\n  data() {\n    return {\n      azureEnvironments,\n      defaultConfig,\n      storageTypes,\n      credential:         null,\n      locationOptions:    [],\n      loading:            false,\n      useAvailabilitySet: false,\n      vmSizes:            [],\n      valueCopy:          this.value,\n    };\n  },\n\n  watch: {\n    credentialId() {\n      this.$fetch();\n    },\n\n    'value.availabilityZone'(neu) {\n      if (neu && (!this.value.managedDisks || !this.value.enablePublicIpStandardSku || !this.value.staticPublicIp)) {\n        this.$emit('expandAdvanced');\n      }\n    }\n  },\n\n  computed: {\n    locationOptionsInDropdown() {\n      const locationOptionsCopy = [...this.locationOptions];\n\n      return locationOptionsCopy.sort((a, b) => {\n        // Hopefully it's easier to find a region if the list is in\n        // alphabetical order.\n        if (a.name > b.name) {\n          return 1;\n        }\n        if (a.name < b.name) {\n          return -1;\n        }\n\n        return 0;\n      } )\n        .map((option) => {\n          return {\n            displayName: `${ option.displayName } (${ option.name })`,\n            name:        option.name,\n          };\n        });\n    },\n    vmsWithAcceleratedNetworking() {\n      return this.vmSizes.filter((vmData) => {\n        return vmData.AcceleratedNetworkingSupported;\n      });\n    },\n    vmsWithoutAcceleratedNetworking() {\n      return this.vmSizes.filter((vmData) => {\n        return !vmData.AcceleratedNetworkingSupported;\n      });\n    },\n    selectedVmSizeSupportsAN() {\n      const selectedSizeIsValid = !!this.vmsWithAcceleratedNetworking.find((vmData) => {\n        return this.value.size === vmData.Name;\n      });\n\n      return selectedSizeIsValid;\n    },\n    vmSizeAcceleratedNetworkingWarning() {\n      if (!this.selectedVmSizeSupportsAN && this.value.acceleratedNetworking) {\n        return this.t('cluster.machineConfig.azure.size.selectedSizeAcceleratedNetworkingWarning');\n      }\n\n      return '';\n    },\n    vmsWithAvailabilityZones() {\n      return this.vmSizes.filter((vmData) => {\n        return vmData.AvailabilityZones.length > 0;\n      });\n    },\n    vmSizeAvailabilityWarning() {\n      const selectedVmIsAvailableInSelectedRegion = this.vmSizes.filter((vmData) => {\n        return vmData.Name === this.value.size;\n      }).length > 0;\n\n      if (!selectedVmIsAvailableInSelectedRegion) {\n        return this.t('cluster.machineConfig.azure.size.availabilityWarning');\n      }\n\n      return '';\n    },\n    selectedVmSizeHasZones() {\n      const dataForSelectedSize = this.vmsWithAvailabilityZones.filter((vmData) => {\n        const { Name } = vmData;\n\n        return Name === this.value.size;\n      });\n\n      if (dataForSelectedSize.length > 0) {\n        return dataForSelectedSize[0].AvailabilityZones.length > 0;\n      }\n\n      return false;\n    },\n    vmAvailabilityZoneWarning() {\n      if (this.useAvailabilitySet) {\n        return '';\n      }\n      if (this.vmsWithAvailabilityZones.length === 0) {\n        /**\n         * Show UI warning: Availability zones are not supported in the selected\n         * region. Please select a different region or use an\n         * availability set instead.\n         */\n        return this.t('cluster.machineConfig.azure.size.regionDoesNotSupportAzs');\n      }\n\n      if (this.vmsWithAvailabilityZones.length > 0 && !this.selectedVmSizeHasZones) {\n        /**\n         * Show UI warning: The selected region does not support availability\n         * zones for the selected VM size. Please select a\n         * different region or VM size.\n         */\n        return this.t('cluster.machineConfig.azure.size.regionSupportsAzsButNotThisSize');\n      }\n\n      return '';\n    },\n    vmSizeOptionsForDropdown() {\n      // example vmSize option from backend:\n      // {\n      //   AcceleratedNetworkingSupported: false,\n      //   AvailabilityZones: [],\n      //   Name: \"Basic_A0\"\n      // }\n\n      const out = [\n        { kind: 'group', label: this.t('cluster.machineConfig.azure.size.supportsAcceleratedNetworking') },\n        ...this.vmsWithAcceleratedNetworking,\n        { kind: 'group', label: this.t('cluster.machineConfig.azure.size.doesNotSupportAcceleratedNetworking') },\n        ...this.vmsWithoutAcceleratedNetworking,\n      ];\n\n      if (!this.selectedVmSizeExistsInSelectedRegion) {\n        out.push({\n          Name:     this.value.size,\n          disabled: true\n        });\n      }\n\n      return out.map((vmData) => {\n        const { Name } = vmData;\n\n        if (vmData.kind === 'group') {\n          return vmData;\n        }\n\n        return {\n          label:    Name,\n          value:    Name,\n          disabled: vmData.disabled || false,\n        };\n      });\n    },\n    selectedVmSizeExistsInSelectedRegion() {\n      // If the user selects a region and then a VM size\n      // that does not exist in the region, the list of VM\n      // sizes will update, causing the selected VM size\n      // to disappear. A disappearing VM size seems like a\n      // bad UX, so this value allows the value to be\n      // added to the VM size dropdown, while an error message\n      // indicates that the size is invalid.\n      if (this.vmSizes.find((size) => {\n        return size.Name === this.value.size;\n      })) {\n        return true;\n      }\n\n      return false;\n    },\n    availableZones() {\n      const data = this.vmSizes.filter((vmData) => {\n        return vmData.Name === this.value.size;\n      });\n\n      if (data.length > 0) {\n        return data[0].AvailabilityZones.sort((a, b) => {\n          return a - b;\n        });\n      }\n\n      return [];\n    },\n  },\n\n  created() {\n    if (this.mode === 'create') {\n      for (const key in this.defaultConfig) {\n        if (this.value[key] === undefined) {\n          this.$set(this.value, key, this.defaultConfig[key]);\n        }\n      }\n      merge(this.value, this.defaultConfig);\n\n      this.value.nsg = `rancher-managed-${ randomStr(8) }`;\n    }\n  },\n\n  methods: {\n    getVmSizeOptionLabel(vmData) {\n      return vmData.label;\n    },\n    handleVmSizeInput($event) {\n      if (this.vmSizeAcceleratedNetworkingWarning) {\n        this.$emit('error', this.vmSizeAcceleratedNetworkingWarning);\n      }\n    },\n    stringify,\n    async getVmSizes() {\n      this.loading = true;\n      // The list of VM sizes should update when the\n      // selected region is changed because different\n      // VMs are supported in different regions.\n\n      // Example vmSize option from backend:\n      // {\n      //   AcceleratedNetworkingSupported: false,\n      //   AvailabilityZones: [],\n      //   Name: \"Basic_A0\"\n      // }\n      try {\n        this.vmSizes = await this.$store.dispatch('management/request', {\n          url: addParams('/meta/aksVMSizesV2', {\n            cloudCredentialId: this.credentialId,\n            region:            this.value.location\n          }),\n          method: 'GET',\n        });\n      } catch (e) {\n        this.errors = exceptionToErrorsArray(e);\n      }\n      this.loading = false;\n    },\n    setLocation(location) {\n      this.value.location = location?.name;\n      this.getVmSizes();\n    },\n    initTags() {\n      const parts = (this.value.tags || '').split(/,/);\n      const out = {};\n\n      let i = 0;\n\n      while ( i + 1 < parts.length ) {\n        const key = `${ parts[i] }`.trim();\n        const value = `${ parts[i + 1] }`.trim();\n\n        if ( key ) {\n          out[key] = value;\n        }\n\n        i += 2;\n      }\n\n      this.tags = out;\n    },\n\n    updateTags(tags) {\n      const ary = [];\n\n      for ( const k in tags ) {\n        ary.push(k, tags[k]);\n      }\n\n      this.$set(this.value, 'tags', ary.join(','));\n    },\n    handleAzChange() {\n      if (this.value.availabilitySet) {\n      // If an availability set exists, clear it out when\n      // an availability zone is selected. Otherwise the\n      // set will take precedent and the zone will not be saved.\n        this.value.availabilitySet = null;\n      }\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading\n    v-if=\"$fetchState.pending\"\n    :delayed=\"true\"\n  />\n  <div v-else-if=\"errors.length\">\n    <div\n      v-for=\"(err, idx) in errors\"\n      :key=\"idx\"\n    >\n      <Banner\n        color=\"error\"\n        :label=\"stringify(err)\"\n      />\n    </div>\n  </div>\n  <div v-else>\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"value.environment\"\n          :mode=\"mode\"\n          :options=\"azureEnvironments\"\n          option-key=\"value\"\n          option-label=\"value\"\n          :searchable=\"false\"\n          :required=\"true\"\n          :label=\"t('cluster.machineConfig.azure.environment.label')\"\n          :disabled=\"disabled\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledSelect\n          :value=\"value.location\"\n          :mode=\"mode\"\n          :options=\"locationOptionsInDropdown\"\n          option-key=\"name\"\n          option-label=\"displayName\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :label=\"t('cluster.machineConfig.azure.location.label')\"\n          :disabled=\"disabled\"\n          @input=\"setLocation\"\n        />\n      </div>\n    </div>\n    <div class=\"row mt-20\">\n      <div class=\"col span-4\">\n        <LabeledInput\n          v-model=\"value.resourceGroup\"\n          :mode=\"mode\"\n          :label=\"t('cluster.machineConfig.azure.resourceGroup.label')\"\n          :disabled=\"disabled\"\n        />\n      </div>\n\n      <div\n        v-if=\"useAvailabilitySet\"\n        class=\"col span-4\"\n      >\n        <LabeledInput\n          v-model=\"value.availabilitySet\"\n          :mode=\"mode\"\n          :label=\"t('cluster.machineConfig.azure.availabilitySet.label')\"\n          :tooltip=\"t('cluster.machineConfig.azure.availabilitySet.description')\"\n          :disabled=\"disabled\"\n        />\n      </div>\n      <div\n        v-if=\"!useAvailabilitySet\"\n        class=\"col span-4\"\n      >\n        <i\n          v-if=\"loading\"\n          class=\"icon icon-spinner delayed-loader\"\n        />\n        <LabeledSelect\n          v-else\n          v-model=\"value.availabilityZone\"\n          :mode=\"mode\"\n          :options=\"availableZones\"\n          :label=\"t('cluster.machineConfig.azure.availabilityZone.label')\"\n          :tooltip=\"t('cluster.machineConfig.azure.availabilityZone.description')\"\n          :disabled=\"disabled || !!vmAvailabilityZoneWarning\"\n          @input=\"handleAzChange\"\n        />\n        <Banner\n          v-if=\"vmAvailabilityZoneWarning\"\n          color=\"error\"\n          :label=\"vmAvailabilityZoneWarning\"\n        />\n      </div>\n      <div class=\"col span-4\">\n        <RadioGroup\n          v-model=\"useAvailabilitySet\"\n          name=\"etcd-s3\"\n          :options=\"[true, false]\"\n          :labels=\"[t('cluster.machineConfig.azure.availabilitySet.label'),t('cluster.machineConfig.azure.availabilityZone.label')]\"\n          :mode=\"mode\"\n        />\n      </div>\n    </div>\n    <hr class=\"mt-20\">\n    <div class=\"row mt-20\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.image\"\n          :mode=\"mode\"\n          :label=\"t('cluster.machineConfig.azure.image.label')\"\n          :tooltip=\"t('cluster.machineConfig.azure.image.help')\"\n          :disabled=\"disabled\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <i\n          v-if=\"loading\"\n          class=\"icon icon-spinner delayed-loader\"\n        />\n        <LabeledSelect\n          v-else\n          v-model=\"value.size\"\n          :mode=\"mode\"\n          :options=\"vmSizeOptionsForDropdown\"\n          :get-option-label=\"getVmSizeOptionLabel\"\n          :searchable=\"true\"\n          :required=\"true\"\n          :label=\"t('cluster.machineConfig.azure.size.label')\"\n          :tooltip=\"value.acceleratedNetworking ? t('cluster.machineConfig.azure.size.tooltip') : ''\"\n          :disabled=\"disabled\"\n          @selecting=\"handleVmSizeInput\"\n        />\n        <Banner\n          v-if=\"vmSizeAcceleratedNetworkingWarning\"\n          color=\"error\"\n          :label=\"vmSizeAcceleratedNetworkingWarning\"\n        />\n        <Banner\n          v-else-if=\"vmSizeAvailabilityWarning\"\n          color=\"error\"\n          :label=\"vmSizeAvailabilityWarning\"\n        />\n      </div>\n    </div>\n\n    <portal :to=\"'advanced-' + uuid\">\n      <div v-if=\"useAvailabilitySet\">\n        <h2>{{ t('cluster.machineConfig.azure.sections.availabilitySetConfiguration') }}</h2>\n        <div class=\"row mt-20\">\n          <div class=\"col span-6\">\n            <LabeledInput\n              v-model=\"value.faultDomainCount\"\n              :mode=\"mode\"\n              :label=\"t('cluster.machineConfig.azure.faultDomainCount.label')\"\n              :tooltip=\"t('cluster.machineConfig.azure.faultDomainCount.help')\"\n              :disabled=\"disabled\"\n            />\n          </div>\n          <div class=\"col span-6\">\n            <LabeledInput\n              v-model=\"value.updateDomainCount\"\n              :mode=\"mode\"\n              :label=\"t('cluster.machineConfig.azure.updateDomainCount.label')\"\n              :tooltip=\"t('cluster.machineConfig.azure.updateDomainCount.help')\"\n              :disabled=\"disabled\"\n            />\n          </div>\n        </div>\n      </div>\n      <hr class=\"mt-20 mb-20\">\n      <h2>{{ t('cluster.machineConfig.azure.sections.purchasePlan') }}</h2>\n      <div class=\"row mt-20\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.plan\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.plan.label')\"\n            :placeholder=\"t('cluster.machineConfig.azure.plan.placeholder')\"\n            :disabled=\"disabled\"\n          />\n        </div>\n      </div>\n      <hr class=\"mt-20\">\n      <h2>{{ t('cluster.machineConfig.azure.sections.network') }}</h2>\n      <div class=\"row mt-20 mb-20\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.subnet\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.subnet.label')\"\n            :disabled=\"disabled\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.subnetPrefix\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.subnetPrefix.label')\"\n            :disabled=\"disabled\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-20\">\n        <div class=\"col span-6\">\n          <Checkbox\n            v-model=\"value.acceleratedNetworking\"\n            :disabled=\"(!value.acceleratedNetworking && !selectedVmSizeSupportsAN)\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.acceleratedNetworking.label')\"\n          />\n          <Banner\n            v-if=\"!selectedVmSizeSupportsAN && value.acceleratedNetworking\"\n            color=\"error\"\n            :label=\"t('cluster.machineConfig.azure.size.selectedSizeAcceleratedNetworkingWarning')\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-20\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.vnet\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.vnet.label')\"\n            :placeholder=\"t('cluster.machineConfig.azure.vnet.placeholder')\"\n            :disabled=\"disabled\"\n          />\n        </div>\n        <div class=\"col span-6 inline-banner-container\">\n          <h3><t k=\"cluster.machineConfig.azure.publicIpOptions.header\" /></h3>\n          <Checkbox\n            v-model=\"value.noPublicIp\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.publicIpOptions.noPublic.label')\"\n          />\n          <Checkbox\n            v-model=\"value.staticPublicIp\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.publicIpOptions.staticPublicIp.label')\"\n          />\n          <Checkbox\n            v-model=\"value.enablePublicIpStandardSku\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.publicIpOptions.standardSKU.label')\"\n          />\n          <div\n            v-if=\"value.availabilityZone && (!value.staticPublicIp || !value.enablePublicIpStandardSku)\"\n            class=\"inline-error-banner\"\n          >\n            <Banner\n              v-if=\"!value.staticPublicIp && !value.enablePublicIpStandardSku\"\n              color=\"error\"\n              :label=\"t('cluster.machineConfig.azure.availabilityZone.publicIpAndSKUWarning')\"\n            />\n            <Banner\n              v-else-if=\"!value.staticPublicIp\"\n              color=\"error\"\n              :label=\"t('cluster.machineConfig.azure.availabilityZone.publicIpWarning')\"\n            />\n            <Banner\n              v-else\n              color=\"error\"\n              :label=\"t('cluster.machineConfig.azure.availabilityZone.standardSKUWarning')\"\n            />\n          </div>\n        </div>\n      </div>\n      <div class=\"row mt-20\">\n        <div class=\"col span-6\">\n          <Checkbox\n            v-model=\"value.usePrivateIp\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.usePrivateIp.label')\"\n          />\n          <LabeledInput\n            v-model=\"value.privateIpAddress\"\n            :mode=\"mode\"\n            class=\"mt-10\"\n            :label=\"t('cluster.machineConfig.azure.privateIp.label')\"\n            :disabled=\"!value.usePrivateIp\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-20\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.nsg\"\n            :mode=\"mode\"\n            class=\"mt-10\"\n            :label=\"t('cluster.machineConfig.azure.nsg.label')\"\n            :tooltip=\"t('cluster.machineConfig.azure.nsg.help')\"\n            :disabled=\"disabled\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.dns\"\n            :mode=\"mode\"\n            class=\"mt-10\"\n            :label=\"t('cluster.machineConfig.azure.dns.label')\"\n            :tooltip=\"t('cluster.machineConfig.azure.dns.help')\"\n            :disabled=\"disabled\"\n          />\n        </div>\n      </div>\n      <hr class=\"mt-20 mb-20\">\n      <h2>{{ t('cluster.machineConfig.azure.sections.disks') }}</h2>\n      <div class=\"row mt-20 mb-20\">\n        <div class=\"col span-6\">\n          <LabeledSelect\n            v-model=\"value.storageType\"\n            :mode=\"mode\"\n            :options=\"storageTypes\"\n            :searchable=\"false\"\n            :required=\"true\"\n            :label=\"t('cluster.machineConfig.azure.storageType.label')\"\n            :disabled=\"disabled\"\n            option-key=\"value\"\n            option-label=\"name\"\n          />\n          <Banner\n            v-if=\"value.storageType === 'StandardSSD_LRS' && !value.managedDisks\"\n            color=\"error\"\n            :label=\"t('cluster.machineConfig.azure.storageType.warning')\"\n          />\n        </div>\n        <div class=\"col span-6 inline-banner-container\">\n          <Checkbox\n            v-model=\"value.managedDisks\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.managedDisks.label')\"\n            :disabled=\"disabled\"\n          />\n          <Banner\n            v-if=\"value.availabilityZone && !value.managedDisks\"\n            color=\"error\"\n            :label=\"t('cluster.machineConfig.azure.availabilityZone.managedDisksWarning')\"\n          />\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.diskSize\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.managedDisksSize.label')\"\n            :disabled=\"disabled\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.sshUser\"\n            :mode=\"mode\"\n            :label=\"t('cluster.machineConfig.azure.sshUser.label')\"\n            :disabled=\"disabled\"\n          />\n        </div>\n      </div>\n      <div class=\"row mt-20\">\n        <div class=\"col span-6\">\n          <ArrayList\n            v-model=\"value.openPort\"\n            table-class=\"fixed\"\n            :mode=\"mode\"\n            :title=\"t('cluster.machineConfig.azure.openPort.label')\"\n            :add-label=\"t('cluster.machineConfig.azure.openPort.add')\"\n            :show-protip=\"true\"\n            :protip=\"t('cluster.machineConfig.azure.openPort.help')\"\n            :disabled=\"disabled\"\n          />\n        </div>\n      </div>\n\n      <div class=\"row mt-20\">\n        <div class=\"col span-12\">\n          <h3><t k=\"cluster.machineConfig.azure.tags.label\" /></h3>\n          <KeyValue\n            :value=\"tags\"\n            :mode=\"mode\"\n            :read-allowed=\"false\"\n            :label=\"t('cluster.machineConfig.amazonEc2.tagTitle')\"\n            :add-label=\"t('labels.addTag')\"\n            :initial-empty-row=\"true\"\n            :disabled=\"disabled\"\n            @input=\"updateTags\"\n          />\n        </div>\n      </div>\n    </portal>\n  </div>\n</template>\n\n<style scoped>\n.inline-banner-container{\n  position: relative;\n}\n.inline-error-banner {\n  position: absolute;\n  width:100%\n}\n</style>\n"]}]}