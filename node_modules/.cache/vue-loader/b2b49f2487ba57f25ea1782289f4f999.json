{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/cloud-credential/aws.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/cloud-credential/aws.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgQ3JlYXRlRWRpdFZpZXcgZnJvbSAnQHNoZWxsL21peGlucy9jcmVhdGUtZWRpdC12aWV3JzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmcsIExhYmVsZWRJbnB1dCwgTGFiZWxlZFNlbGVjdAogIH0sCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXddLAoKICBhc3luYyBmZXRjaCgpIHsKICAgIGxldCBjdXIgPSAodGhpcy52YWx1ZS5kZWNvZGVkRGF0YS5kZWZhdWx0UmVnaW9uIHx8ICcnKS50b0xvd2VyQ2FzZSgpOwoKICAgIGlmICggIWN1ciApIHsKICAgICAgY3VyID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snYXdzL2RlZmF1bHRSZWdpb24nXTsKICAgICAgdGhpcy52YWx1ZS5zZXREYXRhKCdkZWZhdWx0UmVnaW9uJywgY3VyKTsKICAgIH0KCiAgICB0aGlzLmtub3duUmVnaW9ucyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdhd3MvZGVmYXVsdFJlZ2lvbnMnKTsKCiAgICBpZiAoICF0aGlzLmtub3duUmVnaW9ucy5pbmNsdWRlcyhjdXIpICkgewogICAgICB0aGlzLmtub3duUmVnaW9ucy51bnNoaWZ0KGN1cik7CiAgICB9CiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7IGtub3duUmVnaW9uczogbnVsbCB9OwogIH0sCgogIHdhdGNoOiB7CiAgICAndmFsdWUuZGVjb2RlZERhdGEuYWNjZXNzS2V5JyhuZXUpIHsKICAgICAgdGhpcy4kZW1pdCgndmFsaWRhdGlvbkNoYW5nZWQnLCAhIW5ldSk7CiAgICB9LAoKICAgICd2YWx1ZS5kZWNvZGVkRGF0YS5zZWNyZXRLZXknKG5ldSkgewogICAgICB0aGlzLiRlbWl0KCd2YWxpZGF0aW9uQ2hhbmdlZCcsICEhbmV1KTsKICAgIH0sCgogICAgJ3ZhbHVlLmRlY29kZWREYXRhLmRlZmF1bHRSZWdpb24nKG5ldSkgewogICAgICB0aGlzLiRlbWl0KCd2YWxpZGF0aW9uQ2hhbmdlZCcsICEhbmV1KTsKICAgIH0sCiAgfSwKCiAgbWV0aG9kczogewogICAgYXN5bmMgdGVzdCgpIHsKICAgICAgdHJ5IHsKICAgICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnYXdzL2VjMicsIHsKICAgICAgICAgIHJlZ2lvbjogICAgdGhpcy52YWx1ZS5kZWNvZGVkRGF0YS5kZWZhdWx0UmVnaW9uIHx8IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2F3cy9kZWZhdWx0UmVnaW9uJ10sCiAgICAgICAgICBhY2Nlc3NLZXk6IHRoaXMudmFsdWUuZGVjb2RlZERhdGEuYWNjZXNzS2V5LAogICAgICAgICAgc2VjcmV0S2V5OiB0aGlzLnZhbHVlLmRlY29kZWREYXRhLnNlY3JldEtleSwKICAgICAgICB9KTsKCiAgICAgICAgYXdhaXQgY2xpZW50LmRlc2NyaWJlUmVnaW9ucyh7fSk7CgogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["aws.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"aws.vue","sourceRoot":"node_modules/@rancher/shell/cloud-credential","sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\n\nexport default {\n  components: {\n    Loading, LabeledInput, LabeledSelect\n  },\n  mixins: [CreateEditView],\n\n  async fetch() {\n    let cur = (this.value.decodedData.defaultRegion || '').toLowerCase();\n\n    if ( !cur ) {\n      cur = this.$store.getters['aws/defaultRegion'];\n      this.value.setData('defaultRegion', cur);\n    }\n\n    this.knownRegions = await this.$store.dispatch('aws/defaultRegions');\n\n    if ( !this.knownRegions.includes(cur) ) {\n      this.knownRegions.unshift(cur);\n    }\n  },\n\n  data() {\n    return { knownRegions: null };\n  },\n\n  watch: {\n    'value.decodedData.accessKey'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n\n    'value.decodedData.secretKey'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n\n    'value.decodedData.defaultRegion'(neu) {\n      this.$emit('validationChanged', !!neu);\n    },\n  },\n\n  methods: {\n    async test() {\n      try {\n        const client = await this.$store.dispatch('aws/ec2', {\n          region:    this.value.decodedData.defaultRegion || this.$store.getters['aws/defaultRegion'],\n          accessKey: this.value.decodedData.accessKey,\n          secretKey: this.value.decodedData.secretKey,\n        });\n\n        await client.describeRegions({});\n\n        return true;\n      } catch (e) {\n        return false;\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading\n    v-if=\"$fetchState.pending\"\n    :delayed=\"true\"\n  />\n  <div v-else>\n    <LabeledInput\n      :value=\"value.decodedData.accessKey\"\n      label-key=\"cluster.credential.aws.accessKey.label\"\n      placeholder-key=\"cluster.credential.aws.accessKey.placeholder\"\n      type=\"text\"\n      :mode=\"mode\"\n      @input=\"value.setData('accessKey', $event);\"\n    />\n    <LabeledInput\n      :value=\"value.decodedData.secretKey\"\n      class=\"mt-20\"\n      label-key=\"cluster.credential.aws.secretKey.label\"\n      placeholder-key=\"cluster.credential.aws.secretKey.placeholder\"\n      type=\"password\"\n      :mode=\"mode\"\n      @input=\"value.setData('secretKey', $event);\"\n    />\n    <LabeledSelect\n      :value=\"value.decodedData.defaultRegion\"\n      class=\"mt-20\"\n      label-key=\"cluster.credential.aws.defaultRegion.label\"\n      placeholder-key=\"cluster.credential.aws.defaultRegion.placeholder\"\n      :mode=\"mode\"\n      :taggable=\"true\"\n      :options=\"knownRegions\"\n      @input=\"value.setData('defaultRegion', $event);\"\n    />\n    <p\n      v-clean-html=\"t('cluster.credential.aws.defaultRegion.help', {}, true)\"\n      class=\"text-muted mt-5\"\n    />\n  </div>\n</template>\n"]}]}