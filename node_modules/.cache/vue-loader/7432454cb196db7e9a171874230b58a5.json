{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/layouts/default.vue?vue&type=style&index=0&id=1e38de45&lang=scss","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/layouts/default.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":1716430467357},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1716430467929},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/postcss-loader/src/index.js","mtime":1716430467882},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/sass-loader/dist/cjs.js","mtime":1716430453705},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5kYXNoYm9hcmQtcm9vdCB7CiAgZGlzcGxheTogZmxleDsKICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogIGhlaWdodDogMTAwdmg7Cn0KCi5kYXNoYm9hcmQtY29udGVudCB7CiAgZGlzcGxheTogZ3JpZDsKICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgZmxleDogMSAxIGF1dG87CiAgb3ZlcmZsb3cteTogYXV0bzsKICBtaW4taGVpZ2h0OiAwcHg7CgogICYuZGFzaGJvYXJkLXBhZGRpbmctbGVmdCB7CiAgcGFkZGluZy1sZWZ0OiAkYXBwLWJhci1jb2xsYXBzZWQtd2lkdGg7CgogICAgLm92ZXJsYXktY29udGVudC1tb2RlIHsKICAgICAgbGVmdDogY2FsYyh2YXIoLS1uYXYtd2lkdGgpICsgJGFwcC1iYXItY29sbGFwc2VkLXdpZHRoKTsKICAgIH0KIH0KCiAgJi5waW4tcmlnaHQgewogICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczoKICAgICAgImhlYWRlciAgaGVhZGVyICBoZWFkZXIiCiAgICAgICJuYXYgICAgICBtYWluICAgICB3bSI7CiAgICBncmlkLXRlbXBsYXRlLXJvd3M6ICAgIHZhcigtLWhlYWRlci1oZWlnaHQpIGF1dG87CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHZhcigtLW5hdi13aWR0aCkgICAgIGF1dG8gdmFyKC0td20td2lkdGgsIDBweCk7CiAgfQoKICAmLnBpbi1ib3R0b20gewogICAgZ3JpZC10ZW1wbGF0ZS1hcmVhczoKICAgICAgImhlYWRlciAgaGVhZGVyIgogICAgICAibmF2ICAgICAgIG1haW4iCiAgICAgICJ3bSAgICAgICAgIHdtIjsKICAgIGdyaWQtdGVtcGxhdGUtcm93czogICAgdmFyKC0taGVhZGVyLWhlaWdodCkgYXV0byAgdmFyKC0td20taGVpZ2h0LCAwcHgpOwogICAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiB2YXIoLS1uYXYtd2lkdGgpICAgICBhdXRvOwogIH0KCiAgJi5waW4tbGVmdCB7CiAgICBncmlkLXRlbXBsYXRlLWFyZWFzOgogICAgICAiaGVhZGVyICBoZWFkZXIgIGhlYWRlciIKICAgICAgIndtICAgICAgIG5hdiAgICAgbWFpbiI7CiAgICBncmlkLXRlbXBsYXRlLXJvd3M6ICAgIHZhcigtLWhlYWRlci1oZWlnaHQpIGF1dG87CiAgICBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHZhcigtLXdtLXdpZHRoLCAwcHgpIHZhcigtLW5hdi13aWR0aCkgYXV0bzsKICB9CgogID4gSEVBREVSIHsKICAgIGdyaWQtYXJlYTogaGVhZGVyOwogIH0KCiAgLmRlZmF1bHQtc2lkZS1uYXYgewogICAgZ3JpZC1hcmVhOiBuYXY7CiAgfQp9Cgoud20gewogIGdyaWQtYXJlYTogd207CiAgb3ZlcmZsb3cteTogaGlkZGVuOwogIHotaW5kZXg6IDE7Cn0KCi5sb2NhbGVTZWxlY3RvciB7CiAgOjp2LWRlZXAgLnBvcG92ZXItaW5uZXIgewogICAgcGFkZGluZzogNTBweCAwOwogIH0KCiAgOjp2LWRlZXAgLnBvcG92ZXItYXJyb3cgewogICAgZGlzcGxheTogbm9uZTsKICB9CgogIDo6di1kZWVwIC5wb3BvdmVyOmZvY3VzIHsKICAgIG91dGxpbmU6IDA7CiAgfQoKICBsaSB7CiAgICBwYWRkaW5nOiA4cHggMjBweDsKCiAgICAmOmhvdmVyIHsKICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0tcHJpbWFyeS1ob3Zlci1iZyk7CiAgICAgIGNvbG9yOiB2YXIoLS1wcmltYXJ5LWhvdmVyLXRleHQpOwogICAgICB0ZXh0LWRlY29yYXRpb246IG5vbmU7CiAgICB9CiAgfQp9CgouZHJhZy1zdGFydCB7CiAgei1pbmRleDogMTAwMDsKICBvcGFjaXR5OiAwLjU7CiAgdHJhbnNpdGlvbjogb3BhY2l0eSAuM3MgZWFzZTsKfQoKLmRyYWctZW5kIHsKICBvcGFjaXR5OiAxOwp9Cg=="},{"version":3,"sources":["default.vue"],"names":[],"mappings":";AAmZA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA","file":"default.vue","sourceRoot":"node_modules/@rancher/shell/layouts","sourcesContent":["<script>\nimport { mapState, mapGetters } from 'vuex';\nimport {\n  mapPref,\n  AFTER_LOGIN_ROUTE,\n  THEME_SHORTCUT\n} from '@shell/store/prefs';\nimport ActionMenu from '@shell/components/ActionMenu';\nimport GrowlManager from '@shell/components/GrowlManager';\nimport WindowManager from '@shell/components/nav/WindowManager';\nimport PromptRemove from '@shell/components/PromptRemove';\nimport PromptRestore from '@shell/components/PromptRestore';\nimport PromptModal from '@shell/components/PromptModal';\nimport AssignTo from '@shell/components/AssignTo';\nimport Header from '@shell/components/nav/Header';\nimport Inactivity from '@shell/components/Inactivity';\nimport Brand from '@shell/mixins/brand';\nimport FixedBanner from '@shell/components/FixedBanner';\nimport AwsComplianceBanner from '@shell/components/AwsComplianceBanner';\nimport AzureWarning from '@shell/components/auth/AzureWarning';\nimport DraggableZone from '@shell/components/DraggableZone';\nimport { MANAGEMENT } from '@shell/config/types';\nimport isEqual from 'lodash/isEqual';\nimport { markSeenReleaseNotes } from '@shell/utils/version';\nimport PageHeaderActions from '@shell/mixins/page-actions';\nimport BrowserTabVisibility from '@shell/mixins/browser-tab-visibility';\nimport { getClusterFromRoute, getProductFromRoute } from '@shell/middleware/authenticated';\nimport { BOTTOM } from '@shell/utils/position';\nimport SideNav from '@shell/components/SideNav';\nimport { BLANK_CLUSTER } from '@shell/store/store-types.js';\n\nconst SET_LOGIN_ACTION = 'set-as-login';\n\nexport default {\n\n  components: {\n    PromptRemove,\n    PromptRestore,\n    AssignTo,\n    PromptModal,\n    Header,\n    ActionMenu,\n    GrowlManager,\n    WindowManager,\n    FixedBanner,\n    AwsComplianceBanner,\n    AzureWarning,\n    DraggableZone,\n    Inactivity,\n    SideNav,\n  },\n\n  mixins: [PageHeaderActions, Brand, BrowserTabVisibility],\n\n  // Note - This will not run on route change\n  data() {\n    return {\n      noLocaleShortcut: process.env.dev || false,\n      wantNavSync:      false,\n      unwatchPin:       undefined,\n      wmPin:            null,\n      draggable:        false,\n    };\n  },\n\n  // Note - These will run on route change\n  middleware: [\n    'authenticated'\n  ],\n\n  computed: {\n    ...mapState(['managementReady', 'clusterReady']),\n    ...mapGetters(['clusterId', 'currentProduct', 'isRancherInHarvester', 'showTopLevelMenu']),\n\n    afterLoginRoute: mapPref(AFTER_LOGIN_ROUTE),\n\n    themeShortcut: mapPref(THEME_SHORTCUT),\n\n    pageActions() {\n      const pageActions = [];\n      const product = this.currentProduct;\n\n      if ( !product ) {\n        return [];\n      }\n\n      // Only show for Cluster Explorer or Global Apps (not configuration)\n      const canSetAsHome = product.inStore === 'cluster' || (product.inStore === 'management' && product.category !== 'configuration') || this.isRancherInHarvester;\n\n      if (canSetAsHome) {\n        pageActions.push({\n          labelKey: 'nav.header.setLoginPage',\n          action:   SET_LOGIN_ACTION\n        });\n      }\n\n      return pageActions;\n    },\n\n    unmatchedRoute() {\n      return !this.$route?.matched?.length;\n    },\n\n    /**\n     * When navigation involves unloading one cluster and loading another, clusterReady toggles from true->false->true in middleware (before new route content renders)\n     * Prevent rendering \"outlet\" until the route changes to avoid re-rendering old route content after its cluster is unloaded\n     */\n    clusterAndRouteReady() {\n      const targetRoute = this.$store.getters['targetRoute'];\n      const routeReady = targetRoute ? this.currentProduct?.name === getProductFromRoute(this.$route) && this.currentProduct?.name === getProductFromRoute(targetRoute) : this.currentProduct?.name === getProductFromRoute(this.$route);\n\n      return this.clusterReady &&\n        this.clusterId === getClusterFromRoute(this.$route) && routeReady;\n    },\n\n    pinClass() {\n      return `pin-${ this.wmPin }`;\n    },\n\n  },\n\n  watch: {\n    clusterId(a, b) {\n      if ( !isEqual(a, b) ) {\n        // Store the last visited route when the cluster changes\n        this.setClusterAsLastRoute();\n      }\n    },\n\n    async currentProduct(a, b) {\n      if ( !isEqual(a, b) ) {\n        if ((a.inStore !== b.inStore || a.inStore !== 'cluster') && this.clusterId && a.name) {\n          const route = {\n            name:   'c-cluster-product',\n            params: {\n              cluster: this.clusterId,\n              product: a.name,\n            }\n          };\n\n          await this.$store.dispatch('prefs/setLastVisited', route);\n        }\n      }\n    },\n  },\n\n  async created() {\n    await this.$store.dispatch('prefs/setLastVisited', this.$route);\n  },\n\n  mounted() {\n    this.wmPin = window.localStorage.getItem('wm-pin') || BOTTOM;\n\n    // two-way binding this.wmPin <-> draggableZone.pin\n    this.$refs.draggableZone.pin = this.wmPin;\n    this.unwatchPin = this.$watch('$refs.draggableZone.pin', (pin) => {\n      this.wmPin = pin;\n    });\n  },\n\n  unmounted() {\n    this.unwatchPin();\n  },\n\n  methods: {\n    async setClusterAsLastRoute() {\n      if (!this.clusterId || this.clusterId === BLANK_CLUSTER) {\n        return;\n      }\n      const route = {\n        name:   this.$route.name,\n        params: {\n          ...this.$route.params,\n          cluster: this.clusterId,\n        }\n      };\n\n      await this.$store.dispatch('prefs/setLastVisited', route);\n    },\n\n    handlePageAction(action) {\n      if (action.action === SET_LOGIN_ACTION) {\n        this.afterLoginRoute = this.getLoginRoute();\n        // Mark release notes as seen, so that the login route is honoured\n        markSeenReleaseNotes(this.$store);\n      }\n    },\n\n    getLoginRoute() {\n      return {\n        name:   this.$route.name,\n        params: this.$route.params\n      };\n    },\n\n    toggleNoneLocale() {\n      this.$store.dispatch('i18n/toggleNone');\n    },\n\n    toggleTheme() {\n      this.$store.dispatch('prefs/toggleTheme');\n    },\n\n    wheresMyDebugger() {\n      // vue-shortkey is preventing F8 from passing through to the browser... this works for now.\n      // eslint-disable-next-line no-debugger\n      debugger;\n    },\n\n    async toggleShell() {\n      const clusterId = this.$route.params.cluster;\n\n      if ( !clusterId ) {\n        return;\n      }\n\n      const cluster = await this.$store.dispatch('management/find', {\n        type: MANAGEMENT.CLUSTER,\n        id:   clusterId,\n      });\n\n      if (!cluster ) {\n        return;\n      }\n\n      cluster.openShell();\n    },\n  }\n};\n</script>\n\n<template>\n  <div class=\"dashboard-root\">\n    <FixedBanner :header=\"true\" />\n    <AwsComplianceBanner v-if=\"managementReady\" />\n    <AzureWarning v-if=\"managementReady\" />\n    <div\n      v-if=\"managementReady\"\n      class=\"dashboard-content\"\n      :class=\"{[pinClass]: true, 'dashboard-padding-left': showTopLevelMenu}\"\n    >\n      <Header />\n      <SideNav\n        v-if=\"clusterReady\"\n        class=\"default-side-nav\"\n      />\n      <main\n        v-if=\"clusterAndRouteReady\"\n        class=\"main-layout\"\n      >\n        <nuxt class=\"outlet\" />\n        <ActionMenu />\n        <PromptRemove />\n        <PromptRestore />\n        <AssignTo />\n        <PromptModal />\n        <button\n          v-if=\"noLocaleShortcut\"\n          v-shortkey.once=\"['shift','l']\"\n          class=\"hide\"\n          @shortkey=\"toggleNoneLocale()\"\n        />\n        <button\n          v-if=\"themeShortcut\"\n          v-shortkey.once=\"['shift','t']\"\n          class=\"hide\"\n          @shortkey=\"toggleTheme()\"\n        />\n        <button\n          v-shortkey.once=\"['f8']\"\n          class=\"hide\"\n          @shortkey=\"wheresMyDebugger()\"\n        />\n        <button\n          v-shortkey.once=\"['`']\"\n          class=\"hide\"\n          @shortkey=\"toggleShell\"\n        />\n      </main>\n      <!-- Ensure there's an outlet to show the error (404) page -->\n      <main\n        v-else-if=\"unmatchedRoute\"\n        class=\"main-layout\"\n      >\n        <nuxt class=\"outlet\" />\n      </main>\n      <div\n        v-if=\"$refs.draggableZone\"\n        class=\"wm\"\n        :class=\"{\n          'drag-end': !$refs.draggableZone.drag.active,\n          'drag-start': $refs.draggableZone.drag.active,\n        }\"\n        :draggable=\"draggable\"\n        @dragstart=\"$refs.draggableZone.onDragStart($event)\"\n        @dragend=\"$refs.draggableZone.onDragEnd($event)\"\n      >\n        <WindowManager @draggable=\"draggable=$event\" />\n      </div>\n    </div>\n    <FixedBanner :footer=\"true\" />\n    <GrowlManager />\n    <Inactivity />\n    <DraggableZone ref=\"draggableZone\" />\n  </div>\n</template>\n<style lang=\"scss\">\n  .dashboard-root {\n    display: flex;\n    flex-direction: column;\n    height: 100vh;\n  }\n\n  .dashboard-content {\n    display: grid;\n    position: relative;\n    flex: 1 1 auto;\n    overflow-y: auto;\n    min-height: 0px;\n\n    &.dashboard-padding-left {\n    padding-left: $app-bar-collapsed-width;\n\n      .overlay-content-mode {\n        left: calc(var(--nav-width) + $app-bar-collapsed-width);\n      }\n   }\n\n    &.pin-right {\n      grid-template-areas:\n        \"header  header  header\"\n        \"nav      main     wm\";\n      grid-template-rows:    var(--header-height) auto;\n      grid-template-columns: var(--nav-width)     auto var(--wm-width, 0px);\n    }\n\n    &.pin-bottom {\n      grid-template-areas:\n        \"header  header\"\n        \"nav       main\"\n        \"wm         wm\";\n      grid-template-rows:    var(--header-height) auto  var(--wm-height, 0px);\n      grid-template-columns: var(--nav-width)     auto;\n    }\n\n    &.pin-left {\n      grid-template-areas:\n        \"header  header  header\"\n        \"wm       nav     main\";\n      grid-template-rows:    var(--header-height) auto;\n      grid-template-columns: var(--wm-width, 0px) var(--nav-width) auto;\n    }\n\n    > HEADER {\n      grid-area: header;\n    }\n\n    .default-side-nav {\n      grid-area: nav;\n    }\n  }\n\n  .wm {\n    grid-area: wm;\n    overflow-y: hidden;\n    z-index: 1;\n  }\n\n  .localeSelector {\n    ::v-deep .popover-inner {\n      padding: 50px 0;\n    }\n\n    ::v-deep .popover-arrow {\n      display: none;\n    }\n\n    ::v-deep .popover:focus {\n      outline: 0;\n    }\n\n    li {\n      padding: 8px 20px;\n\n      &:hover {\n        background-color: var(--primary-hover-bg);\n        color: var(--primary-hover-text);\n        text-decoration: none;\n      }\n    }\n  }\n\n  .drag-start {\n    z-index: 1000;\n    opacity: 0.5;\n    transition: opacity .3s ease;\n  }\n\n  .drag-end {\n    opacity: 1;\n  }\n</style>\n"]}]}