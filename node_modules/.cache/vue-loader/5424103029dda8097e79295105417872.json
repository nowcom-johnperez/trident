{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/networking.k8s.io.networkpolicy/PolicyRuleTarget.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/networking.k8s.io.networkpolicy/PolicyRuleTarget.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgppbXBvcnQgeyBMYWJlbGVkSW5wdXQgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0xhYmVsZWRJbnB1dCc7CmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7CmltcG9ydCB7IF9FRElUIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgTWF0Y2hFeHByZXNzaW9ucyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL01hdGNoRXhwcmVzc2lvbnMnOwppbXBvcnQgeyBjb252ZXJ0LCBtYXRjaGluZywgc2ltcGxpZnkgfSBmcm9tICdAc2hlbGwvdXRpbHMvc2VsZWN0b3InOwppbXBvcnQgeyBQT0QgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IEFycmF5TGlzdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0FycmF5TGlzdCc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CmltcG9ydCB0aHJvdHRsZSBmcm9tICdsb2Rhc2gvdGhyb3R0bGUnOwppbXBvcnQgeyBpc1ZhbGlkQ0lEUiB9IGZyb20gJ0BzaGVsbC91dGlscy92YWxpZGF0b3JzL2NpZHInOwoKY29uc3QgVEFSR0VUX09QVElPTlMgPSB7CiAgSVBfQkxPQ0s6ICAgICAgICAgICAgICAgICAgICdpcEJsb2NrJywKICBOQU1FU1BBQ0VfU0VMRUNUT1I6ICAgICAgICAgJ25hbWVzcGFjZVNlbGVjdG9yJywKICBQT0RfU0VMRUNUT1I6ICAgICAgICAgICAgICAgJ3BvZFNlbGVjdG9yJywKICBOQU1FU1BBQ0VfQU5EX1BPRF9TRUxFQ1RPUjogJ25hbWVzcGFjZUFuZFBvZFNlbGVjdG9yJywKfTsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBcnJheUxpc3QsIEJhbm5lciwgTGFiZWxlZElucHV0LCBMYWJlbGVkU2VsZWN0LCBNYXRjaEV4cHJlc3Npb25zCiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9LAogICAgfSwKICAgIG1vZGU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiBfRURJVCwKICAgIH0sCiAgICB0eXBlOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ2luZ3Jlc3MnCiAgICB9LAogICAgbmFtZXNwYWNlOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBhbGxQb2RzOiB7CiAgICAgIHR5cGU6ICAgIEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9LAogICAgfSwKICAgIGFsbE5hbWVzcGFjZXM6IHsKICAgICAgdHlwZTogICAgQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0sCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIGlmICghdGhpcy52YWx1ZVtUQVJHRVRfT1BUSU9OUy5JUF9CTE9DS10gJiYKICAgICAgIXRoaXMudmFsdWVbVEFSR0VUX09QVElPTlMuUE9EX1NFTEVDVE9SXSAmJgogICAgICAhdGhpcy52YWx1ZVtUQVJHRVRfT1BUSU9OUy5OQU1FU1BBQ0VfU0VMRUNUT1JdICYmCiAgICAgICF0aGlzLnZhbHVlW1RBUkdFVF9PUFRJT05TLk5BTUVTUEFDRV9BTkRfUE9EX1NFTEVDVE9SXQogICAgKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgVEFSR0VUX09QVElPTlMuSVBfQkxPQ0ssIHt9KTsKICAgICAgfSk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgcG9ydE9wdGlvbnM6ICAgICAgICBbJ1RDUCcsICdVRFAnXSwKICAgICAgbWF0Y2hpbmdQb2RzOiAgICAgICB7fSwKICAgICAgbWF0Y2hpbmdOYW1lc3BhY2VzOiB7fSwKICAgICAgaW52YWxpZENpZHI6ICAgICAgICBudWxsLAogICAgICBpbnZhbGlkQ2lkcnM6ICAgICAgIFtdLAogICAgICBQT0QsCiAgICAgIFRBUkdFVF9PUFRJT05TLAogICAgICB0YXJnZXRPcHRpb25zOiAgICAgIE9iamVjdC52YWx1ZXMoVEFSR0VUX09QVElPTlMpLAogICAgICB0aHJvdHRsZVRpbWU6ICAgICAgIDI1MCwKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgcG9kU2VsZWN0b3JFeHByZXNzaW9uczogewogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIGNvbnZlcnQoCiAgICAgICAgICB0aGlzLnZhbHVlW1RBUkdFVF9PUFRJT05TLlBPRF9TRUxFQ1RPUl0/Lm1hdGNoTGFiZWxzIHx8IHt9LAogICAgICAgICAgdGhpcy52YWx1ZVtUQVJHRVRfT1BUSU9OUy5QT0RfU0VMRUNUT1JdPy5tYXRjaEV4cHJlc3Npb25zIHx8IFtdCiAgICAgICAgKTsKICAgICAgfSwKICAgICAgc2V0KHBvZFNlbGVjdG9yRXhwcmVzc2lvbnMpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgVEFSR0VUX09QVElPTlMuUE9EX1NFTEVDVE9SLCBzaW1wbGlmeShwb2RTZWxlY3RvckV4cHJlc3Npb25zKSk7CiAgICAgIH0KICAgIH0sCiAgICBuYW1lc3BhY2VTZWxlY3RvckV4cHJlc3Npb25zOiB7CiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gY29udmVydCgKICAgICAgICAgIHRoaXMudmFsdWVbVEFSR0VUX09QVElPTlMuTkFNRVNQQUNFX1NFTEVDVE9SXT8ubWF0Y2hMYWJlbHMgfHwge30sCiAgICAgICAgICB0aGlzLnZhbHVlW1RBUkdFVF9PUFRJT05TLk5BTUVTUEFDRV9TRUxFQ1RPUl0/Lm1hdGNoRXhwcmVzc2lvbnMgfHwgW10KICAgICAgICApOwogICAgICB9LAogICAgICBzZXQobmFtZXNwYWNlU2VsZWN0b3JFeHByZXNzaW9ucykgewogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCBUQVJHRVRfT1BUSU9OUy5OQU1FU1BBQ0VfU0VMRUNUT1IsIHNpbXBsaWZ5KG5hbWVzcGFjZVNlbGVjdG9yRXhwcmVzc2lvbnMpKTsKICAgICAgfQogICAgfSwKICAgIHNlbGVjdFRhcmdldE9wdGlvbnMoKSB7CiAgICAgIGNvbnN0IHNlbGVjdFRhcmdldE9wdGlvbnMgPSBbXTsKCiAgICAgIGZvciAoY29uc3Qgb3B0aW9uIG9mIHRoaXMudGFyZ2V0T3B0aW9ucykgewogICAgICAgIHNlbGVjdFRhcmdldE9wdGlvbnMucHVzaCh7CiAgICAgICAgICBsYWJlbDogdGhpcy50KGBuZXR3b3JrcG9saWN5LnJ1bGVzLiR7IG9wdGlvbiB9LmxhYmVsYCksCiAgICAgICAgICB2YWx1ZTogb3B0aW9uLAogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gc2VsZWN0VGFyZ2V0T3B0aW9uczsKICAgIH0sCiAgICB0YXJnZXRUeXBlOiB7CiAgICAgIGdldCgpIHsKICAgICAgICBmb3IgKGNvbnN0IG9wdGlvbiBvZiB0aGlzLnRhcmdldE9wdGlvbnMpIHsKICAgICAgICAgIGlmICh0aGlzLnZhbHVlW1RBUkdFVF9PUFRJT05TLk5BTUVTUEFDRV9BTkRfUE9EX1NFTEVDVE9SXSB8fCAodGhpcy52YWx1ZVtUQVJHRVRfT1BUSU9OUy5OQU1FU1BBQ0VfU0VMRUNUT1JdICYmIHRoaXMudmFsdWVbVEFSR0VUX09QVElPTlMuUE9EX1NFTEVDVE9SXSkpIHsKICAgICAgICAgICAgcmV0dXJuIFRBUkdFVF9PUFRJT05TLk5BTUVTUEFDRV9BTkRfUE9EX1NFTEVDVE9SOwogICAgICAgICAgfQogICAgICAgICAgaWYgKHRoaXMudmFsdWVbb3B0aW9uXSkgewogICAgICAgICAgICByZXR1cm4gb3B0aW9uOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0sCiAgICAgIHNldCh0YXJnZXRUeXBlKSB7CiAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMudmFsdWUsIFRBUkdFVF9PUFRJT05TLklQX0JMT0NLKTsKICAgICAgICB0aGlzLiRkZWxldGUodGhpcy52YWx1ZSwgVEFSR0VUX09QVElPTlMuTkFNRVNQQUNFX1NFTEVDVE9SKTsKICAgICAgICB0aGlzLiRkZWxldGUodGhpcy52YWx1ZSwgVEFSR0VUX09QVElPTlMuUE9EX1NFTEVDVE9SKTsKICAgICAgICB0aGlzLiRkZWxldGUodGhpcy52YWx1ZSwgVEFSR0VUX09QVElPTlMuTkFNRVNQQUNFX0FORF9QT0RfU0VMRUNUT1IpOwogICAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCB0YXJnZXRUeXBlLCB7fSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVNYXRjaGVzKCkgewogICAgICByZXR1cm4gewogICAgICAgIGhhbmRsZXI6IHRocm90dGxlKGZ1bmN0aW9uKCkgewogICAgICAgICAgdGhpcy5tYXRjaGluZ05hbWVzcGFjZXMgPSB0aGlzLmdldE1hdGNoaW5nTmFtZXNwYWNlcygpOwogICAgICAgICAgdGhpcy5tYXRjaGluZ1BvZHMgPSB0aGlzLmdldE1hdGNoaW5nUG9kcygpOwogICAgICAgIH0sIHRoaXMudGhyb3R0bGUsIHsgbGVhZGluZzogdHJ1ZSB9KSwKICAgICAgICBpbW1lZGlhdGU6IHRydWUKICAgICAgfTsKICAgIH0sCiAgICBtYXRjaGluZ05hbWVzcGFjZXNBbmRQb2RzKCkgewogICAgICByZXR1cm4gewogICAgICAgIHBvbGljeU5hbWVzcGFjZTogdGhpcy5uYW1lc3BhY2UsCiAgICAgICAgLi4uT2JqZWN0LmtleXModGhpcy5tYXRjaGluZ05hbWVzcGFjZXMpLnJlZHVjZSgoYWNjLCBrKSA9PiAoeyAuLi5hY2MsIFtgJHsgayB9TmFtZXNwYWNlc2BdOiB0aGlzLm1hdGNoaW5nTmFtZXNwYWNlc1trXSB9KSwge30pLAogICAgICAgIC4uLk9iamVjdC5rZXlzKHRoaXMubWF0Y2hpbmdQb2RzKS5yZWR1Y2UoKGFjYywgaykgPT4gKHsgLi4uYWNjLCBbYCR7IGsgfVBvZHNgXTogdGhpcy5tYXRjaGluZ1BvZHNba10gfSksIHt9KSwKICAgICAgfTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBuYW1lc3BhY2U6ICAgICAgICAgICAgICAgICAgICAndXBkYXRlTWF0Y2hlcycsCiAgICAndmFsdWUucG9kU2VsZWN0b3InOiAgICAgICAgICAndXBkYXRlTWF0Y2hlcycsCiAgICAndmFsdWUubmFtZXNwYWNlU2VsZWN0b3InOiAgICAndXBkYXRlTWF0Y2hlcycsCiAgICAndmFsdWUuaXBCbG9jay5jaWRyJzogICAgICAgICAndmFsaWRhdGVDSURSJywKICAgICd2YWx1ZS5pcEJsb2NrLmV4Y2VwdCc6ICAgICAgICd2YWxpZGF0ZUNJRFInLAogICAgcG9kU2VsZWN0b3JFeHByZXNzaW9uczogICAgICAgJ3VwZGF0ZU1hdGNoZXMnLAogICAgbmFtZXNwYWNlU2VsZWN0b3JFeHByZXNzaW9uczogJ3VwZGF0ZU1hdGNoZXMnLAogIH0sCiAgbWV0aG9kczogewogICAgdmFsaWRhdGVDSURSKCkgewogICAgICBjb25zdCBleGNlcHRDaWRycyA9IHRoaXMudmFsdWVbVEFSR0VUX09QVElPTlMuSVBfQkxPQ0tdPy5leGNlcHQgfHwgW107CgogICAgICB0aGlzLmludmFsaWRDaWRycyA9IGV4Y2VwdENpZHJzCiAgICAgICAgLmZpbHRlcigoY2lkcikgPT4gIWlzVmFsaWRDSURSKGNpZHIpKQogICAgICAgIC5tYXAoKGludmFsaWRDaWRyKSA9PiBpbnZhbGlkQ2lkciB8fCAnPGJsYW5rPicpOwoKICAgICAgaWYgKHRoaXMudmFsdWVbVEFSR0VUX09QVElPTlMuSVBfQkxPQ0tdPy5jaWRyICYmICFpc1ZhbGlkQ0lEUih0aGlzLnZhbHVlW1RBUkdFVF9PUFRJT05TLklQX0JMT0NLXS5jaWRyKSkgewogICAgICAgIHRoaXMuaW52YWxpZENpZHIgPSB0aGlzLnZhbHVlW1RBUkdFVF9PUFRJT05TLklQX0JMT0NLXS5jaWRyOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuaW52YWxpZENpZHIgPSBudWxsOwogICAgICB9CiAgICB9LAogICAgZ2V0TWF0Y2hpbmdQb2RzKCkgewogICAgICBjb25zdCBuYW1lc3BhY2VzID0gdGhpcy50YXJnZXRUeXBlID09PSBUQVJHRVRfT1BUSU9OUy5OQU1FU1BBQ0VfQU5EX1BPRF9TRUxFQ1RPUiA/IHRoaXMubWF0Y2hpbmdOYW1lc3BhY2VzLm1hdGNoZXMgOiBbeyBpZDogdGhpcy5uYW1lc3BhY2UgfV07CiAgICAgIGNvbnN0IGFsbEluTmFtZXNwYWNlID0gdGhpcy5hbGxQb2RzLmZpbHRlcigocG9kKSA9PiBuYW1lc3BhY2VzLnNvbWUoKG5zKSA9PiBucy5pZCA9PT0gcG9kLm1ldGFkYXRhLm5hbWVzcGFjZSkpOwogICAgICBjb25zdCBtYXRjaCA9IG1hdGNoaW5nKGFsbEluTmFtZXNwYWNlLCB0aGlzLnBvZFNlbGVjdG9yRXhwcmVzc2lvbnMpOwogICAgICBjb25zdCBtYXRjaGVkID0gbWF0Y2gubGVuZ3RoIHx8IDA7CiAgICAgIGNvbnN0IHNhbXBsZSA9IG1hdGNoWzBdPy5uYW1lRGlzcGxheTsKCiAgICAgIHJldHVybiB7CiAgICAgICAgbWF0Y2hlZCwKICAgICAgICBtYXRjaGVzOiBtYXRjaCwKICAgICAgICBub25lOiAgICBtYXRjaGVkID09PSAwLAogICAgICAgIHNhbXBsZSwKICAgICAgICB0b3RhbDogICBhbGxJbk5hbWVzcGFjZS5sZW5ndGgsCiAgICAgIH07CiAgICB9LAogICAgZ2V0TWF0Y2hpbmdOYW1lc3BhY2VzKCkgewogICAgICBjb25zdCBhbGxOYW1lc3BhY2VzID0gdGhpcy5hbGxOYW1lc3BhY2VzOwogICAgICBjb25zdCBtYXRjaCA9IG1hdGNoaW5nKGFsbE5hbWVzcGFjZXMsIHRoaXMubmFtZXNwYWNlU2VsZWN0b3JFeHByZXNzaW9ucyk7CiAgICAgIGNvbnN0IG1hdGNoZWQgPSBtYXRjaC5sZW5ndGggfHwgMDsKICAgICAgY29uc3Qgc2FtcGxlID0gbWF0Y2hbMF0/Lm5hbWVEaXNwbGF5OwoKICAgICAgcmV0dXJuIHsKICAgICAgICBtYXRjaGVkLAogICAgICAgIG1hdGNoZXM6IG1hdGNoLAogICAgICAgIG5vbmU6ICAgIG1hdGNoZWQgPT09IDAsCiAgICAgICAgc2FtcGxlLAogICAgICAgIHRvdGFsOiAgIGFsbE5hbWVzcGFjZXMubGVuZ3RoLAogICAgICB9OwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["PolicyRuleTarget.vue"],"names":[],"mappings":";;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PolicyRuleTarget.vue","sourceRoot":"node_modules/@rancher/shell/edit/networking.k8s.io.networkpolicy","sourcesContent":["<script>\n\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { _EDIT } from '@shell/config/query-params';\nimport MatchExpressions from '@shell/components/form/MatchExpressions';\nimport { convert, matching, simplify } from '@shell/utils/selector';\nimport { POD } from '@shell/config/types';\nimport ArrayList from '@shell/components/form/ArrayList';\nimport { Banner } from '@components/Banner';\nimport throttle from 'lodash/throttle';\nimport { isValidCIDR } from '@shell/utils/validators/cidr';\n\nconst TARGET_OPTIONS = {\n  IP_BLOCK:                   'ipBlock',\n  NAMESPACE_SELECTOR:         'namespaceSelector',\n  POD_SELECTOR:               'podSelector',\n  NAMESPACE_AND_POD_SELECTOR: 'namespaceAndPodSelector',\n};\n\nexport default {\n  components: {\n    ArrayList, Banner, LabeledInput, LabeledSelect, MatchExpressions\n  },\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      },\n    },\n    mode: {\n      type:    String,\n      default: _EDIT,\n    },\n    type: {\n      type:    String,\n      default: 'ingress'\n    },\n    namespace: {\n      type:    String,\n      default: ''\n    },\n    allPods: {\n      type:    Array,\n      default: () => {\n        return [];\n      },\n    },\n    allNamespaces: {\n      type:    Array,\n      default: () => {\n        return [];\n      },\n    },\n  },\n  data() {\n    if (!this.value[TARGET_OPTIONS.IP_BLOCK] &&\n      !this.value[TARGET_OPTIONS.POD_SELECTOR] &&\n      !this.value[TARGET_OPTIONS.NAMESPACE_SELECTOR] &&\n      !this.value[TARGET_OPTIONS.NAMESPACE_AND_POD_SELECTOR]\n    ) {\n      this.$nextTick(() => {\n        this.$set(this.value, TARGET_OPTIONS.IP_BLOCK, {});\n      });\n    }\n\n    return {\n      portOptions:        ['TCP', 'UDP'],\n      matchingPods:       {},\n      matchingNamespaces: {},\n      invalidCidr:        null,\n      invalidCidrs:       [],\n      POD,\n      TARGET_OPTIONS,\n      targetOptions:      Object.values(TARGET_OPTIONS),\n      throttleTime:       250,\n    };\n  },\n  computed: {\n    podSelectorExpressions: {\n      get() {\n        return convert(\n          this.value[TARGET_OPTIONS.POD_SELECTOR]?.matchLabels || {},\n          this.value[TARGET_OPTIONS.POD_SELECTOR]?.matchExpressions || []\n        );\n      },\n      set(podSelectorExpressions) {\n        this.$set(this.value, TARGET_OPTIONS.POD_SELECTOR, simplify(podSelectorExpressions));\n      }\n    },\n    namespaceSelectorExpressions: {\n      get() {\n        return convert(\n          this.value[TARGET_OPTIONS.NAMESPACE_SELECTOR]?.matchLabels || {},\n          this.value[TARGET_OPTIONS.NAMESPACE_SELECTOR]?.matchExpressions || []\n        );\n      },\n      set(namespaceSelectorExpressions) {\n        this.$set(this.value, TARGET_OPTIONS.NAMESPACE_SELECTOR, simplify(namespaceSelectorExpressions));\n      }\n    },\n    selectTargetOptions() {\n      const selectTargetOptions = [];\n\n      for (const option of this.targetOptions) {\n        selectTargetOptions.push({\n          label: this.t(`networkpolicy.rules.${ option }.label`),\n          value: option,\n        });\n      }\n\n      return selectTargetOptions;\n    },\n    targetType: {\n      get() {\n        for (const option of this.targetOptions) {\n          if (this.value[TARGET_OPTIONS.NAMESPACE_AND_POD_SELECTOR] || (this.value[TARGET_OPTIONS.NAMESPACE_SELECTOR] && this.value[TARGET_OPTIONS.POD_SELECTOR])) {\n            return TARGET_OPTIONS.NAMESPACE_AND_POD_SELECTOR;\n          }\n          if (this.value[option]) {\n            return option;\n          }\n        }\n\n        return null;\n      },\n      set(targetType) {\n        this.$delete(this.value, TARGET_OPTIONS.IP_BLOCK);\n        this.$delete(this.value, TARGET_OPTIONS.NAMESPACE_SELECTOR);\n        this.$delete(this.value, TARGET_OPTIONS.POD_SELECTOR);\n        this.$delete(this.value, TARGET_OPTIONS.NAMESPACE_AND_POD_SELECTOR);\n        this.$nextTick(() => {\n          this.$set(this.value, targetType, {});\n        });\n      }\n    },\n    updateMatches() {\n      return {\n        handler: throttle(function() {\n          this.matchingNamespaces = this.getMatchingNamespaces();\n          this.matchingPods = this.getMatchingPods();\n        }, this.throttle, { leading: true }),\n        immediate: true\n      };\n    },\n    matchingNamespacesAndPods() {\n      return {\n        policyNamespace: this.namespace,\n        ...Object.keys(this.matchingNamespaces).reduce((acc, k) => ({ ...acc, [`${ k }Namespaces`]: this.matchingNamespaces[k] }), {}),\n        ...Object.keys(this.matchingPods).reduce((acc, k) => ({ ...acc, [`${ k }Pods`]: this.matchingPods[k] }), {}),\n      };\n    }\n  },\n  watch: {\n    namespace:                    'updateMatches',\n    'value.podSelector':          'updateMatches',\n    'value.namespaceSelector':    'updateMatches',\n    'value.ipBlock.cidr':         'validateCIDR',\n    'value.ipBlock.except':       'validateCIDR',\n    podSelectorExpressions:       'updateMatches',\n    namespaceSelectorExpressions: 'updateMatches',\n  },\n  methods: {\n    validateCIDR() {\n      const exceptCidrs = this.value[TARGET_OPTIONS.IP_BLOCK]?.except || [];\n\n      this.invalidCidrs = exceptCidrs\n        .filter((cidr) => !isValidCIDR(cidr))\n        .map((invalidCidr) => invalidCidr || '<blank>');\n\n      if (this.value[TARGET_OPTIONS.IP_BLOCK]?.cidr && !isValidCIDR(this.value[TARGET_OPTIONS.IP_BLOCK].cidr)) {\n        this.invalidCidr = this.value[TARGET_OPTIONS.IP_BLOCK].cidr;\n      } else {\n        this.invalidCidr = null;\n      }\n    },\n    getMatchingPods() {\n      const namespaces = this.targetType === TARGET_OPTIONS.NAMESPACE_AND_POD_SELECTOR ? this.matchingNamespaces.matches : [{ id: this.namespace }];\n      const allInNamespace = this.allPods.filter((pod) => namespaces.some((ns) => ns.id === pod.metadata.namespace));\n      const match = matching(allInNamespace, this.podSelectorExpressions);\n      const matched = match.length || 0;\n      const sample = match[0]?.nameDisplay;\n\n      return {\n        matched,\n        matches: match,\n        none:    matched === 0,\n        sample,\n        total:   allInNamespace.length,\n      };\n    },\n    getMatchingNamespaces() {\n      const allNamespaces = this.allNamespaces;\n      const match = matching(allNamespaces, this.namespaceSelectorExpressions);\n      const matched = match.length || 0;\n      const sample = match[0]?.nameDisplay;\n\n      return {\n        matched,\n        matches: match,\n        none:    matched === 0,\n        sample,\n        total:   allNamespaces.length,\n      };\n    },\n  }\n};\n</script>\n\n<template>\n  <div class=\"rule\">\n    <div class=\"row mb-20\">\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"targetType\"\n          data-testid=\"labeled-select-type-selector\"\n          :mode=\"mode\"\n          :tooltip=\"targetType === TARGET_OPTIONS.NAMESPACE_AND_POD_SELECTOR ? t('networkpolicy.selectors.matchingNamespacesAndPods.tooltip') : null\"\n          :options=\"selectTargetOptions\"\n          :multiple=\"false\"\n          :label=\"t('networkpolicy.rules.type')\"\n        />\n      </div>\n    </div>\n    <div v-if=\"targetType === TARGET_OPTIONS.IP_BLOCK\">\n      <div class=\"row\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value[TARGET_OPTIONS.IP_BLOCK].cidr\"\n            data-testid=\"labeled-input-ip-block-selector\"\n            :mode=\"mode\"\n            :placeholder=\"t('networkpolicy.rules.ipBlock.cidr.placeholder')\"\n            :label=\"t('networkpolicy.rules.ipBlock.cidr.label')\"\n          />\n        </div>\n      </div>\n      <div\n        v-if=\"invalidCidr\"\n        class=\"row\"\n      >\n        <div class=\"col span-12\">\n          <Banner color=\"error\">\n            <t k=\"networkpolicy.rules.ipBlock.invalidCidr\" />\n          </Banner>\n        </div>\n      </div>\n      <div class=\"row mt-20\">\n        <div class=\"col span-12\">\n          <ArrayList\n            v-model=\"value[TARGET_OPTIONS.IP_BLOCK].except\"\n            :add-label=\"t('networkpolicy.rules.ipBlock.addExcept')\"\n            :mode=\"mode\"\n            :show-header=\"true\"\n            :value-label=\"t('networkpolicy.rules.ipBlock.exceptions')\"\n            :value-placeholder=\"t('networkpolicy.rules.ipBlock.cidr.placeholder')\"\n          />\n        </div>\n      </div>\n      <div\n        v-if=\"invalidCidrs.length\"\n        class=\"row mb-10\"\n      >\n        <div class=\"col span-12\">\n          <Banner color=\"error\">\n            <t k=\"networkpolicy.rules.ipBlock.invalidExceptionCidrs\" />{{ invalidCidrs.join(', ') }}\n          </Banner>\n        </div>\n      </div>\n    </div>\n    <div v-if=\"targetType === TARGET_OPTIONS.POD_SELECTOR\">\n      <div class=\"row\">\n        <div class=\"col span-12\">\n          <Banner color=\"success\">\n            <span v-clean-html=\"t('networkpolicy.selectors.matchingPods.matchesSome', matchingPods)\" />\n          </Banner>\n        </div>\n      </div>\n      <div class=\"row mb-0\">\n        <div class=\"col span-12\">\n          <MatchExpressions\n            v-model=\"podSelectorExpressions\"\n            data-testid=\"match-expression-pod-selector\"\n            :mode=\"mode\"\n            :show-remove=\"false\"\n            :initial-empty-row=\"true\"\n            :type=\"POD\"\n          />\n        </div>\n      </div>\n    </div>\n    <div v-if=\"targetType === TARGET_OPTIONS.NAMESPACE_SELECTOR\">\n      <div class=\"row\">\n        <div class=\"col span-12\">\n          <Banner color=\"success\">\n            <span v-clean-html=\"t('networkpolicy.selectors.matchingNamespaces.matchesSome', matchingNamespaces)\" />\n          </Banner>\n        </div>\n      </div>\n      <div class=\"row mb-0\">\n        <div class=\"col span-12\">\n          <MatchExpressions\n            v-model=\"namespaceSelectorExpressions\"\n            data-testid=\"match-expression-namespace-selector\"\n            :mode=\"mode\"\n            :show-remove=\"false\"\n            :initial-empty-row=\"true\"\n            :type=\"POD\"\n          />\n        </div>\n      </div>\n    </div>\n    <div v-if=\"targetType === TARGET_OPTIONS.NAMESPACE_AND_POD_SELECTOR\">\n      <div class=\"row\">\n        <div class=\"col span-12\">\n          <Banner color=\"success\">\n            <span\n              v-if=\"!namespaceSelectorExpressions.length\"\n              v-clean-html=\"t('networkpolicy.selectors.matchingPods.matchesSome', matchingPods)\"\n            />\n            <span\n              v-else\n              v-clean-html=\"t('networkpolicy.selectors.matchingNamespacesAndPods.matchesSome', matchingNamespacesAndPods)\"\n            />\n          </Banner>\n        </div>\n      </div>\n      <div class=\"row mb-0\">\n        <div class=\"col span-1 namespace-pod-rule\">\n          <span class=\"label\">\n            {{ t('networkpolicy.rules.namespace') }}\n          </span>\n        </div>\n        <div class=\"col span-11\">\n          <MatchExpressions\n            v-model=\"namespaceSelectorExpressions\"\n            data-testid=\"match-expression-namespace-and-pod-selector-ns-rule\"\n            :mode=\"mode\"\n            :show-add-button=\"false\"\n            :show-remove-button=\"false\"\n            :show-remove=\"false\"\n            :initial-empty-row=\"true\"\n            :type=\"POD\"\n          />\n        </div>\n      </div>\n      <div class=\"row mb-0\">\n        <div class=\"col span-1 namespace-pod-rule\">\n          <span class=\"label\">\n            {{ t('networkpolicy.rules.pod') }}\n          </span>\n        </div>\n        <div class=\"col span-11\">\n          <MatchExpressions\n            v-model=\"podSelectorExpressions\"\n            data-testid=\"match-expression-namespace-and-pod-selector-pod-rule\"\n            :mode=\"mode\"\n            :show-add-button=\"false\"\n            :show-remove-button=\"false\"\n            :show-remove=\"false\"\n            :initial-empty-row=\"true\"\n            :type=\"POD\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n  .namespace-pod-rule {\n    display: table;\n    width: 100px;\n    padding: 0, 10px, 0, 0;\n    text-align: center;\n\n    .label {\n      display:table-cell;\n      vertical-align:middle;\n    }\n  }\n</style>\n"]}]}