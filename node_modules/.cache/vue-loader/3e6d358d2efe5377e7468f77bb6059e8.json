{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/HookOption.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/HookOption.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnOwppbXBvcnQgeyBSYWRpb0dyb3VwIH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9SYWRpbyc7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IFNoZWxsSW5wdXQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9TaGVsbElucHV0JzsKaW1wb3J0IHsgX1ZJRVcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgbW9kZTogewogICAgICB0eXBlOiAgICAgU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCiAgICB2YWx1ZTogewogICAgICB0eXBlOiAgICBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0KICB9LAoKICBjb21wb25lbnRzOiB7CiAgICBSYWRpb0dyb3VwLCBMYWJlbGVkSW5wdXQsIExhYmVsZWRTZWxlY3QsIFNoZWxsSW5wdXQKICB9LAoKICBkYXRhKCkgewogICAgY29uc3Qgc2VsZWN0SG9vayA9IG51bGw7CgogICAgY29uc3QgZGVmYXVsdEV4ZWMgPSB7IGV4ZWM6IHsgY29tbWFuZDogW10gfSB9OwogICAgY29uc3QgZGVmYXVsdEh0dHBHZXQgPSB7CiAgICAgIGh0dHBHZXQ6IHsKICAgICAgICBob3N0OiAgICAgICAgJycsCiAgICAgICAgcGF0aDogICAgICAgICcnLAogICAgICAgIHBvcnQ6ICAgICAgICBudWxsLAogICAgICAgIHNjaGVtZTogICAgICAnJywKICAgICAgICBodHRwSGVhZGVyczogbnVsbAogICAgICB9CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdEhvb2ssCiAgICAgIGRlZmF1bHRFeGVjLAogICAgICBkZWZhdWx0SHR0cEdldCwKICAgICAgc2NoZW1lT3B0aW9uczogWydIVFRQJywgJ0hUVFBTJ10KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGlzVmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX1ZJRVc7CiAgICB9LAogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICBpZiAodGhpcy52YWx1ZSkgewogICAgICB0aGlzLnNlbGVjdEhvb2sgPSBPYmplY3Qua2V5cyh0aGlzLnZhbHVlKVswXTsKICAgIH0KCiAgICBpZiAoaXNFbXB0eSh0aGlzLnZhbHVlKSkgewogICAgICB0aGlzLnNlbGVjdEhvb2sgPSAnbm9uZSc7CiAgICB9CgogICAgdGhpcy5xdWV1ZVVwZGF0ZSA9IGRlYm91bmNlKHRoaXMudXBkYXRlLCA1MDApOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIGFkZEhlYWRlcigpIHsKICAgICAgY29uc3QgaGVhZGVyID0geyBuYW1lOiAnJywgdmFsdWU6ICcnIH07CgogICAgICBpZiAoIXRoaXMudmFsdWUuaHR0cEdldC5odHRwSGVhZGVycykgewogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLmh0dHBHZXQsICdodHRwSGVhZGVycycsIFtdKTsKICAgICAgfQoKICAgICAgdGhpcy52YWx1ZS5odHRwR2V0Lmh0dHBIZWFkZXJzLnB1c2goaGVhZGVyKTsKICAgIH0sCgogICAgcmVtb3ZlSGVhZGVyKGluZGV4KSB7CiAgICAgIHRoaXMudmFsdWUuaHR0cEdldC5odHRwSGVhZGVycy5zcGxpY2UoaW5kZXgsIDEpOwogICAgfSwKCiAgICB1cGRhdGUoKSB7CiAgICAgIGNvbnN0IHsgLi4ubGVmdG92ZXJzIH0gPSB0aGlzLnZhbHVlOwoKICAgICAgc3dpdGNoICh0aGlzLnNlbGVjdEhvb2spIHsKICAgICAgY2FzZSAnbm9uZSc6CiAgICAgICAgdGhpcy5kZWxldGVMZWZ0b3ZlcnMobGVmdG92ZXJzKTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAnZXhlYyc6CiAgICAgICAgdGhpcy5kZWxldGVMZWZ0b3ZlcnMobGVmdG92ZXJzKTsKICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMudmFsdWUsIHRoaXMuZGVmYXVsdEV4ZWMpOwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdodHRwR2V0JzoKICAgICAgICB0aGlzLmRlbGV0ZUxlZnRvdmVycyhsZWZ0b3ZlcnMpOwogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy52YWx1ZSwgdGhpcy5kZWZhdWx0SHR0cEdldCk7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdGhpcy52YWx1ZSk7CiAgICB9LAoKICAgIGRlbGV0ZUxlZnRvdmVycyhsZWZ0b3ZlcnMpIHsKICAgICAgaWYgKGxlZnRvdmVycykgewogICAgICAgIGZvciAoY29uc3Qgb2JqIGluIGxlZnRvdmVycykgewogICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWVbb2JqXTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["HookOption.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"HookOption.vue","sourceRoot":"node_modules/@rancher/shell/components/form","sourcesContent":["<script>\nimport debounce from 'lodash/debounce';\nimport { RadioGroup } from '@components/Form/Radio';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport ShellInput from '@shell/components/form/ShellInput';\nimport { _VIEW } from '@shell/config/query-params';\nimport { isEmpty } from '@shell/utils/object';\n\nexport default {\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n\n  components: {\n    RadioGroup, LabeledInput, LabeledSelect, ShellInput\n  },\n\n  data() {\n    const selectHook = null;\n\n    const defaultExec = { exec: { command: [] } };\n    const defaultHttpGet = {\n      httpGet: {\n        host:        '',\n        path:        '',\n        port:        null,\n        scheme:      '',\n        httpHeaders: null\n      }\n    };\n\n    return {\n      selectHook,\n      defaultExec,\n      defaultHttpGet,\n      schemeOptions: ['HTTP', 'HTTPS']\n    };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n  },\n\n  created() {\n    if (this.value) {\n      this.selectHook = Object.keys(this.value)[0];\n    }\n\n    if (isEmpty(this.value)) {\n      this.selectHook = 'none';\n    }\n\n    this.queueUpdate = debounce(this.update, 500);\n  },\n\n  methods: {\n    addHeader() {\n      const header = { name: '', value: '' };\n\n      if (!this.value.httpGet.httpHeaders) {\n        this.$set(this.value.httpGet, 'httpHeaders', []);\n      }\n\n      this.value.httpGet.httpHeaders.push(header);\n    },\n\n    removeHeader(index) {\n      this.value.httpGet.httpHeaders.splice(index, 1);\n    },\n\n    update() {\n      const { ...leftovers } = this.value;\n\n      switch (this.selectHook) {\n      case 'none':\n        this.deleteLeftovers(leftovers);\n        break;\n      case 'exec':\n        this.deleteLeftovers(leftovers);\n        Object.assign(this.value, this.defaultExec);\n        break;\n      case 'httpGet':\n        this.deleteLeftovers(leftovers);\n        Object.assign(this.value, this.defaultHttpGet);\n        break;\n      default:\n        break;\n      }\n\n      this.$emit('input', this.value);\n    },\n\n    deleteLeftovers(leftovers) {\n      if (leftovers) {\n        for (const obj in leftovers) {\n          delete this.value[obj];\n        }\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row mb-10\">\n      <RadioGroup\n        v-model=\"selectHook\"\n        name=\"selectHook\"\n        :options=\"['none', 'exec', 'httpGet']\"\n        :labels=\"[\n          t('generic.none'),\n          t('workload.container.lifecycleHook.exec.add'),\n          t('workload.container.lifecycleHook.httpGet.add'),\n        ]\"\n        :mode=\"mode\"\n        @input=\"update\"\n      />\n    </div>\n\n    <template v-if=\"selectHook === 'exec'\">\n      <div class=\"mb-20 single-value\">\n        <h4>{{ t('workload.container.lifecycleHook.exec.title') }}</h4>\n        <div>\n          <ShellInput\n            v-model=\"value.exec.command\"\n            :mode=\"mode\"\n            :label=\"t('workload.container.lifecycleHook.exec.command.label')\"\n            :placeholder=\"t('workload.container.lifecycleHook.exec.command.placeholder', null, true)\"\n            required\n          />\n        </div>\n      </div>\n    </template>\n\n    <template v-if=\"selectHook === 'httpGet'\">\n      <h4>{{ t('workload.container.lifecycleHook.httpGet.title') }}</h4>\n      <div class=\"var-row\">\n        <template @input=\"update\">\n          <LabeledInput\n            v-model=\"value.httpGet.host\"\n            :label=\"t('workload.container.lifecycleHook.httpGet.host.label')\"\n            :placeholder=\"t('workload.container.lifecycleHook.httpGet.host.placeholder')\"\n            :mode=\"mode\"\n          />\n          <LabeledInput\n            v-model=\"value.httpGet.path\"\n            :label=\"t('workload.container.lifecycleHook.httpGet.path.label')\"\n            :placeholder=\"t('workload.container.lifecycleHook.httpGet.path.placeholder')\"\n            :mode=\"mode\"\n          />\n          <LabeledInput\n            v-model.number=\"value.httpGet.port\"\n            type=\"number\"\n            :label=\"t('workload.container.lifecycleHook.httpGet.port.label')\"\n            :placeholder=\"t('workload.container.lifecycleHook.httpGet.port.placeholder')\"\n            :mode=\"mode\"\n            required\n          />\n          <LabeledSelect\n            v-model=\"value.httpGet.scheme\"\n            :label=\"t('workload.container.lifecycleHook.httpGet.scheme.label')\"\n            :placeholder=\"t('workload.container.lifecycleHook.httpGet.scheme.placeholder')\"\n            :options=\"schemeOptions\"\n            :mode=\"mode\"\n          />\n        </template>\n      </div>\n\n      <h4>{{ t('workload.container.lifecycleHook.httpHeaders.title') }}</h4>\n      <div\n        v-for=\"(header, index) in value.httpGet.httpHeaders\"\n        :key=\"header.id\"\n        class=\"var-row\"\n      >\n        <template @input=\"update\">\n          <LabeledInput\n            v-model=\"value.httpGet.httpHeaders[index].name\"\n            :label=\"t('workload.container.lifecycleHook.httpHeaders.name.label')\"\n            :placeholder=\"t('workload.container.lifecycleHook.httpHeaders.name.placeholder')\"\n            class=\"single-value\"\n            :mode=\"mode\"\n            required\n          />\n          <LabeledInput\n            v-model=\"value.httpGet.httpHeaders[index].value\"\n            :label=\"t('workload.container.lifecycleHook.httpHeaders.value.label')\"\n            :placeholder=\"t('workload.container.lifecycleHook.httpHeaders.value.placeholder')\"\n            class=\"single-value\"\n            :mode=\"mode\"\n          />\n        </template>\n        <div class=\"remove\">\n          <button\n            v-if=\"!isView\"\n            type=\"button\"\n            class=\"btn role-link ml0\"\n            :disabled=\"mode==='view'\"\n            @click.stop=\"removeHeader(index)\"\n          >\n            <t k=\"generic.remove\" />\n          </button>\n        </div>\n      </div>\n\n      <div>\n        <button\n          v-if=\"!isView\"\n          type=\"button\"\n          class=\"btn role-link mb-20\"\n          :disabled=\"mode === 'view'\"\n          @click.stop=\"addHeader\"\n        >\n          Add Header\n        </button>\n      </div>\n    </template>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.var-row{\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr 1fr 100px;\n  grid-column-gap: 20px;\n  margin-bottom: 20px;\n  align-items: center;\n\n  .single-value {\n    grid-column: span 2;\n  }\n\n  .labeled-select {\n    min-height: $input-height;\n  }\n  .remove BUTTON {\n    padding: 0px;\n  }\n}\n</style>\n"]}]}