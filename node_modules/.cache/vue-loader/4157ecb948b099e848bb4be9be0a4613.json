{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/KeyValue.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/KeyValue.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnOwppbXBvcnQgeyB0eXBlT2YgfSBmcm9tICdAc2hlbGwvdXRpbHMvc29ydCc7CmltcG9ydCB7IHJlbW92ZUF0LCByZW1vdmVPYmplY3QgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwppbXBvcnQgeyBiYXNlNjRFbmNvZGUsIGJhc2U2NERlY29kZSwgYmluYXJ5U2l6ZSB9IGZyb20gJ0BzaGVsbC91dGlscy9jcnlwdG8nOwppbXBvcnQgeyBkb3dubG9hZEZpbGUgfSBmcm9tICdAc2hlbGwvdXRpbHMvZG93bmxvYWQnOwppbXBvcnQgeyBUZXh0QXJlYUF1dG9Hcm93IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9UZXh0QXJlYSc7CmltcG9ydCB7IGdldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vU2VsZWN0JzsKaW1wb3J0IEZpbGVTZWxlY3RvciBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0ZpbGVTZWxlY3Rvcic7CmltcG9ydCB7IF9FRElULCBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgYXNjaWlMaWtlIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7CmltcG9ydCBDb2RlTWlycm9yIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NvZGVNaXJyb3InOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdLZXlWYWx1ZScsCgogIGNvbXBvbmVudHM6IHsKICAgIENvZGVNaXJyb3IsCiAgICBTZWxlY3QsCiAgICBUZXh0QXJlYUF1dG9Hcm93LAogICAgRmlsZVNlbGVjdG9yCiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgW0FycmF5LCBPYmplY3RdLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIGRlZmF1bHRWYWx1ZTogewogICAgICB0eXBlOiAgICBbQXJyYXksIE9iamVjdF0sCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgLy8gSWYgdGhlIHVzZXIgc3VwcGxpZXMgdGhpcyBhcnJheSwgdGhlbiBpdCBpbmRpY2F0ZXMgd2hpY2gga2V5cyBzaG91bGQgYmUgc2hvd24gYXMgYmluYXJ5CiAgICBiaW5hcnlWYWx1ZUtleXM6IHsKICAgICAgdHlwZTogICAgW0FycmF5LCBPYmplY3RdLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IF9FRElULAogICAgfSwKICAgIGFzTWFwOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAogICAgaW5pdGlhbEVtcHR5Um93OiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIHRpdGxlOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCgogICAgdGl0bGVQcm90aXA6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfSwKCiAgICBwcm90aXA6IHsKICAgICAgdHlwZTogW1N0cmluZywgQm9vbGVhbl0sCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddKCdrZXlWYWx1ZS5wcm90aXAnLCBudWxsLCB0cnVlKTsKICAgICAgfSwKICAgIH0sCiAgICAvLyBGb3IgYXNNYXA9ZmFsc2UsIHRoZSBuYW1lIG9mIHRoZSBmaWVsZCB0aGF0IGdvZXMgaW50byB0aGUgcm93IG9iamVjdHMKICAgIGtleU5hbWU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAna2V5JywKICAgIH0sCiAgICBrZXlMYWJlbDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddKCdnZW5lcmljLmtleScpOwogICAgICB9LAogICAgfSwKICAgIGtleUVkaXRhYmxlOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAogICAgLy8gT2ZmZXIgYSBzZXQgb2Ygc3VnZ2VzdGlvbnMgZm9yIHRoZSBrZXlzIGFzIGEgU2VsZWN0IGluc3RlYWQgb2YgSW5wdXQKICAgIGtleU9wdGlvbnM6IHsKICAgICAgdHlwZTogICAgQXJyYXksCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgLy8gSWYgZmFsc2UgYW5kIGtleU9wdGlvbnMgYXJlIHByb3ZpZGVkLCB0aGUga2V5IE1VU1QgYmUgb25lIG9mIHRoZSBrZXlPcHRpb25zLgogICAga2V5VGFnZ2FibGU6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZSwKICAgIH0sCiAgICBrZXlPcHRpb25VbmlxdWU6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAga2V5UGxhY2Vob2xkZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0KCkgewogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydpMThuL3QnXSgna2V5VmFsdWUua2V5UGxhY2Vob2xkZXInKTsKICAgICAgfSwKICAgIH0sCiAgICAvKioKICAgICAqIExpc3Qgb2Yga2V5cyB3aGljaCBuZWVkcyB0byBiZSBkaXNhYmxlZCBhbmQgaGlkZGVuIGJhc2VkIG9uIHRvZ2dsZXIKICAgICAqLwogICAgcHJvdGVjdGVkS2V5czogewogICAgICB0eXBlOiAgICBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10sCiAgICB9LAogICAgLyoqCiAgICAgKiBDb25kaXRpb25hbGx5IGRpc3BsYXkgcHJvdGVjdGVkIGtleXMsIGlmIGFueQogICAgICovCiAgICB0b2dnbGVGaWx0ZXI6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgc2VwYXJhdG9yTGFiZWw6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJywKICAgIH0sCiAgICAvLyBGb3IgYXNNYXA9ZmFsc2UsIHRoZSBuYW1lIG9mIHRoZSBmaWVsZCB0aGF0IGdvZXMgaW50byB0aGUgcm93IG9iamVjdHMKICAgIHZhbHVlTmFtZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICd2YWx1ZScsCiAgICB9LAogICAgdmFsdWVMYWJlbDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddKCdnZW5lcmljLnZhbHVlJyk7CiAgICAgIH0sCiAgICB9LAogICAgdmFsdWVQbGFjZWhvbGRlcjogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddKCdrZXlWYWx1ZS52YWx1ZVBsYWNlaG9sZGVyJyk7CiAgICAgIH0sCiAgICB9LAogICAgdmFsdWVDYW5CZUVtcHR5OiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIGRpc3BsYXlWYWx1ZXNBc0JpbmFyeTogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgICB2YWx1ZU1hcmtkb3duTXVsdGlsaW5lOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIHZhbHVlTXVsdGlsaW5lOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAogICAgdmFsdWVUcmltOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAogICAgaGFuZGxlQmFzZTY0OiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIHZhbHVlQ29uY2VhbGVkOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIC8vIE9uIGluaXRpYWwgcmVhZGluZyBvZiB0aGUgZXhpc3RpbmcgdmFsdWUsIHRoaXMgZnVuY3Rpb24gaXMgY2FsbGVkCiAgICAvLyBhbmQgY2FuIHJldHVybiBmYWxzZSB0byBzYXkgdGhhdCBhIHZhbHVlIGlzIG5vdCBzdXBwb3J0ZWQgZm9yIGVkaXRpbmcuCiAgICAvLyBUaGlzIGlzIG1haW5seSB1c2VmdWwgZm9yIHJlc291cmNlcyBsaWtlIGVudlZhcnMgdGhhdCBoYXZlIGEgdmFsdWVGcm9tCiAgICAvLyB5b3Ugd2FudCB0byBwcmVzZXJ2ZSBidXQgbm90IHN1cHBvcnQgZWRpdGluZwogICAgc3VwcG9ydGVkOiB7CiAgICAgIHR5cGU6ICAgIEZ1bmN0aW9uLAogICAgICBkZWZhdWx0OiAodikgPT4gdHJ1ZSwKICAgIH0sCiAgICAvLyBGb3IgYXNNYXA9ZmFsc2UsIHByZXNlcnZlIChjb3B5KSB0aGVzZSBrZXlzIGZyb20gdGhlIG9yaWdpbmFsIHZhbHVlIGludG8gdGhlIGVtaXR0ZWQgdmFsdWUuCiAgICAvLyBBbHNvIHVzZWZ1bCBmb3IgdmFsdWVGcm9tIGFzIGFib3ZlLgogICAgcHJlc2VydmVLZXlzOiB7CiAgICAgIHR5cGU6ICAgIEFycmF5LAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIGV4dHJhQ29sdW1uczogewogICAgICB0eXBlOiAgICBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10sCiAgICB9LAogICAgZGVmYXVsdEFkZERhdGE6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7fSwKICAgIH0sCiAgICBhZGRMYWJlbDogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddKCdnZW5lcmljLmFkZCcpOwogICAgICB9LAogICAgfSwKICAgIGFkZEljb246IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnaWNvbi1wbHVzJywKICAgIH0sCiAgICBhZGRBbGxvd2VkOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAogICAgcmVhZExhYmVsOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi90J10oJ2dlbmVyaWMucmVhZEZyb21GaWxlJyk7CiAgICAgIH0sCiAgICB9LAogICAgcmVhZEljb246IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnaWNvbi11cGxvYWQnLAogICAgfSwKICAgIHJlYWRBbGxvd2VkOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAogICAgcmVhZEFjY2VwdDogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICcqJywKICAgIH0sCiAgICByZWFkTXVsdGlwbGU6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgcmVtb3ZlTGFiZWw6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJywKICAgIH0sCiAgICByZW1vdmVJY29uOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ2ljb24tbWludXMnLAogICAgfSwKICAgIHJlbW92ZUFsbG93ZWQ6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZSwKICAgIH0sCiAgICBmaWxlTW9kaWZpZXI6IHsKICAgICAgdHlwZTogICAgRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IChuYW1lLCB2YWx1ZSkgPT4gKHsgbmFtZSwgdmFsdWUgfSkKICAgIH0sCiAgICBwYXJzZXJTZXBhcmF0b3JzOiB7CiAgICAgIHR5cGU6ICAgIEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbJzogJywgJz0nXSwKICAgIH0sCiAgICBsb2FkaW5nOiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB0eXBlOiAgICBCb29sZWFuCiAgICB9LAogICAgcGFyc2VMaW5lc0Zyb21GaWxlOiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB0eXBlOiAgICBCb29sZWFuCiAgICB9LAogICAgcGFyc2VWYWx1ZUZyb21GaWxlOiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB0eXBlOiAgICBCb29sZWFuCiAgICB9LAogICAgZGlzYWJsZWQ6IHsKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICAgIHR5cGU6ICAgIEJvb2xlYW4KICAgIH0sCiAgfSwKICBkYXRhKCkgewogICAgY29uc3Qgcm93cyA9IHRoaXMuZ2V0Um93cyh0aGlzLnZhbHVlKTsKCiAgICByZXR1cm4gewogICAgICByb3dzLAogICAgICBjb2RlTWlycm9yRm9jdXM6IHt9LAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgaXNWaWV3KCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfVklFVzsKICAgIH0sCiAgICBjb250YWluZXJTdHlsZSgpIHsKICAgICAgY29uc3QgZ2FwID0gdGhpcy5jYW5SZW1vdmUgPyAnIDUwcHgnIDogJyc7CiAgICAgIGNvbnN0IHNpemUgPSAyICsgdGhpcy5leHRyYUNvbHVtbnMubGVuZ3RoOwoKICAgICAgcmV0dXJuIGBncmlkLXRlbXBsYXRlLWNvbHVtbnM6IHJlcGVhdCgkeyBzaXplIH0sIDFmcikkeyBnYXAgfTtgOwogICAgfSwKICAgIHVzZWRLZXlPcHRpb25zKCkgewogICAgICByZXR1cm4gdGhpcy5yb3dzLm1hcCgocm93KSA9PiByb3dbdGhpcy5rZXlOYW1lXSk7CiAgICB9LAogICAgZmlsdGVyZWRLZXlPcHRpb25zKCkgewogICAgICBpZiAodGhpcy5rZXlPcHRpb25VbmlxdWUpIHsKICAgICAgICByZXR1cm4gdGhpcy5rZXlPcHRpb25zCiAgICAgICAgICAuZmlsdGVyKChvcHRpb24pID0+ICF0aGlzLnVzZWRLZXlPcHRpb25zLmluY2x1ZGVzKG9wdGlvbi52YWx1ZSkpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5rZXlPcHRpb25zOwogICAgfSwKICAgIC8qKgogICAgICogUHJldmVudCByZW1vdmFsIGlmIGV4cHJlc3NseSBub3QgYWxsb3dlZCBhbmQgbm90IGluIHZpZXcgbW9kZQogICAgICovCiAgICBjYW5SZW1vdmUoKSB7CiAgICAgIHJldHVybiAhdGhpcy5pc1ZpZXcgJiYgdGhpcy5yZW1vdmVBbGxvd2VkOwogICAgfSwKICAgIC8qKgogICAgICogRmlsdGVyIHJvd3MgYmFzZWQgb24gdG9nZ2xlciwga2VlcGluZyB0byBzdGlsbCBlbWl0IGFsbCB0aGUgdmFsdWVzCiAgICAgKi8KICAgIGZpbHRlcmVkUm93cygpIHsKICAgICAgcmV0dXJuIHRoaXMucm93cy5maWx0ZXIoKHJvdykgPT4gISh0aGlzLmlzUHJvdGVjdGVkKHJvdy5rZXkpICYmICF0aGlzLnRvZ2dsZUZpbHRlcikpOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMucXVldWVVcGRhdGUgPSBkZWJvdW5jZSh0aGlzLnVwZGF0ZSwgNTAwKTsKICB9LAogIHdhdGNoOiB7CiAgICBkZWZhdWx0VmFsdWUobmV1KSB7CiAgICAgIGlmIChBcnJheS5pc0FycmF5KG5ldSkpIHsKICAgICAgICB0aGlzLnJvd3MgPSB0aGlzLmdldFJvd3MobmV1KTsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIG5ldSk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGlzUHJvdGVjdGVkKGtleSkgewogICAgICByZXR1cm4gdGhpcy5wcm90ZWN0ZWRLZXlzICYmIHRoaXMucHJvdGVjdGVkS2V5cy5pbmNsdWRlcyhrZXkpOwogICAgfSwKCiAgICBnZXRSb3dzKHZhbHVlKSB7CiAgICAgIGNvbnN0IHJvd3MgPSBbXTsKCiAgICAgIGlmICggdGhpcy5hc01hcCApIHsKICAgICAgICBjb25zdCBpbnB1dCA9IHZhbHVlIHx8IHt9OwoKICAgICAgICBPYmplY3Qua2V5cyhpbnB1dCkuZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgICAgICBsZXQgdmFsdWUgPSBpbnB1dFtrZXldOwogICAgICAgICAgY29uc3QgZGVjb2RlZFZhbHVlID0gYmFzZTY0RGVjb2RlKGlucHV0W2tleV0pOwogICAgICAgICAgY29uc3QgYXNjaWlWYWx1ZSA9IGFzY2lpTGlrZShkZWNvZGVkVmFsdWUpOwoKICAgICAgICAgIGlmICggdGhpcy5oYW5kbGVCYXNlNjQgJiYgYXNjaWlWYWx1ZSkgewogICAgICAgICAgICB2YWx1ZSA9IGJhc2U2NERlY29kZSh2YWx1ZSk7CiAgICAgICAgICB9CgogICAgICAgICAgcm93cy5wdXNoKHsKICAgICAgICAgICAga2V5LAogICAgICAgICAgICB2YWx1ZSwKICAgICAgICAgICAgYmluYXJ5OiAgICB0aGlzLmRpc3BsYXlWYWx1ZXNBc0JpbmFyeSB8fCAodGhpcy5oYW5kbGVCYXNlNjQgJiYgIWFzY2lpVmFsdWUpLAogICAgICAgICAgICBjYW5FbmNvZGU6IHRoaXMuaGFuZGxlQmFzZTY0ICYmIGFzY2lpVmFsdWUsCiAgICAgICAgICAgIHN1cHBvcnRlZDogdHJ1ZSwKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGlucHV0ID0gdmFsdWUgfHwgW107CgogICAgICAgIGZvciAoIGNvbnN0IHJvdyBvZiBpbnB1dCApIHsKICAgICAgICAgIGxldCB2YWx1ZSA9IHJvd1t0aGlzLnZhbHVlTmFtZV0gfHwgJyc7CiAgICAgICAgICBjb25zdCBkZWNvZGVkVmFsdWUgPSBiYXNlNjREZWNvZGUocm93W3RoaXMudmFsdWVOYW1lXSk7CiAgICAgICAgICBjb25zdCBhc2NpaVZhbHVlID0gYXNjaWlMaWtlKGRlY29kZWRWYWx1ZSk7CgogICAgICAgICAgaWYgKCB0aGlzLmhhbmRsZUJhc2U2NCAmJiBhc2NpaVZhbHVlKSB7CiAgICAgICAgICAgIHZhbHVlID0gYmFzZTY0RGVjb2RlKHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGVudHJ5ID0gewogICAgICAgICAgICBbdGhpcy5rZXlOYW1lXTogICByb3dbdGhpcy5rZXlOYW1lXSB8fCAnJywKICAgICAgICAgICAgW3RoaXMudmFsdWVOYW1lXTogdmFsdWUsCiAgICAgICAgICAgIGJpbmFyeTogICAgICAgICAgIHRoaXMuZGlzcGxheVZhbHVlc0FzQmluYXJ5IHx8ICh0aGlzLmhhbmRsZUJhc2U2NCAmJiAhYXNjaWlWYWx1ZSksCiAgICAgICAgICAgIGNhbkVuY29kZTogICAgICAgIHRoaXMuaGFuZGxlQmFzZTY0ICYmIGFzY2lpVmFsdWUsCiAgICAgICAgICAgIHN1cHBvcnRlZDogICAgICAgIHRoaXMuc3VwcG9ydGVkKHJvdyksCiAgICAgICAgICB9OwoKICAgICAgICAgIHRoaXMucHJlc2VydmVLZXlzPy5tYXAoKGspID0+IHsKICAgICAgICAgICAgaWYgKCB0eXBlb2Ygcm93W2tdICE9PSAndW5kZWZpbmVkJyApIHsKICAgICAgICAgICAgICBlbnRyeVtrXSA9IHJvd1trXTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICByb3dzLnB1c2goZW50cnkpOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoIHJvd3MgJiYgIXJvd3MubGVuZ3RoICYmIHRoaXMuaW5pdGlhbEVtcHR5Um93ICkgewogICAgICAgIHJvd3MucHVzaCh7CiAgICAgICAgICBbdGhpcy5rZXlOYW1lXTogICAnJywKICAgICAgICAgIFt0aGlzLnZhbHVlTmFtZV06ICcnLAogICAgICAgICAgYmluYXJ5OiAgICAgICAgICAgZmFsc2UsCiAgICAgICAgICBjYW5FbmNvZGU6ICAgICAgICB0aGlzLmhhbmRsZUJhc2U2NCwKICAgICAgICAgIHN1cHBvcnRlZDogICAgICAgIHRydWUKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIHJvd3M7CiAgICB9LAoKICAgIGFkZChrZXkgPSAnJywgdmFsdWUgPSAnJykgewogICAgICBjb25zdCBvYmogPSB7CiAgICAgICAgLi4udGhpcy5kZWZhdWx0QWRkRGF0YSwKICAgICAgICBbdGhpcy5rZXlOYW1lXTogICBrZXksCiAgICAgICAgW3RoaXMudmFsdWVOYW1lXTogdmFsdWUsCiAgICAgIH07CgogICAgICBvYmouYmluYXJ5ID0gZmFsc2U7CiAgICAgIG9iai5jYW5FbmNvZGUgPSB0aGlzLmhhbmRsZUJhc2U2NDsKICAgICAgb2JqLnN1cHBvcnRlZCA9IHRydWU7CiAgICAgIHRoaXMucm93cy5wdXNoKG9iaik7CiAgICAgIHRoaXMucXVldWVVcGRhdGUoKTsKICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgIGlmICh0aGlzLiRyZWZzLmtleSkgewogICAgICAgICAgY29uc3Qga2V5cyA9IHRoaXMuJHJlZnMua2V5OwoKICAgICAgICAgIGNvbnN0IGxhc3RLZXkgPSBrZXlzW2tleXMubGVuZ3RoIC0gMV07CgogICAgICAgICAgbGFzdEtleS5mb2N1cygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdmb2N1c0tleScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgcmVtb3ZlKGlkeCkgewogICAgICByZW1vdmVBdCh0aGlzLnJvd3MsIGlkeCk7CiAgICAgIHRoaXMucXVldWVVcGRhdGUoKTsKICAgIH0sCiAgICByZW1vdmVFbXB0eVJvd3MoKSB7CiAgICAgIGNvbnN0IGNsZWFuZWQgPSB0aGlzLnJvd3MuZmlsdGVyKChyb3cpID0+IHsKICAgICAgICByZXR1cm4gKHJvdy52YWx1ZS5sZW5ndGggfHwgcm93LmtleS5sZW5ndGgpOwogICAgICB9KTsKCiAgICAgIHRoaXMuJHNldCh0aGlzLCAncm93cycsIGNsZWFuZWQpOwogICAgfSwKICAgIG9uRmlsZVNlbGVjdGVkKGZpbGUpIHsKICAgICAgY29uc3QgeyBuYW1lLCB2YWx1ZSB9ID0gdGhpcy5maWxlTW9kaWZpZXIoZmlsZS5uYW1lLCBmaWxlLnZhbHVlKTsKCiAgICAgIGlmICghdGhpcy5wYXJzZUxpbmVzRnJvbUZpbGUpIHsKICAgICAgICB0aGlzLmFkZChuYW1lLCB2YWx1ZSwgdGhpcy5kaXNwbGF5VmFsdWVzQXNCaW5hcnkpOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnN0IGxpbmVzID0gdmFsdWUuc3BsaXQoJ1xuJyk7CgogICAgICAgIGxpbmVzLmZvckVhY2goKGxpbmUpID0+IHsKICAgICAgICAgIC8vIElnbm9yZSBlbXB0eSBsaW5lcwogICAgICAgICAgaWYgKGxpbmUubGVuZ3RoKSB7CiAgICAgICAgICAgIGNvbnN0IFtrZXksIHZhbHVlXSA9IGxpbmUuc3BsaXQoJz0nKTsKCiAgICAgICAgICAgIHRoaXMuYWRkKGtleSwgdmFsdWUpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBpZiAobGluZXMubGVuZ3RoID4gMCkgewogICAgICAgICAgdGhpcy5yZW1vdmVFbXB0eVJvd3MoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBkb3dubG9hZChpZHgsIGV2KSB7CiAgICAgIGNvbnN0IHJvdyA9IHRoaXMucm93c1tpZHhdOwogICAgICBjb25zdCBuYW1lID0gcm93W3RoaXMua2V5TmFtZV07CiAgICAgIGNvbnN0IHZhbHVlID0gcm93W3RoaXMudmFsdWVOYW1lXTsKCiAgICAgIGRvd25sb2FkRmlsZShuYW1lLCB2YWx1ZSwgJ2FwcGxpY2F0aW9uL29jdGV0LXN0cmVhbScpOwogICAgfSwKICAgIHVwZGF0ZSgpIHsKICAgICAgbGV0IG91dDsKCiAgICAgIGlmICggdGhpcy5hc01hcCApIHsKICAgICAgICBvdXQgPSB7fTsKICAgICAgICBjb25zdCBrZXlOYW1lID0gdGhpcy5rZXlOYW1lOwogICAgICAgIGNvbnN0IHZhbHVlTmFtZSA9IHRoaXMudmFsdWVOYW1lOwoKICAgICAgICBmb3IgKCBjb25zdCByb3cgb2YgdGhpcy5yb3dzICkgewogICAgICAgICAgbGV0IHZhbHVlID0gKHJvd1t2YWx1ZU5hbWVdIHx8ICcnKTsKICAgICAgICAgIGNvbnN0IGtleSA9IChyb3dba2V5TmFtZV0gfHwgJycpLnRyaW0oKTsKCiAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZU9mKHZhbHVlKSA9PT0gJ29iamVjdCcpIHsKICAgICAgICAgICAgb3V0W2tleV0gPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHZhbHVlKSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YWx1ZSA9IHZhbHVlIHx8ICcnOwogICAgICAgICAgICBpZiAodGhpcy52YWx1ZVRyaW0gJiYgYXNjaWlMaWtlKHZhbHVlKSkgewogICAgICAgICAgICAgIHZhbHVlID0gdmFsdWUudHJpbSgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyb3cuY2FuRW5jb2RlKSB7CiAgICAgICAgICAgICAgdmFsdWUgPSBiYXNlNjRFbmNvZGUodmFsdWUpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICgga2V5ICYmICh2YWx1ZSB8fCB0aGlzLnZhbHVlQ2FuQmVFbXB0eSkgKSB7CiAgICAgICAgICAgICAgb3V0W2tleV0gPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBwcmVzZXJ2ZUtleXMgPSB0aGlzLnByZXNlcnZlS2V5cyB8fCBbXTsKCiAgICAgICAgcmVtb3ZlT2JqZWN0KHByZXNlcnZlS2V5cywgdGhpcy5rZXlOYW1lKTsKICAgICAgICByZW1vdmVPYmplY3QocHJlc2VydmVLZXlzLCB0aGlzLnZhbHVlTmFtZSk7CiAgICAgICAgb3V0ID0gdGhpcy5yb3dzLm1hcCgocm93KSA9PiB7CiAgICAgICAgICBsZXQgdmFsdWUgPSByb3dbdGhpcy52YWx1ZU5hbWVdOwoKICAgICAgICAgIGlmIChyb3cuY2FuRW5jb2RlKSB7CiAgICAgICAgICAgIHZhbHVlID0gYmFzZTY0RW5jb2RlKHZhbHVlKTsKICAgICAgICAgIH0KICAgICAgICAgIGNvbnN0IGVudHJ5ID0gewogICAgICAgICAgICBbdGhpcy5rZXlOYW1lXTogICByb3dbdGhpcy5rZXlOYW1lXSwKICAgICAgICAgICAgW3RoaXMudmFsdWVOYW1lXTogdmFsdWUsCiAgICAgICAgICB9OwoKICAgICAgICAgIGZvciAoIGNvbnN0IGsgb2YgcHJlc2VydmVLZXlzICkgewogICAgICAgICAgICBpZiAoIHR5cGVvZiByb3dba10gIT09ICd1bmRlZmluZWQnICkgewogICAgICAgICAgICAgIGVudHJ5W2tdID0gcm93W2tdOwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGVudHJ5OwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0Jywgb3V0KTsKICAgIH0sCiAgICBvblBhc3RlKGluZGV4LCBldmVudCwgcGFzdGVkVmFsdWUpIHsKICAgICAgY29uc3QgdGV4dCA9IGV2ZW50LmNsaXBib2FyZERhdGEuZ2V0RGF0YSgndGV4dC9wbGFpbicpOwogICAgICBjb25zdCBsaW5lcyA9IHRleHQuc3BsaXQoJ1xuJyk7CiAgICAgIGNvbnN0IHNwbGl0cyA9IGxpbmVzLm1hcCgobGluZSkgPT4gewogICAgICAgIGNvbnN0IHNwbGl0dGVyID0gIWxpbmUuaW5jbHVkZXMoJzonKSB8fCAoKGxpbmUuaW5kZXhPZignPScpIDwgbGluZS5pbmRleE9mKCc6JykpICYmIGxpbmUuaW5jbHVkZXMoJzonKSkgPyAnPScgOiAnOic7CgogICAgICAgIHJldHVybiBsaW5lLnNwbGl0KHNwbGl0dGVyKTsKICAgICAgfSk7CgogICAgICBpZiAoc3BsaXRzLmxlbmd0aCA9PT0gMCB8fCAoc3BsaXRzLmxlbmd0aCA9PT0gMSAmJiBzcGxpdHNbMF0ubGVuZ3RoIDwgMikpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgY29uc3Qga2V5VmFsdWVzID0gc3BsaXRzLm1hcCgoc3BsaXQpID0+ICh7CiAgICAgICAgW3RoaXMua2V5TmFtZV06ICAgKHNwbGl0WzBdIHx8ICcnKS50cmltKCksCiAgICAgICAgW3RoaXMudmFsdWVOYW1lXTogKHNwbGl0WzFdIHx8ICcnKS50cmltKCksCiAgICAgICAgc3VwcG9ydGVkOiAgICAgICAgdHJ1ZSwKICAgICAgICBjYW5FbmNvZGU6ICAgICAgICB0aGlzLmhhbmRsZUJhc2U2NCwKICAgICAgICBiaW5hcnk6ICAgICAgICAgICB0aGlzLmRpc3BsYXlWYWx1ZXNBc0JpbmFyeQogICAgICB9KSk7CgogICAgICB0aGlzLnJvd3Muc3BsaWNlKGluZGV4LCAxLCAuLi5rZXlWYWx1ZXMpOwogICAgICB0aGlzLnF1ZXVlVXBkYXRlKCk7CiAgICB9LAogICAgY2FsY3VsYXRlT3B0aW9ucyh2YWx1ZSkgewogICAgICBjb25zdCB2YWx1ZU9wdGlvbiA9IHRoaXMua2V5T3B0aW9ucy5maW5kKChvKSA9PiBvLnZhbHVlID09PSB2YWx1ZSk7CgogICAgICBpZiAodmFsdWVPcHRpb24pIHsKICAgICAgICByZXR1cm4gW3ZhbHVlT3B0aW9uLCAuLi50aGlzLmZpbHRlcmVkS2V5T3B0aW9uc107CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmZpbHRlcmVkS2V5T3B0aW9uczsKICAgIH0sCiAgICBiaW5hcnlUZXh0U2l6ZSh2YWwpIHsKICAgICAgY29uc3QgaGFuZGxlZFZhbHVlID0gdGhpcy5oYW5kbGVCYXNlNjQgPyBiYXNlNjREZWNvZGUodmFsKSA6IHZhbDsKICAgICAgY29uc3QgbiA9IHZhbC5sZW5ndGggPyBiaW5hcnlTaXplKGhhbmRsZWRWYWx1ZSkgOiAwOwoKICAgICAgcmV0dXJuIHRoaXMudCgnZGV0YWlsVGV4dC5iaW5hcnknLCB7IG4gfSwgdHJ1ZSk7CiAgICB9LAogICAgZ2V0LAogICAgLyoqCiAgICAgKiBVcGRhdGUgJ3Jvd3MnIHZhcmlhYmxlIHdpdGggdGhlIHVzZXIncyBpbnB1dCBhbmQgcHJldmVudHMgdG8gdXBkYXRlIHF1ZXVlIGJlZm9yZSB0aGUgcm93IG1vZGVsIGlzIHVwZGF0ZWQKICAgICAqLwogICAgb25JbnB1dE1hcmtkb3duTXVsdGlsaW5lKGlkeCwgdmFsdWUpIHsKICAgICAgdGhpcy5yb3dzID0gdGhpcy5yb3dzLm1hcCgocm93LCBpKSA9PiBpID09PSBpZHggPyB7IC4uLnJvdywgdmFsdWUgfSA6IHJvdyk7CiAgICAgIHRoaXMucXVldWVVcGRhdGUoKTsKICAgIH0sCiAgICAvKioKICAgICAqIFNldCBmb2N1cyBvbiBDb2RlTWlycm9yIGZpZWxkcwogICAgICovCiAgICBvbkZvY3VzTWFya2Rvd25NdWx0aWxpbmUoaWR4LCB2YWx1ZSkgewogICAgICB0aGlzLiRzZXQodGhpcy5jb2RlTWlycm9yRm9jdXMsIGlkeCwgdmFsdWUpOwogICAgfSwKICAgIG9uVmFsdWVGaWxlU2VsZWN0ZWQoaWR4LCBmaWxlKSB7CiAgICAgIGNvbnN0IHsgbmFtZSwgdmFsdWUgfSA9IGZpbGU7CgogICAgICBpZiAoIXRoaXMucm93c1tpZHhdW3RoaXMua2V5TmFtZV0pIHsKICAgICAgICB0aGlzLnJvd3NbaWR4XVt0aGlzLmtleU5hbWVdID0gbmFtZTsKICAgICAgfQogICAgICB0aGlzLnJvd3NbaWR4XVt0aGlzLnZhbHVlTmFtZV0gPSB2YWx1ZTsKICAgIH0sCiAgICBpc1ZhbHVlRmllbGRFbXB0eSh2YWx1ZSkgewogICAgICByZXR1cm4gIXZhbHVlIHx8IHZhbHVlLnRyaW0oKS5sZW5ndGggPT09IDA7CiAgICB9CiAgfQp9Owo="},{"version":3,"sources":["KeyValue.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"KeyValue.vue","sourceRoot":"node_modules/@rancher/shell/components/form","sourcesContent":["<script>\nimport debounce from 'lodash/debounce';\nimport { typeOf } from '@shell/utils/sort';\nimport { removeAt, removeObject } from '@shell/utils/array';\nimport { base64Encode, base64Decode, binarySize } from '@shell/utils/crypto';\nimport { downloadFile } from '@shell/utils/download';\nimport { TextAreaAutoGrow } from '@components/Form/TextArea';\nimport { get } from '@shell/utils/object';\nimport Select from '@shell/components/form/Select';\nimport FileSelector from '@shell/components/form/FileSelector';\nimport { _EDIT, _VIEW } from '@shell/config/query-params';\nimport { asciiLike } from '@shell/utils/string';\nimport CodeMirror from '@shell/components/CodeMirror';\n\nexport default {\n  name: 'KeyValue',\n\n  components: {\n    CodeMirror,\n    Select,\n    TextAreaAutoGrow,\n    FileSelector\n  },\n  props: {\n    value: {\n      type:    [Array, Object],\n      default: null,\n    },\n    defaultValue: {\n      type:    [Array, Object],\n      default: null,\n    },\n    // If the user supplies this array, then it indicates which keys should be shown as binary\n    binaryValueKeys: {\n      type:    [Array, Object],\n      default: null\n    },\n    mode: {\n      type:    String,\n      default: _EDIT,\n    },\n    asMap: {\n      type:    Boolean,\n      default: true,\n    },\n    initialEmptyRow: {\n      type:    Boolean,\n      default: false,\n    },\n    title: {\n      type:    String,\n      default: ''\n    },\n\n    titleProtip: {\n      type:    String,\n      default: ''\n    },\n\n    protip: {\n      type: [String, Boolean],\n      default() {\n        return this.$store.getters['i18n/t']('keyValue.protip', null, true);\n      },\n    },\n    // For asMap=false, the name of the field that goes into the row objects\n    keyName: {\n      type:    String,\n      default: 'key',\n    },\n    keyLabel: {\n      type: String,\n      default() {\n        return this.$store.getters['i18n/t']('generic.key');\n      },\n    },\n    keyEditable: {\n      type:    Boolean,\n      default: true,\n    },\n    // Offer a set of suggestions for the keys as a Select instead of Input\n    keyOptions: {\n      type:    Array,\n      default: null,\n    },\n    // If false and keyOptions are provided, the key MUST be one of the keyOptions.\n    keyTaggable: {\n      type:    Boolean,\n      default: true,\n    },\n    keyOptionUnique: {\n      type:    Boolean,\n      default: false,\n    },\n    keyPlaceholder: {\n      type: String,\n      default() {\n        return this.$store.getters['i18n/t']('keyValue.keyPlaceholder');\n      },\n    },\n    /**\n     * List of keys which needs to be disabled and hidden based on toggler\n     */\n    protectedKeys: {\n      type:    Array,\n      default: () => [],\n    },\n    /**\n     * Conditionally display protected keys, if any\n     */\n    toggleFilter: {\n      type:    Boolean,\n      default: false,\n    },\n    separatorLabel: {\n      type:    String,\n      default: '',\n    },\n    // For asMap=false, the name of the field that goes into the row objects\n    valueName: {\n      type:    String,\n      default: 'value',\n    },\n    valueLabel: {\n      type: String,\n      default() {\n        return this.$store.getters['i18n/t']('generic.value');\n      },\n    },\n    valuePlaceholder: {\n      type: String,\n      default() {\n        return this.$store.getters['i18n/t']('keyValue.valuePlaceholder');\n      },\n    },\n    valueCanBeEmpty: {\n      type:    Boolean,\n      default: false,\n    },\n    displayValuesAsBinary: {\n      type:    Boolean,\n      default: false,\n    },\n    valueMarkdownMultiline: {\n      type:    Boolean,\n      default: false,\n    },\n    valueMultiline: {\n      type:    Boolean,\n      default: true,\n    },\n    valueTrim: {\n      type:    Boolean,\n      default: true,\n    },\n    handleBase64: {\n      type:    Boolean,\n      default: false,\n    },\n    valueConcealed: {\n      type:    Boolean,\n      default: false,\n    },\n    // On initial reading of the existing value, this function is called\n    // and can return false to say that a value is not supported for editing.\n    // This is mainly useful for resources like envVars that have a valueFrom\n    // you want to preserve but not support editing\n    supported: {\n      type:    Function,\n      default: (v) => true,\n    },\n    // For asMap=false, preserve (copy) these keys from the original value into the emitted value.\n    // Also useful for valueFrom as above.\n    preserveKeys: {\n      type:    Array,\n      default: null,\n    },\n    extraColumns: {\n      type:    Array,\n      default: () => [],\n    },\n    defaultAddData: {\n      type:    Object,\n      default: () => {},\n    },\n    addLabel: {\n      type: String,\n      default() {\n        return this.$store.getters['i18n/t']('generic.add');\n      },\n    },\n    addIcon: {\n      type:    String,\n      default: 'icon-plus',\n    },\n    addAllowed: {\n      type:    Boolean,\n      default: true,\n    },\n    readLabel: {\n      type: String,\n      default() {\n        return this.$store.getters['i18n/t']('generic.readFromFile');\n      },\n    },\n    readIcon: {\n      type:    String,\n      default: 'icon-upload',\n    },\n    readAllowed: {\n      type:    Boolean,\n      default: true,\n    },\n    readAccept: {\n      type:    String,\n      default: '*',\n    },\n    readMultiple: {\n      type:    Boolean,\n      default: false,\n    },\n    removeLabel: {\n      type:    String,\n      default: '',\n    },\n    removeIcon: {\n      type:    String,\n      default: 'icon-minus',\n    },\n    removeAllowed: {\n      type:    Boolean,\n      default: true,\n    },\n    fileModifier: {\n      type:    Function,\n      default: (name, value) => ({ name, value })\n    },\n    parserSeparators: {\n      type:    Array,\n      default: () => [': ', '='],\n    },\n    loading: {\n      default: false,\n      type:    Boolean\n    },\n    parseLinesFromFile: {\n      default: false,\n      type:    Boolean\n    },\n    parseValueFromFile: {\n      default: false,\n      type:    Boolean\n    },\n    disabled: {\n      default: false,\n      type:    Boolean\n    },\n  },\n  data() {\n    const rows = this.getRows(this.value);\n\n    return {\n      rows,\n      codeMirrorFocus: {},\n    };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n    containerStyle() {\n      const gap = this.canRemove ? ' 50px' : '';\n      const size = 2 + this.extraColumns.length;\n\n      return `grid-template-columns: repeat(${ size }, 1fr)${ gap };`;\n    },\n    usedKeyOptions() {\n      return this.rows.map((row) => row[this.keyName]);\n    },\n    filteredKeyOptions() {\n      if (this.keyOptionUnique) {\n        return this.keyOptions\n          .filter((option) => !this.usedKeyOptions.includes(option.value));\n      }\n\n      return this.keyOptions;\n    },\n    /**\n     * Prevent removal if expressly not allowed and not in view mode\n     */\n    canRemove() {\n      return !this.isView && this.removeAllowed;\n    },\n    /**\n     * Filter rows based on toggler, keeping to still emit all the values\n     */\n    filteredRows() {\n      return this.rows.filter((row) => !(this.isProtected(row.key) && !this.toggleFilter));\n    }\n  },\n  created() {\n    this.queueUpdate = debounce(this.update, 500);\n  },\n  watch: {\n    defaultValue(neu) {\n      if (Array.isArray(neu)) {\n        this.rows = this.getRows(neu);\n        this.$emit('input', neu);\n      }\n    }\n  },\n  methods: {\n    isProtected(key) {\n      return this.protectedKeys && this.protectedKeys.includes(key);\n    },\n\n    getRows(value) {\n      const rows = [];\n\n      if ( this.asMap ) {\n        const input = value || {};\n\n        Object.keys(input).forEach((key) => {\n          let value = input[key];\n          const decodedValue = base64Decode(input[key]);\n          const asciiValue = asciiLike(decodedValue);\n\n          if ( this.handleBase64 && asciiValue) {\n            value = base64Decode(value);\n          }\n\n          rows.push({\n            key,\n            value,\n            binary:    this.displayValuesAsBinary || (this.handleBase64 && !asciiValue),\n            canEncode: this.handleBase64 && asciiValue,\n            supported: true,\n          });\n        });\n      } else {\n        const input = value || [];\n\n        for ( const row of input ) {\n          let value = row[this.valueName] || '';\n          const decodedValue = base64Decode(row[this.valueName]);\n          const asciiValue = asciiLike(decodedValue);\n\n          if ( this.handleBase64 && asciiValue) {\n            value = base64Decode(value);\n          }\n          const entry = {\n            [this.keyName]:   row[this.keyName] || '',\n            [this.valueName]: value,\n            binary:           this.displayValuesAsBinary || (this.handleBase64 && !asciiValue),\n            canEncode:        this.handleBase64 && asciiValue,\n            supported:        this.supported(row),\n          };\n\n          this.preserveKeys?.map((k) => {\n            if ( typeof row[k] !== 'undefined' ) {\n              entry[k] = row[k];\n            }\n          });\n          rows.push(entry);\n        }\n      }\n      if ( rows && !rows.length && this.initialEmptyRow ) {\n        rows.push({\n          [this.keyName]:   '',\n          [this.valueName]: '',\n          binary:           false,\n          canEncode:        this.handleBase64,\n          supported:        true\n        });\n      }\n\n      return rows;\n    },\n\n    add(key = '', value = '') {\n      const obj = {\n        ...this.defaultAddData,\n        [this.keyName]:   key,\n        [this.valueName]: value,\n      };\n\n      obj.binary = false;\n      obj.canEncode = this.handleBase64;\n      obj.supported = true;\n      this.rows.push(obj);\n      this.queueUpdate();\n      this.$nextTick(() => {\n        if (this.$refs.key) {\n          const keys = this.$refs.key;\n\n          const lastKey = keys[keys.length - 1];\n\n          lastKey.focus();\n        } else {\n          this.$emit('focusKey');\n        }\n      });\n    },\n    remove(idx) {\n      removeAt(this.rows, idx);\n      this.queueUpdate();\n    },\n    removeEmptyRows() {\n      const cleaned = this.rows.filter((row) => {\n        return (row.value.length || row.key.length);\n      });\n\n      this.$set(this, 'rows', cleaned);\n    },\n    onFileSelected(file) {\n      const { name, value } = this.fileModifier(file.name, file.value);\n\n      if (!this.parseLinesFromFile) {\n        this.add(name, value, this.displayValuesAsBinary);\n      } else {\n        const lines = value.split('\\n');\n\n        lines.forEach((line) => {\n          // Ignore empty lines\n          if (line.length) {\n            const [key, value] = line.split('=');\n\n            this.add(key, value);\n          }\n        });\n\n        if (lines.length > 0) {\n          this.removeEmptyRows();\n        }\n      }\n    },\n    download(idx, ev) {\n      const row = this.rows[idx];\n      const name = row[this.keyName];\n      const value = row[this.valueName];\n\n      downloadFile(name, value, 'application/octet-stream');\n    },\n    update() {\n      let out;\n\n      if ( this.asMap ) {\n        out = {};\n        const keyName = this.keyName;\n        const valueName = this.valueName;\n\n        for ( const row of this.rows ) {\n          let value = (row[valueName] || '');\n          const key = (row[keyName] || '').trim();\n\n          if (value && typeOf(value) === 'object') {\n            out[key] = JSON.parse(JSON.stringify(value));\n          } else {\n            value = value || '';\n            if (this.valueTrim && asciiLike(value)) {\n              value = value.trim();\n            }\n            if (row.canEncode) {\n              value = base64Encode(value);\n            }\n            if ( key && (value || this.valueCanBeEmpty) ) {\n              out[key] = value;\n            }\n          }\n        }\n      } else {\n        const preserveKeys = this.preserveKeys || [];\n\n        removeObject(preserveKeys, this.keyName);\n        removeObject(preserveKeys, this.valueName);\n        out = this.rows.map((row) => {\n          let value = row[this.valueName];\n\n          if (row.canEncode) {\n            value = base64Encode(value);\n          }\n          const entry = {\n            [this.keyName]:   row[this.keyName],\n            [this.valueName]: value,\n          };\n\n          for ( const k of preserveKeys ) {\n            if ( typeof row[k] !== 'undefined' ) {\n              entry[k] = row[k];\n            }\n          }\n\n          return entry;\n        });\n      }\n      this.$emit('input', out);\n    },\n    onPaste(index, event, pastedValue) {\n      const text = event.clipboardData.getData('text/plain');\n      const lines = text.split('\\n');\n      const splits = lines.map((line) => {\n        const splitter = !line.includes(':') || ((line.indexOf('=') < line.indexOf(':')) && line.includes(':')) ? '=' : ':';\n\n        return line.split(splitter);\n      });\n\n      if (splits.length === 0 || (splits.length === 1 && splits[0].length < 2)) {\n        return;\n      }\n      event.preventDefault();\n      const keyValues = splits.map((split) => ({\n        [this.keyName]:   (split[0] || '').trim(),\n        [this.valueName]: (split[1] || '').trim(),\n        supported:        true,\n        canEncode:        this.handleBase64,\n        binary:           this.displayValuesAsBinary\n      }));\n\n      this.rows.splice(index, 1, ...keyValues);\n      this.queueUpdate();\n    },\n    calculateOptions(value) {\n      const valueOption = this.keyOptions.find((o) => o.value === value);\n\n      if (valueOption) {\n        return [valueOption, ...this.filteredKeyOptions];\n      }\n\n      return this.filteredKeyOptions;\n    },\n    binaryTextSize(val) {\n      const handledValue = this.handleBase64 ? base64Decode(val) : val;\n      const n = val.length ? binarySize(handledValue) : 0;\n\n      return this.t('detailText.binary', { n }, true);\n    },\n    get,\n    /**\n     * Update 'rows' variable with the user's input and prevents to update queue before the row model is updated\n     */\n    onInputMarkdownMultiline(idx, value) {\n      this.rows = this.rows.map((row, i) => i === idx ? { ...row, value } : row);\n      this.queueUpdate();\n    },\n    /**\n     * Set focus on CodeMirror fields\n     */\n    onFocusMarkdownMultiline(idx, value) {\n      this.$set(this.codeMirrorFocus, idx, value);\n    },\n    onValueFileSelected(idx, file) {\n      const { name, value } = file;\n\n      if (!this.rows[idx][this.keyName]) {\n        this.rows[idx][this.keyName] = name;\n      }\n      this.rows[idx][this.valueName] = value;\n    },\n    isValueFieldEmpty(value) {\n      return !value || value.trim().length === 0;\n    }\n  }\n};\n</script>\n<template>\n  <div class=\"key-value\">\n    <div\n      v-if=\"title || $slots.title\"\n      class=\"clearfix\"\n    >\n      <slot name=\"title\">\n        <h3>\n          {{ title }}\n          <i\n            v-if=\"titleProtip\"\n            v-clean-tooltip=\"titleProtip\"\n            class=\"icon icon-info\"\n          />\n        </h3>\n      </slot>\n    </div>\n    <div\n      class=\"kv-container\"\n      :style=\"containerStyle\"\n    >\n      <template v-if=\"rows.length || isView\">\n        <label class=\"text-label\">\n          {{ keyLabel }}\n          <i\n            v-if=\"protip && !isView && addAllowed\"\n            v-clean-tooltip=\"protip\"\n            class=\"icon icon-info\"\n          />\n        </label>\n        <label class=\"text-label\">\n          {{ valueLabel }}\n        </label>\n        <label\n          v-for=\"c in extraColumns\"\n          :key=\"c\"\n        >\n          <slot :name=\"'label:'+c\">{{ c }}</slot>\n        </label>\n        <slot\n          v-if=\"canRemove\"\n          name=\"remove\"\n        >\n          <span />\n        </slot>\n      </template>\n      <template v-if=\"!rows.length && isView\">\n        <div class=\"kv-item key text-muted\">\n          &mdash;\n        </div>\n        <div class=\"kv-item key text-muted\">\n          &mdash;\n        </div>\n      </template>\n      <template\n        v-for=\"(row,i) in filteredRows\"\n        v-else\n      >\n        <!-- Key -->\n        <div\n          :key=\"i+'key'\"\n          class=\"kv-item key\"\n        >\n          <slot\n            name=\"key\"\n            :row=\"row\"\n            :mode=\"mode\"\n            :keyName=\"keyName\"\n            :valueName=\"valueName\"\n            :queueUpdate=\"queueUpdate\"\n            :disabled=\"disabled\"\n          >\n            <Select\n              v-if=\"keyOptions\"\n              ref=\"key\"\n              v-model=\"row[keyName]\"\n              :searchable=\"true\"\n              :disabled=\"disabled || isProtected(row.key)\"\n              :clearable=\"false\"\n              :taggable=\"keyTaggable\"\n              :options=\"calculateOptions(row[keyName])\"\n              @input=\"queueUpdate\"\n            />\n            <input\n              v-else\n              ref=\"key\"\n              v-model=\"row[keyName]\"\n              :disabled=\"isView || disabled || !keyEditable || isProtected(row.key)\"\n              :placeholder=\"keyPlaceholder\"\n              @input=\"queueUpdate\"\n              @paste=\"onPaste(i, $event)\"\n            >\n          </slot>\n        </div>\n\n        <!-- Value -->\n        <div\n          :key=\"i+'value'\"\n          class=\"kv-item value\"\n        >\n          <slot\n            name=\"value\"\n            :row=\"row\"\n            :mode=\"mode\"\n            :keyName=\"keyName\"\n            :valueName=\"valueName\"\n            :queueUpdate=\"queueUpdate\"\n          >\n            <div v-if=\"!row.supported\">\n              {{ t('detailText.unsupported', null, true) }}\n            </div>\n            <div v-else-if=\"row.binary\">\n              {{ binaryTextSize(row.value) }}\n            </div>\n            <div\n              v-else\n              class=\"value-container\"\n              :class=\"{ 'upload-button': parseValueFromFile }\"\n            >\n              <CodeMirror\n                v-if=\"valueMarkdownMultiline\"\n                ref=\"cm\"\n                data-testid=\"code-mirror-multiline-field\"\n                :class=\"{['focus']: codeMirrorFocus[i]}\"\n                :value=\"row[valueName]\"\n                :as-text-area=\"true\"\n                :mode=\"mode\"\n                @onInput=\"onInputMarkdownMultiline(i, $event)\"\n                @onFocus=\"onFocusMarkdownMultiline(i, $event)\"\n              />\n              <TextAreaAutoGrow\n                v-else-if=\"valueMultiline\"\n                v-model=\"row[valueName]\"\n                data-testid=\"value-multiline\"\n                :class=\"{'conceal': valueConcealed}\"\n                :disabled=\"disabled || isProtected(row.key)\"\n                :mode=\"mode\"\n                :placeholder=\"valuePlaceholder\"\n                :min-height=\"40\"\n                :spellcheck=\"false\"\n                @input=\"queueUpdate\"\n              />\n              <input\n                v-else\n                v-model=\"row[valueName]\"\n                :disabled=\"isView || disabled || isProtected(row.key)\"\n                :type=\"valueConcealed ? 'password' : 'text'\"\n                :placeholder=\"valuePlaceholder\"\n                autocorrect=\"off\"\n                autocapitalize=\"off\"\n                spellcheck=\"false\"\n                @input=\"queueUpdate\"\n              >\n              <FileSelector\n                v-if=\"parseValueFromFile && readAllowed && !isView && isValueFieldEmpty(row[valueName])\"\n                class=\"btn btn-sm role-secondary file-selector\"\n                :label=\"t('generic.upload')\"\n                :include-file-name=\"true\"\n                @selected=\"onValueFileSelected(i, $event)\"\n              />\n            </div>\n          </slot>\n        </div>\n        <div\n          v-for=\"c in extraColumns\"\n          :key=\"i + c\"\n          class=\"kv-item extra\"\n        >\n          <slot\n            :name=\"'col:' + c\"\n            :row=\"row\"\n            :queue-update=\"queueUpdate\"\n          />\n        </div>\n        <div\n          v-if=\"canRemove\"\n          :key=\"i\"\n          class=\"kv-item remove\"\n          :data-testid=\"`remove-column-${i}`\"\n        >\n          <slot\n            name=\"removeButton\"\n            :remove=\"remove\"\n            :row=\"row\"\n            :i=\"i\"\n          >\n            <button\n              type=\"button\"\n              :disabled=\"isView || isProtected(row.key) || disabled\"\n              class=\"btn role-link\"\n              @click=\"remove(i)\"\n            >\n              {{ removeLabel || t('generic.remove') }}\n            </button>\n          </slot>\n        </div>\n      </template>\n    </div>\n    <div\n      v-if=\"(addAllowed || readAllowed) && !isView\"\n      class=\"footer mt-20\"\n    >\n      <slot\n        name=\"add\"\n        :add=\"add\"\n      >\n        <button\n          v-if=\"addAllowed\"\n          type=\"button\"\n          class=\"btn role-tertiary add\"\n          :disabled=\"loading || disabled || (keyOptions && filteredKeyOptions.length === 0)\"\n          @click=\"add()\"\n        >\n          <i\n            v-if=\"loading\"\n            class=\"mr-5 icon icon-spinner icon-spin icon-lg\"\n          /> {{ addLabel }}\n        </button>\n        <FileSelector\n          v-if=\"readAllowed\"\n          :disabled=\"isView\"\n          class=\"role-tertiary\"\n          :label=\"t('generic.readFromFile')\"\n          :include-file-name=\"true\"\n          @selected=\"onFileSelected\"\n        />\n      </slot>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.key-value {\n  width: 100%;\n  .file-selector.role-link {\n    text-transform: initial;\n    padding: 0;\n  }\n  .kv-container {\n    display: grid;\n    align-items: center;\n    column-gap: 20px;\n    label {\n      margin-bottom: 0;\n    }\n    & .kv-item {\n      width: 100%;\n      margin: 10px 0px 10px 0px;\n      &.key, &.extra {\n        align-self: flex-start;\n      }\n      &.value .value-container {\n        &.upload-button {\n          position: relative;\n          display: flex;\n          justify-content: right;\n          align-items: center;\n        }\n        .file-selector {\n          position: absolute;\n          margin-right: 5px;\n        }\n      }\n      &.value textarea {\n        padding: 10px 10px 10px 10px;\n      }\n\n      .text-monospace:not(.conceal) {\n        font-family: monospace, monospace;\n      }\n    }\n  }\n  .remove {\n    text-align: center;\n    BUTTON {\n      padding: 0px;\n    }\n  }\n  .title {\n    margin-bottom: 10px;\n    .read-from-file {\n      float: right;\n    }\n  }\n  input {\n    height: 40px;\n    line-height: 1;\n  }\n  .footer {\n    .protip {\n      float: right;\n      padding: 5px 0;\n    }\n  }\n  .download {\n    text-align: right;\n  }\n  .copy-value {\n    padding: 0px 0px 0px 10px;\n  }\n}\n</style>\n"]}]}