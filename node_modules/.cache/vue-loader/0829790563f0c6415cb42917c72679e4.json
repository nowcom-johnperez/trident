{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/chart/monitoring/grafana/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/chart/monitoring/grafana/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IFJhZGlvR3JvdXAgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL1JhZGlvJzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwppbXBvcnQgS2V5VmFsdWUgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9LZXlWYWx1ZSc7CmltcG9ydCBBcnJheUxpc3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9BcnJheUxpc3QnOwppbXBvcnQgU3RvcmFnZUNsYXNzU2VsZWN0b3IgZnJvbSAnQHNoZWxsL2NoYXJ0L21vbml0b3JpbmcvU3RvcmFnZUNsYXNzU2VsZWN0b3InOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEFycmF5TGlzdCwKICAgIEtleVZhbHVlLAogICAgTGFiZWxlZElucHV0LAogICAgTGFiZWxlZFNlbGVjdCwKICAgIFJhZGlvR3JvdXAsCiAgICBTdG9yYWdlQ2xhc3NTZWxlY3RvciwKICB9LAogIHByb3BzOiB7CiAgICBhY2Nlc3NNb2RlczogewogICAgICB0eXBlOiAgICAgQXJyYXksCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgfSwKCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NyZWF0ZScsCiAgICB9LAoKICAgIHN0b3JhZ2VDbGFzc2VzOiB7CiAgICAgIHR5cGU6ICAgIEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9LAogICAgfSwKCiAgICBwdmNzOiB7CiAgICAgIHR5cGU6ICAgIEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9LAogICAgfSwKCiAgICB2YWx1ZTogewogICAgICB0eXBlOiAgICBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0sCiAgICB9LAogIH0sCiAgZGF0YSgpIHsKICAgIGNvbnN0IHBlcnNpc3RlbnRTdG9yYWdlVHlwZXMgPSBbJ2Rpc2FibGVkJywgJ2V4aXN0aW5nJywgJ3B2YycsICdzdGF0ZWZ1bHNldCddOwogICAgY29uc3QgcGVyc2lzdGVudFN0b3JhZ2VUeXBlTGFiZWxzID0gWwogICAgICB0aGlzLnQoJ2dlbmVyaWMuZGlzYWJsZWQnKSwKICAgICAgdGhpcy50KCdtb25pdG9yaW5nLmdyYWZhbmEuc3RvcmFnZS50eXBlcy5leGlzdGluZycpLAogICAgICB0aGlzLnQoJ21vbml0b3JpbmcuZ3JhZmFuYS5zdG9yYWdlLnR5cGVzLnRlbXBsYXRlJyksCiAgICAgIHRoaXMudCgnbW9uaXRvcmluZy5ncmFmYW5hLnN0b3JhZ2UudHlwZXMuc3RhdGVmdWxzZXQnKSwKICAgIF07CgogICAgaWYgKHRoaXMucHZjcy5sZW5ndGggPCAxKSB7CiAgICAgIHBlcnNpc3RlbnRTdG9yYWdlVHlwZXMuc3BsaWNlKDEsIDEpOwogICAgICBwZXJzaXN0ZW50U3RvcmFnZVR5cGVMYWJlbHMuc3BsaWNlKDEsIDEpOwogICAgfQoKICAgIGNvbnN0IHsgcGVyc2lzdGVuY2UgPSB7fSB9ID0gdGhpcy52YWx1ZS5ncmFmYW5hOwogICAgbGV0IHBlcnNpc3RlbnRTdG9yYWdlVHlwZTsKCiAgICBzd2l0Y2ggKHBlcnNpc3RlbmNlLnR5cGUpIHsKICAgIGNhc2UgJ3B2Yyc6CiAgICAgIHBlcnNpc3RlbnRTdG9yYWdlVHlwZSA9ICdwdmMnOwogICAgICBicmVhazsKICAgIGNhc2UgJ3N0YXRlZnVsc2V0JzoKICAgICAgcGVyc2lzdGVudFN0b3JhZ2VUeXBlID0gJ3N0YXRlZnVsc2V0JzsKICAgICAgYnJlYWs7CiAgICBkZWZhdWx0OgogICAgICBwZXJzaXN0ZW50U3RvcmFnZVR5cGUgPSBwZXJzaXN0ZW5jZS5leGlzdGluZ0NsYWltID8gJ2V4aXN0aW5nJyA6ICdkaXNhYmxlZCc7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgcGVyc2lzdGVudFN0b3JhZ2VUeXBlcywKICAgICAgcGVyc2lzdGVudFN0b3JhZ2VUeXBlTGFiZWxzLAogICAgICBwZXJzaXN0ZW50U3RvcmFnZVR5cGUsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHNob3dTdG9yYWdlQ2xhc3NlcygpIHsKICAgICAgY29uc3QgeyBzdG9yYWdlQ2xhc3NlcyB9ID0gdGhpczsKCiAgICAgIHJldHVybiAoc3RvcmFnZUNsYXNzZXMgfHwgW10pLmxlbmd0aCA+PSAxOwogICAgfSwKICB9LAogIHdhdGNoOiB7CiAgICBwZXJzaXN0ZW50U3RvcmFnZVR5cGUobmV3VHlwZSwgb2xkVHlwZSkgewogICAgICBsZXQgbmV3VmFsc091dDsKICAgICAgbGV0IHJlc2V0VmFsc091dDsKCiAgICAgIHN3aXRjaCAob2xkVHlwZSkgewogICAgICBjYXNlICdleGlzdGluZyc6CiAgICAgICAgcmVzZXRWYWxzT3V0ID0gewogICAgICAgICAgZXhpc3RpbmdDbGFpbTogbnVsbCwKICAgICAgICAgIHN1YlBhdGg6ICAgICAgIG51bGwsCiAgICAgICAgICB0eXBlOiAgICAgICAgICBudWxsLAogICAgICAgIH07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3B2Yyc6CiAgICAgICAgcmVzZXRWYWxzT3V0ID0gewogICAgICAgICAgYWNjZXNzTW9kZXM6ICAgICAgbnVsbCwKICAgICAgICAgIHN0b3JhZ2VDbGFzc05hbWU6IG51bGwsCiAgICAgICAgICBzaXplOiAgICAgICAgICAgICBudWxsLAogICAgICAgICAgc3ViUGF0aDogICAgICAgICAgbnVsbCwKICAgICAgICAgIGFubm90YXRpb25zOiAgICAgIG51bGwsCiAgICAgICAgICBmaW5hbGl6ZXJzOiAgICAgICBudWxsLAogICAgICAgIH07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3N0YXRlZnVsc2V0JzoKICAgICAgICByZXNldFZhbHNPdXQgPSB7CiAgICAgICAgICBhY2Nlc3NNb2RlczogICAgICBudWxsLAogICAgICAgICAgc3RvcmFnZUNsYXNzTmFtZTogbnVsbCwKICAgICAgICAgIHNpemU6ICAgICAgICAgICAgIG51bGwsCiAgICAgICAgICBzdWJQYXRoOiAgICAgICAgICBudWxsLAogICAgICAgIH07CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHN3aXRjaCAobmV3VHlwZSkgewogICAgICBjYXNlICdleGlzdGluZyc6CiAgICAgICAgbmV3VmFsc091dCA9IHsKICAgICAgICAgIGV4aXN0aW5nQ2xhaW06IG51bGwsCiAgICAgICAgICBzdWJQYXRoOiAgICAgICBudWxsLAogICAgICAgICAgdHlwZTogICAgICAgICAgbnVsbCwKICAgICAgICAgIGVuYWJsZWQ6ICAgICAgIHRydWUsCiAgICAgICAgfTsKICAgICAgICBicmVhazsKICAgICAgY2FzZSAncHZjJzoKICAgICAgICBuZXdWYWxzT3V0ID0gewogICAgICAgICAgYWNjZXNzTW9kZXM6ICAgICAgbnVsbCwKICAgICAgICAgIHN0b3JhZ2VDbGFzc05hbWU6IG51bGwsCiAgICAgICAgICBzaXplOiAgICAgICAgICAgICBudWxsLAogICAgICAgICAgc3ViUGF0aDogICAgICAgICAgbnVsbCwKICAgICAgICAgIHR5cGU6ICAgICAgICAgICAgICdwdmMnLAogICAgICAgICAgYW5ub3RhdGlvbnM6ICAgICAgbnVsbCwKICAgICAgICAgIGZpbmFsaXplcnM6ICAgICAgIG51bGwsCiAgICAgICAgICBlbmFibGVkOiAgICAgICAgICB0cnVlLAogICAgICAgIH07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3N0YXRlZnVsc2V0JzoKICAgICAgICBuZXdWYWxzT3V0ID0gewogICAgICAgICAgYWNjZXNzTW9kZXM6ICAgICAgbnVsbCwKICAgICAgICAgIHN0b3JhZ2VDbGFzc05hbWU6IG51bGwsCiAgICAgICAgICBzaXplOiAgICAgICAgICAgICBudWxsLAogICAgICAgICAgc3ViUGF0aDogICAgICAgICAgbnVsbCwKICAgICAgICAgIHR5cGU6ICAgICAgICAgICAgICdzdGF0ZWZ1bHNldCcsCiAgICAgICAgICBlbmFibGVkOiAgICAgICAgICB0cnVlLAogICAgICAgIH07CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMudmFsdWUuZ3JhZmFuYSwgJ3BlcnNpc3RlbmNlJyk7CiAgICAgICAgYnJlYWs7CiAgICAgIH0KCiAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLmdyYWZhbmEsICdwZXJzaXN0ZW5jZScsIHJlc2V0VmFsc091dCk7CiAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLmdyYWZhbmEsICdwZXJzaXN0ZW5jZScsIG5ld1ZhbHNPdXQpOwogICAgfSwKICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/chart/monitoring/grafana","sourcesContent":["<script>\nimport { RadioGroup } from '@components/Form/Radio';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport ArrayList from '@shell/components/form/ArrayList';\nimport StorageClassSelector from '@shell/chart/monitoring/StorageClassSelector';\n\nexport default {\n  components: {\n    ArrayList,\n    KeyValue,\n    LabeledInput,\n    LabeledSelect,\n    RadioGroup,\n    StorageClassSelector,\n  },\n  props: {\n    accessModes: {\n      type:     Array,\n      required: true,\n    },\n\n    mode: {\n      type:    String,\n      default: 'create',\n    },\n\n    storageClasses: {\n      type:    Array,\n      default: () => {\n        return [];\n      },\n    },\n\n    pvcs: {\n      type:    Array,\n      default: () => {\n        return [];\n      },\n    },\n\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      },\n    },\n  },\n  data() {\n    const persistentStorageTypes = ['disabled', 'existing', 'pvc', 'statefulset'];\n    const persistentStorageTypeLabels = [\n      this.t('generic.disabled'),\n      this.t('monitoring.grafana.storage.types.existing'),\n      this.t('monitoring.grafana.storage.types.template'),\n      this.t('monitoring.grafana.storage.types.statefulset'),\n    ];\n\n    if (this.pvcs.length < 1) {\n      persistentStorageTypes.splice(1, 1);\n      persistentStorageTypeLabels.splice(1, 1);\n    }\n\n    const { persistence = {} } = this.value.grafana;\n    let persistentStorageType;\n\n    switch (persistence.type) {\n    case 'pvc':\n      persistentStorageType = 'pvc';\n      break;\n    case 'statefulset':\n      persistentStorageType = 'statefulset';\n      break;\n    default:\n      persistentStorageType = persistence.existingClaim ? 'existing' : 'disabled';\n    }\n\n    return {\n      persistentStorageTypes,\n      persistentStorageTypeLabels,\n      persistentStorageType,\n    };\n  },\n  computed: {\n    showStorageClasses() {\n      const { storageClasses } = this;\n\n      return (storageClasses || []).length >= 1;\n    },\n  },\n  watch: {\n    persistentStorageType(newType, oldType) {\n      let newValsOut;\n      let resetValsOut;\n\n      switch (oldType) {\n      case 'existing':\n        resetValsOut = {\n          existingClaim: null,\n          subPath:       null,\n          type:          null,\n        };\n        break;\n      case 'pvc':\n        resetValsOut = {\n          accessModes:      null,\n          storageClassName: null,\n          size:             null,\n          subPath:          null,\n          annotations:      null,\n          finalizers:       null,\n        };\n        break;\n      case 'statefulset':\n        resetValsOut = {\n          accessModes:      null,\n          storageClassName: null,\n          size:             null,\n          subPath:          null,\n        };\n        break;\n      default:\n        break;\n      }\n\n      switch (newType) {\n      case 'existing':\n        newValsOut = {\n          existingClaim: null,\n          subPath:       null,\n          type:          null,\n          enabled:       true,\n        };\n        break;\n      case 'pvc':\n        newValsOut = {\n          accessModes:      null,\n          storageClassName: null,\n          size:             null,\n          subPath:          null,\n          type:             'pvc',\n          annotations:      null,\n          finalizers:       null,\n          enabled:          true,\n        };\n        break;\n      case 'statefulset':\n        newValsOut = {\n          accessModes:      null,\n          storageClassName: null,\n          size:             null,\n          subPath:          null,\n          type:             'statefulset',\n          enabled:          true,\n        };\n        break;\n      default:\n        this.$delete(this.value.grafana, 'persistence');\n        break;\n      }\n\n      this.$set(this.value.grafana, 'persistence', resetValsOut);\n      this.$set(this.value.grafana, 'persistence', newValsOut);\n    },\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"title\">\n      <h3>{{ t('monitoring.grafana.title') }}</h3>\n    </div>\n    <div class=\"grafana-config\">\n      <div class=\"row pt-10 pb-10\">\n        <div class=\"col span-12 persistent-storage-config\">\n          <RadioGroup\n            v-model=\"persistentStorageType\"\n            name=\"persistentStorageType\"\n            :label=\"t('monitoring.grafana.storage.label')\"\n            :labels=\"persistentStorageTypeLabels\"\n            :mode=\"mode\"\n            :options=\"persistentStorageTypes\"\n          />\n        </div>\n      </div>\n      <template v-if=\"persistentStorageType === 'existing'\">\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <StorageClassSelector\n              :value=\"value.grafana.persistence.existingClaim\"\n              :mode=\"mode\"\n              :options=\"pvcs\"\n              :label=\"t('monitoring.grafana.storage.existingClaim')\"\n              @updateName=\"(name) => $set(value.grafana.persistence, 'existingClaim', name)\"\n            />\n          </div>\n        </div>\n      </template>\n      <template v-else-if=\"persistentStorageType === 'pvc'\">\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <LabeledInput\n              v-model=\"value.grafana.persistence.size\"\n              :label=\"t('monitoring.grafana.storage.size')\"\n              :mode=\"mode\"\n            />\n          </div>\n          <div class=\"col span-6\">\n            <div v-if=\"showStorageClasses\">\n              <StorageClassSelector\n                :value=\"value.grafana.persistence.storageClassName\"\n                :mode=\"mode\"\n                :options=\"storageClasses\"\n                :label=\"t('monitoring.prometheus.storage.className')\"\n                @updateName=\"(name) => $set(value.grafana.persistence, 'storageClassName', name)\"\n              />\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <LabeledSelect\n              v-model=\"value.grafana.persistence.accessModes\"\n              :label=\"t('monitoring.grafana.storage.mode')\"\n              :localized-label=\"true\"\n              :mode=\"mode\"\n              :multiple=\"true\"\n              :options=\"accessModes\"\n              :reduce=\"({id})=> id\"\n            />\n          </div>\n        </div>\n        <div class=\"mt-20\">\n          <div class=\"row\">\n            <div class=\"col span-12\">\n              <KeyValue\n                v-model=\"value.grafana.persistence.annotations\"\n                :mode=\"mode\"\n                :protip=\"true\"\n                :read-allowed=\"false\"\n                :title=\"t('monitoring.grafana.storage.annotations')\"\n              >\n                <template #title>\n                  <h4>{{ t('monitoring.grafana.storage.annotations') }}</h4>\n                </template>\n              </KeyValue>\n            </div>\n          </div>\n        </div>\n        <div class=\"row mt-20\">\n          <div class=\"col span-12\">\n            <ArrayList\n              v-model=\"value.grafana.persistence.finalizers\"\n              table-class=\"fixed\"\n              :mode=\"mode\"\n              :title=\"t('monitoring.grafana.storage.finalizers')\"\n            >\n              <template #title>\n                <h4>{{ t('monitoring.grafana.storage.finalizers') }}</h4>\n              </template>\n            </ArrayList>\n          </div>\n        </div>\n      </template>\n      <template v-else-if=\"persistentStorageType === 'statefulset'\">\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <LabeledInput\n              v-model=\"value.grafana.persistence.size\"\n              :label=\"t('monitoring.grafana.storage.size')\"\n              :mode=\"mode\"\n            />\n          </div>\n          <div class=\"col span-6\">\n            <div v-if=\"showStorageClasses\">\n              <StorageClassSelector\n                :value=\"value.grafana.persistence.storageClassName\"\n                :mode=\"mode\"\n                :options=\"storageClasses\"\n                :label=\"t('monitoring.prometheus.storage.className')\"\n                @updateName=\"(name) => $set(value.grafana.persistence, 'storageClassName', name)\"\n              />\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <LabeledSelect\n              v-model=\"value.grafana.persistence.accessModes\"\n              :label=\"t('monitoring.grafana.storage.mode')\"\n              :localized-label=\"true\"\n              :mode=\"mode\"\n              :multiple=\"true\"\n              :options=\"accessModes\"\n              :reduce=\"({id})=> id\"\n            />\n          </div>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.grafana-config {\n  & > * {\n    margin-top: 10px;\n  }\n  // .persistent-storage-config {\n  //   .radio-group {\n  //     &:not(.text-label) {\n  //       display: flex;\n  //       justify-content: space-between;\n  //     }\n  //   }\n  // }\n}\n</style>\n"]}]}