{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/monitoring.coreos.com.alertmanagerconfig/types/pagerduty.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/monitoring.coreos.com.alertmanagerconfig/types/pagerduty.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0NoZWNrYm94JzsKaW1wb3J0IFNpbXBsZVNlY3JldFNlbGVjdG9yIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vU2ltcGxlU2VjcmV0U2VsZWN0b3InOwppbXBvcnQgeyBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDaGVja2JveCwgTGFiZWxlZElucHV0LCBMYWJlbGVkU2VsZWN0LCBTaW1wbGVTZWNyZXRTZWxlY3RvcgogIH0sCiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogICAgIFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgIE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBuYW1lc3BhY2U6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnaHR0cENvbmZpZycsIHRoaXMudmFsdWUuaHR0cENvbmZpZyB8fCB7fSk7CiAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ3NlbmRSZXNvbHZlZCcsIHR5cGVvZiB0aGlzLnZhbHVlLnNlbmRfcmVzb2x2ZWQgPT09ICdib29sZWFuJyA/IHRoaXMudmFsdWUuc2VuZF9yZXNvbHZlZCA6IHRydWUpOwoKICAgIGNvbnN0IGludGVncmF0aW9uTWFwcGluZyA9IHsKICAgICAgJ0V2ZW50cyBBUEkgdjInOiAncm91dGluZ0tleScsCiAgICAgIFByb21ldGhldXM6ICAgICAgJ3NlcnZpY2VLZXknCiAgICB9OwoKICAgIGNvbnN0IGludGVncmF0aW9uVHlwZU9wdGlvbnMgPSBPYmplY3Qua2V5cyhpbnRlZ3JhdGlvbk1hcHBpbmcpOwoKICAgIHJldHVybiB7CiAgICAgIGludGVncmF0aW9uTWFwcGluZywKICAgICAgaW50ZWdyYXRpb25UeXBlT3B0aW9ucywKICAgICAgaW50ZWdyYXRpb25UeXBlOiAgICAgICAgICAgICB0aGlzLnZhbHVlLnNlcnZpY2VLZXkgPyBpbnRlZ3JhdGlvblR5cGVPcHRpb25zWzFdIDogaW50ZWdyYXRpb25UeXBlT3B0aW9uc1swXSwKICAgICAgaW5pdGlhbFJvdXRpbmdLZXlTZWNyZXRLZXk6ICB0aGlzLnZhbHVlLnJvdXRpbmdLZXk/LmtleSB8fCAnJywKICAgICAgaW5pdGlhbFJvdXRpbmdLZXlTZWNyZXROYW1lOiB0aGlzLnZhbHVlLnJvdXRpbmdLZXk/Lm5hbWUgfHwgJycsCiAgICAgIGluaXRpYWxTZXJ2aWNlS2V5U2VjcmV0S2V5OiAgdGhpcy52YWx1ZS5zZXJ2aWNlS2V5Py5rZXkgfHwgJycsCiAgICAgIGluaXRpYWxTZXJ2aWNlS2V5U2VjcmV0TmFtZTogdGhpcy52YWx1ZS5zZXJ2aWNlS2V5Py5uYW1lIHx8ICcnLAogICAgICB2aWV3OiAgICAgICAgICAgICAgICAgICAgICAgIF9WSUVXLAogICAgICBub25lOiAgICAgICAgICAgICAgICAgICAgICAgICdfX1tbTk9ORV1dX18nLAogICAgfTsKICB9LAogIHdhdGNoOiB7CiAgICBpbnRlZ3JhdGlvblR5cGUoKSB7CiAgICAgIHRoaXMuaW50ZWdyYXRpb25UeXBlT3B0aW9ucy5mb3JFYWNoKChvcHRpb24pID0+IHsKICAgICAgICB0aGlzLnZhbHVlW3RoaXMuaW50ZWdyYXRpb25NYXBwaW5nW29wdGlvbl1dID0gbnVsbDsKICAgICAgfSk7CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGVSb3V0aW5nS2V5U2VjcmV0TmFtZShuYW1lKSB7CiAgICAgIGNvbnN0IGV4aXN0aW5nS2V5ID0gdGhpcy52YWx1ZS5yb3V0aW5nS2V5Py5rZXkgfHwgJyc7CgogICAgICBpZiAodGhpcy52YWx1ZS5yb3V0aW5nS2V5KSB7CiAgICAgICAgaWYgKG5hbWUgPT09IHRoaXMubm9uZSkgewogICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUucm91dGluZ0tleTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy52YWx1ZS5yb3V0aW5nS2V5ID0gewogICAgICAgICAgICBrZXk6IGV4aXN0aW5nS2V5LAogICAgICAgICAgICBuYW1lLAogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy52YWx1ZVsncm91dGluZ0tleSddID0gewogICAgICAgICAga2V5OiAnJywKICAgICAgICAgIG5hbWUKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgdXBkYXRlUm91dGluZ0tleVNlY3JldEtleShrZXkpIHsKICAgICAgY29uc3QgZXhpc3RpbmdOYW1lID0gdGhpcy52YWx1ZS5yb3V0aW5nS2V5Py5uYW1lIHx8ICcnOwoKICAgICAgaWYgKHRoaXMudmFsdWUucm91dGluZ0tleSkgewogICAgICAgIHRoaXMudmFsdWUucm91dGluZ0tleSA9IHsKICAgICAgICAgIG5hbWU6IGV4aXN0aW5nTmFtZSwKICAgICAgICAgIGtleQogICAgICAgIH07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy52YWx1ZVsncm91dGluZ0tleSddID0gewogICAgICAgICAgbmFtZTogJycsCiAgICAgICAgICBrZXkKICAgICAgICB9OwogICAgICB9CiAgICB9LAogICAgdXBkYXRlU2VydmljZUtleVNlY3JldE5hbWUobmFtZSkgewogICAgICBjb25zdCBleGlzdGluZ0tleSA9IHRoaXMudmFsdWUuc2VydmljZUtleT8ua2V5IHx8ICcnOwoKICAgICAgaWYgKHRoaXMudmFsdWUuc2VydmljZUtleSkgewogICAgICAgIGlmIChuYW1lID09PSB0aGlzLm5vbmUpIHsKICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLnNlcnZpY2VLZXk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMudmFsdWUuc2VydmljZUtleSA9IHsKICAgICAgICAgICAga2V5OiBleGlzdGluZ0tleSwKICAgICAgICAgICAgbmFtZSwKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudmFsdWVbJ3NlcnZpY2VLZXknXSA9IHsKICAgICAgICAgIGtleTogJycsCiAgICAgICAgICBuYW1lCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIHVwZGF0ZVNlcnZpY2VLZXlTZWNyZXRLZXkoa2V5KSB7CiAgICAgIGNvbnN0IGV4aXN0aW5nTmFtZSA9IHRoaXMudmFsdWUuc2VydmljZUtleT8ubmFtZSB8fCAnJzsKCiAgICAgIGlmICh0aGlzLnZhbHVlLnNlcnZpY2VLZXkpIHsKICAgICAgICB0aGlzLnZhbHVlLnNlcnZpY2VLZXkgPSB7CiAgICAgICAgICBuYW1lOiBleGlzdGluZ05hbWUsCiAgICAgICAgICBrZXkKICAgICAgICB9OwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudmFsdWVbJ3NlcnZpY2VLZXknXSA9IHsKICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAga2V5CiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0KCn07Cg=="},{"version":3,"sources":["pagerduty.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"pagerduty.vue","sourceRoot":"node_modules/@rancher/shell/edit/monitoring.coreos.com.alertmanagerconfig/types","sourcesContent":["<script>\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport SimpleSecretSelector from '@shell/components/form/SimpleSecretSelector';\nimport { _VIEW } from '@shell/config/query-params';\n\nexport default {\n  components: {\n    Checkbox, LabeledInput, LabeledSelect, SimpleSecretSelector\n  },\n  props: {\n    mode: {\n      type:     String,\n      required: true,\n    },\n    value: {\n      type:     Object,\n      required: true\n    },\n    namespace: {\n      type:    String,\n      default: ''\n    }\n  },\n  data() {\n    this.$set(this.value, 'httpConfig', this.value.httpConfig || {});\n    this.$set(this.value, 'sendResolved', typeof this.value.send_resolved === 'boolean' ? this.value.send_resolved : true);\n\n    const integrationMapping = {\n      'Events API v2': 'routingKey',\n      Prometheus:      'serviceKey'\n    };\n\n    const integrationTypeOptions = Object.keys(integrationMapping);\n\n    return {\n      integrationMapping,\n      integrationTypeOptions,\n      integrationType:             this.value.serviceKey ? integrationTypeOptions[1] : integrationTypeOptions[0],\n      initialRoutingKeySecretKey:  this.value.routingKey?.key || '',\n      initialRoutingKeySecretName: this.value.routingKey?.name || '',\n      initialServiceKeySecretKey:  this.value.serviceKey?.key || '',\n      initialServiceKeySecretName: this.value.serviceKey?.name || '',\n      view:                        _VIEW,\n      none:                        '__[[NONE]]__',\n    };\n  },\n  watch: {\n    integrationType() {\n      this.integrationTypeOptions.forEach((option) => {\n        this.value[this.integrationMapping[option]] = null;\n      });\n    }\n  },\n  methods: {\n    updateRoutingKeySecretName(name) {\n      const existingKey = this.value.routingKey?.key || '';\n\n      if (this.value.routingKey) {\n        if (name === this.none) {\n          delete this.value.routingKey;\n        } else {\n          this.value.routingKey = {\n            key: existingKey,\n            name,\n          };\n        }\n      } else {\n        this.value['routingKey'] = {\n          key: '',\n          name\n        };\n      }\n    },\n    updateRoutingKeySecretKey(key) {\n      const existingName = this.value.routingKey?.name || '';\n\n      if (this.value.routingKey) {\n        this.value.routingKey = {\n          name: existingName,\n          key\n        };\n      } else {\n        this.value['routingKey'] = {\n          name: '',\n          key\n        };\n      }\n    },\n    updateServiceKeySecretName(name) {\n      const existingKey = this.value.serviceKey?.key || '';\n\n      if (this.value.serviceKey) {\n        if (name === this.none) {\n          delete this.value.serviceKey;\n        } else {\n          this.value.serviceKey = {\n            key: existingKey,\n            name,\n          };\n        }\n      } else {\n        this.value['serviceKey'] = {\n          key: '',\n          name\n        };\n      }\n    },\n    updateServiceKeySecretKey(key) {\n      const existingName = this.value.serviceKey?.name || '';\n\n      if (this.value.serviceKey) {\n        this.value.serviceKey = {\n          name: existingName,\n          key\n        };\n      } else {\n        this.value['serviceKey'] = {\n          name: '',\n          key\n        };\n      }\n    }\n  }\n\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row\">\n      <div class=\"col span-12\">\n        <h3>Target</h3>\n      </div>\n    </div>\n    <div\n      v-if=\"namespace\"\n      class=\"row mb-20\"\n    >\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"integrationType\"\n          :options=\"integrationTypeOptions\"\n          :mode=\"mode\"\n          label=\"Integration Type\"\n        />\n      </div>\n    </div>\n\n    <div\n      v-if=\"namespace\"\n      class=\"row mb-20\"\n    >\n      <SimpleSecretSelector\n        v-if=\"integrationType === 'Events API v2'\"\n        :initial-key=\"initialRoutingKeySecretKey\"\n        :mode=\"mode\"\n        :initial-name=\"initialRoutingKeySecretName\"\n        :namespace=\"namespace\"\n        :disabled=\"mode === view\"\n        :secret-name-label=\"t('monitoring.alertmanagerConfig.pagerDuty.routingKey')\"\n        @updateSecretName=\"updateRoutingKeySecretName\"\n        @updateSecretKey=\"updateRoutingKeySecretKey\"\n      />\n      <SimpleSecretSelector\n        v-if=\"integrationType === 'Prometheus'\"\n        :initial-key=\"initialServiceKeySecretKey\"\n        :mode=\"mode\"\n        :initial-name=\"initialServiceKeySecretName\"\n        :namespace=\"namespace\"\n        :disabled=\"mode === view\"\n        :secret-name-label=\"t('monitoring.alertmanagerConfig.pagerDuty.serviceKey')\"\n        @updateSecretName=\"updateServiceKeySecretName\"\n        @updateSecretKey=\"updateServiceKeySecretKey\"\n      />\n    </div>\n    <Banner\n      v-else\n      color=\"error\"\n    >\n      {{ t('alertmanagerConfigReceiver.namespaceWarning') }}\n    </Banner>\n\n    <div class=\"row mb-20\">\n      <div class=\"col span-12\">\n        <LabeledInput\n          v-model=\"value.httpConfig.proxyUrl\"\n          :mode=\"mode\"\n          label=\"Proxy URL\"\n          placeholder=\"e.g. http://my-proxy/\"\n        />\n      </div>\n    </div>\n    <div class=\"row\">\n      <Checkbox\n        v-model=\"value.sendResolved\"\n        :mode=\"mode\"\n        label=\"Enable send resolved alerts\"\n      />\n    </div>\n  </div>\n</template>\n"]}]}