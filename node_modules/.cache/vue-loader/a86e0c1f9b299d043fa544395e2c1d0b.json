{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgQ3JlYXRlRWRpdFZpZXcgZnJvbSAnQHNoZWxsL21peGlucy9jcmVhdGUtZWRpdC12aWV3JzsNCmltcG9ydCBDcnVSZXNvdXJjZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9DcnVSZXNvdXJjZSc7DQppbXBvcnQgTmFtZU5zRGVzY3JpcHRpb24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9OYW1lTnNEZXNjcmlwdGlvbic7DQppbXBvcnQgQXJyYXlMaXN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vQXJyYXlMaXN0JzsNCmltcG9ydCBUYWIgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvVGFiYmVkL1RhYic7DQppbXBvcnQgVGFiYmVkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1RhYmJlZCc7DQppbXBvcnQgQmFubmVyIGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lci9CYW5uZXIudnVlJzsNCmltcG9ydCB7IFJhZGlvR3JvdXAgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL1JhZGlvJzsNCmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7DQppbXBvcnQgeyBfQ1JFQVRFLCBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsNCmltcG9ydCB7IFBST1ZJU0lPTkVSX09QVElPTlMgfSBmcm9tICdAc2hlbGwvbW9kZWxzL3N0b3JhZ2UuazhzLmlvLnN0b3JhZ2VjbGFzcyc7DQppbXBvcnQgeyBtYXBGZWF0dXJlLCBVTlNVUFBPUlRFRF9TVE9SQUdFX0RSSVZFUlMgfSBmcm9tICdAc2hlbGwvc3RvcmUvZmVhdHVyZXMnOw0KaW1wb3J0IHsgQ1NJX0RSSVZFUiwgTE9OR0hPUk5fRFJJVkVSIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogJ1N0b3JhZ2VDbGFzcycsDQoNCiAgY29tcG9uZW50czogew0KICAgIEFycmF5TGlzdCwNCiAgICBDcnVSZXNvdXJjZSwNCiAgICBMYWJlbGVkU2VsZWN0LA0KICAgIE5hbWVOc0Rlc2NyaXB0aW9uLA0KICAgIFJhZGlvR3JvdXAsDQogICAgVGFiLA0KICAgIFRhYmJlZCwNCiAgICBCYW5uZXINCiAgfSwNCg0KICBtaXhpbnM6IFtDcmVhdGVFZGl0Vmlld10sDQoNCiAgYXN5bmMgZmV0Y2goKSB7DQogICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NsdXN0ZXIvc2NoZW1hRm9yJ10oQ1NJX0RSSVZFUikpIHsNCiAgICAgIHRoaXMuY3NpRHJpdmVycyA9IGF3YWl0IHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjbHVzdGVyL2ZpbmRBbGwnLCB7IHR5cGU6IENTSV9EUklWRVIgfSk7DQogICAgfQ0KICB9LA0KDQogIGRhdGEoKSB7DQogICAgY29uc3QgcmVjbGFpbVBvbGljeU9wdGlvbnMgPSBbDQogICAgICB7DQogICAgICAgIGxhYmVsOiB0aGlzLnQoJ3N0b3JhZ2VDbGFzcy5jdXN0b21pemUucmVjbGFpbVBvbGljeS5kZWxldGUnKSwNCiAgICAgICAgdmFsdWU6ICdEZWxldGUnDQogICAgICB9LA0KICAgICAgew0KICAgICAgICBsYWJlbDogdGhpcy50KCdzdG9yYWdlQ2xhc3MuY3VzdG9taXplLnJlY2xhaW1Qb2xpY3kucmV0YWluJyksDQogICAgICAgIHZhbHVlOiAnUmV0YWluJw0KICAgICAgfV07DQoNCiAgICBjb25zdCBhbGxvd1ZvbHVtZUV4cGFuc2lvbk9wdGlvbnMgPSBbDQogICAgICB7DQogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2dlbmVyaWMuZW5hYmxlZCcpLA0KICAgICAgICB2YWx1ZTogdHJ1ZQ0KICAgICAgfSwNCiAgICAgIHsNCiAgICAgICAgbGFiZWw6IHRoaXMudCgnZ2VuZXJpYy5kaXNhYmxlZCcpLA0KICAgICAgICB2YWx1ZTogZmFsc2UNCiAgICAgIH0NCiAgICBdOw0KDQogICAgY29uc3Qgdm9sdW1lQmluZGluZ01vZGVPcHRpb25zID0gWw0KICAgICAgew0KICAgICAgICBsYWJlbDogdGhpcy50KCdzdG9yYWdlQ2xhc3MuY3VzdG9taXplLnZvbHVtZUJpbmRpbmdNb2RlLm5vdycpLA0KICAgICAgICB2YWx1ZTogJ0ltbWVkaWF0ZScNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIGxhYmVsOiB0aGlzLnQoJ3N0b3JhZ2VDbGFzcy5jdXN0b21pemUudm9sdW1lQmluZGluZ01vZGUubGF0ZXInKSwNCiAgICAgICAgdmFsdWU6ICdXYWl0Rm9yRmlyc3RDb25zdW1lcicNCiAgICAgIH0NCiAgICBdOw0KDQogICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdwYXJhbWV0ZXJzJywgdGhpcy52YWx1ZS5wYXJhbWV0ZXJzIHx8IHt9KTsNCiAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ3Byb3Zpc2lvbmVyJywgdGhpcy52YWx1ZS5wcm92aXNpb25lciB8fCBQUk9WSVNJT05FUl9PUFRJT05TWzBdLnZhbHVlKTsNCiAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ2FsbG93Vm9sdW1lRXhwYW5zaW9uJywgdGhpcy52YWx1ZS5hbGxvd1ZvbHVtZUV4cGFuc2lvbiB8fCBhbGxvd1ZvbHVtZUV4cGFuc2lvbk9wdGlvbnNbMV0udmFsdWUpOw0KICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAncmVjbGFpbVBvbGljeScsIHRoaXMudmFsdWUucmVjbGFpbVBvbGljeSB8fCByZWNsYWltUG9saWN5T3B0aW9uc1swXS52YWx1ZSk7DQogICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICd2b2x1bWVCaW5kaW5nTW9kZScsIHRoaXMudmFsdWUudm9sdW1lQmluZGluZ01vZGUgfHwgdm9sdW1lQmluZGluZ01vZGVPcHRpb25zWzBdLnZhbHVlKTsNCg0KICAgIHJldHVybiB7DQogICAgICByZWNsYWltUG9saWN5T3B0aW9ucywNCiAgICAgIGFsbG93Vm9sdW1lRXhwYW5zaW9uT3B0aW9ucywNCiAgICAgIHZvbHVtZUJpbmRpbmdNb2RlT3B0aW9ucywNCiAgICAgIG1vdW50T3B0aW9uczogW10sDQogICAgICBjc2lEcml2ZXJzOiAgIFtdLA0KICAgIH07DQogIH0sDQoNCiAgY29tcHV0ZWQ6IHsNCiAgICBzaG93VW5zdXBwb3J0ZWRTdG9yYWdlOiBtYXBGZWF0dXJlKFVOU1VQUE9SVEVEX1NUT1JBR0VfRFJJVkVSUyksDQoNCiAgICBtb2RlT3ZlcnJpZGUoKSB7DQogICAgICByZXR1cm4gdGhpcy5pc0NyZWF0ZSA/IF9DUkVBVEUgOiBfVklFVzsNCiAgICB9LA0KDQogICAgcHJvdmlzaW9uZXJXYXRjaCgpIHsNCiAgICAgIHJldHVybiB0aGlzLnZhbHVlLnByb3Zpc2lvbmVyOw0KICAgIH0sDQoNCiAgICAvLyBQUk9WSVNJT05FUl9PUFRJT05TIGFyZSBwcm92cyB3aXRoIGN1c3RvbSBjb21wb25lbnRzOiBhbGwgdGhlIGluLXRyZWUgdHlwZXMgKyBsb25naG9ybiBhbmQgaGFydmVzdGVyDQogICAgLy8gQ1NJIGRyaXZlcnMgYXJlIHRoaXJkIHBhcnR5IHByb3Zpc2lvbmVyIG9wdGlvbnMgLSB0aGlzLmNzaURyaXZlcnMgaXMgYSBsaXN0IG9mIHRoZSBvbmVzIHRoYXQgYXJlIGN1cnJlbnRseSBpbnN0YWxsZWQgb24gdGhpcyBjbHVzdGVyDQogICAgcHJvdmlzaW9uZXJzKCkgew0KICAgICAgY29uc3QgZHJvcGRvd25PcHRpb25zID0gW107DQogICAgICBjb25zdCBwcm92aXNpb25lck9wdGlvbnNEcml2ZXJzID0gW107DQoNCiAgICAgIFBST1ZJU0lPTkVSX09QVElPTlMuZm9yRWFjaCgob3B0KSA9PiB7DQogICAgICAgIHByb3Zpc2lvbmVyT3B0aW9uc0RyaXZlcnMucHVzaChvcHQudmFsdWUpOw0KICAgICAgICBpZiAodGhpcy5zaG93VW5zdXBwb3J0ZWRTdG9yYWdlIHx8IG9wdC5zdXBwb3J0ZWQpIHsNCiAgICAgICAgICBsZXQgbGFiZWwgPSB0aGlzLnQob3B0LmxhYmVsS2V5KTsNCg0KICAgICAgICAgIGlmIChvcHQudmFsdWUuaW5jbHVkZXMoJ2t1YmVybmV0ZXMnKSkgew0KICAgICAgICAgICAgbGFiZWwgKz0gYCAkeyB0aGlzLnQoJ3BlcnNpc3RlbnRWb2x1bWUucGx1Z2luLmluVHJlZScpIH1gOw0KICAgICAgICAgIH0NCiAgICAgICAgICBpZiAoIW9wdC5zdXBwb3J0ZWQpIHsNCiAgICAgICAgICAgIGxhYmVsICs9IGAgJHsgdGhpcy50KCdwZXJzaXN0ZW50Vm9sdW1lLnBsdWdpbi51bnN1cHBvcnRlZCcpIH1gOw0KICAgICAgICAgIH0NCiAgICAgICAgICBkcm9wZG93bk9wdGlvbnMucHVzaCh7DQogICAgICAgICAgICB2YWx1ZTogICAgICBvcHQudmFsdWUsDQogICAgICAgICAgICBsYWJlbCwNCiAgICAgICAgICAgIGRlcHJlY2F0ZWQ6IG9wdC5kZXByZWNhdGVkDQogICAgICAgICAgfSk7DQogICAgICAgIH0NCiAgICAgIH0pOw0KDQogICAgICB0aGlzLmNzaURyaXZlcnMuZm9yRWFjaCgoZHJpdmVyKSA9PiB7DQogICAgICAgIC8vIGlmIGEgY3NpRHJpdmVyIGlzIGluIFBST1ZJU0lPTkVSX09QVElPTlMsIGl0J3MgYWxyZWFkeSBpbiB0aGUgZHJvcGRvd24gbGlzdDsgZG9udCBhZGQgYWdhaW4NCiAgICAgICAgaWYgKGRyaXZlci5tZXRhZGF0YS5uYW1lID09PSBMT05HSE9STl9EUklWRVIgfHwgcHJvdmlzaW9uZXJPcHRpb25zRHJpdmVycy5pbmNsdWRlcyhkcml2ZXIubWV0YWRhdGEubmFtZSkpIHsNCiAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgY29uc3QgZmFsbGJhY2sgPSBgJHsgZHJpdmVyLm1ldGFkYXRhLm5hbWUgfSAgJHsgdGhpcy50KCdwZXJzaXN0ZW50Vm9sdW1lLmNzaS5zdWZmaXgnKSB9YDsNCg0KICAgICAgICBkcm9wZG93bk9wdGlvbnMucHVzaCh7DQogICAgICAgICAgdmFsdWU6IGRyaXZlci5tZXRhZGF0YS5uYW1lLA0KICAgICAgICAgIGxhYmVsOiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydpMThuL3dpdGhGYWxsYmFjayddKGBwZXJzaXN0ZW50Vm9sdW1lLmNzaS5kcml2ZXJzLiR7IGRyaXZlci5tZXRhZGF0YS5uYW1lLnJlcGxhY2VBbGwoJy4nLCAnLScpIH1gLCBudWxsLCBmYWxsYmFjaykNCiAgICAgICAgfSk7DQogICAgICB9KTsNCiAgICAgIGNvbnN0IG91dCA9IGRyb3Bkb3duT3B0aW9ucy5zb3J0KChhLCBiKSA9PiBhLmxhYmVsLnRvTG93ZXJDYXNlKCkgPiBiLmxhYmVsLnRvTG93ZXJDYXNlKCkgPyAxIDogLTEpOw0KDQogICAgICByZXR1cm4gb3V0Ow0KICAgIH0sDQoNCiAgICBwcm92aXNpb25lcklzRGVwcmVjYXRlZCgpIHsNCiAgICAgIGNvbnN0IHByb3Zpc2lvbmVyT3B0ID0gUFJPVklTSU9ORVJfT1BUSU9OUy5maW5kKChvcHQpID0+IG9wdC52YWx1ZSA9PT0gdGhpcy52YWx1ZS5wcm92aXNpb25lcik7DQoNCiAgICAgIHJldHVybiBwcm92aXNpb25lck9wdCAmJiBwcm92aXNpb25lck9wdC5kZXByZWNhdGVkICE9PSB1bmRlZmluZWQ7DQogICAgfSwNCg0KICAgIHByb3Zpc2lvbmVySXNIaWRlQ3VzdG9taXplKCkgew0KICAgICAgY29uc3QgcHJvdmlzaW9uZXJPcHQgPSBQUk9WSVNJT05FUl9PUFRJT05TLmZpbmQoKG9wdCkgPT4gb3B0LnZhbHVlID09PSB0aGlzLnZhbHVlLnByb3Zpc2lvbmVyKTsNCg0KICAgICAgcmV0dXJuIHByb3Zpc2lvbmVyT3B0ICYmIHByb3Zpc2lvbmVyT3B0LmhpZGVDdXN0b21pemUgIT09IHVuZGVmaW5lZDsNCiAgICB9LA0KICB9LA0KDQogIHdhdGNoOiB7DQogICAgcHJvdmlzaW9uZXJXYXRjaCgpIHsNCiAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAncGFyYW1ldGVycycsIHt9KTsNCiAgICB9DQogIH0sDQoNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnJlZ2lzdGVyQmVmb3JlSG9vayh0aGlzLndpbGxTYXZlLCAnd2lsbFNhdmUnKTsNCiAgfSwNCg0KICBtZXRob2RzOiB7DQogICAgZ2V0Q29tcG9uZW50KG5hbWUpIHsNCiAgICAgIGNvbnN0IGlzQ3VzdG9tID0gIVBST1ZJU0lPTkVSX09QVElPTlMuZmluZCgobykgPT4gby52YWx1ZSA9PT0gbmFtZSk7DQogICAgICBjb25zdCBwcm92aXNpb25lciA9IGlzQ3VzdG9tID8gJ2N1c3RvbScgOiBuYW1lOw0KDQogICAgICByZXR1cm4gcmVxdWlyZShgLi9wcm92aXNpb25lcnMvJHsgcHJvdmlzaW9uZXIgfWApLmRlZmF1bHQ7DQogICAgfSwNCg0KICAgIHVwZGF0ZVByb3Zpc2lvbmVyKGV2ZW50KSB7DQogICAgICBjb25zdCBwcm92aXNpb25lciA9IGV2ZW50LmxhYmVsS2V5ID8gZXZlbnQubGFiZWxLZXkgOiBldmVudDsNCg0KICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdwcm92aXNpb25lcicsIHByb3Zpc2lvbmVyKTsNCiAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnYWxsb3dWb2x1bWVFeHBhbnNpb24nLCBwcm92aXNpb25lciA9PT0gJ2RyaXZlci5sb25naG9ybi5pbycpOw0KICAgIH0sDQogICAgd2lsbFNhdmUoKSB7DQogICAgICBPYmplY3Qua2V5cyh0aGlzLnZhbHVlLnBhcmFtZXRlcnMpLmZvckVhY2goKGtleSkgPT4gew0KICAgICAgICBpZiAodGhpcy52YWx1ZS5wYXJhbWV0ZXJzW2tleV0gPT09IG51bGwpIHsNCiAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5wYXJhbWV0ZXJzW2tleV07DQogICAgICAgIH0NCiAgICAgIH0pOw0KICAgIH0sDQogICAgcHJvdmlzaW9uZXJMYWJlbChwcm92aXNpb25lcikgew0KICAgICAgY29uc3QgcHJvdmlzaW9uZXJPcHQgPSBQUk9WSVNJT05FUl9PUFRJT05TLmZpbmQoKG9wdCkgPT4gb3B0LnZhbHVlID09PSBwcm92aXNpb25lcik7DQoNCiAgICAgIHJldHVybiBwcm92aXNpb25lck9wdD8ubGFiZWxLZXkgPyB0aGlzLnQocHJvdmlzaW9uZXJPcHQubGFiZWxLZXkpIDogcHJvdmlzaW9uZXI7DQogICAgfSwNCiAgICBnZXRPcHRpb25MYWJlbChvcHQpIHsNCiAgICAgIGlmIChvcHQuZGVwcmVjYXRlZCkgew0KICAgICAgICByZXR1cm4gYCR7IG9wdC5sYWJlbCB9ICR7IHRoaXMudCgnc3RvcmFnZUNsYXNzLmRlcHJlY2F0ZWQudGl0bGUnKSB9YDsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIG9wdC5sYWJlbDsNCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/edit/storage.k8s.io.storageclass","sourcesContent":["<script>\r\nimport CreateEditView from '@shell/mixins/create-edit-view';\r\nimport CruResource from '@shell/components/CruResource';\r\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\r\nimport ArrayList from '@shell/components/form/ArrayList';\r\nimport Tab from '@shell/components/Tabbed/Tab';\r\nimport Tabbed from '@shell/components/Tabbed';\r\nimport Banner from '@components/Banner/Banner.vue';\r\nimport { RadioGroup } from '@components/Form/Radio';\r\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\r\nimport { _CREATE, _VIEW } from '@shell/config/query-params';\r\nimport { PROVISIONER_OPTIONS } from '@shell/models/storage.k8s.io.storageclass';\r\nimport { mapFeature, UNSUPPORTED_STORAGE_DRIVERS } from '@shell/store/features';\r\nimport { CSI_DRIVER, LONGHORN_DRIVER } from '@shell/config/types';\r\n\r\nexport default {\r\n  name: 'StorageClass',\r\n\r\n  components: {\r\n    ArrayList,\r\n    CruResource,\r\n    LabeledSelect,\r\n    NameNsDescription,\r\n    RadioGroup,\r\n    Tab,\r\n    Tabbed,\r\n    Banner\r\n  },\r\n\r\n  mixins: [CreateEditView],\r\n\r\n  async fetch() {\r\n    if (this.$store.getters['cluster/schemaFor'](CSI_DRIVER)) {\r\n      this.csiDrivers = await this.$store.dispatch('cluster/findAll', { type: CSI_DRIVER });\r\n    }\r\n  },\r\n\r\n  data() {\r\n    const reclaimPolicyOptions = [\r\n      {\r\n        label: this.t('storageClass.customize.reclaimPolicy.delete'),\r\n        value: 'Delete'\r\n      },\r\n      {\r\n        label: this.t('storageClass.customize.reclaimPolicy.retain'),\r\n        value: 'Retain'\r\n      }];\r\n\r\n    const allowVolumeExpansionOptions = [\r\n      {\r\n        label: this.t('generic.enabled'),\r\n        value: true\r\n      },\r\n      {\r\n        label: this.t('generic.disabled'),\r\n        value: false\r\n      }\r\n    ];\r\n\r\n    const volumeBindingModeOptions = [\r\n      {\r\n        label: this.t('storageClass.customize.volumeBindingMode.now'),\r\n        value: 'Immediate'\r\n      },\r\n      {\r\n        label: this.t('storageClass.customize.volumeBindingMode.later'),\r\n        value: 'WaitForFirstConsumer'\r\n      }\r\n    ];\r\n\r\n    this.$set(this.value, 'parameters', this.value.parameters || {});\r\n    this.$set(this.value, 'provisioner', this.value.provisioner || PROVISIONER_OPTIONS[0].value);\r\n    this.$set(this.value, 'allowVolumeExpansion', this.value.allowVolumeExpansion || allowVolumeExpansionOptions[1].value);\r\n    this.$set(this.value, 'reclaimPolicy', this.value.reclaimPolicy || reclaimPolicyOptions[0].value);\r\n    this.$set(this.value, 'volumeBindingMode', this.value.volumeBindingMode || volumeBindingModeOptions[0].value);\r\n\r\n    return {\r\n      reclaimPolicyOptions,\r\n      allowVolumeExpansionOptions,\r\n      volumeBindingModeOptions,\r\n      mountOptions: [],\r\n      csiDrivers:   [],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    showUnsupportedStorage: mapFeature(UNSUPPORTED_STORAGE_DRIVERS),\r\n\r\n    modeOverride() {\r\n      return this.isCreate ? _CREATE : _VIEW;\r\n    },\r\n\r\n    provisionerWatch() {\r\n      return this.value.provisioner;\r\n    },\r\n\r\n    // PROVISIONER_OPTIONS are provs with custom components: all the in-tree types + longhorn and harvester\r\n    // CSI drivers are third party provisioner options - this.csiDrivers is a list of the ones that are currently installed on this cluster\r\n    provisioners() {\r\n      const dropdownOptions = [];\r\n      const provisionerOptionsDrivers = [];\r\n\r\n      PROVISIONER_OPTIONS.forEach((opt) => {\r\n        provisionerOptionsDrivers.push(opt.value);\r\n        if (this.showUnsupportedStorage || opt.supported) {\r\n          let label = this.t(opt.labelKey);\r\n\r\n          if (opt.value.includes('kubernetes')) {\r\n            label += ` ${ this.t('persistentVolume.plugin.inTree') }`;\r\n          }\r\n          if (!opt.supported) {\r\n            label += ` ${ this.t('persistentVolume.plugin.unsupported') }`;\r\n          }\r\n          dropdownOptions.push({\r\n            value:      opt.value,\r\n            label,\r\n            deprecated: opt.deprecated\r\n          });\r\n        }\r\n      });\r\n\r\n      this.csiDrivers.forEach((driver) => {\r\n        // if a csiDriver is in PROVISIONER_OPTIONS, it's already in the dropdown list; dont add again\r\n        if (driver.metadata.name === LONGHORN_DRIVER || provisionerOptionsDrivers.includes(driver.metadata.name)) {\r\n          return;\r\n        }\r\n        const fallback = `${ driver.metadata.name }  ${ this.t('persistentVolume.csi.suffix') }`;\r\n\r\n        dropdownOptions.push({\r\n          value: driver.metadata.name,\r\n          label: this.$store.getters['i18n/withFallback'](`persistentVolume.csi.drivers.${ driver.metadata.name.replaceAll('.', '-') }`, null, fallback)\r\n        });\r\n      });\r\n      const out = dropdownOptions.sort((a, b) => a.label.toLowerCase() > b.label.toLowerCase() ? 1 : -1);\r\n\r\n      return out;\r\n    },\r\n\r\n    provisionerIsDeprecated() {\r\n      const provisionerOpt = PROVISIONER_OPTIONS.find((opt) => opt.value === this.value.provisioner);\r\n\r\n      return provisionerOpt && provisionerOpt.deprecated !== undefined;\r\n    },\r\n\r\n    provisionerIsHideCustomize() {\r\n      const provisionerOpt = PROVISIONER_OPTIONS.find((opt) => opt.value === this.value.provisioner);\r\n\r\n      return provisionerOpt && provisionerOpt.hideCustomize !== undefined;\r\n    },\r\n  },\r\n\r\n  watch: {\r\n    provisionerWatch() {\r\n      this.$set(this.value, 'parameters', {});\r\n    }\r\n  },\r\n\r\n  created() {\r\n    this.registerBeforeHook(this.willSave, 'willSave');\r\n  },\r\n\r\n  methods: {\r\n    getComponent(name) {\r\n      const isCustom = !PROVISIONER_OPTIONS.find((o) => o.value === name);\r\n      const provisioner = isCustom ? 'custom' : name;\r\n\r\n      return require(`./provisioners/${ provisioner }`).default;\r\n    },\r\n\r\n    updateProvisioner(event) {\r\n      const provisioner = event.labelKey ? event.labelKey : event;\r\n\r\n      this.$set(this.value, 'provisioner', provisioner);\r\n      this.$set(this.value, 'allowVolumeExpansion', provisioner === 'driver.longhorn.io');\r\n    },\r\n    willSave() {\r\n      Object.keys(this.value.parameters).forEach((key) => {\r\n        if (this.value.parameters[key] === null) {\r\n          delete this.value.parameters[key];\r\n        }\r\n      });\r\n    },\r\n    provisionerLabel(provisioner) {\r\n      const provisionerOpt = PROVISIONER_OPTIONS.find((opt) => opt.value === provisioner);\r\n\r\n      return provisionerOpt?.labelKey ? this.t(provisionerOpt.labelKey) : provisioner;\r\n    },\r\n    getOptionLabel(opt) {\r\n      if (opt.deprecated) {\r\n        return `${ opt.label } ${ this.t('storageClass.deprecated.title') }`;\r\n      }\r\n\r\n      return opt.label;\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <CruResource\r\n    :done-route=\"doneRoute\"\r\n    :mode=\"mode\"\r\n    :resource=\"value\"\r\n    :subtypes=\"[]\"\r\n    :validation-passed=\"true\"\r\n    :errors=\"errors\"\r\n    @error=\"e=>errors = e\"\r\n    @finish=\"save\"\r\n    @cancel=\"done\"\r\n  >\r\n    <NameNsDescription\r\n      :namespaced=\"false\"\r\n      :value=\"value\"\r\n      :mode=\"modeOverride\"\r\n      :register-before-hook=\"registerBeforeHook\"\r\n    />\r\n\r\n    <LabeledSelect\r\n      :value=\"value.provisioner\"\r\n      label=\"Provisioner\"\r\n      :options=\"provisioners\"\r\n      :localized-label=\"true\"\r\n      :get-option-label=\"getOptionLabel\"\r\n      :mode=\"modeOverride\"\r\n      :searchable=\"true\"\r\n      :taggable=\"true\"\r\n      class=\"mb-20\"\r\n      @input=\"updateProvisioner($event)\"\r\n    />\r\n    <Banner\r\n      v-if=\"provisionerIsDeprecated\"\r\n      color=\"warning\"\r\n    >\r\n      <t\r\n        k=\"storageClass.deprecated.warning\"\r\n        raw\r\n        :provisioner=\"provisionerLabel(value.provisioner)\"\r\n      />\r\n    </Banner>\r\n    <Tabbed :side-tabs=\"true\">\r\n      <Tab\r\n        name=\"parameters\"\r\n        :label=\"t('storageClass.parameters.label')\"\r\n        :weight=\"2\"\r\n      >\r\n        <component\r\n          :is=\"getComponent(value.provisioner)\"\r\n          :key=\"value.provisioner\"\r\n          :value=\"value\"\r\n          :mode=\"modeOverride\"\r\n        />\r\n      </Tab>\r\n      <Tab\r\n        v-if=\"!provisionerIsHideCustomize\"\r\n        name=\"customize\"\r\n        :label=\"t('storageClass.customize.label')\"\r\n      >\r\n        <div class=\"row mt-20\">\r\n          <div class=\"col span-6\">\r\n            <div class=\"row mb-20\">\r\n              <div class=\"col span-12\">\r\n                <RadioGroup\r\n                  v-model=\"value.reclaimPolicy\"\r\n                  name=\"reclaimPolicy\"\r\n                  :label=\"t('storageClass.customize.reclaimPolicy.label')\"\r\n                  :mode=\"modeOverride\"\r\n                  :options=\"reclaimPolicyOptions\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"row mb-20\">\r\n              <div class=\"col span-12\">\r\n                <RadioGroup\r\n                  v-model=\"value.allowVolumeExpansion\"\r\n                  name=\"allowVolumeExpansion\"\r\n                  :label=\"t('storageClass.customize.allowVolumeExpansion.label')\"\r\n                  :mode=\"mode\"\r\n                  :options=\"allowVolumeExpansionOptions\"\r\n                />\r\n              </div>\r\n            </div>\r\n          </div>\r\n          <div class=\"col span-6\">\r\n            <h3>{{ t('storageClass.customize.mountOptions.label') }}</h3>\r\n            <ArrayList\r\n              v-model=\"value.mountOptions\"\r\n              :mode=\"mode\"\r\n              :label=\"t('storageClass.customize.mountOptions.label')\"\r\n              :add-label=\"t('storageClass.customize.mountOptions.addLabel')\"\r\n            />\r\n          </div>\r\n        </div>\r\n        <div class=\"row\">\r\n          <div class=\"col span-6\">\r\n            <RadioGroup\r\n              v-model=\"value.volumeBindingMode\"\r\n              name=\"volumeBindingMode\"\r\n              :label=\"t('storageClass.customize.volumeBindingMode.label')\"\r\n              :mode=\"modeOverride\"\r\n              :options=\"volumeBindingModeOptions\"\r\n            />\r\n          </div>\r\n        </div>\r\n      </Tab>\r\n    </Tabbed>\r\n  </CruResource>\r\n</template>\r\n"]}]}