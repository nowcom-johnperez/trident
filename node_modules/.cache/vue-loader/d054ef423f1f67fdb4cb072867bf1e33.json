{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/Inactivity.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/Inactivity.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBNb2RhbFdpdGhDYXJkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL01vZGFsV2l0aENhcmQnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgUGVyY2VudGFnZUJhciBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9QZXJjZW50YWdlQmFyLnZ1ZSc7CmltcG9ydCB0aHJvdHRsZSBmcm9tICdsb2Rhc2gvdGhyb3R0bGUnOwppbXBvcnQgeyBNQU5BR0VNRU5UIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IERFRkFVTFRfUEVSRl9TRVRUSU5HLCBTRVRUSU5HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZXR0aW5ncyc7CgpsZXQgZ2xvYmFsSWQ7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogICAgICAgJ0luYWN0aXZpdHknLAogIGNvbXBvbmVudHM6IHsKICAgIE1vZGFsV2l0aENhcmQsIEJhbm5lciwgUGVyY2VudGFnZUJhcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVuYWJsZWQ6ICAgICAgICAgICAgIG51bGwsCiAgICAgIGlzT3BlbjogICAgICAgICAgICAgIGZhbHNlLAogICAgICBpc0luYWN0aXZlOiAgICAgICAgICBmYWxzZSwKICAgICAgc2hvd01vZGFsQWZ0ZXI6ICAgICAgbnVsbCwKICAgICAgaW5hY3Rpdml0eVRpbWVvdXRJZDogbnVsbCwKICAgICAgY291cnRlc3lUaW1lcjogICAgICAgbnVsbCwKICAgICAgY291cnRlc3lUaW1lcklkOiAgICAgbnVsbCwKICAgICAgY291cnRlc3lDb3VudGRvd246ICAgbnVsbCwKICAgICAgdHJhY2tJbmFjdGl2aXR5OiAgICAgdGhyb3R0bGUodGhpcy5fdHJhY2tJbmFjdGl2aXR5LCAxMDAwKSwKICAgICAgaWQ6ICAgICAgICAgICAgICAgICAgbnVsbCwKICAgIH07CiAgfSwKICBhc3luYyBtb3VudGVkKCkgewogICAgLy8gSW5mbzogbm9ybWFsbHksIHRoaXMgaXMgZG9uZSBpbiB0aGUgZmV0Y2ggaG9vayBidXQgZm9yIHNvbWUgcmVhc29ucyB3aGlsZSBhd2FpdGluZyBmb3IgdGhpbmdzIHRoYXQgd2lsbCB0YWtlIGEgd2hpbGUsIGl0IHdvbid0IGJlIHJlYWR5IGJ5IHRoZSB0aW1lIG1vdW50ZWQoKSBpcyBjYWxsZWQsIHBlbmRpbmcgZm9yIGludmVzdGlnYXRpb24uCiAgICBsZXQgc2V0dGluZ3M7CgogICAgdHJ5IHsKICAgICAgY29uc3Qgc2V0dGluZ3NTdHJpbmcgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kJywgeyB0eXBlOiBNQU5BR0VNRU5ULlNFVFRJTkcsIGlkOiBTRVRUSU5HLlVJX1BFUkZPUk1BTkNFIH0pOwoKICAgICAgc2V0dGluZ3MgPSBzZXR0aW5nc1N0cmluZz8udmFsdWUgPyBKU09OLnBhcnNlKHNldHRpbmdzU3RyaW5nLnZhbHVlKSA6IERFRkFVTFRfUEVSRl9TRVRUSU5HOwogICAgfSBjYXRjaCB7IH0KCiAgICBpZiAoIXNldHRpbmdzIHx8ICFzZXR0aW5ncz8uaW5hY3Rpdml0eSB8fCAhc2V0dGluZ3M/LmluYWN0aXZpdHkuZW5hYmxlZCkgewogICAgICByZXR1cm47CiAgICB9CgogICAgdGhpcy5lbmFibGVkID0gc2V0dGluZ3M/LmluYWN0aXZpdHk/LmVuYWJsZWQgfHwgZmFsc2U7CgogICAgLy8gVG90YWwgYW1vdW50IG9mIHRpbWUgYmVmb3JlIHRoZSB1c2VyJ3Mgc2Vzc2lvbiBpcyBsb3N0CiAgICBjb25zdCB0aHJlc2hvbGRUb1NlY29uZHMgPSBzZXR0aW5ncz8uaW5hY3Rpdml0eT8udGhyZXNob2xkICogNjA7CgogICAgLy8gQW1vdW50IG9mIHRpbWUgdGhlIHVzZXIgc2VlcyB0aGUgaW5hY3Rpdml0eSB3YXJuaW5nCiAgICB0aGlzLmNvdXJ0ZXN5VGltZXIgPSBNYXRoLmZsb29yKHRocmVzaG9sZFRvU2Vjb25kcyAqIDAuMSk7CiAgICB0aGlzLmNvdXJ0ZXN5VGltZXIgPSBNYXRoLm1pbih0aGlzLmNvdXJ0ZXN5VGltZXIsIDYwICogNSk7IC8vIE5ldmVyIHNob3cgdGhlIG1vZGFsIG1vcmUgdGhhbiA1IG1pbnV0ZXMKICAgIC8vIEFtb3VudCBvZiB0aW1lIGJlZm9yZSB0aGUgdXNlciBzZWVzIHRoZSBpbmFjdGl2aXR5IHdhcm5pbmcKICAgIC8vIE5vdGUgLSB0aW1lIGJlZm9yZSB3YXJuaW5nIGlzIHNob3duICsgdGltZSB3YXJuaW5nIGlzIHNob3duID0gc2V0dGluZ3MgdGhyZXNob2xkICh0b3RhbCBhbW91bnQgb2YgdGltZSkKICAgIHRoaXMuc2hvd01vZGFsQWZ0ZXIgPSB0aHJlc2hvbGRUb1NlY29uZHMgLSB0aGlzLmNvdXJ0ZXN5VGltZXI7CgogICAgY29uc29sZS5kZWJ1ZyhgSW5hY3Rpdml0eSBtb2RhbCB3aWxsIHNob3cgYWZ0ZXIgJHsgdGhpcy5zaG93TW9kYWxBZnRlciAvIDYwIH0obSkgYW5kIGJlIHNob3duIGZvciAkeyB0aGlzLmNvdXJ0ZXN5VGltZXIgLyA2MCB9KG0pYCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQoKICAgIHRoaXMuY291cnRlc3lDb3VudGRvd24gPSB0aGlzLmNvdXJ0ZXN5VGltZXI7CgogICAgaWYgKHNldHRpbmdzPy5pbmFjdGl2aXR5LmVuYWJsZWQpIHsKICAgICAgdGhpcy50cmFja0luYWN0aXZpdHkoKTsKICAgICAgdGhpcy5hZGRJZGxlTGlzdGVuZXJzKCk7CiAgICB9CiAgfSwKICBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKCk7CiAgICB0aGlzLmNsZWFyQWxsVGltZW91dHMoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIF90cmFja0luYWN0aXZpdHkoKSB7CiAgICAgIGlmICh0aGlzLmlzSW5hY3RpdmUgfHwgdGhpcy5pc09wZW4gfHwgIXRoaXMuc2hvd01vZGFsQWZ0ZXIpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KCiAgICAgIHRoaXMuY2xlYXJBbGxUaW1lb3V0cygpOwogICAgICBjb25zdCBlbmRUaW1lID0gRGF0ZS5ub3coKSArIHRoaXMuc2hvd01vZGFsQWZ0ZXIgKiAxMDAwOwoKICAgICAgdGhpcy5pZCA9IGVuZFRpbWU7CiAgICAgIGdsb2JhbElkID0gZW5kVGltZTsKCiAgICAgIGNvbnN0IGNoZWNrSW5hY3Rpdml0eVRpbWVyID0gKCkgPT4gewogICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CgogICAgICAgIGlmICh0aGlzLmlkICE9PSBnbG9iYWxJZCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KCiAgICAgICAgaWYgKG5vdyA+PSBlbmRUaW1lKSB7CiAgICAgICAgICB0aGlzLmlzT3BlbiA9IHRydWU7CiAgICAgICAgICB0aGlzLnN0YXJ0Q291bnRkb3duKCk7CgogICAgICAgICAgdGhpcy4kbW9kYWwuc2hvdygnaW5hY3Rpdml0eU1vZGFsJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaW5hY3Rpdml0eVRpbWVvdXRJZCA9IHNldFRpbWVvdXQoY2hlY2tJbmFjdGl2aXR5VGltZXIsIDEwMDApOwogICAgICAgIH0KICAgICAgfTsKCiAgICAgIGNoZWNrSW5hY3Rpdml0eVRpbWVyKCk7CiAgICB9LAogICAgc3RhcnRDb3VudGRvd24oKSB7CiAgICAgIGNvbnN0IGVuZFRpbWUgPSBEYXRlLm5vdygpICsgKHRoaXMuY291cnRlc3lDb3VudGRvd24gKiAxMDAwKTsKCiAgICAgIGNvbnN0IGNoZWNrQ291bnRkb3duID0gKCkgPT4gewogICAgICAgIGNvbnN0IG5vdyA9IERhdGUubm93KCk7CgogICAgICAgIGlmIChub3cgPj0gZW5kVGltZSkgewogICAgICAgICAgdGhpcy5pc0luYWN0aXZlID0gdHJ1ZTsKICAgICAgICAgIHRoaXMudW5zdWJzY3JpYmUoKTsKICAgICAgICAgIHRoaXMuY2xlYXJBbGxUaW1lb3V0cygpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmNvdXJ0ZXN5Q291bnRkb3duID0gTWF0aC5mbG9vcigoZW5kVGltZSAtIG5vdykgLyAxMDAwKTsKICAgICAgICAgIHRoaXMuY291cnRlc3lUaW1lcklkID0gc2V0VGltZW91dChjaGVja0NvdW50ZG93biwgMTAwMCk7CiAgICAgICAgfQogICAgICB9OwoKICAgICAgY2hlY2tDb3VudGRvd24oKTsKICAgIH0sCiAgICBhZGRJZGxlTGlzdGVuZXJzKCkgewogICAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLnRyYWNrSW5hY3Rpdml0eSk7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMudHJhY2tJbmFjdGl2aXR5KTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCB0aGlzLnRyYWNrSW5hY3Rpdml0eSk7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMudHJhY2tJbmFjdGl2aXR5KTsKICAgICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHRoaXMudHJhY2tJbmFjdGl2aXR5KTsKICAgIH0sCiAgICByZW1vdmVFdmVudExpc3RlbmVyKCkgewogICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCB0aGlzLnRyYWNrSW5hY3Rpdml0eSk7CiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIHRoaXMudHJhY2tJbmFjdGl2aXR5KTsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5cHJlc3MnLCB0aGlzLnRyYWNrSW5hY3Rpdml0eSk7CiAgICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMudHJhY2tJbmFjdGl2aXR5KTsKICAgICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigndmlzaWJpbGl0eWNoYW5nZScsIHRoaXMudHJhY2tJbmFjdGl2aXR5KTsKICAgIH0sCgogICAgcmVzdW1lKCkgewogICAgICB0aGlzLmlzSW5hY3RpdmUgPSBmYWxzZTsKICAgICAgdGhpcy5pc09wZW4gPSBmYWxzZTsKICAgICAgdGhpcy5jb3VydGVzeUNvdW50ZG93biA9IHRoaXMuY291cnRlc3lUaW1lcjsKICAgICAgdGhpcy5jbGVhckFsbFRpbWVvdXRzKCk7CgogICAgICB0aGlzLiRtb2RhbC5oaWRlKCdpbmFjdGl2aXR5TW9kYWwnKTsKICAgIH0sCgogICAgcmVmcmVzaCgpIHsKICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpOwogICAgfSwKCiAgICB1bnN1YnNjcmliZSgpIHsKICAgICAgY29uc29sZS5kZWJ1ZygnVW5zdWJzY3JpYmluZyBmcm9tIGFsbCB3ZWJzb2NrZXQgZXZlbnRzJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgndW5zdWJzY3JpYmUnKTsKICAgIH0sCiAgICBjbGVhckFsbFRpbWVvdXRzKCkgewogICAgICBjbGVhclRpbWVvdXQodGhpcy5pbmFjdGl2aXR5VGltZW91dElkKTsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuY291cnRlc3lUaW1lcklkKTsKICAgIH0KCiAgfSwKICBjb21wdXRlZDogewogICAgaXNJbmFjdGl2ZVRleHRzKCkgewogICAgICByZXR1cm4gdGhpcy5pc0luYWN0aXZlID8gewogICAgICAgIHRpdGxlOiAgIHRoaXMudCgnaW5hY3Rpdml0eS50aXRsZUV4cGlyZWQnKSwKICAgICAgICBiYW5uZXI6ICB0aGlzLnQoJ2luYWN0aXZpdHkuYmFubmVyRXhwaXJlZCcpLAogICAgICAgIGNvbnRlbnQ6IHRoaXMudCgnaW5hY3Rpdml0eS5jb250ZW50RXhwaXJlZCcpLAogICAgICB9IDogewogICAgICAgIHRpdGxlOiAgIHRoaXMudCgnaW5hY3Rpdml0eS50aXRsZScpLAogICAgICAgIGJhbm5lcjogIHRoaXMudCgnaW5hY3Rpdml0eS5iYW5uZXInKSwKICAgICAgICBjb250ZW50OiB0aGlzLnQoJ2luYWN0aXZpdHkuY29udGVudCcpLAogICAgICB9OwogICAgfSwKICAgIHRpbWVyUGVyY2VudGFnZUxlZnQoKSB7CiAgICAgIHJldHVybiBNYXRoLmZsb29yKCh0aGlzLmNvdXJ0ZXN5Q291bnRkb3duIC8gdGhpcy5jb3VydGVzeVRpbWVyICkgKiAxMDApOwogICAgfSwKICAgIGNvbG9yU3RvcHMoKSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgMDogJy0taW5mbycsIDMwOiAnLS1pbmZvJywgNzA6ICctLWluZm8nCiAgICAgIH07CiAgICB9LAogIH0KfTsK"},{"version":3,"sources":["Inactivity.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Inactivity.vue","sourceRoot":"node_modules/@rancher/shell/components","sourcesContent":["<script>\nimport ModalWithCard from '@shell/components/ModalWithCard';\nimport { Banner } from '@components/Banner';\nimport PercentageBar from '@shell/components/PercentageBar.vue';\nimport throttle from 'lodash/throttle';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { DEFAULT_PERF_SETTING, SETTING } from '@shell/config/settings';\n\nlet globalId;\n\nexport default {\n  name:       'Inactivity',\n  components: {\n    ModalWithCard, Banner, PercentageBar\n  },\n  data() {\n    return {\n      enabled:             null,\n      isOpen:              false,\n      isInactive:          false,\n      showModalAfter:      null,\n      inactivityTimeoutId: null,\n      courtesyTimer:       null,\n      courtesyTimerId:     null,\n      courtesyCountdown:   null,\n      trackInactivity:     throttle(this._trackInactivity, 1000),\n      id:                  null,\n    };\n  },\n  async mounted() {\n    // Info: normally, this is done in the fetch hook but for some reasons while awaiting for things that will take a while, it won't be ready by the time mounted() is called, pending for investigation.\n    let settings;\n\n    try {\n      const settingsString = await this.$store.dispatch('management/find', { type: MANAGEMENT.SETTING, id: SETTING.UI_PERFORMANCE });\n\n      settings = settingsString?.value ? JSON.parse(settingsString.value) : DEFAULT_PERF_SETTING;\n    } catch { }\n\n    if (!settings || !settings?.inactivity || !settings?.inactivity.enabled) {\n      return;\n    }\n\n    this.enabled = settings?.inactivity?.enabled || false;\n\n    // Total amount of time before the user's session is lost\n    const thresholdToSeconds = settings?.inactivity?.threshold * 60;\n\n    // Amount of time the user sees the inactivity warning\n    this.courtesyTimer = Math.floor(thresholdToSeconds * 0.1);\n    this.courtesyTimer = Math.min(this.courtesyTimer, 60 * 5); // Never show the modal more than 5 minutes\n    // Amount of time before the user sees the inactivity warning\n    // Note - time before warning is shown + time warning is shown = settings threshold (total amount of time)\n    this.showModalAfter = thresholdToSeconds - this.courtesyTimer;\n\n    console.debug(`Inactivity modal will show after ${ this.showModalAfter / 60 }(m) and be shown for ${ this.courtesyTimer / 60 }(m)`); // eslint-disable-line no-console\n\n    this.courtesyCountdown = this.courtesyTimer;\n\n    if (settings?.inactivity.enabled) {\n      this.trackInactivity();\n      this.addIdleListeners();\n    }\n  },\n  beforeDestroy() {\n    this.removeEventListener();\n    this.clearAllTimeouts();\n  },\n  methods: {\n    _trackInactivity() {\n      if (this.isInactive || this.isOpen || !this.showModalAfter) {\n        return;\n      }\n\n      this.clearAllTimeouts();\n      const endTime = Date.now() + this.showModalAfter * 1000;\n\n      this.id = endTime;\n      globalId = endTime;\n\n      const checkInactivityTimer = () => {\n        const now = Date.now();\n\n        if (this.id !== globalId) {\n          return;\n        }\n\n        if (now >= endTime) {\n          this.isOpen = true;\n          this.startCountdown();\n\n          this.$modal.show('inactivityModal');\n        } else {\n          this.inactivityTimeoutId = setTimeout(checkInactivityTimer, 1000);\n        }\n      };\n\n      checkInactivityTimer();\n    },\n    startCountdown() {\n      const endTime = Date.now() + (this.courtesyCountdown * 1000);\n\n      const checkCountdown = () => {\n        const now = Date.now();\n\n        if (now >= endTime) {\n          this.isInactive = true;\n          this.unsubscribe();\n          this.clearAllTimeouts();\n        } else {\n          this.courtesyCountdown = Math.floor((endTime - now) / 1000);\n          this.courtesyTimerId = setTimeout(checkCountdown, 1000);\n        }\n      };\n\n      checkCountdown();\n    },\n    addIdleListeners() {\n      document.addEventListener('mousemove', this.trackInactivity);\n      document.addEventListener('mousedown', this.trackInactivity);\n      document.addEventListener('keypress', this.trackInactivity);\n      document.addEventListener('touchmove', this.trackInactivity);\n      document.addEventListener('visibilitychange', this.trackInactivity);\n    },\n    removeEventListener() {\n      document.removeEventListener('mousemove', this.trackInactivity);\n      document.removeEventListener('mousedown', this.trackInactivity);\n      document.removeEventListener('keypress', this.trackInactivity);\n      document.removeEventListener('touchmove', this.trackInactivity);\n      document.removeEventListener('visibilitychange', this.trackInactivity);\n    },\n\n    resume() {\n      this.isInactive = false;\n      this.isOpen = false;\n      this.courtesyCountdown = this.courtesyTimer;\n      this.clearAllTimeouts();\n\n      this.$modal.hide('inactivityModal');\n    },\n\n    refresh() {\n      window.location.reload();\n    },\n\n    unsubscribe() {\n      console.debug('Unsubscribing from all websocket events'); // eslint-disable-line no-console\n      this.$store.dispatch('unsubscribe');\n    },\n    clearAllTimeouts() {\n      clearTimeout(this.inactivityTimeoutId);\n      clearTimeout(this.courtesyTimerId);\n    }\n\n  },\n  computed: {\n    isInactiveTexts() {\n      return this.isInactive ? {\n        title:   this.t('inactivity.titleExpired'),\n        banner:  this.t('inactivity.bannerExpired'),\n        content: this.t('inactivity.contentExpired'),\n      } : {\n        title:   this.t('inactivity.title'),\n        banner:  this.t('inactivity.banner'),\n        content: this.t('inactivity.content'),\n      };\n    },\n    timerPercentageLeft() {\n      return Math.floor((this.courtesyCountdown / this.courtesyTimer ) * 100);\n    },\n    colorStops() {\n      return {\n        0: '--info', 30: '--info', 70: '--info'\n      };\n    },\n  }\n};\n</script>\n\n<template>\n  <ModalWithCard\n    ref=\"inactivityModal\"\n    name=\"inactivityModal\"\n    save-text=\"Continue\"\n    :v-if=\"isOpen\"\n    @finish=\"resume\"\n  >\n    <template #title>\n      {{ isInactiveTexts.title }}\n    </template>\n    <span>{{ courtesyCountdown }}</span>\n\n    <template #content>\n      <Banner color=\"info\">\n        {{ isInactiveTexts.banner }}\n      </Banner>\n\n      <p>\n        {{ isInactiveTexts.content }}\n      </p>\n\n      <PercentageBar\n        v-if=\"!isInactive\"\n        class=\"mt-20\"\n        :value=\"timerPercentageLeft\"\n        :color-stops=\"colorStops\"\n      />\n    </template>\n\n    <template\n      #footer\n    >\n      <div class=\"card-actions\">\n        <button\n          v-if=\"!isInactive\"\n          class=\"btn role-tertiary bg-primary\"\n          @click.prevent=\"resume\"\n        >\n          <t k=\"inactivity.cta\" />\n        </button>\n\n        <button\n          v-if=\"isInactive\"\n          class=\"btn role-tertiary bg-primary\"\n          @click.prevent=\"refresh\"\n        >\n          <t k=\"inactivity.ctaExpired\" />\n        </button>\n      </div>\n    </template>\n  </ModalWithCard>\n</template>\n\n<style lang=\"scss\" scoped>\n.card-actions {\n    display: flex;\n    width: 100%;\n    justify-content: flex-end;\n}\n</style>\n"]}]}