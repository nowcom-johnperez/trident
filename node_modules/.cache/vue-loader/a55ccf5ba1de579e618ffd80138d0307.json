{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/gatekeeper/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/gatekeeper/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IE5BTUUsIENIQVJUX05BTUUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3Byb2R1Y3QvZ2F0ZWtlZXBlcic7CmltcG9ydCBJbnN0YWxsUmVkaXJlY3QgZnJvbSAnQHNoZWxsL3V0aWxzL2luc3RhbGwtcmVkaXJlY3QnOwppbXBvcnQgQ2hhcnRIZWFkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NoYXJ0SGVhZGluZyc7CmltcG9ydCBTb3J0YWJsZVRhYmxlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1NvcnRhYmxlVGFibGUnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgeyBDT05TVFJBSU5UX1ZJT0xBVElPTl9DT05TVFJBSU5UX0xJTkssIENPTlNUUkFJTlRfVklPTEFUSU9OX0NPVU5ULCBDT05TVFJBSU5UX1ZJT0xBVElPTl9URU1QTEFURV9MSU5LIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90YWJsZS1oZWFkZXJzJzsKaW1wb3J0IHsgR0FURUtFRVBFUiB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwoKZXhwb3J0IGNvbnN0IE9QQV9HQVRFX0tFRVBFUl9JRCA9ICdjbHVzdGVyL3JhbmNoZXItY2hhcnRzL3JhbmNoZXItZ2F0ZWtlZXBlcic7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ2hhcnRIZWFkaW5nLCBTb3J0YWJsZVRhYmxlLCBCYW5uZXIKICB9LAogIG1pZGRsZXdhcmU6IEluc3RhbGxSZWRpcmVjdChOQU1FLCBDSEFSVF9OQU1FKSwKICBhc3luYyBmZXRjaCgpIHsKICAgIGNvbnN0IGNvbnN0cmFpbnRzID0gdGhpcy5jb25zdHJhaW50ID8gW3RoaXMuY29uc3RyYWludF0gOiBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgeyB0eXBlOiBHQVRFS0VFUEVSLlNQT09GRUQuQ09OU1RSQUlOVCB9KTsKCiAgICB0aGlzLnZpb2xhdGlvbnMgPSBjb25zdHJhaW50cwogICAgICAubWFwKChjb25zdHJhaW50LCBpKSA9PiAoewogICAgICAgIGlkOiAgICAgICAgICAgICBpLAogICAgICAgIGNvbnN0cmFpbnRMaW5rOiB7CiAgICAgICAgICB0ZXh0OiBjb25zdHJhaW50Lm5hbWVEaXNwbGF5LAogICAgICAgICAgdG86ICAgY29uc3RyYWludC5kZXRhaWxMb2NhdGlvbgogICAgICAgIH0sCiAgICAgICAgdGVtcGxhdGVMaW5rOiB7CiAgICAgICAgICB0ZXh0OiBjb25zdHJhaW50LmtpbmQsCiAgICAgICAgICB0bzogICB7CiAgICAgICAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlLWlkJywKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgcmVzb3VyY2U6ICd0ZW1wbGF0ZXMuZ2F0ZWtlZXBlci5zaC5jb25zdHJhaW50dGVtcGxhdGUnLCBpZDogY29uc3RyYWludC5raW5kLnRvTG93ZXJDYXNlKCksIHByb2R1Y3Q6ICdnYXRla2VlcGVyJwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBjb3VudDogY29uc3RyYWludC50b3RhbFZpb2xhdGlvbnMKICAgICAgfSkpOwogIH0sCiAgZGF0YShjdHgpIHsKICAgIHJldHVybiB7CiAgICAgIGhlYWRlcnM6IFsKICAgICAgICBDT05TVFJBSU5UX1ZJT0xBVElPTl9DT05TVFJBSU5UX0xJTkssCiAgICAgICAgQ09OU1RSQUlOVF9WSU9MQVRJT05fVEVNUExBVEVfTElOSywKICAgICAgICBDT05TVFJBSU5UX1ZJT0xBVElPTl9DT1VOVAogICAgICBdLAogICAgICB2aW9sYXRpb25zOiBbXQogICAgfTsKICB9Cn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/gatekeeper","sourcesContent":["<script>\nimport { NAME, CHART_NAME } from '@shell/config/product/gatekeeper';\nimport InstallRedirect from '@shell/utils/install-redirect';\nimport ChartHeading from '@shell/components/ChartHeading';\nimport SortableTable from '@shell/components/SortableTable';\nimport { Banner } from '@components/Banner';\nimport { CONSTRAINT_VIOLATION_CONSTRAINT_LINK, CONSTRAINT_VIOLATION_COUNT, CONSTRAINT_VIOLATION_TEMPLATE_LINK } from '@shell/config/table-headers';\nimport { GATEKEEPER } from '@shell/config/types';\n\nexport const OPA_GATE_KEEPER_ID = 'cluster/rancher-charts/rancher-gatekeeper';\n\nexport default {\n  components: {\n    ChartHeading, SortableTable, Banner\n  },\n  middleware: InstallRedirect(NAME, CHART_NAME),\n  async fetch() {\n    const constraints = this.constraint ? [this.constraint] : await this.$store.dispatch('cluster/findAll', { type: GATEKEEPER.SPOOFED.CONSTRAINT });\n\n    this.violations = constraints\n      .map((constraint, i) => ({\n        id:             i,\n        constraintLink: {\n          text: constraint.nameDisplay,\n          to:   constraint.detailLocation\n        },\n        templateLink: {\n          text: constraint.kind,\n          to:   {\n            name:   'c-cluster-product-resource-id',\n            params: {\n              resource: 'templates.gatekeeper.sh.constrainttemplate', id: constraint.kind.toLowerCase(), product: 'gatekeeper'\n            }\n          }\n        },\n        count: constraint.totalViolations\n      }));\n  },\n  data(ctx) {\n    return {\n      headers: [\n        CONSTRAINT_VIOLATION_CONSTRAINT_LINK,\n        CONSTRAINT_VIOLATION_TEMPLATE_LINK,\n        CONSTRAINT_VIOLATION_COUNT\n      ],\n      violations: []\n    };\n  }\n};\n</script>\n\n<template>\n  <div>\n    <ChartHeading\n      :label=\"t('gatekeeperIndex.poweredBy')\"\n      url=\"https://github.com/open-policy-agent/gatekeeper\"\n    />\n    <Banner color=\"warning\">\n      <span v-clean-html=\"t('gatekeeperIndex.deprecated', {}, true)\" />\n    </Banner>\n    <div class=\"spacer\" />\n    <div class=\"mb-10\">\n      <h2><t k=\"gatekeeperIndex.violations\" /></h2>\n    </div>\n    <div>\n      <SortableTable\n        :headers=\"headers\"\n        :rows=\"violations\"\n        :search=\"false\"\n        :table-actions=\"false\"\n        :row-actions=\"false\"\n        :paging=\"true\"\n        :rows-per-page=\"10\"\n        key-field=\"id\"\n        group-by=\"templateLink.text\"\n      />\n    </div>\n  </div>\n</template>\n"]}]}