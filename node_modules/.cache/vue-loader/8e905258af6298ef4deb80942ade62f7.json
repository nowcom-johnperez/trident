{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/detail/harvesterhci.io.management.cluster.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/detail/harvesterhci.io.management.cluster.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgUmVzb3VyY2VUYWJzIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vUmVzb3VyY2VUYWJzJzsKaW1wb3J0IENvcHlDb2RlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NvcHlDb2RlJzsKaW1wb3J0IFRhYiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvVGFiJzsKaW1wb3J0IHsgYWxsSGFzaCB9IGZyb20gJ0BzaGVsbC91dGlscy9wcm9taXNlJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nLAogICAgUmVzb3VyY2VUYWJzLAogICAgVGFiLAogICAgQ29weUNvZGUsCiAgfSwKCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfQogIH0sCgogIGFzeW5jIGZldGNoKCkgewogICAgYXdhaXQgdGhpcy52YWx1ZS53YWl0Rm9yUHJvdmlzaW9uZXIoKTsKCiAgICBjb25zdCBoYXNoID0geyBjbHVzdGVyVG9rZW46IHRoaXMudmFsdWUuZ2V0T3JDcmVhdGVUb2tlbigpIH07CgogICAgY29uc3QgcmVzID0gYXdhaXQgYWxsSGFzaChoYXNoKTsKCiAgICB0aGlzLmFsbE5vZGVzID0gcmVzLmFsbE5vZGVzIHx8IFtdOwogICAgdGhpcy5hbGxOb2RlUG9vbHMgPSByZXMuYWxsTm9kZVBvb2xzIHx8IFtdOwogICAgdGhpcy5jbHVzdGVyVG9rZW4gPSByZXMuY2x1c3RlclRva2VuOwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4geyBjbHVzdGVyVG9rZW46IG51bGwgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgZGVmYXVsdFRhYigpIHsKICAgICAgaWYgKHRoaXMuc2hvd1JlZ2lzdHJhdGlvbiAmJiAhdGhpcy5tYWNoaW5lcz8ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuICdyZWdpc3RyYXRpb24nOwogICAgICB9CgogICAgICByZXR1cm4gJyc7CiAgICB9LAoKICAgIHNob3dSZWdpc3RyYXRpb24oKSB7CiAgICAgIGlmICggIXRoaXMuY2x1c3RlclRva2VuICkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQoKICAgICAgaWYgKCB0aGlzLnZhbHVlLmlzSW1wb3J0ZWQgKSB7CiAgICAgICAgcmV0dXJuICF0aGlzLnZhbHVlLm1nbXQ/LmlzUmVhZHk7CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCgogICAgcmVnaXN0cmF0aW9uVVJMKCkgewogICAgICByZXR1cm4gKHRoaXMuY2x1c3RlclRva2VuPy5jb21tYW5kIHx8ICcnKS5yZXBsYWNlKCdrdWJlY3RsIGFwcGx5IC1mICcsICcnKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["harvesterhci.io.management.cluster.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"harvesterhci.io.management.cluster.vue","sourceRoot":"node_modules/@rancher/shell/detail","sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\nimport CopyCode from '@shell/components/CopyCode';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport { allHash } from '@shell/utils/promise';\n\nexport default {\n  components: {\n    Loading,\n    ResourceTabs,\n    Tab,\n    CopyCode,\n  },\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n\n  async fetch() {\n    await this.value.waitForProvisioner();\n\n    const hash = { clusterToken: this.value.getOrCreateToken() };\n\n    const res = await allHash(hash);\n\n    this.allNodes = res.allNodes || [];\n    this.allNodePools = res.allNodePools || [];\n    this.clusterToken = res.clusterToken;\n  },\n\n  data() {\n    return { clusterToken: null };\n  },\n\n  computed: {\n    defaultTab() {\n      if (this.showRegistration && !this.machines?.length) {\n        return 'registration';\n      }\n\n      return '';\n    },\n\n    showRegistration() {\n      if ( !this.clusterToken ) {\n        return false;\n      }\n\n      if ( this.value.isImported ) {\n        return !this.value.mgmt?.isReady;\n      }\n\n      return false;\n    },\n\n    registrationURL() {\n      return (this.clusterToken?.command || '').replace('kubectl apply -f ', '');\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <ResourceTabs\n    v-else\n    v-model=\"value\"\n    :default-tab=\"defaultTab\"\n  >\n    <Tab\n      v-if=\"showRegistration\"\n      name=\"registration\"\n      :label=\"t('cluster.tabs.registration')\"\n      :weight=\"2\"\n      class=\"p-10\"\n    >\n      <h4\n        v-clean-html=\"t('cluster.harvester.registration.step1', null, true)\"\n      />\n\n      <h4\n        v-clean-html=\"t('cluster.harvester.registration.step2', null, true)\"\n        class=\"mt-10\"\n      />\n\n      <h4\n        v-clean-html=\"t('cluster.harvester.registration.step3', null, true)\"\n        class=\"mt-10\"\n      />\n      <CopyCode class=\"m-10 p-10\">\n        {{ registrationURL }}\n      </CopyCode>\n    </Tab>\n  </ResourceTabs>\n</template>\n"]}]}