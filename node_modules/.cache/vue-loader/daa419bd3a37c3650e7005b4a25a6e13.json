{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/SingleClusterInfo.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/SingleClusterInfo.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDbHVzdGVyUHJvdmlkZXJJY29uIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NsdXN0ZXJQcm92aWRlckljb24nOwppbXBvcnQgUmVzb3VyY2VTdW1tYXJ5LCB7IHJlc291cmNlQ291bnRzIH0gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvUmVzb3VyY2VTdW1tYXJ5JzsKaW1wb3J0IHsKICBOQU1FU1BBQ0UsIE1BTkFHRU1FTlQsIE5PREUsIENPVU5ULCBDQVRBTE9HCn0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IFJFU09VUkNFUyB9IGZyb20gJ0BzaGVsbC9wYWdlcy9jL19jbHVzdGVyL2V4cGxvcmVyL2luZGV4JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDbHVzdGVyUHJvdmlkZXJJY29uLAogICAgUmVzb3VyY2VTdW1tYXJ5CiAgfSwKCiAgYXN5bmMgZmV0Y2goKSB7CiAgICB0aGlzLmNsdXN0ZXJzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsKICAgICAgdHlwZTogTUFOQUdFTUVOVC5DTFVTVEVSLAogICAgICBvcHQ6ICB7IHVybDogTUFOQUdFTUVOVC5DTFVTVEVSIH0KICAgIH0pOwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBjbHVzdGVyczogICAgICBbXSwKICAgICAgY2x1c3RlckRldGFpbDogbnVsbCwKICAgICAgY2x1c3RlckNvdW50czoge30KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGV4cGxvcmVMaW5rKCkgewogICAgICByZXR1cm4geyBuYW1lOiAnYy1jbHVzdGVyJywgcGFyYW1zOiB7IGNsdXN0ZXI6IHRoaXMuY2x1c3RlckRldGFpbC5pZCB9IH07CiAgICB9LAoKICAgIGNsdXN0ZXJUb29sc0xpbmsoKSB7CiAgICAgIHJldHVybiB7IG5hbWU6ICdjLWNsdXN0ZXItZXhwbG9yZXItdG9vbHMnLCBwYXJhbXM6IHsgY2x1c3RlcjogdGhpcy5jbHVzdGVyRGV0YWlsLmlkIH0gfTsKICAgIH0sCgogICAgYWNjZXNzaWJsZVJlc291cmNlcygpIHsKICAgICAgcmV0dXJuIFJFU09VUkNFUy5maWx0ZXIoKHJlc291cmNlKSA9PiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjbHVzdGVyL3NjaGVtYUZvciddKHJlc291cmNlKSk7CiAgICB9LAoKICAgIHRvdGFsQ291bnRHYXVnZUlucHV0KCkgewogICAgICBjb25zdCB0b3RhbElucHV0ID0gewogICAgICAgIG5hbWU6ICAgICAgICAgdGhpcy50KCdjbHVzdGVySW5kZXhQYWdlLnJlc291cmNlR2F1Z2UudG90YWxSZXNvdXJjZXMnKSwKICAgICAgICB0b3RhbDogICAgICAgIDAsCiAgICAgICAgdXNlZnVsOiAgICAgICAwLAogICAgICAgIHdhcm5pbmdDb3VudDogMCwKICAgICAgICBlcnJvckNvdW50OiAgIDAKICAgICAgfTsKCiAgICAgIHRoaXMuYWNjZXNzaWJsZVJlc291cmNlcy5mb3JFYWNoKChyZXNvdXJjZSkgPT4gewogICAgICAgIGNvbnN0IGNvdW50cyA9IHJlc291cmNlQ291bnRzKHRoaXMuJHN0b3JlLCByZXNvdXJjZSk7CgogICAgICAgIE9iamVjdC5lbnRyaWVzKGNvdW50cykuZm9yRWFjaCgoZW50cnkpID0+IHsKICAgICAgICAgIHRvdGFsSW5wdXRbZW50cnlbMF1dICs9IGVudHJ5WzFdOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIHJldHVybiB0b3RhbElucHV0OwogICAgfSwKCiAgICBjYW5BY2Nlc3NOb2RlcygpIHsKICAgICAgcmV0dXJuICEhdGhpcy5jbHVzdGVyQ291bnRzPy5bMF0/LmNvdW50cz8uW05PREVdOwogICAgfSwKCiAgICBjYW5BY2Nlc3NOYW1lc3BhY2VzKCkgewogICAgICByZXR1cm4gISF0aGlzLmNsdXN0ZXJDb3VudHM/LlswXT8uY291bnRzPy5bTkFNRVNQQUNFXTsKICAgIH0sCgogICAgc2hvd0NsdXN0ZXJUb29scygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NsdXN0ZXIvY2FuTGlzdCddKENBVEFMT0cuQ0xVU1RFUl9SRVBPKSAmJgogICAgICAgICAgICAgdGhpcy4kc3RvcmUuZ2V0dGVyc1snY2x1c3Rlci9jYW5MaXN0J10oQ0FUQUxPRy5BUFApOwogICAgfQogIH0sCgogIHdhdGNoOiB7CiAgICBhc3luYyBjbHVzdGVycyhuZXUpIHsKICAgICAgdGhpcy5jbHVzdGVyRGV0YWlsID0gbmV1WzBdOwogICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbG9hZENsdXN0ZXInLCB7IGlkOiB0aGlzLmNsdXN0ZXJEZXRhaWwuaWQgfSk7CiAgICAgIHRoaXMuY2x1c3RlckNvdW50cyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbYGNsdXN0ZXIvYWxsYF0oQ09VTlQpOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["SingleClusterInfo.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SingleClusterInfo.vue","sourceRoot":"node_modules/@rancher/shell/components","sourcesContent":["<script>\nimport ClusterProviderIcon from '@shell/components/ClusterProviderIcon';\nimport ResourceSummary, { resourceCounts } from '@shell/components/ResourceSummary';\nimport {\n  NAMESPACE, MANAGEMENT, NODE, COUNT, CATALOG\n} from '@shell/config/types';\nimport { RESOURCES } from '@shell/pages/c/_cluster/explorer/index';\n\nexport default {\n  components: {\n    ClusterProviderIcon,\n    ResourceSummary\n  },\n\n  async fetch() {\n    this.clusters = await this.$store.dispatch('management/findAll', {\n      type: MANAGEMENT.CLUSTER,\n      opt:  { url: MANAGEMENT.CLUSTER }\n    });\n  },\n\n  data() {\n    return {\n      clusters:      [],\n      clusterDetail: null,\n      clusterCounts: {}\n    };\n  },\n\n  computed: {\n    exploreLink() {\n      return { name: 'c-cluster', params: { cluster: this.clusterDetail.id } };\n    },\n\n    clusterToolsLink() {\n      return { name: 'c-cluster-explorer-tools', params: { cluster: this.clusterDetail.id } };\n    },\n\n    accessibleResources() {\n      return RESOURCES.filter((resource) => this.$store.getters['cluster/schemaFor'](resource));\n    },\n\n    totalCountGaugeInput() {\n      const totalInput = {\n        name:         this.t('clusterIndexPage.resourceGauge.totalResources'),\n        total:        0,\n        useful:       0,\n        warningCount: 0,\n        errorCount:   0\n      };\n\n      this.accessibleResources.forEach((resource) => {\n        const counts = resourceCounts(this.$store, resource);\n\n        Object.entries(counts).forEach((entry) => {\n          totalInput[entry[0]] += entry[1];\n        });\n      });\n\n      return totalInput;\n    },\n\n    canAccessNodes() {\n      return !!this.clusterCounts?.[0]?.counts?.[NODE];\n    },\n\n    canAccessNamespaces() {\n      return !!this.clusterCounts?.[0]?.counts?.[NAMESPACE];\n    },\n\n    showClusterTools() {\n      return this.$store.getters['cluster/canList'](CATALOG.CLUSTER_REPO) &&\n             this.$store.getters['cluster/canList'](CATALOG.APP);\n    }\n  },\n\n  watch: {\n    async clusters(neu) {\n      this.clusterDetail = neu[0];\n      await this.$store.dispatch('loadCluster', { id: this.clusterDetail.id });\n      this.clusterCounts = this.$store.getters[`cluster/all`](COUNT);\n    }\n  }\n};\n</script>\n\n<template>\n  <div v-if=\"clusterDetail\">\n    <div class=\"single-cluster-header\">\n      <ClusterProviderIcon\n        :cluster=\"clusterDetail\"\n        class=\"rancher-icon\"\n        width=\"32\"\n      />\n      <h1>{{ t('glance.clusterInfo') }}</h1>\n    </div>\n\n    <div class=\"single-cluster-info\">\n      <div class=\"cluster-counts\">\n        <ResourceSummary :spoofed-counts=\"totalCountGaugeInput\" />\n        <ResourceSummary\n          v-if=\"canAccessNodes\"\n          :cluster=\"clusterDetail.id\"\n          resource=\"node\"\n        />\n        <ResourceSummary\n          v-if=\"canAccessNamespaces\"\n          :cluster=\"clusterDetail.id\"\n          resource=\"namespace\"\n        />\n      </div>\n      <div class=\"glance-item\">\n        <label>{{ t('glance.provider') }}: </label>\n        <span>{{ t(`cluster.provider.${ clusterDetail.status.provider || 'other' }`) }}</span>\n      </div>\n      <div\n        v-if=\"clusterDetail.kubernetesVersionRaw\"\n        class=\"glance-item\"\n      >\n        <label>{{ t('glance.version') }}: </label>\n        <span>{{ clusterDetail.kubernetesVersionBase }}</span>\n        <span\n          v-if=\"clusterDetail.kubernetesVersionExtension\"\n          style=\"font-size: 0.75em\"\n        >{{ clusterDetail.kubernetesVersionExtension }}</span>\n      </div>\n      <div class=\"glance-item\">\n        <label>{{ t('glance.created') }}: </label>\n        <span><LiveDate\n          :value=\"clusterDetail.metadata.creationTimestamp\"\n          :add-suffix=\"true\"\n          :show-tooltip=\"true\"\n        /></span>\n      </div>\n      <div class=\"section\">\n        {{ t('generic.links') }}\n      </div>\n      <div class=\"glance-item\">\n        <nuxt-link\n          :to=\"exploreLink\"\n          class=\"cluster-link\"\n        >\n          {{ t('nav.categories.explore') }}\n        </nuxt-link>\n      </div>\n      <div\n        v-if=\"showClusterTools\"\n        class=\"glance-item\"\n      >\n        <nuxt-link\n          :to=\"clusterToolsLink\"\n          class=\"cluster-link\"\n        >\n          {{ t('nav.clusterTools') }}\n        </nuxt-link>\n      </div>\n    </div>\n  </div>\n</template>\n<style lang=\"scss\" scoped>\n  .single-cluster-header {\n    align-items: center;\n    display: flex;\n\n    .rancher-icon {\n      margin-right: 10px;\n    }\n\n    h1 {\n      font-size: 20px;\n      margin: 0;\n    }\n  }\n  .single-cluster-info {\n    margin-top: 20px;\n\n    .section {\n      margin: 15px 0 5px 0;\n      font-weight: bold;\n    }\n\n    .cluster-counts {\n      display: flex;\n      margin: 10px 0;\n      > * {\n        flex: 1;\n        &:not(:last-child) {\n          margin-right: 20px;\n        }\n      }\n    }\n\n    .glance-item {\n      font-size: 14px;\n      padding: 5px 0;\n\n      .cluster-link {\n        font-size: 14px;\n      }\n    }\n  }\n</style>\n"]}]}