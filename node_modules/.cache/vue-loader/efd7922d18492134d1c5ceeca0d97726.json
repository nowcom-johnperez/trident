{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/nav/WindowManager/index.vue?vue&type=style&index=0&id=ee663b7e&lang=scss&scoped=true","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/nav/WindowManager/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":1716430467357},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1716430467929},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/postcss-loader/src/index.js","mtime":1716430467882},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/sass-loader/dist/cjs.js","mtime":1716430453705},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci53aW5kb3dtYW5hZ2VyIHsKICBkaXNwbGF5OiBncmlkOwogIGhlaWdodDogdmFyKC0td20taGVpZ2h0LCAwKTsKCiAgZ3JpZC10ZW1wbGF0ZS1hcmVhczoKICAgICJ0YWJzIgogICAgImJvZHkiOwoKICBncmlkLXRlbXBsYXRlLXJvd3M6IHZhcigtLXdtLXRhYi1oZWlnaHQpIGF1dG87CgogIC50YWJzLCAuYm9keSB7CiAgICBtYXgtd2lkdGg6IDEwMCU7CiAgfQoKICAudGFicyB7CiAgICBncmlkLWFyZWE6IHRhYnM7CiAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13bS10YWJzLWJnKTsKICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS13bS1ib3JkZXIpOwogICAgYm9yZGVyLWJvdHRvbTogMXB4IHNvbGlkIHZhcigtLXdtLWJvcmRlcik7CgogICAgZGlzcGxheTogZmxleDsKICAgIGFsaWduLWNvbnRlbnQ6IHN0cmV0Y2g7CgogICAgLnRhYiB7CiAgICAgIGN1cnNvcjogcG9pbnRlcjsKICAgICAgdXNlci1zZWxlY3Q6IG5vbmU7CiAgICAgIGJvcmRlci10b3A6IDFweCBzb2xpZCB2YXIoLS13bS1ib3JkZXIpOwogICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCB2YXIoLS13bS1ib3JkZXIpOwogICAgICBib3JkZXItbGVmdDogMXB4IHNvbGlkIHZhcigtLXdtLWJvcmRlcik7CiAgICAgIHBhZGRpbmc6IDVweCAxMHB4OwogICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpczsKICAgICAgbWFyZ2luOiAwOwogICAgICBkaXNwbGF5OiBmbGV4OwogICAgICBtaW4td2lkdGg6IDA7CgogICAgICAudGFiLWxhYmVsewogICAgICAgIG92ZXJmbG93OiBoaWRkZW47CiAgICAgICAgdGV4dC1vdmVyZmxvdzogZWxsaXBzaXM7CiAgICAgIH0KCiAgICAgICYuYWN0aXZlIHsKICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7CiAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0td20tYm9keS1iZyk7CiAgICAgICAgb3V0bGluZTogMXB4IHNvbGlkIHZhcigtLXdtLWJvZHktYmcpOwogICAgICAgIHotaW5kZXg6IDE7CiAgICAgIH0KCiAgICAgIC5jbG9zZXIgewogICAgICAgIG1hcmdpbi1sZWZ0OiA1cHg7CiAgICAgICAgYm9yZGVyOiAxcHggc29saWQgdmFyKC0tYm9keS10ZXh0KTsKICAgICAgICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTsKCiAgICAgICAgJjpob3ZlciB7CiAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiB2YXIoLS13bS1jbG9zZXItaG92ZXItYmcpOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIC5yZXNpemVyIHsKICAgICAgd2lkdGg6IHZhcigtLXdtLXRhYi1oZWlnaHQpOwogICAgICBwYWRkaW5nOiAwIDVweDsKICAgICAgbWFyZ2luOiAwIDAgMCAxcHg7CiAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsKICAgICAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCB2YXIoLS13bS1ib3JkZXIpOwogICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZCB2YXIoLS13bS1ib3JkZXIpOwogICAgICBsaW5lLWhlaWdodDogdmFyKC0td20tdGFiLWhlaWdodCk7CiAgICAgIGhlaWdodDogY2FsYyh2YXIoLS13bS10YWItaGVpZ2h0KSArIDFweCk7CiAgICAgIGZsZXgtZ3JvdzogMDsKCiAgICAgICY6aG92ZXIgewogICAgICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXdtLWNsb3Nlci1ob3Zlci1iZyk7CiAgICAgIH0KICAgIH0KCiAgICAucmVzaXplci15IHsKICAgICAgY3Vyc29yOiBucy1yZXNpemU7CiAgICB9CgogICAgLnJlc2l6ZXIteCB7CiAgICAgIGN1cnNvcjogY29sLXJlc2l6ZTsKICAgIH0KCiAgICAucmVzaXplci1hbGlnbi1yaWdodCB7CiAgICAgIG1hcmdpbi1sZWZ0OiBhdXRvOwogICAgfQoKICAgICYucmVzaXplci1sZWZ0IHsKICAgICAgZGlzcGxheTogZmxleDsKICAgICAgZmxleC1kaXJlY3Rpb246IHJvdzsKICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuOwogICAgfQogIH0KCiAgLmJvZHkgewogICAgZ3JpZC1hcmVhOiBib2R5OwogICAgYmFja2dyb3VuZC1jb2xvcjogdmFyKC0td20tYm9keS1iZyk7CiAgICBkaXNwbGF5OiBub25lOwogICAgb3ZlcmZsb3c6IGhpZGRlbjsKCiAgICAmLmFjdGl2ZSB7CiAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICBoZWlnaHQ6IDEwMCU7CiAgICB9CiAgfQoKICAmLnBpbi1yaWdodCB7CiAgICBib3JkZXItbGVmdDogdmFyKC0tbmF2LWJvcmRlci1zaXplKSBzb2xpZCB2YXIoLS1uYXYtYm9yZGVyKTsKICB9CgogICYucGluLWxlZnQgewogICAgYm9yZGVyLXJpZ2h0OiB2YXIoLS1uYXYtYm9yZGVyLXNpemUpIHNvbGlkIHZhcigtLW5hdi1ib3JkZXIpOwogIH0KfQo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AA0fA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/components/nav/WindowManager","sourcesContent":["<script>\nimport { mapState } from 'vuex';\nimport debounce from 'lodash/debounce';\nimport {\n  screenRect, boundingRect, BOTTOM, RIGHT, LEFT\n} from '@shell/utils/position';\n\nexport default {\n  data() {\n    return {\n      dragOffset:     0,\n      reportedHeight: this.height,\n      reportedWidth:  this.width,\n      component:      { },\n    };\n  },\n\n  computed: {\n    ...mapState('wm', ['tabs', 'active', 'open', 'userHeight', 'userWidth', 'userPin']),\n\n    height: {\n      get() {\n        if ( process.server ) {\n          return 0;\n        }\n\n        if ( this.userHeight ) {\n          return this.userHeight;\n        }\n\n        const windowHeight = window.innerHeight;\n        let height = parseInt(window.localStorage.getItem('wm-height'), 10);\n\n        if ( !height ) {\n          height = Math.round(windowHeight / 2);\n        }\n        height = Math.min(height, 3 * windowHeight / 4);\n\n        window.localStorage.setItem('wm-height', height);\n\n        return height;\n      },\n\n      set(val) {\n        this.$store.commit('wm/setUserHeight', val);\n        window.localStorage.setItem('wm-height', val);\n        this.show();\n\n        return val;\n      },\n    },\n\n    width: {\n      get() {\n        if ( process.server ) {\n          return 0;\n        }\n\n        if (this.userWidth) {\n          return this.userWidth;\n        }\n\n        const windowWidth = window.innerWidth;\n        let width = parseInt(window.localStorage.getItem('wm-width'), 10);\n\n        if (!width) {\n          width = Math.round(windowWidth / 8);\n        }\n        width = Math.min(width, 3 * windowWidth / 4);\n\n        window.localStorage.setItem('wm-width', width);\n\n        return width;\n      },\n      set(val) {\n        this.$store.commit('wm/setUserWidth', val);\n        window.localStorage.setItem('wm-width', val);\n        this.show();\n\n        return val;\n      }\n    },\n\n    pinClass() {\n      return `pin-${ this.userPin }`;\n    },\n  },\n\n  watch: {\n    userPin(v) {\n      if (this.open) {\n        this.setWmDimensions();\n        if (v === LEFT || v === RIGHT) {\n          this.setReportedHeight(window.innerHeight - 55);\n        }\n      }\n    },\n\n    tabs() {\n      this.toggle(true);\n    },\n\n    open(neu) {\n      if ( neu ) {\n        this.setReportedHeight();\n        this.show();\n      } else {\n        this.hide();\n      }\n    },\n  },\n\n  mounted() {\n    this.toggle(true);\n    this.queueUpdate = debounce(this.setReportedHeight, 250);\n  },\n\n  methods: {\n    switchTo(id) {\n      this.$store.commit('wm/setActive', id);\n    },\n\n    toggle(reverse = false) {\n      if ( this.dragging ) {\n        return;\n      }\n\n      if ( this.open ^ reverse ) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    },\n\n    show() {\n      this.setWmDimensions();\n      this.$store.commit('wm/setOpen', true);\n    },\n\n    hide() {\n      if ( this.tabs.length ) {\n        document.documentElement.style.setProperty('--wm-height', `calc(var(--wm-tab-height, 29px) + 2px)`);\n      } else {\n        document.documentElement.style.setProperty('--wm-height', '0');\n        document.documentElement.style.setProperty('--wm-width', '0');\n      }\n\n      this.$store.commit('wm/setOpen', false);\n    },\n\n    dragYStart(event) {\n      const doc = document.documentElement;\n\n      doc.addEventListener('mousemove', this.dragYMove);\n      doc.addEventListener('touchmove', this.dragYMove, true);\n      doc.addEventListener('mouseup', this.dragYEnd);\n      doc.addEventListener('mouseleave', this.dragYEnd);\n      doc.addEventListener('touchend touchcancel', this.dragYEnd, true);\n      doc.addEventListener('touchstart', this.dragYEnd, true);\n\n      const eventY = event.screenY;\n\n      const rect = boundingRect(event.target);\n      const offset = eventY - rect.top;\n\n      this.dragOffset = offset;\n    },\n\n    dragYMove(event) {\n      const screen = screenRect();\n      const eventY = event.screenY;\n      const min = 50;\n      const max = Math.round( 3 * screen.height / 4);\n\n      let neu = screen.height - eventY + this.dragOffset;\n\n      neu = Math.max(min, Math.min(neu, max));\n\n      this.height = neu;\n      this.dragging = true;\n      this.queueUpdate();\n    },\n\n    dragYEnd(event) {\n      const doc = document.documentElement;\n\n      doc.removeEventListener('mousemove', this.dragYMove);\n      doc.removeEventListener('touchmove', this.dragYMove, true);\n      doc.removeEventListener('mouseup', this.dragYEnd);\n      doc.removeEventListener('mouseleave', this.dragYEnd);\n      doc.removeEventListener('touchend touchcancel', this.dragYEnd, true);\n      doc.removeEventListener('touchstart', this.dragYEnd, true);\n\n      this.setReportedHeight();\n      setTimeout(() => {\n        this.dragging = false;\n      }, 100);\n    },\n\n    dragXStart(event) {\n      const doc = document.documentElement;\n\n      doc.addEventListener('mousemove', this.dragXMove);\n      doc.addEventListener('touchmove', this.dragXMove, true);\n      doc.addEventListener('mouseup', this.dragXEnd);\n      doc.addEventListener('mouseleave', this.dragXEnd);\n      doc.addEventListener('touchend touchcancel', this.dragXEnd, true);\n      doc.addEventListener('touchstart', this.dragXEnd, true);\n\n      const eventX = event.screenX;\n      const rect = boundingRect(event.target);\n\n      switch (this.userPin) {\n      case RIGHT:\n        this.dragOffset = eventX - rect.left;\n        break;\n      case LEFT:\n        this.dragOffset = rect.right - eventX;\n        break;\n      }\n    },\n\n    dragXMove(event) {\n      const screen = screenRect();\n      const eventX = event.screenX;\n\n      const min = 250;\n      const max = Math.round(2 * screen.width / 5);\n      let neu;\n\n      switch (this.userPin) {\n      case RIGHT:\n        neu = screen.width - eventX + this.dragOffset;\n        break;\n      case LEFT:\n        neu = eventX + this.dragOffset;\n        break;\n      }\n\n      neu = Math.max(min, Math.min(neu, max));\n      this.width = neu;\n      this.dragging = true;\n      debounce(this.setReportedWidth, 250)();\n    },\n\n    dragXEnd(event) {\n      const doc = document.documentElement;\n\n      doc.removeEventListener('mousemove', this.dragXMove);\n      doc.removeEventListener('touchmove', this.dragXMove, true);\n      doc.removeEventListener('mouseup', this.dragXEnd);\n      doc.removeEventListener('mouseleave', this.dragXEnd);\n      doc.removeEventListener('touchend touchcancel', this.dragXEnd, true);\n      doc.removeEventListener('touchstart', this.dragXEnd, true);\n\n      this.setReportedWidth();\n      setTimeout(() => {\n        this.dragging = false;\n      }, 100);\n    },\n\n    setReportedHeight(height = this.height) {\n      this.reportedHeight = height;\n    },\n\n    setReportedWidth() {\n      this.reportedWidth = this.width;\n    },\n\n    setWmDimensions() {\n      switch (this.userPin) {\n      case RIGHT:\n      case LEFT:\n        document.documentElement.style.setProperty('--wm-height', `${ window.innerHeight - 55 }px`);\n        document.documentElement.style.setProperty('--wm-width', `${ this.width }px`);\n        break;\n      case BOTTOM:\n        document.documentElement.style.setProperty('--wm-height', `${ this.height }px`);\n        break;\n      }\n    },\n\n    close(id) {\n      this.$store.dispatch('wm/close', id);\n    },\n\n    componentFor(tab) {\n      if (this.component[tab.component] === undefined) {\n        if (this.$store.getters['type-map/hasCustomWindowComponent'](tab.component)) {\n          this.component[tab.component] = this.$store.getters['type-map/importWindowComponent'](tab.component);\n        } else {\n          console.warn(`Unable to find window component for type '${ tab.component }'`); // eslint-disable-line no-console\n          this.component[tab.component] = null;\n        }\n      }\n\n      return this.component[tab.component];\n    },\n\n    emitDraggable(event) {\n      this.$emit('draggable', event);\n    }\n  }\n};\n</script>\n\n<template>\n  <div\n    id=\"windowmanager\"\n    data-testid=\"windowmanager\"\n    class=\"windowmanager\"\n    :class=\"{[pinClass]: true}\"\n  >\n    <div\n      ref=\"tabs\"\n      class=\"tabs\"\n      :class=\"{\n        'resizer-left': userPin == 'left',\n      }\"\n      @mousedown=\"emitDraggable(true)\"\n      @mouseup=\"emitDraggable(false)\"\n    >\n      <div\n        v-if=\"userPin == 'right'\"\n        class=\"resizer resizer-x\"\n        @mousedown.prevent.stop=\"dragXStart($event)\"\n        @touchstart.prevent.stop=\"dragXStart($event)\"\n      >\n        <i class=\"icon icon-code\" />\n      </div>\n      <div\n        v-for=\"tab in tabs\"\n        :key=\"tab.id\"\n        class=\"tab\"\n        :class=\"{'active': tab.id === active}\"\n        @click=\"switchTo(tab.id)\"\n      >\n        <i\n          v-if=\"tab.icon\"\n          class=\"icon\"\n          :class=\"{['icon-'+ tab.icon]: true}\"\n        />\n        <span class=\"tab-label\"> {{ tab.label }}</span>\n        <i\n          class=\"closer icon icon-fw icon-x\"\n          @click.stop=\"close(tab.id)\"\n        />\n      </div>\n      <div\n        v-if=\"userPin == 'bottom'\"\n        class=\"resizer resizer-y\"\n        @mousedown.prevent.stop=\"dragYStart($event)\"\n        @touchstart.prevent.stop=\"dragYStart($event)\"\n        @click=\"toggle\"\n      >\n        <i class=\"icon icon-sort\" />\n      </div>\n      <div\n        v-if=\"userPin == 'left'\"\n        class=\"resizer resizer-x resizer-align-right\"\n        @mousedown.prevent.stop=\"dragXStart($event)\"\n        @touchstart.prevent.stop=\"dragXStart($event)\"\n      >\n        <i class=\"icon icon-code\" />\n      </div>\n    </div>\n    <div\n      v-for=\"tab in tabs\"\n      :key=\"tab.id\"\n      class=\"body\"\n      :class=\"{'active': tab.id === active}\"\n      draggable=\"false\"\n      @dragstart.prevent.stop\n      @dragend.prevent.stop\n      @mouseover=\"emitDraggable(false)\"\n    >\n      <component\n        :is=\"componentFor(tab)\"\n        :tab=\"tab\"\n        :active=\"tab.id === active\"\n        :height=\"reportedHeight\"\n        :width=\"reportedWidth\"\n        v-bind=\"tab.attrs\"\n        @close=\"close(tab.id)\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  .windowmanager {\n    display: grid;\n    height: var(--wm-height, 0);\n\n    grid-template-areas:\n      \"tabs\"\n      \"body\";\n\n    grid-template-rows: var(--wm-tab-height) auto;\n\n    .tabs, .body {\n      max-width: 100%;\n    }\n\n    .tabs {\n      grid-area: tabs;\n      background-color: var(--wm-tabs-bg);\n      border-top: 1px solid var(--wm-border);\n      border-bottom: 1px solid var(--wm-border);\n\n      display: flex;\n      align-content: stretch;\n\n      .tab {\n        cursor: pointer;\n        user-select: none;\n        border-top: 1px solid var(--wm-border);\n        border-right: 1px solid var(--wm-border);\n        border-left: 1px solid var(--wm-border);\n        padding: 5px 10px;\n        overflow: hidden;\n        text-overflow: ellipsis;\n        margin: 0;\n        display: flex;\n        min-width: 0;\n\n        .tab-label{\n          overflow: hidden;\n          text-overflow: ellipsis;\n        }\n\n        &.active {\n          position: relative;\n          background-color: var(--wm-body-bg);\n          outline: 1px solid var(--wm-body-bg);\n          z-index: 1;\n        }\n\n        .closer {\n          margin-left: 5px;\n          border: 1px solid var(--body-text);\n          border-radius: var(--border-radius);\n\n          &:hover {\n            background-color: var(--wm-closer-hover-bg);\n          }\n        }\n      }\n\n      .resizer {\n        width: var(--wm-tab-height);\n        padding: 0 5px;\n        margin: 0 0 0 1px;\n        text-align: center;\n        border-left: 1px solid var(--wm-border);\n        border-right: 1px solid var(--wm-border);\n        line-height: var(--wm-tab-height);\n        height: calc(var(--wm-tab-height) + 1px);\n        flex-grow: 0;\n\n        &:hover {\n          background-color: var(--wm-closer-hover-bg);\n        }\n      }\n\n      .resizer-y {\n        cursor: ns-resize;\n      }\n\n      .resizer-x {\n        cursor: col-resize;\n      }\n\n      .resizer-align-right {\n        margin-left: auto;\n      }\n\n      &.resizer-left {\n        display: flex;\n        flex-direction: row;\n        justify-content: space-between;\n      }\n    }\n\n    .body {\n      grid-area: body;\n      background-color: var(--wm-body-bg);\n      display: none;\n      overflow: hidden;\n\n      &.active {\n        display: block;\n        height: 100%;\n      }\n    }\n\n    &.pin-right {\n      border-left: var(--nav-border-size) solid var(--nav-border);\n    }\n\n    &.pin-left {\n      border-right: var(--nav-border-size) solid var(--nav-border);\n    }\n  }\n</style>\n"]}]}