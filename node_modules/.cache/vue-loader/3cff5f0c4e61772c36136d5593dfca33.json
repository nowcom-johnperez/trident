{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/LiveDuration.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/LiveDuration.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkYXkgZnJvbSAnZGF5anMnOwppbXBvcnQgeyBlbGFwc2VkVGltZSB9IGZyb20gJ0BzaGVsbC91dGlscy90aW1lJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7fQogICAgfSwKICB9LAoKICBtb3VudGVkKCkgewogICAgLy8gU2V0IGluaXRpYWwgdmFsdWU7CiAgICBpZiAodGhpcy52YWx1ZS5zdGFydFRpbWUpIHsKICAgICAgdGhpcy5saXZlVXBkYXRlKGRheSgpKTsKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsgbGFiZWw6ICctJyB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBkYXlWYWx1ZSgpIHsKICAgICAgaWYgKCF0aGlzLnZhbHVlLnN0YXJ0VGltZSkgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CgogICAgICByZXR1cm4gZGF5KHRoaXMudmFsdWUuc3RhcnRUaW1lKTsKICAgIH0KICB9LAoKICB3YXRjaDogewogICAgdmFsdWUoKSB7CiAgICAgIGlmICh0aGlzLnZhbHVlLnN0YXJ0VGltZSkgewogICAgICAgIHRoaXMubGl2ZVVwZGF0ZShkYXkoKSk7CiAgICAgIH0KICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBsaXZlVXBkYXRlKG5vdykgewogICAgICBpZiAoIXRoaXMuZGF5VmFsdWUpIHsKICAgICAgICB0aGlzLmxhYmVsID0gJy0nOwoKICAgICAgICByZXR1cm4gMzAwOwogICAgICB9CgogICAgICBjb25zdCB7IGxhYmVsLCBkaWZmIH0gPSB0aGlzLmdldER1cmF0aW9uKHRoaXMuZGF5VmFsdWUsIG5vdyk7CgogICAgICB0aGlzLmxhYmVsID0gbGFiZWw7CgogICAgICByZXR1cm4gZGlmZjsKICAgIH0sCiAgICBnZXREdXJhdGlvbih2YWx1ZSwgZnJvbSkgewogICAgICBjb25zdCBub3cgPSBkYXkoKTsKCiAgICAgIGZyb20gPSBmcm9tIHx8IG5vdzsKICAgICAgY29uc3Qgc2Vjb25kcyA9IE1hdGguYWJzKHZhbHVlLmRpZmYobm93LCAnc2Vjb25kcycpKTsKCiAgICAgIHJldHVybiBlbGFwc2VkVGltZShzZWNvbmRzKTsKICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["LiveDuration.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA","file":"LiveDuration.vue","sourceRoot":"node_modules/@rancher/shell/components/formatter","sourcesContent":["<script>\nimport day from 'dayjs';\nimport { elapsedTime } from '@shell/utils/time';\n\nexport default {\n  props: {\n    value: {\n      type:    Object,\n      default: () => {}\n    },\n  },\n\n  mounted() {\n    // Set initial value;\n    if (this.value.startTime) {\n      this.liveUpdate(day());\n    }\n  },\n\n  data() {\n    return { label: '-' };\n  },\n\n  computed: {\n    dayValue() {\n      if (!this.value.startTime) {\n        return null;\n      }\n\n      return day(this.value.startTime);\n    }\n  },\n\n  watch: {\n    value() {\n      if (this.value.startTime) {\n        this.liveUpdate(day());\n      }\n    }\n  },\n\n  methods: {\n    liveUpdate(now) {\n      if (!this.dayValue) {\n        this.label = '-';\n\n        return 300;\n      }\n\n      const { label, diff } = this.getDuration(this.dayValue, now);\n\n      this.label = label;\n\n      return diff;\n    },\n    getDuration(value, from) {\n      const now = day();\n\n      from = from || now;\n      const seconds = Math.abs(value.diff(now, 'seconds'));\n\n      return elapsedTime(seconds);\n    },\n  }\n};\n</script>\n\n<template>\n  <span v-if=\"value.staticValue\">\n    {{ value.staticValue }}\n  </span>\n  <span\n    v-else\n    class=\"live-date\"\n  >\n    {{ label }}\n  </span>\n</template>\n"]}]}