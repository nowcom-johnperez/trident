{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/persistentvolumeclaim.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/persistentvolumeclaim.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vQ2hlY2tib3gnOw0KaW1wb3J0IENyZWF0ZUVkaXRWaWV3IGZyb20gJ0BzaGVsbC9taXhpbnMvY3JlYXRlLWVkaXQtdmlldyc7DQppbXBvcnQgQ3J1UmVzb3VyY2UgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQ3J1UmVzb3VyY2UnOw0KaW1wb3J0IE5hbWVOc0Rlc2NyaXB0aW9uIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTmFtZU5zRGVzY3JpcHRpb24nOw0KaW1wb3J0IFRhYiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvVGFiJzsNCmltcG9ydCB7IFJhZGlvR3JvdXAgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL1JhZGlvJzsNCmltcG9ydCBMYWJlbGVkSW5wdXQgZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQvTGFiZWxlZElucHV0LnZ1ZSc7DQppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOw0KaW1wb3J0IFVuaXRJbnB1dCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL1VuaXRJbnB1dCc7DQppbXBvcnQgdW5pcSBmcm9tICdsb2Rhc2gvdW5pcSc7DQppbXBvcnQgeyBfQ1JFQVRFLCBfRURJVCwgRk9DVVMsIF9WSUVXIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOw0KaW1wb3J0IHsgU1RPUkFHRV9DTEFTUywgUFYgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsNCmltcG9ydCBTdGF0dXNUYWJsZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9TdGF0dXNUYWJsZSc7DQppbXBvcnQgUmVzb3VyY2VUYWJzIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vUmVzb3VyY2VUYWJzJzsNCmltcG9ydCBMYWJlbHMgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbHMnOw0KaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsNCmltcG9ydCBSZXNvdXJjZU1hbmFnZXIgZnJvbSAnQHNoZWxsL21peGlucy9yZXNvdXJjZS1tYW5hZ2VyJzsNCg0KY29uc3QgREVGQVVMVF9TVE9SQUdFID0gJzEwR2knOw0KDQpleHBvcnQgZGVmYXVsdCB7DQogIG5hbWU6ICdQZXJzaXN0ZW50Vm9sdW1lQ2xhaW0nLA0KDQogIGNvbXBvbmVudHM6IHsNCiAgICBCYW5uZXIsDQogICAgQ2hlY2tib3gsDQogICAgQ3J1UmVzb3VyY2UsDQogICAgTGFiZWxlZElucHV0LA0KICAgIExhYmVsZWRTZWxlY3QsDQogICAgTGFiZWxzLA0KICAgIE5hbWVOc0Rlc2NyaXB0aW9uLA0KICAgIFJhZGlvR3JvdXAsDQogICAgUmVzb3VyY2VUYWJzLA0KICAgIFN0YXR1c1RhYmxlLA0KICAgIFRhYiwNCiAgICBVbml0SW5wdXQsDQogIH0sDQoNCiAgbWl4aW5zOiBbQ3JlYXRlRWRpdFZpZXcsIFJlc291cmNlTWFuYWdlcl0sDQogIGFzeW5jIGZldGNoKCkgew0KICAgIGNvbnN0IHN0b3JhZ2VDbGFzc2VzID0gYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvZmluZEFsbCcsIHsgdHlwZTogU1RPUkFHRV9DTEFTUyB9KTsNCg0KICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzWydjbHVzdGVyL2Nhbkxpc3QnXShQVikpIHsNCiAgICAgIHRoaXMucmVzb3VyY2VNYW5hZ2VyRmV0Y2hTZWNvbmRhcnlSZXNvdXJjZXModGhpcy5zZWNvbmRhcnlSZXNvdXJjZURhdGEpOw0KICAgIH0NCg0KICAgIHRoaXMuc3RvcmFnZUNsYXNzT3B0aW9ucyA9IHN0b3JhZ2VDbGFzc2VzLm1hcCgocykgPT4gcy5uYW1lKS5zb3J0KCk7DQogICAgdGhpcy5zdG9yYWdlQ2xhc3NPcHRpb25zLnVuc2hpZnQodGhpcy50KCdwZXJzaXN0ZW50Vm9sdW1lQ2xhaW0udXNlRGVmYXVsdCcpKTsNCg0KICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLnNwZWMsICdzdG9yYWdlQ2xhc3NOYW1lJywgdGhpcy52YWx1ZS5zcGVjLnN0b3JhZ2VDbGFzc05hbWUgfHwgdGhpcy5zdG9yYWdlQ2xhc3NPcHRpb25zWzBdKTsNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICBjb25zdCBjYW5MaXN0UGVyc2lzdGVudFZvbHVtZXMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjbHVzdGVyL2Nhbkxpc3QnXShQVik7DQogICAgY29uc3QgY2FuTGlzdFN0b3JhZ2VDbGFzc2VzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY2x1c3Rlci9jYW5MaXN0J10oU1RPUkFHRV9DTEFTUyk7DQogICAgY29uc3Qgc291cmNlT3B0aW9ucyA9IFsNCiAgICAgIHsNCiAgICAgICAgbGFiZWw6IHRoaXMudCgncGVyc2lzdGVudFZvbHVtZUNsYWltLnNvdXJjZS5vcHRpb25zLm5ldycpLA0KICAgICAgICB2YWx1ZTogJ25ldycNCiAgICAgIH0sDQogICAgICB7DQogICAgICAgIGxhYmVsOiB0aGlzLnQoJ3BlcnNpc3RlbnRWb2x1bWVDbGFpbS5zb3VyY2Uub3B0aW9ucy5leGlzdGluZycpLA0KICAgICAgICB2YWx1ZTogJ2V4aXN0aW5nJw0KICAgICAgfQ0KICAgIF07DQoNCiAgICBjb25zdCBkZWZhdWx0QWNjZXNzTW9kZXMgPSBbJ1JlYWRXcml0ZU9uY2UnXTsNCg0KICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnc3BlYycsIHRoaXMudmFsdWUuc3BlYyB8fCB7fSk7DQogICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuc3BlYywgJ3Jlc291cmNlcycsIHRoaXMudmFsdWUuc3BlYy5yZXNvdXJjZXMgfHwge30pOw0KICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLnNwZWMucmVzb3VyY2VzLCAncmVxdWVzdHMnLCB0aGlzLnZhbHVlLnNwZWMucmVzb3VyY2VzLnJlcXVlc3RzIHx8IHt9KTsNCiAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5zcGVjLnJlc291cmNlcy5yZXF1ZXN0cywgJ3N0b3JhZ2UnLCB0aGlzLnZhbHVlLnNwZWMucmVzb3VyY2VzLnJlcXVlc3RzLnN0b3JhZ2UgfHwgREVGQVVMVF9TVE9SQUdFKTsNCiAgICBpZiAodGhpcy5yZWFsTW9kZSA9PT0gX0NSRUFURSkgew0KICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuc3BlYywgJ2FjY2Vzc01vZGVzJywgZGVmYXVsdEFjY2Vzc01vZGVzKTsNCiAgICB9DQoNCiAgICBjb25zdCBkZWZhdWx0VGFiID0gdGhpcy4kcm91dGUucXVlcnlbRk9DVVNdIHx8IG51bGw7DQoNCiAgICByZXR1cm4gew0KICAgICAgc2Vjb25kYXJ5UmVzb3VyY2VEYXRhOiAgIHRoaXMuc2Vjb25kYXJ5UmVzb3VyY2VEYXRhQ29uZmlnKCksDQogICAgICBzb3VyY2VPcHRpb25zLA0KICAgICAgc291cmNlOiAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWUuc3BlYy52b2x1bWVOYW1lID8gc291cmNlT3B0aW9uc1sxXS52YWx1ZSA6IHNvdXJjZU9wdGlvbnNbMF0udmFsdWUsDQogICAgICBpbW11dGFibGVNb2RlOiAgICAgICAgICAgdGhpcy5yZWFsTW9kZSA9PT0gX0NSRUFURSA/IF9DUkVBVEUgOiBfVklFVywNCiAgICAgIHBlcnNpc3RlbnRWb2x1bWVPcHRpb25zOiBbXSwNCiAgICAgIHBlcnNpc3RlbnRWb2x1bWVzOiAgICAgICBbXSwNCiAgICAgIHN0b3JhZ2VDbGFzc09wdGlvbnM6ICAgICBbXSwNCiAgICAgIGRlZmF1bHRUYWIsDQogICAgICBjYW5MaXN0UGVyc2lzdGVudFZvbHVtZXMsDQogICAgICBjYW5MaXN0U3RvcmFnZUNsYXNzZXMsDQogICAgfTsNCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICByZWFkV3JpdGVPbmNlOiB7DQogICAgICBnZXQoKSB7DQogICAgICAgIHJldHVybiB0aGlzLnZhbHVlLnNwZWMuYWNjZXNzTW9kZXMuaW5jbHVkZXMoJ1JlYWRXcml0ZU9uY2UnKTsNCiAgICAgIH0sDQogICAgICBzZXQodmFsdWUpIHsNCiAgICAgICAgdGhpcy5jaGVja2JveFNldHRlcignUmVhZFdyaXRlT25jZScsIHZhbHVlKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHJlYWRPbmx5TWFueTogew0KICAgICAgZ2V0KCkgew0KICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zcGVjLmFjY2Vzc01vZGVzLmluY2x1ZGVzKCdSZWFkT25seU1hbnknKTsNCiAgICAgIH0sDQogICAgICBzZXQodmFsdWUpIHsNCiAgICAgICAgdGhpcy5jaGVja2JveFNldHRlcignUmVhZE9ubHlNYW55JywgdmFsdWUpOw0KICAgICAgfQ0KICAgIH0sDQogICAgcmVhZFdyaXRlTWFueTogew0KICAgICAgZ2V0KCkgew0KICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zcGVjLmFjY2Vzc01vZGVzLmluY2x1ZGVzKCdSZWFkV3JpdGVNYW55Jyk7DQogICAgICB9LA0KICAgICAgc2V0KHZhbHVlKSB7DQogICAgICAgIHRoaXMuY2hlY2tib3hTZXR0ZXIoJ1JlYWRXcml0ZU1hbnknLCB2YWx1ZSk7DQogICAgICB9DQogICAgfSwNCiAgICBwZXJzaXN0ZW50Vm9sdW1lOiB7DQogICAgICBnZXQoKSB7DQogICAgICAgIHJldHVybiB0aGlzLnZhbHVlLnNwZWMudm9sdW1lTmFtZTsNCiAgICAgIH0sDQogICAgICBzZXQodmFsdWUpIHsNCiAgICAgICAgY29uc3QgcGVyc2lzdGVudFZvbHVtZSA9IHRoaXMucGVyc2lzdGVudFZvbHVtZXMuZmluZCgocHYpID0+IHB2Lm1ldGFkYXRhLm5hbWUgPT09IHZhbHVlKTsNCg0KICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5zcGVjLCAnc3RvcmFnZUNsYXNzTmFtZScsICcnKTsNCg0KICAgICAgICBpZiAocGVyc2lzdGVudFZvbHVtZSkgew0KICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLnNwZWMucmVzb3VyY2VzLnJlcXVlc3RzLCAnc3RvcmFnZScsIHBlcnNpc3RlbnRWb2x1bWUuc3BlYy5jYXBhY2l0eT8uc3RvcmFnZSk7DQogICAgICAgICAgaWYgKHBlcnNpc3RlbnRWb2x1bWUuc3BlYz8uc3RvcmFnZUNsYXNzTmFtZSkgew0KICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuc3BlYywgJ3N0b3JhZ2VDbGFzc05hbWUnLCBwZXJzaXN0ZW50Vm9sdW1lLnNwZWM/LnN0b3JhZ2VDbGFzc05hbWUgKTsNCiAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5zcGVjLCAndm9sdW1lTmFtZScsIHZhbHVlKTsNCiAgICAgIH0NCiAgICB9LA0KICAgIHN0b3JhZ2VBbW91bnRNb2RlKCkgew0KICAgICAgaWYgKHRoaXMuaXNDcmVhdGUpIHsNCiAgICAgICAgcmV0dXJuIF9DUkVBVEU7DQogICAgICB9IGVsc2UgaWYgKHRoaXMuaXNFZGl0ICYmIHRoaXMudmFsdWUuZXhwYW5kYWJsZSAmJiB0aGlzLnZhbHVlLmJvdW5kKSB7DQogICAgICAgIHJldHVybiBfRURJVDsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIF9WSUVXOw0KICAgIH0NCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLnJlZ2lzdGVyQmVmb3JlSG9vayh0aGlzLndpbGxTYXZlLCAnd2lsbFNhdmUnKTsNCiAgfSwNCiAgbW91bnRlZCgpIHsNCiAgICBjb25zdCBmb2N1cyA9IHRoaXMuJHJlZnMudm9sdW1lU2l6ZT8uZm9jdXM7DQoNCiAgICBpZiAodGhpcy5kZWZhdWx0VGFiID09PSAndm9sdW1lY2xhaW0nICYmIGZvY3VzKSB7DQogICAgICBzZXRUaW1lb3V0KCgpID0+IGZvY3VzKCkpOw0KICAgIH0NCiAgfSwNCiAgbWV0aG9kczogew0KICAgIHNlY29uZGFyeVJlc291cmNlRGF0YUNvbmZpZygpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIG5hbWVzcGFjZTogdGhpcy52YWx1ZT8ubWV0YWRhdGE/Lm5hbWVzcGFjZSB8fCBudWxsLA0KICAgICAgICBkYXRhOiAgICAgIHsNCiAgICAgICAgICBbUFZdOiB7DQogICAgICAgICAgICBhcHBseVRvOiBbDQogICAgICAgICAgICAgIHsgdmFyOiAncGVyc2lzdGVudFZvbHVtZXMnIH0sDQogICAgICAgICAgICAgIHsNCiAgICAgICAgICAgICAgICB2YXI6ICAgICAgICAgJ3BlcnNpc3RlbnRWb2x1bWVPcHRpb25zJywNCiAgICAgICAgICAgICAgICBwYXJzaW5nRnVuYzogKGRhdGEpID0+IHsNCiAgICAgICAgICAgICAgICAgIHJldHVybiBkYXRhDQogICAgICAgICAgICAgICAgICAgIC5tYXAoKHMpID0+IHsNCiAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBzLnN0YXR1cy5waGFzZSA9PT0gJ0F2YWlsYWJsZScgPyAnJyA6IGAgKCR7IHMuc3RhdHVzLnBoYXNlIH0pYDsNCg0KICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7DQogICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogYCR7IHMubWV0YWRhdGEubmFtZSB9JHsgc3RhdHVzIH1gLA0KICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHMubWV0YWRhdGEubmFtZQ0KICAgICAgICAgICAgICAgICAgICAgIH07DQogICAgICAgICAgICAgICAgICAgIH0pDQogICAgICAgICAgICAgICAgICAgIC5zb3J0KChsLCByKSA9PiBsLmxhYmVsLmxvY2FsZUNvbXBhcmUoci5sYWJlbCkpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgXQ0KICAgICAgICAgIH0sDQogICAgICAgIH0NCiAgICAgIH07DQogICAgfSwNCiAgICBjaGVja2JveFNldHRlcihrZXksIHZhbHVlKSB7DQogICAgICBpZiAodmFsdWUpIHsNCiAgICAgICAgdGhpcy52YWx1ZS5zcGVjLmFjY2Vzc01vZGVzLnB1c2goa2V5KTsNCiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdhY2Nlc3NNb2RlcycsIHVuaXEodGhpcy52YWx1ZS5zcGVjLmFjY2Vzc01vZGVzKSk7DQogICAgICB9IGVsc2Ugew0KICAgICAgICBjb25zdCBpbmRleE9mID0gdGhpcy52YWx1ZS5zcGVjLmFjY2Vzc01vZGVzLmluZGV4T2Yoa2V5KTsNCg0KICAgICAgICBpZiAoaW5kZXhPZiA+PSAwKSB7DQogICAgICAgICAgdGhpcy52YWx1ZS5zcGVjLmFjY2Vzc01vZGVzLnNwbGljZShpbmRleE9mLCAxKTsNCiAgICAgICAgfQ0KICAgICAgfQ0KICAgIH0sDQogICAgaXNQZXJzaXN0ZW50Vm9sdW1lU2VsZWN0YWJsZShvcHRpb24pIHsNCiAgICAgIGNvbnN0IHBlcnNpc3RlbnRWb2x1bWUgPSB0aGlzLnBlcnNpc3RlbnRWb2x1bWVzLmZpbmQoKHB2KSA9PiBwdi5tZXRhZGF0YS5uYW1lID09PSBvcHRpb24udmFsdWUpOw0KDQogICAgICByZXR1cm4gcGVyc2lzdGVudFZvbHVtZS5zdGF0dXMucGhhc2UgPT09ICdBdmFpbGFibGUnOw0KICAgIH0sDQogICAgdXBkYXRlRGVmYXVsdHMoc291cmNlKSB7DQogICAgICBpZiAoc291cmNlID09PSAnbmV3Jykgew0KICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5zcGVjLnJlc291cmNlcy5yZXF1ZXN0cywgJ3N0b3JhZ2UnLCBERUZBVUxUX1NUT1JBR0UpOw0KICAgICAgfQ0KDQogICAgICB0aGlzLiRzZXQodGhpcywgJ3BlcnNpc3RlbnRWb2x1bWUnLCBudWxsKTsNCiAgICB9LA0KICAgIHdpbGxTYXZlKCkgew0KICAgICAgaWYgKHRoaXMudmFsdWUuc3BlYy5zdG9yYWdlQ2xhc3NOYW1lID09PSB0aGlzLnQoJ3BlcnNpc3RlbnRWb2x1bWVDbGFpbS51c2VEZWZhdWx0JykpIHsNCiAgICAgICAgdGhpcy4kZGVsZXRlKHRoaXMudmFsdWUuc3BlYywgJ3N0b3JhZ2VDbGFzc05hbWUnKTsNCiAgICAgIH0NCiAgICB9DQogIH0NCn07DQo="},{"version":3,"sources":["persistentvolumeclaim.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"persistentvolumeclaim.vue","sourceRoot":"node_modules/@rancher/shell/edit","sourcesContent":["<script>\r\nimport { Checkbox } from '@components/Form/Checkbox';\r\nimport CreateEditView from '@shell/mixins/create-edit-view';\r\nimport CruResource from '@shell/components/CruResource';\r\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\r\nimport Tab from '@shell/components/Tabbed/Tab';\r\nimport { RadioGroup } from '@components/Form/Radio';\r\nimport LabeledInput from '@components/Form/LabeledInput/LabeledInput.vue';\r\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\r\nimport UnitInput from '@shell/components/form/UnitInput';\r\nimport uniq from 'lodash/uniq';\r\nimport { _CREATE, _EDIT, FOCUS, _VIEW } from '@shell/config/query-params';\r\nimport { STORAGE_CLASS, PV } from '@shell/config/types';\r\nimport StatusTable from '@shell/components/StatusTable';\r\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\r\nimport Labels from '@shell/components/form/Labels';\r\nimport { Banner } from '@components/Banner';\r\nimport ResourceManager from '@shell/mixins/resource-manager';\r\n\r\nconst DEFAULT_STORAGE = '10Gi';\r\n\r\nexport default {\r\n  name: 'PersistentVolumeClaim',\r\n\r\n  components: {\r\n    Banner,\r\n    Checkbox,\r\n    CruResource,\r\n    LabeledInput,\r\n    LabeledSelect,\r\n    Labels,\r\n    NameNsDescription,\r\n    RadioGroup,\r\n    ResourceTabs,\r\n    StatusTable,\r\n    Tab,\r\n    UnitInput,\r\n  },\r\n\r\n  mixins: [CreateEditView, ResourceManager],\r\n  async fetch() {\r\n    const storageClasses = await this.$store.dispatch('cluster/findAll', { type: STORAGE_CLASS });\r\n\r\n    if (this.$store.getters['cluster/canList'](PV)) {\r\n      this.resourceManagerFetchSecondaryResources(this.secondaryResourceData);\r\n    }\r\n\r\n    this.storageClassOptions = storageClasses.map((s) => s.name).sort();\r\n    this.storageClassOptions.unshift(this.t('persistentVolumeClaim.useDefault'));\r\n\r\n    this.$set(this.value.spec, 'storageClassName', this.value.spec.storageClassName || this.storageClassOptions[0]);\r\n  },\r\n  data() {\r\n    const canListPersistentVolumes = this.$store.getters['cluster/canList'](PV);\r\n    const canListStorageClasses = this.$store.getters['cluster/canList'](STORAGE_CLASS);\r\n    const sourceOptions = [\r\n      {\r\n        label: this.t('persistentVolumeClaim.source.options.new'),\r\n        value: 'new'\r\n      },\r\n      {\r\n        label: this.t('persistentVolumeClaim.source.options.existing'),\r\n        value: 'existing'\r\n      }\r\n    ];\r\n\r\n    const defaultAccessModes = ['ReadWriteOnce'];\r\n\r\n    this.$set(this.value, 'spec', this.value.spec || {});\r\n    this.$set(this.value.spec, 'resources', this.value.spec.resources || {});\r\n    this.$set(this.value.spec.resources, 'requests', this.value.spec.resources.requests || {});\r\n    this.$set(this.value.spec.resources.requests, 'storage', this.value.spec.resources.requests.storage || DEFAULT_STORAGE);\r\n    if (this.realMode === _CREATE) {\r\n      this.$set(this.value.spec, 'accessModes', defaultAccessModes);\r\n    }\r\n\r\n    const defaultTab = this.$route.query[FOCUS] || null;\r\n\r\n    return {\r\n      secondaryResourceData:   this.secondaryResourceDataConfig(),\r\n      sourceOptions,\r\n      source:                  this.value.spec.volumeName ? sourceOptions[1].value : sourceOptions[0].value,\r\n      immutableMode:           this.realMode === _CREATE ? _CREATE : _VIEW,\r\n      persistentVolumeOptions: [],\r\n      persistentVolumes:       [],\r\n      storageClassOptions:     [],\r\n      defaultTab,\r\n      canListPersistentVolumes,\r\n      canListStorageClasses,\r\n    };\r\n  },\r\n  computed: {\r\n    readWriteOnce: {\r\n      get() {\r\n        return this.value.spec.accessModes.includes('ReadWriteOnce');\r\n      },\r\n      set(value) {\r\n        this.checkboxSetter('ReadWriteOnce', value);\r\n      }\r\n    },\r\n    readOnlyMany: {\r\n      get() {\r\n        return this.value.spec.accessModes.includes('ReadOnlyMany');\r\n      },\r\n      set(value) {\r\n        this.checkboxSetter('ReadOnlyMany', value);\r\n      }\r\n    },\r\n    readWriteMany: {\r\n      get() {\r\n        return this.value.spec.accessModes.includes('ReadWriteMany');\r\n      },\r\n      set(value) {\r\n        this.checkboxSetter('ReadWriteMany', value);\r\n      }\r\n    },\r\n    persistentVolume: {\r\n      get() {\r\n        return this.value.spec.volumeName;\r\n      },\r\n      set(value) {\r\n        const persistentVolume = this.persistentVolumes.find((pv) => pv.metadata.name === value);\r\n\r\n        this.$set(this.value.spec, 'storageClassName', '');\r\n\r\n        if (persistentVolume) {\r\n          this.$set(this.value.spec.resources.requests, 'storage', persistentVolume.spec.capacity?.storage);\r\n          if (persistentVolume.spec?.storageClassName) {\r\n            this.$set(this.value.spec, 'storageClassName', persistentVolume.spec?.storageClassName );\r\n          }\r\n        }\r\n\r\n        this.$set(this.value.spec, 'volumeName', value);\r\n      }\r\n    },\r\n    storageAmountMode() {\r\n      if (this.isCreate) {\r\n        return _CREATE;\r\n      } else if (this.isEdit && this.value.expandable && this.value.bound) {\r\n        return _EDIT;\r\n      }\r\n\r\n      return _VIEW;\r\n    }\r\n  },\r\n  created() {\r\n    this.registerBeforeHook(this.willSave, 'willSave');\r\n  },\r\n  mounted() {\r\n    const focus = this.$refs.volumeSize?.focus;\r\n\r\n    if (this.defaultTab === 'volumeclaim' && focus) {\r\n      setTimeout(() => focus());\r\n    }\r\n  },\r\n  methods: {\r\n    secondaryResourceDataConfig() {\r\n      return {\r\n        namespace: this.value?.metadata?.namespace || null,\r\n        data:      {\r\n          [PV]: {\r\n            applyTo: [\r\n              { var: 'persistentVolumes' },\r\n              {\r\n                var:         'persistentVolumeOptions',\r\n                parsingFunc: (data) => {\r\n                  return data\r\n                    .map((s) => {\r\n                      const status = s.status.phase === 'Available' ? '' : ` (${ s.status.phase })`;\r\n\r\n                      return {\r\n                        label: `${ s.metadata.name }${ status }`,\r\n                        value: s.metadata.name\r\n                      };\r\n                    })\r\n                    .sort((l, r) => l.label.localeCompare(r.label));\r\n                }\r\n              }\r\n            ]\r\n          },\r\n        }\r\n      };\r\n    },\r\n    checkboxSetter(key, value) {\r\n      if (value) {\r\n        this.value.spec.accessModes.push(key);\r\n        this.$set(this.value, 'accessModes', uniq(this.value.spec.accessModes));\r\n      } else {\r\n        const indexOf = this.value.spec.accessModes.indexOf(key);\r\n\r\n        if (indexOf >= 0) {\r\n          this.value.spec.accessModes.splice(indexOf, 1);\r\n        }\r\n      }\r\n    },\r\n    isPersistentVolumeSelectable(option) {\r\n      const persistentVolume = this.persistentVolumes.find((pv) => pv.metadata.name === option.value);\r\n\r\n      return persistentVolume.status.phase === 'Available';\r\n    },\r\n    updateDefaults(source) {\r\n      if (source === 'new') {\r\n        this.$set(this.value.spec.resources.requests, 'storage', DEFAULT_STORAGE);\r\n      }\r\n\r\n      this.$set(this, 'persistentVolume', null);\r\n    },\r\n    willSave() {\r\n      if (this.value.spec.storageClassName === this.t('persistentVolumeClaim.useDefault')) {\r\n        this.$delete(this.value.spec, 'storageClassName');\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <CruResource\r\n    :done-route=\"doneRoute\"\r\n    :mode=\"mode\"\r\n    :resource=\"value\"\r\n    :subtypes=\"[]\"\r\n    :validation-passed=\"true\"\r\n    :errors=\"errors\"\r\n    @error=\"e=>errors = e\"\r\n    @finish=\"save\"\r\n    @cancel=\"done\"\r\n  >\r\n    <NameNsDescription\r\n      :value=\"value\"\r\n      :mode=\"mode\"\r\n      :register-before-hook=\"registerBeforeHook\"\r\n      :namespaced=\"true\"\r\n    />\r\n\r\n    <ResourceTabs\r\n      v-model=\"value\"\r\n      :mode=\"mode\"\r\n      :side-tabs=\"true\"\r\n      :default-tab=\"defaultTab\"\r\n    >\r\n      <Tab\r\n        name=\"volumeclaim\"\r\n        :label=\"t('persistentVolumeClaim.volumeClaim.label')\"\r\n        :weight=\"4\"\r\n      >\r\n        <div class=\"row\">\r\n          <div class=\"col span-6\">\r\n            <RadioGroup\r\n              v-model=\"source\"\r\n              name=\"source\"\r\n              :mode=\"immutableMode\"\r\n              :label=\"t('persistentVolumeClaim.source.label')\"\r\n              :options=\"sourceOptions\"\r\n              @input=\"updateDefaults\"\r\n            />\r\n          </div>\r\n          <div class=\"col span-6\">\r\n            <div class=\"row\">\r\n              <div\r\n                v-if=\"source === 'new'\"\r\n                class=\"col span-12\"\r\n              >\r\n                <LabeledSelect\r\n                  v-if=\"canListStorageClasses\"\r\n                  v-model=\"value.spec.storageClassName\"\r\n                  :options=\"storageClassOptions\"\r\n                  :label=\"t('persistentVolumeClaim.volumeClaim.storageClass')\"\r\n                  :mode=\"immutableMode\"\r\n                />\r\n                <LabeledInput\r\n                  v-else\r\n                  v-model=\"value.spec.storageClassName\"\r\n                  :label=\"t('persistentVolumeClaim.volumeClaim.storageClass')\"\r\n                  :mode=\"immutableMode\"\r\n                  :tooltip=\"t('persistentVolumeClaim.volumeClaim.tooltips.noStorageClass')\"\r\n                />\r\n              </div>\r\n              <div\r\n                v-else\r\n                class=\"col span-12\"\r\n              >\r\n                <LabeledSelect\r\n                  v-if=\"canListPersistentVolumes\"\r\n                  v-model=\"persistentVolume\"\r\n                  :options=\"persistentVolumeOptions\"\r\n                  :label=\"t('persistentVolumeClaim.volumeClaim.persistentVolume')\"\r\n                  :selectable=\"isPersistentVolumeSelectable\"\r\n                  :mode=\"immutableMode\"\r\n                  :loading=\"isLoadingSecondaryResources\"\r\n                />\r\n                <LabeledInput\r\n                  v-else\r\n                  v-model=\"persistentVolume\"\r\n                  :label=\"t('persistentVolumeClaim.volumeClaim.persistentVolume')\"\r\n                  :mode=\"immutableMode\"\r\n                  :tooltip=\"t('persistentVolumeClaim.volumeClaim.tooltips.noPersistentVolume')\"\r\n                />\r\n              </div>\r\n            </div>\r\n            <div class=\"row\">\r\n              <div class=\"col span-12 mt-10\">\r\n                <UnitInput\r\n                  ref=\"volumeSize\"\r\n                  v-model=\"value.spec.resources.requests.storage\"\r\n                  :label=\"t('persistentVolumeClaim.volumeClaim.requestStorage')\"\r\n                  :mode=\"storageAmountMode\"\r\n                  :input-exponent=\"3\"\r\n                  :output-modifier=\"true\"\r\n                  :increment=\"1024\"\r\n                  :min=\"1\"\r\n                  :required=\"true\"\r\n                />\r\n                <Banner\r\n                  v-if=\"isEdit && !value.expandable\"\r\n                  color=\"info\"\r\n                  class=\"mt-10\"\r\n                >\r\n                  {{ t('persistentVolumeClaim.expand.notSupported') }}\r\n                </Banner>\r\n                <Banner\r\n                  v-else-if=\"isEdit && !value.bound\"\r\n                  color=\"info\"\r\n                  class=\"mt-10\"\r\n                >\r\n                  {{ t('persistentVolumeClaim.expand.notBound') }}\r\n                </Banner>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </Tab>\r\n      <Tab\r\n        name=\"customize\"\r\n        :label=\"t('persistentVolumeClaim.customize.label')\"\r\n        :weight=\"3\"\r\n      >\r\n        <div class=\"access\">\r\n          <h3>{{ t('persistentVolumeClaim.accessModes') }}</h3>\r\n          <span class=\"text-error\">*</span>\r\n        </div>\r\n        <div>\r\n          <Checkbox\r\n            v-model=\"readWriteOnce\"\r\n            :label=\"t('persistentVolumeClaim.customize.accessModes.readWriteOnce')\"\r\n            :mode=\"immutableMode\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <Checkbox\r\n            v-model=\"readOnlyMany\"\r\n            :label=\"t('persistentVolumeClaim.customize.accessModes.readOnlyMany')\"\r\n            :mode=\"immutableMode\"\r\n          />\r\n        </div>\r\n        <div>\r\n          <Checkbox\r\n            v-model=\"readWriteMany\"\r\n            :label=\"t('persistentVolumeClaim.customize.accessModes.readWriteMany')\"\r\n            :mode=\"immutableMode\"\r\n          />\r\n        </div>\r\n      </Tab>\r\n      <Tab\r\n        v-if=\"isView\"\r\n        name=\"status\"\r\n        :label=\"t('persistentVolumeClaim.status.label')\"\r\n        :weight=\"2\"\r\n      >\r\n        <StatusTable :resource=\"value\" />\r\n      </Tab>\r\n      <Tab\r\n        name=\"labels-and-annotations\"\r\n        label-key=\"generic.labelsAndAnnotations\"\r\n        :weight=\"-1\"\r\n      >\r\n        <Labels\r\n          default-container-class=\"labels-and-annotations-container\"\r\n          :value=\"value\"\r\n          :mode=\"mode\"\r\n          :display-side-by-side=\"false\"\r\n        />\r\n      </Tab>\r\n    </ResourceTabs>\r\n  </CruResource>\r\n</template>\r\n\r\n<style lang='scss' scoped>\r\n.access {\r\n  display: flex;\r\n  flex-direction: row;\r\n}\r\n</style>\r\n"]}]}