{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/auth/config/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/auth/config/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IE1BTkFHRU1FTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IFNlbGVjdEljb25HcmlkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1NlbGVjdEljb25HcmlkJzsKaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyBNT0RFLCBfRURJVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgYXV0aFByb3ZpZGVyc0luZm8gfSBmcm9tICdAc2hlbGwvdXRpbHMvYXV0aCc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBTZWxlY3RJY29uR3JpZCwgQmFubmVyIH0sCgogIGFzeW5jIGFzeW5jRGF0YSh7IHN0b3JlLCByZWRpcmVjdCB9KSB7CiAgICBjb25zdCBhdXRoUHJvdnMgPSBhd2FpdCBhdXRoUHJvdmlkZXJzSW5mbyhzdG9yZSk7CgogICAgaWYgKCEhYXV0aFByb3ZzLmVuYWJsZWRMb2NhdGlvbikgewogICAgICByZWRpcmVjdChhdXRoUHJvdnMuZW5hYmxlZExvY2F0aW9uKTsKICAgIH0KCiAgICByZXR1cm4geyBub25Mb2NhbDogYXV0aFByb3ZzLm5vbkxvY2FsLCBlbmFibGVkOiBhdXRoUHJvdnMuZW5hYmxlZCB9OwogIH0sCgogIGRhdGEoKSB7CiAgICBjb25zdCByZXNvdXJjZSA9IE1BTkFHRU1FTlQuQVVUSF9DT05GSUc7CiAgICBjb25zdCBnZXR0ZXJzID0gdGhpcy4kc3RvcmUuZ2V0dGVyczsKICAgIGNvbnN0IGluU3RvcmUgPSBnZXR0ZXJzWydjdXJyZW50U3RvcmUnXShyZXNvdXJjZSk7CiAgICBjb25zdCBoYXNMaXN0Q29tcG9uZW50ID0gZ2V0dGVyc1sndHlwZS1tYXAvaGFzQ3VzdG9tTGlzdCddKHJlc291cmNlKTsKICAgIGNvbnN0IGhhc0VkaXRDb21wb25lbnQgPSBnZXR0ZXJzWyd0eXBlLW1hcC9oYXNDdXN0b21FZGl0J10ocmVzb3VyY2UpOwogICAgY29uc3Qgc2NoZW1hID0gZ2V0dGVyc1tgJHsgaW5TdG9yZSB9L3NjaGVtYUZvcmBdKHJlc291cmNlKTsKCiAgICByZXR1cm4gewogICAgICByZXNvdXJjZSwKICAgICAgc2NoZW1hLAogICAgICBoYXNMaXN0Q29tcG9uZW50LAogICAgICBoYXNFZGl0Q29tcG9uZW50LAoKICAgICAgLy8gUHJvdmlkZWQgYnkgYXN5bmNEYXRhIGxhdGVyCiAgICAgIG5vbkxvY2FsOiBudWxsLAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgcm93cygpIHsKICAgICAgcmV0dXJuIHNvcnRCeSh0aGlzLm5vbkxvY2FsLCBbJ3NpZGVMYWJlbCcsICduYW1lRGlzcGxheSddKTsKICAgIH0sCgogICAgZGlzcGxheU5hbWUoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWyd0eXBlLW1hcC9sYWJlbEZvciddKHRoaXMuc2NoZW1hLCAyKTsKICAgIH0sCgogICAgbG9jYWxVc2Vyc1JvdXRlKCkgewogICAgICByZXR1cm4gewogICAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGNsdXN0ZXI6IHRoaXMuJHJvdXRlLnBhcmFtcy5jbHVzdGVyLCBwcm9kdWN0OiAnYXV0aCcsIHJlc291cmNlOiBNQU5BR0VNRU5ULlVTRVIKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIGNvbG9yRm9yKHJvdykgewogICAgICBjb25zdCB0eXBlcyA9IFsnbGRhcCcsICdvYXV0aCcsICdzYW1sJywgJ29pZGMnXTsKCiAgICAgIGNvbnN0IGlkeCA9IHR5cGVzLmluZGV4T2Yocm93LmNvbmZpZ1R5cGUpOwoKICAgICAgaWYgKCBpZHggPT09IC0xICkgewogICAgICAgIHJldHVybiAnY29sb3I4JzsKICAgICAgfQoKICAgICAgcmV0dXJuIGBjb2xvciR7IGlkeCArIDEgfWA7CiAgICB9LAoKICAgIGdvVG8oaWQpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1hdXRoLWNvbmZpZy1pZCcsCiAgICAgICAgcGFyYW1zOiB7IGlkIH0sCiAgICAgICAgcXVlcnk6ICB7IFtNT0RFXTogX0VESVQgfQogICAgICB9KTsKICAgIH0sCiAgfQp9Owo="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/auth/config","sourcesContent":["<script>\nimport { MANAGEMENT } from '@shell/config/types';\nimport SelectIconGrid from '@shell/components/SelectIconGrid';\nimport { sortBy } from '@shell/utils/sort';\nimport { MODE, _EDIT } from '@shell/config/query-params';\nimport { authProvidersInfo } from '@shell/utils/auth';\nimport { Banner } from '@components/Banner';\n\nexport default {\n  components: { SelectIconGrid, Banner },\n\n  async asyncData({ store, redirect }) {\n    const authProvs = await authProvidersInfo(store);\n\n    if (!!authProvs.enabledLocation) {\n      redirect(authProvs.enabledLocation);\n    }\n\n    return { nonLocal: authProvs.nonLocal, enabled: authProvs.enabled };\n  },\n\n  data() {\n    const resource = MANAGEMENT.AUTH_CONFIG;\n    const getters = this.$store.getters;\n    const inStore = getters['currentStore'](resource);\n    const hasListComponent = getters['type-map/hasCustomList'](resource);\n    const hasEditComponent = getters['type-map/hasCustomEdit'](resource);\n    const schema = getters[`${ inStore }/schemaFor`](resource);\n\n    return {\n      resource,\n      schema,\n      hasListComponent,\n      hasEditComponent,\n\n      // Provided by asyncData later\n      nonLocal: null,\n    };\n  },\n\n  computed: {\n    rows() {\n      return sortBy(this.nonLocal, ['sideLabel', 'nameDisplay']);\n    },\n\n    displayName() {\n      return this.$store.getters['type-map/labelFor'](this.schema, 2);\n    },\n\n    localUsersRoute() {\n      return {\n        name:   'c-cluster-product-resource',\n        params: {\n          cluster: this.$route.params.cluster, product: 'auth', resource: MANAGEMENT.USER\n        }\n      };\n    },\n  },\n\n  methods: {\n    colorFor(row) {\n      const types = ['ldap', 'oauth', 'saml', 'oidc'];\n\n      const idx = types.indexOf(row.configType);\n\n      if ( idx === -1 ) {\n        return 'color8';\n      }\n\n      return `color${ idx + 1 }`;\n    },\n\n    goTo(id) {\n      this.$router.push({\n        name:   'c-cluster-auth-config-id',\n        params: { id },\n        query:  { [MODE]: _EDIT }\n      });\n    },\n  }\n};\n</script>\n\n<template>\n  <div>\n    <h1 class=\"m-0\">\n      {{ displayName }}\n    </h1>\n    <Banner\n      v-if=\"!enabled.length\"\n      :label=\"t('authConfig.noneEnabled')\"\n      color=\"info\"\n    >\n      <div>\n        {{ t('authConfig.localEnabled') }}\n        <nuxt-link :to=\"localUsersRoute\">\n          {{ t('authConfig.manageLocal') }}\n        </nuxt-link>\n        <br>\n        {{ t('authConfig.noneEnabled') }}\n      </div>\n    </Banner>\n    <SelectIconGrid\n      :rows=\"rows\"\n      :color-for=\"colorFor\"\n      name-field=\"provider\"\n      @clicked=\"(row) => goTo(row.id)\"\n    />\n  </div>\n</template>\n"]}]}