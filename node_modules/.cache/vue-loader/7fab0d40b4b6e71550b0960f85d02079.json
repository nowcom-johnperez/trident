{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ExplorerProjectsNamespaces.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ExplorerProjectsNamespaces.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7DQppbXBvcnQgUmVzb3VyY2VUYWJsZSwgeyBkZWZhdWx0VGFibGVTb3J0R2VuZXJhdGlvbkZuIH0gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvUmVzb3VyY2VUYWJsZSc7DQppbXBvcnQgeyBTVEFURSwgQUdFLCBOQU1FIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90YWJsZS1oZWFkZXJzJzsNCmltcG9ydCB7IHVuaXEgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOw0KaW1wb3J0IHsgTUFOQUdFTUVOVCwgTkFNRVNQQUNFLCBWSVJUVUFMX1RZUEVTIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7DQppbXBvcnQgeyBQUk9KRUNUX0lELCBGTEFUX1ZJRVcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7DQppbXBvcnQgeyBQYW5lbExvY2F0aW9uLCBFeHRlbnNpb25Qb2ludCB9IGZyb20gJ0BzaGVsbC9jb3JlL3R5cGVzJzsNCmltcG9ydCBFeHRlbnNpb25QYW5lbCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9FeHRlbnNpb25QYW5lbCc7DQppbXBvcnQgTWFzdGhlYWQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvUmVzb3VyY2VMaXN0L01hc3RoZWFkJzsNCmltcG9ydCB7IG1hcFByZWYsIEdST1VQX1JFU09VUkNFUywgQUxMX05BTUVTUEFDRVMgfSBmcm9tICdAc2hlbGwvc3RvcmUvcHJlZnMnOw0KaW1wb3J0IE1vdmVNb2RhbCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Nb3ZlTW9kYWwnOw0KDQppbXBvcnQgeyBOQU1FU1BBQ0VfRklMVEVSX0FMTF9PUlBIQU5TIH0gZnJvbSAnQHNoZWxsL3V0aWxzL25hbWVzcGFjZS1maWx0ZXInOw0KaW1wb3J0IFJlc291cmNlRmV0Y2ggZnJvbSAnQHNoZWxsL21peGlucy9yZXNvdXJjZS1mZXRjaCc7DQppbXBvcnQgRE9NUHVyaWZ5IGZyb20gJ2RvbXB1cmlmeSc7DQoNCmV4cG9ydCBkZWZhdWx0IHsNCiAgbmFtZTogICAgICAgJ0xpc3RQcm9qZWN0TmFtZXNwYWNlJywNCiAgY29tcG9uZW50czogew0KICAgIEV4dGVuc2lvblBhbmVsLCBNYXN0aGVhZCwgTW92ZU1vZGFsLCBSZXNvdXJjZVRhYmxlDQogIH0sDQogIG1peGluczogW1Jlc291cmNlRmV0Y2hdLA0KDQogIHByb3BzOiB7DQogICAgY3JlYXRlUHJvamVjdExvY2F0aW9uT3ZlcnJpZGU6IHsNCiAgICAgIHR5cGU6ICAgIE9iamVjdCwNCiAgICAgIGRlZmF1bHQ6ICgpID0+IG51bGwNCiAgICB9LA0KDQogICAgY3JlYXRlTmFtZXNwYWNlTG9jYXRpb25PdmVycmlkZTogew0KICAgICAgdHlwZTogICAgT2JqZWN0LA0KICAgICAgZGVmYXVsdDogKCkgPT4gbnVsbA0KICAgIH0NCiAgfSwNCg0KICBhc3luYyBmZXRjaCgpIHsNCiAgICBjb25zdCBpblN0b3JlID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFN0b3JlJ10oTkFNRVNQQUNFKTsNCg0KICAgIHRoaXMuc2NoZW1hID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHsgaW5TdG9yZSB9L3NjaGVtYUZvcmBdKE5BTUVTUEFDRSk7DQogICAgdGhpcy5wcm9qZWN0U2NoZW1hID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgbWFuYWdlbWVudC9zY2hlbWFGb3JgXShNQU5BR0VNRU5ULlBST0pFQ1QpOw0KDQogICAgaWYgKCAhdGhpcy5zY2hlbWEgKSB7DQogICAgICAvLyBjbHVzdGVyUmVhZHk6ICAgV2hlbiBzd2l0Y2hpbmcgcm91dGVzLCBpdCB3aWxsIGNhdXNlIGNsdXN0ZXJSZWFkeSB0byBjaGFuZ2UsIGNhdXNpbmcgaXRzZWxmIHRvIHJlcGVhdCByZW5kZXJpbmfjgIINCiAgICAgIC8vIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdsb2FkaW5nRXJyb3InLCBgVHlwZSAkeyBOQU1FU1BBQ0UgfSBub3QgZm91bmRgKTsNCg0KICAgICAgcmV0dXJuOw0KICAgIH0NCg0KICAgIGF3YWl0IHRoaXMuJGZldGNoVHlwZShOQU1FU1BBQ0UpOw0KICAgIHRoaXMucHJvamVjdHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgeyB0eXBlOiBNQU5BR0VNRU5ULlBST0pFQ1QsIG9wdDogeyBmb3JjZTogdHJ1ZSB9IH0pOw0KICB9LA0KDQogIGRhdGEoKSB7DQogICAgcmV0dXJuIHsNCiAgICAgIGxvYWRSZXNvdXJjZXM6ICAgICAgICAgICAgICAgIFtOQU1FU1BBQ0VdLA0KICAgICAgbG9hZEluZGV0ZXJtaW5hdGU6ICAgICAgICAgICAgdHJ1ZSwNCiAgICAgIHNjaGVtYTogICAgICAgICAgICAgICAgICAgICAgIG51bGwsDQogICAgICBwcm9qZWN0czogICAgICAgICAgICAgICAgICAgICBbXSwNCiAgICAgIHByb2plY3RTY2hlbWE6ICAgICAgICAgICAgICAgIG51bGwsDQogICAgICBleHRlbnNpb25UeXBlOiAgICAgICAgICAgICAgICBFeHRlbnNpb25Qb2ludC5QQU5FTCwNCiAgICAgIGV4dGVuc2lvbkxvY2F0aW9uOiAgICAgICAgICAgIFBhbmVsTG9jYXRpb24uUkVTT1VSQ0VfTElTVCwNCiAgICAgIE1BTkFHRU1FTlQsDQogICAgICBWSVJUVUFMX1RZUEVTLA0KICAgICAgZGVmYXVsdENyZWF0ZVByb2plY3RMb2NhdGlvbjogew0KICAgICAgICBuYW1lOiAgICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZS1jcmVhdGUnLA0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBwcm9kdWN0OiAgdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXS5uYW1lLA0KICAgICAgICAgIHJlc291cmNlOiBNQU5BR0VNRU5ULlBST0pFQ1QNCiAgICAgICAgfSwNCiAgICAgIH0NCiAgICB9Ow0KICB9LA0KDQogIGNvbXB1dGVkOiB7DQogICAgLi4ubWFwR2V0dGVycyhbJ2N1cnJlbnRDbHVzdGVyJywgJ2N1cnJlbnRQcm9kdWN0J10pLA0KICAgIG5hbWVzcGFjZXMoKSB7DQogICAgICBjb25zdCBpblN0b3JlID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFN0b3JlJ10oTkFNRVNQQUNFKTsNCg0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbYCR7IGluU3RvcmUgfS9hbGxgXShOQU1FU1BBQ0UpOw0KICAgIH0sDQogICAgbG9hZGluZygpIHsNCiAgICAgIHJldHVybiAhdGhpcy5jdXJyZW50Q2x1c3RlciB8fCB0aGlzLm5hbWVzcGFjZXMubGVuZ3RoID8gZmFsc2UgOiB0aGlzLiRmZXRjaFN0YXRlLnBlbmRpbmc7DQogICAgfSwNCiAgICBzaG93SW5jcmVtZW50YWxMb2FkaW5nSW5kaWNhdG9yKCkgew0KICAgICAgcmV0dXJuIHRoaXMucGVyZkNvbmZpZz8uaW5jcmVtZW50YWxMb2FkaW5nPy5lbmFibGVkOw0KICAgIH0sDQogICAgaXNOYW1lc3BhY2VDcmVhdGFibGUoKSB7DQogICAgICByZXR1cm4gKHRoaXMuc2NoZW1hPy5jb2xsZWN0aW9uTWV0aG9kcyB8fCBbXSkuaW5jbHVkZXMoJ1BPU1QnKTsNCiAgICB9LA0KICAgIGhlYWRlcnMoKSB7DQogICAgICBjb25zdCBwcm9qZWN0ID0gew0KICAgICAgICBuYW1lOiAgJ3Byb2plY3QnLA0KICAgICAgICBsYWJlbDogdGhpcy50KCd0YWJsZUhlYWRlcnMucHJvamVjdCcpLA0KICAgICAgICB2YWx1ZTogJ3Byb2plY3QubmFtZURpc3BsYXknLA0KICAgICAgICBzb3J0OiAgWydwcm9qZWN0TmFtZVNvcnQnLCAnbmFtZVNvcnQnXSwNCiAgICAgIH07DQoNCiAgICAgIHJldHVybiBbDQogICAgICAgIFNUQVRFLA0KICAgICAgICBOQU1FLA0KICAgICAgICB0aGlzLmdyb3VwUHJlZmVyZW5jZSA9PT0gJ25vbmUnID8gcHJvamVjdCA6IG51bGwsDQogICAgICAgIEFHRQ0KICAgICAgXS5maWx0ZXIoKGgpID0+IGgpOw0KICAgIH0sDQogICAgcHJvamVjdElkc1dpdGhOYW1lc3BhY2VzKCkgew0KICAgICAgY29uc3QgaWRzID0gdGhpcy5yb3dzDQogICAgICAgIC5tYXAoKHJvdykgPT4gcm93LnByb2plY3RJZCkNCiAgICAgICAgLmZpbHRlcigoaWQpID0+IGlkKTsNCg0KICAgICAgcmV0dXJuIHVuaXEoaWRzKTsNCiAgICB9LA0KICAgIGNsdXN0ZXJQcm9qZWN0cygpIHsNCiAgICAgIGNvbnN0IGNsdXN0ZXJJZCA9IHRoaXMuY3VycmVudENsdXN0ZXIuaWQ7DQoNCiAgICAgIC8vIEdldCB0aGUgbGlzdCBvZiBwcm9qZWN0cyBmcm9tIHRoZSBzdG9yZSBzbyB0aGF0IHRoZSBsaXN0DQogICAgICAvLyBpcyB1cGRhdGVkIGlmIGEgbmV3IHByb2plY3QgaXMgY3JlYXRlZCBvciByZW1vdmVkLg0KICAgICAgY29uc3QgcHJvamVjdHNJbkFsbENsdXN0ZXJzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9hbGwnXShNQU5BR0VNRU5ULlBST0pFQ1QpOw0KDQogICAgICBpZiAodGhpcy5jdXJyZW50UHJvZHVjdD8uY3VzdG9tTmFtZXNwYWNlRmlsdGVyICYmIHRoaXMuY3VycmVudFByb2R1Y3Q/LmluU3RvcmUgJiYgdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHsgdGhpcy5jdXJyZW50UHJvZHVjdC5pblN0b3JlIH0vZmlsdGVyUHJvamVjdGBdKSB7DQogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzW2AkeyB0aGlzLmN1cnJlbnRQcm9kdWN0LmluU3RvcmUgfS9maWx0ZXJQcm9qZWN0YF07DQogICAgICB9DQoNCiAgICAgIGNvbnN0IGNsdXN0ZXJzSW5Qcm9qZWN0cyA9IHByb2plY3RzSW5BbGxDbHVzdGVycy5maWx0ZXIoKHByb2plY3QpID0+IHByb2plY3Quc3BlYy5jbHVzdGVyTmFtZSA9PT0gY2x1c3RlcklkKTsNCg0KICAgICAgcmV0dXJuIGNsdXN0ZXJzSW5Qcm9qZWN0czsNCiAgICB9LA0KICAgIHByb2plY3RzV2l0aG91dE5hbWVzcGFjZXMoKSB7DQogICAgICByZXR1cm4gdGhpcy5hY3RpdmVQcm9qZWN0cy5maWx0ZXIoKHByb2plY3QpID0+IHsNCiAgICAgICAgcmV0dXJuICF0aGlzLnByb2plY3RJZHNXaXRoTmFtZXNwYWNlcy5maW5kKChpdGVtKSA9PiBwcm9qZWN0Py5pZD8uZW5kc1dpdGgoYC8keyBpdGVtIH1gKSk7DQogICAgICB9KTsNCiAgICB9LA0KICAgIC8vIFdlJ3JlIHVzaW5nIHRoaXMgYmVjYXVzZSB3ZSBuZWVkIHRvIHNob3cgcHJvamVjdHMgYXMgZ3JvdXBzIGV2ZW4gaWYgdGhlIHByb2plY3QgZG9lc24ndCBoYXZlIGFueSBuYW1lc3BhY2VzLg0KICAgIHJvd3NXaXRoRmFrZU5hbWVzcGFjZXMoKSB7DQogICAgICBjb25zdCBmYWtlUm93cyA9IHRoaXMucHJvamVjdHNXaXRob3V0TmFtZXNwYWNlcy5tYXAoKHByb2plY3QpID0+IHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICBncm91cEJ5TGFiZWw6ICAgICBgJHsgKCdyZXNvdXJjZVRhYmxlLmdyb3VwTGFiZWwubm90SW5BUHJvamVjdCcpIH0tJHsgcHJvamVjdC5pZCB9YCwNCiAgICAgICAgICBpc0Zha2U6ICAgICAgICAgICB0cnVlLA0KICAgICAgICAgIG1haW5Sb3dLZXk6ICAgICAgIHByb2plY3QuaWQsDQogICAgICAgICAgbmFtZURpc3BsYXk6ICAgICAgcHJvamVjdC5zcGVjPy5kaXNwbGF5TmFtZSwgLy8gRW5hYmxlIGZpbHRlcmluZyBieSB0aGUgcHJvamVjdCBuYW1lDQogICAgICAgICAgcHJvamVjdCwNCiAgICAgICAgICBhdmFpbGFibGVBY3Rpb25zOiBbXQ0KICAgICAgICB9Ow0KICAgICAgfSk7DQoNCiAgICAgIGlmICh0aGlzLnNob3dNb2NrTm90SW5Qcm9qZWN0R3JvdXApIHsNCiAgICAgICAgZmFrZVJvd3MucHVzaCggew0KICAgICAgICAgIGdyb3VwQnlMYWJlbDogdGhpcy50KCdyZXNvdXJjZVRhYmxlLmdyb3VwTGFiZWwubm90SW5BUHJvamVjdCcpLCAvLyBTYW1lIGFzIHRoZSBncm91cEJ5TGFiZWwgZm9yIHRoZSBuYW1lc3BhY2UgbW9kZWwNCiAgICAgICAgICBtYWluUm93S2V5OiAgICdmYWtlLWVtcHR5JywNCiAgICAgICAgfSk7DQogICAgICB9DQoNCiAgICAgIHJldHVybiBbLi4udGhpcy5yb3dzLCAuLi5mYWtlUm93c107DQogICAgfSwNCiAgICBjcmVhdGVQcm9qZWN0TG9jYXRpb24oKSB7DQogICAgICByZXR1cm4gdGhpcy5jcmVhdGVQcm9qZWN0TG9jYXRpb25PdmVycmlkZSB8fCB0aGlzLmRlZmF1bHRDcmVhdGVQcm9qZWN0TG9jYXRpb247DQogICAgfSwNCiAgICBncm91cFByZWZlcmVuY2U6IG1hcFByZWYoR1JPVVBfUkVTT1VSQ0VTKSwNCiAgICBhY3RpdmVOYW1lc3BhY2VGaWx0ZXJzKCkgew0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2FjdGl2ZU5hbWVzcGFjZUZpbHRlcnMnXTsNCiAgICB9LA0KICAgIGFjdGl2ZVByb2plY3RGaWx0ZXJzKCkgew0KICAgICAgY29uc3QgYWN0aXZlUHJvamVjdHMgPSB7fTsNCg0KICAgICAgZm9yIChjb25zdCBmaWx0ZXIgb2YgdGhpcy5hY3RpdmVOYW1lc3BhY2VGaWx0ZXJzKSB7DQogICAgICAgIGNvbnN0IFt0eXBlLCBpZF0gPSBmaWx0ZXIuc3BsaXQoJzovLycsIDIpOw0KDQogICAgICAgIGlmICh0eXBlID09PSAncHJvamVjdCcpIHsNCiAgICAgICAgICBhY3RpdmVQcm9qZWN0c1tpZF0gPSB0cnVlOw0KICAgICAgICB9DQogICAgICB9DQoNCiAgICAgIHJldHVybiBhY3RpdmVQcm9qZWN0czsNCiAgICB9LA0KICAgIGFjdGl2ZVByb2plY3RzKCkgew0KICAgICAgY29uc3QgbmFtZXNwYWNlRmlsdGVycyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2FjdGl2ZU5hbWVzcGFjZUZpbHRlcnMnXTsNCg0KICAgICAgaWYgKG5hbWVzcGFjZUZpbHRlcnMuaW5jbHVkZXMoTkFNRVNQQUNFX0ZJTFRFUl9BTExfT1JQSEFOUykgJiYgT2JqZWN0LmtleXModGhpcy5hY3RpdmVQcm9qZWN0RmlsdGVycykubGVuZ3RoID09PSAwKSB7DQogICAgICAgIC8vIElmIHRoZSB1c2VyIHdhbnRzIHRvIG9ubHkgc2VlIG5hbWVzcGFjZXMgdGhhdCBhcmUgbm90DQogICAgICAgIC8vIGluIGEgcHJvamVjdCwgZG9uJ3Qgc2hvdyBhbnkgcHJvamVjdHMuDQogICAgICAgIHJldHVybiBbXTsNCiAgICAgIH0NCg0KICAgICAgLy8gSWYgdGhlIHVzZXIgaXMgbm90IGZpbHRlcmluZyBieSBhbnkgcHJvamVjdHMgb3IgbmFtZXNwYWNlcywgcmV0dXJuDQogICAgICAvLyBhbGwgcHJvamVjdHMgaW4gdGhlIGNsdXN0ZXIuDQogICAgICBpZiAoIXRoaXMudXNlcklzRmlsdGVyaW5nRm9yU3BlY2lmaWNOYW1lc3BhY2VPclByb2plY3QoKSkgew0KICAgICAgICByZXR1cm4gdGhpcy5jbHVzdGVyUHJvamVjdHM7DQogICAgICB9DQoNCiAgICAgIC8vIEZpbHRlciBvdXQgcHJvamVjdHMgdGhhdCBhcmUgbm90IHNlbGVjdGVkIGluIHRoZSB0b3AgbmF2Lg0KICAgICAgcmV0dXJuIHRoaXMuY2x1c3RlclByb2plY3RzLmZpbHRlcigocHJvamVjdERhdGEpID0+IHsNCiAgICAgICAgY29uc3QgcHJvamVjdElkID0gcHJvamVjdERhdGEuaWQuc3BsaXQoJy8nKVsxXTsNCg0KICAgICAgICByZXR1cm4gISF0aGlzLmFjdGl2ZVByb2plY3RGaWx0ZXJzW3Byb2plY3RJZF07DQogICAgICB9KTsNCiAgICB9LA0KICAgIGFjdGl2ZU5hbWVzcGFjZXMoKSB7DQogICAgICAvLyBBcHBseSBuYW1lc3BhY2UgZmlsdGVycyBmcm9tIHRoZSB0b3AgbmF2Lg0KICAgICAgY29uc3QgYWN0aXZlTmFtZXNwYWNlcyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ25hbWVzcGFjZXMnXSgpOw0KDQogICAgICByZXR1cm4gdGhpcy5uYW1lc3BhY2VzLmZpbHRlcigobmFtZXNwYWNlRGF0YSkgPT4gew0KICAgICAgICByZXR1cm4gISFhY3RpdmVOYW1lc3BhY2VzW25hbWVzcGFjZURhdGEubWV0YWRhdGEubmFtZV07DQogICAgICB9KTsNCiAgICB9LA0KICAgIGZpbHRlcmVkUm93cygpIHsNCiAgICAgIHJldHVybiB0aGlzLmdyb3VwUHJlZmVyZW5jZSA9PT0gJ25vbmUnID8gdGhpcy5yb3dzIDogdGhpcy5yb3dzV2l0aEZha2VOYW1lc3BhY2VzOw0KICAgIH0sDQogICAgcm93cygpIHsNCiAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzWydwcmVmcy9nZXQnXShBTExfTkFNRVNQQUNFUykpIHsNCiAgICAgICAgLy8gSWYgYWxsIG5hbWVzcGFjZXMgb3B0aW9ucyBhcmUgdHVybmVkIG9uIGluIHRoZSB1c2VyIHByZWZlcmVuY2VzLA0KICAgICAgICAvLyByZXR1cm4gYWxsIG5hbWVzcGFjZXMgaW5jbHVkaW5nIHN5c3RlbSBuYW1lc3BhY2VzIGFuZCBSQkFDDQogICAgICAgIC8vIG1hbmFnZW1lbnQgbmFtZXNwYWNlcy4NCiAgICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlTmFtZXNwYWNlczsNCiAgICAgIH0NCg0KICAgICAgcmV0dXJuIHRoaXMuYWN0aXZlTmFtZXNwYWNlcy5maWx0ZXIoKG5hbWVzcGFjZSkgPT4gew0KICAgICAgICBjb25zdCBpc1NldHRpbmdTeXN0ZW1OYW1lc3BhY2UgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydzeXN0ZW1OYW1lc3BhY2VzJ10uaW5jbHVkZXMobmFtZXNwYWNlLm1ldGFkYXRhLm5hbWUpOw0KICAgICAgICBjb25zdCBzeXN0ZW1OUyA9IG5hbWVzcGFjZS5pc1N5c3RlbSB8fCBuYW1lc3BhY2UuaXNGbGVldE1hbmFnZWQgfHwgaXNTZXR0aW5nU3lzdGVtTmFtZXNwYWNlOw0KDQogICAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRQcm9kdWN0Py5oaWRlU3lzdGVtUmVzb3VyY2VzID8gIXN5c3RlbU5TIDogdHJ1ZTsNCiAgICAgIH0pOw0KICAgIH0sDQoNCiAgICBjYW5TZWVQcm9qZWN0bGVzc05hbWVzcGFjZXMoKSB7DQogICAgICByZXR1cm4gdGhpcy5jdXJyZW50Q2x1c3Rlci5jYW5VcGRhdGU7DQogICAgfSwNCg0KICAgIHNob3dNb2NrTm90SW5Qcm9qZWN0R3JvdXAoKSB7DQogICAgICBpZiAoIXRoaXMuY2FuU2VlUHJvamVjdGxlc3NOYW1lc3BhY2VzKSB7DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgIH0NCg0KICAgICAgY29uc3Qgc29tZU5hbWVzcGFjZXNBcmVOb3RJblByb2plY3QgPSAhdGhpcy5yb3dzLnNvbWUoKHJvdykgPT4gIXJvdy5wcm9qZWN0KTsNCg0KICAgICAgLy8gSGlkZSB0aGUgIk5vdCBpbiBhIFByb2plY3QiIGdyb3VwIGlmIHRoZSB1c2VyIGlzIGZpbHRlcmluZw0KICAgICAgLy8gZm9yIHNwZWNpZmljIG5hbWVzcGFjZXMgb3IgcHJvamVjdHMuDQogICAgICBjb25zdCB1c2luZ1NwZWNpZmljRmlsdGVyID0gdGhpcy51c2VySXNGaWx0ZXJpbmdGb3JTcGVjaWZpY05hbWVzcGFjZU9yUHJvamVjdCgpOw0KDQogICAgICByZXR1cm4gIXVzaW5nU3BlY2lmaWNGaWx0ZXIgJiYgc29tZU5hbWVzcGFjZXNBcmVOb3RJblByb2plY3Q7DQogICAgfSwNCg0KICAgIG5vdEluUHJvamVjdEtleSgpIHsNCiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydpMThuL3QnXSgncmVzb3VyY2VUYWJsZS5ncm91cExhYmVsLm5vdEluQVByb2plY3QnKTsNCiAgICB9LA0KICAgIHNob3dDcmVhdGVOc0J1dHRvbigpIHsNCiAgICAgIHJldHVybiB0aGlzLmdyb3VwUHJlZmVyZW5jZSAhPT0gJ25hbWVzcGFjZSc7DQogICAgfQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgLyoqDQogICAgICogR2V0IFBTQSBIVE1MIHRvIGJlIGRpc3BsYXllZCBpbiB0aGUgdG9vbHRpcHMNCiAgICAgKi8NCiAgICBnZXRQc2FUb29sdGlwKHJvdykgew0KICAgICAgY29uc3QgZGljdGlvbmFyeSA9IHJvdy5wc2FUb29sdGlwc0Rlc2NyaXB0aW9uOw0KICAgICAgY29uc3QgbGlzdCA9IE9iamVjdC52YWx1ZXMoZGljdGlvbmFyeSkNCiAgICAgICAgLnNvcnQoKQ0KICAgICAgICAubWFwKCh0ZXh0KSA9PiBgPGxpPiR7IHRleHQgfTwvbGk+YCkuam9pbignJyk7DQogICAgICBjb25zdCB0aXRsZSA9IGA8cD4keyB0aGlzLnQoJ3BvZFNlY3VyaXR5QWRtaXNzaW9uLm5hbWUnKSB9OiA8L3A+YDsNCg0KICAgICAgcmV0dXJuIGAkeyB0aXRsZSB9PHVsIGNsYXNzPSJwc2EtdG9vbHRpcCI+JHsgbGlzdCB9PC91bD5gOw0KICAgIH0sDQoNCiAgICB1c2VySXNGaWx0ZXJpbmdGb3JTcGVjaWZpY05hbWVzcGFjZU9yUHJvamVjdCgpIHsNCiAgICAgIGNvbnN0IGFjdGl2ZUZpbHRlcnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyduYW1lc3BhY2VGaWx0ZXJzJ107DQoNCiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYWN0aXZlRmlsdGVycy5sZW5ndGg7IGkrKykgew0KICAgICAgICBjb25zdCBmaWx0ZXIgPSBhY3RpdmVGaWx0ZXJzW2ldOw0KICAgICAgICBjb25zdCBmaWx0ZXJUeXBlID0gZmlsdGVyLnNwbGl0KCc6Ly8nKVswXTsNCg0KICAgICAgICBpZiAoZmlsdGVyVHlwZSA9PT0gJ25zJyB8fCBmaWx0ZXJUeXBlID09PSAncHJvamVjdCcpIHsNCiAgICAgICAgICByZXR1cm4gdHJ1ZTsNCiAgICAgICAgfQ0KICAgICAgfQ0KDQogICAgICByZXR1cm4gZmFsc2U7DQogICAgfSwNCiAgICBzbG90TmFtZShwcm9qZWN0KSB7DQogICAgICByZXR1cm4gYG1haW4tcm93OiR7IHByb2plY3QuaWQgfWA7DQogICAgfSwNCiAgICBjcmVhdGVOYW1lc3BhY2VMb2NhdGlvbihncm91cCkgew0KICAgICAgY29uc3QgcHJvamVjdCA9IGdyb3VwLnJvd3NbMF0ucHJvamVjdDsNCg0KICAgICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmNyZWF0ZU5hbWVzcGFjZUxvY2F0aW9uT3ZlcnJpZGUgPyB7IC4uLnRoaXMuY3JlYXRlTmFtZXNwYWNlTG9jYXRpb25PdmVycmlkZSB9IDogew0KICAgICAgICBuYW1lOiAgICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZS1jcmVhdGUnLA0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBwcm9kdWN0OiAgdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXS5uYW1lLA0KICAgICAgICAgIHJlc291cmNlOiBOQU1FU1BBQ0UNCiAgICAgICAgfSwNCiAgICAgIH07DQoNCiAgICAgIGxvY2F0aW9uLnF1ZXJ5ID0geyBbUFJPSkVDVF9JRF06IHByb2plY3Q/Lm1ldGFkYXRhLm5hbWUgfTsNCg0KICAgICAgcmV0dXJuIGxvY2F0aW9uOw0KICAgIH0sDQoNCiAgICBjcmVhdGVOYW1lc3BhY2VMb2NhdGlvbkZsYXRMaXN0KCkgew0KICAgICAgY29uc3QgbG9jYXRpb24gPSB0aGlzLmNyZWF0ZU5hbWVzcGFjZUxvY2F0aW9uT3ZlcnJpZGUgPyB7IC4uLnRoaXMuY3JlYXRlTmFtZXNwYWNlTG9jYXRpb25PdmVycmlkZSB9IDogew0KICAgICAgICBuYW1lOiAgICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZS1jcmVhdGUnLA0KICAgICAgICBwYXJhbXM6IHsNCiAgICAgICAgICBwcm9kdWN0OiAgdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXT8ubmFtZSwNCiAgICAgICAgICByZXNvdXJjZTogTkFNRVNQQUNFDQogICAgICAgIH0sDQogICAgICB9Ow0KDQogICAgICBsb2NhdGlvbi5xdWVyeSA9IHsgW0ZMQVRfVklFV106IHRydWUgfTsNCg0KICAgICAgcmV0dXJuIGxvY2F0aW9uOw0KICAgIH0sDQoNCiAgICBzaG93UHJvamVjdEFjdGlvbihldmVudCwgZ3JvdXApIHsNCiAgICAgIGNvbnN0IHByb2plY3QgPSBncm91cC5yb3dzWzBdLnByb2plY3Q7DQoNCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdChgYWN0aW9uLW1lbnUvc2hvd2AsIHsNCiAgICAgICAgcmVzb3VyY2VzOiBbcHJvamVjdF0sDQogICAgICAgIGVsZW06ICAgICAgZXZlbnQudGFyZ2V0DQogICAgICB9KTsNCiAgICB9LA0KICAgIHNob3dQcm9qZWN0QWN0aW9uQnV0dG9uKGdyb3VwKSB7DQogICAgICBjb25zdCBwcm9qZWN0ID0gZ3JvdXAucm93c1swXS5wcm9qZWN0Ow0KDQogICAgICByZXR1cm4gISFwcm9qZWN0Ow0KICAgIH0sDQogICAgcHJvamVjdExhYmVsKGdyb3VwKSB7DQogICAgICBjb25zdCByb3cgPSBncm91cC5yb3dzWzBdOw0KDQogICAgICBpZiAocm93LmlzRmFrZSkgew0KICAgICAgICByZXR1cm4gRE9NUHVyaWZ5LnNhbml0aXplKA0KICAgICAgICAgIHRoaXMudCgncmVzb3VyY2VUYWJsZS5ncm91cExhYmVsLnByb2plY3QnLCB7IG5hbWU6IHJvdy5wcm9qZWN0Py5uYW1lRGlzcGxheSB9LCB0cnVlKSwNCiAgICAgICAgICB7IEFMTE9XRURfVEFHUzogWydzcGFuJ10gfQ0KICAgICAgICApOw0KICAgICAgfQ0KDQogICAgICByZXR1cm4gcm93Lmdyb3VwQnlMYWJlbDsNCiAgICB9LA0KDQogICAgcHJvamVjdERlc2NyaXB0aW9uKGdyb3VwKSB7DQogICAgICBjb25zdCBwcm9qZWN0ID0gZ3JvdXAucm93c1swXS5wcm9qZWN0Ow0KDQogICAgICByZXR1cm4gcHJvamVjdD8uZGVzY3JpcHRpb247DQogICAgfSwNCg0KICAgIGNsZWFyU2VsZWN0aW9uKCkgew0KICAgICAgdGhpcy4kcmVmcy50YWJsZS5jbGVhclNlbGVjdGlvbigpOw0KICAgIH0sDQoNCiAgICBzb3J0R2VuZXJhdGlvbkZuKCkgew0KICAgICAgLy8gVGhlIHNvcnQgZ2VuZXJhdGlvbiBmdW5jdGlvbiBjcmVhdGVzIGEgdW5pcXVlIHZhbHVlIGFuZCBpcyB1c2VkIHRvIGNyZWF0ZSBhIGtleSBpbmNsdWRpbmcgc29ydCBkZXRhaWxzLg0KICAgICAgLy8gVGhlIHVuaXF1ZSBrZXkgZGV0ZXJtaW5lcyBpZiB0aGUgbGlzdCBpcyByZWRyYXduIG9yIGEgY2FjaGVkIHZlcnNpb24gaXMgc2hvd24uDQogICAgICAvLyBCZWNhdXNlIHdlIGVuc3VyZSB0aGUgJ25vdCBpbiBhIHByb2plY3QnIGdyb3VwIGlzIHRoZXJlIHZpYSBhIHJvdywgYW5kIHRpbWluZyBpc3N1ZXMsIHRoZSB1bnFpdWUga2V5IGRvZXNuJ3QgY2hhbmdlDQogICAgICAvLyBhZnRlciBhIG5hbWVzcGFjZSBpcyByZW1vdmVkLi4uIHNvIHRoZSBsaXN0IHdvbid0IHVwZGF0ZS4uLiBzbyB3ZSBuZWVkIHRvIGluamVjdCBhIHN0cmluZyB0byBlbnN1cmUgdGhlIGtleSBpcyBmcmVzaA0KICAgICAgY29uc3QgYmFzZSA9IGRlZmF1bHRUYWJsZVNvcnRHZW5lcmF0aW9uRm4odGhpcy5zY2hlbWEsIHRoaXMuJHN0b3JlKTsNCg0KICAgICAgcmV0dXJuIGJhc2UgKyAodGhpcy5zaG93TW9ja05vdEluUHJvamVjdEdyb3VwID8gJy1tb2NrJyA6ICcnKTsNCiAgICB9LA0KDQogIH0NCn07DQo="},{"version":3,"sources":["ExplorerProjectsNamespaces.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA","file":"ExplorerProjectsNamespaces.vue","sourceRoot":"node_modules/@rancher/shell/components","sourcesContent":["<script>\r\nimport { mapGetters } from 'vuex';\r\nimport ResourceTable, { defaultTableSortGenerationFn } from '@shell/components/ResourceTable';\r\nimport { STATE, AGE, NAME } from '@shell/config/table-headers';\r\nimport { uniq } from '@shell/utils/array';\r\nimport { MANAGEMENT, NAMESPACE, VIRTUAL_TYPES } from '@shell/config/types';\r\nimport { PROJECT_ID, FLAT_VIEW } from '@shell/config/query-params';\r\nimport { PanelLocation, ExtensionPoint } from '@shell/core/types';\r\nimport ExtensionPanel from '@shell/components/ExtensionPanel';\r\nimport Masthead from '@shell/components/ResourceList/Masthead';\r\nimport { mapPref, GROUP_RESOURCES, ALL_NAMESPACES } from '@shell/store/prefs';\r\nimport MoveModal from '@shell/components/MoveModal';\r\n\r\nimport { NAMESPACE_FILTER_ALL_ORPHANS } from '@shell/utils/namespace-filter';\r\nimport ResourceFetch from '@shell/mixins/resource-fetch';\r\nimport DOMPurify from 'dompurify';\r\n\r\nexport default {\r\n  name:       'ListProjectNamespace',\r\n  components: {\r\n    ExtensionPanel, Masthead, MoveModal, ResourceTable\r\n  },\r\n  mixins: [ResourceFetch],\r\n\r\n  props: {\r\n    createProjectLocationOverride: {\r\n      type:    Object,\r\n      default: () => null\r\n    },\r\n\r\n    createNamespaceLocationOverride: {\r\n      type:    Object,\r\n      default: () => null\r\n    }\r\n  },\r\n\r\n  async fetch() {\r\n    const inStore = this.$store.getters['currentStore'](NAMESPACE);\r\n\r\n    this.schema = this.$store.getters[`${ inStore }/schemaFor`](NAMESPACE);\r\n    this.projectSchema = this.$store.getters[`management/schemaFor`](MANAGEMENT.PROJECT);\r\n\r\n    if ( !this.schema ) {\r\n      // clusterReady:   When switching routes, it will cause clusterReady to change, causing itself to repeat rendering。\r\n      // this.$store.dispatch('loadingError', `Type ${ NAMESPACE } not found`);\r\n\r\n      return;\r\n    }\r\n\r\n    await this.$fetchType(NAMESPACE);\r\n    this.projects = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.PROJECT, opt: { force: true } });\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      loadResources:                [NAMESPACE],\r\n      loadIndeterminate:            true,\r\n      schema:                       null,\r\n      projects:                     [],\r\n      projectSchema:                null,\r\n      extensionType:                ExtensionPoint.PANEL,\r\n      extensionLocation:            PanelLocation.RESOURCE_LIST,\r\n      MANAGEMENT,\r\n      VIRTUAL_TYPES,\r\n      defaultCreateProjectLocation: {\r\n        name:   'c-cluster-product-resource-create',\r\n        params: {\r\n          product:  this.$store.getters['currentProduct'].name,\r\n          resource: MANAGEMENT.PROJECT\r\n        },\r\n      }\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters(['currentCluster', 'currentProduct']),\r\n    namespaces() {\r\n      const inStore = this.$store.getters['currentStore'](NAMESPACE);\r\n\r\n      return this.$store.getters[`${ inStore }/all`](NAMESPACE);\r\n    },\r\n    loading() {\r\n      return !this.currentCluster || this.namespaces.length ? false : this.$fetchState.pending;\r\n    },\r\n    showIncrementalLoadingIndicator() {\r\n      return this.perfConfig?.incrementalLoading?.enabled;\r\n    },\r\n    isNamespaceCreatable() {\r\n      return (this.schema?.collectionMethods || []).includes('POST');\r\n    },\r\n    headers() {\r\n      const project = {\r\n        name:  'project',\r\n        label: this.t('tableHeaders.project'),\r\n        value: 'project.nameDisplay',\r\n        sort:  ['projectNameSort', 'nameSort'],\r\n      };\r\n\r\n      return [\r\n        STATE,\r\n        NAME,\r\n        this.groupPreference === 'none' ? project : null,\r\n        AGE\r\n      ].filter((h) => h);\r\n    },\r\n    projectIdsWithNamespaces() {\r\n      const ids = this.rows\r\n        .map((row) => row.projectId)\r\n        .filter((id) => id);\r\n\r\n      return uniq(ids);\r\n    },\r\n    clusterProjects() {\r\n      const clusterId = this.currentCluster.id;\r\n\r\n      // Get the list of projects from the store so that the list\r\n      // is updated if a new project is created or removed.\r\n      const projectsInAllClusters = this.$store.getters['management/all'](MANAGEMENT.PROJECT);\r\n\r\n      if (this.currentProduct?.customNamespaceFilter && this.currentProduct?.inStore && this.$store.getters[`${ this.currentProduct.inStore }/filterProject`]) {\r\n        return this.$store.getters[`${ this.currentProduct.inStore }/filterProject`];\r\n      }\r\n\r\n      const clustersInProjects = projectsInAllClusters.filter((project) => project.spec.clusterName === clusterId);\r\n\r\n      return clustersInProjects;\r\n    },\r\n    projectsWithoutNamespaces() {\r\n      return this.activeProjects.filter((project) => {\r\n        return !this.projectIdsWithNamespaces.find((item) => project?.id?.endsWith(`/${ item }`));\r\n      });\r\n    },\r\n    // We're using this because we need to show projects as groups even if the project doesn't have any namespaces.\r\n    rowsWithFakeNamespaces() {\r\n      const fakeRows = this.projectsWithoutNamespaces.map((project) => {\r\n        return {\r\n          groupByLabel:     `${ ('resourceTable.groupLabel.notInAProject') }-${ project.id }`,\r\n          isFake:           true,\r\n          mainRowKey:       project.id,\r\n          nameDisplay:      project.spec?.displayName, // Enable filtering by the project name\r\n          project,\r\n          availableActions: []\r\n        };\r\n      });\r\n\r\n      if (this.showMockNotInProjectGroup) {\r\n        fakeRows.push( {\r\n          groupByLabel: this.t('resourceTable.groupLabel.notInAProject'), // Same as the groupByLabel for the namespace model\r\n          mainRowKey:   'fake-empty',\r\n        });\r\n      }\r\n\r\n      return [...this.rows, ...fakeRows];\r\n    },\r\n    createProjectLocation() {\r\n      return this.createProjectLocationOverride || this.defaultCreateProjectLocation;\r\n    },\r\n    groupPreference: mapPref(GROUP_RESOURCES),\r\n    activeNamespaceFilters() {\r\n      return this.$store.getters['activeNamespaceFilters'];\r\n    },\r\n    activeProjectFilters() {\r\n      const activeProjects = {};\r\n\r\n      for (const filter of this.activeNamespaceFilters) {\r\n        const [type, id] = filter.split('://', 2);\r\n\r\n        if (type === 'project') {\r\n          activeProjects[id] = true;\r\n        }\r\n      }\r\n\r\n      return activeProjects;\r\n    },\r\n    activeProjects() {\r\n      const namespaceFilters = this.$store.getters['activeNamespaceFilters'];\r\n\r\n      if (namespaceFilters.includes(NAMESPACE_FILTER_ALL_ORPHANS) && Object.keys(this.activeProjectFilters).length === 0) {\r\n        // If the user wants to only see namespaces that are not\r\n        // in a project, don't show any projects.\r\n        return [];\r\n      }\r\n\r\n      // If the user is not filtering by any projects or namespaces, return\r\n      // all projects in the cluster.\r\n      if (!this.userIsFilteringForSpecificNamespaceOrProject()) {\r\n        return this.clusterProjects;\r\n      }\r\n\r\n      // Filter out projects that are not selected in the top nav.\r\n      return this.clusterProjects.filter((projectData) => {\r\n        const projectId = projectData.id.split('/')[1];\r\n\r\n        return !!this.activeProjectFilters[projectId];\r\n      });\r\n    },\r\n    activeNamespaces() {\r\n      // Apply namespace filters from the top nav.\r\n      const activeNamespaces = this.$store.getters['namespaces']();\r\n\r\n      return this.namespaces.filter((namespaceData) => {\r\n        return !!activeNamespaces[namespaceData.metadata.name];\r\n      });\r\n    },\r\n    filteredRows() {\r\n      return this.groupPreference === 'none' ? this.rows : this.rowsWithFakeNamespaces;\r\n    },\r\n    rows() {\r\n      if (this.$store.getters['prefs/get'](ALL_NAMESPACES)) {\r\n        // If all namespaces options are turned on in the user preferences,\r\n        // return all namespaces including system namespaces and RBAC\r\n        // management namespaces.\r\n        return this.activeNamespaces;\r\n      }\r\n\r\n      return this.activeNamespaces.filter((namespace) => {\r\n        const isSettingSystemNamespace = this.$store.getters['systemNamespaces'].includes(namespace.metadata.name);\r\n        const systemNS = namespace.isSystem || namespace.isFleetManaged || isSettingSystemNamespace;\r\n\r\n        return this.currentProduct?.hideSystemResources ? !systemNS : true;\r\n      });\r\n    },\r\n\r\n    canSeeProjectlessNamespaces() {\r\n      return this.currentCluster.canUpdate;\r\n    },\r\n\r\n    showMockNotInProjectGroup() {\r\n      if (!this.canSeeProjectlessNamespaces) {\r\n        return false;\r\n      }\r\n\r\n      const someNamespacesAreNotInProject = !this.rows.some((row) => !row.project);\r\n\r\n      // Hide the \"Not in a Project\" group if the user is filtering\r\n      // for specific namespaces or projects.\r\n      const usingSpecificFilter = this.userIsFilteringForSpecificNamespaceOrProject();\r\n\r\n      return !usingSpecificFilter && someNamespacesAreNotInProject;\r\n    },\r\n\r\n    notInProjectKey() {\r\n      return this.$store.getters['i18n/t']('resourceTable.groupLabel.notInAProject');\r\n    },\r\n    showCreateNsButton() {\r\n      return this.groupPreference !== 'namespace';\r\n    }\r\n  },\r\n  methods: {\r\n    /**\r\n     * Get PSA HTML to be displayed in the tooltips\r\n     */\r\n    getPsaTooltip(row) {\r\n      const dictionary = row.psaTooltipsDescription;\r\n      const list = Object.values(dictionary)\r\n        .sort()\r\n        .map((text) => `<li>${ text }</li>`).join('');\r\n      const title = `<p>${ this.t('podSecurityAdmission.name') }: </p>`;\r\n\r\n      return `${ title }<ul class=\"psa-tooltip\">${ list }</ul>`;\r\n    },\r\n\r\n    userIsFilteringForSpecificNamespaceOrProject() {\r\n      const activeFilters = this.$store.getters['namespaceFilters'];\r\n\r\n      for (let i = 0; i < activeFilters.length; i++) {\r\n        const filter = activeFilters[i];\r\n        const filterType = filter.split('://')[0];\r\n\r\n        if (filterType === 'ns' || filterType === 'project') {\r\n          return true;\r\n        }\r\n      }\r\n\r\n      return false;\r\n    },\r\n    slotName(project) {\r\n      return `main-row:${ project.id }`;\r\n    },\r\n    createNamespaceLocation(group) {\r\n      const project = group.rows[0].project;\r\n\r\n      const location = this.createNamespaceLocationOverride ? { ...this.createNamespaceLocationOverride } : {\r\n        name:   'c-cluster-product-resource-create',\r\n        params: {\r\n          product:  this.$store.getters['currentProduct'].name,\r\n          resource: NAMESPACE\r\n        },\r\n      };\r\n\r\n      location.query = { [PROJECT_ID]: project?.metadata.name };\r\n\r\n      return location;\r\n    },\r\n\r\n    createNamespaceLocationFlatList() {\r\n      const location = this.createNamespaceLocationOverride ? { ...this.createNamespaceLocationOverride } : {\r\n        name:   'c-cluster-product-resource-create',\r\n        params: {\r\n          product:  this.$store.getters['currentProduct']?.name,\r\n          resource: NAMESPACE\r\n        },\r\n      };\r\n\r\n      location.query = { [FLAT_VIEW]: true };\r\n\r\n      return location;\r\n    },\r\n\r\n    showProjectAction(event, group) {\r\n      const project = group.rows[0].project;\r\n\r\n      this.$store.commit(`action-menu/show`, {\r\n        resources: [project],\r\n        elem:      event.target\r\n      });\r\n    },\r\n    showProjectActionButton(group) {\r\n      const project = group.rows[0].project;\r\n\r\n      return !!project;\r\n    },\r\n    projectLabel(group) {\r\n      const row = group.rows[0];\r\n\r\n      if (row.isFake) {\r\n        return DOMPurify.sanitize(\r\n          this.t('resourceTable.groupLabel.project', { name: row.project?.nameDisplay }, true),\r\n          { ALLOWED_TAGS: ['span'] }\r\n        );\r\n      }\r\n\r\n      return row.groupByLabel;\r\n    },\r\n\r\n    projectDescription(group) {\r\n      const project = group.rows[0].project;\r\n\r\n      return project?.description;\r\n    },\r\n\r\n    clearSelection() {\r\n      this.$refs.table.clearSelection();\r\n    },\r\n\r\n    sortGenerationFn() {\r\n      // The sort generation function creates a unique value and is used to create a key including sort details.\r\n      // The unique key determines if the list is redrawn or a cached version is shown.\r\n      // Because we ensure the 'not in a project' group is there via a row, and timing issues, the unqiue key doesn't change\r\n      // after a namespace is removed... so the list won't update... so we need to inject a string to ensure the key is fresh\r\n      const base = defaultTableSortGenerationFn(this.schema, this.$store);\r\n\r\n      return base + (this.showMockNotInProjectGroup ? '-mock' : '');\r\n    },\r\n\r\n  }\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div class=\"project-namespaces\">\r\n    <Masthead\r\n      :schema=\"projectSchema\"\r\n      :type-display=\"t('projectNamespaces.label')\"\r\n      :resource=\"MANAGEMENT.PROJECT\"\r\n      :favorite-resource=\"VIRTUAL_TYPES.PROJECT_NAMESPACES\"\r\n      :create-location=\"createProjectLocation\"\r\n      :create-button-label=\"t('projectNamespaces.createProject')\"\r\n      :show-incremental-loading-indicator=\"showIncrementalLoadingIndicator\"\r\n      :load-resources=\"loadResources\"\r\n      :load-indeterminate=\"loadIndeterminate\"\r\n    >\r\n      <template\r\n        v-if=\"showCreateNsButton\"\r\n        slot=\"extraActions\"\r\n      >\r\n        <n-link\r\n          :to=\"createNamespaceLocationFlatList()\"\r\n          class=\"btn role-primary mr-10\"\r\n          data-testid=\"create_project_namespaces\"\r\n        >\r\n          {{ t('projectNamespaces.createNamespace') }}\r\n        </n-link>\r\n      </template>\r\n    </Masthead>\r\n    <!-- Extensions area -->\r\n    <ExtensionPanel\r\n      :resource=\"{}\"\r\n      :type=\"extensionType\"\r\n      :location=\"extensionLocation\"\r\n    />\r\n    <ResourceTable\r\n      ref=\"table\"\r\n      class=\"table\"\r\n      v-bind=\"$attrs\"\r\n      :schema=\"schema\"\r\n      :headers=\"headers\"\r\n      :rows=\"filteredRows\"\r\n      :groupable=\"true\"\r\n      :sort-generation-fn=\"sortGenerationFn\"\r\n      :loading=\"loading\"\r\n      group-tooltip=\"resourceTable.groupBy.project\"\r\n      key-field=\"_key\"\r\n      v-on=\"$listeners\"\r\n    >\r\n      <template #group-by=\"group\">\r\n        <div\r\n          class=\"project-bar\"\r\n          :class=\"{'has-description': projectDescription(group.group)}\"\r\n        >\r\n          <div\r\n            v-trim-whitespace\r\n            class=\"group-tab\"\r\n          >\r\n            <div\r\n              v-clean-html=\"projectLabel(group.group)\"\r\n              class=\"project-name\"\r\n            />\r\n            <div\r\n              v-if=\"projectDescription(group.group)\"\r\n              class=\"description text-muted text-small\"\r\n            >\r\n              {{ projectDescription(group.group) }}\r\n            </div>\r\n          </div>\r\n          <div class=\"right\">\r\n            <n-link\r\n              v-if=\"isNamespaceCreatable && (canSeeProjectlessNamespaces || group.group.key !== notInProjectKey)\"\r\n              class=\"create-namespace btn btn-sm role-secondary mr-5\"\r\n              :to=\"createNamespaceLocation(group.group)\"\r\n            >\r\n              {{ t('projectNamespaces.createNamespace') }}\r\n            </n-link>\r\n            <button\r\n              type=\"button\"\r\n              class=\"project-action btn btn-sm role-multi-action actions mr-10\"\r\n              :class=\"{invisible: !showProjectActionButton(group.group)}\"\r\n              @click=\"showProjectAction($event, group.group)\"\r\n            >\r\n              <i class=\"icon icon-actions\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </template>\r\n      <template #cell:project=\"{row}\">\r\n        <span v-if=\"row.project\">{{ row.project.nameDisplay }}</span>\r\n        <span\r\n          v-else\r\n          class=\"text-muted\"\r\n        >&ndash;</span>\r\n      </template>\r\n      <template #cell:name=\"{row}\">\r\n        <div class=\"namespace-name\">\r\n          <n-link\r\n            v-if=\"row.detailLocation && !row.hideDetailLocation\"\r\n            :to=\"row.detailLocation\"\r\n          >\r\n            {{ row.name }}\r\n          </n-link>\r\n          <span v-else>\r\n            {{ row.name }}\r\n          </span>\r\n          <i\r\n            v-if=\"row.injectionEnabled\"\r\n            v-clean-tooltip=\"t('projectNamespaces.isIstioInjectionEnabled')\"\r\n            class=\"icon icon-istio ml-5\"\r\n          />\r\n          <i\r\n            v-if=\"row.hasSystemLabels\"\r\n            v-clean-tooltip=\"getPsaTooltip(row)\"\r\n            class=\"icon icon-lock ml-5\"\r\n          />\r\n        </div>\r\n      </template>\r\n      <template\r\n        v-for=\"project in projectsWithoutNamespaces\"\r\n        v-slot:[slotName(project)]\r\n      >\r\n        <tr\r\n          :key=\"project.id\"\r\n          class=\"main-row\"\r\n        >\r\n          <td\r\n            class=\"empty text-center\"\r\n            colspan=\"5\"\r\n          >\r\n            {{ t('projectNamespaces.noNamespaces') }}\r\n          </td>\r\n        </tr>\r\n      </template>\r\n      <template #main-row:fake-empty>\r\n        <tr class=\"main-row\">\r\n          <td\r\n            class=\"empty text-center\"\r\n            colspan=\"5\"\r\n          >\r\n            {{ t('projectNamespaces.noProjectNoNamespaces') }}\r\n          </td>\r\n        </tr>\r\n      </template>\r\n    </ResourceTable>\r\n    <MoveModal @moving=\"clearSelection\" />\r\n  </div>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\n.project-namespaces {\r\n  & ::v-deep {\r\n    .project-name {\r\n      line-height: 30px;\r\n    }\r\n\r\n    .project-bar {\r\n      display: flex;\r\n      flex-direction: row;\r\n      justify-content: space-between;\r\n\r\n      &.has-description {\r\n        .right {\r\n          margin-top: 5px;\r\n        }\r\n        .group-tab {\r\n          &, &::after {\r\n              height: 50px;\r\n          }\r\n\r\n          &::after {\r\n              right: -20px;\r\n          }\r\n\r\n          .description {\r\n              margin-top: -20px;\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    .namespace-name {\r\n      display: flex;\r\n      align-items: center;\r\n\r\n      .icon-istio {\r\n        color: var(--primary);\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n<style lang=\"scss\">\r\n  .psa-tooltip {\r\n    // These could pop up a lot as the mouse moves around, keep them as small and unintrusive as possible\r\n    // (easier to test with v-clean-tooltip=\"{ content: getPSA(row), autoHide: false, show: true }\")\r\n    margin: 3px 0;\r\n    padding: 0 8px 0 22px;\r\n  }\r\n</style>\r\n"]}]}