{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/management.cattle.io.project.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/management.cattle.io.project.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IENvbnRhaW5lclJlc291cmNlTGltaXQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQ29udGFpbmVyUmVzb3VyY2VMaW1pdCc7CmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOwppbXBvcnQgRm9ybVZhbGlkYXRpb24gZnJvbSAnQHNoZWxsL21peGlucy9mb3JtLXZhbGlkYXRpb24nOwppbXBvcnQgQ3J1UmVzb3VyY2UgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQ3J1UmVzb3VyY2UnOwppbXBvcnQgTGFiZWxzIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxzJzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IFJlc291cmNlUXVvdGEgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9SZXNvdXJjZVF1b3RhL1Byb2plY3QnOwppbXBvcnQgeyBIQVJWRVNURVJfVFlQRVMsIFJBTkNIRVJfVFlQRVMgfSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL1Jlc291cmNlUXVvdGEvc2hhcmVkJzsKaW1wb3J0IFRhYiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQvVGFiJzsKaW1wb3J0IFRhYmJlZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQnOwppbXBvcnQgTmFtZU5zRGVzY3JpcHRpb24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9OYW1lTnNEZXNjcmlwdGlvbic7CmltcG9ydCB7IE1BTkFHRU1FTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgTkFNRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvcHJvZHVjdC9leHBsb3Jlcic7CmltcG9ydCB7IFBST0pFQ1RfSUQsIF9WSUVXLCBfQ1JFQVRFLCBfRURJVCB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IFByb2plY3RNZW1iZXJzaGlwRWRpdG9yLCB7IGNhblZpZXdQcm9qZWN0TWVtYmVyc2hpcEVkaXRvciB9IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTWVtYmVycy9Qcm9qZWN0TWVtYmVyc2hpcEVkaXRvcic7CgppbXBvcnQgeyBIQVJWRVNURVJfTkFNRSBhcyBIQVJWRVNURVIgfSBmcm9tICdAc2hlbGwvY29uZmlnL2ZlYXR1cmVzJzsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDb250YWluZXJSZXNvdXJjZUxpbWl0LCBDcnVSZXNvdXJjZSwgTGFiZWxzLCBMYWJlbGVkU2VsZWN0LCBOYW1lTnNEZXNjcmlwdGlvbiwgUHJvamVjdE1lbWJlcnNoaXBFZGl0b3IsIFJlc291cmNlUXVvdGEsIFRhYmJlZCwgVGFiLCBCYW5uZXIKICB9LAoKICBtaXhpbnM6IFtDcmVhdGVFZGl0VmlldywgRm9ybVZhbGlkYXRpb25dLAogIGFzeW5jIGZldGNoKCkgewogICAgaWYgKCB0aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L2Nhbkxpc3QnXShNQU5BR0VNRU5ULlBPRF9TRUNVUklUWV9QT0xJQ1lfVEVNUExBVEUpICkgewogICAgICB0aGlzLmFsbFBTUHMgPSBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgeyB0eXBlOiBNQU5BR0VNRU5ULlBPRF9TRUNVUklUWV9QT0xJQ1lfVEVNUExBVEUgfSk7CiAgICB9CgogICAgLy8gVXNlciBjYW4gb25seSBjaGFuZ2UgdGhlIFBTUCBpZiB0aGUgdXNlciBoYXMgcGVybWlzc2lvbnMgdG8gc2VlIHRoZSBiaW5kaW5nIHNjaGVtYSBmb3IgUFNQIFRlbXBsYXRlcwogICAgY29uc3QgcHNwQmluZGluZ1NjaGVtYSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvc2NoZW1hRm9yJ10oTUFOQUdFTUVOVC5QU1BfVEVNUExBVEVfQklORElORyk7CgogICAgdGhpcy5jYW5FZGl0UFNQQmluZGluZ3MgPSAhIXBzcEJpbmRpbmdTY2hlbWE7CiAgfSwKICBkYXRhKCkgewogICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdzcGVjJywgdGhpcy52YWx1ZS5zcGVjIHx8IHt9KTsKICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLnNwZWMsICdwb2RTZWN1cml0eVBvbGljeVRlbXBsYXRlSWQnLCB0aGlzLnZhbHVlLnN0YXR1cz8ucG9kU2VjdXJpdHlQb2xpY3lUZW1wbGF0ZUlkIHx8ICcnKTsKCiAgICByZXR1cm4gewogICAgICBhbGxQU1BzOiAgICAgICAgICAgICAgICAgICAgICAgICAgW10sCiAgICAgIHByb2plY3RSb2xlVGVtcGxhdGVCaW5kaW5nU2NoZW1hOiB0aGlzLiRzdG9yZS5nZXR0ZXJzW2BtYW5hZ2VtZW50L3NjaGVtYUZvcmBdKE1BTkFHRU1FTlQuUFJPSkVDVF9ST0xFX1RFTVBMQVRFX0JJTkRJTkcpLAogICAgICBjcmVhdGVMb2NhdGlvbjogICAgICAgICAgICAgICAgICAgewogICAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlLWNyZWF0ZScsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwcm9kdWN0OiAgTkFNRSwKICAgICAgICAgIHJlc291cmNlOiBNQU5BR0VNRU5ULlBST0pFQ1RfUk9MRV9URU1QTEFURV9CSU5ESU5HLAogICAgICAgIH0sCiAgICAgICAgcXVlcnk6IHsgW1BST0pFQ1RfSURdOiB0aGlzLnByb2plY3Q/LmlkPy5yZXBsYWNlKCcvJywgJzonKSB9CiAgICAgIH0sCiAgICAgIHJlc291cmNlOiAgICAgICAgICAgTUFOQUdFTUVOVC5QUk9KRUNUX1JPTEVfVEVNUExBVEVfQklORElORywKICAgICAgc2F2ZUJpbmRpbmdzOiAgICAgICBudWxsLAogICAgICBtZW1iZXJzaGlwSGFzT3duZXI6IGZhbHNlLAogICAgICBtZW1iZXJzaGlwVXBkYXRlOiAgIHt9LAogICAgICBIQVJWRVNURVJfVFlQRVMsCiAgICAgIFJBTkNIRVJfVFlQRVMsCiAgICAgIGZ2Rm9ybVJ1bGVTZXRzOiAgICAgW3sgcGF0aDogJ3NwZWMuZGlzcGxheU5hbWUnLCBydWxlczogWydyZXF1aXJlZCddIH1dLAogICAgICBjYW5FZGl0UFNQQmluZGluZ3M6IHRydWUsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydjdXJyZW50Q2x1c3RlciddKSwKCiAgICBjYW5WaWV3TWVtYmVycygpIHsKICAgICAgcmV0dXJuIGNhblZpZXdQcm9qZWN0TWVtYmVyc2hpcEVkaXRvcih0aGlzLiRzdG9yZSk7CiAgICB9LAoKICAgIGNhbkVkaXRQcm9qZWN0KCkgewogICAgICByZXR1cm4gdGhpcy52YWx1ZT8ubGlua3M/LnVwZGF0ZTsKICAgIH0sCgogICAgaXNEZXNjcmlwdGlvbkRpc2FibGVkKCkgewogICAgICByZXR1cm4gKHRoaXMubW9kZSA9PT0gX0VESVQgJiYgIXRoaXMuY2FuRWRpdFByb2plY3QpIHx8IGZhbHNlOwogICAgfSwKCiAgICBjYW5FZGl0VGFiRWxlbWVudHMoKSB7CiAgICAgIGlmICh0aGlzLm1vZGUgPT09IF9FRElUICYmICF0aGlzLmNhbkVkaXRQcm9qZWN0KSB7CiAgICAgICAgcmV0dXJuIF9WSUVXOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy5tb2RlOwogICAgfSwKCiAgICBzaG93QmFubmVyRm9yT25seU1hbmFnaW5nTWVtYmVycygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX0VESVQgJiYgIXRoaXMuY2FuRWRpdFByb2plY3Q7CiAgICB9LAoKICAgIGlzSzNzKCkgewogICAgICByZXR1cm4gKHRoaXMuY3VycmVudENsdXN0ZXI/LnNwZWM/Lmt1YmVybmV0ZXNWZXJzaW9uIHx8ICcnKS5pbmNsdWRlcygnazNzJyk7CiAgICB9LAoKICAgIHBzcE9wdGlvbnMoKSB7CiAgICAgIGlmICggdGhpcy5pc0szcyB8fCAhdGhpcy5jdXJyZW50Q2x1c3Rlci5zcGVjLmRlZmF1bHRQb2RTZWN1cml0eVBvbGljeVRlbXBsYXRlTmFtZSApIHsKICAgICAgICByZXR1cm4gbnVsbDsKICAgICAgfQoKICAgICAgY29uc3Qgb3V0ID0gW3sgbGFiZWw6IHRoaXMudCgncHJvamVjdC5wc3AuZGVmYXVsdCcpLCB2YWx1ZTogJycgfV07CgogICAgICBpZiAoIHRoaXMuYWxsUFNQcyApIHsKICAgICAgICBmb3IgKCBjb25zdCBwc3B0IG9mIHRoaXMuYWxsUFNQcyApIHsKICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgbGFiZWw6IHBzcHQubmFtZURpc3BsYXksCiAgICAgICAgICAgIHZhbHVlOiBwc3B0LmlkLAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9CgogICAgICBjb25zdCBjdXIgPSB0aGlzLnZhbHVlLnN0YXR1cz8ucG9kU2VjdXJpdHlQb2xpY3lUZW1wbGF0ZUlkOwoKICAgICAgaWYgKCBjdXIgJiYgIW91dC5maW5kKCh4KSA9PiB4LnZhbHVlID09PSBjdXIpICkgewogICAgICAgIG91dC51bnNoaWZ0KHsgbGFiZWw6IHRoaXMudCgncHJvamVjdC5wc3AuY3VycmVudCcsIHsgdmFsdWU6IGN1ciB9KSwgdmFsdWU6IGN1ciB9KTsKICAgICAgfQoKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCgogICAgaXNIYXJ2ZXN0ZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddLmluU3RvcmUgPT09IEhBUlZFU1RFUjsKICAgIH0sCgogICAgcmVzb3VyY2VRdW90YUxhYmVsKCkgewogICAgICBpZiAodGhpcy5pc0hhcnZlc3RlcikgewogICAgICAgIHJldHVybiB0aGlzLnQoJ3Byb2plY3Qudm1EZWZhdWx0UmVzb3VyY2VMaW1pdCcpOwogICAgICB9CgogICAgICByZXR1cm4gdGhpcy50KCdwcm9qZWN0LmNvbnRhaW5lckRlZmF1bHRSZXNvdXJjZUxpbWl0Jyk7CiAgICB9LAogIH0sCiAgd2F0Y2g6IHsKICAgIGhhc093bmVyKCkgewogICAgICB0aGlzLmVycm9ycyA9IHRoaXMuaGFzT3duZXIgPyBbXSA6IFt0aGlzLnQoJ3Byb2plY3QuaGF2ZU9uZU93bmVyJyldOwogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLm1ldGFkYXRhLCAnbmFtZXNwYWNlJywgdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudENsdXN0ZXInXS5pZCk7CiAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ3NwZWMnLCB0aGlzLnZhbHVlLnNwZWMgfHwge30pOwogICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuc3BlYywgJ2NvbnRhaW5lckRlZmF1bHRSZXNvdXJjZUxpbWl0JywgdGhpcy52YWx1ZS5zcGVjLmNvbnRhaW5lckRlZmF1bHRSZXNvdXJjZUxpbWl0IHx8IHt9KTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFzeW5jIHNhdmUoc2F2ZUNiKSB7CiAgICAgIHRyeSB7CiAgICAgICAgLy8gY2xlYXIgdXAgb2YgdGhlIHVudXNlZCByZXNvdXJjZVF1b3RhcyB3aWxsIG5vdyBiZSBkb25lIG9uIHRoZSBtb2RlbCBzaWRlCgogICAgICAgIGlmICh0aGlzLm1vZGUgPT09IF9DUkVBVEUpIHsKICAgICAgICAgIGNvbnN0IHNhdmVkUHJvamVjdCA9IGF3YWl0IHRoaXMudmFsdWUuc2F2ZSgpOwoKICAgICAgICAgIGlmICh0aGlzLm1lbWJlcnNoaXBVcGRhdGUuc2F2ZSkgewogICAgICAgICAgICBhd2FpdCB0aGlzLm1lbWJlcnNoaXBVcGRhdGUuc2F2ZShzYXZlZFByb2plY3QuaWQpOwogICAgICAgICAgfQogICAgICAgIH0gZWxzZSBpZiAodGhpcy5tb2RlID09PSBfRURJVCkgewogICAgICAgICAgaWYgKHRoaXMuY2FuRWRpdFByb2plY3QpIHsKICAgICAgICAgICAgYXdhaXQgdGhpcy52YWx1ZS5zYXZlKHRydWUpOwoKICAgICAgICAgICAgLy8gV2UgdXBkYXRlZCB0aGUgTm9ybWFuIHJlc291cmNlIC0gcmUtZmV0Y2ggdGhlIFN0ZXZlIHJlc291cmNlIHNvIHdlIGtub3cgaXQgaXMgZGVmaW5pdGVseSB1cGRhdGVkIGluIHRoZSBzdG9yZQogICAgICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kJywgewogICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuUFJPSkVDVCwKICAgICAgICAgICAgICBpZDogICB0aGlzLnZhbHVlLmlkLAogICAgICAgICAgICAgIG9wdDogIHsgZm9yY2U6IHRydWUgfQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KCiAgICAgICAgICAvLyAvLyB3ZSBhbGxvdyB1c2VycyB3aXRoIHBlcm1pc3Npb25zIGZvciBwcm9qZWN0cm9sZXRlbXBsYXRlYmluZGluZ3MgdG8gYmUgYWJsZSB0byBtYW5hZ2UgbWVtYmVycyBvbiBwcm9qZWN0cwogICAgICAgICAgaWYgKHRoaXMubWVtYmVyc2hpcFVwZGF0ZS5zYXZlKSB7CiAgICAgICAgICAgIGNvbnN0IG5vcm1hbiA9IGF3YWl0IHRoaXMudmFsdWUubm9ybWFuOwoKICAgICAgICAgICAgYXdhaXQgdGhpcy5tZW1iZXJzaGlwVXBkYXRlLnNhdmUobm9ybWFuLmlkKTsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIHNhdmVDYih0cnVlKTsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh0aGlzLnZhbHVlLmxpc3RMb2NhdGlvbik7CiAgICAgIH0gY2F0Y2ggKGV4KSB7CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaChleCk7CiAgICAgICAgc2F2ZUNiKGZhbHNlKTsKICAgICAgfQogICAgfSwKCiAgICBvbkhhc093bmVyQ2hhbmdlZChoYXNPd25lcikgewogICAgICB0aGlzLiRzZXQodGhpcywgJ21lbWJlcnNoaXBIYXNPd25lcicsIGhhc093bmVyKTsKICAgIH0sCgogICAgb25NZW1iZXJzaGlwVXBkYXRlKHVwZGF0ZSkgewogICAgICB0aGlzLiRzZXQodGhpcywgJ21lbWJlcnNoaXBVcGRhdGUnLCB1cGRhdGUpOwogICAgfSwKCiAgICByZW1vdmVRdW90YShrZXkpIHsKICAgICAgWydyZXNvdXJjZVF1b3RhJywgJ25hbWVzcGFjZURlZmF1bHRSZXNvdXJjZVF1b3RhJ10uZm9yRWFjaCgoc3BlY1Byb3ApID0+IHsKICAgICAgICBpZiAodGhpcy52YWx1ZT8uc3BlY1tzcGVjUHJvcF0/LmxpbWl0ICYmIHRoaXMudmFsdWU/LnNwZWNbc3BlY1Byb3BdPy5saW1pdFtrZXldKSB7CiAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZT8uc3BlY1tzcGVjUHJvcF0/LmxpbWl0W2tleV07CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLnZhbHVlPy5zcGVjW3NwZWNQcm9wXT8udXNlZExpbWl0ICYmIHRoaXMudmFsdWU/LnNwZWNbc3BlY1Byb3BdPy51c2VkTGltaXRba2V5XSkgewogICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWU/LnNwZWNbc3BlY1Byb3BdPy51c2VkTGltaXRba2V5XTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["management.cattle.io.project.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"management.cattle.io.project.vue","sourceRoot":"node_modules/@rancher/shell/edit","sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport ContainerResourceLimit from '@shell/components/ContainerResourceLimit';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport FormValidation from '@shell/mixins/form-validation';\nimport CruResource from '@shell/components/CruResource';\nimport Labels from '@shell/components/form/Labels';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport ResourceQuota from '@shell/components/form/ResourceQuota/Project';\nimport { HARVESTER_TYPES, RANCHER_TYPES } from '@shell/components/form/ResourceQuota/shared';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport Tabbed from '@shell/components/Tabbed';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { NAME } from '@shell/config/product/explorer';\nimport { PROJECT_ID, _VIEW, _CREATE, _EDIT } from '@shell/config/query-params';\nimport ProjectMembershipEditor, { canViewProjectMembershipEditor } from '@shell/components/form/Members/ProjectMembershipEditor';\n\nimport { HARVESTER_NAME as HARVESTER } from '@shell/config/features';\nimport { Banner } from '@components/Banner';\n\nexport default {\n  components: {\n    ContainerResourceLimit, CruResource, Labels, LabeledSelect, NameNsDescription, ProjectMembershipEditor, ResourceQuota, Tabbed, Tab, Banner\n  },\n\n  mixins: [CreateEditView, FormValidation],\n  async fetch() {\n    if ( this.$store.getters['management/canList'](MANAGEMENT.POD_SECURITY_POLICY_TEMPLATE) ) {\n      this.allPSPs = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.POD_SECURITY_POLICY_TEMPLATE });\n    }\n\n    // User can only change the PSP if the user has permissions to see the binding schema for PSP Templates\n    const pspBindingSchema = this.$store.getters['management/schemaFor'](MANAGEMENT.PSP_TEMPLATE_BINDING);\n\n    this.canEditPSPBindings = !!pspBindingSchema;\n  },\n  data() {\n    this.$set(this.value, 'spec', this.value.spec || {});\n    this.$set(this.value.spec, 'podSecurityPolicyTemplateId', this.value.status?.podSecurityPolicyTemplateId || '');\n\n    return {\n      allPSPs:                          [],\n      projectRoleTemplateBindingSchema: this.$store.getters[`management/schemaFor`](MANAGEMENT.PROJECT_ROLE_TEMPLATE_BINDING),\n      createLocation:                   {\n        name:   'c-cluster-product-resource-create',\n        params: {\n          product:  NAME,\n          resource: MANAGEMENT.PROJECT_ROLE_TEMPLATE_BINDING,\n        },\n        query: { [PROJECT_ID]: this.project?.id?.replace('/', ':') }\n      },\n      resource:           MANAGEMENT.PROJECT_ROLE_TEMPLATE_BINDING,\n      saveBindings:       null,\n      membershipHasOwner: false,\n      membershipUpdate:   {},\n      HARVESTER_TYPES,\n      RANCHER_TYPES,\n      fvFormRuleSets:     [{ path: 'spec.displayName', rules: ['required'] }],\n      canEditPSPBindings: true,\n    };\n  },\n  computed: {\n    ...mapGetters(['currentCluster']),\n\n    canViewMembers() {\n      return canViewProjectMembershipEditor(this.$store);\n    },\n\n    canEditProject() {\n      return this.value?.links?.update;\n    },\n\n    isDescriptionDisabled() {\n      return (this.mode === _EDIT && !this.canEditProject) || false;\n    },\n\n    canEditTabElements() {\n      if (this.mode === _EDIT && !this.canEditProject) {\n        return _VIEW;\n      }\n\n      return this.mode;\n    },\n\n    showBannerForOnlyManagingMembers() {\n      return this.mode === _EDIT && !this.canEditProject;\n    },\n\n    isK3s() {\n      return (this.currentCluster?.spec?.kubernetesVersion || '').includes('k3s');\n    },\n\n    pspOptions() {\n      if ( this.isK3s || !this.currentCluster.spec.defaultPodSecurityPolicyTemplateName ) {\n        return null;\n      }\n\n      const out = [{ label: this.t('project.psp.default'), value: '' }];\n\n      if ( this.allPSPs ) {\n        for ( const pspt of this.allPSPs ) {\n          out.push({\n            label: pspt.nameDisplay,\n            value: pspt.id,\n          });\n        }\n      }\n\n      const cur = this.value.status?.podSecurityPolicyTemplateId;\n\n      if ( cur && !out.find((x) => x.value === cur) ) {\n        out.unshift({ label: this.t('project.psp.current', { value: cur }), value: cur });\n      }\n\n      return out;\n    },\n\n    isHarvester() {\n      return this.$store.getters['currentProduct'].inStore === HARVESTER;\n    },\n\n    resourceQuotaLabel() {\n      if (this.isHarvester) {\n        return this.t('project.vmDefaultResourceLimit');\n      }\n\n      return this.t('project.containerDefaultResourceLimit');\n    },\n  },\n  watch: {\n    hasOwner() {\n      this.errors = this.hasOwner ? [] : [this.t('project.haveOneOwner')];\n    }\n  },\n  created() {\n    this.$set(this.value.metadata, 'namespace', this.$store.getters['currentCluster'].id);\n    this.$set(this.value, 'spec', this.value.spec || {});\n    this.$set(this.value.spec, 'containerDefaultResourceLimit', this.value.spec.containerDefaultResourceLimit || {});\n  },\n  methods: {\n    async save(saveCb) {\n      try {\n        // clear up of the unused resourceQuotas will now be done on the model side\n\n        if (this.mode === _CREATE) {\n          const savedProject = await this.value.save();\n\n          if (this.membershipUpdate.save) {\n            await this.membershipUpdate.save(savedProject.id);\n          }\n        } else if (this.mode === _EDIT) {\n          if (this.canEditProject) {\n            await this.value.save(true);\n\n            // We updated the Norman resource - re-fetch the Steve resource so we know it is definitely updated in the store\n            await this.$store.dispatch('management/find', {\n              type: MANAGEMENT.PROJECT,\n              id:   this.value.id,\n              opt:  { force: true }\n            });\n          }\n\n          // // we allow users with permissions for projectroletemplatebindings to be able to manage members on projects\n          if (this.membershipUpdate.save) {\n            const norman = await this.value.norman;\n\n            await this.membershipUpdate.save(norman.id);\n          }\n        }\n\n        saveCb(true);\n        this.$router.replace(this.value.listLocation);\n      } catch (ex) {\n        this.errors.push(ex);\n        saveCb(false);\n      }\n    },\n\n    onHasOwnerChanged(hasOwner) {\n      this.$set(this, 'membershipHasOwner', hasOwner);\n    },\n\n    onMembershipUpdate(update) {\n      this.$set(this, 'membershipUpdate', update);\n    },\n\n    removeQuota(key) {\n      ['resourceQuota', 'namespaceDefaultResourceQuota'].forEach((specProp) => {\n        if (this.value?.spec[specProp]?.limit && this.value?.spec[specProp]?.limit[key]) {\n          delete this.value?.spec[specProp]?.limit[key];\n        }\n        if (this.value?.spec[specProp]?.usedLimit && this.value?.spec[specProp]?.usedLimit[key]) {\n          delete this.value?.spec[specProp]?.usedLimit[key];\n        }\n      });\n    }\n  },\n};\n</script>\n<template>\n  <CruResource\n    class=\"project\"\n    :done-route=\"value.listLocation\"\n    :errors=\"fvUnreportedValidationErrors\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :subtypes=\"[]\"\n    :can-yaml=\"false\"\n    :validation-passed=\"fvFormIsValid\"\n    @error=\"e=>errors = e\"\n    @finish=\"save\"\n    @cancel=\"done\"\n  >\n    <NameNsDescription\n      v-model=\"value\"\n      :name-editable=\"true\"\n      :mode=\"mode\"\n      :namespaced=\"false\"\n      description-key=\"spec.description\"\n      :description-disabled=\"isDescriptionDisabled\"\n      name-key=\"spec.displayName\"\n      :normalize-name=\"false\"\n      :rules=\"{ name: fvGetAndReportPathRules('spec.displayName'), namespace: [], description: [] }\"\n    />\n    <div class=\"row mb-20\">\n      <div class=\"col span-3\">\n        <LabeledSelect\n          v-if=\"pspOptions\"\n          v-model=\"value.spec.podSecurityPolicyTemplateId\"\n          class=\"psp\"\n          :mode=\"mode\"\n          :options=\"pspOptions\"\n          :disabled=\"!canEditPSPBindings\"\n          :label=\"t('project.psp.label')\"\n        />\n      </div>\n    </div>\n    <Tabbed :side-tabs=\"true\">\n      <Tab\n        v-if=\"canViewMembers\"\n        name=\"members\"\n        :label=\"t('project.members.label')\"\n        :weight=\"10\"\n      >\n        <Banner\n          v-if=\"showBannerForOnlyManagingMembers\"\n          color=\"info\"\n          :label=\"t('project.membersEditOnly')\"\n        />\n        <ProjectMembershipEditor\n          :mode=\"mode\"\n          :parent-id=\"value.id\"\n          @has-owner-changed=\"onHasOwnerChanged\"\n          @membership-update=\"onMembershipUpdate\"\n        />\n      </Tab>\n      <Tab\n        name=\"resource-quotas\"\n        :label=\"t('project.resourceQuotas')\"\n        :weight=\"9\"\n      >\n        <ResourceQuota\n          v-model=\"value\"\n          :mode=\"canEditTabElements\"\n          :types=\"isHarvester ? HARVESTER_TYPES : RANCHER_TYPES\"\n          @remove=\"removeQuota\"\n        />\n      </Tab>\n      <Tab\n        name=\"container-default-resource-limit\"\n        :label=\"resourceQuotaLabel\"\n        :weight=\"8\"\n      >\n        <ContainerResourceLimit\n          v-model=\"value.spec.containerDefaultResourceLimit\"\n          :mode=\"canEditTabElements\"\n          :show-tip=\"false\"\n          :register-before-hook=\"registerBeforeHook\"\n        />\n      </Tab>\n      <Tab\n        name=\"labels-and-annotations\"\n        label-key=\"generic.labelsAndAnnotations\"\n        :weight=\"7\"\n      >\n        <Labels\n          default-container-class=\"labels-and-annotations-container\"\n          :value=\"value\"\n          :mode=\"canEditTabElements\"\n          :display-side-by-side=\"false\"\n        />\n      </Tab>\n    </Tabbed>\n  </CruResource>\n</template>\n"]}]}