{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBCdXR0b25Ecm9wZG93biBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9CdXR0b25Ecm9wZG93bic7CmltcG9ydCBNb3VudCBmcm9tICdAc2hlbGwvZWRpdC93b3JrbG9hZC9zdG9yYWdlL01vdW50JzsKaW1wb3J0IHsgX1ZJRVcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCBDb2RlTWlycm9yIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NvZGVNaXJyb3InOwppbXBvcnQganN5YW1sIGZyb20gJ2pzLXlhbWwnOwppbXBvcnQgQXJyYXlMaXN0R3JvdXBlZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0FycmF5TGlzdEdyb3VwZWQnOwppbXBvcnQgeyByYW5kb21TdHIgfSBmcm9tICdAc2hlbGwvdXRpbHMvc3RyaW5nJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU3RvcmFnZScsCgogIGNvbXBvbmVudHM6IHsKICAgIEFycmF5TGlzdEdyb3VwZWQsIEJ1dHRvbkRyb3Bkb3duLCBNb3VudCwgQ29kZU1pcnJvcgogIH0sCgogIHByb3BzOiB7CiAgICBtb2RlOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NyZWF0ZScsCiAgICB9LAoKICAgIC8vIHBvZCBzcGVjCiAgICB2YWx1ZTogewogICAgICB0eXBlOiAgICBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0sCiAgICB9LAoKICAgIG5hbWVzcGFjZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAoKICAgIHNhdmVQdmNIb29rTmFtZTogewogICAgICB0eXBlOiAgICAgU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZSwKICAgIH0sCgogICAgLy8gbmFtZXNwYWNlZCBjb25maWdtYXBzIGFuZCBzZWNyZXRzCiAgICBjb25maWdNYXBzOiB7CiAgICAgIHR5cGU6ICAgIEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXSwKICAgIH0sCgogICAgc2VjcmV0czogewogICAgICB0eXBlOiAgICBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10sCiAgICB9LAogICAgbmFtZXNwYWNlZFB2Y3M6IHsKICAgICAgdHlwZTogICAgQXJyYXksCiAgICAgIGRlZmF1bHQ6ICgpID0+IFtdLAogICAgfSwKCiAgICByZWdpc3RlckJlZm9yZUhvb2s6IHsKICAgICAgdHlwZTogICAgRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgbG9hZGluZzogewogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgdHlwZTogICAgQm9vbGVhbgogICAgfSwKICB9LAoKICBkYXRhKCkgewogICAgdGhpcy5pbml0aWFsaXplU3RvcmFnZSgpOwoKICAgIHJldHVybiB7fTsKICB9LAoKICBjb21wdXRlZDogewogICAgaXNWaWV3KCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfVklFVzsKICAgIH0sCgogICAgLyoqCiAgICAgKiBHZW5lcmF0ZWQgbGlzdCBvZiB2b2x1bWVzCiAgICAgKi8KICAgIHZvbHVtZVR5cGVPcHRpb25zKCkgewogICAgICBjb25zdCBleGNsdWRlZEZpbGVzID0gWydpbmRleCcsICdNb3VudCcsICdQVkMnLCAnQ29udGFpbmVyTW91bnRQYXRocyddOwogICAgICBjb25zdCBkZWZhdWx0Vm9sdW1lVHlwZXMgPSBbCiAgICAgICAgJ2NzaScsCiAgICAgICAgJ2NvbmZpZ01hcCcsCiAgICAgICAgJ2NyZWF0ZVBWQycsCiAgICAgICAgJ3BlcnNpc3RlbnRWb2x1bWVDbGFpbScKICAgICAgXTsKICAgICAgLy8gR2V0IGFsbCB0aGUgY3VzdG9tIHZvbHVtZSB0eXBlcyBmcm9tIHRoZSBmaWxlIG5hbWVzIG9mIHRoaXMgZm9sZGVyCiAgICAgIGNvbnN0IGN1c3RvbVZvbHVtZVR5cGVzID0gcmVxdWlyZQogICAgICAgIC5jb250ZXh0KCdAc2hlbGwvZWRpdC93b3JrbG9hZC9zdG9yYWdlJywgZmFsc2UsIC9eLipcLnZ1ZSQvKQogICAgICAgIC5rZXlzKCkKICAgICAgICAubWFwKChwYXRoKSA9PiBwYXRoLnJlcGxhY2UoLyhcLlwvKXwoLnZ1ZSkvZywgJycpKQogICAgICAgIC5maWx0ZXIoKGZpbGUpID0+ICFleGNsdWRlZEZpbGVzLmluY2x1ZGVzKGZpbGUpKTsKCiAgICAgIHJldHVybiBbCiAgICAgICAgLi4uY3VzdG9tVm9sdW1lVHlwZXMsCiAgICAgICAgLi4uZGVmYXVsdFZvbHVtZVR5cGVzCiAgICAgIF0KICAgICAgICAuc29ydCgpCiAgICAgICAgLm1hcCgodm9sdW1lVHlwZSkgPT4gKHsKICAgICAgICAgIGxhYmVsOiAgdGhpcy50KGB3b3JrbG9hZC5zdG9yYWdlLnN1YnR5cGVzLiR7IHZvbHVtZVR5cGUgfWApLAogICAgICAgICAgYWN0aW9uOiB0aGlzLmFkZFZvbHVtZSwKICAgICAgICAgIHZhbHVlOiAgdm9sdW1lVHlwZSwKICAgICAgICB9KSk7CiAgICB9LAoKICAgIHB2Y05hbWVzKCkgewogICAgICByZXR1cm4gdGhpcy5uYW1lc3BhY2VkUHZjcy5tYXAoKHB2YykgPT4gcHZjLm1ldGFkYXRhLm5hbWUpOwogICAgfSwKICB9LAoKICAvLyB3YXRjaDogewogIC8vICAgc3RvcmFnZVZvbHVtZXMobmV1LCBvbGQpIHsKICAvLyAgICAgcmVtb3ZlT2JqZWN0cyh0aGlzLnZhbHVlLnZvbHVtZXMsIG9sZCk7CiAgLy8gICAgIGFkZE9iamVjdHModGhpcy52YWx1ZS52b2x1bWVzLCBuZXUpOwogIC8vICAgICBjb25zdCBuYW1lcyA9IG5ldS5yZWR1Y2UoKGFsbCwgZWFjaCkgPT4gewogIC8vICAgICAgIGFsbC5wdXNoKGVhY2gubmFtZSk7CgogIC8vICAgICAgIHJldHVybiBhbGw7CiAgLy8gICAgIH0sIFtdKTsKCiAgLy8gICAgIHRoaXMuY29udGFpbmVyLnZvbHVtZU1vdW50cyA9IHRoaXMuY29udGFpbmVyLnZvbHVtZU1vdW50cy5maWx0ZXIobW91bnQgPT4gbmFtZXMuaW5jbHVkZXMobW91bnQubmFtZSkpOwogIC8vICAgfQogIC8vIH0sCgogIG1ldGhvZHM6IHsKICAgIC8qKgogICAgICogSW5pdGlhbGl6ZSBtaXNzaW5nIHZhbHVlcyBmb3IgdGhlIGNvbnRhaW5lcgogICAgICovCiAgICBpbml0aWFsaXplU3RvcmFnZSgpIHsKICAgICAgaWYgKCF0aGlzLnZhbHVlLnZvbHVtZXMpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ3ZvbHVtZXMnLCBbXSk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBSZW1vdmUgYWxsIG1vdW50cyBmb3IgZ2l2ZW4gc3RvcmFnZSB2b2x1bWUKICAgICAqLwogICAgcmVtb3ZlVm9sdW1lKHZvbHVtZSkgewogICAgICBjb25zdCByZW1vdmVOYW1lID0gdm9sdW1lLnJvdy52YWx1ZS5uYW1lOwoKICAgICAgdGhpcy52YWx1ZS52b2x1bWVzID0gdGhpcy52YWx1ZS52b2x1bWVzLmZpbHRlcigoeyBuYW1lIH0pID0+IG5hbWUgIT09IHJlbW92ZU5hbWUpOwogICAgfSwKCiAgICBhZGRWb2x1bWUodHlwZSkgewogICAgICBjb25zdCBuYW1lID0gYHZvbC0keyByYW5kb21TdHIoNSkudG9Mb3dlckNhc2UoKSB9YDsKCiAgICAgIGlmICh0eXBlID09PSAnY3JlYXRlUFZDJykgewogICAgICAgIHRoaXMudmFsdWUudm9sdW1lcy5wdXNoKHsKICAgICAgICAgIF90eXBlOiAgICAgICAgICAgICAgICAgJ2NyZWF0ZVBWQycsCiAgICAgICAgICBwZXJzaXN0ZW50Vm9sdW1lQ2xhaW06IHt9LAogICAgICAgICAgbmFtZSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnY3NpJykgewogICAgICAgIHRoaXMudmFsdWUudm9sdW1lcy5wdXNoKHsKICAgICAgICAgIF90eXBlOiB0eXBlLAogICAgICAgICAgY3NpOiAgIHsgdm9sdW1lQXR0cmlidXRlczoge30gfSwKICAgICAgICAgIG5hbWUsCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2VtcHR5RGlyJykgewogICAgICAgIHRoaXMudmFsdWUudm9sdW1lcy5wdXNoKHsKICAgICAgICAgIF90eXBlOiAgICB0eXBlLAogICAgICAgICAgZW1wdHlEaXI6IHsgbWVkaXVtOiAnJyB9LAogICAgICAgICAgbmFtZSwKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnZhbHVlLnZvbHVtZXMucHVzaCh7CiAgICAgICAgICBfdHlwZTogIHR5cGUsCiAgICAgICAgICBbdHlwZV06IHt9LAogICAgICAgICAgbmFtZSwKICAgICAgICB9KTsKICAgICAgfQoKICAgICAgLy8gdGhpcy5jb250YWluZXIudm9sdW1lTW91bnRzLnB1c2goeyBuYW1lIH0pOwogICAgfSwKCiAgICB2b2x1bWVUeXBlKHZvbCkgewogICAgICBjb25zdCB0eXBlID0gT2JqZWN0LmtleXModm9sKS5maWx0ZXIoCiAgICAgICAgKGtleSkgPT4gdHlwZW9mIHZvbFtrZXldID09PSAnb2JqZWN0JwogICAgICApWzBdOwoKICAgICAgcmV0dXJuIHR5cGU7CiAgICB9LAoKICAgIC8vIGltcG9ydCBjb21wb25lbnQgZm9yIHZvbHVtZSB0eXBlCiAgICBnZXRDb21wb25lbnQodHlwZSkgewogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnY29uZmlnTWFwJzoKICAgICAgICByZXR1cm4gcmVxdWlyZShgQHNoZWxsL2VkaXQvd29ya2xvYWQvc3RvcmFnZS9zZWNyZXQudnVlYCkuZGVmYXVsdDsKICAgICAgY2FzZSAnY3JlYXRlUFZDJzoKICAgICAgY2FzZSAncGVyc2lzdGVudFZvbHVtZUNsYWltJzoKICAgICAgICByZXR1cm4gcmVxdWlyZShgQHNoZWxsL2VkaXQvd29ya2xvYWQvc3RvcmFnZS9wZXJzaXN0ZW50Vm9sdW1lQ2xhaW0vaW5kZXgudnVlYCkKICAgICAgICAgIC5kZWZhdWx0OwogICAgICBjYXNlICdjc2knOgogICAgICAgIHJldHVybiByZXF1aXJlKGBAc2hlbGwvZWRpdC93b3JrbG9hZC9zdG9yYWdlL2NzaS9pbmRleC52dWVgKS5kZWZhdWx0OwoKICAgICAgZGVmYXVsdDogewogICAgICAgIGxldCBjb21wb25lbnQ7CgogICAgICAgIHRyeSB7CiAgICAgICAgICBjb21wb25lbnQgPSByZXF1aXJlKGBAc2hlbGwvZWRpdC93b3JrbG9hZC9zdG9yYWdlLyR7IHR5cGUgfS52dWVgKS5kZWZhdWx0OwogICAgICAgIH0gY2F0Y2gge30KCiAgICAgICAgcmV0dXJuIGNvbXBvbmVudDsKICAgICAgfQogICAgICB9CiAgICB9LAoKICAgIGhlYWRlckZvcih0eXBlKSB7CiAgICAgIGlmICgKICAgICAgICB0aGlzLiRzdG9yZS5nZXR0ZXJzWydpMThuL2V4aXN0cyddKGB3b3JrbG9hZC5zdG9yYWdlLnN1YnR5cGVzLiR7IHR5cGUgfWApCiAgICAgICkgewogICAgICAgIHJldHVybiB0aGlzLnQoYHdvcmtsb2FkLnN0b3JhZ2Uuc3VidHlwZXMuJHsgdHlwZSB9YCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHR5cGU7CiAgICAgIH0KICAgIH0sCgogICAgeWFtbERpc3BsYXkodm9sdW1lKSB7CiAgICAgIHRyeSB7CiAgICAgICAgcmV0dXJuIGpzeWFtbC5kdW1wKHZvbHVtZSk7CiAgICAgIH0gY2F0Y2ggewogICAgICAgIHJldHVybiB2b2x1bWU7CiAgICAgIH0KICAgIH0sCgogICAgb3BlblBvcG92ZXIoKSB7CiAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuJHJlZnMuYnV0dG9uRHJvcGRvd247CgogICAgICB0cnkgewogICAgICAgIGJ1dHRvbi50b2dnbGVQb3BvdmVyKCk7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICB9LAoKICAgIC8vIGNvZGVtaXJyb3IgbmVlZHMgdG8gcmVmcmVzaCBpZiBpdCBpcyBpbiBhIHRhYiB0aGF0IHdhc24ndCB2aXNpYmxlIG9uIHBhZ2UgbG9hZAogICAgcmVmcmVzaCgpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMuY20pIHsKICAgICAgICB0aGlzLiRyZWZzLmNtLmZvckVhY2goKGNvbXBvbmVudCkgPT4gY29tcG9uZW50LnJlZnJlc2goKSk7CiAgICAgIH0KICAgIH0sCgogICAgcmVtb3ZlUHZjRm9ybShob29rTmFtZSkgewogICAgICB0aGlzLiRlbWl0KCdyZW1vdmVQdmNGb3JtJywgaG9va05hbWUpOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/edit/workload/storage","sourcesContent":["<script>\nimport ButtonDropdown from '@shell/components/ButtonDropdown';\nimport Mount from '@shell/edit/workload/storage/Mount';\nimport { _VIEW } from '@shell/config/query-params';\nimport CodeMirror from '@shell/components/CodeMirror';\nimport jsyaml from 'js-yaml';\nimport ArrayListGrouped from '@shell/components/form/ArrayListGrouped';\nimport { randomStr } from '@shell/utils/string';\n\nexport default {\n  name: 'Storage',\n\n  components: {\n    ArrayListGrouped, ButtonDropdown, Mount, CodeMirror\n  },\n\n  props: {\n    mode: {\n      type:    String,\n      default: 'create',\n    },\n\n    // pod spec\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      },\n    },\n\n    namespace: {\n      type:    String,\n      default: null,\n    },\n\n    savePvcHookName: {\n      type:     String,\n      required: true,\n    },\n\n    // namespaced configmaps and secrets\n    configMaps: {\n      type:    Array,\n      default: () => [],\n    },\n\n    secrets: {\n      type:    Array,\n      default: () => [],\n    },\n    namespacedPvcs: {\n      type:    Array,\n      default: () => [],\n    },\n\n    registerBeforeHook: {\n      type:    Function,\n      default: null,\n    },\n    loading: {\n      default: false,\n      type:    Boolean\n    },\n  },\n\n  data() {\n    this.initializeStorage();\n\n    return {};\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    /**\n     * Generated list of volumes\n     */\n    volumeTypeOptions() {\n      const excludedFiles = ['index', 'Mount', 'PVC', 'ContainerMountPaths'];\n      const defaultVolumeTypes = [\n        'csi',\n        'configMap',\n        'createPVC',\n        'persistentVolumeClaim'\n      ];\n      // Get all the custom volume types from the file names of this folder\n      const customVolumeTypes = require\n        .context('@shell/edit/workload/storage', false, /^.*\\.vue$/)\n        .keys()\n        .map((path) => path.replace(/(\\.\\/)|(.vue)/g, ''))\n        .filter((file) => !excludedFiles.includes(file));\n\n      return [\n        ...customVolumeTypes,\n        ...defaultVolumeTypes\n      ]\n        .sort()\n        .map((volumeType) => ({\n          label:  this.t(`workload.storage.subtypes.${ volumeType }`),\n          action: this.addVolume,\n          value:  volumeType,\n        }));\n    },\n\n    pvcNames() {\n      return this.namespacedPvcs.map((pvc) => pvc.metadata.name);\n    },\n  },\n\n  // watch: {\n  //   storageVolumes(neu, old) {\n  //     removeObjects(this.value.volumes, old);\n  //     addObjects(this.value.volumes, neu);\n  //     const names = neu.reduce((all, each) => {\n  //       all.push(each.name);\n\n  //       return all;\n  //     }, []);\n\n  //     this.container.volumeMounts = this.container.volumeMounts.filter(mount => names.includes(mount.name));\n  //   }\n  // },\n\n  methods: {\n    /**\n     * Initialize missing values for the container\n     */\n    initializeStorage() {\n      if (!this.value.volumes) {\n        this.$set(this.value, 'volumes', []);\n      }\n    },\n\n    /**\n     * Remove all mounts for given storage volume\n     */\n    removeVolume(volume) {\n      const removeName = volume.row.value.name;\n\n      this.value.volumes = this.value.volumes.filter(({ name }) => name !== removeName);\n    },\n\n    addVolume(type) {\n      const name = `vol-${ randomStr(5).toLowerCase() }`;\n\n      if (type === 'createPVC') {\n        this.value.volumes.push({\n          _type:                 'createPVC',\n          persistentVolumeClaim: {},\n          name,\n        });\n      } else if (type === 'csi') {\n        this.value.volumes.push({\n          _type: type,\n          csi:   { volumeAttributes: {} },\n          name,\n        });\n      } else if (type === 'emptyDir') {\n        this.value.volumes.push({\n          _type:    type,\n          emptyDir: { medium: '' },\n          name,\n        });\n      } else {\n        this.value.volumes.push({\n          _type:  type,\n          [type]: {},\n          name,\n        });\n      }\n\n      // this.container.volumeMounts.push({ name });\n    },\n\n    volumeType(vol) {\n      const type = Object.keys(vol).filter(\n        (key) => typeof vol[key] === 'object'\n      )[0];\n\n      return type;\n    },\n\n    // import component for volume type\n    getComponent(type) {\n      switch (type) {\n      case 'configMap':\n        return require(`@shell/edit/workload/storage/secret.vue`).default;\n      case 'createPVC':\n      case 'persistentVolumeClaim':\n        return require(`@shell/edit/workload/storage/persistentVolumeClaim/index.vue`)\n          .default;\n      case 'csi':\n        return require(`@shell/edit/workload/storage/csi/index.vue`).default;\n\n      default: {\n        let component;\n\n        try {\n          component = require(`@shell/edit/workload/storage/${ type }.vue`).default;\n        } catch {}\n\n        return component;\n      }\n      }\n    },\n\n    headerFor(type) {\n      if (\n        this.$store.getters['i18n/exists'](`workload.storage.subtypes.${ type }`)\n      ) {\n        return this.t(`workload.storage.subtypes.${ type }`);\n      } else {\n        return type;\n      }\n    },\n\n    yamlDisplay(volume) {\n      try {\n        return jsyaml.dump(volume);\n      } catch {\n        return volume;\n      }\n    },\n\n    openPopover() {\n      const button = this.$refs.buttonDropdown;\n\n      try {\n        button.togglePopover();\n      } catch (e) {}\n    },\n\n    // codemirror needs to refresh if it is in a tab that wasn't visible on page load\n    refresh() {\n      if (this.$refs.cm) {\n        this.$refs.cm.forEach((component) => component.refresh());\n      }\n    },\n\n    removePvcForm(hookName) {\n      this.$emit('removePvcForm', hookName);\n    }\n  },\n};\n</script>\n\n<template>\n  <div>\n    <!-- Storage Volumes -->\n    <ArrayListGrouped\n      :key=\"value.volumes.length\"\n      v-model=\"value.volumes\"\n      :mode=\"mode\"\n      @remove=\"removeVolume\"\n    >\n      <!-- Custom/default storage volume form -->\n      <template #default=\"props\">\n        <h3>{{ headerFor(volumeType(props.row.value)) }}</h3>\n        <div class=\"bordered-section\">\n          <component\n            :is=\"getComponent(volumeType(props.row.value))\"\n            v-if=\"getComponent(volumeType(props.row.value))\"\n            :value=\"props.row.value\"\n            :pod-spec=\"value\"\n            :mode=\"mode\"\n            :namespace=\"namespace\"\n            :secrets=\"secrets\"\n            :config-maps=\"configMaps\"\n            :pvcs=\"pvcNames\"\n            :register-before-hook=\"registerBeforeHook\"\n            :save-pvc-hook-name=\"savePvcHookName\"\n            :loading=\"loading\"\n            @removePvcForm=\"removePvcForm\"\n          />\n          <div v-else-if=\"isView\">\n            <CodeMirror\n              ref=\"cm\"\n              :value=\"yamlDisplay(props.row.value)\"\n              :options=\"{ readOnly: true, cursorBlinkRate: -1 }\"\n            />\n          </div>\n        </div>\n\n        <!-- Mount point list to be mapped to volume\n        <Mount\n          :container=\"container\"\n          :name=\"props.row.value.name\"\n          :mode=\"mode\"\n        /> -->\n      </template>\n\n      <!-- Add Storage Volume -->\n      <template #add>\n        <ButtonDropdown\n          v-if=\"!isView\"\n          id=\"select-volume\"\n          :button-label=\"t('workload.storage.addVolume')\"\n          :dropdown-options=\"volumeTypeOptions\"\n          size=\"sm\"\n          @click-action=\"e=>addVolume(e.value)\"\n        />\n      </template>\n    </ArrayListGrouped>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.volume-source {\n  padding: 20px;\n  margin: 20px 0px 20px 0px;\n  position: relative;\n\n  ::v-deep .code-mirror {\n    .CodeMirror {\n      background-color: var(--yaml-editor-bg);\n      & .CodeMirror-gutters {\n        background-color: var(--yaml-editor-bg);\n      }\n    }\n  }\n}\n\n.remove-vol {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  padding: 0px;\n}\n\n.add-vol:focus {\n  outline: none;\n  box-shadow: none;\n}\n</style>\n"]}]}