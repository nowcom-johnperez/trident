{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/apps/charts/chart.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/apps/charts/chart.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgQ2hhcnRNaXhpbiBmcm9tICdAc2hlbGwvbWl4aW5zL2NoYXJ0JzsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IENoYXJ0UmVhZG1lIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NoYXJ0UmVhZG1lJzsKaW1wb3J0IExhenlJbWFnZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9MYXp5SW1hZ2UnOwppbXBvcnQgRGF0ZUZvcm1hdHRlciBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtYXR0ZXIvRGF0ZSc7CmltcG9ydCBpc0VxdWFsIGZyb20gJ2xvZGFzaC9pc0VxdWFsJzsKaW1wb3J0IHsgQ0hBUlQsIFJFUE8sIFJFUE9fVFlQRSwgVkVSU0lPTiB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBjb21wYXRpYmxlVmVyc2lvbnNGb3IgfSBmcm9tICdAc2hlbGwvc3RvcmUvY2F0YWxvZyc7CmltcG9ydCBUeXBlRGVzY3JpcHRpb24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvVHlwZURlc2NyaXB0aW9uJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJhbm5lciwKICAgIENoYXJ0UmVhZG1lLAogICAgRGF0ZUZvcm1hdHRlciwKICAgIExhenlJbWFnZSwKICAgIExvYWRpbmcsCiAgICBUeXBlRGVzY3JpcHRpb24KICB9LAoKICBtaXhpbnM6IFsKICAgIENoYXJ0TWl4aW4KICBdLAoKICBhc3luYyBmZXRjaCgpIHsKICAgIGF3YWl0IHRoaXMuZmV0Y2hDaGFydCgpOwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzaG93TGFzdFZlcnNpb25zOiAxMCwKICAgICAgc2hvd01vcmVWZXJzaW9uczogZmFsc2UsCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAuLi5tYXBHZXR0ZXJzKFsnY3VycmVudENsdXN0ZXInXSksCgogICAgdmVyc2lvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLnNob3dNb3JlVmVyc2lvbnMgPyB0aGlzLm1hcHBlZFZlcnNpb25zIDogdGhpcy5tYXBwZWRWZXJzaW9ucy5zbGljZSgwLCB0aGlzLnNob3dMYXN0VmVyc2lvbnMpOwogICAgfSwKCiAgICB0YXJnZXRlZEFwcFdhcm5pbmcoKSB7CiAgICAgIGlmICghdGhpcy5leGlzdGluZykgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBjb25zdCB1cmwgPSB0aGlzLiRyb3V0ZXIucmVzb2x2ZSh0aGlzLmFwcExvY2F0aW9uKCkpLmhyZWY7CgogICAgICByZXR1cm4gdGhpcy5pc0NoYXJ0VGFyZ2V0ZWQgPyB0aGlzLnQoJ2NhdGFsb2cuY2hhcnQuZXJyb3JzLmNsdXN0ZXJUb29sRXhpc3RzJywgeyB1cmwgfSwgdHJ1ZSkgOiAnJzsKICAgIH0sCgogICAgbWFpbnRhaW5lcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLnZlcnNpb24ubWFpbnRhaW5lcnMubWFwKChtKSA9PiB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGlkOiAgIG0ubmFtZSwKICAgICAgICAgIHRleHQ6IG0ubmFtZSwKICAgICAgICAgIHVybDogIGBtYWlsdG86JHsgbS5lbWFpbCB9YAogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKCiAgICBvc1dhcm5pbmcoKSB7CiAgICAgIGlmICh0aGlzLmNoYXJ0KSB7CiAgICAgICAgY29uc3QgY29tcGF0aWJsZSA9IGNvbXBhdGlibGVWZXJzaW9uc0Zvcih0aGlzLmNoYXJ0LCB0aGlzLmN1cnJlbnRDbHVzdGVyLndvcmtlck9TcywgdGhpcy5zaG93UHJlUmVsZWFzZSApOwoKICAgICAgICBjb25zdCBjdXJyZW50bHlDb21wYXRpYmxlID0gISFjb21wYXRpYmxlLmZpbmQoKHZlcnNpb24pID0+IHsKICAgICAgICAgIHJldHVybiB2ZXJzaW9uLnZlcnNpb24gPT09IHRoaXMudGFyZ2V0VmVyc2lvbjsKICAgICAgICB9KTsKCiAgICAgICAgaWYgKGN1cnJlbnRseUNvbXBhdGlibGUpIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9IGVsc2UgaWYgKGNvbXBhdGlibGUubGVuZ3RoID4gMCkgewogICAgICAgICAgcmV0dXJuIHRoaXMudCgnY2F0YWxvZy5vcy52ZXJzaW9uSW5jb21wYXRpYmxlJyk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiB0aGlzLnQoJ2NhdGFsb2cub3MuY2hhcnRJbmNvbXBhdGlibGUnKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KCiAgfSwKCiAgd2F0Y2g6IHsKICAgICckcm91dGUucXVlcnknKG5ldSwgb2xkKSB7CiAgICAgIGlmICggIWlzRXF1YWwobmV1LCBvbGQpICkgewogICAgICAgIHRoaXMuJGZldGNoKCk7CiAgICAgIH0KICAgIH0sCiAgfSwKCiAgbWV0aG9kczogewogICAgaW5zdGFsbCgpIHsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1hcHBzLWNoYXJ0cy1pbnN0YWxsJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIGNsdXN0ZXI6IHRoaXMuJHJvdXRlLnBhcmFtcy5jbHVzdGVyLAogICAgICAgICAgcHJvZHVjdDogdGhpcy4kc3RvcmUuZ2V0dGVyc1sncHJvZHVjdElkJ10sCiAgICAgICAgfSwKICAgICAgICBxdWVyeTogewogICAgICAgICAgW1JFUE9fVFlQRV06IHRoaXMucXVlcnkucmVwb1R5cGUsCiAgICAgICAgICBbUkVQT106ICAgICAgdGhpcy5xdWVyeS5yZXBvTmFtZSwKICAgICAgICAgIFtDSEFSVF06ICAgICB0aGlzLnF1ZXJ5LmNoYXJ0TmFtZSwKICAgICAgICAgIFtWRVJTSU9OXTogICB0aGlzLnF1ZXJ5LnZlcnNpb25OYW1lLAogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAoKICB9LAp9Owo="},{"version":3,"sources":["chart.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA","file":"chart.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/apps/charts","sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport ChartMixin from '@shell/mixins/chart';\nimport { Banner } from '@components/Banner';\nimport ChartReadme from '@shell/components/ChartReadme';\nimport LazyImage from '@shell/components/LazyImage';\nimport DateFormatter from '@shell/components/formatter/Date';\nimport isEqual from 'lodash/isEqual';\nimport { CHART, REPO, REPO_TYPE, VERSION } from '@shell/config/query-params';\nimport { mapGetters } from 'vuex';\nimport { compatibleVersionsFor } from '@shell/store/catalog';\nimport TypeDescription from '@shell/components/TypeDescription';\nexport default {\n  components: {\n    Banner,\n    ChartReadme,\n    DateFormatter,\n    LazyImage,\n    Loading,\n    TypeDescription\n  },\n\n  mixins: [\n    ChartMixin\n  ],\n\n  async fetch() {\n    await this.fetchChart();\n  },\n\n  data() {\n    return {\n      showLastVersions: 10,\n      showMoreVersions: false,\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n\n    versions() {\n      return this.showMoreVersions ? this.mappedVersions : this.mappedVersions.slice(0, this.showLastVersions);\n    },\n\n    targetedAppWarning() {\n      if (!this.existing) {\n        return;\n      }\n      const url = this.$router.resolve(this.appLocation()).href;\n\n      return this.isChartTargeted ? this.t('catalog.chart.errors.clusterToolExists', { url }, true) : '';\n    },\n\n    maintainers() {\n      return this.version.maintainers.map((m) => {\n        return {\n          id:   m.name,\n          text: m.name,\n          url:  `mailto:${ m.email }`\n        };\n      });\n    },\n\n    osWarning() {\n      if (this.chart) {\n        const compatible = compatibleVersionsFor(this.chart, this.currentCluster.workerOSs, this.showPreRelease );\n\n        const currentlyCompatible = !!compatible.find((version) => {\n          return version.version === this.targetVersion;\n        });\n\n        if (currentlyCompatible) {\n          return false;\n        } else if (compatible.length > 0) {\n          return this.t('catalog.os.versionIncompatible');\n        } else {\n          return this.t('catalog.os.chartIncompatible');\n        }\n      }\n\n      return false;\n    }\n\n  },\n\n  watch: {\n    '$route.query'(neu, old) {\n      if ( !isEqual(neu, old) ) {\n        this.$fetch();\n      }\n    },\n  },\n\n  methods: {\n    install() {\n      this.$router.push({\n        name:   'c-cluster-apps-charts-install',\n        params: {\n          cluster: this.$route.params.cluster,\n          product: this.$store.getters['productId'],\n        },\n        query: {\n          [REPO_TYPE]: this.query.repoType,\n          [REPO]:      this.query.repoName,\n          [CHART]:     this.query.chartName,\n          [VERSION]:   this.query.versionName,\n        }\n      });\n    },\n\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <TypeDescription resource=\"chart\" />\n    <div\n      v-if=\"chart\"\n      class=\"chart-header\"\n    >\n      <div class=\"name-logo-install\">\n        <div class=\"name-logo\">\n          <div class=\"logo-bg\">\n            <LazyImage\n              :src=\"chart.icon\"\n              class=\"logo\"\n            />\n          </div>\n          <h1>\n            <nuxt-link :to=\"{ name: 'c-cluster-apps-charts' }\">\n              {{ t('catalog.chart.header.charts') }}:\n            </nuxt-link>\n            {{ chart.chartNameDisplay }} ({{ targetVersion }})\n          </h1>\n        </div>\n        <button\n          v-if=\"!requires.length\"\n          type=\"button\"\n          data-testid=\"btn-chart-install\"\n          class=\"btn role-primary\"\n          @click.prevent=\"install\"\n        >\n          {{ t(`asyncButton.${action}.action` ) }}\n        </button>\n      </div>\n      <div\n        v-if=\"chart.windowsIncompatible\"\n        class=\"mt-5\"\n      >\n        <label class=\"os-label\">{{ t('catalog.charts.windowsIncompatible') }}</label>\n      </div>\n      <div\n        v-if=\"requires.length || warnings.length || targetedAppWarning || osWarning\"\n        class=\"mt-20\"\n      >\n        <Banner\n          v-if=\"osWarning\"\n          color=\"error\"\n        >\n          <span v-clean-html=\"osWarning\" />\n        </Banner>\n        <Banner\n          v-for=\"msg in requires\"\n          :key=\"msg\"\n          color=\"error\"\n        >\n          <span v-clean-html=\"msg\" />\n        </Banner>\n\n        <Banner\n          v-for=\"msg in warnings\"\n          :key=\"msg\"\n          color=\"warning\"\n        >\n          <span v-clean-html=\"msg\" />\n        </Banner>\n\n        <Banner\n          v-if=\"targetedAppWarning\"\n          color=\"warning\"\n        >\n          <span v-clean-html=\"targetedAppWarning\" />\n        </Banner>\n      </div>\n      <div\n        v-else-if=\"version && version.description\"\n        class=\"description mt-10\"\n      >\n        <p>\n          {{ version.description }}\n        </p>\n      </div>\n    </div>\n\n    <div class=\"spacer\" />\n\n    <div class=\"chart-content\">\n      <ChartReadme\n        v-if=\"hasReadme\"\n        :version-info=\"versionInfo\"\n        class=\"chart-content__tabs\"\n      />\n      <div\n        v-else\n        class=\"chart-content__tabs\"\n      >\n        {{ t('catalog.install.appReadmeMissing', {}, true) }}\n      </div>\n      <div\n        v-if=\"version\"\n        class=\"chart-content__right-bar ml-20\"\n      >\n        <div class=\"chart-content__right-bar__section\">\n          <h3>\n            {{ t('catalog.chart.info.chartVersions.label') }}\n          </h3>\n          <div\n            v-for=\"vers of versions\"\n            :key=\"vers.id\"\n            class=\"chart-content__right-bar__section--cVersion\"\n          >\n            <b v-if=\"vers.originalVersion === version.version\">{{ vers.originalVersion === currentVersion ? t('catalog.install.versions.current', { ver: currentVersion }): vers.shortLabel }}</b>\n            <a\n              v-else\n              v-clean-tooltip=\"vers.label.length > 16 ? vers.label : null\"\n              @click.prevent=\"selectVersion(vers)\"\n            >\n              {{ vers.originalVersion === currentVersion ? t('catalog.install.versions.current', { ver: currentVersion }): vers.shortLabel }}\n            </a>\n            <DateFormatter\n              :value=\"vers.created\"\n              :show-time=\"false\"\n            />\n          </div>\n          <div class=\"mt-10 chart-content__right-bar__section--showMore\">\n            <button\n              v-if=\"mappedVersions.length > showLastVersions\"\n              type=\"button\"\n              class=\"btn btn-sm role-link\"\n              @click=\"showMoreVersions = !showMoreVersions\"\n            >\n              {{ t(`catalog.chart.info.chartVersions.${showMoreVersions ? 'showLess' : 'showMore'}`) }}\n            </button>\n          </div>\n        </div>\n        <div class=\"chart-content__right-bar__section\">\n          <h3 t>\n            {{ t('catalog.chart.info.appVersion') }}\n          </h3>\n          {{ version.appVersion }}\n        </div>\n        <div\n          v-if=\"version.home\"\n          class=\"chart-content__right-bar__section\"\n        >\n          <h3>{{ t('catalog.chart.info.home') }}</h3>\n          <a\n            :href=\"version.home\"\n            rel=\"nofollow noopener noreferrer\"\n            target=\"_blank\"\n          >{{ version.home }}</a>\n        </div>\n        <div\n          v-if=\"version.maintainers\"\n          class=\"chart-content__right-bar__section\"\n        >\n          <h3>{{ t('catalog.chart.info.maintainers') }}</h3>\n          <a\n            v-for=\"m of maintainers\"\n            :key=\"m.id\"\n            :href=\"m.url\"\n            rel=\"nofollow noopener noreferrer\"\n            target=\"_blank\"\n          >{{ m.text }}</a>\n        </div>\n        <div\n          v-if=\"version.sources\"\n          class=\"chart-content__right-bar__section\"\n        >\n          <h3>{{ t('catalog.chart.info.related') }}</h3>\n          <a\n            v-for=\"s of version.sources\"\n            :key=\"s\"\n            :href=\"s\"\n            rel=\"nofollow noopener noreferrer\"\n            target=\"_blank\"\n          >{{ s }}</a>\n        </div>\n        <div\n          v-if=\"version.urls\"\n          class=\"chart-content__right-bar__section\"\n        >\n          <h3>{{ t('catalog.chart.info.chartUrls') }}</h3>\n          <a\n            v-for=\"url of version.urls\"\n            :key=\"url\"\n            :href=\"url\"\n            rel=\"nofollow noopener noreferrer\"\n            target=\"_blank\"\n          >{{ version.urls.length === 1 ? 'Download': url }}</a>\n        </div>\n        <div\n          v-if=\"version.keywords\"\n          class=\"chart-content__right-bar__section chart-content__right-bar__section--keywords\"\n        >\n          <h3>{{ t('catalog.chart.info.keywords') }}</h3>\n          {{ version.keywords.join(', ') }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  $name-height: 50px;\n  $padding: 5px;\n\n  .chart-header {\n\n    .name-logo-install {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n      height: $name-height;\n    }\n\n    .name-logo {\n      display: flex;\n      align-items: center;\n\n      .logo-bg {\n        height: $name-height;\n        width: $name-height;\n        background-color: white;\n        border: $padding solid white;\n        border-radius: calc( 3 * var(--border-radius));\n        position: relative;\n      }\n\n      .logo {\n        max-height: $name-height - 2 * $padding;\n        max-width: $name-height - 2 * $padding;\n        position: absolute;\n        width: auto;\n        height: auto;\n        top: 0;\n        right: 0;\n        bottom: 0;\n        left: 0;\n        margin: auto;\n      }\n\n      h1 {\n        margin: 0 20px;\n      }\n    }\n\n    .os-label{\n      background-color: var(--warning-banner-bg);\n      color: var(--warning);\n    }\n\n    .btn {\n      height: 30px;\n    }\n\n    .description {\n      margin-right: 80px;\n    }\n  }\n\n  .chart-content {\n    display: flex;\n    &__tabs {\n      flex: 1;\n      min-width: 400px;\n    }\n    &__right-bar {\n      min-width: 260px;\n      max-width: 260px;\n\n      &__section {\n        display: flex;\n        flex-direction: column;\n        padding-bottom: 20px;\n        word-break: break-all;\n        a {\n          cursor: pointer;\n        }\n        &--cVersion{\n          display: flex;\n          justify-content: space-between;\n        }\n\n        &--keywords{\n         word-break: break-word;\n        }\n\n      }\n    }\n  }\n</style>\n"]}]}