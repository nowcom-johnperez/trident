{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/ValueFromResource.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/ValueFromResource.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IENPTkZJR19NQVAsIFNFQ1JFVCwgTkFNRVNQQUNFIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IGdldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgeyBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExhYmVsZWRTZWxlY3QsCiAgICBMYWJlbGVkSW5wdXQKICB9LAoKICBwcm9wczogewogICAgbW9kZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjcmVhdGUnCiAgICB9LAogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7CiAgICAgICAgcmV0dXJuIHsgdmFsdWVGcm9tOiB7fSB9OwogICAgICB9CiAgICB9LAogICAgYWxsQ29uZmlnTWFwczogewogICAgICB0eXBlOiAgICBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10KICAgIH0sCiAgICBhbGxTZWNyZXRzOiB7CiAgICAgIHR5cGU6ICAgIEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfSwKICAgIC8vIGZpbHRlciByZXNvdXJjZSBvcHRpb25zIGJ5IG5hbWVzcGFjZShzKSBzZWxlY3RlZCBpbiB0b3AgbmF2CiAgICBuYW1lc3BhY2VkOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCiAgICBsb2FkaW5nOiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB0eXBlOiAgICBCb29sZWFuCiAgICB9LAogIH0sCgogIGRhdGEoKSB7CiAgICBjb25zdCB0eXBlT3B0cyA9IFsKICAgICAgeyB2YWx1ZTogJ3NpbXBsZScsIGxhYmVsOiAnS2V5L1ZhbHVlIFBhaXInIH0sCiAgICAgIHsgdmFsdWU6ICdyZXNvdXJjZUZpZWxkUmVmJywgbGFiZWw6ICdSZXNvdXJjZScgfSwKICAgICAgeyB2YWx1ZTogJ2NvbmZpZ01hcEtleVJlZicsIGxhYmVsOiAnQ29uZmlnTWFwIEtleScgfSwKICAgICAgeyB2YWx1ZTogJ3NlY3JldEtleVJlZicsIGxhYmVsOiAnU2VjcmV0IGtleScgfSwKICAgICAgeyB2YWx1ZTogJ2ZpZWxkUmVmJywgbGFiZWw6ICdQb2QgRmllbGQnIH0sCiAgICAgIHsgdmFsdWU6ICdzZWNyZXRSZWYnLCBsYWJlbDogJ1NlY3JldCcgfSwKICAgICAgeyB2YWx1ZTogJ2NvbmZpZ01hcFJlZicsIGxhYmVsOiAnQ29uZmlnTWFwJyB9LAogICAgXTsKCiAgICBjb25zdCByZXNvdXJjZUtleU9wdHMgPSBbJ2xpbWl0cy5jcHUnLCAnbGltaXRzLmVwaGVtZXJhbC1zdG9yYWdlJywgJ2xpbWl0cy5tZW1vcnknLCAncmVxdWVzdHMuY3B1JywgJ3JlcXVlc3RzLmVwaGVtZXJhbC1zdG9yYWdlJywgJ3JlcXVlc3RzLm1lbW9yeSddOwogICAgbGV0IHR5cGU7CgogICAgaWYgKHRoaXMudmFsdWUuc2VjcmV0UmVmKSB7CiAgICAgIHR5cGUgPSAnc2VjcmV0UmVmJzsKICAgIH0gZWxzZSBpZiAodGhpcy52YWx1ZS5jb25maWdNYXBSZWYpIHsKICAgICAgdHlwZSA9ICdjb25maWdNYXBSZWYnOwogICAgfSBlbHNlIGlmICh0aGlzLnZhbHVlLnZhbHVlKSB7CiAgICAgIHR5cGUgPSAnc2ltcGxlJzsKICAgIH0gZWxzZSBpZiAodGhpcy52YWx1ZS52YWx1ZUZyb20pIHsKICAgICAgdHlwZSA9IE9iamVjdC5rZXlzKCh0aGlzLnZhbHVlLnZhbHVlRnJvbSkpWzBdIHx8ICdzaW1wbGUnOwogICAgfQoKICAgIGxldCByZWZOYW1lOwogICAgbGV0IG5hbWU7CiAgICBsZXQgZmllbGRQYXRoOwogICAgbGV0IHJlZmVyZW5jZWQ7CiAgICBsZXQga2V5OwogICAgbGV0IHZhbFN0cjsKICAgIGNvbnN0IGtleXMgPSBbXTsKCiAgICBzd2l0Y2ggKHR5cGUpIHsKICAgIGNhc2UgJ3Jlc291cmNlRmllbGRSZWYnOgogICAgICBuYW1lID0gdGhpcy52YWx1ZS5uYW1lOwogICAgICByZWZOYW1lID0gdGhpcy52YWx1ZS52YWx1ZUZyb21bdHlwZV0uY29udGFpbmVyTmFtZTsKICAgICAga2V5ID0gdGhpcy52YWx1ZS52YWx1ZUZyb21bdHlwZV0ucmVzb3VyY2UgfHwgJyc7CiAgICAgIGJyZWFrOwogICAgY2FzZSAnY29uZmlnTWFwS2V5UmVmJzoKICAgICAgbmFtZSA9IHRoaXMudmFsdWUubmFtZTsKICAgICAga2V5ID0gdGhpcy52YWx1ZS52YWx1ZUZyb21bdHlwZV0ua2V5IHx8ICcnOwogICAgICByZWZOYW1lID0gdGhpcy52YWx1ZS52YWx1ZUZyb21bdHlwZV0ubmFtZTsKICAgICAgcmVmZXJlbmNlZCA9IHRoaXMuYWxsQ29uZmlnTWFwcy5maWx0ZXIoKHJlc291cmNlKSA9PiB7CiAgICAgICAgcmV0dXJuIHJlc291cmNlLm1ldGFkYXRhLm5hbWUgPT09IHJlZk5hbWU7CiAgICAgIH0pWzBdOwogICAgICBpZiAocmVmZXJlbmNlZCAmJiByZWZlcmVuY2VkLmRhdGEpIHsKICAgICAgICBrZXlzLnB1c2goLi4uT2JqZWN0LmtleXMocmVmZXJlbmNlZC5kYXRhKSk7CiAgICAgIH0KICAgICAgYnJlYWs7CiAgICBjYXNlICdzZWNyZXRSZWYnOgogICAgY2FzZSAnY29uZmlnTWFwUmVmJzoKICAgICAgbmFtZSA9IHRoaXMudmFsdWUucHJlZml4OwogICAgICByZWZOYW1lID0gdGhpcy52YWx1ZVt0eXBlXS5uYW1lOwogICAgICBicmVhazsKICAgIGNhc2UgJ3NlY3JldEtleVJlZic6CiAgICAgIG5hbWUgPSB0aGlzLnZhbHVlLm5hbWU7CiAgICAgIGtleSA9IHRoaXMudmFsdWUudmFsdWVGcm9tW3R5cGVdLmtleSB8fCAnJzsKICAgICAgcmVmTmFtZSA9IHRoaXMudmFsdWUudmFsdWVGcm9tW3R5cGVdLm5hbWU7CiAgICAgIHJlZmVyZW5jZWQgPSB0aGlzLmFsbFNlY3JldHMuZmlsdGVyKChyZXNvdXJjZSkgPT4gewogICAgICAgIHJldHVybiByZXNvdXJjZS5tZXRhZGF0YS5uYW1lID09PSByZWZOYW1lOwogICAgICB9KVswXTsKICAgICAgaWYgKHJlZmVyZW5jZWQgJiYgcmVmZXJlbmNlZC5kYXRhKSB7CiAgICAgICAga2V5cy5wdXNoKC4uLk9iamVjdC5rZXlzKHJlZmVyZW5jZWQuZGF0YSkpOwogICAgICB9CiAgICAgIGJyZWFrOwogICAgY2FzZSAnZmllbGRSZWYnOgogICAgICBmaWVsZFBhdGggPSBnZXQodGhpcy52YWx1ZS52YWx1ZUZyb20sIGAkeyB0eXBlIH0uZmllbGRQYXRoYCkgfHwgJyc7CiAgICAgIG5hbWUgPSB0aGlzLnZhbHVlLm5hbWU7CiAgICAgIGJyZWFrOwogICAgZGVmYXVsdDoKICAgICAgbmFtZSA9IHRoaXMudmFsdWUubmFtZTsKICAgICAgdmFsU3RyID0gdGhpcy52YWx1ZS52YWx1ZTsKICAgICAgYnJlYWs7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgdHlwZU9wdHMsIHR5cGUsIHJlZk5hbWUsIHJlZmVyZW5jZWQ6IHJlZk5hbWUsIHNlY3JldHM6IHRoaXMuYWxsU2VjcmV0cywga2V5cywga2V5LCBmaWVsZFBhdGgsIG5hbWUsIHJlc291cmNlS2V5T3B0cywgdmFsU3RyCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzVmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX1ZJRVc7CiAgICB9LAoKICAgIG5hbWVzcGFjZXMoKSB7CiAgICAgIGlmICh0aGlzLm5hbWVzcGFjZWQpIHsKICAgICAgICBjb25zdCBtYXAgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzLm5hbWVzcGFjZXMoKTsKCiAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKG1hcCkuZmlsdGVyKChrZXkpID0+IG1hcFtrZXldKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBjb25zdCBpblN0b3JlID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFN0b3JlJ10oTkFNRVNQQUNFKTsKCiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbYCR7IGluU3RvcmUgfS9hbGxgXShOQU1FU1BBQ0UpOwogICAgICB9CiAgICB9LAoKICAgIHNvdXJjZU9wdGlvbnMoKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdjb25maWdNYXBLZXlSZWYnIHx8IHRoaXMudHlwZSA9PT0gJ2NvbmZpZ01hcFJlZicpIHsKICAgICAgICByZXR1cm4gdGhpcy5hbGxDb25maWdNYXBzLmZpbHRlcigobWFwKSA9PiB0aGlzLm5hbWVzcGFjZXMuaW5jbHVkZXMobWFwPy5tZXRhZGF0YT8ubmFtZXNwYWNlKSk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy50eXBlID09PSAnc2VjcmV0UmVmJyB8fCB0aGlzLnR5cGUgPT09ICdzZWNyZXRLZXlSZWYnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuYWxsU2VjcmV0cy5maWx0ZXIoKHNlY3JldCkgPT4gdGhpcy5uYW1lc3BhY2VzLmluY2x1ZGVzKHNlY3JldD8ubWV0YWRhdGE/Lm5hbWVzcGFjZSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKCiAgICBuZWVkc1NvdXJjZSgpIHsKICAgICAgcmV0dXJuIHRoaXMudHlwZSAhPT0gJ3NpbXBsZScgJiYgdGhpcy50eXBlICE9PSAncmVzb3VyY2VGaWVsZFJlZicgJiYgdGhpcy50eXBlICE9PSAnZmllbGRSZWYnICYmICEhdGhpcy50eXBlOwogICAgfSwKCiAgICBzb3VyY2VMYWJlbCgpIHsKICAgICAgbGV0IG91dDsKICAgICAgY29uc3QgeyB0eXBlIH0gPSB0aGlzOwoKICAgICAgaWYgKCF0eXBlKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBzd2l0Y2ggKHR5cGUpIHsKICAgICAgY2FzZSAnc2VjcmV0S2V5UmVmJzoKICAgICAgY2FzZSAnc2VjcmV0UmVmJzoKICAgICAgICBvdXQgPSAnd29ya2xvYWQuY29udGFpbmVyLmNvbW1hbmQuZnJvbVJlc291cmNlLnNlY3JldCc7CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ2NvbmZpZ01hcEtleVJlZic6CiAgICAgIGNhc2UgJ2NvbmZpZ01hcFJlZic6CiAgICAgICAgb3V0ID0gJ3dvcmtsb2FkLmNvbnRhaW5lci5jb21tYW5kLmZyb21SZXNvdXJjZS5jb25maWdNYXAnOwogICAgICAgIGJyZWFrOwogICAgICBkZWZhdWx0OgogICAgICAgIG91dCA9ICd3b3JrbG9hZC5jb250YWluZXIuY29tbWFuZC5mcm9tUmVzb3VyY2Uuc291cmNlLmxhYmVsJzsKICAgICAgfQoKICAgICAgcmV0dXJuIHRoaXMudChvdXQpOwogICAgfSwKCiAgICBuYW1lTGFiZWwoKSB7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09ICdjb25maWdNYXBSZWYnIHx8IHRoaXMudHlwZSA9PT0gJ3NlY3JldFJlZicpIHsKICAgICAgICByZXR1cm4gdGhpcy50KCd3b3JrbG9hZC5jb250YWluZXIuY29tbWFuZC5mcm9tUmVzb3VyY2UucHJlZml4Jyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRoaXMudCgnd29ya2xvYWQuY29udGFpbmVyLmNvbW1hbmQuZnJvbVJlc291cmNlLm5hbWUubGFiZWwnKTsKICAgICAgfQogICAgfSwKCiAgICBleHRyYUNvbHVtbigpIHsKICAgICAgcmV0dXJuIFsncmVzb3VyY2VGaWVsZFJlZicsICdjb25maWdNYXBLZXlSZWYnLCAnc2VjcmV0S2V5UmVmJ10uaW5jbHVkZXModGhpcy50eXBlKTsKICAgIH0sCiAgfSwKCiAgd2F0Y2g6IHsKICAgIHR5cGUoKSB7CiAgICAgIHRoaXMucmVmZXJlbmNlZCA9IG51bGw7CiAgICAgIHRoaXMua2V5ID0gJyc7CiAgICAgIHRoaXMucmVmTmFtZSA9ICcnOwogICAgICB0aGlzLmtleXMgPSBbXTsKICAgICAgdGhpcy5rZXkgPSAnJzsKICAgICAgdGhpcy52YWxTdHIgPSAnJzsKICAgICAgdGhpcy5maWVsZFBhdGggPSAnJzsKICAgIH0sCgogICAgcmVmZXJlbmNlZChuZXUsIG9sZCkgewogICAgICBpZiAobmV1KSB7CiAgICAgICAgaWYgKChuZXUudHlwZSA9PT0gU0VDUkVUIHx8IG5ldS50eXBlID09PSBDT05GSUdfTUFQKSAmJiBuZXUuZGF0YSkgewogICAgICAgICAgdGhpcy5rZXlzID0gT2JqZWN0LmtleXMobmV1LmRhdGEpOwogICAgICAgIH0KICAgICAgICB0aGlzLnJlZk5hbWUgPSBuZXU/Lm1ldGFkYXRhPy5uYW1lOwogICAgICB9CiAgICAgIHRoaXMudXBkYXRlUm93KCk7CiAgICB9LAogIH0sCgogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZVJvdygpIHsKICAgICAgaWYgKCF0aGlzLm5hbWU/Lmxlbmd0aCAmJiAhdGhpcy5yZWZOYW1lPy5sZW5ndGgpIHsKICAgICAgICBpZiAodGhpcy50eXBlICE9PSAnZmllbGRSZWYnKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIG51bGwpOwoKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KICAgICAgbGV0IG91dCA9IHsgbmFtZTogdGhpcy5uYW1lIHx8IHRoaXMucmVmTmFtZSB9OwoKICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHsKICAgICAgY2FzZSAnY29uZmlnTWFwS2V5UmVmJzoKICAgICAgY2FzZSAnc2VjcmV0S2V5UmVmJzoKICAgICAgICBvdXQudmFsdWVGcm9tID0gewogICAgICAgICAgW3RoaXMudHlwZV06IHsKICAgICAgICAgICAga2V5OiB0aGlzLmtleSwgbmFtZTogdGhpcy5yZWZOYW1lLCBvcHRpb25hbDogZmFsc2UKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdyZXNvdXJjZUZpZWxkUmVmJzoKICAgICAgICBvdXQudmFsdWVGcm9tID0gewogICAgICAgICAgW3RoaXMudHlwZV06IHsKICAgICAgICAgICAgY29udGFpbmVyTmFtZTogdGhpcy5yZWZOYW1lLCBkaXZpc29yOiAxLCByZXNvdXJjZTogdGhpcy5rZXkKICAgICAgICAgIH0KICAgICAgICB9OwogICAgICAgIGJyZWFrOwogICAgICBjYXNlICdmaWVsZFJlZic6CiAgICAgICAgaWYgKCF0aGlzLmZpZWxkUGF0aCB8fCAhdGhpcy5maWVsZFBhdGgubGVuZ3RoKSB7CiAgICAgICAgICBvdXQgPSBudWxsOyBicmVhazsKICAgICAgICB9CiAgICAgICAgb3V0LnZhbHVlRnJvbSA9IHsgW3RoaXMudHlwZV06IHsgYXBpVmVyc2lvbjogJ3YxJywgZmllbGRQYXRoOiB0aGlzLmZpZWxkUGF0aCB9IH07CiAgICAgICAgYnJlYWs7CiAgICAgIGNhc2UgJ3NpbXBsZSc6CiAgICAgICAgb3V0LnZhbHVlID0gdGhpcy52YWxTdHI7CiAgICAgICAgYnJlYWs7CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgZGVsZXRlIG91dC5uYW1lOwogICAgICAgIG91dC5wcmVmaXggPSB0aGlzLm5hbWU7CiAgICAgICAgb3V0W3RoaXMudHlwZV0gPSB7IG5hbWU6IHRoaXMucmVmTmFtZSwgb3B0aW9uYWw6IGZhbHNlIH07CiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBvdXQpOwogICAgfSwKICAgIGdldAogIH0KfTsK"},{"version":3,"sources":["ValueFromResource.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ValueFromResource.vue","sourceRoot":"node_modules/@rancher/shell/components/form","sourcesContent":["<script>\nimport { CONFIG_MAP, SECRET, NAMESPACE } from '@shell/config/types';\nimport { get } from '@shell/utils/object';\nimport { _VIEW } from '@shell/config/query-params';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { LabeledInput } from '@components/Form/LabeledInput';\n\nexport default {\n  components: {\n    LabeledSelect,\n    LabeledInput\n  },\n\n  props: {\n    mode: {\n      type:    String,\n      default: 'create'\n    },\n    value: {\n      type:    Object,\n      default: () => {\n        return { valueFrom: {} };\n      }\n    },\n    allConfigMaps: {\n      type:    Array,\n      default: () => []\n    },\n    allSecrets: {\n      type:    Array,\n      default: () => []\n    },\n    // filter resource options by namespace(s) selected in top nav\n    namespaced: {\n      type:    Boolean,\n      default: true\n    },\n    loading: {\n      default: false,\n      type:    Boolean\n    },\n  },\n\n  data() {\n    const typeOpts = [\n      { value: 'simple', label: 'Key/Value Pair' },\n      { value: 'resourceFieldRef', label: 'Resource' },\n      { value: 'configMapKeyRef', label: 'ConfigMap Key' },\n      { value: 'secretKeyRef', label: 'Secret key' },\n      { value: 'fieldRef', label: 'Pod Field' },\n      { value: 'secretRef', label: 'Secret' },\n      { value: 'configMapRef', label: 'ConfigMap' },\n    ];\n\n    const resourceKeyOpts = ['limits.cpu', 'limits.ephemeral-storage', 'limits.memory', 'requests.cpu', 'requests.ephemeral-storage', 'requests.memory'];\n    let type;\n\n    if (this.value.secretRef) {\n      type = 'secretRef';\n    } else if (this.value.configMapRef) {\n      type = 'configMapRef';\n    } else if (this.value.value) {\n      type = 'simple';\n    } else if (this.value.valueFrom) {\n      type = Object.keys((this.value.valueFrom))[0] || 'simple';\n    }\n\n    let refName;\n    let name;\n    let fieldPath;\n    let referenced;\n    let key;\n    let valStr;\n    const keys = [];\n\n    switch (type) {\n    case 'resourceFieldRef':\n      name = this.value.name;\n      refName = this.value.valueFrom[type].containerName;\n      key = this.value.valueFrom[type].resource || '';\n      break;\n    case 'configMapKeyRef':\n      name = this.value.name;\n      key = this.value.valueFrom[type].key || '';\n      refName = this.value.valueFrom[type].name;\n      referenced = this.allConfigMaps.filter((resource) => {\n        return resource.metadata.name === refName;\n      })[0];\n      if (referenced && referenced.data) {\n        keys.push(...Object.keys(referenced.data));\n      }\n      break;\n    case 'secretRef':\n    case 'configMapRef':\n      name = this.value.prefix;\n      refName = this.value[type].name;\n      break;\n    case 'secretKeyRef':\n      name = this.value.name;\n      key = this.value.valueFrom[type].key || '';\n      refName = this.value.valueFrom[type].name;\n      referenced = this.allSecrets.filter((resource) => {\n        return resource.metadata.name === refName;\n      })[0];\n      if (referenced && referenced.data) {\n        keys.push(...Object.keys(referenced.data));\n      }\n      break;\n    case 'fieldRef':\n      fieldPath = get(this.value.valueFrom, `${ type }.fieldPath`) || '';\n      name = this.value.name;\n      break;\n    default:\n      name = this.value.name;\n      valStr = this.value.value;\n      break;\n    }\n\n    return {\n      typeOpts, type, refName, referenced: refName, secrets: this.allSecrets, keys, key, fieldPath, name, resourceKeyOpts, valStr\n    };\n  },\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    namespaces() {\n      if (this.namespaced) {\n        const map = this.$store.getters.namespaces();\n\n        return Object.keys(map).filter((key) => map[key]);\n      } else {\n        const inStore = this.$store.getters['currentStore'](NAMESPACE);\n\n        return this.$store.getters[`${ inStore }/all`](NAMESPACE);\n      }\n    },\n\n    sourceOptions() {\n      if (this.type === 'configMapKeyRef' || this.type === 'configMapRef') {\n        return this.allConfigMaps.filter((map) => this.namespaces.includes(map?.metadata?.namespace));\n      } else if (this.type === 'secretRef' || this.type === 'secretKeyRef') {\n        return this.allSecrets.filter((secret) => this.namespaces.includes(secret?.metadata?.namespace));\n      } else {\n        return [];\n      }\n    },\n\n    needsSource() {\n      return this.type !== 'simple' && this.type !== 'resourceFieldRef' && this.type !== 'fieldRef' && !!this.type;\n    },\n\n    sourceLabel() {\n      let out;\n      const { type } = this;\n\n      if (!type) {\n        return;\n      }\n\n      switch (type) {\n      case 'secretKeyRef':\n      case 'secretRef':\n        out = 'workload.container.command.fromResource.secret';\n        break;\n      case 'configMapKeyRef':\n      case 'configMapRef':\n        out = 'workload.container.command.fromResource.configMap';\n        break;\n      default:\n        out = 'workload.container.command.fromResource.source.label';\n      }\n\n      return this.t(out);\n    },\n\n    nameLabel() {\n      if (this.type === 'configMapRef' || this.type === 'secretRef') {\n        return this.t('workload.container.command.fromResource.prefix');\n      } else {\n        return this.t('workload.container.command.fromResource.name.label');\n      }\n    },\n\n    extraColumn() {\n      return ['resourceFieldRef', 'configMapKeyRef', 'secretKeyRef'].includes(this.type);\n    },\n  },\n\n  watch: {\n    type() {\n      this.referenced = null;\n      this.key = '';\n      this.refName = '';\n      this.keys = [];\n      this.key = '';\n      this.valStr = '';\n      this.fieldPath = '';\n    },\n\n    referenced(neu, old) {\n      if (neu) {\n        if ((neu.type === SECRET || neu.type === CONFIG_MAP) && neu.data) {\n          this.keys = Object.keys(neu.data);\n        }\n        this.refName = neu?.metadata?.name;\n      }\n      this.updateRow();\n    },\n  },\n\n  methods: {\n    updateRow() {\n      if (!this.name?.length && !this.refName?.length) {\n        if (this.type !== 'fieldRef') {\n          this.$emit('input', null);\n\n          return;\n        }\n      }\n      let out = { name: this.name || this.refName };\n\n      switch (this.type) {\n      case 'configMapKeyRef':\n      case 'secretKeyRef':\n        out.valueFrom = {\n          [this.type]: {\n            key: this.key, name: this.refName, optional: false\n          }\n        };\n        break;\n      case 'resourceFieldRef':\n        out.valueFrom = {\n          [this.type]: {\n            containerName: this.refName, divisor: 1, resource: this.key\n          }\n        };\n        break;\n      case 'fieldRef':\n        if (!this.fieldPath || !this.fieldPath.length) {\n          out = null; break;\n        }\n        out.valueFrom = { [this.type]: { apiVersion: 'v1', fieldPath: this.fieldPath } };\n        break;\n      case 'simple':\n        out.value = this.valStr;\n        break;\n      default:\n        delete out.name;\n        out.prefix = this.name;\n        out[this.type] = { name: this.refName, optional: false };\n      }\n      this.$emit('input', out);\n    },\n    get\n  }\n};\n</script>\n\n<template>\n  <div class=\"var-row\">\n    <div class=\"type\">\n      <LabeledSelect\n        v-model=\"type\"\n        :mode=\"mode\"\n        :multiple=\"false\"\n        :options=\"typeOpts\"\n        option-label=\"label\"\n        :searchable=\"false\"\n        :reduce=\"e=>e.value\"\n        :label=\"t('workload.container.command.fromResource.type')\"\n        @input=\"updateRow\"\n      />\n    </div>\n\n    <div class=\"name\">\n      <LabeledInput\n        v-model=\"name\"\n        :label=\"nameLabel\"\n        :placeholder=\"t('workload.container.command.fromResource.name.placeholder')\"\n        :mode=\"mode\"\n        @input=\"updateRow\"\n      />\n    </div>\n\n    <div\n      v-if=\"type==='simple'\"\n      class=\"single-value\"\n    >\n      <LabeledInput\n        v-model=\"valStr\"\n        :label=\"t('workload.container.command.fromResource.value.label')\"\n        :placeholder=\"t('workload.container.command.fromResource.value.placeholder')\"\n        :mode=\"mode\"\n        @input=\"updateRow\"\n      />\n    </div>\n\n    <template v-else-if=\"needsSource\">\n      <div :class=\"{'single-value': type === 'configMapRef' || type === 'secretRef'}\">\n        <LabeledSelect\n          v-model=\"referenced\"\n          :options=\"sourceOptions\"\n          :multiple=\"false\"\n          :get-option-label=\"opt=>get(opt, 'metadata.name') || opt\"\n          :get-option-key=\"opt=>opt.id|| opt\"\n          :mode=\"mode\"\n          :label=\"sourceLabel\"\n          :loading=\"loading\"\n        />\n      </div>\n      <div v-if=\"type!=='secretRef' && type!== 'configMapRef'\">\n        <LabeledSelect\n          v-model=\"key\"\n          :multiple=\"false\"\n          :options=\"keys\"\n          :mode=\"mode\"\n          option-label=\"label\"\n          :label=\"t('workload.container.command.fromResource.key.label')\"\n          :loading=\"loading\"\n          @input=\"updateRow\"\n        />\n      </div>\n    </template>\n\n    <template v-else-if=\"type==='resourceFieldRef'\">\n      <div>\n        <LabeledInput\n          v-model=\"refName\"\n          :label=\"t('workload.container.command.fromResource.containerName')\"\n          :placeholder=\"t('workload.container.command.fromResource.source.placeholder')\"\n          :mode=\"mode\"\n          @input=\"updateRow\"\n        />\n      </div>\n      <div>\n        <LabeledSelect\n          v-model=\"key\"\n          :label=\"t('workload.container.command.fromResource.key.label')\"\n          :multiple=\"false\"\n          :options=\"resourceKeyOpts\"\n          :mode=\"mode\"\n          :searchable=\"false\"\n          :placeholder=\"t('workload.container.command.fromResource.key.placeholder', null, true)\"\n          @input=\"updateRow\"\n        />\n      </div>\n    </template>\n\n    <template v-else>\n      <div class=\"single-value\">\n        <LabeledInput\n          v-model=\"fieldPath\"\n          :placeholder=\"t('workload.container.command.fromResource.key.placeholder', null, true)\"\n          :label=\"t('workload.container.command.fromResource.key.label')\"\n          :mode=\"mode\"\n          @input=\"updateRow\"\n        />\n      </div>\n    </template>\n    <div class=\"remove\">\n      <button\n        v-if=\"!isView\"\n        type=\"button\"\n        class=\"btn role-link\"\n        @click.stop=\"$emit('remove')\"\n      >\n        {{ t('generic.remove') }}\n      </button>\n    </div>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.var-row{\n  display: grid;\n  grid-template-columns: 1fr 1fr 1fr 1fr 100px;\n  grid-column-gap: 20px;\n  margin-bottom: 10px;\n  align-items: center;\n\n  .single-value {\n    grid-column: span 2;\n  }\n\n  .remove BUTTON {\n    padding: 0px;\n  }\n}\n\n</style>\n"]}]}