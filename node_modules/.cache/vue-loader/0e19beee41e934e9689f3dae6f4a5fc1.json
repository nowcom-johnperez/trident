{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/fleet/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/fleet/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IG1hcFN0YXRlIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IEZMRUVUIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IFdPUktTUEFDRSB9IGZyb20gJ0BzaGVsbC9zdG9yZS9wcmVmcyc7CmltcG9ydCB7IFNUQVRFU19FTlVNLCBTVEFURVMsIGdldFN0YXRlTGFiZWwgfSBmcm9tICdAc2hlbGwvcGx1Z2lucy9kYXNoYm9hcmQtc3RvcmUvcmVzb3VyY2UtY2xhc3MnOwppbXBvcnQgTG9hZGluZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Mb2FkaW5nJzsKaW1wb3J0IENvbGxhcHNpYmxlQ2FyZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Db2xsYXBzaWJsZUNhcmQudnVlJzsKaW1wb3J0IFJlc291cmNlVGFibGUgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvUmVzb3VyY2VUYWJsZSc7CmltcG9ydCBDb21wb3VuZFN0YXR1c0JhZGdlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NvbXBvdW5kU3RhdHVzQmFkZ2UnOwppbXBvcnQgeyBjaGVja1Blcm1pc3Npb25zLCBjaGVja1NjaGVtYXNGb3JGaW5kQWxsSGFzaCB9IGZyb20gJ0BzaGVsbC91dGlscy9hdXRoJzsKaW1wb3J0IHsgV09SS1NQQUNFX0FOTk9UQVRJT04gfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCB7IGZpbHRlckJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IEZsZWV0Tm9Xb3Jrc3BhY2VzIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2ZsZWV0L0ZsZWV0Tm9Xb3Jrc3BhY2VzLnZ1ZSc7CmltcG9ydCB7IE5BTUUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3Byb2R1Y3QvZmxlZXQnOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICAgICAgICdMaXN0R2l0UmVwbycsCiAgY29tcG9uZW50czogewogICAgTG9hZGluZywKICAgIFJlc291cmNlVGFibGUsCiAgICBDb2xsYXBzaWJsZUNhcmQsCiAgICBDb21wb3VuZFN0YXR1c0JhZGdlLAogICAgRmxlZXROb1dvcmtzcGFjZXMKICB9LAoKICBhc3luYyBmZXRjaCgpIHsKICAgIGNvbnN0IGhhc2ggPSBhd2FpdCBjaGVja1NjaGVtYXNGb3JGaW5kQWxsSGFzaCh7CiAgICAgIGZsZWV0V29ya3NwYWNlczogewogICAgICAgIGluU3RvcmVUeXBlOiAgICAgJ21hbmFnZW1lbnQnLAogICAgICAgIHR5cGU6ICAgICAgICAgICAgRkxFRVQuV09SS1NQQUNFLAogICAgICAgIHNjaGVtYVZhbGlkYXRvcjogKHNjaGVtYSkgPT4gewogICAgICAgICAgcmV0dXJuICEhc2NoZW1hPy5saW5rcz8uY29sbGVjdGlvbjsKICAgICAgICB9CiAgICAgIH0sCiAgICAgIGFsbEJ1bmRsZXM6IHsKICAgICAgICBpblN0b3JlVHlwZTogJ21hbmFnZW1lbnQnLAogICAgICAgIHR5cGU6ICAgICAgICBGTEVFVC5CVU5ETEUsCiAgICAgIH0sCiAgICAgIGdpdFJlcG9zOiB7CiAgICAgICAgaW5TdG9yZVR5cGU6ICdtYW5hZ2VtZW50JywKICAgICAgICB0eXBlOiAgICAgICAgRkxFRVQuR0lUX1JFUE8sCiAgICAgIH0KICAgIH0sIHRoaXMuJHN0b3JlKTsKCiAgICB0aGlzLmdpdFJlcG9zID0gaGFzaC5naXRSZXBvczsKICAgIHRoaXMuZmxlZXRXb3Jrc3BhY2VzRGF0YSA9IGhhc2guZmxlZXRXb3Jrc3BhY2VzIHx8IFtdOwoKICAgIHRyeSB7CiAgICAgIGNvbnN0IHBlcm1pc3Npb25zID0gYXdhaXQgY2hlY2tQZXJtaXNzaW9ucyh7IHdvcmtzcGFjZXM6IHsgdHlwZTogRkxFRVQuV09SS1NQQUNFIH0sIGdpdFJlcG9zOiB7IHR5cGU6IEZMRUVULkdJVF9SRVBPLCBzY2hlbWFWYWxpZGF0b3I6IChzY2hlbWEpID0+IHNjaGVtYS5yZXNvdXJjZU1ldGhvZHMuaW5jbHVkZXMoJ1BVVCcpIH0gfSwgdGhpcy4kc3RvcmUuZ2V0dGVycyk7CgogICAgICB0aGlzLnBlcm1pc3Npb25zID0gcGVybWlzc2lvbnM7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIGNvbnNvbGUuZXJyb3IoZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBoZWFkZXJzOiBbCiAgICAgICAgewogICAgICAgICAgbmFtZTogICAgICAgICAgJ25hbWUnLAogICAgICAgICAgbGFiZWxLZXk6ICAgICAgJ3RhYmxlSGVhZGVycy5yZXBvTmFtZScsCiAgICAgICAgICB2YWx1ZTogICAgICAgICAnbmFtZURpc3BsYXknLAogICAgICAgICAgc29ydDogICAgICAgICAgWyduYW1lU29ydCddLAogICAgICAgICAgZm9ybWF0dGVyOiAgICAgJ0xpbmtEZXRhaWwnLAogICAgICAgICAgY2FuQmVWYXJpYWJsZTogdHJ1ZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICAgICAnY2x1c3RlcnNSZWFkeScsCiAgICAgICAgICBsYWJlbEtleTogJ3RhYmxlSGVhZGVycy5jbHVzdGVyc1JlYWR5JywKICAgICAgICAgIHZhbHVlOiAgICAnc3RhdHVzLnJlYWR5Q2x1c3RlcnMnLAogICAgICAgICAgc29ydDogICAgICdzdGF0dXMucmVhZHlDbHVzdGVycycsCiAgICAgICAgICBzZWFyY2g6ICAgZmFsc2UsCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAgICAgJ2J1bmRsZXNSZWFkeScsCiAgICAgICAgICBsYWJlbEtleTogJ3RhYmxlSGVhZGVycy5idW5kbGVzUmVhZHknLAogICAgICAgICAgdmFsdWU6ICAgICdzdGF0dXMucmVhZHlDbHVzdGVycycsCiAgICAgICAgICBzb3J0OiAgICAgJ3N0YXR1cy5yZWFkeUNsdXN0ZXJzJywKICAgICAgICAgIHNlYXJjaDogICBmYWxzZSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICAgICAncmVzb3VyY2VzUmVhZHknLAogICAgICAgICAgbGFiZWxLZXk6ICd0YWJsZUhlYWRlcnMucmVzb3VyY2VzUmVhZHknLAogICAgICAgICAgdmFsdWU6ICAgICdzdGF0dXMucmVzb3VyY2VDb3VudHMucmVhZHknLAogICAgICAgICAgc29ydDogICAgICdzdGF0dXMucmVzb3VyY2VDb3VudHMucmVhZHknLAogICAgICAgIH0KICAgICAgXSwKICAgICAgc2NoZW1hOiAgICAgICAgICAgICAge30sCiAgICAgIGFsbEJ1bmRsZXM6ICAgICAgICAgIFtdLAogICAgICBnaXRSZXBvczogICAgICAgICAgICBbXSwKICAgICAgZmxlZXRXb3Jrc3BhY2VzRGF0YTogW10sCiAgICAgIGlzQ29sbGFwc2VkOiAgICAgICAgIHt9LAogICAgICBwZXJtaXNzaW9uczogICAgICAgICB7fSwKICAgICAgZ2V0U3RhcnRlZExpbms6ICAgICAgewogICAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlLWNyZWF0ZScsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBwcm9kdWN0OiAgTkFNRSwKICAgICAgICAgIHJlc291cmNlOiBGTEVFVC5HSVRfUkVQTwogICAgICAgIH0sCiAgICAgIH0KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwU3RhdGUoWyd3b3Jrc3BhY2UnLCAnYWxsTmFtZXNwYWNlcyddKSwKICAgIGZsZWV0V29ya3NwYWNlcygpIHsKICAgICAgaWYgKHRoaXMuZmxlZXRXb3Jrc3BhY2VzRGF0YT8ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuZmxlZXRXb3Jrc3BhY2VzRGF0YTsKICAgICAgfQoKICAgICAgLy8gV2hlbiB1c2VyIGRvZXNuJ3QgaGF2ZSBhY2Nlc3MgdG8gdGhlIHdvcmtzcGFjZXMgZmFsbCBiYWNrIHRvIG5hbWVzcGFjZXMKCiAgICAgIHJldHVybiB0aGlzLmFsbE5hbWVzcGFjZXMuZmlsdGVyKChpdGVtKSA9PiB7CiAgICAgICAgcmV0dXJuIGl0ZW0ubWV0YWRhdGEuYW5ub3RhdGlvbnNbV09SS1NQQUNFX0FOTk9UQVRJT05dID09PSBXT1JLU1BBQ0U7CiAgICAgIH0pLm1hcCgoIG9iaiApID0+IHsKICAgICAgICBjb25zdCByZXBvcyA9IGZpbHRlckJ5KHRoaXMuZ2l0UmVwb3MsICdtZXRhZGF0YS5uYW1lc3BhY2UnLCBvYmouaWQpOwoKICAgICAgICByZXR1cm4gewogICAgICAgICAgLi4ub2JqLAogICAgICAgICAgY291bnRzOiB7CiAgICAgICAgICAgIGNsdXN0ZXJzOiAgICAgICctJywKICAgICAgICAgICAgY2x1c3Rlckdyb3VwczogJy0nLAogICAgICAgICAgICBnaXRSZXBvczogICAgICByZXBvcy5sZW5ndGgKICAgICAgICAgIH0sCiAgICAgICAgICByZXBvcywKICAgICAgICAgIG5hbWVEaXNwbGF5OiBvYmouaWQKICAgICAgICB9OwogICAgICB9KTsKICAgIH0sCiAgICB3b3Jrc3BhY2VzRGF0YSgpIHsKICAgICAgcmV0dXJuIHRoaXMuZmxlZXRXb3Jrc3BhY2VzLmZpbHRlcigod3MpID0+IHdzLnJlcG9zICYmIHdzLnJlcG9zLmxlbmd0aCk7CiAgICB9LAogICAgZW1wdHlXb3Jrc3BhY2VzKCkgewogICAgICByZXR1cm4gdGhpcy5mbGVldFdvcmtzcGFjZXMuZmlsdGVyKCh3cykgPT4gIXdzLnJlcG9zIHx8ICF3cy5yZXBvcy5sZW5ndGgpOwogICAgfSwKICAgIGFyZUFsbENhcmRzRXhwYW5kZWQoKSB7CiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmlzQ29sbGFwc2VkKS5ldmVyeSgoa2V5KSA9PiAhdGhpcy5pc0NvbGxhcHNlZFtrZXldKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNldFdvcmtzcGFjZUZpbHRlckFuZExpbmtUb0dpdFJlcG8odmFsdWUpIHsKICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCd1cGRhdGVXb3Jrc3BhY2UnLCB7IHZhbHVlLCBnZXR0ZXJzOiB0aGlzLiRzdG9yZS5nZXR0ZXJzIH0gKTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3ByZWZzL3NldCcsIHsga2V5OiBXT1JLU1BBQ0UsIHZhbHVlIH0pOwoKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1wcm9kdWN0LXJlc291cmNlJywKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgIHByb2R1Y3Q6ICBOQU1FLAogICAgICAgICAgcmVzb3VyY2U6IEZMRUVULkdJVF9SRVBPCiAgICAgICAgfSwKICAgICAgfSk7CiAgICB9LAogICAgZ2V0U3RhdHVzSW5mbyhhcmVhLCByb3cpIHsKICAgICAgLy8gY2xhc3NlcyBhcmUgZGVmaW5lZCBpbiB0aGUgdGhlbWVzIFNBU1MgZmlsZXMuLi4KICAgICAgc3dpdGNoIChhcmVhKSB7CiAgICAgIGNhc2UgJ2NsdXN0ZXJzJzoKICAgICAgICBpZiAocm93LmNsdXN0ZXJJbmZvPy5yZWFkeSA9PT0gcm93LmNsdXN0ZXJJbmZvPy50b3RhbCAmJiByb3cuY2x1c3RlckluZm8/LnJlYWR5KSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBiYWRnZUNsYXNzOiBTVEFURVNbU1RBVEVTX0VOVU0uQUNUSVZFXS5jb2xvciwKICAgICAgICAgICAgaWNvbjogICAgICAgU1RBVEVTW1NUQVRFU19FTlVNLkFDVElWRV0uY29tcG91bmRJY29uCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGJhZGdlQ2xhc3M6IGAkeyBTVEFURVNbU1RBVEVTX0VOVU0uTk9UX1JFQURZXS5jb2xvciB9IGJhZGdlLWNsYXNzLWFyZWEtY2x1c3RlcnNgLAogICAgICAgICAgaWNvbjogICAgICAgU1RBVEVTW1NUQVRFU19FTlVNLk5PVF9SRUFEWV0uY29tcG91bmRJY29uCiAgICAgICAgfTsKICAgICAgY2FzZSAnYnVuZGxlcyc6CiAgICAgICAgaWYgKHJvdy5idW5kbGVzPy5sZW5ndGggJiYgcm93LmJ1bmRsZXM/LmV2ZXJ5KChidW5kbGUpID0+IGJ1bmRsZS5zdGF0ZT8udG9Mb3dlckNhc2UoKSA9PT0gU1RBVEVTX0VOVU0uQUNUSVZFKSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYmFkZ2VDbGFzczogU1RBVEVTW1NUQVRFU19FTlVNLkFDVElWRV0uY29sb3IgPyBTVEFURVNbU1RBVEVTX0VOVU0uQUNUSVZFXS5jb2xvciA6IGAkeyBTVEFURVNbU1RBVEVTX0VOVU0uVU5LTk9XTl0uY29sb3IgfSBiZy11bm1hcHBlZC1zdGF0ZWAsCiAgICAgICAgICAgIGljb246ICAgICAgIFNUQVRFU1tTVEFURVNfRU5VTS5BQ1RJVkVdLmNvbXBvdW5kSWNvbiA/IFNUQVRFU1tTVEFURVNfRU5VTS5BQ1RJVkVdLmNvbXBvdW5kSWNvbiA6IGAkeyBTVEFURVNbU1RBVEVTX0VOVU0uVU5LTk9XTl0uY29tcG91bmRJY29uIH0gdW5tYXBwZWQtaWNvbmAKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmIChyb3cuYnVuZGxlcz8ubGVuZ3RoICYmIHJvdy5idW5kbGVzPy5zb21lKChidW5kbGUpID0+IGJ1bmRsZS5zdGF0ZT8udG9Mb3dlckNhc2UoKSA9PT0gU1RBVEVTX0VOVU0uRVJSX0FQUExJRUQpKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBiYWRnZUNsYXNzOiBTVEFURVNbU1RBVEVTX0VOVU0uRVJSX0FQUExJRURdLmNvbG9yID8gU1RBVEVTW1NUQVRFU19FTlVNLkVSUl9BUFBMSUVEXS5jb2xvciA6IGAkeyBTVEFURVNbU1RBVEVTX0VOVU0uVU5LTk9XTl0uY29sb3IgfSBiZy11bm1hcHBlZC1zdGF0ZWAsCiAgICAgICAgICAgIGljb246ICAgICAgIFNUQVRFU1tTVEFURVNfRU5VTS5FUlJfQVBQTElFRF0uY29tcG91bmRJY29uID8gU1RBVEVTW1NUQVRFU19FTlVNLkVSUl9BUFBMSUVEXS5jb21wb3VuZEljb24gOiBgJHsgU1RBVEVTW1NUQVRFU19FTlVNLlVOS05PV05dLmNvbXBvdW5kSWNvbiB9IHVubWFwcGVkLWljb25gCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBpZiAocm93LmJ1bmRsZXM/Lmxlbmd0aCAmJiByb3cuYnVuZGxlcz8uc29tZSgoYnVuZGxlKSA9PiBidW5kbGUuc3RhdGU/LnRvTG93ZXJDYXNlKCkgPT09IFNUQVRFU19FTlVNLk5PVF9SRUFEWSkpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGJhZGdlQ2xhc3M6IFNUQVRFU1tTVEFURVNfRU5VTS5OT1RfUkVBRFldLmNvbG9yID8gU1RBVEVTW1NUQVRFU19FTlVNLk5PVF9SRUFEWV0uY29sb3IgOiBgJHsgU1RBVEVTW1NUQVRFU19FTlVNLlVOS05PV05dLmNvbG9yIH0gYmctdW5tYXBwZWQtc3RhdGVgLAogICAgICAgICAgICBpY29uOiAgICAgICBTVEFURVNbU1RBVEVTX0VOVU0uTk9UX1JFQURZXS5jb21wb3VuZEljb24gPyBTVEFURVNbU1RBVEVTX0VOVU0uTk9UX1JFQURZXS5jb21wb3VuZEljb24gOiBgJHsgU1RBVEVTW1NUQVRFU19FTlVNLlVOS05PV05dLmNvbXBvdW5kSWNvbiB9IHVubWFwcGVkLWljb25gCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaWYgKHJvdy5idW5kbGVzUmVhZHk/Lmxlbmd0aCA9PT0gcm93LmJ1bmRsZXM/Lmxlbmd0aCAmJiByb3cuYnVuZGxlc1JlYWR5ICYmIHJvdy5idW5kbGVzPy5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGJhZGdlQ2xhc3M6IFNUQVRFU1tTVEFURVNfRU5VTS5BQ1RJVkVdLmNvbG9yLAogICAgICAgICAgICBpY29uOiAgICAgICBTVEFURVNbU1RBVEVTX0VOVU0uQUNUSVZFXS5jb21wb3VuZEljb24KICAgICAgICAgIH07CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gewogICAgICAgICAgYmFkZ2VDbGFzczogYCR7IFNUQVRFU1tTVEFURVNfRU5VTS5OT1RfUkVBRFldLmNvbG9yIH0gYmFkZ2UtY2xhc3MtYXJlYS1idW5kbGVzYCwKICAgICAgICAgIGljb246ICAgICAgIFNUQVRFU1tTVEFURVNfRU5VTS5OT1RfUkVBRFldLmNvbXBvdW5kSWNvbgogICAgICAgIH07CiAgICAgIGNhc2UgJ3Jlc291cmNlcyc6CiAgICAgICAgaWYgKHJvdy5zdGF0dXM/LnJlc291cmNlcz8ubGVuZ3RoICYmIHJvdy5zdGF0dXM/LnJlc291cmNlcz8uZXZlcnkoKHJlc291cmNlKSA9PiByZXNvdXJjZS5zdGF0ZT8udG9Mb3dlckNhc2UoKSA9PT0gU1RBVEVTX0VOVU0uQUNUSVZFKSkgewogICAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgYmFkZ2VDbGFzczogU1RBVEVTW1NUQVRFU19FTlVNLkFDVElWRV0uY29sb3IgPyBTVEFURVNbU1RBVEVTX0VOVU0uQUNUSVZFXS5jb2xvciA6IGAkeyBTVEFURVNbU1RBVEVTX0VOVU0uVU5LTk9XTl0uY29sb3IgfSBiZy11bm1hcHBlZC1zdGF0ZWAsCiAgICAgICAgICAgIGljb246ICAgICAgIFNUQVRFU1tTVEFURVNfRU5VTS5BQ1RJVkVdLmNvbXBvdW5kSWNvbiA/IFNUQVRFU1tTVEFURVNfRU5VTS5BQ1RJVkVdLmNvbXBvdW5kSWNvbiA6IGAkeyBTVEFURVNbU1RBVEVTX0VOVU0uVU5LTk9XTl0uY29tcG91bmRJY29uIH0gdW5tYXBwZWQtaWNvbmAKICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmIChyb3cuc3RhdHVzPy5yZXNvdXJjZXM/Lmxlbmd0aCAmJiByb3cuc3RhdHVzPy5yZXNvdXJjZXM/LnNvbWUoKHJlc291cmNlKSA9PiByZXNvdXJjZS5zdGF0ZT8udG9Mb3dlckNhc2UoKSA9PT0gU1RBVEVTX0VOVU0uRVJSX0FQUExJRUQpKSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBiYWRnZUNsYXNzOiBTVEFURVNbU1RBVEVTX0VOVU0uRVJSX0FQUExJRURdLmNvbG9yID8gU1RBVEVTW1NUQVRFU19FTlVNLkVSUl9BUFBMSUVEXS5jb2xvciA6IGAkeyBTVEFURVNbU1RBVEVTX0VOVU0uVU5LTk9XTl0uY29sb3IgfSBiZy11bm1hcHBlZC1zdGF0ZWAsCiAgICAgICAgICAgIGljb246ICAgICAgIFNUQVRFU1tTVEFURVNfRU5VTS5FUlJfQVBQTElFRF0uY29tcG91bmRJY29uID8gU1RBVEVTW1NUQVRFU19FTlVNLkVSUl9BUFBMSUVEXS5jb21wb3VuZEljb24gOiBgJHsgU1RBVEVTW1NUQVRFU19FTlVNLlVOS05PV05dLmNvbXBvdW5kSWNvbiB9IHVubWFwcGVkLWljb25gCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgICBpZiAocm93LnN0YXR1cz8ucmVzb3VyY2VzPy5sZW5ndGggJiYgcm93LnN0YXR1cz8ucmVzb3VyY2VzPy5zb21lKChyZXNvdXJjZSkgPT4gcmVzb3VyY2Uuc3RhdGU/LnRvTG93ZXJDYXNlKCkgPT09IFNUQVRFU19FTlVNLk5PVF9SRUFEWSkpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGJhZGdlQ2xhc3M6IFNUQVRFU1tTVEFURVNfRU5VTS5OT1RfUkVBRFldLmNvbG9yID8gU1RBVEVTW1NUQVRFU19FTlVNLk5PVF9SRUFEWV0uY29sb3IgOiBgJHsgU1RBVEVTW1NUQVRFU19FTlVNLlVOS05PV05dLmNvbG9yIH0gYmctdW5tYXBwZWQtc3RhdGVgLAogICAgICAgICAgICBpY29uOiAgICAgICBTVEFURVNbU1RBVEVTX0VOVU0uTk9UX1JFQURZXS5jb21wb3VuZEljb24gPyBTVEFURVNbU1RBVEVTX0VOVU0uTk9UX1JFQURZXS5jb21wb3VuZEljb24gOiBgJHsgU1RBVEVTW1NUQVRFU19FTlVNLlVOS05PV05dLmNvbXBvdW5kSWNvbiB9IHVubWFwcGVkLWljb25gCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgaWYgKHJvdy5zdGF0dXM/LnJlc291cmNlQ291bnRzPy5kZXNpcmVkUmVhZHkgPT09IHJvdy5zdGF0dXM/LnJlc291cmNlQ291bnRzPy5yZWFkeSAmJiByb3cuc3RhdHVzPy5yZXNvdXJjZUNvdW50cz8uZGVzaXJlZFJlYWR5KSB7CiAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICBiYWRnZUNsYXNzOiBTVEFURVNbU1RBVEVTX0VOVU0uQUNUSVZFXS5jb2xvciwKICAgICAgICAgICAgaWNvbjogICAgICAgU1RBVEVTW1NUQVRFU19FTlVNLkFDVElWRV0uY29tcG91bmRJY29uCiAgICAgICAgICB9OwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGJhZGdlQ2xhc3M6IGAkeyBTVEFURVNbU1RBVEVTX0VOVU0uTk9UX1JFQURZXS5jb2xvciB9IGJhZGdlLWNsYXNzLWFyZWEtcmVzb3VyY2VzYCwKICAgICAgICAgIGljb246ICAgICAgIFNUQVRFU1tTVEFURVNfRU5VTS5OT1RfUkVBRFldLmNvbXBvdW5kSWNvbgogICAgICAgIH07CiAgICAgIGRlZmF1bHQ6CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGJhZGdlQ2xhc3M6IGAkeyBTVEFURVNbU1RBVEVTX0VOVU0uTk9UX1JFQURZXS5jb2xvciB9IGJhZGdlLWNsYXNzLWRlZmF1bHRgLAogICAgICAgICAgaWNvbjogICAgICAgU1RBVEVTW1NUQVRFU19FTlVNLk5PVF9SRUFEWV0uY29tcG91bmRJY29uCiAgICAgICAgfTsKICAgICAgfQogICAgfSwKICAgIGdldFRvb2x0aXBJbmZvKGFyZWEsIHJvdykgewogICAgICBzd2l0Y2ggKGFyZWEpIHsKICAgICAgY2FzZSAnY2x1c3RlcnMnOgogICAgICAgIGlmIChyb3cuY2x1c3RlckluZm8/LnRvdGFsKSB7CiAgICAgICAgICByZXR1cm4gYFJlYWR5OiAkeyByb3cuY2x1c3RlckluZm8/LnJlYWR5IH08YnI+VG90YWw6ICR7IHJvdy5jbHVzdGVySW5mbz8udG90YWwgfWA7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gJyc7CiAgICAgIGNhc2UgJ2J1bmRsZXMnOgogICAgICAgIGlmIChyb3cuYnVuZGxlcz8ubGVuZ3RoKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5nZW5lcmF0ZVRvb2x0aXBEYXRhKHJvdy5idW5kbGVzKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAnJzsKICAgICAgY2FzZSAncmVzb3VyY2VzJzoKICAgICAgICBpZiAocm93LnN0YXR1cz8ucmVzb3VyY2VzPy5sZW5ndGgpIHsKICAgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRlVG9vbHRpcERhdGEocm93LnN0YXR1cz8ucmVzb3VyY2VzKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiAnJzsKICAgICAgZGVmYXVsdDoKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0sCiAgICBnZW5lcmF0ZVRvb2x0aXBEYXRhKGRhdGEpIHsKICAgICAgY29uc3QgaW5mb09iaiA9IHt9OwogICAgICBsZXQgdG9vbHRpcERhdGEgPSAnJzsKCiAgICAgIGRhdGEuZm9yRWFjaCgoaXRlbSkgPT4gewogICAgICAgIGlmICghaW5mb09ialtpdGVtLnN0YXRlXSkgewogICAgICAgICAgaW5mb09ialtpdGVtLnN0YXRlXSA9IDA7CiAgICAgICAgfQoKICAgICAgICBpbmZvT2JqW2l0ZW0uc3RhdGVdKys7CiAgICAgIH0pOwoKICAgICAgT2JqZWN0LmtleXMoaW5mb09iaikuZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgICAgdG9vbHRpcERhdGEgKz0gYCR7IGdldFN0YXRlTGFiZWwoa2V5KSB9OiAkeyBpbmZvT2JqW2tleV0gfTxicj5gOwogICAgICB9KTsKCiAgICAgIHJldHVybiB0b29sdGlwRGF0YTsKICAgIH0sCiAgICB0b2dnbGVDb2xsYXBzZSh2YWwsIGtleSkgewogICAgICB0aGlzLiRzZXQodGhpcy5pc0NvbGxhcHNlZCwga2V5LCB2YWwpOwogICAgfSwKICAgIHRvZ2dsZUFsbChhY3Rpb24pIHsKICAgICAgY29uc3QgdmFsID0gYWN0aW9uICE9PSAnZXhwYW5kJzsKCiAgICAgIE9iamVjdC5rZXlzKHRoaXMuaXNDb2xsYXBzZWQpLmZvckVhY2goKGtleSkgPT4gewogICAgICAgIHRoaXMuJHNldCh0aGlzLmlzQ29sbGFwc2VkLCBrZXksIHZhbCk7CiAgICAgIH0pOwogICAgfQogIH0sCgogIHdhdGNoOiB7CiAgICBmbGVldFdvcmtzcGFjZXModmFsdWUpIHsKICAgICAgdmFsdWU/LmZpbHRlcigod3MpID0+IHdzLnJlcG9zPy5sZW5ndGgpLmZvckVhY2goKHdzKSA9PiB7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMuaXNDb2xsYXBzZWQsIHdzLmlkLCBmYWxzZSk7CiAgICAgIH0pOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/fleet","sourcesContent":["<script>\nimport { mapState } from 'vuex';\nimport { FLEET } from '@shell/config/types';\nimport { WORKSPACE } from '@shell/store/prefs';\nimport { STATES_ENUM, STATES, getStateLabel } from '@shell/plugins/dashboard-store/resource-class';\nimport Loading from '@shell/components/Loading';\nimport CollapsibleCard from '@shell/components/CollapsibleCard.vue';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport CompoundStatusBadge from '@shell/components/CompoundStatusBadge';\nimport { checkPermissions, checkSchemasForFindAllHash } from '@shell/utils/auth';\nimport { WORKSPACE_ANNOTATION } from '@shell/config/labels-annotations';\nimport { filterBy } from '@shell/utils/array';\nimport FleetNoWorkspaces from '@shell/components/fleet/FleetNoWorkspaces.vue';\nimport { NAME } from '@shell/config/product/fleet';\n\nexport default {\n  name:       'ListGitRepo',\n  components: {\n    Loading,\n    ResourceTable,\n    CollapsibleCard,\n    CompoundStatusBadge,\n    FleetNoWorkspaces\n  },\n\n  async fetch() {\n    const hash = await checkSchemasForFindAllHash({\n      fleetWorkspaces: {\n        inStoreType:     'management',\n        type:            FLEET.WORKSPACE,\n        schemaValidator: (schema) => {\n          return !!schema?.links?.collection;\n        }\n      },\n      allBundles: {\n        inStoreType: 'management',\n        type:        FLEET.BUNDLE,\n      },\n      gitRepos: {\n        inStoreType: 'management',\n        type:        FLEET.GIT_REPO,\n      }\n    }, this.$store);\n\n    this.gitRepos = hash.gitRepos;\n    this.fleetWorkspacesData = hash.fleetWorkspaces || [];\n\n    try {\n      const permissions = await checkPermissions({ workspaces: { type: FLEET.WORKSPACE }, gitRepos: { type: FLEET.GIT_REPO, schemaValidator: (schema) => schema.resourceMethods.includes('PUT') } }, this.$store.getters);\n\n      this.permissions = permissions;\n    } catch (e) {\n      console.error(e); // eslint-disable-line no-console\n    }\n  },\n\n  data() {\n    return {\n      headers: [\n        {\n          name:          'name',\n          labelKey:      'tableHeaders.repoName',\n          value:         'nameDisplay',\n          sort:          ['nameSort'],\n          formatter:     'LinkDetail',\n          canBeVariable: true,\n        },\n        {\n          name:     'clustersReady',\n          labelKey: 'tableHeaders.clustersReady',\n          value:    'status.readyClusters',\n          sort:     'status.readyClusters',\n          search:   false,\n        },\n        {\n          name:     'bundlesReady',\n          labelKey: 'tableHeaders.bundlesReady',\n          value:    'status.readyClusters',\n          sort:     'status.readyClusters',\n          search:   false,\n        },\n        {\n          name:     'resourcesReady',\n          labelKey: 'tableHeaders.resourcesReady',\n          value:    'status.resourceCounts.ready',\n          sort:     'status.resourceCounts.ready',\n        }\n      ],\n      schema:              {},\n      allBundles:          [],\n      gitRepos:            [],\n      fleetWorkspacesData: [],\n      isCollapsed:         {},\n      permissions:         {},\n      getStartedLink:      {\n        name:   'c-cluster-product-resource-create',\n        params: {\n          product:  NAME,\n          resource: FLEET.GIT_REPO\n        },\n      }\n    };\n  },\n  computed: {\n    ...mapState(['workspace', 'allNamespaces']),\n    fleetWorkspaces() {\n      if (this.fleetWorkspacesData?.length) {\n        return this.fleetWorkspacesData;\n      }\n\n      // When user doesn't have access to the workspaces fall back to namespaces\n\n      return this.allNamespaces.filter((item) => {\n        return item.metadata.annotations[WORKSPACE_ANNOTATION] === WORKSPACE;\n      }).map(( obj ) => {\n        const repos = filterBy(this.gitRepos, 'metadata.namespace', obj.id);\n\n        return {\n          ...obj,\n          counts: {\n            clusters:      '-',\n            clusterGroups: '-',\n            gitRepos:      repos.length\n          },\n          repos,\n          nameDisplay: obj.id\n        };\n      });\n    },\n    workspacesData() {\n      return this.fleetWorkspaces.filter((ws) => ws.repos && ws.repos.length);\n    },\n    emptyWorkspaces() {\n      return this.fleetWorkspaces.filter((ws) => !ws.repos || !ws.repos.length);\n    },\n    areAllCardsExpanded() {\n      return Object.keys(this.isCollapsed).every((key) => !this.isCollapsed[key]);\n    }\n  },\n  methods: {\n    setWorkspaceFilterAndLinkToGitRepo(value) {\n      this.$store.commit('updateWorkspace', { value, getters: this.$store.getters } );\n      this.$store.dispatch('prefs/set', { key: WORKSPACE, value });\n\n      this.$router.push({\n        name:   'c-cluster-product-resource',\n        params: {\n          product:  NAME,\n          resource: FLEET.GIT_REPO\n        },\n      });\n    },\n    getStatusInfo(area, row) {\n      // classes are defined in the themes SASS files...\n      switch (area) {\n      case 'clusters':\n        if (row.clusterInfo?.ready === row.clusterInfo?.total && row.clusterInfo?.ready) {\n          return {\n            badgeClass: STATES[STATES_ENUM.ACTIVE].color,\n            icon:       STATES[STATES_ENUM.ACTIVE].compoundIcon\n          };\n        }\n\n        return {\n          badgeClass: `${ STATES[STATES_ENUM.NOT_READY].color } badge-class-area-clusters`,\n          icon:       STATES[STATES_ENUM.NOT_READY].compoundIcon\n        };\n      case 'bundles':\n        if (row.bundles?.length && row.bundles?.every((bundle) => bundle.state?.toLowerCase() === STATES_ENUM.ACTIVE)) {\n          return {\n            badgeClass: STATES[STATES_ENUM.ACTIVE].color ? STATES[STATES_ENUM.ACTIVE].color : `${ STATES[STATES_ENUM.UNKNOWN].color } bg-unmapped-state`,\n            icon:       STATES[STATES_ENUM.ACTIVE].compoundIcon ? STATES[STATES_ENUM.ACTIVE].compoundIcon : `${ STATES[STATES_ENUM.UNKNOWN].compoundIcon } unmapped-icon`\n          };\n        }\n        if (row.bundles?.length && row.bundles?.some((bundle) => bundle.state?.toLowerCase() === STATES_ENUM.ERR_APPLIED)) {\n          return {\n            badgeClass: STATES[STATES_ENUM.ERR_APPLIED].color ? STATES[STATES_ENUM.ERR_APPLIED].color : `${ STATES[STATES_ENUM.UNKNOWN].color } bg-unmapped-state`,\n            icon:       STATES[STATES_ENUM.ERR_APPLIED].compoundIcon ? STATES[STATES_ENUM.ERR_APPLIED].compoundIcon : `${ STATES[STATES_ENUM.UNKNOWN].compoundIcon } unmapped-icon`\n          };\n        }\n        if (row.bundles?.length && row.bundles?.some((bundle) => bundle.state?.toLowerCase() === STATES_ENUM.NOT_READY)) {\n          return {\n            badgeClass: STATES[STATES_ENUM.NOT_READY].color ? STATES[STATES_ENUM.NOT_READY].color : `${ STATES[STATES_ENUM.UNKNOWN].color } bg-unmapped-state`,\n            icon:       STATES[STATES_ENUM.NOT_READY].compoundIcon ? STATES[STATES_ENUM.NOT_READY].compoundIcon : `${ STATES[STATES_ENUM.UNKNOWN].compoundIcon } unmapped-icon`\n          };\n        }\n\n        if (row.bundlesReady?.length === row.bundles?.length && row.bundlesReady && row.bundles?.length) {\n          return {\n            badgeClass: STATES[STATES_ENUM.ACTIVE].color,\n            icon:       STATES[STATES_ENUM.ACTIVE].compoundIcon\n          };\n        }\n\n        return {\n          badgeClass: `${ STATES[STATES_ENUM.NOT_READY].color } badge-class-area-bundles`,\n          icon:       STATES[STATES_ENUM.NOT_READY].compoundIcon\n        };\n      case 'resources':\n        if (row.status?.resources?.length && row.status?.resources?.every((resource) => resource.state?.toLowerCase() === STATES_ENUM.ACTIVE)) {\n          return {\n            badgeClass: STATES[STATES_ENUM.ACTIVE].color ? STATES[STATES_ENUM.ACTIVE].color : `${ STATES[STATES_ENUM.UNKNOWN].color } bg-unmapped-state`,\n            icon:       STATES[STATES_ENUM.ACTIVE].compoundIcon ? STATES[STATES_ENUM.ACTIVE].compoundIcon : `${ STATES[STATES_ENUM.UNKNOWN].compoundIcon } unmapped-icon`\n          };\n        }\n        if (row.status?.resources?.length && row.status?.resources?.some((resource) => resource.state?.toLowerCase() === STATES_ENUM.ERR_APPLIED)) {\n          return {\n            badgeClass: STATES[STATES_ENUM.ERR_APPLIED].color ? STATES[STATES_ENUM.ERR_APPLIED].color : `${ STATES[STATES_ENUM.UNKNOWN].color } bg-unmapped-state`,\n            icon:       STATES[STATES_ENUM.ERR_APPLIED].compoundIcon ? STATES[STATES_ENUM.ERR_APPLIED].compoundIcon : `${ STATES[STATES_ENUM.UNKNOWN].compoundIcon } unmapped-icon`\n          };\n        }\n        if (row.status?.resources?.length && row.status?.resources?.some((resource) => resource.state?.toLowerCase() === STATES_ENUM.NOT_READY)) {\n          return {\n            badgeClass: STATES[STATES_ENUM.NOT_READY].color ? STATES[STATES_ENUM.NOT_READY].color : `${ STATES[STATES_ENUM.UNKNOWN].color } bg-unmapped-state`,\n            icon:       STATES[STATES_ENUM.NOT_READY].compoundIcon ? STATES[STATES_ENUM.NOT_READY].compoundIcon : `${ STATES[STATES_ENUM.UNKNOWN].compoundIcon } unmapped-icon`\n          };\n        }\n\n        if (row.status?.resourceCounts?.desiredReady === row.status?.resourceCounts?.ready && row.status?.resourceCounts?.desiredReady) {\n          return {\n            badgeClass: STATES[STATES_ENUM.ACTIVE].color,\n            icon:       STATES[STATES_ENUM.ACTIVE].compoundIcon\n          };\n        }\n\n        return {\n          badgeClass: `${ STATES[STATES_ENUM.NOT_READY].color } badge-class-area-resources`,\n          icon:       STATES[STATES_ENUM.NOT_READY].compoundIcon\n        };\n      default:\n        return {\n          badgeClass: `${ STATES[STATES_ENUM.NOT_READY].color } badge-class-default`,\n          icon:       STATES[STATES_ENUM.NOT_READY].compoundIcon\n        };\n      }\n    },\n    getTooltipInfo(area, row) {\n      switch (area) {\n      case 'clusters':\n        if (row.clusterInfo?.total) {\n          return `Ready: ${ row.clusterInfo?.ready }<br>Total: ${ row.clusterInfo?.total }`;\n        }\n\n        return '';\n      case 'bundles':\n        if (row.bundles?.length) {\n          return this.generateTooltipData(row.bundles);\n        }\n\n        return '';\n      case 'resources':\n        if (row.status?.resources?.length) {\n          return this.generateTooltipData(row.status?.resources);\n        }\n\n        return '';\n      default:\n        return {};\n      }\n    },\n    generateTooltipData(data) {\n      const infoObj = {};\n      let tooltipData = '';\n\n      data.forEach((item) => {\n        if (!infoObj[item.state]) {\n          infoObj[item.state] = 0;\n        }\n\n        infoObj[item.state]++;\n      });\n\n      Object.keys(infoObj).forEach((key) => {\n        tooltipData += `${ getStateLabel(key) }: ${ infoObj[key] }<br>`;\n      });\n\n      return tooltipData;\n    },\n    toggleCollapse(val, key) {\n      this.$set(this.isCollapsed, key, val);\n    },\n    toggleAll(action) {\n      const val = action !== 'expand';\n\n      Object.keys(this.isCollapsed).forEach((key) => {\n        this.$set(this.isCollapsed, key, val);\n      });\n    }\n  },\n\n  watch: {\n    fleetWorkspaces(value) {\n      value?.filter((ws) => ws.repos?.length).forEach((ws) => {\n        this.$set(this.isCollapsed, ws.id, false);\n      });\n    }\n  }\n};\n</script>\n\n<template>\n  <div class=\"fleet-dashboard\">\n    <Loading v-if=\"$fetchState.pending\" />\n    <!-- no git repos -->\n    <FleetNoWorkspaces\n      v-else-if=\"!fleetWorkspacesData.length\"\n      :can-view=\"permissions.workspaces\"\n    />\n    <div\n      v-else-if=\"!gitRepos.length\"\n      class=\"fleet-empty-dashboard\"\n    >\n      <i class=\"icon-fleet mb-30\" />\n      <h1>{{ t('fleet.dashboard.welcome') }}</h1>\n      <p class=\"mb-30\">\n        <span>{{ t('fleet.dashboard.gitOpsScale') }}</span>\n        <a\n          :href=\"t('fleet.dashboard.learnMoreLink')\"\n          target=\"_blank\"\n          rel=\"noopener noreferrer nofollow\"\n        >\n          {{ t('fleet.dashboard.learnMore') }} <i class=\"icon icon-external-link\" />\n        </a>\n      </p>\n      <template v-if=\"permissions.gitRepos\">\n        <h3 class=\"mb-30\">\n          {{ t('fleet.dashboard.noRepo', null, true) }}\n        </h3>\n        <n-link\n          :to=\"getStartedLink\"\n          class=\"btn role-secondary\"\n        >\n          {{ t('fleet.dashboard.getStarted') }}\n        </n-link>\n      </template>\n    </div>\n    <!-- fleet dashboard with repos -->\n    <div\n      v-else\n      class=\"fleet-dashboard-data\"\n    >\n      <div class=\"title\">\n        <h1>\n          <t k=\"fleet.dashboard.pageTitle\" />\n        </h1>\n        <div>\n          <p\n            v-if=\"areAllCardsExpanded\"\n            @click=\"toggleAll('collapse')\"\n          >\n            {{ t('fleet.dashboard.collapseAll') }}\n          </p>\n          <p\n            v-else\n            @click=\"toggleAll('expand')\"\n          >\n            {{ t('fleet.dashboard.expandAll') }}\n          </p>\n        </div>\n      </div>\n      <div\n        v-if=\"emptyWorkspaces.length\"\n        class=\"title-footnote\"\n      >\n        <p>{{ t('fleet.dashboard.thereIsMore', { count: emptyWorkspaces.length }) }}:&nbsp;</p>\n        <p\n          v-for=\"(ews, i) in emptyWorkspaces\"\n          :key=\"i\"\n        >\n          {{ ews.nameDisplay }}<span v-if=\"i != (emptyWorkspaces.length - 1)\">,&nbsp;</span>\n        </p>\n      </div>\n      <CollapsibleCard\n        v-for=\"ws in workspacesData\"\n        :key=\"ws.id\"\n        class=\"mt-20 mb-40\"\n        :title=\"`${t('resourceDetail.masthead.workspace')}: ${ws.nameDisplay}`\"\n        :is-collapsed=\"isCollapsed[ws.id]\"\n        :is-title-clickable=\"true\"\n        :data-testid=\"`collapsible-card-${ ws.id }`\"\n        @toggleCollapse=\"toggleCollapse($event, ws.id)\"\n        @titleClick=\"setWorkspaceFilterAndLinkToGitRepo(ws.id)\"\n      >\n        <template v-slot:header-right>\n          <div class=\"header-icons\">\n            <p>\n              <i class=\"icon icon-repository\" />\n              <span>{{ t('tableHeaders.repositories') }}: <span>{{ ws.counts.gitRepos }}</span></span>\n            </p>\n            <p>\n              <i class=\"icon icon-storage\" />\n              <span>{{ t('tableHeaders.clusters') }}: <span>{{ ws.counts.clusters }}</span></span>\n            </p>\n            <p>\n              <i class=\"icon icon-folder\" />\n              <span>{{ t('tableHeaders.clusterGroups') }}: <span>{{ ws.counts.clusterGroups }}</span></span>\n            </p>\n          </div>\n        </template>\n        <template v-slot:content>\n          <ResourceTable\n            v-bind=\"$attrs\"\n            :schema=\"schema\"\n            :headers=\"headers\"\n            :rows=\"ws.repos\"\n            key-field=\"_key\"\n            :search=\"false\"\n            :table-actions=\"false\"\n            v-on=\"$listeners\"\n          >\n            <template #cell:clustersReady=\"{row}\">\n              <span v-if=\"ws.type === 'namespace'\"> - </span>\n              <CompoundStatusBadge\n                v-else\n                data-testid=\"clusters-ready\"\n                :tooltip-text=\"getTooltipInfo('clusters', row)\"\n                :badge-class=\"getStatusInfo('clusters', row).badgeClass\"\n                :icon=\"getStatusInfo('clusters', row).icon\"\n                :value=\"`${ row.clusterInfo.ready }/${ row.clusterInfo.total }`\"\n              />\n            </template>\n            <template #cell:bundlesReady=\"{row}\">\n              <span v-if=\"ws.type === 'namespace'\"> - </span>\n              <CompoundStatusBadge\n                v-else\n                data-testid=\"bundles-ready\"\n                :tooltip-text=\"getTooltipInfo('bundles', row)\"\n                :badge-class=\"getStatusInfo('bundles', row).badgeClass\"\n                :icon=\"getStatusInfo('bundles', row).icon\"\n                :value=\"`${ row.bundlesReady.length || 0 }/${ row.bundles.length }`\"\n              />\n            </template>\n            <template #cell:resourcesReady=\"{row}\">\n              <CompoundStatusBadge\n                data-testid=\"resources-ready\"\n                :tooltip-text=\"getTooltipInfo('resources', row)\"\n                :badge-class=\"getStatusInfo('resources', row).badgeClass\"\n                :icon=\"getStatusInfo('resources', row).icon\"\n                :value=\"`${ row.status.resourceCounts.ready }/${ row.status.resourceCounts.desiredReady }`\"\n              />\n            </template>\n\n            <template #cell:target=\"{row}\">\n              {{ row.targetInfo.modeDisplay }}\n            </template>\n          </ResourceTable>\n        </template>\n      </CollapsibleCard>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.fleet-dashboard {\n  min-height: 100vh;\n}\n.fleet-empty-dashboard {\n  flex: 1;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  flex-direction: column;\n  min-height: 100%;\n\n  .icon-fleet {\n    font-size: 100px;\n    color: var(--disabled-text);\n  }\n\n  > p > span {\n    color: var(--disabled-text);\n  }\n}\n\n.fleet-dashboard-data {\n  .title {\n    display: flex;\n    align-items: center;\n    justify-content: space-between;\n    min-height: 48px;\n\n    > div {\n      display: flex;\n      align-items: center;\n\n      p{\n        color: var(--primary);\n\n        &:hover {\n          text-decoration: underline;\n          cursor: pointer;\n        }\n      }\n    }\n  }\n\n  .title-footnote {\n    display: flex;\n    align-items: center;\n    color: var(--darker);\n  }\n\n  .header-icons {\n    display: flex;\n    align-items: center;\n\n    p {\n      margin-right: 30px;\n      display: flex;\n      align-items: center;\n\n      > span {\n        color: var(--disabled-text);\n\n        > span {\n          color: var(--body-text);\n        }\n      }\n\n      i {\n        color: var(--disabled-text);\n        font-size: 20px;\n        margin-right: 10px;\n      }\n    }\n  }\n}\n</style>\n"]}]}