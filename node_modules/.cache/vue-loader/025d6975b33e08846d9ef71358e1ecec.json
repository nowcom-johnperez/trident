{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/monitoring.coreos.com.receiver/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/monitoring.coreos.com.receiver/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci8qKgogKiBUaGUgUm91dGUgYW5kIFJlY2VpdmVyIHJlc291cmNlcyBhcmUgZGVwcmVjYXRlZC4gR29pbmcgZm9yd2FyZCwKICogcm91dGVzIGFuZCByZWNlaXZlcnMgc2hvdWxkIGJlIGNvbmZpZ3VyZWQgd2l0aGluIEFsZXJ0bWFuYWdlckNvbmZpZ3MuCiAqIEFueSB1cGRhdGVzIHRvIHJlY2VpdmVyIGNvbmZpZ3VyYXRpb24gZm9ybXMsIHN1Y2ggYXMgU2xhY2svZW1haWwvUGFnZXJEdXR5CiAqIGV0Yywgc2hvdWxkIGJlIG1hZGUgdG8gdGhlIHJlY2VpdmVyIGZvcm1zIHRoYXQgYXJlIGJhc2VkIG9uIHRoZQogKiBBbGVydG1hbmFnZXJDb25maWcgcmVzb3VyY2UsIHdoaWNoIGhhcyBhIGRpZmZlcmVudCBBUEkuIFRoZSBuZXcgZm9ybXMgYXJlCiAqIGxvY2F0ZWQgaW4gQHNoZWxsL2VkaXQvbW9uaXRvcmluZy5jb3Jlb3MuY29tLmFsZXJ0bWFuYWdlcmNvbmZpZy90eXBlcy4KICovCmltcG9ydCB7IE1PTklUT1JJTkcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IEFycmF5TGlzdEdyb3VwZWQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9BcnJheUxpc3RHcm91cGVkJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CmltcG9ydCBDcnVSZXNvdXJjZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9DcnVSZXNvdXJjZSc7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IFRhYmJlZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9UYWJiZWQnOwppbXBvcnQgVGFiIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1RhYmJlZC9UYWInOwppbXBvcnQgWWFtbEVkaXRvciwgeyBFRElUT1JfTU9ERVMgfSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9ZYW1sRWRpdG9yJzsKaW1wb3J0IENyZWF0ZUVkaXRWaWV3IGZyb20gJ0BzaGVsbC9taXhpbnMvY3JlYXRlLWVkaXQtdmlldyc7CmltcG9ydCBqc3lhbWwgZnJvbSAnanMteWFtbCc7CmltcG9ydCB7IFJFQ0VJVkVSU19UWVBFUyB9IGZyb20gJ0BzaGVsbC9tb2RlbHMvbW9uaXRvcmluZy5jb3Jlb3MuY29tLnJlY2VpdmVyJzsKaW1wb3J0IEJ1dHRvbkRyb3Bkb3duIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0J1dHRvbkRyb3Bkb3duJzsKaW1wb3J0IHsgX0VESVQsIF9WSUVXIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEFycmF5TGlzdEdyb3VwZWQsCiAgICBCYW5uZXIsCiAgICBCdXR0b25Ecm9wZG93biwKICAgIENydVJlc291cmNlLAogICAgTGFiZWxlZElucHV0LAogICAgTG9hZGluZywKICAgIFRhYmJlZCwKICAgIFRhYiwKICAgIFlhbWxFZGl0b3IKICB9LAoKICBtaXhpbnM6IFtDcmVhdGVFZGl0Vmlld10sCgogIGFzeW5jIGZldGNoKCkgewogICAgYXdhaXQgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvZmluZEFsbCcsIHsgdHlwZTogTU9OSVRPUklORy5TUE9PRkVELlJPVVRFIH0pOwogIH0sCgogIGRhdGEoKSB7CiAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ3NwZWMnLCB0aGlzLnZhbHVlLnNwZWMgfHwge30pOwoKICAgIGlmICh0aGlzLm1vZGUgPT09IF9FRElUIHx8IHRoaXMubW9kZSA9PT0gX1ZJRVcpIHsKICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnZhbHVlLnNwZWMuZW1haWxfY29uZmlncy5sZW5ndGg7IGkrKykgewogICAgICAgIGlmICh0aGlzLnZhbHVlLnNwZWMuZW1haWxfY29uZmlnc1tpXS5zbWFydGhvc3QpIHsKICAgICAgICAgIGNvbnN0IGhvc3RQb3J0ID0gdGhpcy52YWx1ZS5zcGVjLmVtYWlsX2NvbmZpZ3NbaV0uc21hcnRob3N0LnNwbGl0KCc6Jyk7CgogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuc3BlYy5lbWFpbF9jb25maWdzW2ldLCAnaG9zdCcsIGhvc3RQb3J0WzBdIHx8ICcnKTsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLnNwZWMuZW1haWxfY29uZmlnc1tpXSwgJ3BvcnQnLCBob3N0UG9ydFsxXSB8fCAnJyk7CiAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5zcGVjLmVtYWlsX2NvbmZpZ3NbaV1bJ3NtYXJ0aG9zdCddOwogICAgICAgIH0KICAgICAgfQogICAgfQoKICAgIFJFQ0VJVkVSU19UWVBFUy5mb3JFYWNoKChyZWNlaXZlclR5cGUpID0+IHsKICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuc3BlYywgcmVjZWl2ZXJUeXBlLmtleSwgdGhpcy52YWx1ZS5zcGVjW3JlY2VpdmVyVHlwZS5rZXldIHx8IFtdKTsKICAgIH0pOwoKICAgIGNvbnN0IHNwZWNTY2hlbWEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjbHVzdGVyL3NjaGVtYUZvciddKE1PTklUT1JJTkcuU1BPT0ZFRC5SRUNFSVZFUl9TUEVDKTsKICAgIGNvbnN0IGV4cGVjdGVkRmllbGRzID0gT2JqZWN0LmtleXMoc3BlY1NjaGVtYS5yZXNvdXJjZUZpZWxkcyk7CiAgICBjb25zdCBzdWZmaXggPSB7fTsKCiAgICBPYmplY3Qua2V5cyh0aGlzLnZhbHVlLnNwZWMpLmZvckVhY2goKGtleSkgPT4gewogICAgICBpZiAoIWV4cGVjdGVkRmllbGRzLmluY2x1ZGVzKGtleSkpIHsKICAgICAgICBzdWZmaXhba2V5XSA9IHRoaXMudmFsdWUuc3BlY1trZXldOwogICAgICB9CiAgICB9KTsKCiAgICBsZXQgc3VmZml4WWFtbCA9IGpzeWFtbC5kdW1wKHN1ZmZpeCk7CgogICAgaWYgKHN1ZmZpeFlhbWwudHJpbSgpID09PSAne30nKSB7CiAgICAgIHN1ZmZpeFlhbWwgPSAnJzsKICAgIH0KCiAgICByZXR1cm4gewogICAgICBleHBlY3RlZEZpZWxkcywKICAgICAgcmVjZWl2ZXJUeXBlczogICAgICAgIFJFQ0VJVkVSU19UWVBFUywKICAgICAgZmlsZUZvdW5kOiAgICAgICAgICAgIGZhbHNlLAogICAgICByZWNlaXZlcjogICAgICAgICAgICAge30sCiAgICAgIHN1ZmZpeFlhbWwsCiAgICAgIEVESVRPUl9NT0RFUywKICAgICAgeWFtbEVycm9yOiAgICAgICAgICAgICcnLAogICAgICBkb25lTG9jYXRpb25PdmVycmlkZTogewogICAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1tb25pdG9yaW5nLXJvdXRlLXJlY2VpdmVyJywKICAgICAgICBwYXJhbXM6IHsgY2x1c3RlcjogdGhpcy4kc3RvcmUuZ2V0dGVyc1snY2x1c3RlcklkJ10gfSwKICAgICAgICBxdWVyeTogIHsgcmVzb3VyY2U6IE1PTklUT1JJTkcuU1BPT0ZFRC5SRUNFSVZFUiB9CiAgICAgIH0KICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGVkaXRvck1vZGUoKSB7CiAgICAgIGlmICggdGhpcy5pc1ZpZXcgKSB7CiAgICAgICAgcmV0dXJuIEVESVRPUl9NT0RFUy5WSUVXX0NPREU7CiAgICAgIH0KCiAgICAgIHJldHVybiBFRElUT1JfTU9ERVMuRURJVF9DT0RFOwogICAgfSwKICB9LAoKICB3YXRjaDogewogICAgc3VmZml4WWFtbCh2YWx1ZSkgewogICAgICB0cnkgewogICAgICAgIC8vIFdlIG5lZWQgdGhpcyBzdGVwIHNvIHdlIGRvbid0IGp1c3Qga2VlcCBhZGRpbmcgbmV3IGtleXMgd2hlbiBtb2RpZnlpbmcgdGhlIGN1c3RvbSBmaWVsZAogICAgICAgIE9iamVjdC5rZXlzKHRoaXMudmFsdWUuc3BlYykuZm9yRWFjaCgoa2V5KSA9PiB7CiAgICAgICAgICBpZiAoIXRoaXMuZXhwZWN0ZWRGaWVsZHMuaW5jbHVkZXMoa2V5KSkgewogICAgICAgICAgICB0aGlzLiRkZWxldGUodGhpcy52YWx1ZS5zcGVjLCBrZXkpOwogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBjb25zdCBzdWZmaXggPSBqc3lhbWwubG9hZCh2YWx1ZSk7CgogICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy52YWx1ZS5zcGVjLCBzdWZmaXgpOwogICAgICAgIHRoaXMueWFtbEVycm9yID0gJyc7CiAgICAgIH0gY2F0Y2ggKGV4KSB7CiAgICAgICAgdGhpcy55YW1sRXJyb3IgPSBgVGhlcmUgd2FzIGEgcHJvYmxlbSBwYXJzaW5nIHRoZSBDdXN0b20gQ29uZmlnOiAkeyBleCB9YDsKICAgICAgfQogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGdldENvbXBvbmVudChuYW1lKSB7CiAgICAgIHJldHVybiByZXF1aXJlKGAuL3R5cGVzLyR7IG5hbWUgfWApLmRlZmF1bHQ7CiAgICB9LAoKICAgIG5hdmlnYXRlVG8ocmVjZWl2ZXJUeXBlKSB7CiAgICAgIHRoaXMuJHJlZnMudGFiYmVkLnNlbGVjdChyZWNlaXZlclR5cGUubmFtZSk7CiAgICB9LAoKICAgIGdldENvdW50KHJlY2VpdmVyVHlwZSkgewogICAgICBjb25zdCBmb3VuZCA9IHRoaXMudmFsdWU/LnNwZWM/LltyZWNlaXZlclR5cGUua2V5XSB8fCBbXTsKCiAgICAgIHJldHVybiBmb3VuZC5sZW5ndGg7CiAgICB9LAoKICAgIHRhYkNoYW5nZWQoeyB0YWIgfSkgewogICAgICB3aW5kb3cuc2Nyb2xsVG9wID0gMDsKICAgICAgaWYgKCB0YWIubmFtZSA9PT0gJ2N1c3RvbScgKSB7CiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICAgICAgaWYgKCB0aGlzLiRyZWZzLmN1c3RvbUVkaXRvciApIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5jdXN0b21FZGl0b3JbMF0ucmVmcmVzaCgpOwogICAgICAgICAgICB0aGlzLiRyZWZzLmN1c3RvbUVkaXRvclswXS5mb2N1cygpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICB9LAoKICAgIHNhdmVPdmVycmlkZShidXR0b25Eb25lKSB7CiAgICAgIGlmICh0aGlzLnlhbWxFcnJvcikgewogICAgICAgIHRoaXMuZXJyb3JzID0gdGhpcy5lcnJvcnMgfHwgW107CiAgICAgICAgdGhpcy5lcnJvcnMucHVzaCh0aGlzLnlhbWxFcnJvcik7CiAgICAgICAgYnV0dG9uRG9uZShmYWxzZSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zYXZlKC4uLmFyZ3VtZW50cyk7CiAgICAgIH0KICAgIH0sCgogICAgY3JlYXRlQWRkT3B0aW9ucyhyZWNlaXZlclR5cGUpIHsKICAgICAgcmV0dXJuIHJlY2VpdmVyVHlwZS5hZGRPcHRpb25zLm1hcCgpOwogICAgfSwKCiAgICBjcmVhdGVTbWFydGhvc3QoKSB7CiAgICAgIGlmICh0aGlzLnZhbHVlLnNwZWMuZW1haWxfY29uZmlncy5sZW5ndGggPiAwKSB7CiAgICAgICAgdGhpcy52YWx1ZS5zcGVjLmVtYWlsX2NvbmZpZ3MuZm9yRWFjaCgoZW1haWwpID0+IHsKICAgICAgICAgIGlmIChlbWFpbFsncG9ydCddIHx8IGVtYWlsWydob3N0J10pIHsKICAgICAgICAgICAgY29uc3QgaG9zdFZhbHVlID0gZW1haWwuaG9zdCA/IGAkeyBlbWFpbC5ob3N0IH1gIDogJyc7CgogICAgICAgICAgICBlbWFpbC5zbWFydGhvc3QgPSBlbWFpbC5wb3J0ID8gYCR7IGhvc3RWYWx1ZSB9OiR7IGVtYWlsLnBvcnQgfWAgOiBgJHsgaG9zdFZhbHVlIH1gOwogICAgICAgICAgICBkZWxldGUgZW1haWxbJ3BvcnQnXTsKICAgICAgICAgICAgZGVsZXRlIGVtYWlsWydob3N0J107CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9LAoKICBjcmVhdGVkKCkgewogICAgdGhpcy5yZWdpc3RlckJlZm9yZUhvb2sodGhpcy5jcmVhdGVTbWFydGhvc3QsICdjcmVhdGUtc21hcnRob3N0Jyk7CiAgfSwKfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/edit/monitoring.coreos.com.receiver","sourcesContent":["<script>\n/**\n * The Route and Receiver resources are deprecated. Going forward,\n * routes and receivers should be configured within AlertmanagerConfigs.\n * Any updates to receiver configuration forms, such as Slack/email/PagerDuty\n * etc, should be made to the receiver forms that are based on the\n * AlertmanagerConfig resource, which has a different API. The new forms are\n * located in @shell/edit/monitoring.coreos.com.alertmanagerconfig/types.\n */\nimport { MONITORING } from '@shell/config/types';\nimport ArrayListGrouped from '@shell/components/form/ArrayListGrouped';\nimport Loading from '@shell/components/Loading';\nimport { Banner } from '@components/Banner';\nimport CruResource from '@shell/components/CruResource';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport Tabbed from '@shell/components/Tabbed';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport jsyaml from 'js-yaml';\nimport { RECEIVERS_TYPES } from '@shell/models/monitoring.coreos.com.receiver';\nimport ButtonDropdown from '@shell/components/ButtonDropdown';\nimport { _EDIT, _VIEW } from '@shell/config/query-params';\n\nexport default {\n  components: {\n    ArrayListGrouped,\n    Banner,\n    ButtonDropdown,\n    CruResource,\n    LabeledInput,\n    Loading,\n    Tabbed,\n    Tab,\n    YamlEditor\n  },\n\n  mixins: [CreateEditView],\n\n  async fetch() {\n    await this.$store.dispatch('cluster/findAll', { type: MONITORING.SPOOFED.ROUTE });\n  },\n\n  data() {\n    this.$set(this.value, 'spec', this.value.spec || {});\n\n    if (this.mode === _EDIT || this.mode === _VIEW) {\n      for (let i = 0; i < this.value.spec.email_configs.length; i++) {\n        if (this.value.spec.email_configs[i].smarthost) {\n          const hostPort = this.value.spec.email_configs[i].smarthost.split(':');\n\n          this.$set(this.value.spec.email_configs[i], 'host', hostPort[0] || '');\n          this.$set(this.value.spec.email_configs[i], 'port', hostPort[1] || '');\n          delete this.value.spec.email_configs[i]['smarthost'];\n        }\n      }\n    }\n\n    RECEIVERS_TYPES.forEach((receiverType) => {\n      this.$set(this.value.spec, receiverType.key, this.value.spec[receiverType.key] || []);\n    });\n\n    const specSchema = this.$store.getters['cluster/schemaFor'](MONITORING.SPOOFED.RECEIVER_SPEC);\n    const expectedFields = Object.keys(specSchema.resourceFields);\n    const suffix = {};\n\n    Object.keys(this.value.spec).forEach((key) => {\n      if (!expectedFields.includes(key)) {\n        suffix[key] = this.value.spec[key];\n      }\n    });\n\n    let suffixYaml = jsyaml.dump(suffix);\n\n    if (suffixYaml.trim() === '{}') {\n      suffixYaml = '';\n    }\n\n    return {\n      expectedFields,\n      receiverTypes:        RECEIVERS_TYPES,\n      fileFound:            false,\n      receiver:             {},\n      suffixYaml,\n      EDITOR_MODES,\n      yamlError:            '',\n      doneLocationOverride: {\n        name:   'c-cluster-monitoring-route-receiver',\n        params: { cluster: this.$store.getters['clusterId'] },\n        query:  { resource: MONITORING.SPOOFED.RECEIVER }\n      }\n    };\n  },\n\n  computed: {\n    editorMode() {\n      if ( this.isView ) {\n        return EDITOR_MODES.VIEW_CODE;\n      }\n\n      return EDITOR_MODES.EDIT_CODE;\n    },\n  },\n\n  watch: {\n    suffixYaml(value) {\n      try {\n        // We need this step so we don't just keep adding new keys when modifying the custom field\n        Object.keys(this.value.spec).forEach((key) => {\n          if (!this.expectedFields.includes(key)) {\n            this.$delete(this.value.spec, key);\n          }\n        });\n\n        const suffix = jsyaml.load(value);\n\n        Object.assign(this.value.spec, suffix);\n        this.yamlError = '';\n      } catch (ex) {\n        this.yamlError = `There was a problem parsing the Custom Config: ${ ex }`;\n      }\n    }\n  },\n\n  methods: {\n    getComponent(name) {\n      return require(`./types/${ name }`).default;\n    },\n\n    navigateTo(receiverType) {\n      this.$refs.tabbed.select(receiverType.name);\n    },\n\n    getCount(receiverType) {\n      const found = this.value?.spec?.[receiverType.key] || [];\n\n      return found.length;\n    },\n\n    tabChanged({ tab }) {\n      window.scrollTop = 0;\n      if ( tab.name === 'custom' ) {\n        this.$nextTick(() => {\n          if ( this.$refs.customEditor ) {\n            this.$refs.customEditor[0].refresh();\n            this.$refs.customEditor[0].focus();\n          }\n        });\n      }\n    },\n\n    saveOverride(buttonDone) {\n      if (this.yamlError) {\n        this.errors = this.errors || [];\n        this.errors.push(this.yamlError);\n        buttonDone(false);\n      } else {\n        this.save(...arguments);\n      }\n    },\n\n    createAddOptions(receiverType) {\n      return receiverType.addOptions.map();\n    },\n\n    createSmarthost() {\n      if (this.value.spec.email_configs.length > 0) {\n        this.value.spec.email_configs.forEach((email) => {\n          if (email['port'] || email['host']) {\n            const hostValue = email.host ? `${ email.host }` : '';\n\n            email.smarthost = email.port ? `${ hostValue }:${ email.port }` : `${ hostValue }`;\n            delete email['port'];\n            delete email['host'];\n          }\n        });\n      }\n    }\n  },\n\n  created() {\n    this.registerBeforeHook(this.createSmarthost, 'create-smarthost');\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <CruResource\n    v-else\n    class=\"receiver\"\n    :done-route=\"doneRoute\"\n    :mode=\"mode\"\n    :resource=\"value\"\n    :subtypes=\"[]\"\n    :can-yaml=\"false\"\n    :errors=\"errors\"\n    :cancel-event=\"true\"\n    @error=\"e=>errors = e\"\n    @finish=\"saveOverride\"\n    @cancel=\"done\"\n  >\n    <div\n      v-if=\"!isView\"\n      class=\"row mb-10\"\n    >\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.spec.name\"\n          :disabled=\"!isCreate\"\n          :label=\"t('generic.name')\"\n          :mode=\"mode\"\n        />\n      </div>\n    </div>\n    <Tabbed\n      ref=\"tabbed\"\n      :side-tabs=\"true\"\n      default-tab=\"overview\"\n      @changed=\"tabChanged\"\n    >\n      <Tab\n        :label=\"t('generic.overview')\"\n        :weight=\"receiverTypes.length\"\n        name=\"overview\"\n      >\n        <div class=\"box-container create-resource-container \">\n          <div\n            v-for=\"(receiverType, i) in receiverTypes\"\n            :key=\"i\"\n            class=\"mb-10 subtype-banner\"\n            primary-color-var=\"--primary-color\"\n            @click=\"navigateTo(receiverType)\"\n          >\n            <div class=\"left\">\n              <div class=\"logo\">\n                <img :src=\"receiverType.logo\">\n              </div>\n              <h4 class=\"name ml-10\">\n                <t :k=\"receiverType.label\" />\n              </h4>\n            </div>\n            <div\n              v-if=\"receiverType.name !== 'custom'\"\n              class=\"right\"\n            >\n              {{ getCount(receiverType) }}\n            </div>\n          </div>\n        </div>\n      </Tab>\n      <Tab\n        v-for=\"(receiverType, i) in receiverTypes\"\n        :key=\"i\"\n        :label=\"t(receiverType.label)\"\n        :name=\"receiverType.name\"\n        :weight=\"receiverTypes.length - i\"\n      >\n        <YamlEditor\n          v-if=\"receiverType.name === 'custom'\"\n          ref=\"customEditor\"\n          v-model=\"suffixYaml\"\n          :scrolling=\"false\"\n          :editor-mode=\"editorMode\"\n        />\n        <div v-else>\n          <component\n            :is=\"getComponent(receiverType.banner)\"\n            v-if=\"receiverType.banner\"\n            :model=\"value.spec[receiverType.key]\"\n            :mode=\"mode\"\n          />\n          <ArrayListGrouped\n            v-model=\"value.spec[receiverType.key]\"\n            class=\"namespace-list\"\n            :mode=\"mode\"\n            :default-add-value=\"{}\"\n            :add-label=\"t('monitoringReceiver.addButton', { type: t(receiverType.label) })\"\n          >\n            <template #default=\"props\">\n              <component\n                :is=\"getComponent(receiverType.name)\"\n                :value=\"props.row.value\"\n                :mode=\"mode\"\n              />\n            </template>\n            <template\n              v-if=\"receiverType.addButton\"\n              #add\n            >\n              <component\n                :is=\"getComponent(receiverType.addButton)\"\n                :model=\"value.spec[receiverType.key]\"\n                :mode=\"mode\"\n              />\n            </template>\n          </ArrayListGrouped>\n        </div>\n      </Tab>\n    </Tabbed>\n  </CruResource>\n</template>\n\n<style lang=\"scss\">\n  .receiver {\n    $margin: 10px;\n    $logo: 60px;\n\n    .box-container {\n      display: flex;\n      justify-content: space-between;\n      flex-wrap: wrap;\n      margin: 0 -1*$margin;\n\n      .subtype-banner{\n        justify-content: space-between;\n        align-items: center;\n        flex-direction: row;\n      }\n    }\n\n    .right {\n      padding: 30px;\n      border-left: 1px solid var(--border);\n    }\n\n    .logo {\n      text-align: center;\n      width: $logo;\n      height: $logo;\n      border-radius: calc(2 * var(--border-radius));\n      overflow: hidden;\n      background-color: white;\n      display: inline-block;\n      vertical-align: middle;\n\n      img {\n        width: $logo - 4px;\n        height: $logo - 4px;\n        object-fit: contain;\n        position: relative;\n        top: 2px;\n      }\n    }\n\n    .name {\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis;\n      margin-bottom: 0;\n      display: inline-block;\n      vertical-align: middle;\n    }\n  }\n</style>\n"]}]}