{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/dialog/SaveAsRKETemplateDialog.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/dialog/SaveAsRKETemplateDialog.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBBc3luY0J1dHRvbiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Bc3luY0J1dHRvbic7CmltcG9ydCB7IENhcmQgfSBmcm9tICdAY29tcG9uZW50cy9DYXJkJzsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgeyBleGNlcHRpb25Ub0Vycm9yc0FycmF5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2Vycm9yJzsKCmNvbnN0IERFRkFVTFRfUkVWSVNJT04gPSAndjEnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIENhcmQsCiAgICBBc3luY0J1dHRvbiwKICAgIEJhbm5lciwKICAgIExhYmVsZWRJbnB1dCwKICB9LAogIHByb3BzOiB7CiAgICBjbHVzdGVyOiB7CiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7IGVycm9yczogW10sIG5hbWU6ICcnIH07CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgdGhpcy4kcmVmcy50ZW1wbGF0ZU5hbWUuZm9jdXMoKTsKICAgIH0pOwogIH0sCiAgbWV0aG9kczogewogICAgY2xvc2UoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlJyk7CiAgICB9LAoKICAgIGFzeW5jIGFwcGx5KGJ1dHRvbkRvbmUpIHsKICAgICAgdHJ5IHsKICAgICAgICBhd2FpdCB0aGlzLiRzdG9yZS5kaXNwYXRjaCgncmFuY2hlci9yZXF1ZXN0JywgewogICAgICAgICAgdXJsOiAgICBgL3YzL2NsdXN0ZXJzLyR7IGVzY2FwZSh0aGlzLmNsdXN0ZXIubmFtZSkgfT9hY3Rpb249c2F2ZUFzVGVtcGxhdGVgLAogICAgICAgICAgbWV0aG9kOiAncG9zdCcsCiAgICAgICAgICBkYXRhOiAgIHsKICAgICAgICAgICAgY2x1c3RlclRlbXBsYXRlTmFtZTogICAgICAgICB0aGlzLm5hbWUsCiAgICAgICAgICAgIGNsdXN0ZXJUZW1wbGF0ZVJldmlzaW9uTmFtZTogREVGQVVMVF9SRVZJU0lPTgogICAgICAgICAgfSwKICAgICAgICB9KTsKCiAgICAgICAgYnV0dG9uRG9uZSh0cnVlKTsKICAgICAgICB0aGlzLmNsb3NlKCk7CgogICAgICAgIC8vIFRha2UgdGhlIHVzZXIgdG8gdGhlIFJLRSBUZW1wbGF0ZXMgdmlldwogICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsKICAgICAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1tYW5hZ2VyLXBhZ2VzLXBhZ2UnLAogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIGNsdXN0ZXI6ICdsb2NhbCcsCiAgICAgICAgICAgIHBhZ2U6ICAgICdya2UtdGVtcGxhdGVzJwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICB0aGlzLmVycm9ycyA9IGV4Y2VwdGlvblRvRXJyb3JzQXJyYXkoZXJyKTsKICAgICAgICBidXR0b25Eb25lKGZhbHNlKTsKICAgICAgfQogICAgfQogIH0KfTsK"},{"version":3,"sources":["SaveAsRKETemplateDialog.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"SaveAsRKETemplateDialog.vue","sourceRoot":"node_modules/@rancher/shell/dialog","sourcesContent":["<script>\nimport AsyncButton from '@shell/components/AsyncButton';\nimport { Card } from '@components/Card';\nimport { Banner } from '@components/Banner';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { exceptionToErrorsArray } from '@shell/utils/error';\n\nconst DEFAULT_REVISION = 'v1';\n\nexport default {\n  components: {\n    Card,\n    AsyncButton,\n    Banner,\n    LabeledInput,\n  },\n  props: {\n    cluster: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n  data() {\n    return { errors: [], name: '' };\n  },\n\n  mounted() {\n    this.$nextTick(() => {\n      this.$refs.templateName.focus();\n    });\n  },\n  methods: {\n    close() {\n      this.$emit('close');\n    },\n\n    async apply(buttonDone) {\n      try {\n        await this.$store.dispatch('rancher/request', {\n          url:    `/v3/clusters/${ escape(this.cluster.name) }?action=saveAsTemplate`,\n          method: 'post',\n          data:   {\n            clusterTemplateName:         this.name,\n            clusterTemplateRevisionName: DEFAULT_REVISION\n          },\n        });\n\n        buttonDone(true);\n        this.close();\n\n        // Take the user to the RKE Templates view\n        this.$router.replace({\n          name:   'c-cluster-manager-pages-page',\n          params: {\n            cluster: 'local',\n            page:    'rke-templates'\n          }\n        });\n      } catch (err) {\n        this.errors = exceptionToErrorsArray(err);\n        buttonDone(false);\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Card\n    class=\"prompt-restore\"\n    :show-highlight-border=\"false\"\n  >\n    <h4\n      slot=\"title\"\n      v-clean-html=\"t('promptSaveAsRKETemplate.title', { cluster: cluster.displayName }, true)\"\n      class=\"text-default-text\"\n    />\n\n    <div\n      slot=\"body\"\n      class=\"pl-10 pr-10\"\n    >\n      <form>\n        <p class=\"pt-10 pb-10\">\n          {{ t('promptSaveAsRKETemplate.description') }}\n        </p>\n        <Banner\n          color=\"warning\"\n          label-key=\"promptSaveAsRKETemplate.warning\"\n        />\n\n        <LabeledInput\n          ref=\"templateName\"\n          v-model=\"name\"\n          :label=\"t('promptSaveAsRKETemplate.name')\"\n          :required=\"true\"\n        />\n      </form>\n    </div>\n\n    <div\n      slot=\"actions\"\n      class=\"buttons\"\n    >\n      <button\n        class=\"btn role-secondary mr-10\"\n        @click=\"close\"\n      >\n        {{ t('generic.cancel') }}\n      </button>\n\n      <AsyncButton\n        mode=\"create\"\n        :disabled=\"name.length <= 0\"\n        @click=\"apply\"\n      />\n\n      <Banner\n        v-for=\"(err, i) in errors\"\n        :key=\"i\"\n        color=\"error\"\n        :label=\"err\"\n      />\n    </div>\n  </Card>\n</template>\n<style lang='scss' scoped>\n  .prompt-restore {\n    margin: 0;\n  }\n  .buttons {\n    display: flex;\n    justify-content: flex-end;\n    width: 100%;\n  }\n</style>\n"]}]}