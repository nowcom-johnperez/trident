{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/AppSummaryGraph.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/AppSummaryGraph.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBQcm9ncmVzc0Jhck11bHRpIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1Byb2dyZXNzQmFyTXVsdGknOwppbXBvcnQgeyBjb2xvckZvclN0YXRlLCBzdGF0ZURpc3BsYXksIHN0YXRlU29ydCB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZS9yZXNvdXJjZS1jbGFzcyc7CmltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9zb3J0JzsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IFByb2dyZXNzQmFyTXVsdGkgfSwKCiAgcHJvcHM6IHsKICAgIHJvdzogewogICAgICB0eXBlOiAgICAgT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKCiAgICBsYWJlbEtleTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCgogICAgbGlua1RvOiB7CiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBzaG93KCkgewogICAgICByZXR1cm4gdGhpcy5zdGF0ZVBhcnRzLmxlbmd0aCA+IDA7CiAgICB9LAoKICAgIHN0YXRlUGFydHMoKSB7CiAgICAgIGNvbnN0IG91dCA9IHt9OwoKICAgICAgZm9yICggY29uc3QgciBvZiB0aGlzLnJvdy5kZXBsb3llZFJlc291cmNlcyApIHsKICAgICAgICBjb25zdCB0ZXh0Q29sb3IgPSBjb2xvckZvclN0YXRlKHIuc3RhdGUsIHIuZXJyb3IsIHIudHJhbnNpdGlvbmluZyk7CiAgICAgICAgY29uc3Qgc3RhdGUgPSBzdGF0ZURpc3BsYXkoci5zdGF0ZSk7CiAgICAgICAgY29uc3Qga2V5ID0gYCR7IHRleHRDb2xvciB9LyR7IHN0YXRlIH1gOwoKICAgICAgICBpZiAoIG91dFtrZXldICkgewogICAgICAgICAgb3V0W2tleV0udmFsdWUgKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb3V0W2tleV0gPSB7CiAgICAgICAgICAgIGtleSwKICAgICAgICAgICAgbGFiZWw6IHN0YXRlLAogICAgICAgICAgICBjb2xvcjogdGV4dENvbG9yLnJlcGxhY2UoL3RleHQtLywgJ2JnLScpLAogICAgICAgICAgICB0ZXh0Q29sb3IsCiAgICAgICAgICAgIHZhbHVlOiAxLAogICAgICAgICAgICBzb3J0OiAgc3RhdGVTb3J0KHRleHRDb2xvciwgc3RhdGUpLAogICAgICAgICAgfTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHJldHVybiBzb3J0QnkoT2JqZWN0LnZhbHVlcyhvdXQpLCAnc29ydDpkZXNjJyk7CiAgICB9LAoKICAgIGNvbG9yUGFydHMoKSB7CiAgICAgIGNvbnN0IG91dCA9IHt9OwoKICAgICAgZm9yICggY29uc3QgcCBvZiB0aGlzLnN0YXRlUGFydHMgKSB7CiAgICAgICAgaWYgKCBvdXRbcC5jb2xvcl0gKSB7CiAgICAgICAgICBvdXRbcC5jb2xvcl0udmFsdWUgKz0gMTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgb3V0W3AuY29sb3JdID0gewogICAgICAgICAgICBjb2xvcjogcC5jb2xvciwKICAgICAgICAgICAgdmFsdWU6IHAudmFsdWUsCiAgICAgICAgICAgIHNvcnQ6ICBwLnNvcnQsCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfQoKICAgICAgcmV0dXJuIHNvcnRCeShPYmplY3QudmFsdWVzKG91dCksICdzb3J0OmRlc2MnKTsKICAgIH0sCgogICAgZGlzcGxheUxhYmVsKCkgewogICAgICBjb25zdCBjb3VudCA9IHRoaXMucm93Py5kZXBsb3llZFJlc291cmNlcz8ubGVuZ3RoIHx8IDA7CgogICAgICBpZiAoIHRoaXMubGFiZWxLZXkgKSB7CiAgICAgICAgcmV0dXJuIHRoaXMudCh0aGlzLmxhYmVsS2V5LCB7IGNvdW50IH0pOwogICAgICB9CgogICAgICByZXR1cm4gYCR7IGNvdW50IH1gOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["AppSummaryGraph.vue"],"names":[],"mappings":";AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"AppSummaryGraph.vue","sourceRoot":"node_modules/@rancher/shell/components/formatter","sourcesContent":["<script>\nimport ProgressBarMulti from '@shell/components/ProgressBarMulti';\nimport { colorForState, stateDisplay, stateSort } from '@shell/plugins/dashboard-store/resource-class';\nimport { sortBy } from '@shell/utils/sort';\n\nexport default {\n  components: { ProgressBarMulti },\n\n  props: {\n    row: {\n      type:     Object,\n      required: true\n    },\n\n    labelKey: {\n      type:    String,\n      default: null\n    },\n\n    linkTo: {\n      type:    Object,\n      default: null\n    }\n  },\n\n  computed: {\n    show() {\n      return this.stateParts.length > 0;\n    },\n\n    stateParts() {\n      const out = {};\n\n      for ( const r of this.row.deployedResources ) {\n        const textColor = colorForState(r.state, r.error, r.transitioning);\n        const state = stateDisplay(r.state);\n        const key = `${ textColor }/${ state }`;\n\n        if ( out[key] ) {\n          out[key].value += 1;\n        } else {\n          out[key] = {\n            key,\n            label: state,\n            color: textColor.replace(/text-/, 'bg-'),\n            textColor,\n            value: 1,\n            sort:  stateSort(textColor, state),\n          };\n        }\n      }\n\n      return sortBy(Object.values(out), 'sort:desc');\n    },\n\n    colorParts() {\n      const out = {};\n\n      for ( const p of this.stateParts ) {\n        if ( out[p.color] ) {\n          out[p.color].value += 1;\n        } else {\n          out[p.color] = {\n            color: p.color,\n            value: p.value,\n            sort:  p.sort,\n          };\n        }\n      }\n\n      return sortBy(Object.values(out), 'sort:desc');\n    },\n\n    displayLabel() {\n      const count = this.row?.deployedResources?.length || 0;\n\n      if ( this.labelKey ) {\n        return this.t(this.labelKey, { count });\n      }\n\n      return `${ count }`;\n    }\n  },\n};\n</script>\n\n<template>\n  <v-popover\n    v-if=\"show\"\n    class=\"text-center hand\"\n    placement=\"top\"\n    :open-group=\"row.id\"\n    :trigger=\"show ? 'click' : 'manual'\"\n    offset=\"1\"\n  >\n    <ProgressBarMulti\n      :values=\"colorParts\"\n      class=\"mb-5\"\n    />\n    <n-link\n      v-if=\"linkTo\"\n      :to=\"linkTo\"\n    >\n      {{ displayLabel }}\n    </n-link>\n    <span v-else>{{ displayLabel }}</span>\n\n    <template #popover>\n      <table\n        v-if=\"show\"\n        class=\"fixed\"\n      >\n        <tbody>\n          <tr\n            v-for=\"obj in stateParts\"\n            :key=\"obj.key\"\n          >\n            <td\n              class=\"text-left pr-20\"\n              :class=\"{[obj.textColor]: true}\"\n            >\n              {{ obj.label }}\n            </td>\n            <td class=\"text-right\">\n              {{ obj.value }}\n            </td>\n          </tr>\n        </tbody>\n      </table>\n    </template>\n  </v-popover>\n  <div\n    v-else\n    class=\"text-center text-muted\"\n  >\n    &mdash;\n  </div>\n</template>\n\n<style lang=\"scss\">\n  .col-scale {\n    position: relative;\n\n    .trigger {\n      width: 100%;\n    }\n  }\n\n  .scale {\n    margin: 0;\n    padding: 0;\n    line-height: initial;\n  }\n</style>\n"]}]}