{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ExplorerMembers.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ExplorerMembers.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IE1BTkFHRU1FTlQsIE5PUk1BTiwgVklSVFVBTF9UWVBFUyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgUmVzb3VyY2VUYWJsZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9SZXNvdXJjZVRhYmxlJzsKaW1wb3J0IE1hc3RoZWFkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1Jlc291cmNlTGlzdC9NYXN0aGVhZCc7CmltcG9ydCB7IEFHRSwgUk9MRSwgU1RBVEUsIFBSSU5DSVBBTCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdGFibGUtaGVhZGVycyc7CmltcG9ydCB7IGNhblZpZXdDbHVzdGVyUGVybWlzc2lvbnNFZGl0b3IgfSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL01lbWJlcnMvQ2x1c3RlclBlcm1pc3Npb25zRWRpdG9yLnZ1ZSc7CmltcG9ydCBCYW5uZXIgZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyL0Jhbm5lci52dWUnOwppbXBvcnQgVGFiYmVkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1RhYmJlZC9pbmRleC52dWUnOwppbXBvcnQgVGFiIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1RhYmJlZC9UYWIudnVlJzsKaW1wb3J0IFNvcnRhYmxlVGFibGUgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvU29ydGFibGVUYWJsZSc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgY2FuVmlld1Byb2plY3RNZW1iZXJzaGlwRWRpdG9yIH0gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9NZW1iZXJzL1Byb2plY3RNZW1iZXJzaGlwRWRpdG9yLnZ1ZSc7CmltcG9ydCB7IGFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CgovKioKICogRXhwbG9yZXIgbWVtYmVycyBwYWdlLgogKiBSb3V0ZTogL2MvbG9jYWwvZXhwbG9yZXIvbWVtYmVycwogKi8KZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdFeHBsb3Jlck1lbWJlcnMnLAoKICBjb21wb25lbnRzOiB7CiAgICBCYW5uZXIsCiAgICBNYXN0aGVhZCwKICAgIFJlc291cmNlVGFibGUsCiAgICBUYWJiZWQsCiAgICBUYWIsCiAgICBTb3J0YWJsZVRhYmxlCiAgfSwKCiAgcHJvcHM6IHsKICAgIC8vIENsdXN0ZXIgdG9sZSB0ZW1wbGF0ZSBiaW5kaW5nIGNyZWF0ZSByb3V0ZSAtIGRlZmF1bHRzIHRvIHRoZSBleHBsb3JlciByb3V0ZQogICAgY3JlYXRlTG9jYXRpb25PdmVycmlkZTogewogICAgICB0eXBlOiAgICBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbmFtZTogICAnYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2UtY3JlYXRlJywKICAgICAgICAgIHBhcmFtczogeyByZXNvdXJjZTogTUFOQUdFTUVOVC5DTFVTVEVSX1JPTEVfVEVNUExBVEVfQklORElORyB9CiAgICAgICAgfTsKICAgICAgfQogICAgfQogIH0sCgogIGFzeW5jIGZldGNoKCkgewogICAgY29uc3QgY2x1c3RlclJvbGVUZW1wbGF0ZUJpbmRpbmdTY2hlbWEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWwogICAgICBgcmFuY2hlci9zY2hlbWFGb3JgCiAgICBdKE5PUk1BTi5DTFVTVEVSX1JPTEVfVEVNUExBVEVfQklORElORyk7CgogICAgY29uc3QgcHJvamVjdFJvbGVUZW1wbGF0ZUJpbmRpbmdTY2hlbWEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydyYW5jaGVyL3NjaGVtYUZvciddKE5PUk1BTi5QUk9KRUNUX1JPTEVfVEVNUExBVEVfQklORElORyk7CgogICAgdGhpcy4kc2V0KHRoaXMsICdub3JtYW5DbHVzdGVyUlRCU2NoZW1hJywgY2x1c3RlclJvbGVUZW1wbGF0ZUJpbmRpbmdTY2hlbWEpOwogICAgdGhpcy4kc2V0KHRoaXMsICdub3JtYW5Qcm9qZWN0UlRCU2NoZW1hJywgcHJvamVjdFJvbGVUZW1wbGF0ZUJpbmRpbmdTY2hlbWEpOwoKICAgIGlmIChjbHVzdGVyUm9sZVRlbXBsYXRlQmluZGluZ1NjaGVtYSkgewogICAgICBQcm9taXNlLmFsbChbCiAgICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goYHJhbmNoZXIvZmluZEFsbGAsIHsgdHlwZTogTk9STUFOLkNMVVNURVJfUk9MRV9URU1QTEFURV9CSU5ESU5HIH0sIHsgcm9vdDogdHJ1ZSB9KSwKICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaChgbWFuYWdlbWVudC9maW5kQWxsYCwgeyB0eXBlOiBNQU5BR0VNRU5ULkNMVVNURVJfUk9MRV9URU1QTEFURV9CSU5ESU5HIH0pCiAgICAgIF0pLnRoZW4oKFtub3JtYW5CaW5kaW5nc10pID0+IHsKICAgICAgICB0aGlzLiRzZXQodGhpcywgJ25vcm1hbkNsdXN0ZXJSb2xlVGVtcGxhdGVCaW5kaW5ncycsIG5vcm1hbkJpbmRpbmdzKTsKICAgICAgICB0aGlzLmxvYWRpbmdDbHVzdGVyQmluZGluZ3MgPSBmYWxzZTsKICAgICAgfSk7CiAgICB9CgogICAgaWYgKHByb2plY3RSb2xlVGVtcGxhdGVCaW5kaW5nU2NoZW1hKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdyYW5jaGVyL2ZpbmRBbGwnLCB7IHR5cGU6IE5PUk1BTi5QUk9KRUNUX1JPTEVfVEVNUExBVEVfQklORElORyB9LCB7IHJvb3Q6IHRydWUgfSkKICAgICAgICAudGhlbigoYmluZGluZ3MpID0+IHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLCAncHJvamVjdFJvbGVUZW1wbGF0ZUJpbmRpbmdzJywgYmluZGluZ3MpOwogICAgICAgICAgdGhpcy5sb2FkaW5nUHJvamVjdEJpbmRpbmdzID0gZmFsc2U7CiAgICAgICAgfSk7CiAgICB9CgogICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvZmluZEFsbCcsIHsgdHlwZTogTUFOQUdFTUVOVC5QUk9KRUNUIH0pCiAgICAgIC50aGVuKChwcm9qZWN0cykgPT4gdGhpcy4kc2V0KHRoaXMsICdwcm9qZWN0cycsIHByb2plY3RzKSk7CgogICAgY29uc3QgaHlkcmF0aW9uID0gewogICAgICBub3JtYW5QcmluY2lwYWxzOiAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZEFsbCcsIHsgdHlwZTogTk9STUFOLlBSSU5DSVBBTCB9KSwKICAgICAgbWdtdDogICAgICAgICAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKGBtYW5hZ2VtZW50L2ZpbmRBbGxgLCB7IHR5cGU6IE1BTkFHRU1FTlQuVVNFUiB9KSwKICAgICAgbWdtdFJvbGVUZW1wbGF0ZXM6IHRoaXMuJHN0b3JlLmRpc3BhdGNoKGBtYW5hZ2VtZW50L2ZpbmRBbGxgLCB7IHR5cGU6IE1BTkFHRU1FTlQuUk9MRV9URU1QTEFURSB9KSwKICAgIH07CgogICAgYXdhaXQgYWxsSGFzaChoeWRyYXRpb24pOwogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzY2hlbWE6IHRoaXMuJHN0b3JlLmdldHRlcnNbYG1hbmFnZW1lbnQvc2NoZW1hRm9yYF0oCiAgICAgICAgTUFOQUdFTUVOVC5DTFVTVEVSX1JPTEVfVEVNUExBVEVfQklORElORwogICAgICApLAogICAgICBoZWFkZXJzOiAgICAgICAgW1NUQVRFLCBQUklOQ0lQQUwsIFJPTEUsIEFHRV0sCiAgICAgIGNyZWF0ZUxvY2F0aW9uOiB7CiAgICAgICAgLi4udGhpcy5jcmVhdGVMb2NhdGlvbk92ZXJyaWRlLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgLi4udGhpcy5jcmVhdGVMb2NhdGlvbk92ZXJyaWRlLnBhcmFtcywKICAgICAgICAgIGNsdXN0ZXI6IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRDbHVzdGVyJ10uaWQKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJlc291cmNlOiAgICAgICAgICAgICAgICAgICAgICAgICAgTUFOQUdFTUVOVC5DTFVTVEVSX1JPTEVfVEVNUExBVEVfQklORElORywKICAgICAgbm9ybWFuQ2x1c3RlclJUQlNjaGVtYTogICAgICAgICAgICBudWxsLAogICAgICBub3JtYW5Qcm9qZWN0UlRCU2NoZW1hOiAgICAgICAgICAgIG51bGwsCiAgICAgIG5vcm1hbkNsdXN0ZXJSb2xlVGVtcGxhdGVCaW5kaW5nczogW10sCiAgICAgIHByb2plY3RSb2xlVGVtcGxhdGVCaW5kaW5nczogICAgICAgW10sCiAgICAgIHByb2plY3RzOiAgICAgICAgICAgICAgICAgICAgICAgICAgW10sCiAgICAgIFZJUlRVQUxfVFlQRVMsCiAgICAgIHByb2plY3RSb2xlVGVtcGxhdGVDb2x1bW5zOiAgICAgICAgWwogICAgICAgIFNUQVRFLAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICAgICAgJ21lbWJlcicsCiAgICAgICAgICBsYWJlS2V5OiAgICdnZW5lcmljLm5hbWUnLAogICAgICAgICAgdmFsdWU6ICAgICAncHJpbmNpcGFsSWQnLAogICAgICAgICAgZm9ybWF0dGVyOiAnUHJpbmNpcGFsJwogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgbmFtZTogICAgICdyb2xlJywKICAgICAgICAgIGxhYmVsS2V5OiAndGFibGVIZWFkZXJzLnJvbGUnLAogICAgICAgICAgdmFsdWU6ICAgICdyb2xlVGVtcGxhdGUubmFtZURpc3BsYXknCiAgICAgICAgfSwKICAgICAgXSwKICAgICAgbG9hZGluZ1Byb2plY3RCaW5kaW5nczogdHJ1ZSwKICAgICAgbG9hZGluZ0NsdXN0ZXJCaW5kaW5nczogdHJ1ZQogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyhbJ2N1cnJlbnRDbHVzdGVyJ10pLAogICAgY2x1c3RlclJvbGVUZW1wbGF0ZUJpbmRpbmdzKCkgewogICAgICByZXR1cm4gdGhpcy5ub3JtYW5DbHVzdGVyUm9sZVRlbXBsYXRlQmluZGluZ3MubWFwKChiKSA9PiBiLmNsdXN0ZXJyb2xldGVtcGxhdGViaW5kaW5nKSA7CiAgICB9LAogICAgZmlsdGVyZWRDbHVzdGVyUm9sZVRlbXBsYXRlQmluZGluZ3MoKSB7CiAgICAgIHJldHVybiB0aGlzLmNsdXN0ZXJSb2xlVGVtcGxhdGVCaW5kaW5ncy5maWx0ZXIoCiAgICAgICAgKGIpID0+IGI/LmNsdXN0ZXJOYW1lID09PSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50Q2x1c3RlciddLmlkCiAgICAgICk7CiAgICB9LAogICAgZmlsdGVyZWRQcm9qZWN0cygpIHsKICAgICAgcmV0dXJuIHRoaXMucHJvamVjdHMucmVkdWNlKChhbGwsIHApID0+IHsKICAgICAgICBpZiAocD8uc3BlYz8uY2x1c3Rlck5hbWUgPT09IHRoaXMuY3VycmVudENsdXN0ZXIuaWQpIHsKICAgICAgICAgIGFsbFtwLmlkXSA9IHA7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gYWxsOwogICAgICB9LCB7fSk7CiAgICB9LAogICAgZmlsdGVyZWRQcm9qZWN0Um9sZVRlbXBsYXRlQmluZGluZ3MoKSB7CiAgICAgIGNvbnN0IG91dCA9IHRoaXMucHJvamVjdFJvbGVUZW1wbGF0ZUJpbmRpbmdzLmZpbHRlcigocmIpID0+IHsKICAgICAgICBjb25zdCBwcm9qZWN0SWQgPSByYi5wcm9qZWN0SWQucmVwbGFjZSgnOicsICcvJyk7CgogICAgICAgIHJldHVybiAhIXRoaXMuZmlsdGVyZWRQcm9qZWN0c1twcm9qZWN0SWRdOwogICAgICB9KTsKCiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgcHJvamVjdHNXaXRob3V0Um9sZXMoKSB7CiAgICAgIGNvbnN0IGluVXNlID0gdGhpcy5maWx0ZXJlZFByb2plY3RSb2xlVGVtcGxhdGVCaW5kaW5ncy5yZWR1Y2UoKHByb2plY3RzLCBiaW5kaW5nKSA9PiB7CiAgICAgICAgY29uc3QgdGhpc1Byb2plY3RJZCA9IChiaW5kaW5nLnByb2plY3RJZCB8fCAnJykucmVwbGFjZSgnOicsICcvJyk7CgogICAgICAgIGlmICghcHJvamVjdHMuaW5jbHVkZXModGhpc1Byb2plY3RJZCkpIHsKICAgICAgICAgIHByb2plY3RzLnB1c2godGhpc1Byb2plY3RJZCk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcHJvamVjdHM7CiAgICAgIH0sIFtdKTsKCiAgICAgIHJldHVybiBPYmplY3Qua2V5cyh0aGlzLmZpbHRlcmVkUHJvamVjdHMpLnJlZHVjZSgoYWxsLCBwcm9qZWN0SWQpID0+IHsKICAgICAgICBjb25zdCBwcm9qZWN0ID0gdGhpcy5maWx0ZXJlZFByb2plY3RzW3Byb2plY3RJZF07CgogICAgICAgIGlmICggIWluVXNlLmluY2x1ZGVzKHByb2plY3RJZCkpIHsKICAgICAgICAgIGFsbC5wdXNoKHByb2plY3QpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGFsbDsKICAgICAgfSwgW10pOwogICAgfSwKCiAgICAvLyBXZSdyZSB1c2luZyB0aGlzIGJlY2F1c2Ugd2UgbmVlZCB0byBzaG93IHByb2plY3RzIGFzIGdyb3VwcyBldmVuIGlmIHRoZSBwcm9qZWN0IGRvZXNuJ3QgaGF2ZSBhbnkgcm9sZSBiaW5kaW5ncwogICAgcm93c1dpdGhGYWtlUHJvamVjdHMoKSB7CiAgICAgIGNvbnN0IGZha2VSb3dzID0gdGhpcy5wcm9qZWN0c1dpdGhvdXRSb2xlcy5tYXAoKHByb2plY3QpID0+IHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZ3JvdXBCeUxhYmVsOiAgICAgYCR7ICgncmVzb3VyY2VUYWJsZS5ncm91cExhYmVsLm5vdEluQVByb2plY3QnKSB9LSR7IHByb2plY3QuaWQgfWAsCiAgICAgICAgICBpc0Zha2U6ICAgICAgICAgICB0cnVlLAogICAgICAgICAgbWFpblJvd0tleTogICAgICAgcHJvamVjdC5pZCwKICAgICAgICAgIG5hbWVEaXNwbGF5OiAgICAgIHByb2plY3Quc3BlYz8uZGlzcGxheU5hbWUsIC8vIEVuYWJsZSBmaWx0ZXJpbmcgYnkgdGhlIHByb2plY3QgbmFtZQogICAgICAgICAgcHJvamVjdCwKICAgICAgICAgIGF2YWlsYWJsZUFjdGlvbnM6IFtdLAogICAgICAgICAgcHJvamVjdElkOiAgICAgICAgcHJvamVjdC5pZAogICAgICAgIH07CiAgICAgIH0pOwoKICAgICAgLy8gV2UgbmVlZCB0byBncm91cCBlYWNoIG9mIHRoZSBUZW1wbGF0ZVJvbGVCaW5kaW5ncyBieSB0aGUgdXNlciArIHByb2plY3QKICAgICAgY29uc3QgdXNlclJvbGVzID0gWy4uLmZha2VSb3dzLCAuLi50aGlzLmZpbHRlcmVkUHJvamVjdFJvbGVUZW1wbGF0ZUJpbmRpbmdzXS5yZWR1Y2UoKHJvd3MsIGN1cnIpID0+IHsKICAgICAgICBjb25zdCB7CiAgICAgICAgICB1c2VySWQsIGdyb3VwUHJpbmNpcGFsSWQsIHJvbGVUZW1wbGF0ZSwgcHJvamVjdElkCiAgICAgICAgfSA9IGN1cnI7CgogICAgICAgIGNvbnN0IHVzZXJPckdyb3VwID0gdXNlcklkIHx8IGdyb3VwUHJpbmNpcGFsSWQ7CgogICAgICAgIGlmICghdXNlck9yR3JvdXApIHsKICAgICAgICAgIHJldHVybiByb3dzOwogICAgICAgIH0KCiAgICAgICAgY29uc3QgdXNlck9yR3JvdXBLZXkgPSB1c2VyT3JHcm91cCArIHByb2plY3RJZDsKCiAgICAgICAgaWYgKCFyb3dzW3VzZXJPckdyb3VwS2V5XSApIHsKICAgICAgICAgIHJvd3NbdXNlck9yR3JvdXBLZXldID0gY3VycjsKICAgICAgICAgIHJvd3NbdXNlck9yR3JvdXBLZXldLmFsbFJvbGVzID0gW107CiAgICAgICAgfQoKICAgICAgICBpZiAocm9sZVRlbXBsYXRlKSB7CiAgICAgICAgICByb3dzW3VzZXJPckdyb3VwS2V5XS5hbGxSb2xlcy5wdXNoKGN1cnIucm9sZVRlbXBsYXRlKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByb3dzOwogICAgICB9LCB7fSk7CgogICAgICByZXR1cm4gT2JqZWN0LnZhbHVlcyh1c2VyUm9sZXMpOwogICAgfSwKICAgIGNhbk1hbmFnZU1lbWJlcnMoKSB7CiAgICAgIHJldHVybiBjYW5WaWV3Q2x1c3RlclBlcm1pc3Npb25zRWRpdG9yKHRoaXMuJHN0b3JlKTsKICAgIH0sCiAgICBjYW5NYW5hZ2VQcm9qZWN0TWVtYmVycygpIHsKICAgICAgcmV0dXJuIGNhblZpZXdQcm9qZWN0TWVtYmVyc2hpcEVkaXRvcih0aGlzLiRzdG9yZSk7CiAgICB9LAogICAgaXNMb2NhbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRDbHVzdGVyJ10uaXNMb2NhbDsKICAgIH0sCiAgICBjYW5FZGl0UHJvamVjdE1lbWJlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLm5vcm1hblByb2plY3RSVEJTY2hlbWE/LmNvbGxlY3Rpb25NZXRob2RzLmZpbmQoKHgpID0+IHgudG9Mb3dlckNhc2UoKSA9PT0gJ3Bvc3QnKTsKICAgIH0sCiAgICBjYW5FZGl0Q2x1c3Rlck1lbWJlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLm5vcm1hbkNsdXN0ZXJSVEJTY2hlbWE/LmNvbGxlY3Rpb25NZXRob2RzLmZpbmQoKHgpID0+IHgudG9Mb3dlckNhc2UoKSA9PT0gJ3Bvc3QnKTsKICAgIH0sCiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRNZ210UHJvamVjdElkKGdyb3VwKSB7CiAgICAgIHJldHVybiBncm91cC5ncm91cC5rZXkucmVwbGFjZSgnOicsICcvJyk7CiAgICB9LAogICAgZ2V0TWdtdFByb2plY3QoZ3JvdXApIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYnlJZCddKE1BTkFHRU1FTlQuUFJPSkVDVCwgdGhpcy5nZXRNZ210UHJvamVjdElkKGdyb3VwKSk7CiAgICB9LAogICAgZ2V0UHJvamVjdExhYmVsKGdyb3VwKSB7CiAgICAgIHJldHVybiB0aGlzLmdldE1nbXRQcm9qZWN0KGdyb3VwKT8uc3BlYz8uZGlzcGxheU5hbWU7CiAgICB9LAogICAgYWRkUHJvamVjdE1lbWJlcihncm91cCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9wcm9tcHRNb2RhbCcsIHsKICAgICAgICBjb21wb25lbnQ6ICAgICAgJ0FkZFByb2plY3RNZW1iZXJEaWFsb2cnLAogICAgICAgIGNvbXBvbmVudFByb3BzOiB7CiAgICAgICAgICBwcm9qZWN0SWQ6ICAgZ3JvdXAuZ3JvdXAua2V5LnJlcGxhY2UoJy8nLCAnOicpLAogICAgICAgICAgc2F2ZUluTW9kYWw6IHRydWUKICAgICAgICB9LAogICAgICAgIG1vZGFsU3RpY2t5OiB0cnVlCiAgICAgIH0pOwogICAgfSwKCiAgICBnZXRQcm9qZWN0Um9sZUJpbmRpbmcocm93LCByb2xlKSB7CiAgICAgIC8vIEVhY2ggcm93IGlzIGEgY29tYmluYXRpb24gb2YgcHJvamVjdCwgcm9sZSBhbmQgdXNlci9ncm91cAogICAgICAvLyBTbyBmaW5kIHRoZSBzcGVjZmljIHJvbGVCaW5kaW5nVGVtcGxhdGUgY29ycmVzcG9uZGluZyB0byB0aGUgc3BlY2lmaWMgcHJvamVjdCwgcm9sZSArIHVzZXIvZ3JvdXAKICAgICAgY29uc3QgdXNlck9yR3JvdXBLZXkgPSByb3cudXNlcklkID8gJ3VzZXJJZCcgOiAnZ3JvdXBQcmluY2lwYWxJZCc7CgogICAgICByZXR1cm4gdGhpcy5wcm9qZWN0Um9sZVRlbXBsYXRlQmluZGluZ3MuZmluZCgocikgPT4gewogICAgICAgIHJldHVybiByLnByb2plY3RJZCA9PT0gcm93LnByb2plY3RJZCAmJiByLnJvbGVUZW1wbGF0ZUlkID09PSByb2xlLmlkICYmIHJbdXNlck9yR3JvdXBLZXldID09PSByb3dbdXNlck9yR3JvdXBLZXldOwogICAgICB9KTsKICAgIH0sCgogICAgYXN5bmMgcmVtb3ZlUm9sZShyb3csIHJvbGUsIGV2ZW50KSB7CiAgICAgIGNvbnN0IHJlc291cmNlID0gdGhpcy5nZXRQcm9qZWN0Um9sZUJpbmRpbmcocm93LCByb2xlKTsKCiAgICAgIGF3YWl0IHJlc291cmNlLnByb21wdFJlbW92ZSgpOwogICAgfSwKCiAgICB2aWV3Um9sZUluQVBJKHJvdywgcm9sZSkgewogICAgICBjb25zdCByZXNvdXJjZSA9IHRoaXMuZ2V0UHJvamVjdFJvbGVCaW5kaW5nKHJvdywgcm9sZSk7CgogICAgICBpZiAocmVzb3VyY2U/LmNhblZpZXdJbkFwaSkgewogICAgICAgIHJlc291cmNlLnZpZXdJbkFwaSgpOwogICAgICB9CiAgICB9LAogICAgc2xvdE5hbWUocHJvamVjdCkgewogICAgICByZXR1cm4gYG1haW4tcm93OiR7IHByb2plY3QuaWQgfWA7CiAgICB9LAogIH0KfTsK"},{"version":3,"sources":["ExplorerMembers.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ExplorerMembers.vue","sourceRoot":"node_modules/@rancher/shell/components","sourcesContent":["<script>\nimport { MANAGEMENT, NORMAN, VIRTUAL_TYPES } from '@shell/config/types';\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Masthead from '@shell/components/ResourceList/Masthead';\nimport { AGE, ROLE, STATE, PRINCIPAL } from '@shell/config/table-headers';\nimport { canViewClusterPermissionsEditor } from '@shell/components/form/Members/ClusterPermissionsEditor.vue';\nimport Banner from '@components/Banner/Banner.vue';\nimport Tabbed from '@shell/components/Tabbed/index.vue';\nimport Tab from '@shell/components/Tabbed/Tab.vue';\nimport SortableTable from '@shell/components/SortableTable';\nimport { mapGetters } from 'vuex';\nimport { canViewProjectMembershipEditor } from '@shell/components/form/Members/ProjectMembershipEditor.vue';\nimport { allHash } from '@shell/utils/promise';\n\n/**\n * Explorer members page.\n * Route: /c/local/explorer/members\n */\nexport default {\n  name: 'ExplorerMembers',\n\n  components: {\n    Banner,\n    Masthead,\n    ResourceTable,\n    Tabbed,\n    Tab,\n    SortableTable\n  },\n\n  props: {\n    // Cluster tole template binding create route - defaults to the explorer route\n    createLocationOverride: {\n      type:    Object,\n      default: () => {\n        return {\n          name:   'c-cluster-product-resource-create',\n          params: { resource: MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING }\n        };\n      }\n    }\n  },\n\n  async fetch() {\n    const clusterRoleTemplateBindingSchema = this.$store.getters[\n      `rancher/schemaFor`\n    ](NORMAN.CLUSTER_ROLE_TEMPLATE_BINDING);\n\n    const projectRoleTemplateBindingSchema = this.$store.getters['rancher/schemaFor'](NORMAN.PROJECT_ROLE_TEMPLATE_BINDING);\n\n    this.$set(this, 'normanClusterRTBSchema', clusterRoleTemplateBindingSchema);\n    this.$set(this, 'normanProjectRTBSchema', projectRoleTemplateBindingSchema);\n\n    if (clusterRoleTemplateBindingSchema) {\n      Promise.all([\n        this.$store.dispatch(`rancher/findAll`, { type: NORMAN.CLUSTER_ROLE_TEMPLATE_BINDING }, { root: true }),\n        this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING })\n      ]).then(([normanBindings]) => {\n        this.$set(this, 'normanClusterRoleTemplateBindings', normanBindings);\n        this.loadingClusterBindings = false;\n      });\n    }\n\n    if (projectRoleTemplateBindingSchema) {\n      this.$store.dispatch('rancher/findAll', { type: NORMAN.PROJECT_ROLE_TEMPLATE_BINDING }, { root: true })\n        .then((bindings) => {\n          this.$set(this, 'projectRoleTemplateBindings', bindings);\n          this.loadingProjectBindings = false;\n        });\n    }\n\n    this.$store.dispatch('management/findAll', { type: MANAGEMENT.PROJECT })\n      .then((projects) => this.$set(this, 'projects', projects));\n\n    const hydration = {\n      normanPrincipals:  this.$store.dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL }),\n      mgmt:              this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.USER }),\n      mgmtRoleTemplates: this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.ROLE_TEMPLATE }),\n    };\n\n    await allHash(hydration);\n  },\n\n  data() {\n    return {\n      schema: this.$store.getters[`management/schemaFor`](\n        MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING\n      ),\n      headers:        [STATE, PRINCIPAL, ROLE, AGE],\n      createLocation: {\n        ...this.createLocationOverride,\n        params: {\n          ...this.createLocationOverride.params,\n          cluster: this.$store.getters['currentCluster'].id\n        }\n      },\n      resource:                          MANAGEMENT.CLUSTER_ROLE_TEMPLATE_BINDING,\n      normanClusterRTBSchema:            null,\n      normanProjectRTBSchema:            null,\n      normanClusterRoleTemplateBindings: [],\n      projectRoleTemplateBindings:       [],\n      projects:                          [],\n      VIRTUAL_TYPES,\n      projectRoleTemplateColumns:        [\n        STATE,\n        {\n          name:      'member',\n          labeKey:   'generic.name',\n          value:     'principalId',\n          formatter: 'Principal'\n        },\n        {\n          name:     'role',\n          labelKey: 'tableHeaders.role',\n          value:    'roleTemplate.nameDisplay'\n        },\n      ],\n      loadingProjectBindings: true,\n      loadingClusterBindings: true\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    clusterRoleTemplateBindings() {\n      return this.normanClusterRoleTemplateBindings.map((b) => b.clusterroletemplatebinding) ;\n    },\n    filteredClusterRoleTemplateBindings() {\n      return this.clusterRoleTemplateBindings.filter(\n        (b) => b?.clusterName === this.$store.getters['currentCluster'].id\n      );\n    },\n    filteredProjects() {\n      return this.projects.reduce((all, p) => {\n        if (p?.spec?.clusterName === this.currentCluster.id) {\n          all[p.id] = p;\n        }\n\n        return all;\n      }, {});\n    },\n    filteredProjectRoleTemplateBindings() {\n      const out = this.projectRoleTemplateBindings.filter((rb) => {\n        const projectId = rb.projectId.replace(':', '/');\n\n        return !!this.filteredProjects[projectId];\n      });\n\n      return out;\n    },\n    projectsWithoutRoles() {\n      const inUse = this.filteredProjectRoleTemplateBindings.reduce((projects, binding) => {\n        const thisProjectId = (binding.projectId || '').replace(':', '/');\n\n        if (!projects.includes(thisProjectId)) {\n          projects.push(thisProjectId);\n        }\n\n        return projects;\n      }, []);\n\n      return Object.keys(this.filteredProjects).reduce((all, projectId) => {\n        const project = this.filteredProjects[projectId];\n\n        if ( !inUse.includes(projectId)) {\n          all.push(project);\n        }\n\n        return all;\n      }, []);\n    },\n\n    // We're using this because we need to show projects as groups even if the project doesn't have any role bindings\n    rowsWithFakeProjects() {\n      const fakeRows = this.projectsWithoutRoles.map((project) => {\n        return {\n          groupByLabel:     `${ ('resourceTable.groupLabel.notInAProject') }-${ project.id }`,\n          isFake:           true,\n          mainRowKey:       project.id,\n          nameDisplay:      project.spec?.displayName, // Enable filtering by the project name\n          project,\n          availableActions: [],\n          projectId:        project.id\n        };\n      });\n\n      // We need to group each of the TemplateRoleBindings by the user + project\n      const userRoles = [...fakeRows, ...this.filteredProjectRoleTemplateBindings].reduce((rows, curr) => {\n        const {\n          userId, groupPrincipalId, roleTemplate, projectId\n        } = curr;\n\n        const userOrGroup = userId || groupPrincipalId;\n\n        if (!userOrGroup) {\n          return rows;\n        }\n\n        const userOrGroupKey = userOrGroup + projectId;\n\n        if (!rows[userOrGroupKey] ) {\n          rows[userOrGroupKey] = curr;\n          rows[userOrGroupKey].allRoles = [];\n        }\n\n        if (roleTemplate) {\n          rows[userOrGroupKey].allRoles.push(curr.roleTemplate);\n        }\n\n        return rows;\n      }, {});\n\n      return Object.values(userRoles);\n    },\n    canManageMembers() {\n      return canViewClusterPermissionsEditor(this.$store);\n    },\n    canManageProjectMembers() {\n      return canViewProjectMembershipEditor(this.$store);\n    },\n    isLocal() {\n      return this.$store.getters['currentCluster'].isLocal;\n    },\n    canEditProjectMembers() {\n      return this.normanProjectRTBSchema?.collectionMethods.find((x) => x.toLowerCase() === 'post');\n    },\n    canEditClusterMembers() {\n      return this.normanClusterRTBSchema?.collectionMethods.find((x) => x.toLowerCase() === 'post');\n    },\n  },\n  methods: {\n    getMgmtProjectId(group) {\n      return group.group.key.replace(':', '/');\n    },\n    getMgmtProject(group) {\n      return this.$store.getters['management/byId'](MANAGEMENT.PROJECT, this.getMgmtProjectId(group));\n    },\n    getProjectLabel(group) {\n      return this.getMgmtProject(group)?.spec?.displayName;\n    },\n    addProjectMember(group) {\n      this.$store.dispatch('cluster/promptModal', {\n        component:      'AddProjectMemberDialog',\n        componentProps: {\n          projectId:   group.group.key.replace('/', ':'),\n          saveInModal: true\n        },\n        modalSticky: true\n      });\n    },\n\n    getProjectRoleBinding(row, role) {\n      // Each row is a combination of project, role and user/group\n      // So find the specfic roleBindingTemplate corresponding to the specific project, role + user/group\n      const userOrGroupKey = row.userId ? 'userId' : 'groupPrincipalId';\n\n      return this.projectRoleTemplateBindings.find((r) => {\n        return r.projectId === row.projectId && r.roleTemplateId === role.id && r[userOrGroupKey] === row[userOrGroupKey];\n      });\n    },\n\n    async removeRole(row, role, event) {\n      const resource = this.getProjectRoleBinding(row, role);\n\n      await resource.promptRemove();\n    },\n\n    viewRoleInAPI(row, role) {\n      const resource = this.getProjectRoleBinding(row, role);\n\n      if (resource?.canViewInApi) {\n        resource.viewInApi();\n      }\n    },\n    slotName(project) {\n      return `main-row:${ project.id }`;\n    },\n  }\n};\n</script>\n\n<template>\n  <div class=\"project-members\">\n    <Masthead\n      :schema=\"schema\"\n      :resource=\"resource\"\n      :favorite-resource=\"VIRTUAL_TYPES.CLUSTER_MEMBERS\"\n      :create-location=\"createLocation\"\n      :create-button-label=\"t('members.createActionLabel')\"\n      :is-creatable=\"false\"\n      :type-display=\"t('members.clusterAndProject')\"\n    />\n    <Banner\n      v-if=\"isLocal\"\n      color=\"error\"\n      :label=\"t('members.localClusterWarning')\"\n    />\n    <Tabbed>\n      <Tab\n        name=\"cluster-membership\"\n        :label=\"t('members.clusterMemebership')\"\n      >\n        <div\n          v-if=\"canEditClusterMembers\"\n          class=\"row mb-10 cluster-add\"\n        >\n          <n-link\n            :to=\"createLocation\"\n            class=\"btn role-primary pull-right\"\n          >\n            {{ t('members.createActionLabel') }}\n          </n-link>\n        </div>\n        <ResourceTable\n          :schema=\"schema\"\n          :headers=\"headers\"\n          :rows=\"filteredClusterRoleTemplateBindings\"\n          :groupable=\"true\"\n          :show-grouping=\"true\"\n          :namespaced=\"false\"\n          :loading=\"$fetchState.pending || !currentCluster || loadingClusterBindings\"\n          sub-search=\"subSearch\"\n          :sub-fields=\"['nameDisplay']\"\n        />\n      </Tab>\n      <Tab\n        v-if=\"canManageProjectMembers\"\n        name=\"project-membership\"\n        :label=\"t('members.projectMembership')\"\n      >\n        <SortableTable\n          group-by=\"projectId\"\n          :loading=\"$fetchState.pending || !currentCluster || loadingProjectBindings\"\n          :rows=\"rowsWithFakeProjects\"\n          :headers=\"projectRoleTemplateColumns\"\n          :table-actions=\"false\"\n          :row-actions=\"false\"\n        >\n          <template #group-by=\"group\">\n            <div class=\"group-bar\">\n              <div\n                v-trim-whitespace\n                class=\"group-tab\"\n              >\n                <div\n                  v-clean-html=\"getProjectLabel(group)\"\n                  class=\"project-name\"\n                />\n              </div>\n              <div class=\"right\">\n                <button\n                  v-if=\"canEditProjectMembers\"\n                  type=\"button\"\n                  class=\"create-namespace btn btn-sm role-secondary mr-10 right\"\n                  @click=\"addProjectMember(group)\"\n                >\n                  {{ t('members.createActionLabel') }}\n                </button>\n              </div>\n            </div>\n          </template>\n          <template\n            #cell:role=\"{row}\"\n          >\n            <span\n              v-for=\"(role, j) in row.allRoles\"\n              :key=\"j\"\n\n              ref=\"value\"\n              :data-testid=\"`role-value-${j}`\"\n              class=\"role\"\n            >\n              <span\n                class=\"role-value\"\n                :class=\"{'text-link-enabled' : row.canViewInApi}\"\n                @click=\"viewRoleInAPI(row, role)\"\n              >\n                {{ role.nameDisplay }}\n              </span>\n              <i\n                class=\"icon icon-close\"\n                :data-testid=\"`role-values-close-${j}`\"\n                @click=\"removeRole(row, role, $event)\"\n              />\n            </span>\n          </template>\n          <template\n            v-for=\"project in projectsWithoutRoles\"\n            v-slot:[slotName(project)]\n          >\n            <tr\n              :key=\"project.id\"\n              class=\"main-row\"\n            >\n              <td\n                class=\"empty text-center\"\n                colspan=\"100%\"\n              >\n                {{ t('members.noRolesAssigned') }}\n              </td>\n            </tr>\n          </template>\n        </SortableTable>\n      </Tab>\n    </Tabbed>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n\n.role {\n  align-items: center;\n    background-color: rgba(0, 0, 0, 0.05);\n    border: 1px solid var(--header-border);\n    border-radius: 5px;\n    color: var(--tag-text);\n    line-height: 20px;\n    padding: 2px 5px;\n    white-space: nowrap;\n    display: inline-flex;\n    margin-right: 3px;\n}\n\n.role-value {\n  &.text-link-enabled {\n    cursor: pointer;\n    &:hover {\n      color: var(--primary);\n    }\n  }\n  + .icon-close {\n    margin-left: 3px;\n    cursor: pointer;\n    &:hover {\n      color: var(--primary);\n    }\n  }\n}\n\n.project-members {\n  & ::v-deep .group-bar{\n    display: flex;\n    justify-content: space-between;\n  }\n}\n.cluster-add {\n  justify-content: flex-end;\n}\n</style>\n"]}]}