{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/LiveExpiryDate.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/LiveExpiryDate.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkYXkgZnJvbSAnZGF5anMnOwppbXBvcnQgeyBzYWZlU2V0VGltZW91dCB9IGZyb20gJ0BzaGVsbC91dGlscy90aW1lJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnJywKICAgIH0sCiAgICByb3c6IHsKICAgICAgdHlwZTogICAgT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7fQogICAgfSwKICB9LAoKICBkYXRhKCkgewogICAgcmV0dXJuIHsgc3RhdGU6IHRoaXMudXBkYXRlKCkgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgc3RhdGVWYWx1ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7CiAgICB9CiAgfSwKCiAgd2F0Y2g6IHsKICAgIHZhbHVlKCkgewogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sCgogIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7CiAgfSwKCiAgbWV0aG9kczogewogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBzdGF0ZSA9IHRoaXMucm93LnN0YXRlOwoKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpOwogICAgICBpZiAoc3RhdGUgIT09ICdleHBpcmVkJyAmJiB0aGlzLnZhbHVlKSB7CiAgICAgICAgLy8gTm90IGV4cGlyZWQgYW5kIGhhcyBhbiBleHBpcnkgZGF0ZSwgc28gc2V0IGEgdGltZXIgdG8gdXBkYXRlIHRoZSBzdGF0ZSBvbmNlIGl0cyBleHBpcmVkCiAgICAgICAgY29uc3QgZXhwaXJ5ID0gZGF5KHRoaXMudmFsdWUpOwogICAgICAgIGNvbnN0IG5vdyA9IGRheSgpOwogICAgICAgIGNvbnN0IHRpbWVUb0V4cGlyZSA9IGV4cGlyeS5kaWZmKG5vdyk7CgogICAgICAgIHRoaXMudGltZXIgPSBzYWZlU2V0VGltZW91dCh0aW1lVG9FeHBpcmUsIHRoaXMudXBkYXRlLCB0aGlzKTsKICAgICAgfQoKICAgICAgY29uc3Qgb3V0ID0ge307CgogICAgICBvdXQuZXhwaXJlc0F0ID0gdGhpcy52YWx1ZTsKICAgICAgb3V0LmlzRXhwaXJlZCA9IHN0YXRlID09PSAnZXhwaXJlZCc7CiAgICAgIHRoaXMuc3RhdGUgPSBvdXQ7CgogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0KfTsK"},{"version":3,"sources":["LiveExpiryDate.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"LiveExpiryDate.vue","sourceRoot":"node_modules/@rancher/shell/components/formatter","sourcesContent":["<script>\nimport day from 'dayjs';\nimport { safeSetTimeout } from '@shell/utils/time';\n\nexport default {\n  props: {\n    value: {\n      type:    String,\n      default: '',\n    },\n    row: {\n      type:    Object,\n      default: () => {}\n    },\n  },\n\n  data() {\n    return { state: this.update() };\n  },\n\n  computed: {\n    stateValue() {\n      return this.state;\n    }\n  },\n\n  watch: {\n    value() {\n      this.update();\n    }\n  },\n\n  beforeDestroy() {\n    clearTimeout(this.timer);\n  },\n\n  methods: {\n    update() {\n      const state = this.row.state;\n\n      clearTimeout(this.timer);\n      if (state !== 'expired' && this.value) {\n        // Not expired and has an expiry date, so set a timer to update the state once its expired\n        const expiry = day(this.value);\n        const now = day();\n        const timeToExpire = expiry.diff(now);\n\n        this.timer = safeSetTimeout(timeToExpire, this.update, this);\n      }\n\n      const out = {};\n\n      out.expiresAt = this.value;\n      out.isExpired = state === 'expired';\n      this.state = out;\n\n      return out;\n    }\n  }\n};\n</script>\n\n<template>\n  <span\n    v-if=\"stateValue.isExpired\"\n    class=\"text-error\"\n  >\n    <LiveDate\n      :value=\"stateValue.expiresAt\"\n      :add-suffix=\"true\"\n    />\n  </span>\n  <LiveDate\n    v-else-if=\"stateValue.expiresAt\"\n    :value=\"stateValue.expiresAt\"\n    :add-suffix=\"false\"\n  />\n  <span\n    v-else\n    v-t=\"'generic.never'\"\n    class=\"text-muted\"\n  />\n</template>\n"]}]}