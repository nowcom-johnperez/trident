{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/gatekeeper/constraints/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/gatekeeper/constraints/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IEFHRSwgTkFNRSwgU1RBVEUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3RhYmxlLWhlYWRlcnMnOwppbXBvcnQgU29ydGFibGVUYWJsZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Tb3J0YWJsZVRhYmxlJzsKaW1wb3J0IHsgREVTQ1JJUFRJT04gfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCB7IGZpbmRBbGxDb25zdHJhaW50cyB9IGZyb20gJ0BzaGVsbC91dGlscy9nYXRla2VlcGVyL3V0aWwnOwppbXBvcnQgTWFzdGhlYWQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvUmVzb3VyY2VMaXN0L01hc3RoZWFkJzsKaW1wb3J0IHsgQVMsIF9ZQU1MIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsgTWFzdGhlYWQsIFNvcnRhYmxlVGFibGUgfSwKICBkYXRhKGN0eCkgewogICAgY29uc3QgY3JlYXRlTG9jYXRpb24gPSB7CiAgICAgIG5hbWU6ICAgJ2MtY2x1c3Rlci1nYXRla2VlcGVyLWNvbnN0cmFpbnRzLWNyZWF0ZScsCiAgICAgIHBhcmFtczogdGhpcy4kcm91dGUucGFyYW1zLAogICAgfTsKCiAgICBjb25zdCB5YW1sQ3JlYXRlTG9jYXRpb24gPSB7CiAgICAgIC4uLmNyZWF0ZUxvY2F0aW9uLAogICAgICBxdWVyeTogeyBbQVNdOiBfWUFNTCB9CiAgICB9OwoKICAgIHJldHVybiB7CiAgICAgIGNyZWF0ZUxvY2F0aW9uLAogICAgICB5YW1sQ3JlYXRlTG9jYXRpb24sCiAgICAgIGhlYWRlcnM6IFsKICAgICAgICBTVEFURSwKICAgICAgICBOQU1FLAogICAgICAgIHsKICAgICAgICAgIG5hbWU6ICAnRGVzY3JpcHRpb24nLAogICAgICAgICAgbGFiZWw6ICdEZXNjcmlwdGlvbicsCiAgICAgICAgICB2YWx1ZTogYGRlc2NyaXB0aW9uYCwKICAgICAgICAgIHNvcnQ6ICBgZGVzY3JpcHRpb25gCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBuYW1lOiAgJ1Zpb2xhdGlvbnMnLAogICAgICAgICAgbGFiZWw6ICdWaW9sYXRpb25zJywKICAgICAgICAgIHZhbHVlOiAnc3RhdHVzLnRvdGFsVmlvbGF0aW9ucycsCiAgICAgICAgICBzb3J0OiAgJ3N0YXR1cy50b3RhbFZpb2xhdGlvbnMnLAogICAgICAgICAgd2lkdGg6IDEyMAogICAgICAgIH0sCiAgICAgICAgQUdFLAogICAgICBdLAogICAgICB0ZW1wbGF0ZXM6ICAgW10sCiAgICAgIGNvbnN0cmFpbnRzOiBbXSwKICAgIH07CiAgfSwKCiAgYXN5bmMgY3JlYXRlZCgpIHsKICAgIGNvbnN0IHJhd0NvbnN0cmFpbnRzID0gYXdhaXQgZmluZEFsbENvbnN0cmFpbnRzKHRoaXMuJHN0b3JlKTsKCiAgICB0aGlzLmNvbnN0cmFpbnRzID0gcmF3Q29uc3RyYWludHMKICAgICAgLmZsYXQoKQogICAgICAubWFwKChjb25zdHJhaW50KSA9PiB7CiAgICAgICAgY29uc3RyYWludC5kZXNjcmlwdGlvbiA9IChjb25zdHJhaW50Py5tZXRhZGF0YT8uYW5ub3RhdGlvbnMgfHwge30pW0RFU0NSSVBUSU9OXTsKCiAgICAgICAgcmV0dXJuIGNvbnN0cmFpbnQ7CiAgICAgIH0pOwogIH0KCn07Cg=="},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/pages/c/_cluster/gatekeeper/constraints","sourcesContent":["<script>\nimport { AGE, NAME, STATE } from '@shell/config/table-headers';\nimport SortableTable from '@shell/components/SortableTable';\nimport { DESCRIPTION } from '@shell/config/labels-annotations';\nimport { findAllConstraints } from '@shell/utils/gatekeeper/util';\nimport Masthead from '@shell/components/ResourceList/Masthead';\nimport { AS, _YAML } from '@shell/config/query-params';\n\nexport default {\n  components: { Masthead, SortableTable },\n  data(ctx) {\n    const createLocation = {\n      name:   'c-cluster-gatekeeper-constraints-create',\n      params: this.$route.params,\n    };\n\n    const yamlCreateLocation = {\n      ...createLocation,\n      query: { [AS]: _YAML }\n    };\n\n    return {\n      createLocation,\n      yamlCreateLocation,\n      headers: [\n        STATE,\n        NAME,\n        {\n          name:  'Description',\n          label: 'Description',\n          value: `description`,\n          sort:  `description`\n        },\n        {\n          name:  'Violations',\n          label: 'Violations',\n          value: 'status.totalViolations',\n          sort:  'status.totalViolations',\n          width: 120\n        },\n        AGE,\n      ],\n      templates:   [],\n      constraints: [],\n    };\n  },\n\n  async created() {\n    const rawConstraints = await findAllConstraints(this.$store);\n\n    this.constraints = rawConstraints\n      .flat()\n      .map((constraint) => {\n        constraint.description = (constraint?.metadata?.annotations || {})[DESCRIPTION];\n\n        return constraint;\n      });\n  }\n\n};\n</script>\n\n<template>\n  <div class=\"gatekeeper-constraints\">\n    <Masthead\n      resource=\"Constraint\"\n      :type-display=\"'Constraint'\"\n      :is-yaml-creatable=\"true\"\n      :is-creatable=\"true\"\n      :yaml-create-location=\"yamlCreateLocation\"\n      :create-location=\"createLocation\"\n    />\n\n    <SortableTable\n      :headers=\"headers\"\n      :rows=\"constraints\"\n      key-field=\"id\"\n      group-by=\"kind\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\">\n.gatekeeper-constraints {\n  button.create {\n    height: 35px;\n    line-height: 0;\n  }\n}\n</style>\n"]}]}