{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/detail/autoscaling.horizontalpodautoscaler/index.vue?vue&type=style&index=0&id=7043c56d&lang=scss&scoped=true","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/detail/autoscaling.horizontalpodautoscaler/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":1716430467357},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1716430467929},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/postcss-loader/src/index.js","mtime":1716430467882},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/sass-loader/dist/cjs.js","mtime":1716430453705},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5ocGEtbWV0cmljcy10YWJsZSB7CiAgLmluZm8tYm94IDo6di1kZWVwIHsKICAgIGJhY2tncm91bmQtY29sb3I6IHZhcigtLXNpbXBsZS1ib3gtYmcpOwogIH0KICAucm93IHsKICAgIC5vdmVyLWhyIHsKICAgICAgcGFkZGluZy1yaWdodDogMzBweDsKICAgIH0KICB9Cn0K"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AAgPA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/detail/autoscaling.horizontalpodautoscaler","sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport InfoBox from '@shell/components/InfoBox';\nimport camelCase from 'lodash/camelCase';\nimport keys from 'lodash/keys';\nimport startCase from 'lodash/startCase';\nimport { findBy } from '@shell/utils/array';\nimport { get } from '@shell/utils/object';\n\nexport default {\n  components: {\n    InfoBox,\n    ResourceTabs,\n    Tab,\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    mode: {\n      default: 'view',\n      type:    String,\n    },\n    value: {\n      required: true,\n      type:     Object,\n    },\n  },\n\n  data() {\n    return {};\n  },\n\n  computed: {\n    mappedMetrics() {\n      const {\n        spec: { metrics = [] },\n        status: { currentMetrics = [] },\n      } = this.value;\n\n      return metrics.map((metric) => {\n        const metricValue = get(metric, camelCase(metric.type));\n        const targetType = metricValue?.target?.type;\n        const currentMatch = findBy(currentMetrics, 'resource.name', metric.resource.name);\n        const current = currentMatch ? get(currentMatch, `${ camelCase(metric.type) }.current`) : null;\n        const currentMetricsKVs = [];\n\n        if (current) {\n          keys(current).forEach((k) => {\n            currentMetricsKVs.push({\n              targetName:  startCase(k),\n              targetValue: current[k],\n            });\n          });\n        }\n\n        const out = {\n          metricName:    metricValue?.metric?.name ?? null,\n          metricSource:  metric.type,\n          targetName:    targetType ?? null,\n          targetValue:   null,\n          subRowContent: {\n            objectApiVersion: metricValue?.describedObject?.apiVersion ?? null,\n            objectKind:       metricValue?.describedObject?.kind ?? null,\n            objectName:       metricValue?.describedObject?.name ?? null,\n            resourceName:     metricValue?.name ?? null,\n            currentMetrics:   currentMetricsKVs,\n          },\n        };\n\n        if (targetType) {\n          if (targetType === 'Utilization') {\n            out.targetValue = metricValue.target.averageUtilization;\n          } else {\n            out.targetValue = get(metricValue.target, camelCase(targetType));\n          }\n        }\n\n        return out;\n      });\n    },\n  },\n};\n</script>\n\n<template>\n  <ResourceTabs\n    v-model=\"value\"\n    :mode=\"mode\"\n  >\n    <Tab\n      name=\"metrics\"\n      :label=\"t('hpa.tabs.metrics')\"\n      class=\"bordered-table hpa-metrics-table\"\n      :weight=\"4\"\n    >\n      <div\n        v-for=\"(metric, index) in mappedMetrics\"\n        :key=\"`${index}${metric.metricName}`\"\n      >\n        <InfoBox>\n          <div class=\"row info-row\">\n            <div class=\"col span-6 info-column\">\n              <h4>\n                <t\n                  k=\"hpa.detail.metricHeader\"\n                  :source=\"metric.metricSource\"\n                />\n              </h4>\n              <div\n                v-if=\"metric.metricName\"\n                class=\"mb-5\"\n              >\n                <label class=\"text-label\">\n                  <t k=\"hpa.metrics.headers.metricName\" />:\n                </label>\n                <span>{{ metric.metricName }}</span>\n              </div>\n              <div class=\"mb-5\">\n                <label class=\"text-label\">\n                  <t k=\"hpa.metrics.headers.targetName\" />:\n                </label>\n                <span>{{ metric.targetName }}</span>\n              </div>\n              <div class=\"mb-5\">\n                <label class=\"text-label\">\n                  <t k=\"hpa.metrics.headers.value\" />:\n                </label>\n                <span :data-testid=\"`resource-metrics-value-${metric.subRowContent.resourceName}`\">{{ metric.targetValue }}</span>\n              </div>\n              <div v-if=\"metric.metricSource === 'Object'\">\n                <div class=\"mb-5\">\n                  <label class=\"text-label\">\n                    <t k=\"hpa.objectReference.api.label\" />:\n                  </label>\n                  <span>{{ metric.subRowContent.objectApiVersion }}</span>\n                </div>\n                <div class=\"mb-5\">\n                  <label class=\"text-label\">\n                    <t k=\"hpa.objectReference.kind.label\" />:\n                  </label>\n                  <span>{{ metric.subRowContent.objectKind }}</span>\n                </div>\n                <div class=\"mb-5\">\n                  <label class=\"text-label\">\n                    <t k=\"hpa.objectReference.name.label\" />:\n                  </label>\n                  <span>{{ metric.subRowContent.objectName }}</span>\n                </div>\n              </div>\n              <div v-if=\"metric.metricSource === 'Resource'\">\n                <div class=\"mb-5\">\n                  <label class=\"text-label\">\n                    <t k=\"hpa.metrics.headers.resource\" />:\n                  </label>\n                  <span :data-testid=\"`resource-metrics-name-${metric.subRowContent.resourceName}`\">{{ metric.subRowContent.resourceName }}</span>\n                </div>\n              </div>\n            </div>\n            <div class=\"col span-6\">\n              <h4><t k=\"hpa.detail.currentMetrics.header\" /></h4>\n              <div\n                v-if=\"(metric.subRowContent.currentMetrics || []).length > 0\"\n              >\n                <div\n                  v-for=\"(current, currentIndex) in metric.subRowContent\n                    .currentMetrics\"\n                  :key=\"`${currentIndex}${current.targetName}`\"\n                >\n                  <div class=\"mb-5\">\n                    <label class=\"text-label\">\n                      {{ current.targetName }}:\n                    </label>\n                    <span :data-testid=\"`current-metrics-${current.targetName}-${metric.subRowContent.resourceName}`\">{{ current.targetValue }}</span>\n                  </div>\n                </div>\n              </div>\n              <div v-else>\n                <t k=\"hpa.detail.currentMetrics.noMetrics\" />\n              </div>\n            </div>\n          </div>\n        </InfoBox>\n      </div>\n    </Tab>\n    <Tab\n      v-if=\"!!value.spec.behavior\"\n      name=\"behavior\"\n      :label=\"t('hpa.tabs.behavior')\"\n      class=\"bordered-table hpa-behavior-table\"\n      :weight=\"3\"\n    >\n      <div\n        v-for=\"(type, i) in ['scaleDown', 'scaleUp']\"\n        :key=\"`${i}`\"\n      >\n        <InfoBox v-if=\"!!value.spec.behavior[type]\">\n          <div class=\"row info-row\">\n            <div class=\"col span-6 info-column\">\n              <h4>\n                <t\n                  :k=\"`hpa.${type}Rules.label`\"\n                />\n              </h4>\n            </div>\n          </div>\n          <div class=\"row\">\n            <div class=\"col span-6 info-column\">\n              <label class=\"text-label\"><t k=\"hpa.scalingRule.policyHeader\" /></label>\n              <ul\n                v-for=\"(current, currentIndex) in value.spec.behavior[type].policies\"\n                :key=\"`${currentIndex}`\"\n              >\n                <li>\n                  <span>{{ current.value }}</span>\n                  <span>{{ current.type }}</span>\n                  <span>(for {{ current.periodSeconds }}s)</span>\n                </li>\n              </ul>\n            </div>\n            <div class=\"col span-6\">\n              <div class=\"mb-5\">\n                <label class=\"text-label\"><t k=\"hpa.scalingRule.selectPolicy\" />: </label>\n                <span>{{ value.spec.behavior[type].selectPolicy }}</span>\n              </div>\n              <div class=\"mb-5\">\n                <label class=\"text-label\"><t k=\"hpa.scalingRule.stabilizationWindowSeconds\" />: </label>\n                <span>{{ value.spec.behavior[type].stabilizationWindowSeconds }}s</span>\n              </div>\n            </div>\n          </div>\n        </InfoBox>\n      </div>\n    </Tab>\n  </ResourceTabs>\n</template>\n\n<style lang=\"scss\" scoped>\n.hpa-metrics-table {\n  .info-box ::v-deep {\n    background-color: var(--simple-box-bg);\n  }\n  .row {\n    .over-hr {\n      padding-right: 30px;\n    }\n  }\n}\n</style>\n"]}]}