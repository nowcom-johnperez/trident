{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ResourceDetail/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ResourceDetail/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcvaW1wbCc7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgUmVzb3VyY2VZYW1sIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1Jlc291cmNlWWFtbCc7CmltcG9ydCB7CiAgX1ZJRVcsIF9FRElULCBfQ0xPTkUsIF9JTVBPUlQsIF9TVEFHRSwgX0NSRUFURSwKICBBUywgX1lBTUwsIF9ERVRBSUwsIF9DT05GSUcsIF9HUkFQSCwgUFJFVklFVywgTU9ERSwKfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IEZMRUVULCBTQ0hFTUEgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgY3JlYXRlWWFtbCB9IGZyb20gJ0BzaGVsbC91dGlscy9jcmVhdGUteWFtbCc7CmltcG9ydCBNYXN0aGVhZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9SZXNvdXJjZURldGFpbC9NYXN0aGVhZCc7CmltcG9ydCBEZXRhaWxUb3AgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvRGV0YWlsVG9wJzsKaW1wb3J0IHsgY2xvbmUsIGRpZmYgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IEljb25NZXNzYWdlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0ljb25NZXNzYWdlJzsKaW1wb3J0IEZvcmNlRGlyZWN0ZWRUcmVlQ2hhcnQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZmxlZXQvRm9yY2VEaXJlY3RlZFRyZWVDaGFydCc7CmltcG9ydCB7IGNoZWNrU2NoZW1hc0ZvckZpbmRBbGxIYXNoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2F1dGgnOwoKZnVuY3Rpb24gbW9kZUZvcihyb3V0ZSkgewogIGlmICggcm91dGUucXVlcnk/Lm1vZGUgPT09IF9JTVBPUlQgKSB7CiAgICByZXR1cm4gX0lNUE9SVDsKICB9CgogIGlmICggcm91dGUucGFyYW1zPy5pZCApIHsKICAgIHJldHVybiByb3V0ZS5xdWVyeS5tb2RlIHx8IF9WSUVXOwogIH0gZWxzZSB7CiAgICByZXR1cm4gX0NSRUFURTsKICB9Cn0KCmFzeW5jIGZ1bmN0aW9uIGdldFlhbWwoc3RvcmUsIG1vZGVsKSB7CiAgY29uc3QgaW5TdG9yZSA9IHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRTdG9yZSddKG1vZGVsLnR5cGUpOwogIGxldCB5YW1sOwogIGNvbnN0IG9wdCA9IHsgaGVhZGVyczogeyBhY2NlcHQ6ICdhcHBsaWNhdGlvbi95YW1sJyB9IH07CgogIGlmICggbW9kZWwuaGFzTGluaygndmlldycpICkgewogICAgeWFtbCA9IChhd2FpdCBtb2RlbC5mb2xsb3dMaW5rKCd2aWV3Jywgb3B0KSkuZGF0YTsKICB9CgogIGNvbnN0IGNsZWFuZWRZYW1sID0gYXdhaXQgc3RvcmUuZGlzcGF0Y2goYCR7IGluU3RvcmUgfS9jbGVhbkZvckRvd25sb2FkYCwgeWFtbCk7CgogIHJldHVybiBjbGVhbmVkWWFtbDsKfQoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmcsCiAgICBEZXRhaWxUb3AsCiAgICBGb3JjZURpcmVjdGVkVHJlZUNoYXJ0LAogICAgUmVzb3VyY2VZYW1sLAogICAgTWFzdGhlYWQsCiAgICBJY29uTWVzc2FnZSwKICB9LAoKICBtaXhpbnM6IFtDcmVhdGVFZGl0Vmlld10sCgogIHByb3BzOiB7CiAgICBzdG9yZU92ZXJyaWRlOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCgogICAgcmVzb3VyY2VPdmVycmlkZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAoKICAgIHBhcmVudFJvdXRlT3ZlcnJpZGU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKCiAgICBmbGV4Q29udGVudDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCgogICAgLyoqCiAgICAgKiBJbmhlcml0ZWQgZ2xvYmFsIGlkZW50aWZpZXIgcHJlZml4IGZvciB0ZXN0cwogICAgICogRGVmaW5lIGEgdGVybSBiYXNlZCBvbiB0aGUgcGFyZW50IGNvbXBvbmVudCB0byBhdm9pZCBjb25mbGljdHMgb24gbXVsdGlwbGUgY29tcG9uZW50cwogICAgICovCiAgICBjb21wb25lbnRUZXN0aWQ6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAncmVzb3VyY2UtZGV0YWlscycKICAgIH0KICB9LAoKICBhc3luYyBmZXRjaCgpIHsKICAgIGNvbnN0IHN0b3JlID0gdGhpcy4kc3RvcmU7CiAgICBjb25zdCByb3V0ZSA9IHRoaXMuJHJvdXRlOwogICAgY29uc3QgcGFyYW1zID0gcm91dGUucGFyYW1zOwogICAgbGV0IHJlc291cmNlID0gdGhpcy5yZXNvdXJjZU92ZXJyaWRlIHx8IHBhcmFtcy5yZXNvdXJjZTsKCiAgICBjb25zdCBpblN0b3JlID0gdGhpcy5zdG9yZU92ZXJyaWRlIHx8IHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRTdG9yZSddKHJlc291cmNlKTsKICAgIGNvbnN0IHJlYWxNb2RlID0gdGhpcy5yZWFsTW9kZTsKCiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0CiAgICBsZXQgeyBuYW1lc3BhY2UsIGlkIH0gPSBwYXJhbXM7CgogICAgLy8gVGhlcmUgYXJlIDYgInJlYWwiIG1vZGVzIHRoYXQgY2FuIGJlIHB1dCBpbnRvIHRoZSBxdWVyeSBzdHJpbmcKICAgIC8vIFRoZXNlIGFyZSBtYXBwZWQgZG93biB0byB0aGUgMyByZWd1bGFyIHBhZ2UgIm1vZGUicyB0aGF0IGNyZWF0ZS1lZGl0LXZpZXcgY29tcG9uZW50cwogICAgLy8ga25vdyBhYm91dDogIHZpZXcsIGVkaXQsIGNyZWF0ZSAoc3RhZ2UsIGltcG9ydCBhbmQgY2xvbmUgYmVjb21lICJjcmVhdGUiKQogICAgY29uc3QgbW9kZSA9IChbX0NMT05FLCBfSU1QT1JULCBfU1RBR0VdLmluY2x1ZGVzKHJlYWxNb2RlKSA/IF9DUkVBVEUgOiByZWFsTW9kZSk7CgogICAgY29uc3QgZ2V0R3JhcGhDb25maWcgPSBzdG9yZS5nZXR0ZXJzWyd0eXBlLW1hcC9oYXNHcmFwaCddKHJlc291cmNlKTsKICAgIGNvbnN0IGhhc0dyYXBoID0gISFnZXRHcmFwaENvbmZpZzsKICAgIGNvbnN0IGhhc0N1c3RvbURldGFpbCA9IHN0b3JlLmdldHRlcnNbJ3R5cGUtbWFwL2hhc0N1c3RvbURldGFpbCddKHJlc291cmNlLCBpZCk7CiAgICBjb25zdCBoYXNDdXN0b21FZGl0ID0gc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvaGFzQ3VzdG9tRWRpdCddKHJlc291cmNlLCBpZCk7CgogICAgY29uc3Qgc2NoZW1hcyA9IHN0b3JlLmdldHRlcnNbYCR7IGluU3RvcmUgfS9hbGxgXShTQ0hFTUEpOwoKICAgIC8vIEFzIGRldGVybWluZXMgd2hhdCBjb21wb25lbnQgd2lsbCBiZSByZW5kZXJlZAogICAgY29uc3QgcmVxdWVzdGVkID0gcm91dGUucXVlcnlbQVNdOwogICAgbGV0IGFzOwogICAgbGV0IG5vdEZvdW5kID0gZmFsc2U7CgogICAgaWYgKCBtb2RlID09PSBfVklFVyAmJiBoYXNDdXN0b21EZXRhaWwgJiYgKCFyZXF1ZXN0ZWQgfHwgcmVxdWVzdGVkID09PSBfREVUQUlMKSApIHsKICAgICAgYXMgPSBfREVUQUlMOwogICAgfSBlbHNlIGlmICggbW9kZSA9PT0gX1ZJRVcgJiYgaGFzR3JhcGggJiYgcmVxdWVzdGVkID09PSBfR1JBUEgpIHsKICAgICAgYXMgPSBfR1JBUEg7CiAgICB9IGVsc2UgaWYgKCBoYXNDdXN0b21FZGl0ICYmICghcmVxdWVzdGVkIHx8IHJlcXVlc3RlZCA9PT0gX0NPTkZJRykgKSB7CiAgICAgIGFzID0gX0NPTkZJRzsKICAgIH0gZWxzZSB7CiAgICAgIGFzID0gX1lBTUw7CiAgICB9CgogICAgdGhpcy5hcyA9IGFzOwoKICAgIGNvbnN0IG9wdGlvbnMgPSBzdG9yZS5nZXR0ZXJzW2B0eXBlLW1hcC9vcHRpb25zRm9yYF0ocmVzb3VyY2UpOwoKICAgIHRoaXMuc2hvd01hc3RoZWFkID0gW19DUkVBVEUsIF9FRElUXS5pbmNsdWRlcyhtb2RlKSA/IG9wdGlvbnMucmVzb3VyY2VFZGl0TWFzdGhlYWQgOiB0cnVlOwogICAgY29uc3QgY2FuVmlld1lhbWwgPSBvcHRpb25zLmNhbllhbWw7CgogICAgaWYgKCBvcHRpb25zLnJlc291cmNlICkgewogICAgICByZXNvdXJjZSA9IG9wdGlvbnMucmVzb3VyY2U7CiAgICB9CgogICAgY29uc3Qgc2NoZW1hID0gc3RvcmUuZ2V0dGVyc1tgJHsgaW5TdG9yZSB9L3NjaGVtYUZvcmBdKHJlc291cmNlKTsKICAgIGxldCBtb2RlbCwgaW5pdGlhbE1vZGVsLCBsaXZlTW9kZWwsIHlhbWw7CgogICAgaWYgKCByZWFsTW9kZSA9PT0gX0NSRUFURSB8fCByZWFsTW9kZSA9PT0gX0lNUE9SVCApIHsKICAgICAgaWYgKCAhbmFtZXNwYWNlICkgewogICAgICAgIG5hbWVzcGFjZSA9IHN0b3JlLmdldHRlcnNbJ2RlZmF1bHROYW1lc3BhY2UnXTsKICAgICAgfQoKICAgICAgY29uc3QgZGF0YSA9IHsgdHlwZTogcmVzb3VyY2UgfTsKCiAgICAgIGlmICggc2NoZW1hPy5hdHRyaWJ1dGVzPy5uYW1lc3BhY2VkICkgewogICAgICAgIGRhdGEubWV0YWRhdGEgPSB7IG5hbWVzcGFjZSB9OwogICAgICB9CgogICAgICBsaXZlTW9kZWwgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaChgJHsgaW5TdG9yZSB9L2NyZWF0ZWAsIGRhdGEpOwogICAgICBpbml0aWFsTW9kZWwgPSBhd2FpdCBzdG9yZS5kaXNwYXRjaChgJHsgaW5TdG9yZSB9L2Nsb25lYCwgeyByZXNvdXJjZTogbGl2ZU1vZGVsIH0pOwogICAgICBtb2RlbCA9IGF3YWl0IHN0b3JlLmRpc3BhdGNoKGAkeyBpblN0b3JlIH0vY2xvbmVgLCB7IHJlc291cmNlOiBsaXZlTW9kZWwgfSk7CgogICAgICBpZiAobW9kZWwuZm9yY2VZYW1sID09PSB0cnVlKSB7CiAgICAgICAgYXMgPSBfWUFNTDsKICAgICAgICB0aGlzLmFzID0gYXM7CiAgICAgIH0KCiAgICAgIGlmICggYXMgPT09IF9ZQU1MICkgewogICAgICAgIHlhbWwgPSBjcmVhdGVZYW1sKHNjaGVtYXMsIHJlc291cmNlLCBkYXRhKTsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgaWYgKCBhcyA9PT0gX0dSQVBIICkgewogICAgICAgIGNvbnN0IGdyYXBoU2NoZW1hID0gYXdhaXQgY2hlY2tTY2hlbWFzRm9yRmluZEFsbEhhc2goewogICAgICAgICAgY2x1c3RlcjogewogICAgICAgICAgICBpblN0b3JlVHlwZTogJ21hbmFnZW1lbnQnLAogICAgICAgICAgICB0eXBlOiAgICAgICAgRkxFRVQuQ0xVU1RFUgogICAgICAgICAgfSwKICAgICAgICAgIGJ1bmRsZTogewogICAgICAgICAgICBpblN0b3JlVHlwZTogJ21hbmFnZW1lbnQnLAogICAgICAgICAgICB0eXBlOiAgICAgICAgRkxFRVQuQlVORExFCiAgICAgICAgICB9LAoKICAgICAgICAgIGJ1bmRsZURlcGxveW1lbnQ6IHsKICAgICAgICAgICAgaW5TdG9yZVR5cGU6ICdtYW5hZ2VtZW50JywKICAgICAgICAgICAgdHlwZTogICAgICAgIEZMRUVULkJVTkRMRV9ERVBMT1lNRU5UCiAgICAgICAgICB9CgogICAgICAgIH0sIHRoaXMuJHN0b3JlKTsKCiAgICAgICAgdGhpcy5jYW5WaWV3Q2hhcnQgPSBncmFwaFNjaGVtYS5jbHVzdGVyICYmIGdyYXBoU2NoZW1hLmJ1bmRsZSAmJiBncmFwaFNjaGVtYS5idW5kbGVEZXBsb3ltZW50OwogICAgICB9CgogICAgICBsZXQgZnFpZCA9IGlkOwoKICAgICAgaWYgKCBzY2hlbWEuYXR0cmlidXRlcz8ubmFtZXNwYWNlZCAmJiBuYW1lc3BhY2UgKSB7CiAgICAgICAgZnFpZCA9IGAkeyBuYW1lc3BhY2UgfS8keyBmcWlkIH1gOwogICAgICB9CgogICAgICB0cnkgewogICAgICAgIGxpdmVNb2RlbCA9IGF3YWl0IHN0b3JlLmRpc3BhdGNoKGAkeyBpblN0b3JlIH0vZmluZGAsIHsKICAgICAgICAgIHR5cGU6IHJlc291cmNlLAogICAgICAgICAgaWQ6ICAgZnFpZCwKICAgICAgICAgIG9wdDogIHsgd2F0Y2g6IHRydWUgfQogICAgICAgIH0pOwogICAgICB9IGNhdGNoIChlKSB7CiAgICAgICAgaWYgKGUuc3RhdHVzID09PSA0MDQgfHwgZS5zdGF0dXMgPT09IDQwMykgewogICAgICAgICAgc3RvcmUuZGlzcGF0Y2goJ2xvYWRpbmdFcnJvcicsIG5ldyBFcnJvcih0aGlzLnQoJ25hdi5mYWlsV2hhbGUucmVzb3VyY2VJZE5vdEZvdW5kJywgeyByZXNvdXJjZSwgZnFpZCB9LCB0cnVlKSkpOwogICAgICAgIH0KICAgICAgICBsaXZlTW9kZWwgPSB7fTsKICAgICAgICBub3RGb3VuZCA9IGZxaWQ7CiAgICAgIH0KCiAgICAgIGlmIChyZWFsTW9kZSA9PT0gX1ZJRVcpIHsKICAgICAgICBtb2RlbCA9IGxpdmVNb2RlbDsKICAgICAgfSBlbHNlIHsKICAgICAgICBtb2RlbCA9IGF3YWl0IHN0b3JlLmRpc3BhdGNoKGAkeyBpblN0b3JlIH0vY2xvbmVgLCB7IHJlc291cmNlOiBsaXZlTW9kZWwgfSk7CiAgICAgIH0KCiAgICAgIGluaXRpYWxNb2RlbCA9IGF3YWl0IHN0b3JlLmRpc3BhdGNoKGAkeyBpblN0b3JlIH0vY2xvbmVgLCB7IHJlc291cmNlOiBsaXZlTW9kZWwgfSk7CgogICAgICBpZiAoIGFzID09PSBfWUFNTCApIHsKICAgICAgICB5YW1sID0gYXdhaXQgZ2V0WWFtbCh0aGlzLiRzdG9yZSwgbGl2ZU1vZGVsKTsKICAgICAgfQoKICAgICAgaWYgKCBhcyA9PT0gX0dSQVBIICkgewogICAgICAgIHRoaXMuY2hhcnREYXRhID0gbGl2ZU1vZGVsOwogICAgICB9CgogICAgICBpZiAoIFtfQ0xPTkUsIF9JTVBPUlQsIF9TVEFHRV0uaW5jbHVkZXMocmVhbE1vZGUpICkgewogICAgICAgIG1vZGVsLmNsZWFuRm9yTmV3KCk7CiAgICAgICAgeWFtbCA9IG1vZGVsLmNsZWFuWWFtbCh5YW1sLCByZWFsTW9kZSk7CiAgICAgIH0KICAgIH0KCiAgICAvLyBFbnN1cmUgY29tbW9uIHByb3BlcnRpZXMgZXhpc3RzCiAgICBtb2RlbCA9IGF3YWl0IHN0b3JlLmRpc3BhdGNoKGAkeyBpblN0b3JlIH0vY2xlYW5Gb3JEZXRhaWxgLCBtb2RlbCk7CgogICAgY29uc3Qgb3V0ID0gewogICAgICBoYXNHcmFwaCwKICAgICAgZ2V0R3JhcGhDb25maWcsCiAgICAgIGhhc0N1c3RvbURldGFpbCwKICAgICAgaGFzQ3VzdG9tRWRpdCwKICAgICAgY2FuVmlld1lhbWwsCiAgICAgIHJlc291cmNlLAogICAgICBhcywKICAgICAgeWFtbCwKICAgICAgaW5pdGlhbE1vZGVsLAogICAgICBsaXZlTW9kZWwsCiAgICAgIG1vZGUsCiAgICAgIHZhbHVlOiBtb2RlbCwKICAgICAgbm90Rm91bmQsCiAgICB9OwoKICAgIGZvciAoIGNvbnN0IGtleSBpbiBvdXQgKSB7CiAgICAgIHRoaXNba2V5XSA9IG91dFtrZXldOwogICAgfQoKICAgIGlmICggdGhpcy5tb2RlID09PSBfQ1JFQVRFICkgewogICAgICB0aGlzLnZhbHVlLmFwcGx5RGVmYXVsdHModGhpcywgcmVhbE1vZGUpOwogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNoYXJ0RGF0YTogICAgICAgbnVsbCwKICAgICAgcmVzb3VyY2VTdWJ0eXBlOiBudWxsLAoKICAgICAgLy8gU2V0IGJ5IGZldGNoCiAgICAgIGhhc0dyYXBoOiAgICAgICAgbnVsbCwKICAgICAgaGFzQ3VzdG9tRGV0YWlsOiBudWxsLAogICAgICBoYXNDdXN0b21FZGl0OiAgIG51bGwsCiAgICAgIHJlc291cmNlOiAgICAgICAgbnVsbCwKICAgICAgYXNZYW1sOiAgICAgICAgICBudWxsLAogICAgICB5YW1sOiAgICAgICAgICAgIG51bGwsCiAgICAgIGxpdmVNb2RlbDogICAgICAgbnVsbCwKICAgICAgaW5pdGlhbE1vZGVsOiAgICBudWxsLAogICAgICBtb2RlOiAgICAgICAgICAgIG51bGwsCiAgICAgIGFzOiAgICAgICAgICAgICAgbnVsbCwKICAgICAgdmFsdWU6ICAgICAgICAgICBudWxsLAogICAgICBtb2RlbDogICAgICAgICAgIG51bGwsCiAgICAgIG5vdEZvdW5kOiAgICAgICAgbnVsbCwKICAgICAgY2FuVmlld0NoYXJ0OiAgICB0cnVlLAogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgcmVhbE1vZGUoKSB7CiAgICAgIC8vIFRoZXJlIGFyZSA1ICJyZWFsIiBtb2RlcyB0aGF0IHlvdSBjYW4gc3RhcnQgaW46IHZpZXcsIGVkaXQsIGNyZWF0ZSwgc3RhZ2UsIGNsb25lCiAgICAgIGNvbnN0IHJlYWxNb2RlID0gbW9kZUZvcih0aGlzLiRyb3V0ZSk7CgogICAgICByZXR1cm4gcmVhbE1vZGU7CiAgICB9LAoKICAgIGlzVmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX1ZJRVc7CiAgICB9LAoKICAgIGlzWWFtbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXMgPT09IF9ZQU1MOwogICAgfSwKCiAgICBpc0RldGFpbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuYXMgPT09IF9ERVRBSUw7CiAgICB9LAoKICAgIGlzR3JhcGgoKSB7CiAgICAgIHJldHVybiB0aGlzLmFzID09PSBfR1JBUEg7CiAgICB9LAoKICAgIG9mZmVyUHJldmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMuYXMgPT09IF9ZQU1MICYmIFtfRURJVCwgX0NMT05FLCBfSU1QT1JULCBfU1RBR0VdLmluY2x1ZGVzKHRoaXMubW9kZSk7CiAgICB9LAoKICAgIHNob3dDb21wb25lbnQoKSB7CiAgICAgIHN3aXRjaCAoIHRoaXMuYXMgKSB7CiAgICAgIGNhc2UgX0RFVEFJTDogcmV0dXJuIHRoaXMuZGV0YWlsQ29tcG9uZW50OwogICAgICBjYXNlIF9DT05GSUc6IHJldHVybiB0aGlzLmVkaXRDb21wb25lbnQ7CiAgICAgIH0KCiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICB9LAoKICB3YXRjaDogewogICAgJyRyb3V0ZS5xdWVyeScoaW5OZXUsIGluT2xkKSB7CiAgICAgIGNvbnN0IG5ldSA9IGNsb25lKGluTmV1KTsKICAgICAgY29uc3Qgb2xkID0gY2xvbmUoaW5PbGQpOwoKICAgICAgZGVsZXRlIG5ldVtQUkVWSUVXXTsKICAgICAgZGVsZXRlIG9sZFtQUkVWSUVXXTsKCiAgICAgIGlmICggIXRoaXMuaXNWaWV3ICkgewogICAgICAgIGRlbGV0ZSBuZXVbQVNdOwogICAgICAgIGRlbGV0ZSBvbGRbQVNdOwogICAgICB9CgogICAgICBjb25zdCBxdWVyeURpZmYgPSBPYmplY3Qua2V5cyhkaWZmKG5ldSwgb2xkKSk7CgogICAgICBpZiAoIHF1ZXJ5RGlmZi5pbmNsdWRlcyhNT0RFKSB8fCBxdWVyeURpZmYuaW5jbHVkZXMoQVMpKSB7CiAgICAgICAgdGhpcy4kZmV0Y2goKTsKICAgICAgfQogICAgfSwKCiAgICAvLyBBdXRvIHJlZnJlc2ggWUFNTCB3aGVuIHRoZSBtb2RlbCBjaGFuZ2VzCiAgICBhc3luYyAndmFsdWUubWV0YWRhdGEucmVzb3VyY2VWZXJzaW9uJyhhLCBiKSB7CiAgICAgIGlmICggdGhpcy5tb2RlID09PSBfVklFVyAmJiB0aGlzLmFzID09PSBfWUFNTCAmJiBhICYmIGIgJiYgYSAhPT0gYikgewogICAgICAgIHRoaXMueWFtbCA9IGF3YWl0IGdldFlhbWwodGhpcy4kc3RvcmUsIHRoaXMubGl2ZU1vZGVsKTsKICAgICAgfQogICAgfQogIH0sCgogIGNyZWF0ZWQoKSB7CiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgcHJlZmVyLWNvbnN0CiAgICBjb25zdCBpZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5pZDsKICAgIGNvbnN0IHJlc291cmNlID0gdGhpcy5yZXNvdXJjZU92ZXJyaWRlIHx8IHRoaXMuJHJvdXRlLnBhcmFtcy5yZXNvdXJjZTsKICAgIGNvbnN0IG9wdGlvbnMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzW2B0eXBlLW1hcC9vcHRpb25zRm9yYF0ocmVzb3VyY2UpOwoKICAgIGNvbnN0IGRldGFpbFJlc291cmNlID0gb3B0aW9ucy5yZXNvdXJjZURldGFpbCB8fCBvcHRpb25zLnJlc291cmNlIHx8IHJlc291cmNlOwogICAgY29uc3QgZWRpdFJlc291cmNlID0gb3B0aW9ucy5yZXNvdXJjZUVkaXQgfHwgb3B0aW9ucy5yZXNvdXJjZSB8fCByZXNvdXJjZTsKCiAgICAvLyBGSVhNRTogVGhlc2UgYXJlbid0IHJpZ2h0Li4uIHNpZ25hdHVyZSBpcyAocmF3VHlwZSwgc3ViVHlwZSkuLiBub3QgKHJhd1R5cGUsIHJlc291cmNlSWQpCiAgICAvLyBSZW1vdmUgaWQ/IEhvdyBkb2VzIHN1YnR5cGUgZ2V0IGluIChjbHVzdGVyL25vZGUpCiAgICB0aGlzLmRldGFpbENvbXBvbmVudCA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3R5cGUtbWFwL2ltcG9ydERldGFpbCddKGRldGFpbFJlc291cmNlLCBpZCk7CiAgICB0aGlzLmVkaXRDb21wb25lbnQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyd0eXBlLW1hcC9pbXBvcnRFZGl0J10oZWRpdFJlc291cmNlLCBpZCk7CiAgfSwKCiAgbWV0aG9kczogewogICAgc2V0U3VidHlwZShzdWJ0eXBlKSB7CiAgICAgIHRoaXMucmVzb3VyY2VTdWJ0eXBlID0gc3VidHlwZTsKICAgIH0sCgogICAga2V5QWN0aW9uKGFjdCkgewogICAgICBjb25zdCBtID0gdGhpcy5saXZlTW9kZWw7CgogICAgICBpZiAoIG0/LlthY3RdICkgewogICAgICAgIG1bYWN0XSgpOwogICAgICB9CiAgICB9LAogIH0KfTsK"},{"version":3,"sources":["index.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"index.vue","sourceRoot":"node_modules/@rancher/shell/components/ResourceDetail","sourcesContent":["<script>\nimport CreateEditView from '@shell/mixins/create-edit-view/impl';\nimport Loading from '@shell/components/Loading';\nimport ResourceYaml from '@shell/components/ResourceYaml';\nimport {\n  _VIEW, _EDIT, _CLONE, _IMPORT, _STAGE, _CREATE,\n  AS, _YAML, _DETAIL, _CONFIG, _GRAPH, PREVIEW, MODE,\n} from '@shell/config/query-params';\nimport { FLEET, SCHEMA } from '@shell/config/types';\nimport { createYaml } from '@shell/utils/create-yaml';\nimport Masthead from '@shell/components/ResourceDetail/Masthead';\nimport DetailTop from '@shell/components/DetailTop';\nimport { clone, diff } from '@shell/utils/object';\nimport IconMessage from '@shell/components/IconMessage';\nimport ForceDirectedTreeChart from '@shell/components/fleet/ForceDirectedTreeChart';\nimport { checkSchemasForFindAllHash } from '@shell/utils/auth';\n\nfunction modeFor(route) {\n  if ( route.query?.mode === _IMPORT ) {\n    return _IMPORT;\n  }\n\n  if ( route.params?.id ) {\n    return route.query.mode || _VIEW;\n  } else {\n    return _CREATE;\n  }\n}\n\nasync function getYaml(store, model) {\n  const inStore = store.getters['currentStore'](model.type);\n  let yaml;\n  const opt = { headers: { accept: 'application/yaml' } };\n\n  if ( model.hasLink('view') ) {\n    yaml = (await model.followLink('view', opt)).data;\n  }\n\n  const cleanedYaml = await store.dispatch(`${ inStore }/cleanForDownload`, yaml);\n\n  return cleanedYaml;\n}\n\nexport default {\n  components: {\n    Loading,\n    DetailTop,\n    ForceDirectedTreeChart,\n    ResourceYaml,\n    Masthead,\n    IconMessage,\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    storeOverride: {\n      type:    String,\n      default: null,\n    },\n\n    resourceOverride: {\n      type:    String,\n      default: null,\n    },\n\n    parentRouteOverride: {\n      type:    String,\n      default: null,\n    },\n\n    flexContent: {\n      type:    Boolean,\n      default: false,\n    },\n\n    /**\n     * Inherited global identifier prefix for tests\n     * Define a term based on the parent component to avoid conflicts on multiple components\n     */\n    componentTestid: {\n      type:    String,\n      default: 'resource-details'\n    }\n  },\n\n  async fetch() {\n    const store = this.$store;\n    const route = this.$route;\n    const params = route.params;\n    let resource = this.resourceOverride || params.resource;\n\n    const inStore = this.storeOverride || store.getters['currentStore'](resource);\n    const realMode = this.realMode;\n\n    // eslint-disable-next-line prefer-const\n    let { namespace, id } = params;\n\n    // There are 6 \"real\" modes that can be put into the query string\n    // These are mapped down to the 3 regular page \"mode\"s that create-edit-view components\n    // know about:  view, edit, create (stage, import and clone become \"create\")\n    const mode = ([_CLONE, _IMPORT, _STAGE].includes(realMode) ? _CREATE : realMode);\n\n    const getGraphConfig = store.getters['type-map/hasGraph'](resource);\n    const hasGraph = !!getGraphConfig;\n    const hasCustomDetail = store.getters['type-map/hasCustomDetail'](resource, id);\n    const hasCustomEdit = store.getters['type-map/hasCustomEdit'](resource, id);\n\n    const schemas = store.getters[`${ inStore }/all`](SCHEMA);\n\n    // As determines what component will be rendered\n    const requested = route.query[AS];\n    let as;\n    let notFound = false;\n\n    if ( mode === _VIEW && hasCustomDetail && (!requested || requested === _DETAIL) ) {\n      as = _DETAIL;\n    } else if ( mode === _VIEW && hasGraph && requested === _GRAPH) {\n      as = _GRAPH;\n    } else if ( hasCustomEdit && (!requested || requested === _CONFIG) ) {\n      as = _CONFIG;\n    } else {\n      as = _YAML;\n    }\n\n    this.as = as;\n\n    const options = store.getters[`type-map/optionsFor`](resource);\n\n    this.showMasthead = [_CREATE, _EDIT].includes(mode) ? options.resourceEditMasthead : true;\n    const canViewYaml = options.canYaml;\n\n    if ( options.resource ) {\n      resource = options.resource;\n    }\n\n    const schema = store.getters[`${ inStore }/schemaFor`](resource);\n    let model, initialModel, liveModel, yaml;\n\n    if ( realMode === _CREATE || realMode === _IMPORT ) {\n      if ( !namespace ) {\n        namespace = store.getters['defaultNamespace'];\n      }\n\n      const data = { type: resource };\n\n      if ( schema?.attributes?.namespaced ) {\n        data.metadata = { namespace };\n      }\n\n      liveModel = await store.dispatch(`${ inStore }/create`, data);\n      initialModel = await store.dispatch(`${ inStore }/clone`, { resource: liveModel });\n      model = await store.dispatch(`${ inStore }/clone`, { resource: liveModel });\n\n      if (model.forceYaml === true) {\n        as = _YAML;\n        this.as = as;\n      }\n\n      if ( as === _YAML ) {\n        yaml = createYaml(schemas, resource, data);\n      }\n    } else {\n      if ( as === _GRAPH ) {\n        const graphSchema = await checkSchemasForFindAllHash({\n          cluster: {\n            inStoreType: 'management',\n            type:        FLEET.CLUSTER\n          },\n          bundle: {\n            inStoreType: 'management',\n            type:        FLEET.BUNDLE\n          },\n\n          bundleDeployment: {\n            inStoreType: 'management',\n            type:        FLEET.BUNDLE_DEPLOYMENT\n          }\n\n        }, this.$store);\n\n        this.canViewChart = graphSchema.cluster && graphSchema.bundle && graphSchema.bundleDeployment;\n      }\n\n      let fqid = id;\n\n      if ( schema.attributes?.namespaced && namespace ) {\n        fqid = `${ namespace }/${ fqid }`;\n      }\n\n      try {\n        liveModel = await store.dispatch(`${ inStore }/find`, {\n          type: resource,\n          id:   fqid,\n          opt:  { watch: true }\n        });\n      } catch (e) {\n        if (e.status === 404 || e.status === 403) {\n          store.dispatch('loadingError', new Error(this.t('nav.failWhale.resourceIdNotFound', { resource, fqid }, true)));\n        }\n        liveModel = {};\n        notFound = fqid;\n      }\n\n      if (realMode === _VIEW) {\n        model = liveModel;\n      } else {\n        model = await store.dispatch(`${ inStore }/clone`, { resource: liveModel });\n      }\n\n      initialModel = await store.dispatch(`${ inStore }/clone`, { resource: liveModel });\n\n      if ( as === _YAML ) {\n        yaml = await getYaml(this.$store, liveModel);\n      }\n\n      if ( as === _GRAPH ) {\n        this.chartData = liveModel;\n      }\n\n      if ( [_CLONE, _IMPORT, _STAGE].includes(realMode) ) {\n        model.cleanForNew();\n        yaml = model.cleanYaml(yaml, realMode);\n      }\n    }\n\n    // Ensure common properties exists\n    model = await store.dispatch(`${ inStore }/cleanForDetail`, model);\n\n    const out = {\n      hasGraph,\n      getGraphConfig,\n      hasCustomDetail,\n      hasCustomEdit,\n      canViewYaml,\n      resource,\n      as,\n      yaml,\n      initialModel,\n      liveModel,\n      mode,\n      value: model,\n      notFound,\n    };\n\n    for ( const key in out ) {\n      this[key] = out[key];\n    }\n\n    if ( this.mode === _CREATE ) {\n      this.value.applyDefaults(this, realMode);\n    }\n  },\n  data() {\n    return {\n      chartData:       null,\n      resourceSubtype: null,\n\n      // Set by fetch\n      hasGraph:        null,\n      hasCustomDetail: null,\n      hasCustomEdit:   null,\n      resource:        null,\n      asYaml:          null,\n      yaml:            null,\n      liveModel:       null,\n      initialModel:    null,\n      mode:            null,\n      as:              null,\n      value:           null,\n      model:           null,\n      notFound:        null,\n      canViewChart:    true,\n    };\n  },\n\n  computed: {\n    realMode() {\n      // There are 5 \"real\" modes that you can start in: view, edit, create, stage, clone\n      const realMode = modeFor(this.$route);\n\n      return realMode;\n    },\n\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    isYaml() {\n      return this.as === _YAML;\n    },\n\n    isDetail() {\n      return this.as === _DETAIL;\n    },\n\n    isGraph() {\n      return this.as === _GRAPH;\n    },\n\n    offerPreview() {\n      return this.as === _YAML && [_EDIT, _CLONE, _IMPORT, _STAGE].includes(this.mode);\n    },\n\n    showComponent() {\n      switch ( this.as ) {\n      case _DETAIL: return this.detailComponent;\n      case _CONFIG: return this.editComponent;\n      }\n\n      return null;\n    },\n  },\n\n  watch: {\n    '$route.query'(inNeu, inOld) {\n      const neu = clone(inNeu);\n      const old = clone(inOld);\n\n      delete neu[PREVIEW];\n      delete old[PREVIEW];\n\n      if ( !this.isView ) {\n        delete neu[AS];\n        delete old[AS];\n      }\n\n      const queryDiff = Object.keys(diff(neu, old));\n\n      if ( queryDiff.includes(MODE) || queryDiff.includes(AS)) {\n        this.$fetch();\n      }\n    },\n\n    // Auto refresh YAML when the model changes\n    async 'value.metadata.resourceVersion'(a, b) {\n      if ( this.mode === _VIEW && this.as === _YAML && a && b && a !== b) {\n        this.yaml = await getYaml(this.$store, this.liveModel);\n      }\n    }\n  },\n\n  created() {\n    // eslint-disable-next-line prefer-const\n    const id = this.$route.params.id;\n    const resource = this.resourceOverride || this.$route.params.resource;\n    const options = this.$store.getters[`type-map/optionsFor`](resource);\n\n    const detailResource = options.resourceDetail || options.resource || resource;\n    const editResource = options.resourceEdit || options.resource || resource;\n\n    // FIXME: These aren't right... signature is (rawType, subType).. not (rawType, resourceId)\n    // Remove id? How does subtype get in (cluster/node)\n    this.detailComponent = this.$store.getters['type-map/importDetail'](detailResource, id);\n    this.editComponent = this.$store.getters['type-map/importEdit'](editResource, id);\n  },\n\n  methods: {\n    setSubtype(subtype) {\n      this.resourceSubtype = subtype;\n    },\n\n    keyAction(act) {\n      const m = this.liveModel;\n\n      if ( m?.[act] ) {\n        m[act]();\n      }\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending || notFound\" />\n  <div v-else>\n    <Masthead\n      v-if=\"showMasthead\"\n      :resource=\"resource\"\n      :value=\"liveModel\"\n      :mode=\"mode\"\n      :real-mode=\"realMode\"\n      :as=\"as\"\n      :has-graph=\"hasGraph\"\n      :has-detail=\"hasCustomDetail\"\n      :has-edit=\"hasCustomEdit\"\n      :can-view-yaml=\"canViewYaml\"\n      :resource-subtype=\"resourceSubtype\"\n      :parent-route-override=\"parentRouteOverride\"\n      :store-override=\"storeOverride\"\n    >\n      <DetailTop\n        v-if=\"isView && isDetail\"\n        :value=\"liveModel\"\n      />\n    </Masthead>\n\n    <ForceDirectedTreeChart\n      v-if=\"isGraph && canViewChart\"\n      :data=\"chartData\"\n      :fdc-config=\"getGraphConfig\"\n    />\n\n    <ResourceYaml\n      v-else-if=\"isYaml\"\n      ref=\"resourceyaml\"\n      v-model=\"value\"\n      :mode=\"mode\"\n      :yaml=\"yaml\"\n      :offer-preview=\"offerPreview\"\n      :done-route=\"doneRoute\"\n      :done-override=\"value.doneOverride\"\n      :class=\"{'flex-content': flexContent}\"\n    />\n\n    <component\n      :is=\"showComponent\"\n      v-else\n      ref=\"comp\"\n      v-model=\"value\"\n      v-bind=\"_data\"\n      :done-params=\"doneParams\"\n      :done-route=\"doneRoute\"\n      :mode=\"mode\"\n      :initial-value=\"initialModel\"\n      :live-value=\"liveModel\"\n      :real-mode=\"realMode\"\n      :class=\"{'flex-content': flexContent}\"\n      @set-subtype=\"setSubtype\"\n    />\n\n    <button\n      v-if=\"isView\"\n      v-shortkey.once=\"['shift','d']\"\n      :data-testid=\"componentTestid + '-detail'\"\n      class=\"hide\"\n      @shortkey=\"keyAction('goToDetail')\"\n    />\n    <button\n      v-if=\"isView\"\n      v-shortkey.once=\"['shift','c']\"\n      :data-testid=\"componentTestid + '-config'\"\n      class=\"hide\"\n      @shortkey=\"keyAction('goToViewConfig')\"\n    />\n    <button\n      v-if=\"isView\"\n      v-shortkey.once=\"['shift','y']\"\n      :data-testid=\"componentTestid + '-yaml'\"\n      class=\"hide\"\n      @shortkey=\"keyAction('goToViewYaml')\"\n    />\n    <button\n      v-if=\"isView\"\n      v-shortkey.once=\"['shift','e']\"\n      :data-testid=\"componentTestid + '-edit'\"\n      class=\"hide\"\n      @shortkey=\"keyAction('goToEdit')\"\n    />\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.flex-content {\n  display: flex;\n  flex-direction: column;\n  flex-grow: 1;\n}\n</style>\n"]}]}