{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/MatchExpressions.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/MatchExpressions.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IE5PREUsIFBPRCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vU2VsZWN0JzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBpc0FycmF5LCByZW1vdmVPYmplY3QgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwppbXBvcnQgeyBjbG9uZSB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgeyBjb252ZXJ0LCBzaW1wbGlmeSB9IGZyb20gJ0BzaGVsbC91dGlscy9zZWxlY3Rvcic7CmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogeyBTZWxlY3QsIExhYmVsZWRTZWxlY3QgfSwKICBwcm9wczogICAgICB7CiAgICAvLyBBcnJheSBvZiBhY3R1YWwgbWF0Y2ggZXhwcmVzc2lvbnMKICAgIC8vIG9yIGs4cyBzZWxlY3RvciBPYmplY3Qgb2Yge21hdGNoRXhwcmVzc2lvbnMsIG1hdGNoTGFiZWxzfQogICAgdmFsdWU6IHsKICAgICAgdHlwZTogICAgW0FycmF5LCBPYmplY3RdLAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfSwKCiAgICAvLyBDUlUgbW9kZQogICAgbW9kZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdlZGl0JwogICAgfSwKCiAgICAvLyBwb2Qvbm9kZSBhZmZpbml0eSB0eXBlcyBoYXZlIGRpZmZlcmVudCBvcGVyYXRvciBvcHRpb25zCiAgICB0eXBlOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogTk9ERQogICAgfSwKCiAgICAvLyBoYXMgc2VsZWN0IGZvciBtYXRjaGluZyBmaWVsZHMgb3IgZXhwcmVzc2lvbnMgKHVzZWQgZm9yIG5vZGUgYWZmaW5pdHkpCiAgICAvLyBodHRwczovL2t1YmVybmV0ZXMuaW8vZG9jcy9yZWZlcmVuY2UvZ2VuZXJhdGVkL2t1YmVybmV0ZXMtYXBpL3YxLjI1LyNub2Rlc2VsZWN0b3J0ZXJtLXYxLWNvcmUKICAgIG1hdGNoaW5nU2VsZWN0b3JEaXNwbGF5OiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKCiAgICAvLyB3aGV0aGVyIG9yIG5vdCB0byBzaG93IGFuIGluaXRpYWwgZW1wdHkgcm93IG9mIGlucHV0cyB3aGVuIHZhbHVlIGlzIGVtcHR5IGluIGVkaXRpbmcgbW9kZXMKICAgIGluaXRpYWxFbXB0eVJvdzogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCgogICAgLy8gd2hldGhlciBvciBub3QgdG8gc2hvdyBhZGQgcnVsZSBidXR0b24gYXQgYm90dG9tCiAgICBzaG93QWRkQnV0dG9uOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUKICAgIH0sCgogICAgLy8gd2hldGhlciBvciBub3QgdG8gc2hvdyByZW1vdmUgcnVsZSBidXR0b24gcmlnaHQgc2lkZSBvZiB0aGUgcnVsZQogICAgc2hvd1JlbW92ZUJ1dHRvbjogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAoKICAgIC8vIHdoZXRoZXIgb3Igbm90IHRvIHNob3cgcmVtb3ZlIGJ1dHRvbiBpbiB1cHBlciByaWdodAogICAgc2hvd1JlbW92ZTogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAoKICAgIC8vIGlmIG9wdGlvbnMgYXJlIHBhc3NlZCBmb3Iga2V5cywgdGhlbiB0aGUga2V5J3MgaW5wdXQgd2lsbCBiZWNvbWUgYSBzZWxlY3QKICAgIGtleXNTZWxlY3RPcHRpb25zOiB7CiAgICAgIHR5cGU6ICAgIEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICBjb25zdCB0ID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi90J107CgogICAgY29uc3QgcG9kT3B0aW9ucyA9IFsKICAgICAgeyBsYWJlbDogdCgnd29ya2xvYWQuc2NoZWR1bGluZy5hZmZpbml0eS5tYXRjaEV4cHJlc3Npb25zLmluJyksIHZhbHVlOiAnSW4nIH0sCiAgICAgIHsgbGFiZWw6IHQoJ3dvcmtsb2FkLnNjaGVkdWxpbmcuYWZmaW5pdHkubWF0Y2hFeHByZXNzaW9ucy5ub3RJbicpLCB2YWx1ZTogJ05vdEluJyB9LAogICAgICB7IGxhYmVsOiB0KCd3b3JrbG9hZC5zY2hlZHVsaW5nLmFmZmluaXR5Lm1hdGNoRXhwcmVzc2lvbnMuZXhpc3RzJyksIHZhbHVlOiAnRXhpc3RzJyB9LAogICAgICB7IGxhYmVsOiB0KCd3b3JrbG9hZC5zY2hlZHVsaW5nLmFmZmluaXR5Lm1hdGNoRXhwcmVzc2lvbnMuZG9lc05vdEV4aXN0JyksIHZhbHVlOiAnRG9lc05vdEV4aXN0JyB9LAogICAgXTsKCiAgICBjb25zdCBub2RlT3B0aW9ucyA9IFsKICAgICAgeyBsYWJlbDogdCgnd29ya2xvYWQuc2NoZWR1bGluZy5hZmZpbml0eS5tYXRjaEV4cHJlc3Npb25zLmluJyksIHZhbHVlOiAnSW4nIH0sCiAgICAgIHsgbGFiZWw6IHQoJ3dvcmtsb2FkLnNjaGVkdWxpbmcuYWZmaW5pdHkubWF0Y2hFeHByZXNzaW9ucy5ub3RJbicpLCB2YWx1ZTogJ05vdEluJyB9LAogICAgICB7IGxhYmVsOiB0KCd3b3JrbG9hZC5zY2hlZHVsaW5nLmFmZmluaXR5Lm1hdGNoRXhwcmVzc2lvbnMuZXhpc3RzJyksIHZhbHVlOiAnRXhpc3RzJyB9LAogICAgICB7IGxhYmVsOiB0KCd3b3JrbG9hZC5zY2hlZHVsaW5nLmFmZmluaXR5Lm1hdGNoRXhwcmVzc2lvbnMuZG9lc05vdEV4aXN0JyksIHZhbHVlOiAnRG9lc05vdEV4aXN0JyB9LAogICAgICB7IGxhYmVsOiB0KCd3b3JrbG9hZC5zY2hlZHVsaW5nLmFmZmluaXR5Lm1hdGNoRXhwcmVzc2lvbnMubGVzc1RoYW4nKSwgdmFsdWU6ICdMdCcgfSwKICAgICAgeyBsYWJlbDogdCgnd29ya2xvYWQuc2NoZWR1bGluZy5hZmZpbml0eS5tYXRjaEV4cHJlc3Npb25zLmdyZWF0ZXJUaGFuJyksIHZhbHVlOiAnR3QnIH0sCiAgICBdOwoKICAgIGNvbnN0IG9wcyA9IHRoaXMudHlwZSA9PT0gTk9ERSA/IG5vZGVPcHRpb25zIDogcG9kT3B0aW9uczsKCiAgICBsZXQgcnVsZXM7CgogICAgLy8gc3BlY2lhbCBjYXNlIGZvciBtYXRjaEZpZWxkcyBhbmQgbWF0Y2hFeHByZXNzaW9ucwogICAgLy8gaHR0cHM6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvcmVmZXJlbmNlL2dlbmVyYXRlZC9rdWJlcm5ldGVzLWFwaS92MS4yNS8jbm9kZXNlbGVjdG9ydGVybS12MS1jb3JlCiAgICBpZiAoIHRoaXMubWF0Y2hpbmdTZWxlY3RvckRpc3BsYXkpIHsKICAgICAgY29uc3QgcnVsZXNCeVR5cGUgPSB7CiAgICAgICAgbWF0Y2hGaWVsZHM6ICAgICAgW10sCiAgICAgICAgbWF0Y2hFeHByZXNzaW9uczogW10KICAgICAgfTsKCiAgICAgIFsnbWF0Y2hGaWVsZHMnLCAnbWF0Y2hFeHByZXNzaW9ucyddLmZvckVhY2goKHR5cGUpID0+IHsKICAgICAgICBydWxlc0J5VHlwZVt0eXBlXSA9IHRoaXMucGFyc2VSdWxlcyh0aGlzLnZhbHVlW3R5cGVdLCB0eXBlKTsKICAgICAgfSk7CgogICAgICBydWxlcyA9IFsuLi5ydWxlc0J5VHlwZS5tYXRjaEZpZWxkcywgLi4ucnVsZXNCeVR5cGUubWF0Y2hFeHByZXNzaW9uc107CiAgICB9IGVsc2UgaWYgKCBpc0FycmF5KHRoaXMudmFsdWUpICkgewogICAgICBydWxlcyA9IFsuLi50aGlzLnZhbHVlXTsKICAgICAgcnVsZXMgPSB0aGlzLnBhcnNlUnVsZXMocnVsZXMpOwogICAgfSBlbHNlIHsKICAgICAgcnVsZXMgPSBjb252ZXJ0KHRoaXMudmFsdWUubWF0Y2hMYWJlbHMsIHRoaXMudmFsdWUubWF0Y2hFeHByZXNzaW9ucyk7CiAgICAgIHJ1bGVzID0gdGhpcy5wYXJzZVJ1bGVzKHJ1bGVzKTsKICAgIH0KCiAgICBpZiAoIXJ1bGVzLmxlbmd0aCAmJiB0aGlzLmluaXRpYWxFbXB0eVJvdyAmJiAhdGhpcy5pc1ZpZXcpIHsKICAgICAgY29uc3QgbmV3UnVsZSA9IHsKICAgICAgICBrZXk6ICAgICAgJycsCiAgICAgICAgb3BlcmF0b3I6ICdJbicsCiAgICAgICAgdmFsdWVzOiAgICcnCiAgICAgIH07CgogICAgICBpZiAodGhpcy5tYXRjaGluZ1NlbGVjdG9yRGlzcGxheSkgewogICAgICAgIG5ld1J1bGUubWF0Y2hpbmcgPSAnbWF0Y2hFeHByZXNzaW9ucyc7CiAgICAgIH0KCiAgICAgIHJ1bGVzLnB1c2gobmV3UnVsZSk7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgb3BzLAogICAgICBydWxlcywKICAgICAgY3VzdG9tOiBbXQogICAgfTsKICB9LAoKICBjb21wdXRlZDogewogICAgaXNWaWV3KCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSAndmlldyc7CiAgICB9LAoKICAgIG5vZGUoKSB7CiAgICAgIHJldHVybiBOT0RFOwogICAgfSwKCiAgICBwb2QoKSB7CiAgICAgIHJldHVybiBQT0Q7CiAgICB9LAoKICAgIGhhc0tleVNlbGVjdE9wdGlvbnMoKSB7CiAgICAgIHJldHVybiAhIXRoaXMua2V5c1NlbGVjdE9wdGlvbnM/Lmxlbmd0aDsKICAgIH0sCgogICAgbWF0Y2hpbmdTZWxlY3RPcHRpb25zKCkgewogICAgICByZXR1cm4gWwogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ3dvcmtsb2FkLnNjaGVkdWxpbmcuYWZmaW5pdHkubWF0Y2hFeHByZXNzaW9ucy5sYWJlbCcpLAogICAgICAgICAgdmFsdWU6ICdtYXRjaEV4cHJlc3Npb25zJywKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ3dvcmtsb2FkLnNjaGVkdWxpbmcuYWZmaW5pdHkubWF0Y2hGaWVsZHMubGFiZWwnKSwKICAgICAgICAgIHZhbHVlOiAnbWF0Y2hGaWVsZHMnLAogICAgICAgIH0sCiAgICAgIF07CiAgICB9LAoKICAgIC4uLm1hcEdldHRlcnMoeyB0OiAnaTE4bi90JyB9KQogIH0sCgogIG1ldGhvZHM6IHsKICAgIHBhcnNlUnVsZXMocnVsZXMsIG1hdGNoaW5nKSB7CiAgICAgIGlmIChydWxlcz8ubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuIHJ1bGVzLm1hcCgocnVsZSkgPT4gewogICAgICAgICAgY29uc3QgbmV3UnVsZSA9IGNsb25lKHJ1bGUpOwoKICAgICAgICAgIGlmIChuZXdSdWxlLnZhbHVlcyAmJiB0eXBlb2YgbmV3UnVsZS52YWx1ZXMgIT09ICdzdHJpbmcnKSB7CiAgICAgICAgICAgIG5ld1J1bGUudmFsdWVzID0gbmV3UnVsZS52YWx1ZXMuam9pbignLCAnKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAobWF0Y2hpbmcpIHsKICAgICAgICAgICAgbmV3UnVsZS5tYXRjaGluZyA9IG1hdGNoaW5nOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBuZXdSdWxlOwogICAgICAgIH0pOwogICAgICB9CgogICAgICByZXR1cm4gW107CiAgICB9LAoKICAgIHJlbW92ZVJ1bGUocm93KSB7CiAgICAgIHJlbW92ZU9iamVjdCh0aGlzLnJ1bGVzLCByb3cpOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfSwKCiAgICBhZGRSdWxlKCkgewogICAgICBjb25zdCBuZXdSdWxlID0gewogICAgICAgIGtleTogICAgICAnJywKICAgICAgICBvcGVyYXRvcjogJ0luJywKICAgICAgICB2YWx1ZXM6ICAgJycKICAgICAgfTsKCiAgICAgIGlmICh0aGlzLm1hdGNoaW5nU2VsZWN0b3JEaXNwbGF5KSB7CiAgICAgICAgbmV3UnVsZS5tYXRjaGluZyA9ICdtYXRjaEV4cHJlc3Npb25zJzsKICAgICAgfQoKICAgICAgdGhpcy5ydWxlcy5wdXNoKG5ld1J1bGUpOwogICAgfSwKCiAgICB1cGRhdGUoKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICBjb25zdCBvdXQgPSB0aGlzLnJ1bGVzLm1hcCgocnVsZSkgPT4gewogICAgICAgICAgY29uc3QgZXhwcmVzc2lvbiA9IHsga2V5OiBydWxlLmtleSwgb3BlcmF0b3I6IHJ1bGUub3BlcmF0b3IgfTsKCiAgICAgICAgICBpZiAodGhpcy5tYXRjaGluZ1NlbGVjdG9yRGlzcGxheSkgewogICAgICAgICAgICBleHByZXNzaW9uLm1hdGNoaW5nID0gcnVsZS5tYXRjaGluZzsKICAgICAgICAgIH0KCiAgICAgICAgICBsZXQgdmFsID0gKHJ1bGUudmFsdWVzIHx8ICcnKS50cmltKCk7CgogICAgICAgICAgaWYgKCBydWxlLm9wZXJhdG9yID09PSAnRXhpc3RzJyB8fCBydWxlLm9wZXJhdG9yID09PSAnRG9lc05vdEV4aXN0JykgewogICAgICAgICAgICB2YWwgPSBudWxsOwogICAgICAgICAgfQoKICAgICAgICAgIGlmICggdmFsICE9PSBudWxsICkgewogICAgICAgICAgICBleHByZXNzaW9uLnZhbHVlcyA9IHZhbC5zcGxpdCgvXHMqLFxzKi8pOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBleHByZXNzaW9uOwogICAgICAgIH0pLmZpbHRlcigoeCkgPT4gISF4KTsKCiAgICAgICAgaWYgKCBpc0FycmF5KHRoaXMudmFsdWUpIHx8IHRoaXMubWF0Y2hpbmdTZWxlY3RvckRpc3BsYXkgKSB7CiAgICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIG91dCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0Jywgc2ltcGxpZnkob3V0KSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["MatchExpressions.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MatchExpressions.vue","sourceRoot":"node_modules/@rancher/shell/components/form","sourcesContent":["<script>\nimport { NODE, POD } from '@shell/config/types';\nimport Select from '@shell/components/form/Select';\nimport { mapGetters } from 'vuex';\nimport { isArray, removeObject } from '@shell/utils/array';\nimport { clone } from '@shell/utils/object';\nimport { convert, simplify } from '@shell/utils/selector';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\n\nexport default {\n  components: { Select, LabeledSelect },\n  props:      {\n    // Array of actual match expressions\n    // or k8s selector Object of {matchExpressions, matchLabels}\n    value: {\n      type:    [Array, Object],\n      default: () => []\n    },\n\n    // CRU mode\n    mode: {\n      type:    String,\n      default: 'edit'\n    },\n\n    // pod/node affinity types have different operator options\n    type: {\n      type:    String,\n      default: NODE\n    },\n\n    // has select for matching fields or expressions (used for node affinity)\n    // https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.25/#nodeselectorterm-v1-core\n    matchingSelectorDisplay: {\n      type:    Boolean,\n      default: false,\n    },\n\n    // whether or not to show an initial empty row of inputs when value is empty in editing modes\n    initialEmptyRow: {\n      type:    Boolean,\n      default: false,\n    },\n\n    // whether or not to show add rule button at bottom\n    showAddButton: {\n      type:    Boolean,\n      default: true\n    },\n\n    // whether or not to show remove rule button right side of the rule\n    showRemoveButton: {\n      type:    Boolean,\n      default: true\n    },\n\n    // whether or not to show remove button in upper right\n    showRemove: {\n      type:    Boolean,\n      default: true\n    },\n\n    // if options are passed for keys, then the key's input will become a select\n    keysSelectOptions: {\n      type:    Array,\n      default: () => []\n    }\n  },\n\n  data() {\n    const t = this.$store.getters['i18n/t'];\n\n    const podOptions = [\n      { label: t('workload.scheduling.affinity.matchExpressions.in'), value: 'In' },\n      { label: t('workload.scheduling.affinity.matchExpressions.notIn'), value: 'NotIn' },\n      { label: t('workload.scheduling.affinity.matchExpressions.exists'), value: 'Exists' },\n      { label: t('workload.scheduling.affinity.matchExpressions.doesNotExist'), value: 'DoesNotExist' },\n    ];\n\n    const nodeOptions = [\n      { label: t('workload.scheduling.affinity.matchExpressions.in'), value: 'In' },\n      { label: t('workload.scheduling.affinity.matchExpressions.notIn'), value: 'NotIn' },\n      { label: t('workload.scheduling.affinity.matchExpressions.exists'), value: 'Exists' },\n      { label: t('workload.scheduling.affinity.matchExpressions.doesNotExist'), value: 'DoesNotExist' },\n      { label: t('workload.scheduling.affinity.matchExpressions.lessThan'), value: 'Lt' },\n      { label: t('workload.scheduling.affinity.matchExpressions.greaterThan'), value: 'Gt' },\n    ];\n\n    const ops = this.type === NODE ? nodeOptions : podOptions;\n\n    let rules;\n\n    // special case for matchFields and matchExpressions\n    // https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.25/#nodeselectorterm-v1-core\n    if ( this.matchingSelectorDisplay) {\n      const rulesByType = {\n        matchFields:      [],\n        matchExpressions: []\n      };\n\n      ['matchFields', 'matchExpressions'].forEach((type) => {\n        rulesByType[type] = this.parseRules(this.value[type], type);\n      });\n\n      rules = [...rulesByType.matchFields, ...rulesByType.matchExpressions];\n    } else if ( isArray(this.value) ) {\n      rules = [...this.value];\n      rules = this.parseRules(rules);\n    } else {\n      rules = convert(this.value.matchLabels, this.value.matchExpressions);\n      rules = this.parseRules(rules);\n    }\n\n    if (!rules.length && this.initialEmptyRow && !this.isView) {\n      const newRule = {\n        key:      '',\n        operator: 'In',\n        values:   ''\n      };\n\n      if (this.matchingSelectorDisplay) {\n        newRule.matching = 'matchExpressions';\n      }\n\n      rules.push(newRule);\n    }\n\n    return {\n      ops,\n      rules,\n      custom: []\n    };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === 'view';\n    },\n\n    node() {\n      return NODE;\n    },\n\n    pod() {\n      return POD;\n    },\n\n    hasKeySelectOptions() {\n      return !!this.keysSelectOptions?.length;\n    },\n\n    matchingSelectOptions() {\n      return [\n        {\n          label: this.t('workload.scheduling.affinity.matchExpressions.label'),\n          value: 'matchExpressions',\n        },\n        {\n          label: this.t('workload.scheduling.affinity.matchFields.label'),\n          value: 'matchFields',\n        },\n      ];\n    },\n\n    ...mapGetters({ t: 'i18n/t' })\n  },\n\n  methods: {\n    parseRules(rules, matching) {\n      if (rules?.length) {\n        return rules.map((rule) => {\n          const newRule = clone(rule);\n\n          if (newRule.values && typeof newRule.values !== 'string') {\n            newRule.values = newRule.values.join(', ');\n          }\n\n          if (matching) {\n            newRule.matching = matching;\n          }\n\n          return newRule;\n        });\n      }\n\n      return [];\n    },\n\n    removeRule(row) {\n      removeObject(this.rules, row);\n      this.update();\n    },\n\n    addRule() {\n      const newRule = {\n        key:      '',\n        operator: 'In',\n        values:   ''\n      };\n\n      if (this.matchingSelectorDisplay) {\n        newRule.matching = 'matchExpressions';\n      }\n\n      this.rules.push(newRule);\n    },\n\n    update() {\n      this.$nextTick(() => {\n        const out = this.rules.map((rule) => {\n          const expression = { key: rule.key, operator: rule.operator };\n\n          if (this.matchingSelectorDisplay) {\n            expression.matching = rule.matching;\n          }\n\n          let val = (rule.values || '').trim();\n\n          if ( rule.operator === 'Exists' || rule.operator === 'DoesNotExist') {\n            val = null;\n          }\n\n          if ( val !== null ) {\n            expression.values = val.split(/\\s*,\\s*/);\n          }\n\n          return expression;\n        }).filter((x) => !!x);\n\n        if ( isArray(this.value) || this.matchingSelectorDisplay ) {\n          this.$emit('input', out);\n        } else {\n          this.$emit('input', simplify(out));\n        }\n      });\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <button\n      v-if=\"showRemove && !isView\"\n      type=\"button\"\n      class=\"btn role-link remove-expression\"\n      @click=\"$emit('remove')\"\n    >\n      <i class=\"icon icon-x\" />\n    </button>\n\n    <div\n      v-if=\"rules.length\"\n      class=\"match-expression-header\"\n      :class=\"{ 'view':isView, 'match-expression-header-matching': matchingSelectorDisplay }\"\n    >\n      <label v-if=\"matchingSelectorDisplay\">\n        {{ t('workload.scheduling.affinity.matchExpressions.matchType') }}\n      </label>\n      <label>\n        {{ t('workload.scheduling.affinity.matchExpressions.key') }}\n      </label>\n      <label>\n        {{ t('workload.scheduling.affinity.matchExpressions.operator') }}\n      </label>\n      <label>\n        {{ t('workload.scheduling.affinity.matchExpressions.value') }}\n      </label>\n      <span />\n    </div>\n    <div\n      v-for=\"(row, index) in rules\"\n      :key=\"row.id\"\n      class=\"match-expression-row\"\n      :class=\"{'view':isView, 'mb-10': index !== rules.length - 1, 'match-expression-row-matching': matchingSelectorDisplay}\"\n    >\n      <!-- Select for matchFields and matchExpressions -->\n      <div\n        v-if=\"matchingSelectorDisplay\"\n        :data-testid=\"`input-match-type-field-${index}`\"\n      >\n        <div v-if=\"isView\">\n          {{ row.matching }}\n        </div>\n        <LabeledSelect\n          v-else\n          v-model=\"row.matching\"\n          :mode=\"mode\"\n          :options=\"matchingSelectOptions\"\n          :data-testid=\"`input-match-type-field-control-${index}`\"\n          @selecting=\"update\"\n        />\n      </div>\n      <div\n        :data-testid=\"`input-match-expression-key-${index}`\"\n      >\n        <div v-if=\"isView\">\n          {{ row.key }}\n        </div>\n        <input\n          v-else-if=\"!hasKeySelectOptions\"\n          v-model=\"row.key\"\n          :mode=\"mode\"\n          :data-testid=\"`input-match-expression-key-control-${index}`\"\n          @input=\"update\"\n        >\n        <LabeledSelect\n          v-else\n          v-model=\"row.key\"\n          :mode=\"mode\"\n          :options=\"keysSelectOptions\"\n          :data-testid=\"`input-match-expression-key-control-select-${index}`\"\n        />\n      </div>\n      <div\n        :data-testid=\"`input-match-expression-operator-${index}`\"\n      >\n        <div v-if=\"isView\">\n          {{ row.operator }}\n        </div>\n        <Select\n          v-else\n          v-model=\"row.operator\"\n          class=\"operator single\"\n          :options=\"ops\"\n          :clearable=\"false\"\n          :reduce=\"opt=>opt.value\"\n          :mode=\"mode\"\n          :data-testid=\"`input-match-expression-operator-control-${index}`\"\n          @input=\"update\"\n        />\n      </div>\n\n      <div\n        v-if=\"row.operator==='Exists' || row.operator==='DoesNotExist'\"\n        class=\"no-value\"\n      >\n        <label class=\"text-muted\">&hellip;</label>\n      </div>\n      <div\n        v-else\n        :data-testid=\"`input-match-expression-values-${index}`\"\n      >\n        <div v-if=\"isView\">\n          {{ row.values }}\n        </div>\n        <input\n          v-else\n          v-model=\"row.values\"\n          :mode=\"mode\"\n          :disabled=\"row.operator==='Exists' || row.operator==='DoesNotExist'\"\n          :data-testid=\"`input-match-expression-values-control-${index}`\"\n          @input=\"update\"\n        >\n      </div>\n      <div\n        v-if=\"showRemoveButton\"\n        class=\"remove-container\"\n      >\n        <button\n          v-if=\"!isView\"\n          type=\"button\"\n          class=\"btn role-link\"\n          :style=\"{padding:'0px'}\"\n\n          :disabled=\"mode==='view'\"\n          :data-testid=\"`input-match-expression-remove-control-${index}`\"\n          @click=\"removeRule(row)\"\n        >\n          <t k=\"generic.remove\" />\n        </button>\n      </div>\n    </div>\n    <div\n      v-if=\"!isView && showAddButton\"\n      class=\"mt-20\"\n    >\n      <button\n        type=\"button\"\n        class=\"btn role-tertiary add\"\n        :data-testid=\"`input-match-expression-add-rule`\"\n        @click=\"addRule\"\n      >\n        <t k=\"workload.scheduling.affinity.matchExpressions.addRule\" />\n      </button>\n    </div>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n  $separator: 20;\n  $remove: 75;\n  $spacing: 10px;\n\n  .operator {\n    & .vs__dropdown-option{\n      padding: 3px 6px 3px 6px !important\n    }\n  }\n\n  .remove-expression {\n    padding:  8px;\n    position: absolute;\n    margin-bottom:10px;\n    right: 0px;\n    top: 0px;\n    z-index: z-index('overContent');\n\n    i {\n      font-size:2em;\n    }\n  }\n\n  .remove-container {\n    display: flex;\n    justify-content: center;\n  }\n\n  .match-expression-row, .match-expression-header {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n    margin: 5px 0;\n    grid-gap: $column-gutter;\n\n    & > LABEL {\n      margin: 0;\n    }\n\n    &:not(.view){\n      grid-template-columns: repeat(3, 1fr) 50px;\n    }\n  }\n\n  .match-expression-row > div > input {\n    min-height: 40px !important;\n  }\n  .match-expression-row-matching, .match-expression-header-matching {\n    grid-template-columns: 1fr 1fr 1fr 1fr;\n\n    &:not(.view){\n      grid-template-columns: 1fr 1fr 1fr 1fr 100px;\n    }\n  }\n</style>\n"]}]}