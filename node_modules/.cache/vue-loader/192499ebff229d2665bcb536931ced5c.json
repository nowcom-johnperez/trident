{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/NameNsDescription.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/NameNsDescription.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBnZXQsIHNldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgeyBzb3J0QnkgfSBmcm9tICdAc2hlbGwvdXRpbHMvc29ydCc7CmltcG9ydCB7IE5BTUVTUEFDRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBERVNDUklQVElPTiB9IGZyb20gJ0BzaGVsbC9jb25maWcvbGFiZWxzLWFubm90YXRpb25zJzsKaW1wb3J0IHsgX1ZJRVcsIF9FRElULCBfQ1JFQVRFIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgeyBMYWJlbGVkSW5wdXQgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0xhYmVsZWRJbnB1dCc7CmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7CmltcG9ydCB7IG5vcm1hbGl6ZU5hbWUgfSBmcm9tICdAc2hlbGwvdXRpbHMva3ViZSc7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogICAgICAgJ05hbWVOc0Rlc2NyaXB0aW9uJywKICBjb21wb25lbnRzOiB7CiAgICBMYWJlbGVkSW5wdXQsCiAgICBMYWJlbGVkU2VsZWN0CiAgfSwKCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6ICAgICBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgfSwKICAgIG1vZGU6IHsKICAgICAgdHlwZTogICAgIFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICB9LAogICAgbmFtZU5zSGlkZGVuOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIGRlc2NyaXB0aW9uSGlkZGVuOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIGV4dHJhQ29sdW1uczogewogICAgICB0eXBlOiAgICBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10sCiAgICB9LAogICAgbmFtZUxhYmVsOiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogJ25hbWVOc0Rlc2NyaXB0aW9uLm5hbWUubGFiZWwnLAogICAgfSwKICAgIG5hbWVFZGl0YWJsZTogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgICBuYW1lUGxhY2Vob2xkZXI6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnbmFtZU5zRGVzY3JpcHRpb24ubmFtZS5wbGFjZWhvbGRlcicsCiAgICB9LAogICAgbmFtZURpc2FibGVkOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIG5hbWVSZXF1aXJlZDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlLAogICAgfSwKICAgIG5hbWVOb3JtYWxpemVkOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IHRydWUsCiAgICB9LAogICAgbmFtZXNwYWNlZDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlLAogICAgfSwKICAgIG5hbWVzcGFjZUZpbHRlcjogeyB0eXBlOiBGdW5jdGlvbiwgZGVmYXVsdDogbnVsbCB9LAogICAgbmFtZXNwYWNlTWFwcGVyOiB7IHR5cGU6IEZ1bmN0aW9uLCBkZWZhdWx0OiBudWxsIH0sCiAgICBuYW1lc3BhY2VUeXBlOiAgIHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiBOQU1FU1BBQ0UsCiAgICB9LAogICAgbmFtZXNwYWNlTGFiZWw6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnbmFtZU5zRGVzY3JpcHRpb24ubmFtZXNwYWNlLmxhYmVsJywKICAgIH0sCiAgICBuYW1lc3BhY2VQbGFjZWhvbGRlcjogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICduYW1lTnNEZXNjcmlwdGlvbi5uYW1lc3BhY2UucGxhY2Vob2xkZXInLAogICAgfSwKICAgIG5hbWVzcGFjZURpc2FibGVkOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgfSwKICAgIG5hbWVzcGFjZU5ld0FsbG93ZWQ6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgbm9EZWZhdWx0TmFtZXNwYWNlOiB7CiAgICAgIHR5cGU6ICAgIEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9LAogICAgLyoqCiAgICAgKiBVc2UgdGhlc2Ugb2JqZWN0cyBpbnN0ZWFkIG9mIG5hbWVzcGFjZXMKICAgICAqLwogICAgbmFtZXNwYWNlc092ZXJyaWRlOiB7CiAgICAgIHR5cGU6ICAgIEFycmF5LAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIC8qKgogICAgICogVXNlciB0aGVzZSBuYW1lc3BhY2VzIGluc3RlYWQgb2YgZGV0ZXJtaW5pbmcgbGlzdCB3aXRoaW4gY29tcG9uZW50CiAgICAgKi8KICAgIG5hbWVzcGFjZU9wdGlvbnM6IHsKICAgICAgdHlwZTogICAgQXJyYXksCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgY3JlYXRlTmFtZXNwYWNlT3ZlcnJpZGU6IHsKICAgICAgdHlwZTogICAgQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICB9LAogICAgZGVzY3JpcHRpb25MYWJlbDogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICduYW1lTnNEZXNjcmlwdGlvbi5kZXNjcmlwdGlvbi5sYWJlbCcsCiAgICB9LAogICAgZGVzY3JpcHRpb25QbGFjZWhvbGRlcjogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICduYW1lTnNEZXNjcmlwdGlvbi5kZXNjcmlwdGlvbi5wbGFjZWhvbGRlcicsCiAgICB9LAogICAgZGVzY3JpcHRpb25EaXNhYmxlZDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgIH0sCiAgICAvLyBVc2Ugc3BlY2lmaWMgZmllbGRzIG9uIHRoZSB2YWx1ZSBpbnN0ZWFkIG9mIHRoZSBub3JtYWwgbWV0YWRhdGEgbG9jYXRpb25zCiAgICBuYW1lS2V5OiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCiAgICBuYW1lc3BhY2VLZXk6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsLAogICAgfSwKICAgIGRlc2NyaXB0aW9uS2V5OiB7CiAgICAgIHR5cGU6ICAgIFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbCwKICAgIH0sCiAgICBmb3JjZU5hbWVzcGFjZTogewogICAgICB0eXBlOiAgICBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICB9LAogICAgc2hvd1NwYWNlcjogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlCiAgICB9LAogICAgaG9yaXpvbnRhbDogewogICAgICB0eXBlOiAgICBCb29sZWFuLAogICAgICBkZWZhdWx0OiB0cnVlLAogICAgfSwKICAgIHJ1bGVzOiB7CiAgICAgIGRlZmF1bHQ6ICgpID0+ICh7CiAgICAgICAgbmFtZXNwYWNlOiAgIFtdLAogICAgICAgIG5hbWU6ICAgICAgICBbXSwKICAgICAgICBkZXNjcmlwdGlvbjogW10KICAgICAgfSksCiAgICAgIHR5cGU6IE9iamVjdCwKICAgIH0sCgogICAgLyoqCiAgICAgKiBJbmhlcml0ZWQgZ2xvYmFsIGlkZW50aWZpZXIgcHJlZml4IGZvciB0ZXN0cwogICAgICogRGVmaW5lIGEgdGVybSBiYXNlZCBvbiB0aGUgcGFyZW50IGNvbXBvbmVudCB0byBhdm9pZCBjb25mbGljdHMgb24gbXVsdGlwbGUgY29tcG9uZW50cwogICAgICovCiAgICBjb21wb25lbnRUZXN0aWQ6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnbmFtZS1ucy1kZXNjcmlwdGlvbicKICAgIH0KICB9LAoKICBkYXRhKCkgewogICAgY29uc3QgdiA9IHRoaXMudmFsdWU7CiAgICBjb25zdCBtZXRhZGF0YSA9IHYubWV0YWRhdGE7CiAgICBsZXQgbmFtZXNwYWNlLCBuYW1lLCBkZXNjcmlwdGlvbjsKCiAgICBpZiAodGhpcy5uYW1lS2V5KSB7CiAgICAgIG5hbWUgPSBnZXQodiwgdGhpcy5uYW1lS2V5KTsKICAgIH0gZWxzZSB7CiAgICAgIG5hbWUgPSBtZXRhZGF0YT8ubmFtZTsKICAgIH0KCiAgICBpZiAodGhpcy5uYW1lc3BhY2VkKSB7CiAgICAgIGlmICh0aGlzLmZvcmNlTmFtZXNwYWNlKSB7CiAgICAgICAgbmFtZXNwYWNlID0gdGhpcy5mb3JjZU5hbWVzcGFjZTsKICAgICAgICB0aGlzLnVwZGF0ZU5hbWVzcGFjZShuYW1lc3BhY2UpOwogICAgICB9IGVsc2UgaWYgKHRoaXMubmFtZXNwYWNlS2V5KSB7CiAgICAgICAgbmFtZXNwYWNlID0gZ2V0KHYsIHRoaXMubmFtZXNwYWNlS2V5KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuYW1lc3BhY2UgPSBtZXRhZGF0YT8ubmFtZXNwYWNlOwogICAgICB9CgogICAgICBpZiAoIW5hbWVzcGFjZSAmJiAhdGhpcy5ub0RlZmF1bHROYW1lc3BhY2UpIHsKICAgICAgICBuYW1lc3BhY2UgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydkZWZhdWx0TmFtZXNwYWNlJ107CiAgICAgICAgaWYgKG1ldGFkYXRhKSB7CiAgICAgICAgICBtZXRhZGF0YS5uYW1lc3BhY2UgPSBuYW1lc3BhY2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CgogICAgaWYgKHRoaXMuZGVzY3JpcHRpb25LZXkpIHsKICAgICAgZGVzY3JpcHRpb24gPSBnZXQodiwgdGhpcy5kZXNjcmlwdGlvbktleSk7CiAgICB9IGVsc2UgewogICAgICBkZXNjcmlwdGlvbiA9IG1ldGFkYXRhPy5hbm5vdGF0aW9ucz8uW0RFU0NSSVBUSU9OXTsKICAgIH0KCiAgICBjb25zdCBpblN0b3JlID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFN0b3JlJ10oKTsKICAgIGNvbnN0IG5zU2NoZW1hID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1tgJHsgaW5TdG9yZSB9L3NjaGVtYUZvcmBdKE5BTUVTUEFDRSk7CgogICAgcmV0dXJuIHsKICAgICAgbmFtZXNwYWNlLAogICAgICBuYW1lLAogICAgICBkZXNjcmlwdGlvbiwKICAgICAgY3JlYXRlTmFtZXNwYWNlOiBmYWxzZSwKICAgICAgbnNTY2hlbWEKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoWydjdXJyZW50UHJvZHVjdCcsICdjdXJyZW50Q2x1c3RlcicsICduYW1lc3BhY2VzJywgJ2FsbG93ZWROYW1lc3BhY2VzJ10pLAogICAgbmFtZXNwYWNlUmVhbGx5RGlzYWJsZWQoKSB7CiAgICAgIHJldHVybiAoCiAgICAgICAgISF0aGlzLmZvcmNlTmFtZXNwYWNlIHx8IHRoaXMubmFtZXNwYWNlRGlzYWJsZWQgfHwgdGhpcy5tb2RlID09PSBfRURJVAogICAgICApOyAvLyBuYW1lc3BhY2UgaXMgbmV2ZXIgZWRpdGFibGUKICAgIH0sCgogICAgbmFtZVJlYWxseURpc2FibGVkKCkgewogICAgICByZXR1cm4gdGhpcy5uYW1lRGlzYWJsZWQgfHwgKHRoaXMubW9kZSA9PT0gX0VESVQgJiYgIXRoaXMubmFtZUVkaXRhYmxlKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBNYXAgbmFtZXNwYWNlcyBmcm9tIHRoZSBzdG9yZSB0byBvcHRpb25zLCBhZGRpbmcgZGl2aWRlciBhbmQgY3JlYXRlIGJ1dHRvbgogICAgICovCiAgICBvcHRpb25zKCkgewogICAgICBsZXQgbmFtZXNwYWNlczsKCiAgICAgIGlmICh0aGlzLm5hbWVzcGFjZXNPdmVycmlkZSkgewogICAgICAgIC8vIFVzZSB0aGUgcmVzb3VyY2VzIHByb3ZpZGVkCiAgICAgICAgbmFtZXNwYWNlcyA9IHRoaXMubmFtZXNwYWNlc092ZXJyaWRlOwogICAgICB9IGVsc2UgewogICAgICAgIGlmICh0aGlzLm5hbWVzcGFjZU9wdGlvbnMpIHsKICAgICAgICAgIC8vIFVzZSB0aGUgbmFtZXNwYWNlcyBwcm92aWRlZAogICAgICAgICAgbmFtZXNwYWNlcyA9ICh0aGlzLm5hbWVzcGFjZU9wdGlvbnMubWFwKChucykgPT4gbnMubmFtZSkgfHwgW10pLnNvcnQoKTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgLy8gRGV0ZXJtaW5lIHRoZSBuYW1lc3BhY2VzCiAgICAgICAgICBjb25zdCBuYW1lc3BhY2VPYmpzID0gdGhpcy5pc0NyZWF0ZSA/IHRoaXMuYWxsb3dlZE5hbWVzcGFjZXMoKSA6IHRoaXMubmFtZXNwYWNlcygpOwoKICAgICAgICAgIG5hbWVzcGFjZXMgPSBPYmplY3Qua2V5cyhuYW1lc3BhY2VPYmpzKTsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIGNvbnN0IG9wdGlvbnMgPSBuYW1lc3BhY2VzCiAgICAgICAgLm1hcCgobmFtZXNwYWNlKSA9PiAoeyBuYW1lRGlzcGxheTogbmFtZXNwYWNlLCBpZDogbmFtZXNwYWNlIH0pKQogICAgICAgIC5tYXAodGhpcy5uYW1lc3BhY2VNYXBwZXIgfHwgKChvYmopID0+ICh7CiAgICAgICAgICBsYWJlbDogb2JqLm5hbWVEaXNwbGF5LAogICAgICAgICAgdmFsdWU6IG9iai5pZCwKICAgICAgICB9KSkpOwoKICAgICAgY29uc3Qgc29ydGVkQnlMYWJlbCA9IHNvcnRCeShvcHRpb25zLCAnbGFiZWwnKTsKCiAgICAgIGlmICh0aGlzLmZvcmNlTmFtZXNwYWNlKSB7CiAgICAgICAgc29ydGVkQnlMYWJlbC51bnNoaWZ0KHsKICAgICAgICAgIGxhYmVsOiB0aGlzLmZvcmNlTmFtZXNwYWNlLAogICAgICAgICAgdmFsdWU6IHRoaXMuZm9yY2VOYW1lc3BhY2UsCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIGNvbnN0IGNyZWF0ZUJ1dHRvbiA9IHsKICAgICAgICBsYWJlbDogdGhpcy50KCduYW1lc3BhY2UuY3JlYXRlTmFtZXNwYWNlJyksCiAgICAgICAgdmFsdWU6ICcnLAogICAgICAgIGtpbmQ6ICAnaGlnaGxpZ2h0ZWQnCiAgICAgIH07CiAgICAgIGNvbnN0IGRpdmlkZXIgPSB7CiAgICAgICAgbGFiZWw6ICAgICdkaXZpZGVyJywKICAgICAgICBkaXNhYmxlZDogdHJ1ZSwKICAgICAgICBraW5kOiAgICAgJ2RpdmlkZXInCiAgICAgIH07CgogICAgICBjb25zdCBjcmVhdGVPdmVyaGVhZCA9IHRoaXMuY2FuQ3JlYXRlTmFtZXNwYWNlIHx8IHRoaXMuY3JlYXRlTmFtZXNwYWNlT3ZlcnJpZGUgPyBbY3JlYXRlQnV0dG9uLCBkaXZpZGVyXSA6IFtdOwoKICAgICAgcmV0dXJuIFsKICAgICAgICAuLi5jcmVhdGVPdmVyaGVhZCwKICAgICAgICAuLi5zb3J0ZWRCeUxhYmVsCiAgICAgIF07CiAgICB9LAoKICAgIGlzVmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX1ZJRVc7CiAgICB9LAoKICAgIGlzQ3JlYXRlKCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfQ1JFQVRFOwogICAgfSwKCiAgICBjb2xTcGFuKCkgewogICAgICBpZiAoIXRoaXMuaG9yaXpvbnRhbCkgewogICAgICAgIHJldHVybiBgc3Bhbi04YDsKICAgICAgfQogICAgICAvLyBOYW1lIGFuZCBuYW1lc3BhY2UgdGFrZSB1cCB0d28gY29sdW1ucy4KICAgICAgbGV0IGNvbHMgPSAodGhpcy5uYW1lTnNIaWRkZW4gPyAwIDogMikgKyAodGhpcy5kZXNjcmlwdGlvbkhpZGRlbiA/IDAgOiAxKSArIHRoaXMuZXh0cmFDb2x1bW5zLmxlbmd0aDsKCiAgICAgIGNvbHMgPSBNYXRoLm1heCgyLCBjb2xzKTsgLy8gSWYgdGhlcmUncyBvbmx5IG9uZSBjb2x1bW4sIG1ha2UgaXQgcmVuZGVyIGhhbGYtd2lkdGggYXMgaWYgdGhlcmUgd2VyZSB0d28KICAgICAgY29uc3Qgc3BhbiA9IDEyIC8gY29sczsgLy8gSWYgdGhlcmUncyA1LCA3LCBvciBtb3JlIGNvbHVtbnMgdGhpcyB3aWxsIGJyZWFrOyBkb24ndCBkbyB0aGF0LgoKICAgICAgcmV0dXJuIGBzcGFuLSR7IHNwYW4gfWA7CiAgICB9LAoKICAgIGNhbkNyZWF0ZU5hbWVzcGFjZSgpIHsKICAgICAgLy8gQ2hlY2sgaWYgdXNlciBjYW4gcHVzaCB0byBuYW1lc3BhY2VzLi4uIGFuZCBhcyB0aGUgbnMgaXMgb3V0c2lkZSBvZiBhIHByb2plY3QgcmVzdHJpY3QgdG8gYWRtaW5zIGFuZCBjbHVzdGVyIG93bmVycwogICAgICByZXR1cm4gKHRoaXMubnNTY2hlbWE/LmNvbGxlY3Rpb25NZXRob2RzIHx8IFtdKS5pbmNsdWRlcygnUE9TVCcpICYmIHRoaXMuY3VycmVudENsdXN0ZXI/LmNhblVwZGF0ZTsKICAgIH0KICB9LAoKICB3YXRjaDogewogICAgbmFtZSh2YWwpIHsKICAgICAgaWYgKCB0aGlzLm5vcm1hbGl6ZU5hbWUgKSB7CiAgICAgICAgdmFsID0gbm9ybWFsaXplTmFtZSh2YWwpOwogICAgICB9CgogICAgICBpZiAodGhpcy5uYW1lS2V5KSB7CiAgICAgICAgc2V0KHRoaXMudmFsdWUsIHRoaXMubmFtZUtleSwgdmFsKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5tZXRhZGF0YSwgJ25hbWUnLCB2YWwpOwogICAgICB9CiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScpOwogICAgfSwKCiAgICBuYW1lc3BhY2UodmFsKSB7CiAgICAgIHRoaXMudXBkYXRlTmFtZXNwYWNlKHZhbCk7CiAgICAgIHRoaXMuJGVtaXQoJ2NoYW5nZScpOwogICAgfSwKCiAgICBkZXNjcmlwdGlvbih2YWwpIHsKICAgICAgaWYgKHRoaXMuZGVzY3JpcHRpb25LZXkpIHsKICAgICAgICBzZXQodGhpcy52YWx1ZSwgdGhpcy5kZXNjcmlwdGlvbktleSwgdmFsKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnZhbHVlLnNldEFubm90YXRpb24oREVTQ1JJUFRJT04sIHZhbCk7CiAgICAgIH0KICAgICAgdGhpcy4kZW1pdCgnY2hhbmdlJyk7CiAgICB9LAogIH0sCgogIG1vdW50ZWQoKSB7CiAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7CiAgICAgIGlmICh0aGlzLiRyZWZzLm5hbWUpIHsKICAgICAgICB0aGlzLiRyZWZzLm5hbWUuZm9jdXMoKTsKICAgICAgfQogICAgfSk7CiAgfSwKCiAgbWV0aG9kczogewogICAgdXBkYXRlTmFtZXNwYWNlKHZhbCkgewogICAgICBpZiAodGhpcy5mb3JjZU5hbWVzcGFjZSkgewogICAgICAgIHZhbCA9IHRoaXMuZm9yY2VOYW1lc3BhY2U7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLm5hbWVzcGFjZWQpIHsKICAgICAgICB0aGlzLiRlbWl0KCdpc05hbWVzcGFjZU5ldycsICF2YWwgfHwgKHRoaXMub3B0aW9ucyAmJiAhdGhpcy5vcHRpb25zLmZpbmQoKG4pID0+IG4udmFsdWUgPT09IHZhbCkpKTsKICAgICAgfQoKICAgICAgaWYgKHRoaXMubmFtZXNwYWNlS2V5KSB7CiAgICAgICAgc2V0KHRoaXMudmFsdWUsIHRoaXMubmFtZXNwYWNlS2V5LCB2YWwpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudmFsdWUubWV0YWRhdGEubmFtZXNwYWNlID0gdmFsOwogICAgICB9CiAgICB9LAoKICAgIGNoYW5nZU5hbWVBbmROYW1lc3BhY2UoZSkgewogICAgICB0aGlzLm5hbWUgPSAoZS50ZXh0IHx8ICcnKS50b0xvd2VyQ2FzZSgpOwogICAgICB0aGlzLm5hbWVzcGFjZSA9IGUuc2VsZWN0ZWQ7CiAgICB9LAoKICAgIGNhbmNlbENyZWF0ZU5hbWVzcGFjZShlKSB7CiAgICAgIHRoaXMuY3JlYXRlTmFtZXNwYWNlID0gZmFsc2U7CiAgICAgIHRoaXMuJHBhcmVudC4kZW1pdCgnY3JlYXRlTmFtZXNwYWNlJywgZmFsc2UpOwogICAgICAvLyBJbiBwcmFjdGlzZSB3ZSBzaG91bGQgYWx3YXlzIGhhdmUgYSBkZWZhdWx0TmFtZXNwYWNlLi4uIHVubGVzcyB3ZSdyZSBpbiBub24ta3ViZSBleHRlbnNpb24gd29ybGQsICBzbyBmYWxsIGJhY2sgb24gb3B0aW9ucwogICAgICB0aGlzLm5hbWVzcGFjZSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2RlZmF1bHROYW1lc3BhY2UnXSB8fCB0aGlzLm9wdGlvbnMuZmluZCgobykgPT4gISFvLnZhbHVlKT8udmFsdWUgOwogICAgfSwKCiAgICBzZWxlY3ROYW1lc3BhY2UoZSkgewogICAgICBpZiAoIWUgfHwgZS52YWx1ZSA9PT0gJycpIHsgLy8gVGhlIGJsYW5rIHZhbHVlIGluIHRoZSBkcm9wZG93biBpcyBsYWJlbGVkICJDcmVhdGUgYSBOZXcgTmFtZXNwYWNlIgogICAgICAgIHRoaXMuY3JlYXRlTmFtZXNwYWNlID0gdHJ1ZTsKICAgICAgICB0aGlzLiRwYXJlbnQuJGVtaXQoJ2NyZWF0ZU5hbWVzcGFjZScsIHRydWUpOwogICAgICAgIHRoaXMuJGVtaXQoJ2lzTmFtZXNwYWNlTmV3JywgdHJ1ZSk7CiAgICAgICAgVnVlLm5leHRUaWNrKCgpID0+IHRoaXMuJHJlZnMubmFtZXNwYWNlLmZvY3VzKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuY3JlYXRlTmFtZXNwYWNlID0gZmFsc2U7CiAgICAgICAgdGhpcy4kcGFyZW50LiRlbWl0KCdjcmVhdGVOYW1lc3BhY2UnLCBmYWxzZSk7CiAgICAgICAgdGhpcy4kZW1pdCgnaXNOYW1lc3BhY2VOZXcnLCBmYWxzZSk7CiAgICAgIH0KICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["NameNsDescription.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"NameNsDescription.vue","sourceRoot":"node_modules/@rancher/shell/components/form","sourcesContent":["<script>\nimport Vue from 'vue';\nimport { mapGetters } from 'vuex';\nimport { get, set } from '@shell/utils/object';\nimport { sortBy } from '@shell/utils/sort';\nimport { NAMESPACE } from '@shell/config/types';\nimport { DESCRIPTION } from '@shell/config/labels-annotations';\nimport { _VIEW, _EDIT, _CREATE } from '@shell/config/query-params';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { normalizeName } from '@shell/utils/kube';\n\nexport default {\n  name:       'NameNsDescription',\n  components: {\n    LabeledInput,\n    LabeledSelect\n  },\n\n  props: {\n    value: {\n      type:     Object,\n      required: true,\n    },\n    mode: {\n      type:     String,\n      required: true,\n    },\n    nameNsHidden: {\n      type:    Boolean,\n      default: false,\n    },\n    descriptionHidden: {\n      type:    Boolean,\n      default: false,\n    },\n    extraColumns: {\n      type:    Array,\n      default: () => [],\n    },\n    nameLabel: {\n      type:    String,\n      default: 'nameNsDescription.name.label',\n    },\n    nameEditable: {\n      type:    Boolean,\n      default: false,\n    },\n    namePlaceholder: {\n      type:    String,\n      default: 'nameNsDescription.name.placeholder',\n    },\n    nameDisabled: {\n      type:    Boolean,\n      default: false,\n    },\n    nameRequired: {\n      type:    Boolean,\n      default: true,\n    },\n    nameNormalized: {\n      type:    Boolean,\n      default: true,\n    },\n    namespaced: {\n      type:    Boolean,\n      default: true,\n    },\n    namespaceFilter: { type: Function, default: null },\n    namespaceMapper: { type: Function, default: null },\n    namespaceType:   {\n      type:    String,\n      default: NAMESPACE,\n    },\n    namespaceLabel: {\n      type:    String,\n      default: 'nameNsDescription.namespace.label',\n    },\n    namespacePlaceholder: {\n      type:    String,\n      default: 'nameNsDescription.namespace.placeholder',\n    },\n    namespaceDisabled: {\n      type:    Boolean,\n      default: false,\n    },\n    namespaceNewAllowed: {\n      type:    Boolean,\n      default: false,\n    },\n    noDefaultNamespace: {\n      type:    Boolean,\n      default: false\n    },\n    /**\n     * Use these objects instead of namespaces\n     */\n    namespacesOverride: {\n      type:    Array,\n      default: null,\n    },\n    /**\n     * User these namespaces instead of determining list within component\n     */\n    namespaceOptions: {\n      type:    Array,\n      default: null,\n    },\n    createNamespaceOverride: {\n      type:    Boolean,\n      default: false,\n    },\n    descriptionLabel: {\n      type:    String,\n      default: 'nameNsDescription.description.label',\n    },\n    descriptionPlaceholder: {\n      type:    String,\n      default: 'nameNsDescription.description.placeholder',\n    },\n    descriptionDisabled: {\n      type:    Boolean,\n      default: false,\n    },\n    // Use specific fields on the value instead of the normal metadata locations\n    nameKey: {\n      type:    String,\n      default: null,\n    },\n    namespaceKey: {\n      type:    String,\n      default: null,\n    },\n    descriptionKey: {\n      type:    String,\n      default: null,\n    },\n    forceNamespace: {\n      type:    String,\n      default: null,\n    },\n    showSpacer: {\n      type:    Boolean,\n      default: true\n    },\n    horizontal: {\n      type:    Boolean,\n      default: true,\n    },\n    rules: {\n      default: () => ({\n        namespace:   [],\n        name:        [],\n        description: []\n      }),\n      type: Object,\n    },\n\n    /**\n     * Inherited global identifier prefix for tests\n     * Define a term based on the parent component to avoid conflicts on multiple components\n     */\n    componentTestid: {\n      type:    String,\n      default: 'name-ns-description'\n    }\n  },\n\n  data() {\n    const v = this.value;\n    const metadata = v.metadata;\n    let namespace, name, description;\n\n    if (this.nameKey) {\n      name = get(v, this.nameKey);\n    } else {\n      name = metadata?.name;\n    }\n\n    if (this.namespaced) {\n      if (this.forceNamespace) {\n        namespace = this.forceNamespace;\n        this.updateNamespace(namespace);\n      } else if (this.namespaceKey) {\n        namespace = get(v, this.namespaceKey);\n      } else {\n        namespace = metadata?.namespace;\n      }\n\n      if (!namespace && !this.noDefaultNamespace) {\n        namespace = this.$store.getters['defaultNamespace'];\n        if (metadata) {\n          metadata.namespace = namespace;\n        }\n      }\n    }\n\n    if (this.descriptionKey) {\n      description = get(v, this.descriptionKey);\n    } else {\n      description = metadata?.annotations?.[DESCRIPTION];\n    }\n\n    const inStore = this.$store.getters['currentStore']();\n    const nsSchema = this.$store.getters[`${ inStore }/schemaFor`](NAMESPACE);\n\n    return {\n      namespace,\n      name,\n      description,\n      createNamespace: false,\n      nsSchema\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentProduct', 'currentCluster', 'namespaces', 'allowedNamespaces']),\n    namespaceReallyDisabled() {\n      return (\n        !!this.forceNamespace || this.namespaceDisabled || this.mode === _EDIT\n      ); // namespace is never editable\n    },\n\n    nameReallyDisabled() {\n      return this.nameDisabled || (this.mode === _EDIT && !this.nameEditable);\n    },\n\n    /**\n     * Map namespaces from the store to options, adding divider and create button\n     */\n    options() {\n      let namespaces;\n\n      if (this.namespacesOverride) {\n        // Use the resources provided\n        namespaces = this.namespacesOverride;\n      } else {\n        if (this.namespaceOptions) {\n          // Use the namespaces provided\n          namespaces = (this.namespaceOptions.map((ns) => ns.name) || []).sort();\n        } else {\n          // Determine the namespaces\n          const namespaceObjs = this.isCreate ? this.allowedNamespaces() : this.namespaces();\n\n          namespaces = Object.keys(namespaceObjs);\n        }\n      }\n\n      const options = namespaces\n        .map((namespace) => ({ nameDisplay: namespace, id: namespace }))\n        .map(this.namespaceMapper || ((obj) => ({\n          label: obj.nameDisplay,\n          value: obj.id,\n        })));\n\n      const sortedByLabel = sortBy(options, 'label');\n\n      if (this.forceNamespace) {\n        sortedByLabel.unshift({\n          label: this.forceNamespace,\n          value: this.forceNamespace,\n        });\n      }\n\n      const createButton = {\n        label: this.t('namespace.createNamespace'),\n        value: '',\n        kind:  'highlighted'\n      };\n      const divider = {\n        label:    'divider',\n        disabled: true,\n        kind:     'divider'\n      };\n\n      const createOverhead = this.canCreateNamespace || this.createNamespaceOverride ? [createButton, divider] : [];\n\n      return [\n        ...createOverhead,\n        ...sortedByLabel\n      ];\n    },\n\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    isCreate() {\n      return this.mode === _CREATE;\n    },\n\n    colSpan() {\n      if (!this.horizontal) {\n        return `span-8`;\n      }\n      // Name and namespace take up two columns.\n      let cols = (this.nameNsHidden ? 0 : 2) + (this.descriptionHidden ? 0 : 1) + this.extraColumns.length;\n\n      cols = Math.max(2, cols); // If there's only one column, make it render half-width as if there were two\n      const span = 12 / cols; // If there's 5, 7, or more columns this will break; don't do that.\n\n      return `span-${ span }`;\n    },\n\n    canCreateNamespace() {\n      // Check if user can push to namespaces... and as the ns is outside of a project restrict to admins and cluster owners\n      return (this.nsSchema?.collectionMethods || []).includes('POST') && this.currentCluster?.canUpdate;\n    }\n  },\n\n  watch: {\n    name(val) {\n      if ( this.normalizeName ) {\n        val = normalizeName(val);\n      }\n\n      if (this.nameKey) {\n        set(this.value, this.nameKey, val);\n      } else {\n        this.$set(this.value.metadata, 'name', val);\n      }\n      this.$emit('change');\n    },\n\n    namespace(val) {\n      this.updateNamespace(val);\n      this.$emit('change');\n    },\n\n    description(val) {\n      if (this.descriptionKey) {\n        set(this.value, this.descriptionKey, val);\n      } else {\n        this.value.setAnnotation(DESCRIPTION, val);\n      }\n      this.$emit('change');\n    },\n  },\n\n  mounted() {\n    this.$nextTick(() => {\n      if (this.$refs.name) {\n        this.$refs.name.focus();\n      }\n    });\n  },\n\n  methods: {\n    updateNamespace(val) {\n      if (this.forceNamespace) {\n        val = this.forceNamespace;\n      }\n\n      if (this.namespaced) {\n        this.$emit('isNamespaceNew', !val || (this.options && !this.options.find((n) => n.value === val)));\n      }\n\n      if (this.namespaceKey) {\n        set(this.value, this.namespaceKey, val);\n      } else {\n        this.value.metadata.namespace = val;\n      }\n    },\n\n    changeNameAndNamespace(e) {\n      this.name = (e.text || '').toLowerCase();\n      this.namespace = e.selected;\n    },\n\n    cancelCreateNamespace(e) {\n      this.createNamespace = false;\n      this.$parent.$emit('createNamespace', false);\n      // In practise we should always have a defaultNamespace... unless we're in non-kube extension world,  so fall back on options\n      this.namespace = this.$store.getters['defaultNamespace'] || this.options.find((o) => !!o.value)?.value ;\n    },\n\n    selectNamespace(e) {\n      if (!e || e.value === '') { // The blank value in the dropdown is labeled \"Create a New Namespace\"\n        this.createNamespace = true;\n        this.$parent.$emit('createNamespace', true);\n        this.$emit('isNamespaceNew', true);\n        Vue.nextTick(() => this.$refs.namespace.focus());\n      } else {\n        this.createNamespace = false;\n        this.$parent.$emit('createNamespace', false);\n        this.$emit('isNamespaceNew', false);\n      }\n    }\n  },\n};\n</script>\n\n<template>\n  <div class=\"row mb-20\">\n    <div\n      v-if=\"namespaced && !nameNsHidden && createNamespace\"\n      :data-testid=\"componentTestid + '-namespace-create'\"\n      class=\"col span-3\"\n    >\n      <LabeledInput\n        ref=\"namespace\"\n        v-model=\"namespace\"\n        :label=\"t('namespace.label')\"\n        :placeholder=\"t('namespace.createNamespace')\"\n        :disabled=\"namespaceReallyDisabled\"\n        :mode=\"mode\"\n        :min-height=\"30\"\n        :required=\"nameRequired\"\n        :rules=\"rules.namespace\"\n      />\n      <button\n        aria=\"Cancel create\"\n        @click=\"cancelCreateNamespace\"\n      >\n        <i\n          v-clean-tooltip=\"t('generic.cancel')\"\n          class=\"icon icon-close align-value\"\n        />\n      </button>\n    </div>\n    <div\n      v-if=\"namespaced && !nameNsHidden && !createNamespace\"\n      :data-testid=\"componentTestid + '-namespace'\"\n      class=\"col span-3\"\n    >\n      <LabeledSelect\n        v-show=\"!createNamespace\"\n        v-model=\"namespace\"\n        :clearable=\"true\"\n        :options=\"options\"\n        :disabled=\"namespaceReallyDisabled\"\n        :searchable=\"true\"\n        :mode=\"mode\"\n        :multiple=\"false\"\n        :label=\"t('namespace.label')\"\n        :placeholder=\"t('namespace.selectOrCreate')\"\n        :rules=\"rules.namespace\"\n        required\n        @selecting=\"selectNamespace\"\n      />\n    </div>\n\n    <div\n      v-if=\"!nameNsHidden\"\n      :data-testid=\"componentTestid + '-name'\"\n      class=\"col span-3\"\n    >\n      <LabeledInput\n        ref=\"name\"\n        key=\"name\"\n        v-model=\"name\"\n        :label=\"t(nameLabel)\"\n        :placeholder=\"t(namePlaceholder)\"\n        :disabled=\"nameReallyDisabled\"\n        :mode=\"mode\"\n        :min-height=\"30\"\n        :required=\"nameRequired\"\n        :rules=\"rules.name\"\n      />\n    </div>\n\n    <div\n      v-show=\"!descriptionHidden\"\n      :data-testid=\"componentTestid + '-description'\"\n      :class=\"['col', extraColumns.length > 0 ? 'span-3' : 'span-6']\"\n    >\n      <LabeledInput\n        key=\"description\"\n        v-model=\"description\"\n        :mode=\"mode\"\n        :disabled=\"descriptionDisabled\"\n        :label=\"t(descriptionLabel)\"\n        :placeholder=\"t(descriptionPlaceholder)\"\n        :min-height=\"30\"\n        :rules=\"rules.description\"\n      />\n    </div>\n\n    <div\n      v-for=\"slot in extraColumns\"\n      :key=\"slot\"\n      :class=\"{ col: true, [colSpan]: true }\"\n    >\n      <slot :name=\"slot\" />\n    </div>\n    <div\n      v-if=\"showSpacer\"\n      class=\"spacer\"\n    />\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\nbutton {\n  all: unset;\n  height: 0;\n  position: relative;\n  top: -35px;\n  float: right;\n  margin-right: 7px;\n\n  cursor: pointer;\n\n  .align-value {\n    padding-top: 7px;\n  }\n}\n.row {\n  &.name-ns-description {\n    max-height: $input-height;\n  }\n  .namespace-select ::v-deep {\n    .labeled-select {\n      min-width: 40%;\n      .v-select.inline {\n        &.vs--single {\n          padding-bottom: 2px;\n        }\n      }\n    }\n  }\n\n  &.flip-direction {\n    flex-direction: column;\n\n    &.name-ns-description {\n      max-height: initial;\n    }\n\n    & > div > * {\n      margin-bottom: 20px;\n    }\n  }\n}\n</style>\n"]}]}