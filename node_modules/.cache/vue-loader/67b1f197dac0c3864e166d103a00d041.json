{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/Security.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/Security.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCB7IFJhZGlvR3JvdXAgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL1JhZGlvJzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgeyBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwoKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIFJhZGlvR3JvdXAsCiAgICBMYWJlbGVkSW5wdXQsCiAgICBMYWJlbGVkU2VsZWN0CiAgfSwKCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfSwKICAgIG1vZGU6IHsgdHlwZTogU3RyaW5nLCBkZWZhdWx0OiAnZWRpdCcgfQogIH0sCgogIGRhdGEoKSB7CiAgICBjb25zdCBhbGxDYXBhYmlsaXRpZXMgPSBbJ0FMTCcsCiAgICAgICdBVURJVF9DT05UUk9MJywKICAgICAgJ0FVRElUX1dSSVRFJywKICAgICAgJ0JMT0NLX1NVU1BFTkQnLAogICAgICAnQ0hPV04nLAogICAgICAnREFDX09WRVJSSURFJywKICAgICAgJ0RBQ19SRUFEX1NFQVJDSCcsCiAgICAgICdGT1dORVInLAogICAgICAnRlNFVElEJywKICAgICAgJ0lQQ19MT0NLJywKICAgICAgJ0lQQ19PV05FUicsCiAgICAgICdLSUxMJywKICAgICAgJ0xFQVNFJywKICAgICAgJ0xJTlVYX0lNTVVUQUJMRScsCiAgICAgICdNQUNfQURNSU4nLAogICAgICAnTUFDX09WRVJSSURFJywKICAgICAgJ01LTk9EJywKICAgICAgJ05FVF9BRE1JTicsCiAgICAgICdORVRfQklORF9TRVJWSUNFJywKICAgICAgJ05FVF9CUk9BRENBU1QnLAogICAgICAnTkVUX1JBVycsCiAgICAgICdTRVRGQ0FQJywKICAgICAgJ1NFVEdJRCcsCiAgICAgICdTRVRQQ0FQJywKICAgICAgJ1NFVFVJRCcsCiAgICAgICdTWVNMT0dTWVNfQURNSU4nLAogICAgICAnU1lTX0JPT1QnLAogICAgICAnU1lTX0NIUk9PVCcsCiAgICAgICdTWVNfTU9EVUxFJywKICAgICAgJ1NZU19OSUNFJywKICAgICAgJ1NZU19QQUNDVCcsCiAgICAgICdTWVNfUFRSQUNFJywKICAgICAgJ1NZU19SQVdJTycsCiAgICAgICdTWVNfUkVTT1VSQ0UnLAogICAgICAnU1lTX1RJTUUnLAogICAgICAnU1lTX1RUWV9DT05GSUcnLAogICAgICAnV0FLRV9BTEFSTSddOwoKICAgIGNvbnN0IHsKICAgICAgY2FwYWJpbGl0aWVzID0ge30sCiAgICAgIHJ1bkFzTm9uUm9vdCA9IGZhbHNlLAogICAgICByZWFkT25seVJvb3RGaWxlc3lzdGVtID0gZmFsc2UsCiAgICAgIHByaXZpbGVnZWQgPSBmYWxzZSwKICAgICAgYWxsb3dQcml2aWxlZ2VFc2NhbGF0aW9uID0gZmFsc2UsCiAgICAgIHJ1bkFzVXNlcgogICAgfSA9IHRoaXMudmFsdWU7CiAgICBjb25zdCB7CiAgICAgIGFkZCA9IFtdLAogICAgICBkcm9wID0gW10KICAgIH0gPSBjYXBhYmlsaXRpZXM7CgogICAgcmV0dXJuIHsKICAgICAgcHJpdmlsZWdlZCwKICAgICAgYWxsb3dQcml2aWxlZ2VFc2NhbGF0aW9uLAogICAgICBhbGxDYXBhYmlsaXRpZXMsCiAgICAgIHJ1bkFzTm9uUm9vdCwKICAgICAgcmVhZE9ubHlSb290RmlsZXN5c3RlbSwKICAgICAgYWRkLAogICAgICBkcm9wLAogICAgICBydW5Bc1VzZXIKICAgIH07CiAgfSwKCiAgY29tcHV0ZWQ6IHsKICAgIGlzVmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX1ZJRVc7CiAgICB9LAoKICAgIC4uLm1hcEdldHRlcnMoeyB0OiAnaTE4bi90JyB9KQogIH0sCgogIHdhdGNoOiB7CiAgICBwcml2aWxlZ2VkKG5ldSkgewogICAgICBpZiAobmV1KSB7CiAgICAgICAgdGhpcy5hbGxvd1ByaXZpbGVnZUVzY2FsYXRpb24gPSB0cnVlOwogICAgICB9CiAgICB9CiAgfSwKCiAgbWV0aG9kczogewogICAgdXBkYXRlKCkgewogICAgICBjb25zdCBzZWN1cml0eUNvbnRleHQgPSB7CiAgICAgICAgcnVuQXNOb25Sb290OiAgICAgICAgICAgICB0aGlzLnJ1bkFzTm9uUm9vdCwKICAgICAgICByZWFkT25seVJvb3RGaWxlc3lzdGVtOiAgIHRoaXMucmVhZE9ubHlSb290RmlsZXN5c3RlbSwKICAgICAgICBjYXBhYmlsaXRpZXM6ICAgICAgICAgICAgIHsgYWRkOiB0aGlzLmFkZCwgZHJvcDogdGhpcy5kcm9wIH0sCiAgICAgICAgcHJpdmlsZWdlZDogICAgICAgICAgICAgICB0aGlzLnByaXZpbGVnZWQsCiAgICAgICAgYWxsb3dQcml2aWxlZ2VFc2NhbGF0aW9uOiB0aGlzLmFsbG93UHJpdmlsZWdlRXNjYWxhdGlvbiwKICAgICAgICBydW5Bc1VzZXI6ICAgICAgICAgICAgICAgIHRoaXMucnVuQXNVc2VyLAogICAgICB9OwoKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBzZWN1cml0eUNvbnRleHQpOwogICAgfQoKICB9Cn07Cg=="},{"version":3,"sources":["Security.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA","file":"Security.vue","sourceRoot":"node_modules/@rancher/shell/components/form","sourcesContent":["<script>\nimport { RadioGroup } from '@components/Form/Radio';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { _VIEW } from '@shell/config/query-params';\nimport { mapGetters } from 'vuex';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\n\nexport default {\n  components: {\n    RadioGroup,\n    LabeledInput,\n    LabeledSelect\n  },\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n    mode: { type: String, default: 'edit' }\n  },\n\n  data() {\n    const allCapabilities = ['ALL',\n      'AUDIT_CONTROL',\n      'AUDIT_WRITE',\n      'BLOCK_SUSPEND',\n      'CHOWN',\n      'DAC_OVERRIDE',\n      'DAC_READ_SEARCH',\n      'FOWNER',\n      'FSETID',\n      'IPC_LOCK',\n      'IPC_OWNER',\n      'KILL',\n      'LEASE',\n      'LINUX_IMMUTABLE',\n      'MAC_ADMIN',\n      'MAC_OVERRIDE',\n      'MKNOD',\n      'NET_ADMIN',\n      'NET_BIND_SERVICE',\n      'NET_BROADCAST',\n      'NET_RAW',\n      'SETFCAP',\n      'SETGID',\n      'SETPCAP',\n      'SETUID',\n      'SYSLOGSYS_ADMIN',\n      'SYS_BOOT',\n      'SYS_CHROOT',\n      'SYS_MODULE',\n      'SYS_NICE',\n      'SYS_PACCT',\n      'SYS_PTRACE',\n      'SYS_RAWIO',\n      'SYS_RESOURCE',\n      'SYS_TIME',\n      'SYS_TTY_CONFIG',\n      'WAKE_ALARM'];\n\n    const {\n      capabilities = {},\n      runAsNonRoot = false,\n      readOnlyRootFilesystem = false,\n      privileged = false,\n      allowPrivilegeEscalation = false,\n      runAsUser\n    } = this.value;\n    const {\n      add = [],\n      drop = []\n    } = capabilities;\n\n    return {\n      privileged,\n      allowPrivilegeEscalation,\n      allCapabilities,\n      runAsNonRoot,\n      readOnlyRootFilesystem,\n      add,\n      drop,\n      runAsUser\n    };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    ...mapGetters({ t: 'i18n/t' })\n  },\n\n  watch: {\n    privileged(neu) {\n      if (neu) {\n        this.allowPrivilegeEscalation = true;\n      }\n    }\n  },\n\n  methods: {\n    update() {\n      const securityContext = {\n        runAsNonRoot:             this.runAsNonRoot,\n        readOnlyRootFilesystem:   this.readOnlyRootFilesystem,\n        capabilities:             { add: this.add, drop: this.drop },\n        privileged:               this.privileged,\n        allowPrivilegeEscalation: this.allowPrivilegeEscalation,\n        runAsUser:                this.runAsUser,\n      };\n\n      this.$emit('input', securityContext);\n    }\n\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div>\n      <div class=\"row\">\n        <div\n          data-testid=\"input-security-privileged\"\n          class=\"col span-6\"\n        >\n          <RadioGroup\n            v-model=\"privileged\"\n            name=\"privileged\"\n            :label=\"t('workload.container.security.privileged.label')\"\n            :options=\"[false,true]\"\n            :labels=\"[t('workload.container.security.privileged.false'), t('workload.container.security.privileged.true')]\"\n            :mode=\"mode\"\n            @input=\"update\"\n          />\n        </div>\n        <div\n          v-if=\"!privileged\"\n          data-testid=\"input-security-allowPrivilegeEscalation\"\n          class=\"col span-6\"\n        >\n          <RadioGroup\n            v-model=\"allowPrivilegeEscalation\"\n            name=\"allowPrivilegeEscalation\"\n            :label=\"t('workload.container.security.allowPrivilegeEscalation.label')\"\n            :disabled=\"privileged\"\n            :options=\"[false,true]\"\n            :labels=\"[t('workload.container.security.allowPrivilegeEscalation.false'), t('workload.container.security.allowPrivilegeEscalation.true')]\"\n            :mode=\"mode\"\n            @input=\"update\"\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"spacer\" />\n\n    <div>\n      <div class=\"row\">\n        <div\n          data-testid=\"input-security-runasNonRoot\"\n          class=\"col span-6\"\n        >\n          <RadioGroup\n            v-model=\"runAsNonRoot\"\n            name=\"runasNonRoot\"\n            :label=\"t('workload.container.security.runAsNonRoot.label')\"\n            :options=\"[false, true]\"\n            :labels=\"[t('workload.container.security.runAsNonRoot.false'), t('workload.container.security.runAsNonRoot.true')]\"\n            :mode=\"mode\"\n            @input=\"update\"\n          />\n        </div>\n        <div\n          data-testid=\"input-security-readOnlyRootFilesystem\"\n          class=\"col span-6\"\n        >\n          <RadioGroup\n            v-model=\"readOnlyRootFilesystem\"\n            name=\"readOnlyRootFilesystem\"\n            :label=\"t('workload.container.security.readOnlyRootFilesystem.label')\"\n            :options=\"[false, true]\"\n            :labels=\"[t('workload.container.security.readOnlyRootFilesystem.false'), t('workload.container.security.readOnlyRootFilesystem.true')]\"\n            :mode=\"mode\"\n            @input=\"update\"\n          />\n        </div>\n      </div>\n    </div>\n    <div class=\"spacer\" />\n\n    <div\n      data-testid=\"input-security-runAsUser\"\n      class=\"row mb-10\"\n    >\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model.number=\"runAsUser\"\n          :label=\"t('workload.container.security.runAsUser')\"\n          :mode=\"mode\"\n          @input=\"update\"\n        />\n      </div>\n    </div>\n\n    <div class=\"row\">\n      <div\n        data-testid=\"input-security-add\"\n        class=\"col span-6\"\n      >\n        <LabeledSelect\n          v-model=\"add\"\n          :taggable=\"true\"\n          :close-on-select=\"false\"\n          :mode=\"mode\"\n          :multiple=\"true\"\n          :label=\"t('workload.container.security.addCapabilities')\"\n          :options=\"allCapabilities\"\n          :disabled=\"mode==='view'\"\n          @input=\"update\"\n        />\n      </div>\n      <div\n        data-testid=\"input-security-drop\"\n        class=\"col span-6\"\n      >\n        <LabeledSelect\n          v-model=\"drop\"\n          :close-on-select=\"false\"\n          :taggable=\"true\"\n          :multiple=\"true\"\n          :mode=\"mode\"\n          :label=\"t('workload.container.security.dropCapabilities')\"\n          :options=\"allCapabilities\"\n          :disabled=\"mode==='view'\"\n          @input=\"update\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n"]}]}