{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/list/management.cattle.io.setting.vue?vue&type=style&index=0&id=643bad22&lang=scss&scoped=true","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/list/management.cattle.io.setting.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/css-loader/dist/cjs.js","mtime":1716430467357},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1716430467929},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/postcss-loader/src/index.js","mtime":1716430467882},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/sass-loader/dist/cjs.js","mtime":1716430453705},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5zZXR0aW5ncy1iYW5uZXIgewogIG1hcmdpbi10b3A6IDA7Cn0KLmFkdmFuY2VkLXNldHRpbmcgewogIGJvcmRlcjogMXB4IHNvbGlkIHZhcigtLWJvcmRlcik7CiAgcGFkZGluZzogMjBweDsKICBib3JkZXItcmFkaXVzOiB2YXIoLS1ib3JkZXItcmFkaXVzKTsKCiAgaDEgewogICAgZm9udC1zaXplOiAxNHB4OwogIH0KICBoMiB7CiAgICBmb250LXNpemU6IDEycHg7CiAgICBtYXJnaW4tYm90dG9tOiAwOwogICAgb3BhY2l0eTogMC44OwogIH0KfQoKLnNldHRpbmdzLXZhbHVlIHByZSB7CiAgbWFyZ2luOiAwOwp9CgouaGVhZGVyIHsKICBkaXNwbGF5OiBmbGV4OwogIG1hcmdpbi1ib3R0b206IDIwcHg7Cn0KCi50aXRsZSB7CiAgZmxleDogMTsKfQoKLm1vZGlmaWVkIHsKICBtYXJnaW4tbGVmdDogMTBweDsKICBib3JkZXI6IDFweCBzb2xpZCB2YXIoLS1wcmltYXJ5KTsKICBib3JkZXItcmFkaXVzOiA1cHg7CiAgcGFkZGluZzogMnB4IDEwcHg7CiAgZm9udC1zaXplOiAxMnB4Owp9Cg=="},{"version":3,"sources":["management.cattle.io.setting.vue"],"names":[],"mappings":";AAiKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"management.cattle.io.setting.vue","sourceRoot":"node_modules/@rancher/shell/list","sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport { MANAGEMENT } from '@shell/config/types';\nimport { ALLOWED_SETTINGS } from '@shell/config/settings';\nimport { Banner } from '@components/Banner';\nimport Loading from '@shell/components/Loading';\nimport { VIEW_IN_API } from '@shell/store/prefs';\n\nexport default {\n  components: { Banner, Loading },\n\n  async fetch() {\n    const viewInApi = this.$store.getters['prefs/get'](VIEW_IN_API);\n    const rows = await this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.SETTING });\n    const t = this.$store.getters['i18n/t'];\n    // Map settings from array to object keyed by id\n    const settingsMap = rows.reduce((res, s) => {\n      res[s.id] = s;\n\n      return res;\n    }, {});\n\n    const settings = [];\n\n    // Combine the allowed settings with the data from the API\n    for ( const id in ALLOWED_SETTINGS ) {\n      const setting = settingsMap[id];\n\n      if ( !setting ) {\n        continue;\n      }\n\n      const readonly = !!ALLOWED_SETTINGS[id].readOnly;\n      const s = {\n        ...ALLOWED_SETTINGS[id],\n        id,\n        description: t(`advancedSettings.descriptions.${ id }`),\n        data:        setting,\n        customized:  !readonly && setting.value && setting.value !== setting.default,\n        fromEnv:     setting.fromEnv,\n      };\n\n      s.hide = s.canHide = (s.kind === 'json' || s.kind === 'multiline');\n\n      if (s.kind === 'json') {\n        s.json = JSON.stringify(JSON.parse(s.data.value || s.data.default), null, 2);\n      } else if (s.kind === 'enum') {\n        const v = s.data.value || s.data.default;\n\n        s.enum = `advancedSettings.enum.${ id }.${ v }`;\n      }\n      // There are only 2 actions that can be enabled - Edit Setting or View in API\n      // If neither is available for this setting then we hide the action menu button\n      s.hasActions = (!s.readOnly || viewInApi) && setting.availableActions?.length;\n      settings.push(s);\n    }\n\n    this.settings = settings;\n  },\n\n  data() {\n    return { settings: null };\n  },\n\n  computed: { ...mapGetters({ t: 'i18n/t' }) },\n\n  methods: {\n    showActionMenu(e, setting) {\n      const actionElement = e.srcElement;\n\n      this.$store.commit(`action-menu/show`, {\n        resources: setting.data,\n        elem:      actionElement\n      });\n    },\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"!settings\" />\n  <div v-else>\n    <Banner\n      color=\"warning\"\n      class=\"settings-banner\"\n    >\n      <div>\n        {{ t('advancedSettings.subtext') }}\n      </div>\n    </Banner>\n    <div\n      v-for=\"setting in settings\"\n      :key=\"setting.id\"\n      class=\"advanced-setting mb-20\"\n    >\n      <div class=\"header\">\n        <div class=\"title\">\n          <h1>\n            {{ setting.id }}\n            <span\n              v-if=\"setting.fromEnv\"\n              class=\"modified\"\n            >Set by Environment Variable</span>\n            <span\n              v-else-if=\"setting.customized\"\n              class=\"modified\"\n            >{{ t('advancedSettings.modified') }}</span>\n          </h1>\n          <h2>{{ t(`advancedSettings.descriptions.${setting.id}`) }}</h2>\n        </div>\n        <div\n          v-if=\"setting.hasActions\"\n          class=\"action\"\n        >\n          <button\n            aria-haspopup=\"true\"\n            aria-expanded=\"false\"\n            type=\"button\"\n            class=\"btn btn-sm role-multi-action actions\"\n            @click=\"showActionMenu($event, setting)\"\n          >\n            <i class=\"icon icon-actions\" />\n          </button>\n        </div>\n      </div>\n      <div value>\n        <div v-if=\"setting.hide\">\n          <button\n            class=\"btn btn-sm role-primary\"\n            @click=\"setting.hide = !setting.hide\"\n          >\n            {{ t('advancedSettings.show') }} {{ setting.id }}\n          </button>\n        </div>\n        <div\n          v-else\n          class=\"settings-value\"\n        >\n          <pre v-if=\"setting.kind === 'json'\">{{ setting.json }}</pre>\n          <pre v-else-if=\"setting.kind === 'multiline'\">{{ setting.data.value || setting.data.default }}</pre>\n          <pre v-else-if=\"setting.kind === 'enum'\">{{ t(setting.enum) }}</pre>\n          <pre v-else-if=\"setting.data.value || setting.data.default\">{{ setting.data.value || setting.data.default }}</pre>\n          <pre\n            v-else\n            class=\"text-muted\"\n          >&lt;{{ t('advancedSettings.none') }}&gt;</pre>\n        </div>\n        <div v-if=\"setting.canHide && !setting.hide\">\n          <button\n            class=\"btn btn-sm role-primary\"\n            @click=\"setting.hide = !setting.hide\"\n          >\n            {{ t('advancedSettings.hide') }} {{ setting.id }}\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.settings-banner {\n  margin-top: 0;\n}\n.advanced-setting {\n  border: 1px solid var(--border);\n  padding: 20px;\n  border-radius: var(--border-radius);\n\n  h1 {\n    font-size: 14px;\n  }\n  h2 {\n    font-size: 12px;\n    margin-bottom: 0;\n    opacity: 0.8;\n  }\n}\n\n.settings-value pre {\n  margin: 0;\n}\n\n.header {\n  display: flex;\n  margin-bottom: 20px;\n}\n\n.title {\n  flex: 1;\n}\n\n.modified {\n  margin-left: 10px;\n  border: 1px solid var(--primary);\n  border-radius: 5px;\n  padding: 2px 10px;\n  font-size: 12px;\n}\n</style>\n"]}]}