{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/networking.k8s.io.ingress/Certificate.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/networking.k8s.io.ingress/Certificate.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7CmltcG9ydCBBcnJheUxpc3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9BcnJheUxpc3QnOwoKY29uc3QgREVGQVVMVF9DRVJUX1ZBTFVFID0gJ19fW1tERUZBVUxUX0NFUlRdXV9fJzsKCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7IEFycmF5TGlzdCwgTGFiZWxlZFNlbGVjdCB9LAogIHByb3BzOiAgICAgIHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgICAgZGVmYXVsdDogKCkgPT4gewogICAgICAgIHJldHVybiB7fTsKICAgICAgfSwKICAgIH0sCiAgICBjZXJ0czogewogICAgICB0eXBlOiAgICBBcnJheSwKICAgICAgZGVmYXVsdDogKCkgPT4gW10sCiAgICB9LAogICAgcnVsZXM6IHsKICAgICAgZGVmYXVsdDogKCkgPT4gKHsgaG9zdDogW10gfSksCiAgICAgIHR5cGU6ICAgIE9iamVjdCwKICAgIH0KICB9LAogIGRhdGEoKSB7CiAgICBjb25zdCBkZWZhdWx0Q2VydCA9IHsKICAgICAgbGFiZWw6IHRoaXMudCgnaW5ncmVzcy5jZXJ0aWZpY2F0ZXMuZGVmYXVsdENlcnRMYWJlbCcpLAogICAgICB2YWx1ZTogREVGQVVMVF9DRVJUX1ZBTFVFLAogICAgfTsKICAgIGNvbnN0IHsgaG9zdHMgPSBbJyddLCBzZWNyZXROYW1lID0gZGVmYXVsdENlcnQudmFsdWUgfSA9IHRoaXMudmFsdWU7CgogICAgcmV0dXJuIHsKICAgICAgZGVmYXVsdENlcnQsCiAgICAgIGhvc3RzLAogICAgICBzZWNyZXROYW1lLAogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBjZXJ0c1dpdGhEZWZhdWx0KCkgewogICAgICByZXR1cm4gW3RoaXMuZGVmYXVsdENlcnQsIC4uLnRoaXMuY2VydHMubWFwKChjKSA9PiAoeyBsYWJlbDogYywgdmFsdWU6IGMgfSkpXTsKICAgIH0sCiAgICBjZXJ0aWZpY2F0ZVN0YXR1cygpIHsKICAgICAgY29uc3QgaXNWYWx1ZUFuT3B0aW9uID0gIXRoaXMuc2VjcmV0TmFtZSB8fCB0aGlzLmNlcnRzV2l0aERlZmF1bHQuZmluZCgoY2VydCkgPT4gdGhpcy5zZWNyZXROYW1lID09PSBjZXJ0LnZhbHVlKTsKCiAgICAgIHJldHVybiBpc1ZhbHVlQW5PcHRpb24gPyBudWxsIDogJ3dhcm5pbmcnOwogICAgfSwKICAgIGNlcnRpZmljYXRlVG9vbHRpcCgpIHsKICAgICAgcmV0dXJuIHRoaXMuY2VydGlmaWNhdGVTdGF0dXMgPT09ICd3YXJuaW5nJyA/IHRoaXMudCgnaW5ncmVzcy5jZXJ0aWZpY2F0ZXMuY2VydGlmaWNhdGUuZG9lc250RXhpc3QnKSA6IG51bGw7CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgYWRkSG9zdChldikgewogICAgICBldi5wcmV2ZW50RGVmYXVsdCgpOwogICAgICB0aGlzLmhvc3RzLnB1c2goJycpOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfSwKICAgIHVwZGF0ZSgpIHsKICAgICAgY29uc3Qgb3V0ID0geyBob3N0czogdGhpcy5ob3N0cyB9OwoKICAgICAgb3V0LnNlY3JldE5hbWUgPSB0aGlzLnNlY3JldE5hbWU7CgogICAgICBpZiAob3V0LnNlY3JldE5hbWUgPT09IERFRkFVTFRfQ0VSVF9WQUxVRSkgewogICAgICAgIG91dC5zZWNyZXROYW1lID0gbnVsbDsKICAgICAgfQoKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCBvdXQpOwogICAgfSwKICAgIG9uU2VjcmV0SW5wdXQoZSkgewogICAgICB0aGlzLnNlY3JldE5hbWUgPSBlICYmIHR5cGVvZiBlID09PSAnb2JqZWN0JyA/IGUubGFiZWwgOiBlOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfSwKICAgIG9uSG9zdHNJbnB1dChlKSB7CiAgICAgIHRoaXMuaG9zdHMgPSBlOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["Certificate.vue"],"names":[],"mappings":";AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Certificate.vue","sourceRoot":"node_modules/@rancher/shell/edit/networking.k8s.io.ingress","sourcesContent":["<script>\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport ArrayList from '@shell/components/form/ArrayList';\n\nconst DEFAULT_CERT_VALUE = '__[[DEFAULT_CERT]]__';\n\nexport default {\n  components: { ArrayList, LabeledSelect },\n  props:      {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      },\n    },\n    certs: {\n      type:    Array,\n      default: () => [],\n    },\n    rules: {\n      default: () => ({ host: [] }),\n      type:    Object,\n    }\n  },\n  data() {\n    const defaultCert = {\n      label: this.t('ingress.certificates.defaultCertLabel'),\n      value: DEFAULT_CERT_VALUE,\n    };\n    const { hosts = [''], secretName = defaultCert.value } = this.value;\n\n    return {\n      defaultCert,\n      hosts,\n      secretName,\n    };\n  },\n  computed: {\n    certsWithDefault() {\n      return [this.defaultCert, ...this.certs.map((c) => ({ label: c, value: c }))];\n    },\n    certificateStatus() {\n      const isValueAnOption = !this.secretName || this.certsWithDefault.find((cert) => this.secretName === cert.value);\n\n      return isValueAnOption ? null : 'warning';\n    },\n    certificateTooltip() {\n      return this.certificateStatus === 'warning' ? this.t('ingress.certificates.certificate.doesntExist') : null;\n    },\n  },\n  methods: {\n    addHost(ev) {\n      ev.preventDefault();\n      this.hosts.push('');\n      this.update();\n    },\n    update() {\n      const out = { hosts: this.hosts };\n\n      out.secretName = this.secretName;\n\n      if (out.secretName === DEFAULT_CERT_VALUE) {\n        out.secretName = null;\n      }\n\n      this.$emit('input', out);\n    },\n    onSecretInput(e) {\n      this.secretName = e && typeof e === 'object' ? e.label : e;\n      this.update();\n    },\n    onHostsInput(e) {\n      this.hosts = e;\n      this.update();\n    }\n  },\n};\n</script>\n\n<template>\n  <div\n    class=\"cert row\"\n    @input=\"update\"\n  >\n    <div class=\"col span-6\">\n      <LabeledSelect\n        v-model=\"secretName\"\n        class=\"secret-name\"\n        :options=\"certsWithDefault\"\n        :label=\"t('ingress.certificates.certificate.label')\"\n        required\n        :status=\"certificateStatus\"\n        :taggable=\"true\"\n        :tooltip=\"certificateTooltip\"\n        :hover-tooltip=\"true\"\n        :searchable=\"true\"\n        @input=\"onSecretInput\"\n      />\n    </div>\n    <div class=\"col span-6\">\n      <ArrayList\n        :value=\"hosts\"\n        :add-label=\"t('ingress.certificates.addHost')\"\n        :rules=\"rules.host\"\n        :initial-empty-row=\"true\"\n        @input=\"onHostsInput\"\n      />\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.close {\n  top: 10px;\n  right: 10px;\n  padding:0;\n  position: absolute;\n}\n\n.cert {\n  position: relative;\n\n  .secret-name {\n    height: $input-height;\n  }\n\n  &:not(:last-of-type) {\n    padding-bottom: 10px;\n    margin-bottom: 30px;\n  }\n}\n</style>\n"]}]}