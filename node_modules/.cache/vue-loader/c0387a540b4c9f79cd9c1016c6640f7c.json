{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/monitoring.coreos.com.prometheusrule/AlertingRule.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/monitoring.coreos.com.prometheusrule/AlertingRule.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnOwppbXBvcnQgaGFzIGZyb20gJ2xvZGFzaC9oYXMnOwppbXBvcnQgaXNFbXB0eSBmcm9tICdsb2Rhc2gvaXNFbXB0eSc7CmltcG9ydCBwaWNrQnkgZnJvbSAnbG9kYXNoL3BpY2tCeSc7CgppbXBvcnQgeyBDaGVja2JveCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vQ2hlY2tib3gnOwppbXBvcnQgQ29kZU1pcnJvciBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Db2RlTWlycm9yJzsKaW1wb3J0IEtleVZhbHVlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vS2V5VmFsdWUnOwppbXBvcnQgeyBMYWJlbGVkSW5wdXQgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0xhYmVsZWRJbnB1dCc7CmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7CmltcG9ydCBVbml0SW5wdXQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9Vbml0SW5wdXQnOwppbXBvcnQgeyBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgdG9NaWxsaXNlY29uZHMgfSBmcm9tICcuL2R1cmF0aW9uLmpzJzsKCmNvbnN0IElHTk9SRURfQU5OT1RBVElPTlMgPSBbCiAgJ3N1bW1hcnknLAogICdtZXNzYWdlJywKICAnZGVzY3JpcHRpb24nLAogICdydW5ib29rX3VybCcsCl07CgpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQ2hlY2tib3gsCiAgICBDb2RlTWlycm9yLAogICAgS2V5VmFsdWUsCiAgICBMYWJlbGVkSW5wdXQsCiAgICBMYWJlbGVkU2VsZWN0LAogICAgVW5pdElucHV0LAogIH0sCgogIHByb3BzOiB7CiAgICB2YWx1ZTogewogICAgICB0eXBlOiAgICBPYmplY3QsCiAgICAgIGRlZmF1bHQ6ICgpID0+ICh7fSksCiAgICB9LAoKICAgIG1vZGU6IHsKICAgICAgdHlwZTogICAgU3RyaW5nLAogICAgICBkZWZhdWx0OiAnY3JlYXRlJywKICAgIH0sCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlbGVjdGVkU2V2ZXJpdHlMYWJlbDogbnVsbCwKICAgICAgaWdub3JlZEFubm90YXRpb25zOiAgICBJR05PUkVEX0FOTk9UQVRJT05TLAogICAgICBzZXZlcml0eU9wdGlvbnM6ICAgICAgIFsKICAgICAgICB0aGlzLnQoJ3Byb21ldGhldXNSdWxlLmFsZXJ0aW5nUnVsZXMubGFiZWxzLnNldmVyaXR5LmNob2ljZXMuY3JpdGljYWwnKSwKICAgICAgICB0aGlzLnQoJ3Byb21ldGhldXNSdWxlLmFsZXJ0aW5nUnVsZXMubGFiZWxzLnNldmVyaXR5LmNob2ljZXMud2FybmluZycpLAogICAgICAgIHRoaXMudCgncHJvbWV0aGV1c1J1bGUuYWxlcnRpbmdSdWxlcy5sYWJlbHMuc2V2ZXJpdHkuY2hvaWNlcy5ub25lJyksCiAgICAgIF0sCiAgICB9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICBpc1ZpZXcoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGUgPT09IF9WSUVXOwogICAgfSwKICAgIHNldmVyaXR5TGFiZWxDaGVja2VkOiB7CiAgICAgIGdldCgpIHsKICAgICAgICBpZiAoaGFzKHRoaXMudmFsdWU/LmxhYmVscywgJ3NldmVyaXR5JykpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9LAogICAgICBzZXQodmFsdWUpIHsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgIGlmIChpc0VtcHR5KHRoaXMudmFsdWU/LmxhYmVscykpIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdsYWJlbHMnLCB7IHNldmVyaXR5OiAnbm9uZScgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5sYWJlbHMsICdzZXZlcml0eScsICdub25lJyk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLmxhYmVscywgJ3NldmVyaXR5JywgJycpOwogICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUubGFiZWxzLnNldmVyaXR5OwogICAgICAgIH0KICAgICAgfSwKICAgIH0sCgogICAgc3VtbWFyeUFubm90YXRpb25DaGVja2VkOiB7CiAgICAgIGdldCgpIHsKICAgICAgICBpZiAoaGFzKHRoaXMudmFsdWU/LmFubm90YXRpb25zLCAnc3VtbWFyeScpKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSwKICAgICAgc2V0KHZhbHVlKSB7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBpZiAoaXNFbXB0eSh0aGlzLnZhbHVlPy5hbm5vdGF0aW9ucykpIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdhbm5vdGF0aW9ucycsIHsgc3VtbWFyeTogJycgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5hbm5vdGF0aW9ucywgJ3N1bW1hcnknLCAnJyk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLmFubm90YXRpb25zLCAnc3VtbWFyeScsICcnKTsKICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLmFubm90YXRpb25zLnN1bW1hcnk7CiAgICAgICAgfQogICAgICB9LAogICAgfSwKCiAgICBtZXNzYWdlQW5ub3RhdGlvbkNoZWNrZWQ6IHsKICAgICAgZ2V0KCkgewogICAgICAgIGlmIChoYXModGhpcy52YWx1ZT8uYW5ub3RhdGlvbnMsICdtZXNzYWdlJykpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9LAogICAgICBzZXQodmFsdWUpIHsKICAgICAgICBpZiAodmFsdWUpIHsKICAgICAgICAgIGlmIChpc0VtcHR5KHRoaXMudmFsdWU/LmFubm90YXRpb25zKSkgewogICAgICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ2Fubm90YXRpb25zJywgeyBtZXNzYWdlOiAnJyB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLmFubm90YXRpb25zLCAnbWVzc2FnZScsICcnKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuYW5ub3RhdGlvbnMsICdtZXNzYWdlJywgJycpOwogICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUuYW5ub3RhdGlvbnMubWVzc2FnZTsKICAgICAgICB9CiAgICAgIH0sCiAgICB9LAoKICAgIGRlc2NyaXB0aW9uQW5ub3RhdGlvbkNoZWNrZWQ6IHsKICAgICAgZ2V0KCkgewogICAgICAgIGlmIChoYXModGhpcy52YWx1ZT8uYW5ub3RhdGlvbnMsICdkZXNjcmlwdGlvbicpKSB7CiAgICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfSwKICAgICAgc2V0KHZhbHVlKSB7CiAgICAgICAgaWYgKHZhbHVlKSB7CiAgICAgICAgICBpZiAoaXNFbXB0eSh0aGlzLnZhbHVlPy5hbm5vdGF0aW9ucykpIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdhbm5vdGF0aW9ucycsIHsgZGVzY3JpcHRpb246ICcnIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuYW5ub3RhdGlvbnMsICdkZXNjcmlwdGlvbicsICcnKTsKICAgICAgICAgIH0KICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuYW5ub3RhdGlvbnMsICdkZXNjcmlwdGlvbicsICcnKTsKICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLmFubm90YXRpb25zLmRlc2NyaXB0aW9uOwogICAgICAgIH0KICAgICAgfSwKICAgIH0sCgogICAgcnVuYm9va0Fubm90YXRpb25DaGVja2VkOiB7CiAgICAgIGdldCgpIHsKICAgICAgICBpZiAoaGFzKHRoaXMudmFsdWU/LmFubm90YXRpb25zLCAncnVuYm9va191cmwnKSkgewogICAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0sCiAgICAgIHNldCh2YWx1ZSkgewogICAgICAgIGlmICh2YWx1ZSkgewogICAgICAgICAgaWYgKGlzRW1wdHkodGhpcy52YWx1ZT8uYW5ub3RhdGlvbnMpKSB7CiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnYW5ub3RhdGlvbnMnLCB7IHJ1bmJvb2tfdXJsOiAnJyB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLmFubm90YXRpb25zLCAncnVuYm9va191cmwnLCAnJyk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLmFubm90YXRpb25zLCAncnVuYm9va191cmwnLCAnJyk7CiAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5hbm5vdGF0aW9ucy5ydW5ib29rX3VybDsKICAgICAgICB9CiAgICAgIH0sCiAgICB9LAoKICAgIGZpbHRlcmVkQW5ub3RhdGlvbnMoKSB7CiAgICAgIGNvbnN0IHsgaWdub3JlZEFubm90YXRpb25zIH0gPSB0aGlzOwogICAgICBjb25zdCBhbm5vdGF0aW9ucyA9IHRoaXMudmFsdWU/LmFubm90YXRpb25zOwoKICAgICAgcmV0dXJuIHBpY2tCeShhbm5vdGF0aW9ucywgKHZhbHVlLCBrZXkpID0+IHsKICAgICAgICByZXR1cm4gIWlnbm9yZWRBbm5vdGF0aW9ucy5pbmNsdWRlcyhrZXkpOwogICAgICB9KTsKICAgIH0sCgogICAgZmlsdGVyZWRMYWJlbHMoKSB7CiAgICAgIGNvbnN0IGxhYmVscyA9IHRoaXMudmFsdWU/LmxhYmVsczsKCiAgICAgIHJldHVybiBwaWNrQnkobGFiZWxzLCAodmFsdWUsIGtleSkgPT4gewogICAgICAgIHJldHVybiBrZXkgIT09ICdzZXZlcml0eSc7CiAgICAgIH0pOwogICAgfSwKCiAgICBzaG93Q3VzdG9tU2V2ZXJpdHlJbnB1dCgpIHsKICAgICAgY29uc3QgeyBzZWxlY3RlZFNldmVyaXR5TGFiZWwgfSA9IHRoaXM7CgogICAgICBpZiAoc2VsZWN0ZWRTZXZlcml0eUxhYmVsID09PSAnY3VzdG9tJykgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CgogICAgICByZXR1cm4gZmFsc2U7CiAgICB9LAoKICAgIHdhaXRUb0ZpcmVGb3I6IHsKICAgICAgZ2V0KCkgewogICAgICAgIGlmICghW251bGwsIHVuZGVmaW5lZF0uaW5jbHVkZXModGhpcy52YWx1ZS5mb3IpKSB7CiAgICAgICAgICByZXR1cm4gTWF0aC5mbG9vcih0b01pbGxpc2Vjb25kcyh0aGlzLnZhbHVlLmZvcikgLyAxMDAwKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIH0sCiAgICAgIHNldCh2KSB7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdmb3InLCBbbnVsbCwgdW5kZWZpbmVkXS5pbmNsdWRlcyh2KSA/IHVuZGVmaW5lZCA6IGAkeyB2IH1zYCk7CiAgICAgIH0KICAgIH0KICB9LAoKICB3YXRjaDogewogICAgc2VsZWN0ZWRTZXZlcml0eUxhYmVsKHZhbHVlIC8qICwgb2xkVmFsdWUgKi8pIHsKICAgICAgY29uc3QgbmV1ID0gdmFsdWUgPT09ICdjdXN0b20nID8gJycgOiB2YWx1ZTsKCiAgICAgIGlmICh0aGlzLnZhbHVlPy5sYWJlbHMpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5sYWJlbHMsICdzZXZlcml0eScsIG5ldSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdsYWJlbHMnLCB7IHNldmVyaXR5OiBuZXUgfSk7CiAgICAgIH0KICAgIH0sCiAgfSwKCiAgY3JlYXRlZCgpIHsKICAgIHRoaXMucXVldWVVcGRhdGUgPSBkZWJvdW5jZSh0aGlzLnVwZGF0ZUV4cHJlc3Npb24sIDUwMCk7CiAgICB0aGlzLnF1ZXVlTGFiZWxVcGRhdGUgPSBkZWJvdW5jZSh0aGlzLnVwZGF0ZUxhYmVscywgNTAwKTsKICAgIHRoaXMucXVldWVBbm5vdGF0aW9uVXBkYXRlID0gZGVib3VuY2UodGhpcy51cGRhdGVBbm5vdGF0aW9ucywgNTAwKTsKICB9LAoKICBtb3VudGVkKCkgewogICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gewogICAgICBpZiAodGhpcy52YWx1ZT8ubGFiZWxzPy5zZXZlcml0eSkgewogICAgICAgIHRoaXMuc2VsZWN0ZWRTZXZlcml0eUxhYmVsID0gdGhpcy52YWx1ZS5sYWJlbHMuc2V2ZXJpdHk7CiAgICAgIH0KICAgIH0pOwogIH0sCgogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZUxhYmVscyh2YWx1ZSkgewogICAgICBjb25zdCBuZXUgPSB7IC4uLnZhbHVlIH07CgogICAgICBpZiAodGhpcy5zZWxlY3RlZFNldmVyaXR5TGFiZWwpIHsKICAgICAgICBuZXVbJ3NldmVyaXR5J10gPSB0aGlzLnNlbGVjdGVkU2V2ZXJpdHlMYWJlbDsKICAgICAgfQoKICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdsYWJlbHMnLCBuZXUpOwogICAgfSwKICAgIHVwZGF0ZUFubm90YXRpb25zKHZhbHVlKSB7CiAgICAgIGNvbnN0IHsKICAgICAgICBpZ25vcmVkQW5ub3RhdGlvbnMsCiAgICAgICAgdmFsdWU6IHsgYW5ub3RhdGlvbnMgPSB7fSB9LAogICAgICB9ID0gdGhpczsKICAgICAgY29uc3QgbmV1ID0geyAuLi52YWx1ZSB9OwoKICAgICAgaWdub3JlZEFubm90YXRpb25zLmZvckVhY2goKGFubm8pID0+IHsKICAgICAgICBpZiAoaGFzKGFubm90YXRpb25zLCBhbm5vKSkgewogICAgICAgICAgbmV1W2Fubm9dID0gYW5ub3RhdGlvbnNbYW5ub107CiAgICAgICAgfQogICAgICB9KTsKCiAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnYW5ub3RhdGlvbnMnLCBuZXUpOwogICAgfSwKICAgIHVwZGF0ZUV4cHJlc3Npb24odmFsdWUpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdleHByJywgdmFsdWUpOwogICAgfQogIH0sCn07Cg=="},{"version":3,"sources":["AlertingRule.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AlertingRule.vue","sourceRoot":"node_modules/@rancher/shell/edit/monitoring.coreos.com.prometheusrule","sourcesContent":["<script>\nimport debounce from 'lodash/debounce';\nimport has from 'lodash/has';\nimport isEmpty from 'lodash/isEmpty';\nimport pickBy from 'lodash/pickBy';\n\nimport { Checkbox } from '@components/Form/Checkbox';\nimport CodeMirror from '@shell/components/CodeMirror';\nimport KeyValue from '@shell/components/form/KeyValue';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport UnitInput from '@shell/components/form/UnitInput';\nimport { _VIEW } from '@shell/config/query-params';\nimport { toMilliseconds } from './duration.js';\n\nconst IGNORED_ANNOTATIONS = [\n  'summary',\n  'message',\n  'description',\n  'runbook_url',\n];\n\nexport default {\n  components: {\n    Checkbox,\n    CodeMirror,\n    KeyValue,\n    LabeledInput,\n    LabeledSelect,\n    UnitInput,\n  },\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => ({}),\n    },\n\n    mode: {\n      type:    String,\n      default: 'create',\n    },\n  },\n\n  data() {\n    return {\n      selectedSeverityLabel: null,\n      ignoredAnnotations:    IGNORED_ANNOTATIONS,\n      severityOptions:       [\n        this.t('prometheusRule.alertingRules.labels.severity.choices.critical'),\n        this.t('prometheusRule.alertingRules.labels.severity.choices.warning'),\n        this.t('prometheusRule.alertingRules.labels.severity.choices.none'),\n      ],\n    };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n    severityLabelChecked: {\n      get() {\n        if (has(this.value?.labels, 'severity')) {\n          return true;\n        }\n\n        return false;\n      },\n      set(value) {\n        if (value) {\n          if (isEmpty(this.value?.labels)) {\n            this.$set(this.value, 'labels', { severity: 'none' });\n          } else {\n            this.$set(this.value.labels, 'severity', 'none');\n          }\n        } else {\n          this.$set(this.value.labels, 'severity', '');\n          delete this.value.labels.severity;\n        }\n      },\n    },\n\n    summaryAnnotationChecked: {\n      get() {\n        if (has(this.value?.annotations, 'summary')) {\n          return true;\n        }\n\n        return false;\n      },\n      set(value) {\n        if (value) {\n          if (isEmpty(this.value?.annotations)) {\n            this.$set(this.value, 'annotations', { summary: '' });\n          } else {\n            this.$set(this.value.annotations, 'summary', '');\n          }\n        } else {\n          this.$set(this.value.annotations, 'summary', '');\n          delete this.value.annotations.summary;\n        }\n      },\n    },\n\n    messageAnnotationChecked: {\n      get() {\n        if (has(this.value?.annotations, 'message')) {\n          return true;\n        }\n\n        return false;\n      },\n      set(value) {\n        if (value) {\n          if (isEmpty(this.value?.annotations)) {\n            this.$set(this.value, 'annotations', { message: '' });\n          } else {\n            this.$set(this.value.annotations, 'message', '');\n          }\n        } else {\n          this.$set(this.value.annotations, 'message', '');\n          delete this.value.annotations.message;\n        }\n      },\n    },\n\n    descriptionAnnotationChecked: {\n      get() {\n        if (has(this.value?.annotations, 'description')) {\n          return true;\n        }\n\n        return false;\n      },\n      set(value) {\n        if (value) {\n          if (isEmpty(this.value?.annotations)) {\n            this.$set(this.value, 'annotations', { description: '' });\n          } else {\n            this.$set(this.value.annotations, 'description', '');\n          }\n        } else {\n          this.$set(this.value.annotations, 'description', '');\n          delete this.value.annotations.description;\n        }\n      },\n    },\n\n    runbookAnnotationChecked: {\n      get() {\n        if (has(this.value?.annotations, 'runbook_url')) {\n          return true;\n        }\n\n        return false;\n      },\n      set(value) {\n        if (value) {\n          if (isEmpty(this.value?.annotations)) {\n            this.$set(this.value, 'annotations', { runbook_url: '' });\n          } else {\n            this.$set(this.value.annotations, 'runbook_url', '');\n          }\n        } else {\n          this.$set(this.value.annotations, 'runbook_url', '');\n          delete this.value.annotations.runbook_url;\n        }\n      },\n    },\n\n    filteredAnnotations() {\n      const { ignoredAnnotations } = this;\n      const annotations = this.value?.annotations;\n\n      return pickBy(annotations, (value, key) => {\n        return !ignoredAnnotations.includes(key);\n      });\n    },\n\n    filteredLabels() {\n      const labels = this.value?.labels;\n\n      return pickBy(labels, (value, key) => {\n        return key !== 'severity';\n      });\n    },\n\n    showCustomSeverityInput() {\n      const { selectedSeverityLabel } = this;\n\n      if (selectedSeverityLabel === 'custom') {\n        return true;\n      }\n\n      return false;\n    },\n\n    waitToFireFor: {\n      get() {\n        if (![null, undefined].includes(this.value.for)) {\n          return Math.floor(toMilliseconds(this.value.for) / 1000);\n        }\n\n        return undefined;\n      },\n      set(v) {\n        this.$set(this.value, 'for', [null, undefined].includes(v) ? undefined : `${ v }s`);\n      }\n    }\n  },\n\n  watch: {\n    selectedSeverityLabel(value /* , oldValue */) {\n      const neu = value === 'custom' ? '' : value;\n\n      if (this.value?.labels) {\n        this.$set(this.value.labels, 'severity', neu);\n      } else {\n        this.$set(this.value, 'labels', { severity: neu });\n      }\n    },\n  },\n\n  created() {\n    this.queueUpdate = debounce(this.updateExpression, 500);\n    this.queueLabelUpdate = debounce(this.updateLabels, 500);\n    this.queueAnnotationUpdate = debounce(this.updateAnnotations, 500);\n  },\n\n  mounted() {\n    this.$nextTick(() => {\n      if (this.value?.labels?.severity) {\n        this.selectedSeverityLabel = this.value.labels.severity;\n      }\n    });\n  },\n\n  methods: {\n    updateLabels(value) {\n      const neu = { ...value };\n\n      if (this.selectedSeverityLabel) {\n        neu['severity'] = this.selectedSeverityLabel;\n      }\n\n      this.$set(this.value, 'labels', neu);\n    },\n    updateAnnotations(value) {\n      const {\n        ignoredAnnotations,\n        value: { annotations = {} },\n      } = this;\n      const neu = { ...value };\n\n      ignoredAnnotations.forEach((anno) => {\n        if (has(annotations, anno)) {\n          neu[anno] = annotations[anno];\n        }\n      });\n\n      this.$set(this.value, 'annotations', neu);\n    },\n    updateExpression(value) {\n      this.$set(this.value, 'expr', value);\n    }\n  },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row mt-25\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"value.alert\"\n          :label=\"t('prometheusRule.alertingRules.name')\"\n          :required=\"true\"\n          :mode=\"mode\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <UnitInput\n          v-model=\"waitToFireFor\"\n          :suffix=\"t('suffix.seconds', {count: value.for})\"\n          :placeholder=\"t('prometheusRule.alertingRules.for.placeholder')\"\n          :label=\"t('prometheusRule.alertingRules.for.label')\"\n          :mode=\"mode\"\n        />\n      </div>\n    </div>\n    <div class=\"row\">\n      <div class=\"col span-12\">\n        <LabeledInput\n          v-model=\"value.expr\"\n          :label=\"t('prometheusRule.promQL.label')\"\n          :required=\"true\"\n          :mode=\"mode\"\n        >\n          <template #field>\n            <CodeMirror\n              class=\"mt-20\"\n              :value=\"value.expr\"\n              :options=\"{\n                mode: null,\n                foldGutter: false,\n                readOnly: mode === 'view',\n              }\"\n              @onInput=\"queueUpdate\"\n            />\n          </template>\n        </LabeledInput>\n      </div>\n    </div>\n    <div class=\"suggested-labels\">\n      <div class=\"row mb-0 mt-30\">\n        <div class=\"col span-12\">\n          <h3>\n            <t k=\"prometheusRule.alertingRules.labels.label\" />\n          </h3>\n        </div>\n      </div>\n      <div :class=\"[{ hide: isView && !severityLabelChecked }, 'row']\">\n        <div\n          v-if=\"isView && severityLabelChecked\"\n          class=\"col span-6 severity\"\n        >\n          <label><t k=\"prometheusRule.alertingRules.labels.severity.label\" /></label>\n          <div>{{ value.labels.severity }}</div>\n        </div>\n        <div\n          v-else\n          class=\"severity col span-6\"\n        >\n          <Checkbox\n            v-model=\"severityLabelChecked\"\n            :mode=\"mode\"\n            :label=\"t('prometheusRule.alertingRules.labels.severity.label')\"\n          />\n          <LabeledSelect\n            v-if=\"severityLabelChecked\"\n            v-model=\"value.labels.severity\"\n            class=\"mt-10\"\n            :mode=\"mode\"\n            :label=\"t('prometheusRule.alertingRules.labels.severity.choices.label')\"\n            :localized-label=\"false\"\n            :options=\"severityOptions\"\n          />\n        </div>\n      </div>\n      <div :class=\"[{ hide: isView && Object.keys(filteredLabels).length === 0}, 'row', 'mt-0']\">\n        <div class=\"col span-12\">\n          <KeyValue\n            key=\"labels\"\n            :value=\"filteredLabels\"\n            :add-label=\"t('labels.addLabel')\"\n            :mode=\"mode\"\n            :read-allowed=\"false\"\n            :value-multiline=\"false\"\n            @input=\"queueLabelUpdate\"\n          />\n        </div>\n      </div>\n      <div class=\"suggested-annotations\">\n        <div class=\"row mb-0 mt-30\">\n          <div class=\"col span-12\">\n            <h3>\n              <t k=\"prometheusRule.alertingRules.annotations.label\" />\n            </h3>\n          </div>\n        </div>\n        <div class=\"row mt-0 mb-0\">\n          <div class=\"col span-12\">\n            <div :class=\"[{ hide: isView && !summaryAnnotationChecked }, 'row']\">\n              <div\n                v-if=\"isView && summaryAnnotationChecked\"\n                class=\"col span-6 annotation-checkbox-container\"\n              >\n                <label>\n                  <t k=\"prometheusRule.alertingRules.annotations.summary.label\" />\n                </label>\n                <div>{{ value.annotations.summary }}</div>\n              </div>\n              <div\n                v-else\n                class=\"col span-6 annotation-checkbox-container\"\n              >\n                <Checkbox\n                  v-model=\"summaryAnnotationChecked\"\n                  :mode=\"mode\"\n                  :label=\"t('prometheusRule.alertingRules.annotations.summary.label')\"\n                />\n                <LabeledInput\n                  v-if=\"summaryAnnotationChecked\"\n                  v-model=\"value.annotations.summary\"\n                  class=\"mt-5\"\n                  :label=\"t('prometheusRule.alertingRules.annotations.summary.input')\"\n                  type=\"multiline\"\n                  :mode=\"mode\"\n                />\n              </div>\n            </div>\n            <div :class=\"[{ hide: isView && !messageAnnotationChecked }, 'row']\">\n              <div\n                v-if=\"isView && messageAnnotationChecked\"\n                class=\"col span-6 annotation-checkbox-container\"\n              >\n                <label><t\n                  k=\"prometheusRule.alertingRules.annotations.message.label\"\n                /></label>\n                <div>{{ value.annotations.message }}</div>\n              </div>\n              <div\n                v-else\n                class=\"col span-6 annotation-checkbox-container\"\n              >\n                <Checkbox\n                  v-model=\"messageAnnotationChecked\"\n                  :mode=\"mode\"\n                  :label=\"t('prometheusRule.alertingRules.annotations.message.label')\"\n                />\n                <LabeledInput\n                  v-if=\"messageAnnotationChecked\"\n                  v-model=\"value.annotations.message\"\n                  class=\"mt-5\"\n                  :label=\"t('prometheusRule.alertingRules.annotations.message.input')\"\n                  type=\"multiline\"\n                  :mode=\"mode\"\n                />\n              </div>\n            </div>\n            <div :class=\"[ { hide: isView && !descriptionAnnotationChecked }, 'row']\">\n              <div\n                v-if=\"isView && descriptionAnnotationChecked\"\n                class=\"col span-6 annotation-checkbox-container\"\n              >\n                <label><t\n                  k=\"prometheusRule.alertingRules.annotations.description.label\"\n                /></label>\n                <div>{{ value.annotations.description }}</div>\n              </div>\n              <div\n                v-else\n                class=\"col span-6 annotation-checkbox-container\"\n              >\n                <Checkbox\n                  v-model=\"descriptionAnnotationChecked\"\n                  :mode=\"mode\"\n                  :label=\"t('prometheusRule.alertingRules.annotations.description.label')\"\n                />\n                <LabeledInput\n                  v-if=\"descriptionAnnotationChecked\"\n                  v-model=\"value.annotations.description\"\n                  class=\"mt-5\"\n                  :label=\"t('prometheusRule.alertingRules.annotations.description.input')\"\n                  type=\"multiline\"\n                  :mode=\"mode\"\n                />\n              </div>\n            </div>\n            <div :class=\"[{ hide: isView && !runbookAnnotationChecked }, 'row']\">\n              <div\n                v-if=\"isView && runbookAnnotationChecked\"\n                class=\"col span-6 annotation-checkbox-container\"\n              >\n                <label>\n                  <t k=\"prometheusRule.alertingRules.annotations.runbook.label\" />\n                </label>\n                <div>{{ value.annotations.runbook_url }}</div>\n              </div>\n              <div\n                v-else\n                class=\"col span-6 annotation-checkbox-container\"\n              >\n                <Checkbox\n                  v-model=\"runbookAnnotationChecked\"\n                  :mode=\"mode\"\n                  :label=\"t('prometheusRule.alertingRules.annotations.runbook.label')\"\n                />\n                <LabeledInput\n                  v-if=\"runbookAnnotationChecked\"\n                  v-model=\"value.annotations.runbook_url\"\n                  class=\"mt-5\"\n                  :label=\"t('prometheusRule.alertingRules.annotations.runbook.input')\"\n                  type=\"multiline\"\n                  :mode=\"mode\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n        <div :class=\"[{ hide: isView && Object.keys(filteredAnnotations).length === 0}, 'row', 'mt-0']\">\n          <KeyValue\n            key=\"annotations\"\n            :value=\"filteredAnnotations\"\n            :add-label=\"t('labels.addAnnotation')\"\n            :mode=\"mode\"\n            :read-allowed=\"false\"\n            @input=\"queueAnnotationUpdate\"\n          />\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.row {\n  margin: 20px 0;\n}\n.remove {\n  position: absolute;\n  top: 0;\n  right: 5px;\n}\n</style>\n"]}]}