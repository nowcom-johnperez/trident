{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/core/plugins.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/core/plugins.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnZhbHVlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCB7IHByb2R1Y3RzTG9hZGVkIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3R5cGUtbWFwJzsKaW1wb3J0IHsgY2xlYXJNb2RlbENhY2hlIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvZGFzaGJvYXJkLXN0b3JlL21vZGVsLWxvYWRlcic7CmltcG9ydCB7IFBsdWdpbiB9IGZyb20gJy4vcGx1Z2luJzsKaW1wb3J0IHsgUGx1Z2luUm91dGVzIH0gZnJvbSAnLi9wbHVnaW4tcm91dGVzJzsKaW1wb3J0IHsgVUlfUExVR0lOX0JBU0VfVVJMIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy91aXBsdWdpbnMnOwppbXBvcnQgeyBFeHRlbnNpb25Qb2ludCB9IGZyb20gJy4vdHlwZXMnOwp2YXIgTU9ERUxfVFlQRSA9ICdtb2RlbHMnOwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoX3JlZiwgaW5qZWN0KSB7CiAgdmFyIGFwcCA9IF9yZWYuYXBwLAogICAgc3RvcmUgPSBfcmVmLnN0b3JlLAogICAgJGF4aW9zID0gX3JlZi4kYXhpb3MsCiAgICByZWRpcmVjdCA9IF9yZWYucmVkaXJlY3Q7CiAgdmFyIGR5bmFtaWMgPSB7fTsKICB2YXIgdmFsaWRhdG9ycyA9IHt9OwogIHZhciBfbGFzdExvYWRlZCA9IDA7CgogIC8vIFRyYWNrIHdoaWNoIHBsdWdpbiBsb2FkZWQgd2hhdCwgc28gd2UgY2FuIHVubG9hZCBzdHVmZgogIHZhciBwbHVnaW5zID0ge307CiAgdmFyIHBsdWdpblJvdXRlcyA9IG5ldyBQbHVnaW5Sb3V0ZXMoYXBwLnJvdXRlcik7CiAgdmFyIHVpQ29uZmlnID0ge307CiAgZm9yICh2YXIgZXAgaW4gRXh0ZW5zaW9uUG9pbnQpIHsKICAgIHVpQ29uZmlnW0V4dGVuc2lvblBvaW50W2VwXV0gPSB7fTsKICB9CiAgaW5qZWN0KCdwbHVnaW4nLCB7CiAgICAvLyBQbHVnaW5zIHNob3VsZCBub3QgdXNlIHRoZXNlIC0gYnV0IHdlIHdpbGwgcGFzcyB0aGVtIGluIGZvciBub3cgYXMgYSAybmQgYXJndW1lbnQKICAgIC8vIGluIGNhc2UgdGhlcmUgYXJlIHVzZSBjYXNlcyBub3QgY292ZXJlZCB0aGF0IHJlcXVpcmUgZGlyZWN0IGFjY2VzcyAtIHdlIG1heSByZW1vdmUgYWNjZXNzIGxhdGVyCiAgICBpbnRlcm5hbDogZnVuY3Rpb24gaW50ZXJuYWwoKSB7CiAgICAgIHZhciBpbnRlcm5hbCA9IHsKICAgICAgICBhcHA6IGFwcCwKICAgICAgICBzdG9yZTogc3RvcmUsCiAgICAgICAgJGF4aW9zOiAkYXhpb3MsCiAgICAgICAgcmVkaXJlY3Q6IHJlZGlyZWN0LAogICAgICAgIHBsdWdpbnM6IHRoaXMKICAgICAgfTsKICAgICAgcmV0dXJuIGludGVybmFsOwogICAgfSwKICAgIC8vIExvYWQgYSBwbHVnaW4gZnJvbSBhIFVJIHBhY2thZ2UKICAgIGxvYWRQbHVnaW5Bc3luYzogZnVuY3Rpb24gbG9hZFBsdWdpbkFzeW5jKHBsdWdpbikgewogICAgICB2YXIgX3BsdWdpbiRtZXRhZGF0YTsKICAgICAgdmFyIG5hbWUgPSBwbHVnaW4ubmFtZSwKICAgICAgICB2ZXJzaW9uID0gcGx1Z2luLnZlcnNpb247CiAgICAgIHZhciBpZCA9ICIiLmNvbmNhdChuYW1lLCAiLSIpLmNvbmNhdCh2ZXJzaW9uKTsKICAgICAgdmFyIHVybDsKICAgICAgaWYgKChwbHVnaW4gPT09IG51bGwgfHwgcGx1Z2luID09PSB2b2lkIDAgfHwgKF9wbHVnaW4kbWV0YWRhdGEgPSBwbHVnaW4ubWV0YWRhdGEpID09PSBudWxsIHx8IF9wbHVnaW4kbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wbHVnaW4kbWV0YWRhdGEuZGlyZWN0KSA9PT0gJ3RydWUnKSB7CiAgICAgICAgdXJsID0gcGx1Z2luLmVuZHBvaW50OwogICAgICB9IGVsc2UgewogICAgICAgIHZhciBfcGx1Z2luJG1ldGFkYXRhMjsKICAgICAgICAvLyBTZWUgaWYgdGhlIHBsdWdpbiBoYXMgYSBtYWluIG1ldGFkYXRhIHByb3BlcnR5IHNldAogICAgICAgIHZhciBtYWluID0gKHBsdWdpbiA9PT0gbnVsbCB8fCBwbHVnaW4gPT09IHZvaWQgMCB8fCAoX3BsdWdpbiRtZXRhZGF0YTIgPSBwbHVnaW4ubWV0YWRhdGEpID09PSBudWxsIHx8IF9wbHVnaW4kbWV0YWRhdGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcGx1Z2luJG1ldGFkYXRhMi5tYWluKSB8fCAiIi5jb25jYXQoaWQsICIudW1kLm1pbi5qcyIpOwogICAgICAgIHVybCA9ICIiLmNvbmNhdChVSV9QTFVHSU5fQkFTRV9VUkwsICIvIikuY29uY2F0KG5hbWUsICIvIikuY29uY2F0KHZlcnNpb24sICIvcGx1Z2luLyIpLmNvbmNhdChtYWluKTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy5sb2FkQXN5bmMoaWQsIHVybCk7CiAgICB9LAogICAgLy8gTG9hZCBhIHBsdWdpbiBmcm9tIGEgVUkgcGFja2FnZQogICAgbG9hZEFzeW5jOiBmdW5jdGlvbiBsb2FkQXN5bmMoaWQsIG1haW5GaWxlKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICAgICAgdmFyIG1vZHVsZVVybCA9IG1haW5GaWxlOwogICAgICAgIHZhciBlbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2NyaXB0Jyk7CiAgICAgICAgZWxlbWVudC5zcmMgPSBtb2R1bGVVcmw7CiAgICAgICAgZWxlbWVudC50eXBlID0gJ3RleHQvamF2YXNjcmlwdCc7CiAgICAgICAgZWxlbWVudC5hc3luYyA9IHRydWU7CgogICAgICAgIC8vIGlkIGlzIGA8cHJvZHVjdD4tPHZlcnNpb24+YC4KICAgICAgICB2YXIgb2xkUGx1Z2luID0gT2JqZWN0LnZhbHVlcyhwbHVnaW5zKS5maW5kKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICByZXR1cm4gaWQuc3RhcnRzV2l0aChwLm5hbWUpOwogICAgICAgIH0pOwogICAgICAgIHZhciByZW1vdmVkID0gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgaWYgKG9sZFBsdWdpbikgewogICAgICAgICAgLy8gVW5pbnN0YWxsIGV4aXN0aW5nIHBsdWdpbiBpZiB0aGVyZSBpcyBvbmUuIFRoaXMgZW5zdXJlcyB0aGF0IGxhc3QgbG9hZGVkIHBsdWdpbiBpcyBub3QgYWx3YXlzIHVzZWQKICAgICAgICAgIC8vIChuYXYgaGFydjEtLT5oYXJ2Mi0tPmhhcnYxIGFuZCBoYXJ2MiB3b3VsZCBiZSBzaG93bikKICAgICAgICAgIHJlbW92ZWQgPSBfdGhpcy5yZW1vdmVQbHVnaW4ob2xkUGx1Z2luLm5hbWUpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICBkZWxldGUgd2luZG93W29sZFBsdWdpbi5pZF07CiAgICAgICAgICAgIGRlbGV0ZSBwbHVnaW5zW29sZFBsdWdpbi5pZF07CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmVtb3ZlZC50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGVsZW1lbnQub25sb2FkID0gZnVuY3Rpb24gKCkgewogICAgICAgICAgICBlbGVtZW50LnBhcmVudEVsZW1lbnQucmVtb3ZlQ2hpbGQoZWxlbWVudCk7CiAgICAgICAgICAgIGlmICghd2luZG93W2lkXSkgewogICAgICAgICAgICAgIHJldHVybiByZWplY3QobmV3IEVycm9yKCdDb3VsZCBub3QgbG9hZCBwbHVnaW4gY29kZScpKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSB0aW1lc3RhbXAgdGhhdCBuZXcgcGx1Z2lucyB3ZXJlIGxvYWRlZCAtIG1heSBiZSBuZWVkZWQKICAgICAgICAgICAgLy8gdG8gdXBkYXRlIGNhY2hlcyB3aGVuIG5ldyBwbHVnaW5zIGFyZSBsb2FkZWQKICAgICAgICAgICAgX2xhc3RMb2FkZWQgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKCiAgICAgICAgICAgIC8vIG5hbWUgaXMgdGhlIG5hbWUgb2YgdGhlIHBsdWdpbiwgaW5jbHVkaW5nIHRoZSB2ZXJzaW9uIG51bWJlcgogICAgICAgICAgICB2YXIgcGx1Z2luID0gbmV3IFBsdWdpbihpZCk7CiAgICAgICAgICAgIHBsdWdpbnNbaWRdID0gcGx1Z2luOwoKICAgICAgICAgICAgLy8gSW5pdGlhbGl6ZSB0aGUgcGx1Z2luCiAgICAgICAgICAgIHdpbmRvd1tpZF0uZGVmYXVsdChwbHVnaW4sIF90aGlzLmludGVybmFsKCkpOwoKICAgICAgICAgICAgLy8gVW5pbnN0YWxsIGV4aXN0aW5nIHBsdWdpbiBpZiB0aGVyZSBpcyBvbmUKICAgICAgICAgICAgX3RoaXMucmVtb3ZlUGx1Z2luKHBsdWdpbi5uYW1lKTsgLy8gUmVtb3ZpbmcgdGhpcyBjYXVzZXMgdGhlIHBsdWdpbiB0byBub3QgbG9hZCBvbiByZWZyZXNoCgogICAgICAgICAgICAvLyBMb2FkIGFsbCBvZiB0aGUgdHlwZXMgZXRjIGZyb20gdGhlIHBsdWdpbgogICAgICAgICAgICBfdGhpcy5hcHBseVBsdWdpbihwbHVnaW4pOwoKICAgICAgICAgICAgLy8gQWRkIHRoZSBwbHVnaW4gdG8gdGhlIHN0b3JlCiAgICAgICAgICAgIHN0b3JlLmRpc3BhdGNoKCd1aXBsdWdpbnMvYWRkUGx1Z2luJywgcGx1Z2luKTsKICAgICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgICAgfTsKICAgICAgICAgIGVsZW1lbnQub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgIGVsZW1lbnQucGFyZW50RWxlbWVudC5yZW1vdmVDaGlsZChlbGVtZW50KTsKICAgICAgICAgICAgLy8gTWFzc2FnZSB0aGUgZXJyb3IgaW50byBzb21ldGhpbmcgdXNlZnVsCiAgICAgICAgICAgIHZhciBlcnJvck1lc3NhZ2UgPSAiRmFpbGVkIHRvIGxvYWQgc2NyaXB0IGZyb20gJyIuY29uY2F0KGUudGFyZ2V0LnNyYywgIiciKTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnJvck1lc3NhZ2UsIGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpKTsgLy8gVGhpcyBpcyBtb3JlIHVzZWZ1bCB3aGVyZSBpdCdzIHVzZWQKICAgICAgICAgIH07CiAgICAgICAgICBkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKGVsZW1lbnQpOwogICAgICAgIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICB2YXIgZXJyb3JNZXNzYWdlID0gIkZhaWxlZCB0byB1bmxvYWQgb2xkIHBsdWdpbiIuY29uY2F0KG9sZFBsdWdpbiA9PT0gbnVsbCB8fCBvbGRQbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9sZFBsdWdpbi5pZCk7CiAgICAgICAgICBjb25zb2xlLmVycm9yKGVycm9yTWVzc2FnZSwgZSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgcmVqZWN0KG5ldyBFcnJvcihlcnJvck1lc3NhZ2UpKTsgLy8gVGhpcyBpcyBtb3JlIHVzZWZ1bCB3aGVyZSBpdCdzIHVzZWQKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gVXNlZCBieSB0aGUgZHluYW1pYyBsb2FkZXIgd2hlbiBhIHBsdWdpbiBpcyBpbmNsdWRlZCBpbiB0aGUgYnVpbGQKICAgIGluaXRQbHVnaW46IGZ1bmN0aW9uIGluaXRQbHVnaW4oaWQsIG1vZHVsZSkgewogICAgICB2YXIgcGx1Z2luID0gbmV3IFBsdWdpbihpZCk7CgogICAgICAvLyBNYXJrIHRoZSBwbHVnaW4gYXMgYmVpbmcgYnVpbHQtaW4KICAgICAgcGx1Z2luLmJ1aWx0aW4gPSB0cnVlOwogICAgICBwbHVnaW5zW2lkXSA9IHBsdWdpbjsKCiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHBsdWdpbgogICAgICB2YXIgcCA9IG1vZHVsZTsKICAgICAgdHJ5IHsKICAgICAgICBwLmRlZmF1bHQocGx1Z2luLCB0aGlzLmludGVybmFsKCkpOwoKICAgICAgICAvLyBVbmluc3RhbGwgZXhpc3RpbmcgcHJvZHVjdCBpZiB0aGVyZSBpcyBvbmUKICAgICAgICB0aGlzLnJlbW92ZVBsdWdpbihwbHVnaW4ubmFtZSk7CgogICAgICAgIC8vIExvYWQgYWxsIG9mIHRoZSB0eXBlcyBldGMgZnJvbSB0aGUgcGx1Z2luCiAgICAgICAgdGhpcy5hcHBseVBsdWdpbihwbHVnaW4pOwoKICAgICAgICAvLyBBZGQgdGhlIHBsdWdpbiB0byB0aGUgc3RvcmUKICAgICAgICBzdG9yZS5kaXNwYXRjaCgndWlwbHVnaW5zL2FkZFBsdWdpbicsIHBsdWdpbik7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICBjb25zb2xlLmVycm9yKCJFcnJvciBsb2FkaW5nIHBsdWdpbiAiLmNvbmNhdChwbHVnaW4ubmFtZSkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICBjb25zb2xlLmVycm9yKGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgfQogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgYWxsLCBpLCBwbHVnaW47CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYWxsID0gT2JqZWN0LnZhbHVlcyhwbHVnaW5zKTsKICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIGlmICghKGkgPCBhbGwubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHBsdWdpbiA9IGFsbFtpXTsKICAgICAgICAgICAgICBpZiAoIXBsdWdpbi5idWlsdGluKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJjb250aW51ZSIsIDE1KTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIucmVtb3ZlUGx1Z2luKHBsdWdpbi5uYW1lKTsKICAgICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTE7CiAgICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSg2KTsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZW1vdmluZyBwbHVnaW4nLCBfY29udGV4dC50MCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGRlbGV0ZSBwbHVnaW5zW3BsdWdpbi5pZF07CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgaSsrOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDE4OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s2LCAxMV1dKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgLy8gUmVtb3ZlIHRoZSBwbHVnaW4KICAgIHJlbW92ZVBsdWdpbjogZnVuY3Rpb24gcmVtb3ZlUGx1Z2luKG5hbWUpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBwbHVnaW4sIHByb21pc2VzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBwbHVnaW4gPSBPYmplY3QudmFsdWVzKHBsdWdpbnMpLmZpbmQoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICAgIHJldHVybiBwLm5hbWUgPT09IG5hbWU7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaWYgKHBsdWdpbikgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHByb21pc2VzID0gW107CiAgICAgICAgICAgICAgcGx1Z2luLnByb2R1Y3ROYW1lcy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9kdWN0KSB7CiAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKHN0b3JlLmRpc3BhdGNoKCd0eXBlLW1hcC9yZW1vdmVQcm9kdWN0JywgewogICAgICAgICAgICAgICAgICBwcm9kdWN0OiBwcm9kdWN0LAogICAgICAgICAgICAgICAgICBwbHVnaW46IHBsdWdpbgogICAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAvLyBSZW1vdmUgYWxsIG9mIHRoZSB0eXBlcwogICAgICAgICAgICAgIE9iamVjdC5rZXlzKHBsdWdpbi50eXBlcykuZm9yRWFjaChmdW5jdGlvbiAodHlwKSB7CiAgICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwbHVnaW4udHlwZXNbdHlwXSkuZm9yRWFjaChmdW5jdGlvbiAobmFtZSkgewogICAgICAgICAgICAgICAgICBfdGhpczMudW5yZWdpc3Rlcih0eXAsIG5hbWUpOwogICAgICAgICAgICAgICAgICBpZiAodHlwID09PSBNT0RFTF9UWVBFKSB7CiAgICAgICAgICAgICAgICAgICAgY2xlYXJNb2RlbENhY2hlKG5hbWUpOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgLy8gUmVtb3ZlIGxvY2FsZXMKICAgICAgICAgICAgICBwbHVnaW4ubG9jYWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChsb2NhbGVPYmopIHsKICAgICAgICAgICAgICAgIHByb21pc2VzLnB1c2goc3RvcmUuZGlzcGF0Y2goJ2kxOG4vcmVtb3ZlTG9jYWxlJywgbG9jYWxlT2JqKSk7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgaWYgKHBsdWdpbi50eXBlcy5tb2RlbHMpIHsKICAgICAgICAgICAgICAgIC8vIEFzayB0aGUgU3RldmUgc3RvcmVzIHRvIGZvcmdldCBhbnkgZGF0YSBpdCBoYXMgZm9yIG1vZGVscyB0aGF0IHdlIGFyZSByZW1vdmluZwogICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaC5hcHBseShwcm9taXNlcywgX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzMy5yZW1vdmVUeXBlRnJvbVN0b3JlKHN0b3JlLCAncmFuY2hlcicsIE9iamVjdC5rZXlzKHBsdWdpbi50eXBlcy5tb2RlbHMpKSkpOwogICAgICAgICAgICAgICAgcHJvbWlzZXMucHVzaC5hcHBseShwcm9taXNlcywgX3RvQ29uc3VtYWJsZUFycmF5KF90aGlzMy5yZW1vdmVUeXBlRnJvbVN0b3JlKHN0b3JlLCAnbWFuYWdlbWVudCcsIE9iamVjdC5rZXlzKHBsdWdpbi50eXBlcy5tb2RlbHMpKSkpOwogICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgLy8gVW5pbnN0YWxsIHJvdXRlcwogICAgICAgICAgICAgIHBsdWdpblJvdXRlcy51bmluc3RhbGwocGx1Z2luKTsKCiAgICAgICAgICAgICAgLy8gQ2FsbCBwbHVnaW4gdW5pbnN0YWxsIGhvb2tzCiAgICAgICAgICAgICAgcGx1Z2luLnVuaW5zdGFsbEhvb2tzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZm4ocGx1Z2luLCBfdGhpczMuaW50ZXJuYWwoKSk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgcGx1Z2luIGl0c2VsZgogICAgICAgICAgICAgIHByb21pc2VzLnB1c2goc3RvcmUuZGlzcGF0Y2goJ3VpcGx1Z2lucy9yZW1vdmVQbHVnaW4nLCBuYW1lKSk7CgogICAgICAgICAgICAgIC8vIFVucmVnaXN0ZXIgdnVleCBzdG9yZXMKICAgICAgICAgICAgICBwbHVnaW4uc3RvcmVzLmZvckVhY2goZnVuY3Rpb24gKHBTdG9yZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBTdG9yZS51bnJlZ2lzdGVyKHN0b3JlKTsKICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHZhbGlkYXRvcnMKICAgICAgICAgICAgICBPYmplY3Qua2V5cyhwbHVnaW4udmFsaWRhdG9ycykuZm9yRWFjaChmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICBkZWxldGUgdmFsaWRhdG9yc1trZXldOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VzKTsKICAgICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgICAvLyBVcGRhdGUgbGFzdCBsb2FkIHNpbmNlIHdlIHJlbW92ZWQgYSBwbHVnaW4KICAgICAgICAgICAgICBfbGFzdExvYWRlZCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgcmVtb3ZlVHlwZUZyb21TdG9yZTogZnVuY3Rpb24gcmVtb3ZlVHlwZUZyb21TdG9yZShzdG9yZSwgc3RvcmVOYW1lLCB0eXBlcykgewogICAgICByZXR1cm4gKHR5cGVzIHx8IFtdKS5tYXAoZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICByZXR1cm4gc3RvcmUuY29tbWl0KCIiLmNvbmNhdChzdG9yZU5hbWUsICIvZm9yZ2V0VHlwZSIpLCB0eXBlKTsKICAgICAgfSk7CiAgICB9LAogICAgLy8gQXBwbHkgdGhlIHBsdWdpbiBiYXNlZCBvbiBpdHMgbWV0YWRhdGEKICAgIGFwcGx5UGx1Z2luOiBmdW5jdGlvbiBhcHBseVBsdWdpbihwbHVnaW4pIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICAgIC8vIFR5cGVzCiAgICAgIE9iamVjdC5rZXlzKHBsdWdpbi50eXBlcykuZm9yRWFjaChmdW5jdGlvbiAodHlwKSB7CiAgICAgICAgT2JqZWN0LmtleXMocGx1Z2luLnR5cGVzW3R5cF0pLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICAgIF90aGlzNC5yZWdpc3Rlcih0eXAsIG5hbWUsIHBsdWdpbi50eXBlc1t0eXBdW25hbWVdKTsKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICAvLyBVSSBDb25maWd1cmF0aW9uIC0gY29weSBVSSBjb25maWcgZnJvbSBhIHBsdWdpbiBpbnRvIHRoZSBnbG9iYWwgdWlDb25maWcgb2JqZWN0CiAgICAgIE9iamVjdC5rZXlzKHBsdWdpbi51aUNvbmZpZykuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uVHlwZSkgewogICAgICAgIE9iamVjdC5rZXlzKHBsdWdpbi51aUNvbmZpZ1thY3Rpb25UeXBlXSkuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uTG9jYXRpb24pIHsKICAgICAgICAgIHBsdWdpbi51aUNvbmZpZ1thY3Rpb25UeXBlXVthY3Rpb25Mb2NhdGlvbl0uZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgICAgIGlmICghdWlDb25maWdbYWN0aW9uVHlwZV1bYWN0aW9uTG9jYXRpb25dKSB7CiAgICAgICAgICAgICAgdWlDb25maWdbYWN0aW9uVHlwZV1bYWN0aW9uTG9jYXRpb25dID0gW107CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdWlDb25maWdbYWN0aW9uVHlwZV1bYWN0aW9uTG9jYXRpb25dLnB1c2goYWN0aW9uKTsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIC8vIGwxMG4KICAgICAgT2JqZWN0LmtleXMocGx1Z2luLmwxMG4pLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHsKICAgICAgICBwbHVnaW4ubDEwbltuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uIChmbikgewogICAgICAgICAgX3RoaXM0LnJlZ2lzdGVyKCdsMTBuJywgbmFtZSwgZm4pOwogICAgICAgIH0pOwogICAgICB9KTsKCiAgICAgIC8vIEluaXRpYWxpemUgdGhlIHByb2R1Y3QgaWYgdGhlIHN0b3JlIGlzIHJlYWR5CiAgICAgIGlmIChwcm9kdWN0c0xvYWRlZCgpKSB7CiAgICAgICAgdGhpcy5sb2FkUHJvZHVjdHMoW3BsdWdpbl0pOwogICAgICB9CgogICAgICAvLyBSZWdpc3RlciB2dWV4IHN0b3JlcwogICAgICBwbHVnaW4uc3RvcmVzLmZvckVhY2goZnVuY3Rpb24gKHBTdG9yZSkgewogICAgICAgIHJldHVybiBwU3RvcmUucmVnaXN0ZXIoKShzdG9yZSk7CiAgICAgIH0pOwoKICAgICAgLy8gTG9jYWxlcwogICAgICBwbHVnaW4ubG9jYWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChsb2NhbGVPYmopIHsKICAgICAgICBzdG9yZS5kaXNwYXRjaCgnaTE4bi9hZGRMb2NhbGUnLCBsb2NhbGVPYmopOwogICAgICB9KTsKCiAgICAgIC8vIFJvdXRlcwogICAgICBwbHVnaW5Sb3V0ZXMuYWRkUm91dGVzKHBsdWdpbiwgcGx1Z2luLnJvdXRlcyk7CgogICAgICAvLyBWYWxpZGF0b3JzCiAgICAgIE9iamVjdC5rZXlzKHBsdWdpbi52YWxpZGF0b3JzKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICB2YWxpZGF0b3JzW2tleV0gPSBwbHVnaW4udmFsaWRhdG9yc1trZXldOwogICAgICB9KTsKICAgIH0sCiAgICAvKioKICAgICAqIFJlZ2lzdGVyICdzb21ldGhpbmcnIHRoYXQgY2FuIGJlIGR5bmFtaWNhbGx5IGxvYWRlZCAtIGUuZy4gbW9kZWwsIGVkaXQsIGNyZWF0ZSwgbGlzdCwgaTE4bgogICAgICogQHBhcmFtIHtTdHJpbmd9IHR5cGUgdHlwZSBvZiB0aGluZyB0byByZWdpc3RlciwgZS5nLiAnZWRpdCcKICAgICAqIEBwYXJhbSB7U3RyaW5nfSBuYW1lIHVuaXF1ZSBuYW1lIG9mICdzb21ldGhpbmcnCiAgICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSBmbiBmdW5jdGlvbiB0aGF0IGR5bmFtaWNhbGx5IGxvYWRzIHRoZSBtb2R1bGUgZm9yIHRoZSB0aGluZyBiZWluZyByZWdpc3RlcmVkCiAgICAgKi8KICAgIHJlZ2lzdGVyOiBmdW5jdGlvbiByZWdpc3Rlcih0eXBlLCBuYW1lLCBmbikgewogICAgICBpZiAoIWR5bmFtaWNbdHlwZV0pIHsKICAgICAgICBkeW5hbWljW3R5cGVdID0ge307CiAgICAgIH0KCiAgICAgIC8vIEFjY3VtdWxhdGUgbDEwbiByZXNvdXJjZXMgcmF0aGVyIHRoYW4gcmVwbGFjZQogICAgICBpZiAodHlwZSA9PT0gJ2wxMG4nKSB7CiAgICAgICAgaWYgKCFkeW5hbWljW3R5cGVdW25hbWVdKSB7CiAgICAgICAgICBkeW5hbWljW3R5cGVdW25hbWVdID0gW107CiAgICAgICAgfQogICAgICAgIGR5bmFtaWNbdHlwZV1bbmFtZV0ucHVzaChmbik7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZHluYW1pY1t0eXBlXVtuYW1lXSA9IGZuOwogICAgICB9CiAgICB9LAogICAgdW5yZWdpc3RlcjogZnVuY3Rpb24gdW5yZWdpc3Rlcih0eXBlLCBuYW1lLCBmbikgewogICAgICB2YXIgX2R5bmFtaWMkdHlwZTI7CiAgICAgIGlmICh0eXBlID09PSAnbDEwbicpIHsKICAgICAgICB2YXIgX2R5bmFtaWMkdHlwZTsKICAgICAgICBpZiAoKF9keW5hbWljJHR5cGUgPSBkeW5hbWljW3R5cGVdKSAhPT0gbnVsbCAmJiBfZHluYW1pYyR0eXBlICE9PSB2b2lkIDAgJiYgX2R5bmFtaWMkdHlwZVtuYW1lXSkgewogICAgICAgICAgdmFyIGluZGV4ID0gZHluYW1pY1t0eXBlXVtuYW1lXS5maW5kKGZ1bmN0aW9uIChmdW5jKSB7CiAgICAgICAgICAgIHJldHVybiBmdW5jID09PSBmbjsKICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICAgICAgICBkeW5hbWljW3R5cGVdW25hbWVdLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKChfZHluYW1pYyR0eXBlMiA9IGR5bmFtaWNbdHlwZV0pICE9PSBudWxsICYmIF9keW5hbWljJHR5cGUyICE9PSB2b2lkIDAgJiYgX2R5bmFtaWMkdHlwZTJbbmFtZV0pIHsKICAgICAgICBkZWxldGUgZHluYW1pY1t0eXBlXVtuYW1lXTsKICAgICAgfQogICAgfSwKICAgIC8vIEZvciBkZWJ1Z2dpbmcKICAgIGdldEFsbDogZnVuY3Rpb24gZ2V0QWxsKCkgewogICAgICByZXR1cm4gZHluYW1pYzsKICAgIH0sCiAgICBnZXRQbHVnaW5zOiBmdW5jdGlvbiBnZXRQbHVnaW5zKCkgewogICAgICByZXR1cm4gcGx1Z2luczsKICAgIH0sCiAgICBnZXREeW5hbWljOiBmdW5jdGlvbiBnZXREeW5hbWljKHR5cGVOYW1lLCBuYW1lKSB7CiAgICAgIHZhciBfZHluYW1pYyR0eXBlTmFtZTsKICAgICAgcmV0dXJuIChfZHluYW1pYyR0eXBlTmFtZSA9IGR5bmFtaWNbdHlwZU5hbWVdKSA9PT0gbnVsbCB8fCBfZHluYW1pYyR0eXBlTmFtZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2R5bmFtaWMkdHlwZU5hbWVbbmFtZV07CiAgICB9LAogICAgZ2V0VmFsaWRhdG9yOiBmdW5jdGlvbiBnZXRWYWxpZGF0b3IobmFtZSkgewogICAgICByZXR1cm4gdmFsaWRhdG9yc1tuYW1lXTsKICAgIH0sCiAgICAvKioKICAgICAqIFJldHVybiB0aGUgVUkgY29uZmlndXJhdGlvbiBmb3IgdGhlIGdpdmVuIHR5cGUgYW5kIGxvY2F0aW9uCiAgICAgKi8KICAgIGdldFVJQ29uZmlnOiBmdW5jdGlvbiBnZXRVSUNvbmZpZyh0eXBlLCB1aUFyZWEpIHsKICAgICAgcmV0dXJuIHVpQ29uZmlnW3R5cGVdW3VpQXJlYV0gfHwgW107CiAgICB9LAogICAgLyoqCiAgICAgKiBSZXR1cm5zIGFsbCBVSSBDb25maWd1cmF0aW9uICh1c2VmdWwgZm9yIGRlYnVnZ2luZykKICAgICAqLwogICAgZ2V0QWxsVUlDb25maWc6IGZ1bmN0aW9uIGdldEFsbFVJQ29uZmlnKCkgewogICAgICByZXR1cm4gdWlDb25maWc7CiAgICB9LAogICAgLy8gVGltZXN0YW1wIHRoYXQgYSBVSSBwYWNrYWdlIHdhcyBsYXN0IGxvYWRlZAogICAgLy8gVHlwaWNhbGx5IHVzZWQgdG8gaW52YWxpZGF0ZSBjYWNoZXMgKGUuZy4gaTE4bikgd2hlbiBuZXcgcGx1Z2lucyBhcmUgbG9hZGVkCiAgICBnZXQgbGFzdExvYWQoKSB7CiAgICAgIHJldHVybiBfbGFzdExvYWRlZDsKICAgIH0sCiAgICBsaXN0RHluYW1pYzogZnVuY3Rpb24gbGlzdER5bmFtaWModHlwZU5hbWUpIHsKICAgICAgaWYgKCFkeW5hbWljW3R5cGVOYW1lXSkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgICByZXR1cm4gT2JqZWN0LmtleXMoZHluYW1pY1t0eXBlTmFtZV0pOwogICAgfSwKICAgIC8vIEdldCB0aGUgcHJvZHVjdHMgcHJvdmlkZWQgYnkgcGx1Z2lucwogICAgZ2V0IHByb2R1Y3RzKCkgewogICAgICByZXR1cm4gZHluYW1pYy5wcm9kdWN0cyB8fCBbXTsKICAgIH0sCiAgICAvLyBMb2FkIGFsbCBvZiB0aGUgcHJvZHVjdHMgcHJvdmlkZWQgYnkgcGx1Z2lucwogICAgbG9hZFByb2R1Y3RzOiBmdW5jdGlvbiBsb2FkUHJvZHVjdHMobG9hZFBsdWdpbnMpIHsKICAgICAgaWYgKCFsb2FkUGx1Z2lucykgewogICAgICAgIGxvYWRQbHVnaW5zID0gT2JqZWN0LnZhbHVlcyhwbHVnaW5zKTsKICAgICAgfQogICAgICBsb2FkUGx1Z2lucy5mb3JFYWNoKGZ1bmN0aW9uIChwbHVnaW4pIHsKICAgICAgICBpZiAocGx1Z2luLnByb2R1Y3RzKSB7CiAgICAgICAgICBwbHVnaW4ucHJvZHVjdHMuZm9yRWFjaCggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICAgICAgdmFyIF9yZWYyID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMyhwKSB7CiAgICAgICAgICAgICAgdmFyIGltcGw7CiAgICAgICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gcDsKICAgICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICAgIGltcGwgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICAgICAgICBpZiAoaW1wbC5pbml0KSB7CiAgICAgICAgICAgICAgICAgICAgICBpbXBsLmluaXQocGx1Z2luLCBzdG9yZSk7CiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICAgICAgfTsKICAgICAgICAgIH0oKSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9KTsKfQ=="},{"version":3,"names":["productsLoaded","clearModelCache","Plugin","PluginRoutes","UI_PLUGIN_BASE_URL","ExtensionPoint","MODEL_TYPE","_ref","inject","app","store","$axios","redirect","dynamic","validators","_lastLoaded","plugins","pluginRoutes","router","uiConfig","ep","internal","loadPluginAsync","plugin","_plugin$metadata","name","version","id","concat","url","metadata","direct","endpoint","_plugin$metadata2","main","loadAsync","mainFile","_this","Promise","resolve","reject","moduleUrl","element","document","createElement","src","type","async","oldPlugin","Object","values","find","p","startsWith","removed","removePlugin","then","window","onload","parentElement","removeChild","Error","Date","getTime","default","applyPlugin","dispatch","onerror","e","errorMessage","target","console","error","head","appendChild","catch","initPlugin","module","builtin","logout","_this2","_asyncToGenerator","regeneratorRuntime","mark","_callee","all","i","wrap","_callee$","_context","prev","next","length","abrupt","t0","stop","_this3","_callee2","promises","_callee2$","_context2","productNames","forEach","product","push","keys","types","typ","unregister","locales","localeObj","models","apply","_toConsumableArray","removeTypeFromStore","uninstall","uninstallHooks","fn","stores","pStore","key","storeName","map","commit","_this4","register","actionType","actionLocation","action","l10n","loadProducts","addRoutes","routes","_dynamic$type2","_dynamic$type","index","func","splice","getAll","getPlugins","getDynamic","typeName","_dynamic$typeName","getValidator","getUIConfig","uiArea","getAllUIConfig","lastLoad","listDynamic","products","loadPlugins","_ref2","_callee3","impl","_callee3$","_context3","sent","init","_x","arguments"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/core/plugins.js"],"sourcesContent":["import { productsLoaded } from '@shell/store/type-map';\nimport { clearModelCache } from '@shell/plugins/dashboard-store/model-loader';\nimport { Plugin } from './plugin';\nimport { PluginRoutes } from './plugin-routes';\nimport { UI_PLUGIN_BASE_URL } from '@shell/config/uiplugins';\nimport { ExtensionPoint } from './types';\n\nconst MODEL_TYPE = 'models';\n\nexport default function({\n  app,\n  store,\n  $axios,\n  redirect\n}, inject) {\n  const dynamic = {};\n  const validators = {};\n  let _lastLoaded = 0;\n\n  // Track which plugin loaded what, so we can unload stuff\n  const plugins = {};\n\n  const pluginRoutes = new PluginRoutes(app.router);\n\n  const uiConfig = {};\n\n  for (const ep in ExtensionPoint) {\n    uiConfig[ExtensionPoint[ep]] = {};\n  }\n\n  inject('plugin', {\n    // Plugins should not use these - but we will pass them in for now as a 2nd argument\n    // in case there are use cases not covered that require direct access - we may remove access later\n    internal() {\n      const internal = {\n        app,\n        store,\n        $axios,\n        redirect,\n        plugins: this\n      };\n\n      return internal;\n    },\n\n    // Load a plugin from a UI package\n    loadPluginAsync(plugin) {\n      const { name, version } = plugin;\n      const id = `${ name }-${ version }`;\n      let url;\n\n      if (plugin?.metadata?.direct === 'true') {\n        url = plugin.endpoint;\n      } else {\n        // See if the plugin has a main metadata property set\n        const main = plugin?.metadata?.main || `${ id }.umd.min.js`;\n\n        url = `${ UI_PLUGIN_BASE_URL }/${ name }/${ version }/plugin/${ main }`;\n      }\n\n      return this.loadAsync(id, url);\n    },\n\n    // Load a plugin from a UI package\n    loadAsync(id, mainFile) {\n      return new Promise((resolve, reject) => {\n        const moduleUrl = mainFile;\n        const element = document.createElement('script');\n\n        element.src = moduleUrl;\n        element.type = 'text/javascript';\n        element.async = true;\n\n        // id is `<product>-<version>`.\n        const oldPlugin = Object.values(plugins).find((p) => id.startsWith(p.name));\n\n        let removed = Promise.resolve();\n\n        if (oldPlugin) {\n          // Uninstall existing plugin if there is one. This ensures that last loaded plugin is not always used\n          // (nav harv1-->harv2-->harv1 and harv2 would be shown)\n          removed = this.removePlugin(oldPlugin.name).then(() => {\n            delete window[oldPlugin.id];\n\n            delete plugins[oldPlugin.id];\n          });\n        }\n\n        removed.then(() => {\n          element.onload = () => {\n            element.parentElement.removeChild(element);\n\n            if (!window[id]) {\n              return reject(new Error('Could not load plugin code'));\n            }\n\n            // Update the timestamp that new plugins were loaded - may be needed\n            // to update caches when new plugins are loaded\n            _lastLoaded = new Date().getTime();\n\n            // name is the name of the plugin, including the version number\n            const plugin = new Plugin(id);\n\n            plugins[id] = plugin;\n\n            // Initialize the plugin\n            window[id].default(plugin, this.internal());\n\n            // Uninstall existing plugin if there is one\n            this.removePlugin(plugin.name); // Removing this causes the plugin to not load on refresh\n\n            // Load all of the types etc from the plugin\n            this.applyPlugin(plugin);\n\n            // Add the plugin to the store\n            store.dispatch('uiplugins/addPlugin', plugin);\n\n            resolve();\n          };\n\n          element.onerror = (e) => {\n            element.parentElement.removeChild(element);\n            // Massage the error into something useful\n            const errorMessage = `Failed to load script from '${ e.target.src }'`;\n\n            console.error(errorMessage, e); // eslint-disable-line no-console\n            reject(new Error(errorMessage)); // This is more useful where it's used\n          };\n\n          document.head.appendChild(element);\n        }).catch((e) => {\n          const errorMessage = `Failed to unload old plugin${ oldPlugin?.id }`;\n\n          console.error(errorMessage, e); // eslint-disable-line no-console\n          reject(new Error(errorMessage)); // This is more useful where it's used\n        });\n      });\n    },\n\n    // Used by the dynamic loader when a plugin is included in the build\n    initPlugin(id, module) {\n      const plugin = new Plugin(id);\n\n      // Mark the plugin as being built-in\n      plugin.builtin = true;\n\n      plugins[id] = plugin;\n\n      // Initialize the plugin\n      const p = module;\n\n      try {\n        p.default(plugin, this.internal());\n\n        // Uninstall existing product if there is one\n        this.removePlugin(plugin.name);\n\n        // Load all of the types etc from the plugin\n        this.applyPlugin(plugin);\n\n        // Add the plugin to the store\n        store.dispatch('uiplugins/addPlugin', plugin);\n      } catch (e) {\n        console.error(`Error loading plugin ${ plugin.name }`); // eslint-disable-line no-console\n        console.error(e); // eslint-disable-line no-console\n      }\n    },\n\n    async logout() {\n      const all = Object.values(plugins);\n\n      for (let i = 0; i < all.length; i++) {\n        const plugin = all[i];\n\n        if (plugin.builtin) {\n          continue;\n        }\n\n        try {\n          await this.removePlugin(plugin.name);\n        } catch (e) {\n          console.error('Error removing plugin', e); // eslint-disable-line no-console\n        }\n\n        delete plugins[plugin.id];\n      }\n    },\n\n    // Remove the plugin\n    async removePlugin(name) {\n      const plugin = Object.values(plugins).find((p) => p.name === name);\n\n      if (!plugin) {\n        return;\n      }\n\n      const promises = [];\n\n      plugin.productNames.forEach((product) => {\n        promises.push(store.dispatch('type-map/removeProduct', { product, plugin }));\n      });\n\n      // Remove all of the types\n      Object.keys(plugin.types).forEach((typ) => {\n        Object.keys(plugin.types[typ]).forEach((name) => {\n          this.unregister(typ, name);\n\n          if (typ === MODEL_TYPE) {\n            clearModelCache(name);\n          }\n        });\n      });\n\n      // Remove locales\n      plugin.locales.forEach((localeObj) => {\n        promises.push(store.dispatch('i18n/removeLocale', localeObj));\n      });\n\n      if (plugin.types.models) {\n        // Ask the Steve stores to forget any data it has for models that we are removing\n        promises.push(...this.removeTypeFromStore(store, 'rancher', Object.keys(plugin.types.models)));\n        promises.push(...this.removeTypeFromStore(store, 'management', Object.keys(plugin.types.models)));\n      }\n\n      // Uninstall routes\n      pluginRoutes.uninstall(plugin);\n\n      // Call plugin uninstall hooks\n      plugin.uninstallHooks.forEach((fn) => fn(plugin, this.internal()));\n\n      // Remove the plugin itself\n      promises.push( store.dispatch('uiplugins/removePlugin', name));\n\n      // Unregister vuex stores\n      plugin.stores.forEach((pStore) => pStore.unregister(store));\n\n      // Remove validators\n      Object.keys(plugin.validators).forEach((key) => {\n        delete validators[key];\n      });\n\n      await Promise.all(promises);\n\n      // Update last load since we removed a plugin\n      _lastLoaded = new Date().getTime();\n    },\n\n    removeTypeFromStore(store, storeName, types) {\n      return (types || []).map((type) => store.commit(`${ storeName }/forgetType`, type));\n    },\n\n    // Apply the plugin based on its metadata\n    applyPlugin(plugin) {\n      // Types\n      Object.keys(plugin.types).forEach((typ) => {\n        Object.keys(plugin.types[typ]).forEach((name) => {\n          this.register(typ, name, plugin.types[typ][name]);\n        });\n      });\n\n      // UI Configuration - copy UI config from a plugin into the global uiConfig object\n      Object.keys(plugin.uiConfig).forEach((actionType) => {\n        Object.keys(plugin.uiConfig[actionType]).forEach((actionLocation) => {\n          plugin.uiConfig[actionType][actionLocation].forEach((action) => {\n            if (!uiConfig[actionType][actionLocation]) {\n              uiConfig[actionType][actionLocation] = [];\n            }\n            uiConfig[actionType][actionLocation].push(action);\n          });\n        });\n      });\n\n      // l10n\n      Object.keys(plugin.l10n).forEach((name) => {\n        plugin.l10n[name].forEach((fn) => {\n          this.register('l10n', name, fn);\n        });\n      });\n\n      // Initialize the product if the store is ready\n      if (productsLoaded()) {\n        this.loadProducts([plugin]);\n      }\n\n      // Register vuex stores\n      plugin.stores.forEach((pStore) => pStore.register()(store));\n\n      // Locales\n      plugin.locales.forEach((localeObj) => {\n        store.dispatch('i18n/addLocale', localeObj);\n      });\n\n      // Routes\n      pluginRoutes.addRoutes(plugin, plugin.routes);\n\n      // Validators\n      Object.keys(plugin.validators).forEach((key) => {\n        validators[key] = plugin.validators[key];\n      });\n    },\n\n    /**\n     * Register 'something' that can be dynamically loaded - e.g. model, edit, create, list, i18n\n     * @param {String} type type of thing to register, e.g. 'edit'\n     * @param {String} name unique name of 'something'\n     * @param {Function} fn function that dynamically loads the module for the thing being registered\n     */\n    register(type, name, fn) {\n      if (!dynamic[type]) {\n        dynamic[type] = {};\n      }\n\n      // Accumulate l10n resources rather than replace\n      if (type === 'l10n') {\n        if (!dynamic[type][name]) {\n          dynamic[type][name] = [];\n        }\n\n        dynamic[type][name].push(fn);\n      } else {\n        dynamic[type][name] = fn;\n      }\n    },\n\n    unregister(type, name, fn) {\n      if (type === 'l10n') {\n        if (dynamic[type]?.[name]) {\n          const index = dynamic[type][name].find((func) => func === fn);\n\n          if (index !== -1) {\n            dynamic[type][name].splice(index, 1);\n          }\n        }\n      } else if (dynamic[type]?.[name]) {\n        delete dynamic[type][name];\n      }\n    },\n\n    // For debugging\n    getAll() {\n      return dynamic;\n    },\n\n    getPlugins() {\n      return plugins;\n    },\n\n    getDynamic(typeName, name) {\n      return dynamic[typeName]?.[name];\n    },\n\n    getValidator(name) {\n      return validators[name];\n    },\n\n    /**\n     * Return the UI configuration for the given type and location\n     */\n    getUIConfig(type, uiArea) {\n      return uiConfig[type][uiArea] || [];\n    },\n\n    /**\n     * Returns all UI Configuration (useful for debugging)\n     */\n    getAllUIConfig() {\n      return uiConfig;\n    },\n\n    // Timestamp that a UI package was last loaded\n    // Typically used to invalidate caches (e.g. i18n) when new plugins are loaded\n    get lastLoad() {\n      return _lastLoaded;\n    },\n\n    listDynamic(typeName) {\n      if (!dynamic[typeName]) {\n        return [];\n      }\n\n      return Object.keys(dynamic[typeName]);\n    },\n\n    // Get the products provided by plugins\n    get products() {\n      return dynamic.products || [];\n    },\n\n    // Load all of the products provided by plugins\n    loadProducts(loadPlugins) {\n      if (!loadPlugins) {\n        loadPlugins = Object.values(plugins);\n      }\n\n      loadPlugins.forEach((plugin) => {\n        if (plugin.products) {\n          plugin.products.forEach(async(p) => {\n            const impl = await p;\n\n            if (impl.init) {\n              impl.init(plugin, store);\n            }\n          });\n        }\n      });\n    },\n  });\n}\n"],"mappings":"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"}]}