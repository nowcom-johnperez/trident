{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/promise.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/promise.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudmFsdWVzLmpzIjsKaW1wb3J0IFF1ZXVlIGZyb20gJy4vcXVldWUnOwpmdW5jdGlvbiBfaGFzaChfeCwgX3gyKSB7CiAgcmV0dXJuIF9oYXNoMi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIF9oYXNoMigpIHsKICBfaGFzaDIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoaGFzaCwgZm5OYW1lKSB7CiAgICB2YXIga2V5cywgcHJvbWlzZXMsIHJlcywgb3V0LCBpOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAga2V5cyA9IE9iamVjdC5rZXlzKGhhc2gpOwogICAgICAgICAgcHJvbWlzZXMgPSBPYmplY3QudmFsdWVzKGhhc2gpOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICByZXR1cm4gUHJvbWlzZVtmbk5hbWVdKHByb21pc2VzKTsKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgb3V0ID0ge307CiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykgewogICAgICAgICAgICBvdXRba2V5c1tpXV0gPSByZXNbaV07CiAgICAgICAgICB9CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBvdXQpOwogICAgICAgIGNhc2UgODoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpOwogIHJldHVybiBfaGFzaDIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpleHBvcnQgZnVuY3Rpb24gYWxsSGFzaChoYXNoKSB7CiAgcmV0dXJuIF9oYXNoKGhhc2gsICdhbGwnKTsKfQpleHBvcnQgZnVuY3Rpb24gYWxsSGFzaFNldHRsZWQoaGFzaCkgewogIHJldHVybiBfaGFzaChoYXNoLCAnYWxsU2V0dGxlZCcpOwp9CmV4cG9ydCBmdW5jdGlvbiBlYWNoTGltaXQoaXRlbXMsIGxpbWl0LCBpdGVyYXRvcikgewogIHZhciBkZWJ1ZyA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgaWYgKGRlYnVnKSB7CiAgICBjb25zb2xlLmxvZygnZWFjaExpbWl0IG9mJywgaXRlbXMubGVuZ3RoLCAnIGl0ZW1zJywgbGltaXQsICdhdCBhIHRpbWUnKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgfQogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7CiAgICB2YXIgcXVldWUgPSBuZXcgUXVldWUoKTsKICAgIHZhciBwZW5kaW5nID0gMDsKICAgIHZhciBmYWlsZWQgPSBmYWxzZTsKICAgIHZhciBvdXQgPSBbXTsKICAgIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgICAgcXVldWUuZW5xdWV1ZSh7CiAgICAgICAgaXRlbTogaXRlbXNbaV0sCiAgICAgICAgaWR4OiBpCiAgICAgIH0pOwogICAgfQogICAgcHJvY2VzcygpOwogICAgZnVuY3Rpb24gcHJvY2VzcygpIHsKICAgICAgaWYgKGRlYnVnKSB7CiAgICAgICAgY29uc29sZS5sb2coInByb2Nlc3MsIHF1ZXVlPSIuY29uY2F0KHF1ZXVlLmdldExlbmd0aCgpLCAiLCBwZW5kaW5nPSIpLmNvbmNhdChwZW5kaW5nLCAiLCBmYWlsZWQ9IikuY29uY2F0KGZhaWxlZCkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgfQogICAgICBpZiAoZmFpbGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChxdWV1ZS5pc0VtcHR5KCkgJiYgcGVuZGluZyA9PT0gMCkgewogICAgICAgIHJldHVybiByZXNvbHZlKG91dCk7CiAgICAgIH0KICAgICAgdmFyIF9sb29wID0gZnVuY3Rpb24gX2xvb3AoKSB7CiAgICAgICAgdmFyIF9xdWV1ZSRkZXF1ZXVlID0gcXVldWUuZGVxdWV1ZSgpLAogICAgICAgICAgaXRlbSA9IF9xdWV1ZSRkZXF1ZXVlLml0ZW0sCiAgICAgICAgICBpZHggPSBfcXVldWUkZGVxdWV1ZS5pZHg7CiAgICAgICAgaWYgKGRlYnVnKSB7CiAgICAgICAgICBjb25zb2xlLmxvZygnUnVubmluZycsIGl0ZW0pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICB9CiAgICAgICAgcGVuZGluZysrOwogICAgICAgIGl0ZXJhdG9yKGl0ZW0sIGlkeCkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICBpZiAoZGVidWcpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0RvbmUnLCBpdGVtKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICB9CiAgICAgICAgICBvdXRbaWR4XSA9IHJlczsKICAgICAgICAgIHBlbmRpbmctLTsKICAgICAgICAgIHByb2Nlc3MoKTsKICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICBpZiAoZGVidWcpIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ0ZhaWxlZCcsIGVyciwgaXRlbSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgfQogICAgICAgICAgZmFpbGVkID0gdHJ1ZTsKICAgICAgICAgIHJlamVjdChlcnIpOwogICAgICAgIH0pOwogICAgICB9OwogICAgICB3aGlsZSAoIXF1ZXVlLmlzRW1wdHkoKSAmJiBwZW5kaW5nIDwgbGltaXQgJiYgIWZhaWxlZCkgewogICAgICAgIF9sb29wKCk7CiAgICAgIH0KICAgIH0KICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gZGVmZXJyZWQobmFtZSkgewogIHZhciBvdXQgPSB7fTsKICBvdXQucHJvbWlzZSA9IG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlLCByZWplY3QpIHsKICAgIG91dC5yZXNvbHZlID0gcmVzb2x2ZTsKICAgIG91dC5yZWplY3QgPSByZWplY3Q7CiAgfSwgbmFtZSk7CiAgcmV0dXJuIG91dDsKfQoKLyoqCiAqIEFwcGx5IHRoZSByZXN1bHQgb2YgYSBwcm9taXNlIHRvIGEgZ2l2ZW4gb2JqZWN0J3MgcHJvcGVydHkKICoKICogVGhpcyBpcyBhIG5vbi1ibG9ja2luZyBtZXRob2QKICoKICogQHBhcmFtIHByb21pc2UgUHJvbWlzZSB0byBmZXRjaCByZXN1bHQgZm9yCiAqIEBwYXJhbSBvYmogT2JqZWN0IHRvIHNldCByZXN1bHQgb2YgcHJvbWlzZSB0bwogKiBAcGFyYW0ga2V5IFByb3BlcnR5IGluIG9iamVjdCB0byBzZXQgcmVzdWx0IHRvCiAqIEBwYXJhbSBsYWJlbCBEZXNjcmlwdGlvbiBvZiB3aGF0IHByb21pc2UgaXMgdHJ5aW5nIHRvICBkbwogKi8KZXhwb3J0IGZ1bmN0aW9uIHNldFByb21pc2VSZXN1bHQocHJvbWlzZSwgb2JqLCBrZXksIGxhYmVsKSB7CiAgcHJvbWlzZS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgIG9ialtrZXldID0gcmVzOwogIH0pLmNhdGNoKGZ1bmN0aW9uIChlKSB7CiAgICBjb25zb2xlLndhcm4oJ0ZhaWxlZCB0bzogJywgbGFiZWwsIGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICB9KTsKfQ=="},{"version":3,"names":["Queue","_hash","_x","_x2","_hash2","apply","arguments","_asyncToGenerator","regeneratorRuntime","mark","_callee","hash","fnName","keys","promises","res","out","i","wrap","_callee$","_context","prev","next","Object","values","Promise","sent","length","abrupt","stop","allHash","allHashSettled","eachLimit","items","limit","iterator","debug","undefined","console","log","resolve","reject","queue","pending","failed","enqueue","item","idx","process","concat","getLength","isEmpty","_loop","_queue$dequeue","dequeue","then","catch","err","deferred","name","promise","setPromiseResult","obj","key","label","e","warn"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/promise.js"],"sourcesContent":["import Queue from './queue';\n\nasync function _hash(hash, fnName) {\n  const keys = Object.keys(hash);\n  const promises = Object.values(hash);\n\n  const res = await Promise[fnName](promises);\n  const out = {};\n\n  for ( let i = 0 ; i < keys.length ; i++ ) {\n    out[keys[i]] = res[i];\n  }\n\n  return out;\n}\n\nexport function allHash(hash) {\n  return _hash(hash, 'all');\n}\n\nexport function allHashSettled(hash) {\n  return _hash(hash, 'allSettled');\n}\n\nexport function eachLimit(items, limit, iterator, debug = false) {\n  if (debug) {\n    console.log('eachLimit of', items.length, ' items', limit, 'at a time'); // eslint-disable-line no-console\n  }\n\n  return new Promise((resolve, reject) => {\n    const queue = new Queue();\n    let pending = 0;\n    let failed = false;\n    const out = [];\n\n    for (let i = 0; i < items.length; i++) {\n      queue.enqueue({ item: items[i], idx: i });\n    }\n\n    process();\n\n    function process() {\n      if (debug) {\n        console.log(`process, queue=${ queue.getLength() }, pending=${ pending }, failed=${ failed }`); // eslint-disable-line no-console\n      }\n\n      if (failed) {\n        return;\n      }\n\n      if (queue.isEmpty() && pending === 0) {\n        return resolve(out);\n      }\n\n      while (!queue.isEmpty() && pending < limit && !failed) {\n        const { item, idx } = queue.dequeue();\n\n        if (debug) {\n          console.log('Running', item); // eslint-disable-line no-console\n        }\n\n        pending++;\n\n        iterator(item, idx).then((res) => {\n          if (debug) {\n            console.log('Done', item); // eslint-disable-line no-console\n          }\n\n          out[idx] = res;\n\n          pending--;\n          process();\n        }).catch((err) => {\n          if (debug) {\n            console.log('Failed', err, item); // eslint-disable-line no-console\n          }\n\n          failed = true;\n          reject(err);\n        });\n      }\n    }\n  });\n}\n\nexport function deferred(name) {\n  const out = {};\n\n  out.promise = new Promise((resolve, reject) => {\n    out.resolve = resolve;\n    out.reject = reject;\n  }, name);\n\n  return out;\n}\n\n/**\n * Apply the result of a promise to a given object's property\n *\n * This is a non-blocking method\n *\n * @param promise Promise to fetch result for\n * @param obj Object to set result of promise to\n * @param key Property in object to set result to\n * @param label Description of what promise is trying to  do\n */\nexport function setPromiseResult(promise, obj, key, label) {\n  promise\n    .then((res) => {\n      obj[key] = res;\n    })\n    .catch((e) => {\n      console.warn('Failed to: ', label, e); // eslint-disable-line no-console\n    });\n}\n"],"mappings":"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"}]}