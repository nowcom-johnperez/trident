{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/EnvVars.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/EnvVars.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0IFZhbHVlRnJvbVJlc291cmNlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vVmFsdWVGcm9tUmVzb3VyY2UnOwppbXBvcnQgZGVib3VuY2UgZnJvbSAnbG9kYXNoL2RlYm91bmNlJzsKaW1wb3J0IHsgcmFuZG9tU3RyIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7CmltcG9ydCB7IF9WSUVXIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgVmFsdWVGcm9tUmVzb3VyY2U6IFZhbHVlRnJvbVJlc291cmNlCiAgfSwKICBwcm9wczogewogICAgLyoqCiAgICAgKiBGb3JtIG1vZGUgZm9yIHRoZSBjb21wb25lbnQKICAgICAqLwogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgY29uZmlnTWFwczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBzZWNyZXRzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGxvYWRpbmc6IHsKICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICAgIHR5cGU6IEJvb2xlYW4KICAgIH0sCiAgICAvKioKICAgICAqIENvbnRhaW5lciBzcGVjCiAgICAgKi8KICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzJHZhbHVlID0gdGhpcy52YWx1ZSwKICAgICAgX3RoaXMkdmFsdWUkZW52ID0gX3RoaXMkdmFsdWUuZW52LAogICAgICBlbnYgPSBfdGhpcyR2YWx1ZSRlbnYgPT09IHZvaWQgMCA/IFtdIDogX3RoaXMkdmFsdWUkZW52LAogICAgICBfdGhpcyR2YWx1ZSRlbnZGcm9tID0gX3RoaXMkdmFsdWUuZW52RnJvbSwKICAgICAgZW52RnJvbSA9IF90aGlzJHZhbHVlJGVudkZyb20gPT09IHZvaWQgMCA/IFtdIDogX3RoaXMkdmFsdWUkZW52RnJvbTsKICAgIHZhciBhbGxFbnYgPSBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGVudiksIF90b0NvbnN1bWFibGVBcnJheShlbnZGcm9tKSkubWFwKGZ1bmN0aW9uIChyb3cpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICB2YWx1ZTogcm93LAogICAgICAgIGlkOiByYW5kb21TdHIoNCkKICAgICAgfTsKICAgIH0pOwogICAgcmV0dXJuIHsKICAgICAgZW52OiBlbnYsCiAgICAgIGVudkZyb206IGVudkZyb20sCiAgICAgIGFsbEVudjogYWxsRW52CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzVmlldzogZnVuY3Rpb24gaXNWaWV3KCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfVklFVzsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICAndmFsdWUudHR5JzogZnVuY3Rpb24gdmFsdWVUdHkobmV1KSB7CiAgICAgIGlmIChuZXUpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ3N0ZGluJywgdHJ1ZSk7CiAgICAgIH0KICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnF1ZXVlVXBkYXRlID0gZGVib3VuY2UodGhpcy51cGRhdGUsIDUwMCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgZGVsZXRlIHRoaXMudmFsdWUuZW52OwogICAgICBkZWxldGUgdGhpcy52YWx1ZS5lbnZGcm9tOwogICAgICB2YXIgZW52VmFyU291cmNlID0gW107CiAgICAgIHZhciBlbnZWYXIgPSBbXTsKICAgICAgdGhpcy5hbGxFbnYuZm9yRWFjaChmdW5jdGlvbiAocm93KSB7CiAgICAgICAgaWYgKCFyb3cudmFsdWUpIHsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgICAgaWYgKCEhcm93LnZhbHVlLmNvbmZpZ01hcFJlZiB8fCAhIXJvdy52YWx1ZS5zZWNyZXRSZWYpIHsKICAgICAgICAgIGVudlZhclNvdXJjZS5wdXNoKHJvdy52YWx1ZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGVudlZhci5wdXNoKHJvdy52YWx1ZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdlbnYnLCBlbnZWYXIpOwogICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ2VudkZyb20nLCBlbnZWYXJTb3VyY2UpOwogICAgfSwKICAgIHVwZGF0ZVJvdzogZnVuY3Rpb24gdXBkYXRlUm93KCkgewogICAgICB0aGlzLnF1ZXVlVXBkYXRlKCk7CiAgICB9LAogICAgcmVtb3ZlUm93OiBmdW5jdGlvbiByZW1vdmVSb3coaWR4KSB7CiAgICAgIHRoaXMuYWxsRW52LnNwbGljZShpZHgsIDEpOwogICAgICB0aGlzLnF1ZXVlVXBkYXRlKCk7CiAgICB9LAogICAgYWRkRnJvbVJlZmVyZW5jZTogZnVuY3Rpb24gYWRkRnJvbVJlZmVyZW5jZSgpIHsKICAgICAgdGhpcy5hbGxFbnYucHVzaCh7CiAgICAgICAgdmFsdWU6IHsKICAgICAgICAgIG5hbWU6ICcnLAogICAgICAgICAgdmFsdWVGcm9tOiB7fQogICAgICAgIH0sCiAgICAgICAgaWQ6IHJhbmRvbVN0cig0KQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["ValueFromResource","debounce","randomStr","_VIEW","components","props","mode","type","String","required","configMaps","Array","secrets","loading","default","Boolean","value","Object","_default","data","_this$value","_this$value$env","env","_this$value$envFrom","envFrom","allEnv","concat","_toConsumableArray","map","row","id","computed","isView","watch","valueTty","neu","$set","created","queueUpdate","update","methods","envVarSource","envVar","forEach","configMapRef","secretRef","push","updateRow","removeRow","idx","splice","addFromReference","name","valueFrom"],"sources":["node_modules/@rancher/shell/components/form/EnvVars.vue"],"sourcesContent":["<script>\nimport ValueFromResource from '@shell/components/form/ValueFromResource';\nimport debounce from 'lodash/debounce';\nimport { randomStr } from '@shell/utils/string';\nimport { _VIEW } from '@shell/config/query-params';\n\nexport default {\n  components: { ValueFromResource },\n\n  props: {\n    /**\n     * Form mode for the component\n     */\n    mode: {\n      type:     String,\n      required: true,\n    },\n    configMaps: {\n      type:     Array,\n      required: true\n    },\n    secrets: {\n      type:     Array,\n      required: true\n    },\n    loading: {\n      default: false,\n      type:    Boolean\n    },\n    /**\n     * Container spec\n     */\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n\n  data() {\n    const { env = [], envFrom = [] } = this.value;\n\n    const allEnv = [...env, ...envFrom].map((row) => {\n      return { value: row, id: randomStr(4) };\n    });\n\n    return {\n      env, envFrom, allEnv\n    };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    }\n  },\n\n  watch: {\n    'value.tty'(neu) {\n      if (neu) {\n        this.$set(this.value, 'stdin', true);\n      }\n    }\n  },\n  created() {\n    this.queueUpdate = debounce(this.update, 500);\n  },\n\n  methods: {\n    update() {\n      delete this.value.env;\n      delete this.value.envFrom;\n      const envVarSource = [];\n      const envVar = [];\n\n      this.allEnv.forEach((row) => {\n        if (!row.value) {\n          return;\n        }\n        if (!!row.value.configMapRef || !!row.value.secretRef) {\n          envVarSource.push(row.value);\n        } else {\n          envVar.push(row.value);\n        }\n      });\n      this.$set(this.value, 'env', envVar);\n      this.$set(this.value, 'envFrom', envVarSource);\n    },\n\n    updateRow() {\n      this.queueUpdate();\n    },\n\n    removeRow(idx) {\n      this.allEnv.splice(idx, 1);\n      this.queueUpdate();\n    },\n\n    addFromReference() {\n      this.allEnv.push({ value: { name: '', valueFrom: {} }, id: randomStr(4) });\n    },\n  },\n};\n</script>\n<template>\n  <div :style=\"{'width':'100%'}\">\n    <div\n      v-for=\"(row, i) in allEnv\"\n      :key=\"row.id\"\n    >\n      <ValueFromResource\n        v-model=\"row.value\"\n        :all-secrets=\"secrets\"\n        :all-config-maps=\"configMaps\"\n        :mode=\"mode\"\n        :loading=\"loading\"\n        @remove=\"removeRow(i)\"\n        @input=\"updateRow\"\n      />\n    </div>\n    <button\n      v-if=\"!isView\"\n      v-t=\"'workload.container.command.addEnvVar'\"\n      type=\"button\"\n      class=\"btn role-tertiary add\"\n      data-testid=\"add-env-var\"\n      @click=\"addFromReference\"\n    />\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.value-from ::v-deep {\n  .v-select {\n    height: 50px;\n  }\n\n  INPUT:not(.vs__search) {\n    height: 50px;\n  }\n}\n.value-from, .value-from-headers {\n  display: grid;\n  grid-template-columns: 20% 20% 20% 5% 20% auto;\n  grid-gap: $column-gutter;\n  align-items: center;\n  margin-bottom: 10px;\n}\n  .value-from-headers {\n    margin: 10px 0px 10px 0px;\n    color: var(--input-label);\n    }\n</style>\n"],"mappings":";;;;;;AACA,OAAAA,iBAAA;AACA,OAAAC,QAAA;AACA,SAAAC,SAAA;AACA,SAAAC,KAAA;AAEA;EACAC,UAAA;IAAAJ,iBAAA,EAAAA;EAAA;EAEAK,KAAA;IACA;AACA;AACA;IACAC,IAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,UAAA;MACAH,IAAA,EAAAI,KAAA;MACAF,QAAA;IACA;IACAG,OAAA;MACAL,IAAA,EAAAI,KAAA;MACAF,QAAA;IACA;IACAI,OAAA;MACAC,OAAA;MACAP,IAAA,EAAAQ;IACA;IACA;AACA;AACA;IACAC,KAAA;MACAT,IAAA,EAAAU,MAAA;MACAH,OAAA,WAAAI,SAAA;QACA;MACA;IACA;EACA;EAEAC,IAAA,WAAAA,KAAA;IACA,IAAAC,WAAA,QAAAJ,KAAA;MAAAK,eAAA,GAAAD,WAAA,CAAAE,GAAA;MAAAA,GAAA,GAAAD,eAAA,mBAAAA,eAAA;MAAAE,mBAAA,GAAAH,WAAA,CAAAI,OAAA;MAAAA,OAAA,GAAAD,mBAAA,mBAAAA,mBAAA;IAEA,IAAAE,MAAA,MAAAC,MAAA,CAAAC,kBAAA,CAAAL,GAAA,GAAAK,kBAAA,CAAAH,OAAA,GAAAI,GAAA,WAAAC,GAAA;MACA;QAAAb,KAAA,EAAAa,GAAA;QAAAC,EAAA,EAAA5B,SAAA;MAAA;IACA;IAEA;MACAoB,GAAA,EAAAA,GAAA;MAAAE,OAAA,EAAAA,OAAA;MAAAC,MAAA,EAAAA;IACA;EACA;EAEAM,QAAA;IACAC,MAAA,WAAAA,OAAA;MACA,YAAA1B,IAAA,KAAAH,KAAA;IACA;EACA;EAEA8B,KAAA;IACA,sBAAAC,SAAAC,GAAA;MACA,IAAAA,GAAA;QACA,KAAAC,IAAA,MAAApB,KAAA;MACA;IACA;EACA;EACAqB,OAAA,WAAAA,QAAA;IACA,KAAAC,WAAA,GAAArC,QAAA,MAAAsC,MAAA;EACA;EAEAC,OAAA;IACAD,MAAA,WAAAA,OAAA;MACA,YAAAvB,KAAA,CAAAM,GAAA;MACA,YAAAN,KAAA,CAAAQ,OAAA;MACA,IAAAiB,YAAA;MACA,IAAAC,MAAA;MAEA,KAAAjB,MAAA,CAAAkB,OAAA,WAAAd,GAAA;QACA,KAAAA,GAAA,CAAAb,KAAA;UACA;QACA;QACA,MAAAa,GAAA,CAAAb,KAAA,CAAA4B,YAAA,MAAAf,GAAA,CAAAb,KAAA,CAAA6B,SAAA;UACAJ,YAAA,CAAAK,IAAA,CAAAjB,GAAA,CAAAb,KAAA;QACA;UACA0B,MAAA,CAAAI,IAAA,CAAAjB,GAAA,CAAAb,KAAA;QACA;MACA;MACA,KAAAoB,IAAA,MAAApB,KAAA,SAAA0B,MAAA;MACA,KAAAN,IAAA,MAAApB,KAAA,aAAAyB,YAAA;IACA;IAEAM,SAAA,WAAAA,UAAA;MACA,KAAAT,WAAA;IACA;IAEAU,SAAA,WAAAA,UAAAC,GAAA;MACA,KAAAxB,MAAA,CAAAyB,MAAA,CAAAD,GAAA;MACA,KAAAX,WAAA;IACA;IAEAa,gBAAA,WAAAA,iBAAA;MACA,KAAA1B,MAAA,CAAAqB,IAAA;QAAA9B,KAAA;UAAAoC,IAAA;UAAAC,SAAA;QAAA;QAAAvB,EAAA,EAAA5B,SAAA;MAAA;IACA;EACA;AACA"}]}