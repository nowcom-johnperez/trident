{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/NodeAffinity.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/NodeAffinity.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5hc3NpZ24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCBkZWJvdW5jZSBmcm9tICdsb2Rhc2gvZGVib3VuY2UnOwppbXBvcnQgeyBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBnZXQsIGlzRW1wdHksIGNsb25lIH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IE5PREUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IE1hdGNoRXhwcmVzc2lvbnMgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9NYXRjaEV4cHJlc3Npb25zJzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgeyByYW5kb21TdHIgfSBmcm9tICdAc2hlbGwvdXRpbHMvc3RyaW5nJzsKaW1wb3J0IEFycmF5TGlzdEdyb3VwZWQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9BcnJheUxpc3RHcm91cGVkJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEFycmF5TGlzdEdyb3VwZWQ6IEFycmF5TGlzdEdyb3VwZWQsCiAgICBNYXRjaEV4cHJlc3Npb25zOiBNYXRjaEV4cHJlc3Npb25zLAogICAgTGFiZWxlZFNlbGVjdDogTGFiZWxlZFNlbGVjdCwKICAgIExhYmVsZWRJbnB1dDogTGFiZWxlZElucHV0CiAgfSwKICBwcm9wczogewogICAgLy8gdmFsdWUgc2hvdWxkIGJlIE5vZGVBZmZpbml0eSBvciBWb2x1bWVOb2RlQWZmaW5pdHkKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjcmVhdGUnCiAgICB9LAogICAgLy8gaGFzIHNlbGVjdCBmb3IgbWF0Y2hpbmcgZmllbGRzIG9yIGV4cHJlc3Npb25zICh1c2VkIGZvciBub2RlIGFmZmluaXR5KQogICAgLy8gaHR0cHM6Ly9rdWJlcm5ldGVzLmlvL2RvY3MvcmVmZXJlbmNlL2dlbmVyYXRlZC9rdWJlcm5ldGVzLWFwaS92MS4yNS8jbm9kZXNlbGVjdG9ydGVybS12MS1jb3JlCiAgICBtYXRjaGluZ1NlbGVjdG9yRGlzcGxheTogewogICAgICB0eXBlOiBCb29sZWFuLAogICAgICBkZWZhdWx0OiBmYWxzZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIC8vIFZvbHVtZU5vZGVBZmZpbml0eSBvbmx5IGhhcyAncmVxdWlyZWQnIGZpZWxkCiAgICBpZiAodGhpcy52YWx1ZS5yZXF1aXJlZCkgewogICAgICByZXR1cm4gewogICAgICAgIG5vZGVTZWxlY3RvclRlcm1zOiB0aGlzLnZhbHVlLnJlcXVpcmVkLm5vZGVTZWxlY3RvclRlcm1zCiAgICAgIH07CiAgICB9IGVsc2UgewogICAgICB2YXIgX3RoaXMkdmFsdWUgPSB0aGlzLnZhbHVlLAogICAgICAgIF90aGlzJHZhbHVlJHByZWZlcnJlZCA9IF90aGlzJHZhbHVlLnByZWZlcnJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uLAogICAgICAgIHByZWZlcnJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uID0gX3RoaXMkdmFsdWUkcHJlZmVycmVkID09PSB2b2lkIDAgPyBbXSA6IF90aGlzJHZhbHVlJHByZWZlcnJlZCwKICAgICAgICBfdGhpcyR2YWx1ZSRyZXF1aXJlZEQgPSBfdGhpcyR2YWx1ZS5yZXF1aXJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uLAogICAgICAgIHJlcXVpcmVkRHVyaW5nU2NoZWR1bGluZ0lnbm9yZWREdXJpbmdFeGVjdXRpb24gPSBfdGhpcyR2YWx1ZSRyZXF1aXJlZEQgPT09IHZvaWQgMCA/IHt9IDogX3RoaXMkdmFsdWUkcmVxdWlyZWREOwogICAgICB2YXIgX3JlcXVpcmVkRHVyaW5nU2NoZWR1ID0gcmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbi5ub2RlU2VsZWN0b3JUZXJtcywKICAgICAgICBub2RlU2VsZWN0b3JUZXJtcyA9IF9yZXF1aXJlZER1cmluZ1NjaGVkdSA9PT0gdm9pZCAwID8gW10gOiBfcmVxdWlyZWREdXJpbmdTY2hlZHU7CiAgICAgIHZhciBhbGxTZWxlY3RvclRlcm1zID0gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShwcmVmZXJyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbiksIF90b0NvbnN1bWFibGVBcnJheShub2RlU2VsZWN0b3JUZXJtcykpLm1hcChmdW5jdGlvbiAodGVybSkgewogICAgICAgIHZhciBuZXUgPSBjbG9uZSh0ZXJtKTsKICAgICAgICBuZXUuX2lkID0gcmFuZG9tU3RyKDQpOwogICAgICAgIGlmICh0ZXJtLnByZWZlcmVuY2UpIHsKICAgICAgICAgIE9iamVjdC5hc3NpZ24obmV1LCB0ZXJtLnByZWZlcmVuY2UpOwogICAgICAgICAgZGVsZXRlIG5ldS5wcmVmZXJlbmNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gbmV1OwogICAgICB9KTsKICAgICAgcmV0dXJuIHsKICAgICAgICBhbGxTZWxlY3RvclRlcm1zOiBhbGxTZWxlY3RvclRlcm1zLAogICAgICAgIHdlaWdodGVkTm9kZVNlbGVjdG9yVGVybXM6IHByZWZlcnJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uLAogICAgICAgIGRlZmF1bHRXZWlnaHQ6IDEsCiAgICAgICAgLy8gcnVsZXMgaW4gTWF0Y2hFeHByZXNzaW9ucy52dWUgY2FuIG5vdCBjYXRjaCBjaGFuZ2VzIHdoYXQgaGFwcGVucyBvbiBwYXJlbnQgY29tcG9uZW50CiAgICAgICAgLy8gd2UgbmVlZCByZS1yZW5kZXIgaXQgdmlhIGtleSBjaGFuZ2luZwogICAgICAgIHJlcmVuZGVyTnVtczogcmFuZG9tU3RyKDQpCiAgICAgIH07CiAgICB9CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKHsKICAgIHQ6ICdpMThuL3QnCiAgfSkpLCB7fSwgewogICAgaXNWaWV3OiBmdW5jdGlvbiBpc1ZpZXcoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGUgPT09IF9WSUVXOwogICAgfSwKICAgIGhhc1dlaWdodGVkOiBmdW5jdGlvbiBoYXNXZWlnaHRlZCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy53ZWlnaHRlZE5vZGVTZWxlY3RvclRlcm1zOwogICAgfSwKICAgIG5vZGU6IGZ1bmN0aW9uIG5vZGUoKSB7CiAgICAgIHJldHVybiBOT0RFOwogICAgfSwKICAgIGFmZmluaXR5T3B0aW9uczogZnVuY3Rpb24gYWZmaW5pdHlPcHRpb25zKCkgewogICAgICB2YXIgb3V0ID0gW3RoaXMudCgnd29ya2xvYWQuc2NoZWR1bGluZy5hZmZpbml0eS5wcmVmZXJyZWQnKSwgdGhpcy50KCd3b3JrbG9hZC5zY2hlZHVsaW5nLmFmZmluaXR5LnJlcXVpcmVkJyldOwogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0pLAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLnF1ZXVlVXBkYXRlID0gZGVib3VuY2UodGhpcy51cGRhdGUsIDUwMCk7CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgdmFyIG91dCA9IHt9OwogICAgICB2YXIgcmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbiA9IHsKICAgICAgICBub2RlU2VsZWN0b3JUZXJtczogW10KICAgICAgfTsKICAgICAgdmFyIHByZWZlcnJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uID0gW107CiAgICAgIHRoaXMuYWxsU2VsZWN0b3JUZXJtcy5mb3JFYWNoKGZ1bmN0aW9uICh0KSB7CiAgICAgICAgdmFyIHRlcm0gPSBfb2JqZWN0U3ByZWFkKHt9LCB0KTsKCiAgICAgICAgLy8gdGhlICdtYXRjaGluZycgZmllbGQgaXNuJ3QgcGFydCBvZiB0aGUgYWZmaW5pdHkgc3BlYzogaW5jbHVkaW5nIHRoaXMgaW4gdGhlIHNhdmUgcmVxdWVzdCB3aWxsIGNhdXNlIGEgZmxvb2Qgb2YgZXJyb3JzIHRoYXQgbWlnaHQgY2F1c2UgdGhlIHJlcXVlc3QgdG8gZmFpbAogICAgICAgIC8vIHNhbWUgZGVhbCB3aXRoIHRlcm0ucHJlZmVyZW5jZS53ZWlnaHQKICAgICAgICBpZiAodGVybS5tYXRjaEV4cHJlc3Npb25zKSB7CiAgICAgICAgICB0ZXJtLm1hdGNoRXhwcmVzc2lvbnMgPSAodGVybS5tYXRjaEV4cHJlc3Npb25zIHx8IFtdKS5tYXAoZnVuY3Rpb24gKGV4cHJlc3Npb24pIHsKICAgICAgICAgICAgdmFyIG91dCA9IF9vYmplY3RTcHJlYWQoe30sIGV4cHJlc3Npb24pOwogICAgICAgICAgICBkZWxldGUgb3V0Lm1hdGNoaW5nOwogICAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmICh0ZXJtLm1hdGNoRmllbGRzKSB7CiAgICAgICAgICB0ZXJtLm1hdGNoRmllbGRzID0gKHRlcm0ubWF0Y2hGaWVsZHMgfHwgW10pLm1hcChmdW5jdGlvbiAoZmllbGQpIHsKICAgICAgICAgICAgdmFyIG91dCA9IF9vYmplY3RTcHJlYWQoe30sIGZpZWxkKTsKICAgICAgICAgICAgZGVsZXRlIG91dC5tYXRjaGluZzsKICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAodGVybS53ZWlnaHQpIHsKICAgICAgICAgIHZhciBuZXUgPSB7CiAgICAgICAgICAgIHdlaWdodDogdGVybS53ZWlnaHQsCiAgICAgICAgICAgIHByZWZlcmVuY2U6IHRlcm0KICAgICAgICAgIH07CiAgICAgICAgICBkZWxldGUgbmV1LnByZWZlcmVuY2Uud2VpZ2h0OwogICAgICAgICAgcHJlZmVycmVkRHVyaW5nU2NoZWR1bGluZ0lnbm9yZWREdXJpbmdFeGVjdXRpb24ucHVzaChuZXUpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXF1aXJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uLm5vZGVTZWxlY3RvclRlcm1zLnB1c2godGVybSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgaWYgKHByZWZlcnJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uLmxlbmd0aCkgewogICAgICAgIG91dC5wcmVmZXJyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbiA9IHByZWZlcnJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uOwogICAgICB9CiAgICAgIGlmIChyZXF1aXJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uLm5vZGVTZWxlY3RvclRlcm1zLmxlbmd0aCkgewogICAgICAgIG91dC5yZXF1aXJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uID0gcmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbjsKICAgICAgfQogICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIG91dCk7CiAgICB9LAogICAgcmVtb3ZlOiBmdW5jdGlvbiByZW1vdmUoKSB7CiAgICAgIHRoaXMucmVyZW5kZXJOdW1zID0gcmFuZG9tU3RyKDQpOwogICAgICB0aGlzLnF1ZXVlVXBkYXRlKCk7CiAgICB9LAogICAgY2hhbmdlUHJpb3JpdHk6IGZ1bmN0aW9uIGNoYW5nZVByaW9yaXR5KHRlcm0pIHsKICAgICAgaWYgKHRlcm0ud2VpZ2h0KSB7CiAgICAgICAgdGhpcy4kZGVsZXRlKHRlcm0sICd3ZWlnaHQnKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzZXQodGVybSwgJ3dlaWdodCcsIDEpOwogICAgICB9CiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9LAogICAgcHJpb3JpdHlEaXNwbGF5OiBmdW5jdGlvbiBwcmlvcml0eURpc3BsYXkodGVybSkgewogICAgICByZXR1cm4gJ3dlaWdodCcgaW4gdGVybSA/IHRoaXMudCgnd29ya2xvYWQuc2NoZWR1bGluZy5hZmZpbml0eS5wcmVmZXJyZWQnKSA6IHRoaXMudCgnd29ya2xvYWQuc2NoZWR1bGluZy5hZmZpbml0eS5yZXF1aXJlZCcpOwogICAgfSwKICAgIHVwZGF0ZUV4cHJlc3Npb25zOiBmdW5jdGlvbiB1cGRhdGVFeHByZXNzaW9ucyhyb3csIGV4cHJlc3Npb25zKSB7CiAgICAgIHZhciBleHByZXNzaW9uc01hdGNoaW5nID0gewogICAgICAgIG1hdGNoRmllbGRzOiBbXSwKICAgICAgICBtYXRjaEV4cHJlc3Npb25zOiBbXQogICAgICB9OwogICAgICBpZiAoZXhwcmVzc2lvbnMubGVuZ3RoKSB7CiAgICAgICAgZXhwcmVzc2lvbnMuZm9yRWFjaChmdW5jdGlvbiAoZXhwcmVzc2lvbikgewogICAgICAgICAgZXhwcmVzc2lvbnNNYXRjaGluZ1tleHByZXNzaW9uLm1hdGNoaW5nIHx8ICdtYXRjaEV4cHJlc3Npb25zJ10ucHVzaChleHByZXNzaW9uKTsKICAgICAgICB9KTsKICAgICAgICB0aGlzLiRzZXQocm93LCAnbWF0Y2hGaWVsZHMnLCBleHByZXNzaW9uc01hdGNoaW5nLm1hdGNoRmllbGRzKTsKICAgICAgICB0aGlzLiRzZXQocm93LCAnbWF0Y2hFeHByZXNzaW9ucycsIGV4cHJlc3Npb25zTWF0Y2hpbmcubWF0Y2hFeHByZXNzaW9ucyk7CiAgICAgICAgdGhpcy51cGRhdGUoKTsKICAgICAgfQogICAgfSwKICAgIGdldDogZ2V0LAogICAgaXNFbXB0eTogaXNFbXB0eQogIH0KfTs="},{"version":3,"names":["debounce","_VIEW","mapGetters","get","isEmpty","clone","NODE","MatchExpressions","LabeledSelect","LabeledInput","randomStr","ArrayListGrouped","components","props","value","type","Object","default","_default","mode","String","matchingSelectorDisplay","Boolean","data","required","nodeSelectorTerms","_this$value","_this$value$preferred","preferredDuringSchedulingIgnoredDuringExecution","_this$value$requiredD","requiredDuringSchedulingIgnoredDuringExecution","_requiredDuringSchedu","allSelectorTerms","concat","_toConsumableArray","map","term","neu","_id","preference","assign","weightedNodeSelectorTerms","defaultWeight","rerenderNums","computed","_objectSpread","t","isView","hasWeighted","node","affinityOptions","out","created","queueUpdate","update","methods","forEach","matchExpressions","expression","matching","matchFields","field","weight","push","length","$emit","remove","changePriority","$delete","$set","priorityDisplay","updateExpressions","row","expressions","expressionsMatching"],"sources":["node_modules/@rancher/shell/components/form/NodeAffinity.vue"],"sourcesContent":["<script>\nimport debounce from 'lodash/debounce';\nimport { _VIEW } from '@shell/config/query-params';\nimport { mapGetters } from 'vuex';\nimport { get, isEmpty, clone } from '@shell/utils/object';\nimport { NODE } from '@shell/config/types';\nimport MatchExpressions from '@shell/components/form/MatchExpressions';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { randomStr } from '@shell/utils/string';\nimport ArrayListGrouped from '@shell/components/form/ArrayListGrouped';\n\nexport default {\n  components: {\n    ArrayListGrouped, MatchExpressions, LabeledSelect, LabeledInput\n  },\n\n  props: {\n    // value should be NodeAffinity or VolumeNodeAffinity\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    mode: {\n      type:    String,\n      default: 'create'\n    },\n\n    // has select for matching fields or expressions (used for node affinity)\n    // https://kubernetes.io/docs/reference/generated/kubernetes-api/v1.25/#nodeselectorterm-v1-core\n    matchingSelectorDisplay: {\n      type:    Boolean,\n      default: false,\n    },\n  },\n\n  data() {\n    // VolumeNodeAffinity only has 'required' field\n    if (this.value.required) {\n      return { nodeSelectorTerms: this.value.required.nodeSelectorTerms };\n    } else {\n      const { preferredDuringSchedulingIgnoredDuringExecution = [], requiredDuringSchedulingIgnoredDuringExecution = {} } = this.value;\n      const { nodeSelectorTerms = [] } = requiredDuringSchedulingIgnoredDuringExecution;\n      const allSelectorTerms = [...preferredDuringSchedulingIgnoredDuringExecution, ...nodeSelectorTerms].map((term) => {\n        const neu = clone(term);\n\n        neu._id = randomStr(4);\n        if (term.preference) {\n          Object.assign(neu, term.preference);\n          delete neu.preference;\n        }\n\n        return neu;\n      });\n\n      return {\n        allSelectorTerms,\n        weightedNodeSelectorTerms: preferredDuringSchedulingIgnoredDuringExecution,\n        defaultWeight:             1,\n        // rules in MatchExpressions.vue can not catch changes what happens on parent component\n        // we need re-render it via key changing\n        rerenderNums:              randomStr(4)\n      };\n    }\n  },\n\n  computed: {\n    ...mapGetters({ t: 'i18n/t' }),\n    isView() {\n      return this.mode === _VIEW;\n    },\n    hasWeighted() {\n      return !!this.weightedNodeSelectorTerms;\n    },\n    node() {\n      return NODE;\n    },\n    affinityOptions() {\n      const out = [this.t('workload.scheduling.affinity.preferred'), this.t('workload.scheduling.affinity.required')];\n\n      return out;\n    }\n  },\n\n  created() {\n    this.queueUpdate = debounce(this.update, 500);\n  },\n\n  methods: {\n    update() {\n      const out = {};\n      const requiredDuringSchedulingIgnoredDuringExecution = { nodeSelectorTerms: [] };\n      const preferredDuringSchedulingIgnoredDuringExecution = [] ;\n\n      this.allSelectorTerms.forEach((t) => {\n        const term = { ...t };\n\n        // the 'matching' field isn't part of the affinity spec: including this in the save request will cause a flood of errors that might cause the request to fail\n        // same deal with term.preference.weight\n        if (term.matchExpressions) {\n          term.matchExpressions = (term.matchExpressions || []).map((expression) => {\n            const out = { ...expression };\n\n            delete out.matching;\n\n            return out;\n          });\n        }\n\n        if (term.matchFields) {\n          term.matchFields = (term.matchFields || []).map((field) => {\n            const out = { ...field };\n\n            delete out.matching;\n\n            return out;\n          });\n        }\n\n        if (term.weight) {\n          const neu = { weight: term.weight, preference: term };\n\n          delete neu.preference.weight;\n\n          preferredDuringSchedulingIgnoredDuringExecution.push(neu);\n        } else {\n          requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms.push(term);\n        }\n      });\n\n      if (preferredDuringSchedulingIgnoredDuringExecution.length) {\n        out.preferredDuringSchedulingIgnoredDuringExecution = preferredDuringSchedulingIgnoredDuringExecution;\n      }\n      if (requiredDuringSchedulingIgnoredDuringExecution.nodeSelectorTerms.length) {\n        out.requiredDuringSchedulingIgnoredDuringExecution = requiredDuringSchedulingIgnoredDuringExecution;\n      }\n\n      this.$emit('input', out);\n    },\n\n    remove() {\n      this.rerenderNums = randomStr(4);\n      this.queueUpdate();\n    },\n\n    changePriority(term) {\n      if (term.weight) {\n        this.$delete(term, 'weight');\n      } else {\n        this.$set(term, 'weight', 1);\n      }\n      this.update();\n    },\n\n    priorityDisplay(term) {\n      return 'weight' in term ? this.t('workload.scheduling.affinity.preferred') : this.t('workload.scheduling.affinity.required');\n    },\n\n    updateExpressions(row, expressions) {\n      const expressionsMatching = {\n        matchFields:      [],\n        matchExpressions: []\n      };\n\n      if (expressions.length) {\n        expressions.forEach((expression) => {\n          expressionsMatching[expression.matching || 'matchExpressions'].push(expression);\n        });\n\n        this.$set(row, 'matchFields', expressionsMatching.matchFields);\n        this.$set(row, 'matchExpressions', expressionsMatching.matchExpressions);\n\n        this.update();\n      }\n    },\n\n    get,\n\n    isEmpty\n  }\n\n};\n</script>\n\n<template>\n  <div\n    class=\"row\"\n    @input=\"queueUpdate\"\n  >\n    <div class=\"col span-12\">\n      <ArrayListGrouped\n        v-model=\"allSelectorTerms\"\n        class=\"mt-20\"\n        :mode=\"mode\"\n        :default-add-value=\"{matchExpressions:[]}\"\n        :add-label=\"t('workload.scheduling.affinity.addNodeSelector')\"\n        @remove=\"remove\"\n      >\n        <template #default=\"props\">\n          <div class=\"row\">\n            <div class=\"col span-9\">\n              <LabeledSelect\n                :options=\"affinityOptions\"\n                :value=\"priorityDisplay(props.row.value)\"\n                :label=\"t('workload.scheduling.affinity.priority')\"\n                :mode=\"mode\"\n                :data-testid=\"`node-affinity-priority-index${props.i}`\"\n                @input=\"(changePriority(props.row.value))\"\n              />\n            </div>\n            <div\n              v-if=\"'weight' in props.row.value\"\n              class=\"col span-3\"\n            >\n              <LabeledInput\n                v-model.number=\"props.row.value.weight\"\n                :mode=\"mode\"\n                type=\"number\"\n                min=\"1\"\n                max=\"100\"\n                :label=\"t('workload.scheduling.affinity.weight.label')\"\n                :placeholder=\"t('workload.scheduling.affinity.weight.placeholder')\"\n                :data-testid=\"`node-affinity-weight-index${props.i}`\"\n              />\n            </div>\n          </div>\n          <MatchExpressions\n            :key=\"rerenderNums\"\n            :value=\"matchingSelectorDisplay ? props.row.value : props.row.value.matchExpressions\"\n            :matching-selector-display=\"matchingSelectorDisplay\"\n            :mode=\"mode\"\n            class=\"col span-12 mt-20\"\n            :type=\"node\"\n            :show-remove=\"false\"\n            :data-testid=\"`node-affinity-expressions-index${props.i}`\"\n            @input=\"(updateExpressions(props.row.value, $event))\"\n          />\n        </template>\n      </ArrayListGrouped>\n    </div>\n  </div>\n</template>\n\n<style>\n</style>\n"],"mappings":"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"}]}