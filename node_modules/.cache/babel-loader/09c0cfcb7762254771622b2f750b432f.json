{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--17-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwppbXBvcnQgeyBTRVRUSU5HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZXR0aW5ncyc7CmltcG9ydCB7IENPVU5ULCBNQU5BR0VNRU5UIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IEdDX0RFRkFVTFRTIH0gZnJvbSAnLi9nYy10eXBlcyc7CnZhciBHYXJiYWdlQ29sbGVjdCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gR2FyYmFnZUNvbGxlY3QoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhcmJhZ2VDb2xsZWN0KTsKICAgIHRoaXMuY2FjaGVkR2NQcmVmcyA9IEdDX0RFRkFVTFRTOwogICAgdGhpcy5jYWNoZWRHY1ByZWZzU3RhbXAgPSAnJzsKICAgIHRoaXMuZGVidWdMb2cgPSBmdW5jdGlvbiAoKSB7CiAgICAgIGlmIChHYXJiYWdlQ29sbGVjdC5FTkFCTEVfREVCVUdfTE9HR0lORykgewogICAgICAgIHZhciBfY29uc29sZTsKICAgICAgICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgYXJncyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHsKICAgICAgICAgIGFyZ3NbX2tleV0gPSBhcmd1bWVudHNbX2tleV07CiAgICAgICAgfQogICAgICAgIChfY29uc29sZSA9IGNvbnNvbGUpLmRlYnVnLmFwcGx5KF9jb25zb2xlLCBbJ0dDJ10uY29uY2F0KGFyZ3MpKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgIH0KICAgIH07CiAgICAvKioKICAgICAqIFRpbWUgdGhlIEdDIGxhc3QgcmFuCiAgICAgKi8KICAgIHRoaXMuZ2NMYXN0UnVuID0gMDsKICAgIC8qKgogICAgICogVG8gYXZvaWQgSlNPTi5wYXJzZSBvbiB0aGUgYHVpLXBlcmZvcm1hbmNlYCBzZXR0aW5nIGtlZXAgYSBsb2NhbCBjYWNoZQogICAgICovCiAgICB0aGlzLmdldFVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID0gZnVuY3Rpb24gKHJvb3RTdGF0ZSkgewogICAgICB2YXIgX2E7CiAgICAgIHZhciB1aVBlcmZTZXR0aW5nID0gKF9hID0gcm9vdFN0YXRlLm1hbmFnZW1lbnQudHlwZXNbTUFOQUdFTUVOVC5TRVRUSU5HXSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxpc3QuZmluZChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBzLmlkID09PSBTRVRUSU5HLlVJX1BFUkZPUk1BTkNFOwogICAgICB9KTsKICAgICAgaWYgKCF1aVBlcmZTZXR0aW5nIHx8ICF1aVBlcmZTZXR0aW5nLnZhbHVlKSB7CiAgICAgICAgLy8gQ291bGQgYmUgaW4gdGhlIHByb2Nlc3Mgb2YgbG9nZ2luZyBvdXQKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIHZhciBzdGFtcCA9ICIiLmNvbmNhdCh1aVBlcmZTZXR0aW5nLm1ldGFkYXRhLmdlbmVyYXRpb24sICItIikuY29uY2F0KHVpUGVyZlNldHRpbmcubWV0YWRhdGEucmVzb3VyY2VWZXJzaW9uKTsKICAgICAgaWYgKF90aGlzLmNhY2hlZEdjUHJlZnNTdGFtcCAhPT0gc3RhbXApIHsKICAgICAgICBfdGhpcy5kZWJ1Z0xvZygiVXBkYXRpbmcgIi5jb25jYXQoU0VUVElORy5VSV9QRVJGT1JNQU5DRSwgIiBjYWNoZSIpKTsKICAgICAgICBfdGhpcy5jYWNoZWRHY1ByZWZzU3RhbXAgPSBzdGFtcDsKICAgICAgICB2YXIgdWlQZXJmU2V0dGluZ1BhcnNlZCA9IEpTT04ucGFyc2UodWlQZXJmU2V0dGluZy52YWx1ZSk7CiAgICAgICAgX3RoaXMuY2FjaGVkR2NQcmVmcyA9IHVpUGVyZlNldHRpbmdQYXJzZWQuZ2FyYmFnZUNvbGxlY3Rpb247CiAgICAgIH0KICAgICAgcmV0dXJuIF90aGlzLmNhY2hlZEdjUHJlZnM7CiAgICB9OwogICAgLyoqCiAgICAgKiBUaGUgbGFzdCB0aW1lIGEgcmVzb3VyY2Ugd2FzIGFjY2Vzc2VkIGJ5IGVpdGhlciBmaW5kIG9yIGdldHRlcnMgc3R5bGUgZnVuY3Rpb25zCiAgICAgKi8KICAgIHRoaXMubGFzdEFjY2Vzc2VkQ2FjaGUgPSB7fTsKICAgIC8qKgogICAgICogVHJhY2sgd2hlbiBhIGxvZ2dlZCBpbiByb3V0ZSBjaGFuZ2VzLgogICAgICovCiAgICB0aGlzLmxhc3RSb3V0ZUNoYW5nZSA9IDA7CiAgfQogIC8vIC0tLS0tLS0tLS0tLS0gR0MgRW5hYmxlZCAtLS0tLS0tLS0tLS0tLS0tLS0tLS0KICBfY3JlYXRlQ2xhc3MoR2FyYmFnZUNvbGxlY3QsIFt7CiAgICBrZXk6ICJnY0VuYWJsZWRBbGwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdjRW5hYmxlZEFsbChwc2V1ZG9DdHgsIHR5cGUpIHsKICAgICAgcmV0dXJuIHRoaXMuZ2NFbmFibGVkRm9yU3RvcmUocHNldWRvQ3R4LnN0YXRlKSAmJiB0aGlzLmdjRW5hYmxlZFNldHRpbmcocHNldWRvQ3R4KSAmJiB0aGlzLmdjRW5hYmxlZEZvclR5cGUocHNldWRvQ3R4LCB0eXBlKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnY0VuYWJsZWRTZXR0aW5nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnY0VuYWJsZWRTZXR0aW5nKHBzZXVkb0N0eCkgewogICAgICB2YXIgcm9vdFN0YXRlID0gcHNldWRvQ3R4LnJvb3RTdGF0ZTsKICAgICAgLy8gRG9uJ3QgdXNlIGEgZ2V0dGVyLi4uIGFzIHdlJ2xsIGVuZCB1cCB0cmlnZ2VyaW5nIG91cnNlbHZlcyBhZ2FpbgogICAgICB2YXIgdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24gPSB0aGlzLmdldFVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uKHJvb3RTdGF0ZSk7CiAgICAgIHJldHVybiB1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbiA9PT0gbnVsbCB8fCB1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24uZW5hYmxlZDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJnY0VuYWJsZWRGb3JTdG9yZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2NFbmFibGVkRm9yU3RvcmUoc3RhdGUpIHsKICAgICAgdmFyIF9hOwogICAgICByZXR1cm4gKF9hID0gc3RhdGUgPT09IG51bGwgfHwgc3RhdGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHN0YXRlLmNvbmZpZykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnN1cHBvcnRzR2M7CiAgICB9CiAgICAvKioKICAgICAqIFN0b3JlIGNhbiByZXF1aXJlIGNlcnRhaW4gdHlwZXMgYXJlIG5vdCBHQydkIChmb3IgZXhhbXBsZSBgY2x1c3RlcmAgYW5kIGBzY2hlbWFgcywgYGNvdW50c2AsIGV0YykKICAgICAqLwogIH0sIHsKICAgIGtleTogImdjRW5hYmxlZEZvclR5cGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdjRW5hYmxlZEZvclR5cGUocHNldWRvQ3R4LCB0eXBlKSB7CiAgICAgIHZhciBnZXR0ZXJzID0gcHNldWRvQ3R4LmdldHRlcnM7CiAgICAgIGlmICghdHlwZSB8fCBnZXR0ZXJzLmdjSWdub3JlVHlwZXNbdHlwZV0pIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwgewogICAga2V5OiAiZ2NFbmFibGVkSW50ZXJ2YWwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdjRW5hYmxlZEludGVydmFsKHBzZXVkb0N0eCkgewogICAgICB2YXIgcm9vdFN0YXRlID0gcHNldWRvQ3R4LnJvb3RTdGF0ZTsKICAgICAgLy8gRG9uJ3QgdXNlIGEgZ2V0dGVyLi4uIGFzIHdlJ2xsIGVuZCB1cCB0cmlnZ2VyaW5nIG91cnNlbHZlcyBhZ2FpbgogICAgICB2YXIgdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24gPSB0aGlzLmdldFVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uKHJvb3RTdGF0ZSk7CiAgICAgIHJldHVybiB7CiAgICAgICAgZW5hYmxlZDogdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24gPT09IG51bGwgfHwgdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uLmVuYWJsZWRJbnRlcnZhbCwKICAgICAgICBpbnRlcnZhbDogKHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID09PSBudWxsIHx8IHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiB1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbi5pbnRlcnZhbCkgfHwgMAogICAgICB9OwogICAgfQogIH0sIHsKICAgIGtleTogImdjRW5hYmxlZFJvdXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnY0VuYWJsZWRSb3V0ZShwc2V1ZG9DdHgpIHsKICAgICAgdmFyIHJvb3RTdGF0ZSA9IHBzZXVkb0N0eC5yb290U3RhdGU7CiAgICAgIC8vIERvbid0IHVzZSBhIGdldHRlci4uLiBhcyB3ZSdsbCBlbmQgdXAgdHJpZ2dlcmluZyBvdXJzZWx2ZXMgYWdhaW4KICAgICAgdmFyIHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uID0gdGhpcy5nZXRVaVBlcmZHYXJiYWdlQ29sbGVjdGlvbihyb290U3RhdGUpOwogICAgICByZXR1cm4gdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24gPT09IG51bGwgfHwgdWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uLmVuYWJsZWRPbk5hdmlnYXRlOwogICAgfQogICAgLy8gLS0tLS0tLS0tLS0tLSBHQyAoYWN0dWFsKSAtLS0tLS0tLS0tLS0tLS0tLS0tLS0KICAgIC8qKgogICAgICogUmVtb3ZlIHN0YWxlIHJlc291cmNlIHR5cGVzIGZyb20gdGhlIHN0b3JlIGFuZCBzdG9wIHdhdGNoaW5nIHRoZW0gZm9yIGNoYW5nZXMKICAgICAqLwogIH0sIHsKICAgIGtleTogImdhcmJhZ2VDb2xsZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnYXJiYWdlQ29sbGVjdChjdHgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciBpZ25vcmVUeXBlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDoge307CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgLy8gSXMgZ2MgY3VycmVudGx5IHJ1bm5pbmcgT1IgaGFzIHJ1biBpbiB0aGUgcGFzdCBHQ19SRV9SVU5fR0FQIHJldHVybiBlYXJseQogICAgICBpZiAodGhpcy5nY0xhc3RSdW4gPT09IG51bGwgfHwgbm93IC0gdGhpcy5nY0xhc3RSdW4gPCBHYXJiYWdlQ29sbGVjdC5HQ19SRV9SVU5fR0FQKSB7CiAgICAgICAgdGhpcy5kZWJ1Z0xvZygnU2tpcHBpbmcgKHJ1bm5pbmcgb3IgcmVjZW50bHkgcnVuKScsIHRoaXMuZ2NMYXN0UnVuID8gbmV3IERhdGUodGhpcy5nY0xhc3RSdW4pIDogJ3J1bm5pbmcnKTsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5nY0xhc3RSdW4gPSBudWxsOwogICAgICB2YXIgZ2NkID0ge307CiAgICAgIHRyeSB7CiAgICAgICAgdmFyIGdldHRlcnMgPSBjdHguZ2V0dGVycywKICAgICAgICAgIHJvb3RTdGF0ZSA9IGN0eC5yb290U3RhdGUsCiAgICAgICAgICBkaXNwYXRjaCA9IGN0eC5kaXNwYXRjaDsKICAgICAgICBpZiAoIXJvb3RTdGF0ZS5jbHVzdGVyUmVhZHkpIHsKICAgICAgICAgIHRoaXMuZGVidWdMb2coJ1NraXBwaW5nIChjbHVzdGVyIG5vdCByZWFkeSknKTsKICAgICAgICAgIHRoaXMuZ2NMYXN0UnVuID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHRoaXMuZGVidWdMb2coIi0tLS0tLSBTdGFydGVkIC0tLS0tLSIpOwogICAgICAgIHZhciB1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbiA9IHRoaXMuZ2V0VWlQZXJmR2FyYmFnZUNvbGxlY3Rpb24ocm9vdFN0YXRlKTsKICAgICAgICBpZiAoIXVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uKSB7CiAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIHZhciBtYXhBZ2UgPSB1aVBlcmZHYXJiYWdlQ29sbGVjdGlvbi5hZ2VUaHJlc2hvbGQgKiAxMDAwOwogICAgICAgIHZhciBtYXhDb3VudCA9IHVpUGVyZkdhcmJhZ2VDb2xsZWN0aW9uLmNvdW50VGhyZXNob2xkOwogICAgICAgIHRoaXMuZGVidWdMb2coIk1heCBBZ2U6ICIuY29uY2F0KG1heEFnZSwgIi4gTWF4IENvdW50OiAiKS5jb25jYXQobWF4Q291bnQpKTsgLy8gLCAnQ2FjaGUnLCB0aGlzLmxhc3RBY2Nlc3NlZENhY2hlCiAgICAgICAgdmFyIHN0b3JlID0gY3R4LnN0YXRlLmNvbmZpZy5uYW1lc3BhY2U7CiAgICAgICAgLy8gdGhpcy5kZWJ1Z0xvZygnQ2FjaGUnLCB0aGlzLmxhc3RBY2Nlc3NlZENhY2hlKTsKICAgICAgICBPYmplY3QuZW50cmllcyh0aGlzLmxhc3RBY2Nlc3NlZENhY2hlW3N0b3JlXSB8fCB7fSkuZm9yRWFjaChmdW5jdGlvbiAoX3JlZikgewogICAgICAgICAgdmFyIF9yZWYyID0gX3NsaWNlZFRvQXJyYXkoX3JlZiwgMiksCiAgICAgICAgICAgIHR5cGUgPSBfcmVmMlswXSwKICAgICAgICAgICAgbGFzdEFjY2Vzc2VkID0gX3JlZjJbMV07CiAgICAgICAgICB2YXIgX2E7CiAgICAgICAgICBpZiAoIWxhc3RBY2Nlc3NlZCkgewogICAgICAgICAgICAvLyBUaGVyZSdzIG5vIGxhc3QgYWNjZXNzZWQgdGltZS4uLiBnYyBpcyBwcm9iYWJseSBkaXNhYmxlZCBpbiBhbm90aGVyIHdheQogICAgICAgICAgICBfdGhpczIuZGVidWdMb2coIiIuY29uY2F0KHR5cGUsICI6IFNraXBwaW5nIChubyBhY2Nlc3NlZCB0aW1lKSIpKTsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgfQogICAgICAgICAgaWYgKCFfdGhpczIuZ2NFbmFibGVkRm9yVHlwZShjdHgsIHR5cGUpKSB7CiAgICAgICAgICAgIC8vIFRoaXMgc3BlY2lmaWMgc3RvcmUgaXMgdGVsbGluZyB1cyB0byBpZ25vcmUgdGhlIHR5cGUgKGZvciBleGFtcGxlIGBjbHVzdGVyYCBzdG9yZSB3aWxsIG5vdCBHQyBzY2hlbWEncywgY291bnRzLCBldGMpCiAgICAgICAgICAgIF90aGlzMi5kZWJ1Z0xvZygiIi5jb25jYXQodHlwZSwgIjogU2tpcHBpbmcgKHR5cGUgaWdub3JlZCBieSBzdG9yZSkiKSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChpZ25vcmVUeXBlc1t0eXBlXSkgewogICAgICAgICAgICAvLyBXZSdyZSBnb2luZyB0byBhIHBsYWNlIHRoYXQgbmVlZHMgdGhlIHJlc291cmNlCiAgICAgICAgICAgIF90aGlzMi5kZWJ1Z0xvZygiIi5jb25jYXQodHlwZSwgIjogU2tpcHBpbmcgKG5hdmlnYXRpbmcgdG8gdHlwZSkiKSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChub3cgLSBsYXN0QWNjZXNzZWQgPD0gbWF4QWdlKSB7CiAgICAgICAgICAgIC8vIFRoZSByZXNvdXJjZSB3YXMgcmVjZW50bHkgYWNjZXNzZWQKICAgICAgICAgICAgX3RoaXMyLmRlYnVnTG9nKCIiLmNvbmNhdCh0eXBlLCAiOiBTa2lwcGluZyAocmVjZW50bHkgYWNjZXNzZWQpIikpOwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBpZiAoX3RoaXMyLmxhc3RSb3V0ZUNoYW5nZSAhPT0gdW5kZWZpbmVkICYmIF90aGlzMi5sYXN0Um91dGVDaGFuZ2UgPCBsYXN0QWNjZXNzZWQpIHsKICAgICAgICAgICAgLy8gVGhlIHJlc291cmNlIGlzIGJlaW5nIHVzZWQgaW4gdGhlIGN1cnJlbnQgcm91dGUvcGFnZQogICAgICAgICAgICBfdGhpczIuZGVidWdMb2coIiIuY29uY2F0KHR5cGUsICI6IFNraXBwaW5nICh1c2VkIGluIGN1cnJlbnQgcm91dGUvcGFnZSkiKSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIHZhciBjb3VudEZyb21SZXNvdXJjZSA9IChfYSA9IGdldHRlcnMuYWxsKENPVU5UKVswXS5jb3VudHNbdHlwZV0pID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zdW1tYXJ5LmNvdW50OwogICAgICAgICAgdmFyIGN1cnJlbnRDb3VudCA9IGNvdW50RnJvbVJlc291cmNlICE9PSBudWxsICYmIGNvdW50RnJvbVJlc291cmNlICE9PSB2b2lkIDAgPyBjb3VudEZyb21SZXNvdXJjZSA6IDA7CiAgICAgICAgICBpZiAoY3VycmVudENvdW50ID09PSB1bmRlZmluZWQgfHwgY3VycmVudENvdW50IDwgbWF4Q291bnQpIHsKICAgICAgICAgICAgLy8gVGhlcmUncyB0b28gZmV3IHJlc291cmNlcywgd2UgbWlnaHQgYXMgd2VsbCBrZWVwIHRoZW0gdG8gYXZvaWQgYSBuZXR3b3JrIHJlcXVlc3Qgd2hlbiB3ZSBuZWVkIHRoZW0gYWdhaW4KICAgICAgICAgICAgX3RoaXMyLmRlYnVnTG9nKCIiLmNvbmNhdCh0eXBlLCAiOiBTa2lwcGluZyAodG9vIGZldyBvZiByZXNvdXJjZSkiKSk7CiAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgIH0KICAgICAgICAgIF90aGlzMi5kZWJ1Z0xvZygiIi5jb25jYXQodHlwZSwgIjogUmVtb3ZpbmcgZnJvbSBzdG9yZSIpKTsKICAgICAgICAgIGRpc3BhdGNoKCdmb3JnZXRUeXBlJywgdHlwZSk7CiAgICAgICAgICBnY2RbdHlwZV0gPSBjdXJyZW50Q291bnQ7CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5nY0xhc3RSdW4gPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgIHRoaXMuZGVidWdMb2coIjogRXJyb3IiLCBlKTsKICAgICAgICB0aGlzLmdjTGFzdFJ1biA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogICAgICB9CiAgICAgIGlmIChPYmplY3Qua2V5cyhnY2QpLmxlbmd0aCA+IDApIHsKICAgICAgICBjb25zb2xlLmluZm8oJ0dhcmJhZ2UgQ29sbGVjdGVkIFJlc291cmNlcycsIGdjZCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICB9CiAgICAgIHRoaXMuZGVidWdMb2coIi0tLS0tLSBGaW5pc2hlZCAtLS0tLS0iKTsKICAgIH0KICAgIC8vIC0tLS0tLS0tLS0tLS0gR0MgVXBkYXRlIGxvY2FsIGNhY2hlIC0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLyoqCiAgICAgKiBVcGRhdGUgdGhlIHRpbWUgdGhhdCB0aGUgcmVzb3VyY2UgdHlwZSB3YXMgYWNjZXNzZWQKICAgICAqIFRoaXMgbmVlZHMgdG8gcnVuIGFmdGVyIGFueSB0eXBlIGluaXRpYWxpc2F0aW9uIChha2EgcmVnaXN0ZXJUeXBlKQogICAgICovCiAgfSwgewogICAga2V5OiAiZ2NVcGRhdGVMYXN0QWNjZXNzZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGdjVXBkYXRlTGFzdEFjY2Vzc2VkKHBzZXVkb0N0eCwgdHlwZSkgewogICAgICBpZiAoIXRoaXMuZ2NFbmFibGVkQWxsKHBzZXVkb0N0eCwgdHlwZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdmFyIHN0b3JlID0gcHNldWRvQ3R4LnN0YXRlLmNvbmZpZy5uYW1lc3BhY2U7CiAgICAgIGlmICghdGhpcy5sYXN0QWNjZXNzZWRDYWNoZVtzdG9yZV0pIHsKICAgICAgICB0aGlzLmxhc3RBY2Nlc3NlZENhY2hlW3N0b3JlXSA9IHt9OwogICAgICB9CiAgICAgIHRoaXMubGFzdEFjY2Vzc2VkQ2FjaGVbc3RvcmVdW3R5cGVdID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB9CiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgdGltZSB0aGUgdXNlciBsYXN0IGNoYW5nZWQgcm91dGVzCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJnY1VwZGF0ZVJvdXRlQ2hhbmdlZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2NVcGRhdGVSb3V0ZUNoYW5nZWQoKSB7CiAgICAgIHRoaXMubGFzdFJvdXRlQ2hhbmdlID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICB9CiAgICAvLyAtLS0tLS0tLS0tLS0tIEdDIHJlc2V0IC0tLS0tLS0tLS0tLS0tLS0tLS0tLQogICAgLyoqCiAgICAgKiBSZW1vdmUgYWxsIGNhY2hlZCBhY2Nlc3MgdGltZXMgZm9yIHRoZSBnaXZlbiBzdG9yZQogICAgICovCiAgfSwgewogICAga2V5OiAiZ2NSZXNldFN0b3JlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnY1Jlc2V0U3RvcmUoc3RhdGUpIHsKICAgICAgdmFyIHN0b3JlID0gc3RhdGUuY29uZmlnLm5hbWVzcGFjZTsKICAgICAgZGVsZXRlIHRoaXMubGFzdEFjY2Vzc2VkQ2FjaGVbc3RvcmVdOwogICAgICB0aGlzLmRlYnVnTG9nKCdGb3JnZXR0aW5nIFN0b3JlOicsIHN0b3JlKTsKICAgIH0KICAgIC8qKgogICAgICogUmVtb3ZlIGNhY2hlZCBhY2Nlc3MgdGltZSBmb3IgdGhlIGdpdmVuIHJlc291cmNlIHR5cGUKICAgICAqLwogIH0sIHsKICAgIGtleTogImdjUmVzZXRUeXBlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnY1Jlc2V0VHlwZShzdGF0ZSwgdHlwZSkgewogICAgICB2YXIgc3RvcmUgPSBzdGF0ZS5jb25maWcubmFtZXNwYWNlOwogICAgICBpZiAoIXRoaXMubGFzdEFjY2Vzc2VkQ2FjaGVbc3RvcmVdKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGRlbGV0ZSB0aGlzLmxhc3RBY2Nlc3NlZENhY2hlW3N0b3JlXVt0eXBlXTsKICAgICAgdGhpcy5kZWJ1Z0xvZygnRm9yZ2V0dGluZyBUeXBlOicsIHN0b3JlLCB0eXBlKTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIEdhcmJhZ2VDb2xsZWN0Owp9KCk7CkdhcmJhZ2VDb2xsZWN0LkVOQUJMRV9ERUJVR19MT0dHSU5HID0gZmFsc2U7Ci8qKgogKiBEb24ndCBydW4gR0MgaWYgaXQncyBiZWVuIHJ1biB3aXRoaW4gNSBzZWNvbmRzCiAqLwpHYXJiYWdlQ29sbGVjdC5HQ19SRV9SVU5fR0FQID0gMTAwMCAqIDU7CnZhciBnYyA9IG5ldyBHYXJiYWdlQ29sbGVjdCgpOwpleHBvcnQgZGVmYXVsdCBnYzs="},{"version":3,"names":["SETTING","COUNT","MANAGEMENT","GC_DEFAULTS","GarbageCollect","_this","_classCallCheck","cachedGcPrefs","cachedGcPrefsStamp","debugLog","ENABLE_DEBUG_LOGGING","_console","_len","arguments","length","args","Array","_key","console","debug","apply","concat","gcLastRun","getUiPerfGarbageCollection","rootState","uiPerfSetting","_a","management","types","list","find","s","id","UI_PERFORMANCE","value","undefined","stamp","metadata","generation","resourceVersion","uiPerfSettingParsed","JSON","parse","garbageCollection","lastAccessedCache","lastRouteChange","_createClass","key","gcEnabledAll","pseudoCtx","type","gcEnabledForStore","state","gcEnabledSetting","gcEnabledForType","uiPerfGarbageCollection","enabled","config","supportsGc","getters","gcIgnoreTypes","gcEnabledInterval","enabledInterval","interval","gcEnabledRoute","enabledOnNavigate","garbageCollect","ctx","_this2","ignoreTypes","now","Date","getTime","GC_RE_RUN_GAP","gcd","dispatch","clusterReady","maxAge","ageThreshold","maxCount","countThreshold","store","namespace","Object","entries","forEach","_ref","_ref2","_slicedToArray","lastAccessed","countFromResource","all","counts","summary","count","currentCount","e","keys","info","gcUpdateLastAccessed","gcUpdateRouteChanged","gcResetStore","gcResetType","gc"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc.ts"],"sourcesContent":["import { SETTING } from '@shell/config/settings';\nimport { COUNT, MANAGEMENT } from '@shell/config/types';\nimport { GC_DEFAULTS, GC_PREFERENCES } from './gc-types';\n\nclass GarbageCollect {\n  private static ENABLE_DEBUG_LOGGING = false;\n\n  /**\n   * Don't run GC if it's been run within 5 seconds\n   */\n  private static GC_RE_RUN_GAP = 1000 * 5;\n\n  private cachedGcPrefs: GC_PREFERENCES = GC_DEFAULTS;\n\n  private cachedGcPrefsStamp = '';\n\n  private debugLog = (...args: any) => {\n    if (GarbageCollect.ENABLE_DEBUG_LOGGING) {\n      console.debug('GC', ...args); // eslint-disable-line no-console\n    }\n  };\n\n  /**\n   * Time the GC last ran\n   */\n  private gcLastRun: number | null = 0;\n\n  /**\n   * To avoid JSON.parse on the `ui-performance` setting keep a local cache\n   */\n  private getUiPerfGarbageCollection = (rootState: any) => {\n    const uiPerfSetting = rootState.management.types[MANAGEMENT.SETTING]?.list.find((s: any) => s.id === SETTING.UI_PERFORMANCE);\n\n    if (!uiPerfSetting || !uiPerfSetting.value) {\n      // Could be in the process of logging out\n      return undefined;\n    }\n    const stamp = `${ uiPerfSetting.metadata.generation }-${ uiPerfSetting.metadata.resourceVersion }`;\n\n    if (this.cachedGcPrefsStamp !== stamp) {\n      this.debugLog(`Updating ${ SETTING.UI_PERFORMANCE } cache`);\n      this.cachedGcPrefsStamp = stamp;\n      const uiPerfSettingParsed = JSON.parse(uiPerfSetting.value);\n\n      this.cachedGcPrefs = uiPerfSettingParsed.garbageCollection;\n    }\n\n    return this.cachedGcPrefs;\n  };\n\n  /**\n   * The last time a resource was accessed by either find or getters style functions\n   */\n  private lastAccessedCache: {\n    [store: string]: {\n      [type: string]: number;\n    }\n  } = {}\n\n  /**\n   * Track when a logged in route changes.\n   */\n  private lastRouteChange = 0;\n\n  // ------------- GC Enabled ---------------------\n\n  gcEnabledAll(pseudoCtx: any, type: string) {\n    return this.gcEnabledForStore(pseudoCtx.state) && this.gcEnabledSetting(pseudoCtx) && this.gcEnabledForType(pseudoCtx, type);\n  }\n\n  gcEnabledSetting(pseudoCtx: any) {\n    const { rootState } = pseudoCtx;\n\n    // Don't use a getter... as we'll end up triggering ourselves again\n    const uiPerfGarbageCollection = this.getUiPerfGarbageCollection(rootState);\n\n    return uiPerfGarbageCollection?.enabled;\n  }\n\n  gcEnabledForStore(state: any) {\n    return state?.config?.supportsGc;\n  }\n\n  /**\n   * Store can require certain types are not GC'd (for example `cluster` and `schema`s, `counts`, etc)\n   */\n  gcEnabledForType(pseudoCtx: any, type: string) {\n    const { getters } = pseudoCtx;\n\n    if (!type || getters.gcIgnoreTypes[type]) {\n      return false;\n    }\n\n    return true;\n  }\n\n  gcEnabledInterval(pseudoCtx: any) {\n    const { rootState } = pseudoCtx;\n\n    // Don't use a getter... as we'll end up triggering ourselves again\n    const uiPerfGarbageCollection = this.getUiPerfGarbageCollection(rootState);\n\n    return {\n      enabled:  uiPerfGarbageCollection?.enabledInterval,\n      interval: uiPerfGarbageCollection?.interval || 0\n    };\n  }\n\n  gcEnabledRoute(pseudoCtx: any) {\n    const { rootState } = pseudoCtx;\n\n    // Don't use a getter... as we'll end up triggering ourselves again\n    const uiPerfGarbageCollection = this.getUiPerfGarbageCollection(rootState);\n\n    return uiPerfGarbageCollection?.enabledOnNavigate;\n  }\n\n  // ------------- GC (actual) ---------------------\n\n  /**\n   * Remove stale resource types from the store and stop watching them for changes\n   */\n  garbageCollect(ctx: any, ignoreTypes: {[type: string]: boolean} = {}) {\n    const now = new Date().getTime();\n\n    // Is gc currently running OR has run in the past GC_RE_RUN_GAP return early\n    if (this.gcLastRun === null || now - this.gcLastRun < GarbageCollect.GC_RE_RUN_GAP) {\n      this.debugLog('Skipping (running or recently run)', this.gcLastRun ? new Date(this.gcLastRun) : 'running');\n\n      return;\n    }\n\n    this.gcLastRun = null;\n    const gcd: {[type: string]: number} = {};\n\n    try {\n      const { getters, rootState, dispatch } = ctx;\n\n      if (!rootState.clusterReady) {\n        this.debugLog('Skipping (cluster not ready)');\n        this.gcLastRun = new Date().getTime();\n\n        return ;\n      }\n      this.debugLog(`------ Started ------`);\n\n      const uiPerfGarbageCollection = this.getUiPerfGarbageCollection(rootState);\n\n      if (!uiPerfGarbageCollection) {\n        return ;\n      }\n      const maxAge = uiPerfGarbageCollection.ageThreshold * 1000;\n      const maxCount = uiPerfGarbageCollection.countThreshold;\n\n      this.debugLog(`Max Age: ${ maxAge }. Max Count: ${ maxCount }`);// , 'Cache', this.lastAccessedCache\n\n      const store = ctx.state.config.namespace;\n\n      // this.debugLog('Cache', this.lastAccessedCache);\n\n      Object.entries((this.lastAccessedCache[store] || {})).forEach(([type, lastAccessed]) => {\n        if (!lastAccessed) {\n          // There's no last accessed time... gc is probably disabled in another way\n          this.debugLog(`${ type }: Skipping (no accessed time)`);\n\n          return;\n        }\n\n        if (!this.gcEnabledForType(ctx, type)) {\n          // This specific store is telling us to ignore the type (for example `cluster` store will not GC schema's, counts, etc)\n          this.debugLog(`${ type }: Skipping (type ignored by store)`);\n\n          return;\n        }\n\n        if (ignoreTypes[type]) {\n          // We're going to a place that needs the resource\n          this.debugLog(`${ type }: Skipping (navigating to type)`);\n\n          return;\n        }\n\n        if (now - lastAccessed <= maxAge) {\n          // The resource was recently accessed\n\n          this.debugLog(`${ type }: Skipping (recently accessed)`);\n\n          return;\n        }\n\n        if (this.lastRouteChange !== undefined && this.lastRouteChange < lastAccessed ) {\n          // The resource is being used in the current route/page\n          this.debugLog(`${ type }: Skipping (used in current route/page)`);\n\n          return;\n        }\n\n        const countFromResource = getters.all(COUNT)[0].counts[type]?.summary.count;\n        const currentCount = countFromResource ?? 0;\n\n        if (currentCount === undefined || currentCount < maxCount) {\n          // There's too few resources, we might as well keep them to avoid a network request when we need them again\n          this.debugLog(`${ type }: Skipping (too few of resource)`);\n\n          return;\n        }\n\n        this.debugLog(`${ type }: Removing from store`);\n        dispatch('forgetType', type);\n        gcd[type] = currentCount;\n      });\n\n      this.gcLastRun = new Date().getTime();\n    } catch (e) {\n      this.debugLog(`: Error`, e);\n      this.gcLastRun = new Date().getTime();\n    }\n\n    if (Object.keys(gcd).length > 0) {\n      console.info('Garbage Collected Resources', gcd); // eslint-disable-line no-console\n    }\n\n    this.debugLog(`------ Finished ------`);\n  }\n\n  // ------------- GC Update local cache ---------------------\n\n  /**\n   * Update the time that the resource type was accessed\n   * This needs to run after any type initialisation (aka registerType)\n   */\n  gcUpdateLastAccessed(pseudoCtx: any, type: string) {\n    if (!this.gcEnabledAll(pseudoCtx, type)) {\n      return;\n    }\n    const store = pseudoCtx.state.config.namespace;\n\n    if (!this.lastAccessedCache[store]) {\n      this.lastAccessedCache[store] = {};\n    }\n\n    this.lastAccessedCache[store][type] = new Date().getTime();\n  }\n\n  /**\n   * Update the time the user last changed routes\n   */\n  gcUpdateRouteChanged() {\n    this.lastRouteChange = new Date().getTime();\n  }\n\n  // ------------- GC reset ---------------------\n\n  /**\n   * Remove all cached access times for the given store\n   */\n  gcResetStore(state: any) {\n    const store = state.config.namespace;\n\n    delete this.lastAccessedCache[store];\n\n    this.debugLog('Forgetting Store:', store);\n  }\n\n  /**\n   * Remove cached access time for the given resource type\n   */\n  gcResetType(state: any, type: string) {\n    const store = state.config.namespace;\n\n    if (!this.lastAccessedCache[store]) {\n      return;\n    }\n    delete this.lastAccessedCache[store][type];\n\n    this.debugLog('Forgetting Type:', store, type);\n  }\n}\n\nconst gc = new GarbageCollect();\n\nexport default gc;\n"],"mappings":"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"}]}