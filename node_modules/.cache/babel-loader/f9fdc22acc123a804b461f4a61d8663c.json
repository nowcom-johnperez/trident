{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/nav/NamespaceFilter.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/nav/NamespaceFilter.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvWyJAQGl0ZXJhdG9yIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXQucmV0dXJuICE9IG51bGwpIGl0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7IH0gfSB9OyB9CmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLWluZGV4LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc3BsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgTkFNRVNQQUNFX0ZJTFRFUlMsIEFMTF9OQU1FU1BBQ0VTIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3ByZWZzJzsKaW1wb3J0IHsgTkFNRVNQQUNFLCBNQU5BR0VNRU5UIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IHNvcnRCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9zb3J0JzsKaW1wb3J0IHsgaXNBcnJheSwgYWRkT2JqZWN0cywgZmluZEJ5LCBmaWx0ZXJCeSB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCB7IE5BTUVTUEFDRV9GSUxURVJfQUxMX1VTRVIgYXMgQUxMX1VTRVIsIE5BTUVTUEFDRV9GSUxURVJfQUxMIGFzIEFMTCwgTkFNRVNQQUNFX0ZJTFRFUl9BTExfU1lTVEVNIGFzIEFMTF9TWVNURU0sIE5BTUVTUEFDRV9GSUxURVJfQUxMX09SUEhBTlMgYXMgQUxMX09SUEhBTlMsIE5BTUVTUEFDRV9GSUxURVJfTkFNRVNQQUNFRF9ZRVMgYXMgTkFNRVNQQUNFRF9ZRVMsIE5BTUVTUEFDRV9GSUxURVJfTkFNRVNQQUNFRF9OTyBhcyBOQU1FU1BBQ0VEX05PLCBjcmVhdGVOYW1lc3BhY2VGaWx0ZXJLZXksIE5BTUVTUEFDRV9GSUxURVJfS0lORFMsIE5BTUVTUEFDRV9GSUxURVJfTlNfRlVMTF9QUkVGSVgsIE5BTUVTUEFDRV9GSUxURVJfUF9GVUxMX1BSRUZJWCB9IGZyb20gJ0BzaGVsbC91dGlscy9uYW1lc3BhY2UtZmlsdGVyJzsKaW1wb3J0IHsgS0VZIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3BsYXRmb3JtJzsKaW1wb3J0IHBBbmRORmlsdGVyaW5nIGZyb20gJ0BzaGVsbC91dGlscy9wcm9qZWN0QW5kTmFtZXNwYWNlRmlsdGVyaW5nLnV0aWxzJzsKaW1wb3J0IHsgU0VUVElORyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2V0dGluZ3MnOwp2YXIgZm9yY2VkTmFtZXNwYWNlVmFsaWRUeXBlcyA9IFtOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLkRJVklERVIsIE5BTUVTUEFDRV9GSUxURVJfS0lORFMuUFJPSkVDVCwgTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5OQU1FU1BBQ0VdOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGlzT3BlbjogZmFsc2UsCiAgICAgIGZpbHRlcjogJycsCiAgICAgIGhpZGRlbjogMCwKICAgICAgdG90YWw6IDAsCiAgICAgIGFjdGl2ZUVsZW1lbnQ6IG51bGwsCiAgICAgIGNhY2hlZEZpbHRlcmVkOiBbXSwKICAgICAgTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUzogTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUywKICAgICAgbmFtZXNwYWNlRmlsdGVyTW9kZTogdW5kZWZpbmVkCiAgICB9OwogIH0sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmQnLCB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5TRVRUSU5HLAogICAgICAgICAgICAgIGlkOiBTRVRUSU5HLlVJX1BFUkZPUk1BTkNFCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBfdGhpcy5uYW1lc3BhY2VGaWx0ZXJNb2RlID0gX3RoaXMuY2FsY05hbWVzcGFjZUZpbHRlck1vZGUoKTsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2N1cnJlbnRQcm9kdWN0J10pKSwge30sIHsKICAgIGhhc0ZpbHRlcjogZnVuY3Rpb24gaGFzRmlsdGVyKCkgewogICAgICByZXR1cm4gdGhpcy5maWx0ZXIubGVuZ3RoID4gMDsKICAgIH0sCiAgICBmaWx0ZXJlZDogZnVuY3Rpb24gZmlsdGVyZWQoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzLAogICAgICAgIF9vdXQ7CiAgICAgIHZhciBvdXQgPSB0aGlzLm9wdGlvbnM7CiAgICAgIG91dCA9IG91dC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICB2YXIgX3RoaXMyJG5hbWVzcGFjZUZpbHRlOwogICAgICAgIC8vIEZpbHRlciBvdXQgYW55dGhpbmcgbm90IGFwcGxpY2FibGUgdG8gc2luZ2xldG9uIHNlbGVjdGlvbgogICAgICAgIGlmICgoX3RoaXMyJG5hbWVzcGFjZUZpbHRlID0gX3RoaXMyLm5hbWVzcGFjZUZpbHRlck1vZGUpICE9PSBudWxsICYmIF90aGlzMiRuYW1lc3BhY2VGaWx0ZSAhPT0gdm9pZCAwICYmIF90aGlzMiRuYW1lc3BhY2VGaWx0ZS5sZW5ndGgpIHsKICAgICAgICAgIC8vIFdlIGFsd2F5cyBzaG93IGRpdmlkZXJzLCBwcm9qZWN0cyBhbmQgbmFtZXNwYWNlcwogICAgICAgICAgaWYgKCFmb3JjZWROYW1lc3BhY2VWYWxpZFR5cGVzLmluY2x1ZGVzKGl0ZW0ua2luZCkpIHsKICAgICAgICAgICAgdmFyIHZhbGlkQ3VzdG9tVHlwZSA9IF90aGlzMi5uYW1lc3BhY2VGaWx0ZXJNb2RlLmZpbmQoZnVuY3Rpb24gKHByZWZpeCkgewogICAgICAgICAgICAgIHJldHVybiBpdGVtLmtpbmQuc3RhcnRzV2l0aChwcmVmaXgpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgaWYgKCF2YWxpZEN1c3RvbVR5cGUpIHsKICAgICAgICAgICAgICAvLyBIaWRlIGFueSBpbnZhbGlkIG9wdGlvbiB0aGF0J3Mgbm90IHNlbGVjdGVkCiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMi52YWx1ZS5maW5kSW5kZXgoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgICAgIHJldHVybiB2LmlkID09PSBpdGVtLmlkOwogICAgICAgICAgICAgIH0pID49IDA7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIEZpbHRlciBieSB0aGUgY3VycmVudCBmaWx0ZXIKICAgICAgICBpZiAoX3RoaXMyLmhhc0ZpbHRlcikgewogICAgICAgICAgcmV0dXJuIGl0ZW0ua2luZCAhPT0gTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5TUEVDSUFMICYmIGl0ZW0ubGFiZWwudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhfdGhpczIuZmlsdGVyLnRvTG93ZXJDYXNlKCkpOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSk7CiAgICAgIGlmICgoKF9vdXQgPSBvdXQpID09PSBudWxsIHx8IF9vdXQgPT09IHZvaWQgMCB8fCAoX291dCA9IF9vdXRbMF0pID09PSBudWxsIHx8IF9vdXQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vdXQua2luZCkgPT09IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuRElWSURFUikgewogICAgICAgIG91dC5zcGxpY2UoMCwgMSk7CiAgICAgIH0KICAgICAgdmFyIG1hcHBlZCA9IHRoaXMudmFsdWUucmVkdWNlKGZ1bmN0aW9uIChtLCB2KSB7CiAgICAgICAgbVt2LmlkXSA9IHY7CiAgICAgICAgcmV0dXJuIG07CiAgICAgIH0sIHt9KTsKCiAgICAgIC8vIE1hcmsgYWxsIG9mIHRoZSBzZWxlY3RlZCBvcHRpb25zCiAgICAgIG91dC5mb3JFYWNoKGZ1bmN0aW9uIChpKSB7CiAgICAgICAgdmFyIF90aGlzMiRuYW1lc3BhY2VGaWx0ZTI7CiAgICAgICAgaS5zZWxlY3RlZCA9ICEhbWFwcGVkW2kuaWRdIHx8IGkuaWQgPT09IEFMTCAmJiBfdGhpczIudmFsdWUgJiYgX3RoaXMyLnZhbHVlLmxlbmd0aCA9PT0gMDsKICAgICAgICBpLmVsZW1lbnRJZCA9IChpLmlkIHx8ICcnKS5yZXBsYWNlKCc6Ly8nLCAnXycpOwogICAgICAgIGkuZW5hYmxlZCA9IHRydWU7CiAgICAgICAgLy8gQXJlIHdlIGluIHJlc3RyaWN0ZWQgcmVzb3VyY2UgdHlwZSBtb2RlLCBpZiBzbyBpcyB0aGlzIGFuIGFsbG93ZWQgdHlwZT8KICAgICAgICBpZiAoKF90aGlzMiRuYW1lc3BhY2VGaWx0ZTIgPSBfdGhpczIubmFtZXNwYWNlRmlsdGVyTW9kZSkgIT09IG51bGwgJiYgX3RoaXMyJG5hbWVzcGFjZUZpbHRlMiAhPT0gdm9pZCAwICYmIF90aGlzMiRuYW1lc3BhY2VGaWx0ZTIubGVuZ3RoKSB7CiAgICAgICAgICB2YXIgaXNMYXN0U2VsZWN0ZWQgPSBpLnNlbGVjdGVkICYmIChpLmlkID09PSBBTEwgfHwgX3RoaXMyLnZhbHVlLmxlbmd0aCA9PT0gMSk7CiAgICAgICAgICB2YXIga2luZEFsbG93ZWQgPSBfdGhpczIubmFtZXNwYWNlRmlsdGVyTW9kZS5maW5kKGZ1bmN0aW9uIChmKSB7CiAgICAgICAgICAgIHJldHVybiBmID09PSBpLmtpbmQ7CiAgICAgICAgICB9KTsKICAgICAgICAgIHZhciBpc05vdEluUHJvamVjdEdyb3VwID0gaS5pZCA9PT0gQUxMX09SUEhBTlM7CiAgICAgICAgICBpLmVuYWJsZWQgPSAhaXNMYXN0U2VsZWN0ZWQgJiYga2luZEFsbG93ZWQgJiYgIWlzTm90SW5Qcm9qZWN0R3JvdXA7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICB0b29sdGlwOiBmdW5jdGlvbiB0b29sdGlwKCkgewogICAgICBpZiAodGhpcy5pc09wZW4gfHwgdGhpcy50b3RhbCArIHRoaXMuaGlkZGVuID09PSAwKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgdmFyIHRvb2x0aXAgPSAnPGRpdiBjbGFzcz0ibnMtZmlsdGVyLXRvb2x0aXAiPic7CiAgICAgICh0aGlzLnZhbHVlIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgdG9vbHRpcCArPSAiPGRpdiBjbGFzcz1cIm5zLWZpbHRlci10b29sdGlwLWl0ZW1cIj48ZGl2PiIuY29uY2F0KHYubGFiZWwsICI8L2Rpdj48L2Rpdj4iKTsKICAgICAgfSk7CiAgICAgIHRvb2x0aXAgKz0gJzwvZGl2Pic7CiAgICAgIHJldHVybiB7CiAgICAgICAgY29udGVudDogdG9vbHRpcCwKICAgICAgICBwbGFjZW1lbnQ6ICdib3R0b20nLAogICAgICAgIGRlbGF5OiB7CiAgICAgICAgICBzaG93OiA1MDAKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAga2V5OiBmdW5jdGlvbiBrZXkoKSB7CiAgICAgIHJldHVybiBjcmVhdGVOYW1lc3BhY2VGaWx0ZXJLZXkodGhpcy4kc3RvcmUuZ2V0dGVyc1snY2x1c3RlcklkJ10sIHRoaXMuY3VycmVudFByb2R1Y3QpOwogICAgfSwKICAgIG9wdGlvbnM6IGZ1bmN0aW9uIG9wdGlvbnMoKSB7CiAgICAgIHZhciBfdGhpcyRjdXJyZW50UHJvZHVjdCwKICAgICAgICBfdGhpcyRjdXJyZW50UHJvZHVjdDIsCiAgICAgICAgX3RoaXMkY3VycmVudFByb2R1Y3QzLAogICAgICAgIF90aGlzMyA9IHRoaXM7CiAgICAgIHZhciB0ID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi90J107CiAgICAgIHZhciBvdXQgPSBbXTsKICAgICAgdmFyIHBhcmFtcyA9IF9vYmplY3RTcHJlYWQoe30sIHRoaXMuJHJvdXRlLnBhcmFtcyk7CiAgICAgIHZhciByZXNvdXJjZSA9IHBhcmFtcy5yZXNvdXJjZTsKICAgICAgLy8gU29tZXRpbWVzLCBkaWZmZXJlbnQgcGFnZXMgbWF5IGhhdmUgZGlmZmVyZW50IG5hbWVzcGFjZXMgdG8gZmlsdGVyCiAgICAgIHZhciBub3RGaWx0ZXJOYW1lc3BhY2VzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1sidHlwZS1tYXAvb3B0aW9uc0ZvciJdKHJlc291cmNlKS5ub3RGaWx0ZXJOYW1lc3BhY2UgfHwgW107CgogICAgICAvLyBUT0RPOiBBZGQgcmV0dXJuIGluZm8KICAgICAgaWYgKChfdGhpcyRjdXJyZW50UHJvZHVjdCA9IHRoaXMuY3VycmVudFByb2R1Y3QpICE9PSBudWxsICYmIF90aGlzJGN1cnJlbnRQcm9kdWN0ICE9PSB2b2lkIDAgJiYgX3RoaXMkY3VycmVudFByb2R1Y3QuY3VzdG9tTmFtZXNwYWNlRmlsdGVyICYmIChfdGhpcyRjdXJyZW50UHJvZHVjdDIgPSB0aGlzLmN1cnJlbnRQcm9kdWN0KSAhPT0gbnVsbCAmJiBfdGhpcyRjdXJyZW50UHJvZHVjdDIgIT09IHZvaWQgMCAmJiBfdGhpcyRjdXJyZW50UHJvZHVjdDIuaW5TdG9yZSkgewogICAgICAgIC8vIFNvbWV0aW1lcyB0aGUgY29tcG9uZW50IGNhbiBzaG93IGJlZm9yZSB0aGUgJ2N1cnJlbnRQcm9kdWN0JyBoYXMgY2F1Z2h0IHVwLCBzbyBhY2Nlc3MgdGhlIHByb2R1Y3QgdmlhIHRoZSBnZXR0ZXIgcmF0aGVyCiAgICAgICAgLy8gdGhhbiBjYWNoaW5nIGl0IGluIHRoZSBgZmV0Y2hgCgogICAgICAgIC8vIFRoZSBuYW1lc3BhY2UgZGlzcGxheSBvbiB0aGUgbGlzdCBhbmQgZWRpdCBwYWdlcyBzaG91bGQgYmUgdGhlIHNhbWUgYXMgaW4gdGhlIG5hbWVzcGFjZUZpbHRlciBjb21wb25lbnQKICAgICAgICBpZiAodGhpcy4kc3RvcmUuZ2V0dGVyc1siIi5jb25jYXQodGhpcy5jdXJyZW50UHJvZHVjdC5pblN0b3JlLCAiL2ZpbHRlck5hbWVzcGFjZSIpXSkgewogICAgICAgICAgdmFyIGFsbE5hbWVzcGFjZXMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyIiLmNvbmNhdCh0aGlzLmN1cnJlbnRQcm9kdWN0LmluU3RvcmUsICIvZmlsdGVyTmFtZXNwYWNlIildKG5vdEZpbHRlck5hbWVzcGFjZXMpOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCdjaGFuZ2VBbGxOYW1lc3BhY2VzJywgYWxsTmFtZXNwYWNlcyk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWyIiLmNvbmNhdCh0aGlzLmN1cnJlbnRQcm9kdWN0LmluU3RvcmUsICIvbmFtZXNwYWNlRmlsdGVyT3B0aW9ucyIpXSh7CiAgICAgICAgICBhZGROYW1lc3BhY2U6IGFkZE5hbWVzcGFjZSwKICAgICAgICAgIGRpdmlkZXI6IGRpdmlkZXIsCiAgICAgICAgICBub3RGaWx0ZXJOYW1lc3BhY2VzOiBub3RGaWx0ZXJOYW1lc3BhY2VzCiAgICAgICAgfSk7CiAgICAgIH0KCiAgICAgIC8vIFRPRE86IEFkZCByZXR1cm4gaW5mbwogICAgICBpZiAoISgoX3RoaXMkY3VycmVudFByb2R1Y3QzID0gdGhpcy5jdXJyZW50UHJvZHVjdCkgIT09IG51bGwgJiYgX3RoaXMkY3VycmVudFByb2R1Y3QzICE9PSB2b2lkIDAgJiYgX3RoaXMkY3VycmVudFByb2R1Y3QzLmhpZGVTeXN0ZW1SZXNvdXJjZXMpKSB7CiAgICAgICAgb3V0ID0gW3sKICAgICAgICAgIGlkOiBBTEwsCiAgICAgICAgICBraW5kOiBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUwsCiAgICAgICAgICBsYWJlbDogdCgnbmF2Lm5zLmFsbCcpCiAgICAgICAgfSwgewogICAgICAgICAgaWQ6IEFMTF9VU0VSLAogICAgICAgICAga2luZDogTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5TUEVDSUFMLAogICAgICAgICAgbGFiZWw6IHQoJ25hdi5ucy51c2VyJykKICAgICAgICB9LCB7CiAgICAgICAgICBpZDogQUxMX1NZU1RFTSwKICAgICAgICAgIGtpbmQ6IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuU1BFQ0lBTCwKICAgICAgICAgIGxhYmVsOiB0KCduYXYubnMuc3lzdGVtJykKICAgICAgICB9LCB7CiAgICAgICAgICBpZDogTkFNRVNQQUNFRF9ZRVMsCiAgICAgICAgICBraW5kOiBOQU1FU1BBQ0VfRklMVEVSX0tJTkRTLlNQRUNJQUwsCiAgICAgICAgICBsYWJlbDogdCgnbmF2Lm5zLm5hbWVzcGFjZWQnKQogICAgICAgIH0sIHsKICAgICAgICAgIGlkOiBOQU1FU1BBQ0VEX05PLAogICAgICAgICAga2luZDogTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5TUEVDSUFMLAogICAgICAgICAgbGFiZWw6IHQoJ25hdi5ucy5jbHVzdGVyTGV2ZWwnKQogICAgICAgIH1dOwogICAgICAgIGRpdmlkZXIob3V0KTsKICAgICAgfQogICAgICB2YXIgaW5TdG9yZSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRTdG9yZSddKE5BTUVTUEFDRSk7CiAgICAgIGlmICghaW5TdG9yZSkgewogICAgICAgIHJldHVybiBvdXQ7CiAgICAgIH0KICAgICAgdmFyIG5hbWVzcGFjZXMgPSBzb3J0QnkodGhpcy4kc3RvcmUuZ2V0dGVyc1siIi5jb25jYXQoaW5TdG9yZSwgIi9hbGwiKV0oTkFNRVNQQUNFKSwgWyduYW1lRGlzcGxheSddKTsKICAgICAgbmFtZXNwYWNlcyA9IHRoaXMuZmlsdGVyTmFtZXNwYWNlcyhuYW1lc3BhY2VzKTsKCiAgICAgIC8vIGlzUmFuY2hlciA9IG1nbXQgc2NoZW1hcyBhcmUgbG9hZGVkIGFuZCB0aGVyZSdzIGEgcHJvamVjdCBzY2hlbWEKICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnNbJ2lzUmFuY2hlciddKSB7CiAgICAgICAgdmFyIGNsdXN0ZXIgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50Q2x1c3RlciddOwogICAgICAgIHZhciBwcm9qZWN0cyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYWxsJ10oTUFOQUdFTUVOVC5QUk9KRUNUKTsKICAgICAgICBwcm9qZWN0cyA9IHByb2plY3RzLmZpbHRlcihmdW5jdGlvbiAocCkgewogICAgICAgICAgdmFyIF90aGlzMyRjdXJyZW50UHJvZHVjdDsKICAgICAgICAgIHJldHVybiAoX3RoaXMzJGN1cnJlbnRQcm9kdWN0ID0gX3RoaXMzLmN1cnJlbnRQcm9kdWN0KSAhPT0gbnVsbCAmJiBfdGhpczMkY3VycmVudFByb2R1Y3QgIT09IHZvaWQgMCAmJiBfdGhpczMkY3VycmVudFByb2R1Y3QuaGlkZVN5c3RlbVJlc291cmNlcyA/ICFwLmlzU3lzdGVtICYmIHAuc3BlYy5jbHVzdGVyTmFtZSA9PT0gY2x1c3Rlci5pZCA6IHAuc3BlYy5jbHVzdGVyTmFtZSA9PT0gY2x1c3Rlci5pZDsKICAgICAgICB9KTsKICAgICAgICBwcm9qZWN0cyA9IHNvcnRCeShmaWx0ZXJCeShwcm9qZWN0cywgJ3NwZWMuY2x1c3Rlck5hbWUnLCBjbHVzdGVyLmlkKSwgWyduYW1lRGlzcGxheSddKTsKICAgICAgICB2YXIgcHJvamVjdHNCeUlkID0ge307CiAgICAgICAgdmFyIG5hbWVzcGFjZXNCeVByb2plY3QgPSB7fTsKICAgICAgICB2YXIgZmlyc3RQcm9qZWN0ID0gdHJ1ZTsKICAgICAgICBuYW1lc3BhY2VzQnlQcm9qZWN0W251bGxdID0gW107IC8vIEZvciBuYW1lc3BhY2VzIG5vdCBpbiBhIHByb2plY3QKICAgICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocHJvamVjdHMpLAogICAgICAgICAgX3N0ZXA7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBwcm9qZWN0ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgIHByb2plY3RzQnlJZFtwcm9qZWN0Lm1ldGFkYXRhLm5hbWVdID0gcHJvamVjdDsKICAgICAgICAgIH0KICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgfQogICAgICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobmFtZXNwYWNlcyksCiAgICAgICAgICBfc3RlcDI7CiAgICAgICAgdHJ5IHsKICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgIHZhciBuYW1lc3BhY2UgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgICAgIHZhciBwcm9qZWN0SWQgPSBuYW1lc3BhY2UucHJvamVjdElkOwogICAgICAgICAgICBpZiAoIXByb2plY3RJZCB8fCAhcHJvamVjdHNCeUlkW3Byb2plY3RJZF0pIHsKICAgICAgICAgICAgICAvLyBJZiB0aGVyZSdzIGEgcHJvamVjdElkIGJ1dCB0aGF0IHByb2plY3QgZG9lc24ndCBleGlzdCwgdHJlYXQgaXQgbGlrZSBubyBwcm9qZWN0CiAgICAgICAgICAgICAgcHJvamVjdElkID0gbnVsbDsKICAgICAgICAgICAgfQogICAgICAgICAgICB2YXIgZW50cnkgPSBuYW1lc3BhY2VzQnlQcm9qZWN0W3Byb2plY3RJZF07CiAgICAgICAgICAgIGlmICghZW50cnkpIHsKICAgICAgICAgICAgICBlbnRyeSA9IFtdOwogICAgICAgICAgICAgIG5hbWVzcGFjZXNCeVByb2plY3RbbmFtZXNwYWNlLnByb2plY3RJZF0gPSBlbnRyeTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbnRyeS5wdXNoKG5hbWVzcGFjZSk7CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgfQogICAgICAgIHZhciBfaXRlcmF0b3IzID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocHJvamVjdHMpLAogICAgICAgICAgX3N0ZXAzOwogICAgICAgIHRyeSB7CiAgICAgICAgICBmb3IgKF9pdGVyYXRvcjMucygpOyAhKF9zdGVwMyA9IF9pdGVyYXRvcjMubigpKS5kb25lOykgewogICAgICAgICAgICB2YXIgX3Byb2plY3QgPSBfc3RlcDMudmFsdWU7CiAgICAgICAgICAgIHZhciBpZCA9IF9wcm9qZWN0Lm1ldGFkYXRhLm5hbWU7CiAgICAgICAgICAgIGlmIChmaXJzdFByb2plY3QpIHsKICAgICAgICAgICAgICBmaXJzdFByb2plY3QgPSBmYWxzZTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBkaXZpZGVyKG91dCk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgICAgIGlkOiAiIi5jb25jYXQoTkFNRVNQQUNFX0ZJTFRFUl9QX0ZVTExfUFJFRklYKS5jb25jYXQoaWQpLAogICAgICAgICAgICAgIGtpbmQ6IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuUFJPSkVDVCwKICAgICAgICAgICAgICBsYWJlbDogdCgnbmF2Lm5zLnByb2plY3QnLCB7CiAgICAgICAgICAgICAgICBuYW1lOiBfcHJvamVjdC5uYW1lRGlzcGxheQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgZm9yVGhpc1Byb2plY3QgPSBuYW1lc3BhY2VzQnlQcm9qZWN0W2lkXSB8fCBbXTsKICAgICAgICAgICAgYWRkTmFtZXNwYWNlKG91dCwgZm9yVGhpc1Byb2plY3QpOwogICAgICAgICAgfQogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICAgIH0KICAgICAgICB2YXIgb3JwaGFucyA9IG5hbWVzcGFjZXNCeVByb2plY3RbbnVsbF07CiAgICAgICAgaWYgKG9ycGhhbnMubGVuZ3RoKSB7CiAgICAgICAgICBpZiAoIWZpcnN0UHJvamVjdCkgewogICAgICAgICAgICBkaXZpZGVyKG91dCk7CiAgICAgICAgICB9CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIGlkOiBBTExfT1JQSEFOUywKICAgICAgICAgICAga2luZDogTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5QUk9KRUNULAogICAgICAgICAgICBsYWJlbDogdCgnbmF2Lm5zLm9ycGhhbicpLAogICAgICAgICAgICBkaXNhYmxlZDogdHJ1ZQogICAgICAgICAgfSk7CiAgICAgICAgICBhZGROYW1lc3BhY2Uob3V0LCBvcnBoYW5zKTsKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgYWRkTmFtZXNwYWNlKG91dCwgbmFtZXNwYWNlcyk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgICAgZnVuY3Rpb24gYWRkTmFtZXNwYWNlKG91dCwgbmFtZXNwYWNlcykgewogICAgICAgIGlmICghaXNBcnJheShuYW1lc3BhY2VzKSkgewogICAgICAgICAgbmFtZXNwYWNlcyA9IFtuYW1lc3BhY2VzXTsKICAgICAgICB9CiAgICAgICAgYWRkT2JqZWN0cyhvdXQsIG5hbWVzcGFjZXMubWFwKGZ1bmN0aW9uIChuYW1lc3BhY2UpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGlkOiAiIi5jb25jYXQoTkFNRVNQQUNFX0ZJTFRFUl9OU19GVUxMX1BSRUZJWCkuY29uY2F0KG5hbWVzcGFjZS5pZCksCiAgICAgICAgICAgIGtpbmQ6IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuTkFNRVNQQUNFLAogICAgICAgICAgICBsYWJlbDogdCgnbmF2Lm5zLm5hbWVzcGFjZScsIHsKICAgICAgICAgICAgICBuYW1lOiBuYW1lc3BhY2UubmFtZURpc3BsYXkKICAgICAgICAgICAgfSkKICAgICAgICAgIH07CiAgICAgICAgfSkpOwogICAgICB9CiAgICAgIGZ1bmN0aW9uIGRpdmlkZXIob3V0KSB7CiAgICAgICAgb3V0LnB1c2goewogICAgICAgICAga2luZDogTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5ESVZJREVSLAogICAgICAgICAgbGFiZWw6ICJEaXZpZGVyICIuY29uY2F0KG91dC5sZW5ndGgpLAogICAgICAgICAgZGlzYWJsZWQ6IHRydWUKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIGlzU2luZ2xlU3BlY2lhbDogZnVuY3Rpb24gaXNTaW5nbGVTcGVjaWFsKCkgewogICAgICByZXR1cm4gdGhpcy52YWx1ZSAmJiB0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMSAmJiB0aGlzLnZhbHVlWzBdLmtpbmQgPT09IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuU1BFQ0lBTDsKICAgIH0sCiAgICB2YWx1ZTogewogICAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgICAvLyBVc2UgbGFzdCBwaWNrZWQgZmlsdGVyIGZyb20gdXNlciBwcmVmZXJlbmNlcwogICAgICAgIHZhciBwcmVmcyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ByZWZzL2dldCddKE5BTUVTUEFDRV9GSUxURVJTKTsKICAgICAgICB2YXIgdmFsdWVzID0gcHJlZnMgJiYgcHJlZnNbdGhpcy5rZXldID8gcHJlZnNbdGhpcy5rZXldIDogdGhpcy5kZWZhdWx0T3B0aW9uKCk7CiAgICAgICAgdmFyIG9wdGlvbnMgPSB0aGlzLm9wdGlvbnM7CgogICAgICAgIC8vIFJlbW92ZSB2YWx1ZXMgdGhhdCBhcmUgbm90IHZhbGlkIG9wdGlvbnMKICAgICAgICB2YXIgZmlsdGVycyA9IHZhbHVlcy5tYXAoZnVuY3Rpb24gKHZhbHVlKSB7CiAgICAgICAgICByZXR1cm4gZmluZEJ5KG9wdGlvbnMsICdpZCcsIHZhbHVlKTsKICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgIHJldHVybiAhIXg7CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZpbHRlcnM7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KG5ldSkgewogICAgICAgIHZhciBfdGhpczQgPSB0aGlzOwogICAgICAgIHZhciBvbGQgPSAodGhpcy52YWx1ZSB8fCBbXSkuc2xpY2UoKTsKICAgICAgICBuZXUgPSBuZXUuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICByZXR1cm4gISF4LmlkOwogICAgICAgIH0pOwogICAgICAgIHZhciBsYXN0ID0gbmV1W25ldS5sZW5ndGggLSAxXTsKICAgICAgICB2YXIgbGFzdElzU3BlY2lhbCA9IChsYXN0ID09PSBudWxsIHx8IGxhc3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGxhc3Qua2luZCkgPT09IE5BTUVTUEFDRV9GSUxURVJfS0lORFMuU1BFQ0lBTDsKICAgICAgICB2YXIgaGFkVXNlciA9ICEhb2xkLmZpbmQoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgIHJldHVybiB4LmlkID09PSBBTExfVVNFUjsKICAgICAgICB9KTsKICAgICAgICB2YXIgaGFkQWxsID0gISFvbGQuZmluZChmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHguaWQgPT09IEFMTDsKICAgICAgICB9KTsKICAgICAgICBpZiAobGFzdElzU3BlY2lhbCkgewogICAgICAgICAgbmV1ID0gW2xhc3RdOwogICAgICAgIH0KICAgICAgICBpZiAobmV1Lmxlbmd0aCA+IDEpIHsKICAgICAgICAgIG5ldSA9IG5ldS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgcmV0dXJuIHgua2luZCAhPT0gTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5TUEVDSUFMOwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmIChuZXUuZmluZChmdW5jdGlvbiAoeCkgewogICAgICAgICAgcmV0dXJuIHguaWQgPT09ICdhbGwnOwogICAgICAgIH0pKSB7CiAgICAgICAgICBuZXUgPSBbXTsKICAgICAgICB9CiAgICAgICAgdmFyIGlkczsKCiAgICAgICAgLy8gSWYgdGhlcmUgd2FzIHNvbWV0aGluZyBzZWxlY3RlZCBhbmQgeW91IHJlbW92ZSBpdCwgZ28gYmFjayB0byB1c2VyIGJ5IGRlZmF1bHQKICAgICAgICAvLyBVbmxlc3MgaXQgd2FzIHVzZXIgb3IgYWxsCiAgICAgICAgaWYgKG5ldS5sZW5ndGggPT09IDAgJiYgIWhhZFVzZXIgJiYgIWhhZEFsbCkgewogICAgICAgICAgaWRzID0gdGhpcy5kZWZhdWx0T3B0aW9uKCk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGlkcyA9IG5ldS5tYXAoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgcmV0dXJuIHguaWQ7CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgICAgX3RoaXM0LiRzdG9yZS5kaXNwYXRjaCgnc3dpdGNoTmFtZXNwYWNlcycsIHsKICAgICAgICAgICAgaWRzOiBpZHMsCiAgICAgICAgICAgIGtleTogX3RoaXM0LmtleQogICAgICAgICAgfSk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0KICB9KSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdGhpcy5yZW1vdmVDbG9zZUtleUhhbmRsZXIoKTsKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uIG1vdW50ZWQoKSB7CiAgICB0aGlzLmxheW91dCgpOwogIH0sCiAgd2F0Y2g6IHsKICAgIHZhbHVlOiBmdW5jdGlvbiB2YWx1ZShuZXUpIHsKICAgICAgdGhpcy5sYXlvdXQoKTsKICAgIH0sCiAgICAvKioKICAgICAqIFdoZW4gdGhlcmUgYXJlIHRob3VzYW5kcyBvZiBlbnRyaWVzIGNlcnRhaW4gYWN0aW9ucyAoZHJvcCBkb3duIG9wZW5lZCwgc2VsZWN0aW9uIGNoYW5nZWQsIGV0YykgdGFrZSBhIGxvbmcgdGltZSB0byBjb21wbGV0ZSAodXB3YXJkcwogICAgICogb2YgNSBzZWNvbmRzKQogICAgICoKICAgICAqIFRoaXMgaXMgY2F1c2VkIGJ5IGNodXJuIG9mIHRoZSBmaWx0ZXJlZCBhbmQgb3B0aW9ucyBjb21wdXRlZCBwcm9wZXJ0aWVzIGNhdXNpbmcgbXVsdGlwbGUgcmVuZGVycyBmb3IgZWFjaCBhY3Rpb24uCiAgICAgKgogICAgICogVG8gYnJlYWsgdGhpcyBtdWx0aXBsZS1yZW5kZXIgcGVyIGN5Y2xlIGJlaGF2aW91ciBkZXRhdGNoIGBmaWx0ZXJlZGAgZnJvbSB0aGUgdmFsdWUgdXNlZCBpbiBgdi1mb3JgLgogICAgICoKICAgICAqLwogICAgZmlsdGVyZWQ6IGZ1bmN0aW9uIGZpbHRlcmVkKG5ldSkgewogICAgICBpZiAoISFuZXUpIHsKICAgICAgICB0aGlzLmNhY2hlZEZpbHRlcmVkID0gbmV1OwogICAgICB9CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBmaWx0ZXJOYW1lc3BhY2VzOiBmdW5jdGlvbiBmaWx0ZXJOYW1lc3BhY2VzKG5hbWVzcGFjZXMpIHsKICAgICAgaWYgKHRoaXMuJHN0b3JlLmdldHRlcnNbJ3ByZWZzL2dldCddKEFMTF9OQU1FU1BBQ0VTKSkgewogICAgICAgIC8vIElmIGFsbCBuYW1lc3BhY2VzIG9wdGlvbnMgYXJlIHR1cm5lZCBvbiBpbiB0aGUgdXNlciBwcmVmZXJlbmNlcywKICAgICAgICAvLyByZXR1cm4gYWxsIG5hbWVzcGFjZXMgaW5jbHVkaW5nIHN5c3RlbSBuYW1lc3BhY2VzIGFuZCBSQkFDCiAgICAgICAgLy8gbWFuYWdlbWVudCBuYW1lc3BhY2VzLgogICAgICAgIHJldHVybiBuYW1lc3BhY2VzOwogICAgICB9CiAgICAgIHJldHVybiBuYW1lc3BhY2VzLmZpbHRlcihmdW5jdGlvbiAobmFtZXNwYWNlKSB7CiAgICAgICAgLy8gT3RoZXJ3aXNlIG9ubHkgZmlsdGVyIG91dCBvYnNjdXJlIG5hbWVzcGFjZXMsIHN1Y2ggYXMgbmFtZXNwYWNlcwogICAgICAgIC8vIHRoYXQgUmFuY2hlciB1c2VzIHRvIG1hbmFnZSBSQkFDIGZvciBwcm9qZWN0cywgd2hpY2ggc2hvdWxkIG5vdCBiZQogICAgICAgIC8vIGVkaXRlZCBvciBkZWxldGVkIGJ5IFJhbmNoZXIgdXNlcnMuCiAgICAgICAgcmV0dXJuICFuYW1lc3BhY2UuaXNPYnNjdXJlOwogICAgICB9KTsKICAgIH0sCiAgICAvLyBMYXlvdXQgdGhlIGNvbnRlbnQgaW4gdGhlIGRyb3Bkb3duIGJveCB0byBiZXN0IHVzZSB0aGUgc3BhY2UgdG8gc2hvdyB0aGUgc2VsZWN0aW9uCiAgICBsYXlvdXQ6IGZ1bmN0aW9uIGxheW91dCgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHRoaXMuJG5leHRUaWNrKGZ1bmN0aW9uICgpIHsKICAgICAgICAvLyBPbmUgd2UgaGF2ZSByZS1yZW5kZXJlZCwgc2VlIHdoYXQgd2UgY2FuIGZpdCBpbiB0aGUgY29udHJvbCB0byBzaG93IHRoZSBzZWxlY3RlZCBuYW1lc3BhY2VzCiAgICAgICAgaWYgKF90aGlzNS4kcmVmcy52YWx1ZXMpIHsKICAgICAgICAgIHZhciBjb250YWluZXIgPSBfdGhpczUuJHJlZnMudmFsdWVzOwogICAgICAgICAgdmFyIG92ZXJmbG93ID0gY29udGFpbmVyLnNjcm9sbFdpZHRoID4gY29udGFpbmVyLm9mZnNldFdpZHRoOwogICAgICAgICAgdmFyIGhpZGRlbiA9IDA7CiAgICAgICAgICB2YXIgZHJvcGRvd24gPSBfdGhpczUuJHJlZnMuZHJvcGRvd247CiAgICAgICAgICAvLyBSZW1vdmUgcGFkZGluZyBhbmQgZHJvcGRvd24gYXJyb3cgc2l6ZQogICAgICAgICAgdmFyIG1heFdpZHRoID0gZHJvcGRvd24ub2Zmc2V0V2lkdGggLSAyMCAtIDI0OwoKICAgICAgICAgIC8vIElmIHdlIGFyZSBvdmVyZmxvd2luZywgdGhlbiBhbGxvdyBzb21lIHNwYWNlIGZvciB0aGUgK04gaW5kaWNhdG9yCiAgICAgICAgICB2YXIgaXRlbUNvdW50ID0gX3RoaXM1LiRyZWZzLnZhbHVlID8gX3RoaXM1LiRyZWZzLnZhbHVlLmxlbmd0aCA6IDA7CiAgICAgICAgICB2YXIgY3VycmVudFdpZHRoID0gMDsKICAgICAgICAgIHZhciBzaG93ID0gdHJ1ZTsKICAgICAgICAgIF90aGlzNS50b3RhbCA9IDA7CiAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGl0ZW1Db3VudDsgaSsrKSB7CiAgICAgICAgICAgIHZhciBpdGVtID0gX3RoaXM1LiRyZWZzLnZhbHVlW2ldOwogICAgICAgICAgICB2YXIgaXRlbVdpZHRoID0gaXRlbS5vZmZzZXRXaWR0aCArIDEwOwoKICAgICAgICAgICAgLy8gSWYgdGhpcyBpcyB0aGUgZmlyc3QgaXRlbSBhbmQgd2UgaGF2ZSBvdmVyZmxvdyB0aGVuIGFkZCBvbiBzb21lIHNwYWNlIGZvciB0aGUgK04KICAgICAgICAgICAgaWYgKGkgPT09IDAgJiYgb3ZlcmZsb3cpIHsKICAgICAgICAgICAgICBpdGVtV2lkdGggKz0gNDA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY3VycmVudFdpZHRoICs9IGl0ZW1XaWR0aDsKICAgICAgICAgICAgaWYgKHNob3cpIHsKICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkgewogICAgICAgICAgICAgICAgLy8gQ2FuJ3QgZXZlbiBmaXQgdGhlIGZpcnN0IGl0ZW0gaW4KICAgICAgICAgICAgICAgIGlmIChpdGVtV2lkdGggPiBtYXhXaWR0aCkgewogICAgICAgICAgICAgICAgICBzaG93ID0gZmFsc2U7CiAgICAgICAgICAgICAgICAgIF90aGlzNS50b3RhbCA9IF90aGlzNS52YWx1ZS5sZW5ndGg7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHNob3cgPSBjdXJyZW50V2lkdGggPCBtYXhXaWR0aDsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaGlkZGVuICs9IHNob3cgPyAwIDogMTsKICAgICAgICAgICAgaXRlbS5zdHlsZS52aXNpYmlsaXR5ID0gc2hvdyA/ICd2aXNpYmxlJyA6ICdoaWRkZW4nOwogICAgICAgICAgfQogICAgICAgICAgX3RoaXM1LmhpZGRlbiA9IF90aGlzNS50b3RhbCA+IDAgPyAwIDogaGlkZGVuOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgYWRkQ2xvc2VLZXlIYW5kbGVyOiBmdW5jdGlvbiBhZGRDbG9zZUtleUhhbmRsZXIoKSB7CiAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleXVwJywgdGhpcy5jbG9zZUtleUhhbmRsZXIpOwogICAgfSwKICAgIHJlbW92ZUNsb3NlS2V5SGFuZGxlcjogZnVuY3Rpb24gcmVtb3ZlQ2xvc2VLZXlIYW5kbGVyKCkgewogICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXl1cCcsIHRoaXMuY2xvc2VLZXlIYW5kbGVyKTsKICAgIH0sCiAgICBjbG9zZUtleUhhbmRsZXI6IGZ1bmN0aW9uIGNsb3NlS2V5SGFuZGxlcihlKSB7CiAgICAgIGlmIChlLmtleUNvZGUgPT09IEtFWS5FU0NBUEUpIHsKICAgICAgICB0aGlzLmNsb3NlKCk7CiAgICAgIH0KICAgIH0sCiAgICAvLyBLZXlib2FyZCBzdXBwb3J0CiAgICBpdGVtS2V5SGFuZGxlcjogZnVuY3Rpb24gaXRlbUtleUhhbmRsZXIoZSwgb3B0KSB7CiAgICAgIGlmIChlLmtleUNvZGUgPT09IEtFWS5ET1dOKSB7CiAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgdGhpcy5kb3duKCk7CiAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSBLRVkuVVApIHsKICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB0aGlzLnVwKCk7CiAgICAgIH0gZWxzZSBpZiAoZS5rZXlDb2RlID09PSBLRVkuU1BBQ0UgfHwgZS5rZXlDb2RlID09PSBLRVkuQ1IpIHsKICAgICAgICBpZiAodGhpcy5uYW1lc3BhY2VGaWx0ZXJNb2RlICYmICFvcHQuZW5hYmxlZCkgewogICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7CiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICB0aGlzLnNlbGVjdE9wdGlvbihvcHQpOwogICAgICAgIGUudGFyZ2V0LmZvY3VzKCk7CiAgICAgIH0KICAgIH0sCiAgICBpbnB1dEtleUhhbmRsZXI6IGZ1bmN0aW9uIGlucHV0S2V5SGFuZGxlcihlKSB7CiAgICAgIHN3aXRjaCAoZS5rZXlDb2RlKSB7CiAgICAgICAgY2FzZSBLRVkuRE9XTjoKICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICAgICAgICB0aGlzLmRvd24odHJ1ZSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIEtFWS5UQUI6CiAgICAgICAgICAvLyBUYWIgb3V0IG9mIHRoZSBpbnB1dCBib3gKICAgICAgICAgIHRoaXMuY2xvc2UoKTsKICAgICAgICAgIGUudGFyZ2V0LmJsdXIoKTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgS0VZLkNSOgogICAgICAgICAgaWYgKHRoaXMuZmlsdGVyZWQubGVuZ3RoID09PSAxKSB7CiAgICAgICAgICAgIHRoaXMuc2VsZWN0T3B0aW9uKHRoaXMuZmlsdGVyZWRbMF0pOwogICAgICAgICAgICB0aGlzLmZpbHRlciA9ICcnOwogICAgICAgICAgfQogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgIH0sCiAgICBtb3VzZU92ZXI6IGZ1bmN0aW9uIG1vdXNlT3ZlcihldmVudCkgewogICAgICB2YXIgX2V2ZW50JHBhdGg7CiAgICAgIHZhciBlbCA9IGV2ZW50ID09PSBudWxsIHx8IGV2ZW50ID09PSB2b2lkIDAgfHwgKF9ldmVudCRwYXRoID0gZXZlbnQucGF0aCkgPT09IG51bGwgfHwgX2V2ZW50JHBhdGggPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9ldmVudCRwYXRoLmZpbmQoZnVuY3Rpb24gKGUpIHsKICAgICAgICByZXR1cm4gZS5jbGFzc0xpc3QuY29udGFpbnMoJ25zLW9wdGlvbicpOwogICAgICB9KTsKICAgICAgdGhpcy5hY3RpdmVFbGVtZW50ID0gZWw7CiAgICB9LAogICAgc2V0QWN0aXZlRWxlbWVudDogZnVuY3Rpb24gc2V0QWN0aXZlRWxlbWVudChlbCkgewogICAgICBpZiAoIShlbCAhPT0gbnVsbCAmJiBlbCAhPT0gdm9pZCAwICYmIGVsLmZvY3VzKSkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBlbC5mb2N1cygpOwogICAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSBudWxsOwogICAgfSwKICAgIGRvd246IGZ1bmN0aW9uIGRvd24oaW5wdXQpIHsKICAgICAgdmFyIGV4aXNpbmcgPSB0aGlzLmFjdGl2ZUVsZW1lbnQgfHwgZG9jdW1lbnQuYWN0aXZlRWxlbWVudDsKCiAgICAgIC8vIEZvY3VzIHRoZSBmaXJzdCBlbGVtZW50IGluIHRoZSBsaXN0CiAgICAgIGlmIChpbnB1dCB8fCAhZXhpc2luZykgewogICAgICAgIGlmICh0aGlzLiRyZWZzLm9wdGlvbnMpIHsKICAgICAgICAgIHZhciBjID0gdGhpcy4kcmVmcy5vcHRpb25zLmNoaWxkcmVuOwogICAgICAgICAgaWYgKGMgJiYgYy5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHRoaXMuc2V0QWN0aXZlRWxlbWVudChjWzBdKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdmFyIF9uZXh0LCBfbmV4dDI7CiAgICAgICAgdmFyIG5leHQgPSBleGlzaW5nLm5leHRTaWJsaW5nOwogICAgICAgIGlmICgoX25leHQgPSBuZXh0KSAhPT0gbnVsbCAmJiBfbmV4dCAhPT0gdm9pZCAwICYmIChfbmV4dCA9IF9uZXh0LmNoaWxkcmVuKSAhPT0gbnVsbCAmJiBfbmV4dCAhPT0gdm9pZCAwICYmIF9uZXh0Lmxlbmd0aCkgewogICAgICAgICAgdmFyIGl0ZW0gPSBuZXh0LmNoaWxkcmVuWzBdOwoKICAgICAgICAgIC8vIFNraXAgb3ZlciBkaXZpZGVycyAoYXNzdW1lcyB3ZSBkb24ndCBoYXZlIHR3byBkaXZpZGVycyBuZXh0IHRvIGVhY2ggb3RoZXIpCiAgICAgICAgICBpZiAoaXRlbS5jbGFzc0xpc3QuY29udGFpbnMoJ25zLWRpdmlkZXInKSkgewogICAgICAgICAgICBuZXh0ID0gbmV4dC5uZXh0U2libGluZzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKChfbmV4dDIgPSBuZXh0KSAhPT0gbnVsbCAmJiBfbmV4dDIgIT09IHZvaWQgMCAmJiBfbmV4dDIuZm9jdXMpIHsKICAgICAgICAgIHRoaXMuc2V0QWN0aXZlRWxlbWVudChuZXh0KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB1cDogZnVuY3Rpb24gdXAoKSB7CiAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7CiAgICAgICAgdmFyIF9wcmV2LCBfcHJldjI7CiAgICAgICAgdmFyIHByZXYgPSBkb2N1bWVudC5hY3RpdmVFbGVtZW50LnByZXZpb3VzU2libGluZzsKICAgICAgICBpZiAoKF9wcmV2ID0gcHJldikgIT09IG51bGwgJiYgX3ByZXYgIT09IHZvaWQgMCAmJiAoX3ByZXYgPSBfcHJldi5jaGlsZHJlbikgIT09IG51bGwgJiYgX3ByZXYgIT09IHZvaWQgMCAmJiBfcHJldi5sZW5ndGgpIHsKICAgICAgICAgIHZhciBpdGVtID0gcHJldi5jaGlsZHJlblswXTsKICAgICAgICAgIGlmIChpdGVtLmNsYXNzTGlzdC5jb250YWlucygnbnMtZGl2aWRlcicpKSB7CiAgICAgICAgICAgIHByZXYgPSBwcmV2LnByZXZpb3VzU2libGluZzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKChfcHJldjIgPSBwcmV2KSAhPT0gbnVsbCAmJiBfcHJldjIgIT09IHZvaWQgMCAmJiBfcHJldjIuZm9jdXMpIHsKICAgICAgICAgIHRoaXMuc2V0QWN0aXZlRWxlbWVudChwcmV2KTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICB0b2dnbGU6IGZ1bmN0aW9uIHRvZ2dsZSgpIHsKICAgICAgaWYgKHRoaXMuaXNPcGVuKSB7CiAgICAgICAgdGhpcy5jbG9zZSgpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMub3BlbigpOwogICAgICB9CiAgICB9LAogICAgb3BlbjogZnVuY3Rpb24gb3BlbigpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHRoaXMuaXNPcGVuID0gdHJ1ZTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzNi4kcmVmcy5maWx0ZXIuZm9jdXMoKTsKICAgICAgfSk7CiAgICAgIHRoaXMuYWRkQ2xvc2VLZXlIYW5kbGVyKCk7CiAgICAgIHRoaXMubGF5b3V0KCk7CiAgICB9LAogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKCkgewogICAgICB0aGlzLmlzT3BlbiA9IGZhbHNlOwogICAgICB0aGlzLmFjdGl2ZUVsZW1lbnQgPSBudWxsOwogICAgICB0aGlzLnJlbW92ZUNsb3NlS2V5SGFuZGxlcigpOwogICAgICB0aGlzLmxheW91dCgpOwogICAgfSwKICAgIGNsZWFyOiBmdW5jdGlvbiBjbGVhcigpIHsKICAgICAgdGhpcy52YWx1ZSA9IFtdOwogICAgfSwKICAgIHNlbGVjdE9wdGlvbjogZnVuY3Rpb24gc2VsZWN0T3B0aW9uKG9wdGlvbikgewogICAgICB2YXIgX3RoaXMkbmFtZXNwYWNlRmlsdGVyLAogICAgICAgIF90aGlzNyA9IHRoaXM7CiAgICAgIC8vIElnbm9yZSBjbGljayBmb3IgYSBkaXZpZGVyCiAgICAgIGlmIChvcHRpb24ua2luZCA9PT0gTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5ESVZJREVSKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjdXJyZW50ID0gdGhpcy52YWx1ZTsKCiAgICAgIC8vIFJlbW92ZSBpbnZhbGlkCiAgICAgIGlmICghISgoX3RoaXMkbmFtZXNwYWNlRmlsdGVyID0gdGhpcy5uYW1lc3BhY2VGaWx0ZXJNb2RlKSAhPT0gbnVsbCAmJiBfdGhpcyRuYW1lc3BhY2VGaWx0ZXIgIT09IHZvaWQgMCAmJiBfdGhpcyRuYW1lc3BhY2VGaWx0ZXIubGVuZ3RoKSkgewogICAgICAgIHRoaXMudmFsdWUuZm9yRWFjaChmdW5jdGlvbiAodikgewogICAgICAgICAgaWYgKCFfdGhpczcubmFtZXNwYWNlRmlsdGVyTW9kZS5maW5kKGZ1bmN0aW9uIChmKSB7CiAgICAgICAgICAgIHJldHVybiBmID09PSB2LmtpbmQ7CiAgICAgICAgICB9KSkgewogICAgICAgICAgICB2YXIgaW5kZXggPSBjdXJyZW50LmZpbmRJbmRleChmdW5jdGlvbiAoYykgewogICAgICAgICAgICAgIHJldHVybiBjLmlkID09PSB2LmlkOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY3VycmVudC5zcGxpY2UoaW5kZXgsIDEpOwogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHZhciBleGlzdHMgPSBjdXJyZW50LmZpbmRJbmRleChmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiB2LmlkID09PSBvcHRpb24uaWQ7CiAgICAgIH0pOwoKICAgICAgLy8gUmVtb3ZlIGlmIGl0IGV4aXN0cyAob3IgYWx3YXlzIGFkZCBpZiBpbiBzaW5nbGV0b24gbW9kZSAtIHdlJ3ZlIHJlc2V0IHRoZSBsaXN0IGFib3ZlKQogICAgICBpZiAoZXhpc3RzICE9PSAtMSkgewogICAgICAgIGN1cnJlbnQuc3BsaWNlKGV4aXN0cywgMSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY3VycmVudC5wdXNoKG9wdGlvbik7CiAgICAgIH0KICAgICAgdGhpcy52YWx1ZSA9IGN1cnJlbnQ7CiAgICAgIGlmIChkb2N1bWVudC5hY3RpdmVFbGVtZW50KSB7CiAgICAgICAgZG9jdW1lbnQuYWN0aXZlRWxlbWVudC5ibHVyKCk7CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVWYWx1ZU1vdXNlRG93bjogZnVuY3Rpb24gaGFuZGxlVmFsdWVNb3VzZURvd24obnMsIGV2ZW50KSB7CiAgICAgIHRoaXMucmVtb3ZlT3B0aW9uKG5zLCBldmVudCk7CiAgICAgIGlmICh0aGlzLnZhbHVlLmxlbmd0aCA9PT0gMCkgewogICAgICAgIHRoaXMub3BlbigpOwogICAgICB9CiAgICB9LAogICAgcmVtb3ZlT3B0aW9uOiBmdW5jdGlvbiByZW1vdmVPcHRpb24obnMsIGV2ZW50KSB7CiAgICAgIHRoaXMuc2VsZWN0T3B0aW9uKG5zKTsKICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTsKICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7CiAgICB9LAogICAgZGVmYXVsdE9wdGlvbjogZnVuY3Rpb24gZGVmYXVsdE9wdGlvbigpIHsKICAgICAgdmFyIF90aGlzJGN1cnJlbnRQcm9kdWN0NDsKICAgICAgLy8gTm90ZSAtIFRoaXMgaXMgb25lIHBsYWNlIHdoZXJlIGEgZGVmYXVsdCBucy9wcm9qZWN0IGZpbHRlciB2YWx1ZSBpcyBwcm92aWRlZCAoQUxMX1VTRVIpCiAgICAgIC8vIFRoZXJlJ3MgYWxzby4uCiAgICAgIC8vIC0gZGFzaGJvYXJkIHJvb3Qgc3RvcmUgYGxvYWRDbHVzdGVyYCAtLT4gd2hlbiBgdXBkYXRlTmFtZXNwYWNlc2AgaXMgZGlzcGF0Y2hlZAogICAgICAvLyAtIGhhcnZlc3RlciByb290IHN0b3JlIGBsb2FkQ2x1c3RlcmAgLS0+IHdoZW4gYHVwZGF0ZU5hbWVzcGFjZXNgIGlzIGRpc3BhdGNoZWQgKGNhbiBiZSBkaXNjYXJkZWQpCiAgICAgIC8vIER1ZSB0byB0aGlzLCB3ZSBjYW4ndCByZWFsbHkgc2V0IGEgbmljZXIgZGVmYXVsdCB3aGVuIGZvcmNlZCBucy9wcm9qZWN0IGZpbHRlcmluZyBpcyBvbiAoQUxMX1VTRVIgaXMgaW52YWxpZCkKICAgICAgaWYgKChfdGhpcyRjdXJyZW50UHJvZHVjdDQgPSB0aGlzLmN1cnJlbnRQcm9kdWN0KSAhPT0gbnVsbCAmJiBfdGhpcyRjdXJyZW50UHJvZHVjdDQgIT09IHZvaWQgMCAmJiBfdGhpcyRjdXJyZW50UHJvZHVjdDQuY3VzdG9tTmFtZXNwYWNlRmlsdGVyKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICAgIHJldHVybiBbQUxMX1VTRVJdOwogICAgfSwKICAgIGNhbGNOYW1lc3BhY2VGaWx0ZXJNb2RlOiBmdW5jdGlvbiBjYWxjTmFtZXNwYWNlRmlsdGVyTW9kZSgpIHsKICAgICAgaWYgKHBBbmRORmlsdGVyaW5nLmlzRW5hYmxlZCh0aGlzLiRzdG9yZS5nZXR0ZXJzKSkgewogICAgICAgIHJldHVybiBbTkFNRVNQQUNFX0ZJTFRFUl9LSU5EUy5OQU1FU1BBQ0UsIE5BTUVTUEFDRV9GSUxURVJfS0lORFMuUFJPSkVDVF07CiAgICAgIH0KICAgICAgcmV0dXJuIG51bGw7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapGetters","NAMESPACE_FILTERS","ALL_NAMESPACES","NAMESPACE","MANAGEMENT","sortBy","isArray","addObjects","findBy","filterBy","NAMESPACE_FILTER_ALL_USER","ALL_USER","NAMESPACE_FILTER_ALL","ALL","NAMESPACE_FILTER_ALL_SYSTEM","ALL_SYSTEM","NAMESPACE_FILTER_ALL_ORPHANS","ALL_ORPHANS","NAMESPACE_FILTER_NAMESPACED_YES","NAMESPACED_YES","NAMESPACE_FILTER_NAMESPACED_NO","NAMESPACED_NO","createNamespaceFilterKey","NAMESPACE_FILTER_KINDS","NAMESPACE_FILTER_NS_FULL_PREFIX","NAMESPACE_FILTER_P_FULL_PREFIX","KEY","pAndNFiltering","SETTING","forcedNamespaceValidTypes","DIVIDER","PROJECT","data","isOpen","filter","hidden","total","activeElement","cachedFiltered","namespaceFilterMode","undefined","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","$store","dispatch","type","id","UI_PERFORMANCE","calcNamespaceFilterMode","stop","computed","_objectSpread","hasFilter","length","filtered","_this2","_out","out","options","item","_this2$namespaceFilte","includes","kind","validCustomType","find","prefix","startsWith","value","findIndex","v","SPECIAL","label","toLowerCase","splice","mapped","reduce","m","forEach","i","_this2$namespaceFilte2","selected","elementId","replace","enabled","isLastSelected","kindAllowed","f","isNotInProjectGroup","tooltip","concat","content","placement","delay","show","key","getters","currentProduct","_this$currentProduct","_this$currentProduct2","_this$currentProduct3","_this3","t","params","$route","resource","notFilterNamespaces","notFilterNamespace","customNamespaceFilter","inStore","allNamespaces","commit","addNamespace","divider","hideSystemResources","namespaces","filterNamespaces","cluster","projects","p","_this3$currentProduct","isSystem","spec","clusterName","projectsById","namespacesByProject","firstProject","_iterator","_createForOfIteratorHelper","_step","s","n","done","project","metadata","name","err","e","_iterator2","_step2","namespace","projectId","entry","push","_iterator3","_step3","nameDisplay","forThisProject","orphans","disabled","map","isSingleSpecial","get","prefs","values","defaultOption","filters","x","set","neu","_this4","old","slice","last","lastIsSpecial","hadUser","hadAll","ids","$nextTick","beforeDestroy","removeCloseKeyHandler","mounted","layout","watch","methods","isObscure","_this5","$refs","container","overflow","scrollWidth","offsetWidth","dropdown","maxWidth","itemCount","currentWidth","itemWidth","style","visibility","addCloseKeyHandler","document","addEventListener","closeKeyHandler","removeEventListener","keyCode","ESCAPE","close","itemKeyHandler","opt","DOWN","preventDefault","stopPropagation","down","UP","up","SPACE","CR","selectOption","target","focus","inputKeyHandler","TAB","blur","mouseOver","event","_event$path","el","path","classList","contains","setActiveElement","input","exising","c","children","_next","_next2","nextSibling","_prev","_prev2","previousSibling","toggle","open","_this6","clear","option","_this$namespaceFilter","_this7","current","index","exists","handleValueMouseDown","ns","removeOption","_this$currentProduct4","isEnabled"],"sources":["node_modules/@rancher/shell/components/nav/NamespaceFilter.vue"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport { NAMESPACE_FILTERS, ALL_NAMESPACES } from '@shell/store/prefs';\nimport { NAMESPACE, MANAGEMENT } from '@shell/config/types';\nimport { sortBy } from '@shell/utils/sort';\nimport { isArray, addObjects, findBy, filterBy } from '@shell/utils/array';\nimport {\n  NAMESPACE_FILTER_ALL_USER as ALL_USER,\n  NAMESPACE_FILTER_ALL as ALL,\n  NAMESPACE_FILTER_ALL_SYSTEM as ALL_SYSTEM,\n  NAMESPACE_FILTER_ALL_ORPHANS as ALL_ORPHANS,\n  NAMESPACE_FILTER_NAMESPACED_YES as NAMESPACED_YES,\n  NAMESPACE_FILTER_NAMESPACED_NO as NAMESPACED_NO,\n  createNamespaceFilterKey,\n  NAMESPACE_FILTER_KINDS,\n  NAMESPACE_FILTER_NS_FULL_PREFIX,\n  NAMESPACE_FILTER_P_FULL_PREFIX,\n} from '@shell/utils/namespace-filter';\nimport { KEY } from '@shell/utils/platform';\nimport pAndNFiltering from '@shell/utils/projectAndNamespaceFiltering.utils';\nimport { SETTING } from '@shell/config/settings';\n\nconst forcedNamespaceValidTypes = [NAMESPACE_FILTER_KINDS.DIVIDER, NAMESPACE_FILTER_KINDS.PROJECT, NAMESPACE_FILTER_KINDS.NAMESPACE];\n\nexport default {\n\n  data() {\n    return {\n      isOpen:              false,\n      filter:              '',\n      hidden:              0,\n      total:               0,\n      activeElement:       null,\n      cachedFiltered:      [],\n      NAMESPACE_FILTER_KINDS,\n      namespaceFilterMode: undefined,\n    };\n  },\n\n  async fetch() {\n    // Determine if filtering by specific namespaces/projects is required\n    // This is done once and up front\n    // - it doesn't need to be re-active\n    // - added it as a computed caused massive amounts of churn around the `filtered` watcher\n    await this.$store.dispatch('management/find', { type: MANAGEMENT.SETTING, id: SETTING.UI_PERFORMANCE });\n    this.namespaceFilterMode = this.calcNamespaceFilterMode();\n  },\n\n  computed: {\n    ...mapGetters(['currentProduct']),\n\n    hasFilter() {\n      return this.filter.length > 0;\n    },\n\n    filtered() {\n      let out = this.options;\n\n      out = out.filter((item) => {\n        // Filter out anything not applicable to singleton selection\n        if (this.namespaceFilterMode?.length) {\n          // We always show dividers, projects and namespaces\n          if (!forcedNamespaceValidTypes.includes(item.kind)) {\n            const validCustomType = this.namespaceFilterMode.find((prefix) => item.kind.startsWith(prefix));\n\n            if (!validCustomType) {\n              // Hide any invalid option that's not selected\n              return this.value.findIndex((v) => v.id === item.id) >= 0;\n            }\n          }\n        }\n\n        // Filter by the current filter\n        if (this.hasFilter) {\n          return item.kind !== NAMESPACE_FILTER_KINDS.SPECIAL && item.label.toLowerCase().includes(this.filter.toLowerCase());\n        }\n\n        return true;\n      });\n\n      if (out?.[0]?.kind === NAMESPACE_FILTER_KINDS.DIVIDER) {\n        out.splice(0, 1);\n      }\n\n      const mapped = this.value.reduce((m, v) => {\n        m[v.id] = v;\n\n        return m;\n      }, {});\n\n      // Mark all of the selected options\n      out.forEach((i) => {\n        i.selected = !!mapped[i.id] || (i.id === ALL && this.value && this.value.length === 0);\n        i.elementId = (i.id || '').replace('://', '_');\n        i.enabled = true;\n        // Are we in restricted resource type mode, if so is this an allowed type?\n        if (this.namespaceFilterMode?.length) {\n          const isLastSelected = i.selected && (i.id === ALL || this.value.length === 1);\n          const kindAllowed = this.namespaceFilterMode.find((f) => f === i.kind);\n          const isNotInProjectGroup = i.id === ALL_ORPHANS;\n\n          i.enabled = (!isLastSelected && kindAllowed) && !isNotInProjectGroup;\n        }\n      });\n\n      return out;\n    },\n\n    tooltip() {\n      if (this.isOpen || (this.total + this.hidden) === 0) {\n        return null;\n      }\n\n      let tooltip = '<div class=\"ns-filter-tooltip\">';\n\n      (this.value || []).forEach((v) => {\n        tooltip += `<div class=\"ns-filter-tooltip-item\"><div>${ v.label }</div></div>`;\n      });\n\n      tooltip += '</div>';\n\n      return {\n        content:   tooltip,\n        placement: 'bottom',\n        delay:     { show: 500 }\n      };\n    },\n\n    key() {\n      return createNamespaceFilterKey(this.$store.getters['clusterId'], this.currentProduct);\n    },\n\n    options() {\n      const t = this.$store.getters['i18n/t'];\n      let out = [];\n\n      const params = { ...this.$route.params };\n      const resource = params.resource;\n      // Sometimes, different pages may have different namespaces to filter\n      const notFilterNamespaces = this.$store.getters[`type-map/optionsFor`](resource).notFilterNamespace || [];\n\n      // TODO: Add return info\n      if (this.currentProduct?.customNamespaceFilter && this.currentProduct?.inStore) {\n        // Sometimes the component can show before the 'currentProduct' has caught up, so access the product via the getter rather\n        // than caching it in the `fetch`\n\n        // The namespace display on the list and edit pages should be the same as in the namespaceFilter component\n        if (this.$store.getters[`${ this.currentProduct.inStore }/filterNamespace`]) {\n          const allNamespaces = this.$store.getters[`${ this.currentProduct.inStore }/filterNamespace`](notFilterNamespaces);\n\n          this.$store.commit('changeAllNamespaces', allNamespaces);\n        }\n\n        return this.$store.getters[`${ this.currentProduct.inStore }/namespaceFilterOptions`]({\n          addNamespace,\n          divider,\n          notFilterNamespaces\n        });\n      }\n\n      // TODO: Add return info\n      if (!this.currentProduct?.hideSystemResources) {\n        out = [\n          {\n            id:    ALL,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.all'),\n          },\n          {\n            id:    ALL_USER,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.user'),\n          },\n          {\n            id:    ALL_SYSTEM,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.system'),\n          },\n          {\n            id:    NAMESPACED_YES,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.namespaced'),\n          },\n          {\n            id:    NAMESPACED_NO,\n            kind:  NAMESPACE_FILTER_KINDS.SPECIAL,\n            label: t('nav.ns.clusterLevel'),\n          },\n        ];\n\n        divider(out);\n      }\n\n      const inStore = this.$store.getters['currentStore'](NAMESPACE);\n\n      if (!inStore) {\n        return out;\n      }\n\n      let namespaces = sortBy(\n        this.$store.getters[`${ inStore }/all`](NAMESPACE),\n        ['nameDisplay']\n      );\n\n      namespaces = this.filterNamespaces(namespaces);\n\n      // isRancher = mgmt schemas are loaded and there's a project schema\n      if (this.$store.getters['isRancher']) {\n        const cluster = this.$store.getters['currentCluster'];\n        let projects = this.$store.getters['management/all'](\n          MANAGEMENT.PROJECT\n        );\n\n        projects = projects.filter((p) => {\n          return this.currentProduct?.hideSystemResources ? !p.isSystem && p.spec.clusterName === cluster.id : p.spec.clusterName === cluster.id;\n        });\n        projects = sortBy(filterBy(projects, 'spec.clusterName', cluster.id), [\n          'nameDisplay',\n        ]);\n        const projectsById = {};\n        const namespacesByProject = {};\n        let firstProject = true;\n\n        namespacesByProject[null] = []; // For namespaces not in a project\n        for (const project of projects) {\n          projectsById[project.metadata.name] = project;\n        }\n\n        for (const namespace of namespaces) {\n          let projectId = namespace.projectId;\n\n          if (!projectId || !projectsById[projectId]) {\n            // If there's a projectId but that project doesn't exist, treat it like no project\n            projectId = null;\n          }\n\n          let entry = namespacesByProject[projectId];\n\n          if (!entry) {\n            entry = [];\n            namespacesByProject[namespace.projectId] = entry;\n          }\n          entry.push(namespace);\n        }\n\n        for (const project of projects) {\n          const id = project.metadata.name;\n\n          if (firstProject) {\n            firstProject = false;\n          } else {\n            divider(out);\n          }\n\n          out.push({\n            id:    `${ NAMESPACE_FILTER_P_FULL_PREFIX }${ id }`,\n            kind:  NAMESPACE_FILTER_KINDS.PROJECT,\n            label: t('nav.ns.project', { name: project.nameDisplay }),\n          });\n\n          const forThisProject = namespacesByProject[id] || [];\n\n          addNamespace(out, forThisProject);\n        }\n\n        const orphans = namespacesByProject[null];\n\n        if (orphans.length) {\n          if (!firstProject) {\n            divider(out);\n          }\n\n          out.push({\n            id:       ALL_ORPHANS,\n            kind:     NAMESPACE_FILTER_KINDS.PROJECT,\n            label:    t('nav.ns.orphan'),\n            disabled: true,\n          });\n\n          addNamespace(out, orphans);\n        }\n      } else {\n        addNamespace(out, namespaces);\n      }\n\n      return out;\n\n      function addNamespace(out, namespaces) {\n        if (!isArray(namespaces)) {\n          namespaces = [namespaces];\n        }\n\n        addObjects(\n          out,\n          namespaces.map((namespace) => {\n            return {\n              id:    `${ NAMESPACE_FILTER_NS_FULL_PREFIX }${ namespace.id }`,\n              kind:  NAMESPACE_FILTER_KINDS.NAMESPACE,\n              label: t('nav.ns.namespace', { name: namespace.nameDisplay }),\n            };\n          })\n        );\n      }\n\n      function divider(out) {\n        out.push({\n          kind:     NAMESPACE_FILTER_KINDS.DIVIDER,\n          label:    `Divider ${ out.length }`,\n          disabled: true,\n        });\n      }\n    },\n\n    isSingleSpecial() {\n      return this.value && this.value.length === 1 && this.value[0].kind === NAMESPACE_FILTER_KINDS.SPECIAL;\n    },\n\n    value: {\n      get() {\n        // Use last picked filter from user preferences\n        const prefs = this.$store.getters['prefs/get'](NAMESPACE_FILTERS);\n        const values = prefs && prefs[this.key] ? prefs[this.key] : this.defaultOption();\n        const options = this.options;\n\n        // Remove values that are not valid options\n        const filters = values\n          .map((value) => {\n            return findBy(options, 'id', value);\n          })\n          .filter((x) => !!x);\n\n        return filters;\n      },\n\n      set(neu) {\n        const old = (this.value || []).slice();\n\n        neu = neu.filter((x) => !!x.id);\n\n        const last = neu[neu.length - 1];\n        const lastIsSpecial = last?.kind === NAMESPACE_FILTER_KINDS.SPECIAL;\n        const hadUser = !!old.find((x) => x.id === ALL_USER);\n        const hadAll = !!old.find((x) => x.id === ALL);\n\n        if (lastIsSpecial) {\n          neu = [last];\n        }\n\n        if (neu.length > 1) {\n          neu = neu.filter((x) => x.kind !== NAMESPACE_FILTER_KINDS.SPECIAL);\n        }\n\n        if (neu.find((x) => x.id === 'all')) {\n          neu = [];\n        }\n\n        let ids;\n\n        // If there was something selected and you remove it, go back to user by default\n        // Unless it was user or all\n        if (neu.length === 0 && !hadUser && !hadAll) {\n          ids = this.defaultOption();\n        } else {\n          ids = neu.map((x) => x.id);\n        }\n\n        this.$nextTick(() => {\n          this.$store.dispatch('switchNamespaces', {\n            ids,\n            key: this.key\n          });\n        });\n      },\n    }\n  },\n\n  beforeDestroy() {\n    this.removeCloseKeyHandler();\n  },\n\n  mounted() {\n    this.layout();\n  },\n\n  watch: {\n    value(neu) {\n      this.layout();\n    },\n\n    /**\n     * When there are thousands of entries certain actions (drop down opened, selection changed, etc) take a long time to complete (upwards\n     * of 5 seconds)\n     *\n     * This is caused by churn of the filtered and options computed properties causing multiple renders for each action.\n     *\n     * To break this multiple-render per cycle behaviour detatch `filtered` from the value used in `v-for`.\n     *\n     */\n    filtered(neu) {\n      if (!!neu) {\n        this.cachedFiltered = neu;\n      }\n    }\n  },\n\n  methods: {\n    filterNamespaces(namespaces) {\n      if (this.$store.getters['prefs/get'](ALL_NAMESPACES)) {\n        // If all namespaces options are turned on in the user preferences,\n        // return all namespaces including system namespaces and RBAC\n        // management namespaces.\n        return namespaces;\n      }\n\n      return namespaces.filter((namespace) => {\n        // Otherwise only filter out obscure namespaces, such as namespaces\n        // that Rancher uses to manage RBAC for projects, which should not be\n        // edited or deleted by Rancher users.\n        return !namespace.isObscure;\n      });\n    },\n    // Layout the content in the dropdown box to best use the space to show the selection\n    layout() {\n      this.$nextTick(() => {\n        // One we have re-rendered, see what we can fit in the control to show the selected namespaces\n        if (this.$refs.values) {\n          const container = this.$refs.values;\n          const overflow = container.scrollWidth > container.offsetWidth;\n          let hidden = 0;\n\n          const dropdown = this.$refs.dropdown;\n          // Remove padding and dropdown arrow size\n          const maxWidth = dropdown.offsetWidth - 20 - 24;\n\n          // If we are overflowing, then allow some space for the +N indicator\n          const itemCount = this.$refs.value ? this.$refs.value.length : 0;\n          let currentWidth = 0;\n          let show = true;\n\n          this.total = 0;\n\n          for (let i = 0; i < itemCount; i++) {\n            const item = this.$refs.value[i];\n            let itemWidth = item.offsetWidth + 10;\n\n            // If this is the first item and we have overflow then add on some space for the +N\n            if (i === 0 && overflow) {\n              itemWidth += 40;\n            }\n\n            currentWidth += itemWidth;\n\n            if (show) {\n              if (i === 0) {\n                // Can't even fit the first item in\n                if (itemWidth > maxWidth) {\n                  show = false;\n                  this.total = this.value.length;\n                }\n              } else {\n                show = currentWidth < maxWidth;\n              }\n            }\n\n            hidden += show ? 0 : 1;\n            item.style.visibility = show ? 'visible' : 'hidden';\n          }\n\n          this.hidden = this.total > 0 ? 0 : hidden;\n        }\n      });\n    },\n    addCloseKeyHandler() {\n      document.addEventListener('keyup', this.closeKeyHandler);\n    },\n    removeCloseKeyHandler() {\n      document.removeEventListener('keyup', this.closeKeyHandler);\n    },\n    closeKeyHandler(e) {\n      if (e.keyCode === KEY.ESCAPE ) {\n        this.close();\n      }\n    },\n    // Keyboard support\n    itemKeyHandler(e, opt) {\n      if (e.keyCode === KEY.DOWN ) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.down();\n      } else if (e.keyCode === KEY.UP ) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.up();\n      } else if (e.keyCode === KEY.SPACE || e.keyCode === KEY.CR) {\n        if (this.namespaceFilterMode && !opt.enabled) {\n          return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        this.selectOption(opt);\n        e.target.focus();\n      }\n    },\n    inputKeyHandler(e) {\n      switch (e.keyCode) {\n      case KEY.DOWN:\n        e.preventDefault();\n        e.stopPropagation();\n        this.down(true);\n        break;\n      case KEY.TAB:\n        // Tab out of the input box\n        this.close();\n        e.target.blur();\n        break;\n      case KEY.CR:\n        if (this.filtered.length === 1) {\n          this.selectOption(this.filtered[0]);\n          this.filter = '';\n        }\n        break;\n      }\n    },\n    mouseOver(event) {\n      const el = event?.path?.find((e) => e.classList.contains('ns-option'));\n\n      this.activeElement = el;\n    },\n    setActiveElement(el) {\n      if (!el?.focus) {\n        return;\n      }\n\n      el.focus();\n      this.activeElement = null;\n    },\n    down(input) {\n      const exising = this.activeElement || document.activeElement;\n\n      // Focus the first element in the list\n      if (input || !exising) {\n        if (this.$refs.options) {\n          const c = this.$refs.options.children;\n\n          if (c && c.length > 0) {\n            this.setActiveElement(c[0]);\n          }\n        }\n      } else {\n        let next = exising.nextSibling;\n\n        if (next?.children?.length) {\n          const item = next.children[0];\n\n          // Skip over dividers (assumes we don't have two dividers next to each other)\n          if (item.classList.contains('ns-divider')) {\n            next = next.nextSibling;\n          }\n        }\n\n        if (next?.focus) {\n          this.setActiveElement(next);\n        }\n      }\n    },\n    up() {\n      if (document.activeElement) {\n        let prev = document.activeElement.previousSibling;\n\n        if (prev?.children?.length) {\n          const item = prev.children[0];\n\n          if (item.classList.contains('ns-divider')) {\n            prev = prev.previousSibling;\n          }\n        }\n\n        if (prev?.focus) {\n          this.setActiveElement(prev);\n        }\n      }\n    },\n    toggle() {\n      if (this.isOpen) {\n        this.close();\n      } else {\n        this.open();\n      }\n    },\n    open() {\n      this.isOpen = true;\n      this.$nextTick(() => {\n        this.$refs.filter.focus();\n      });\n      this.addCloseKeyHandler();\n      this.layout();\n    },\n    close() {\n      this.isOpen = false;\n      this.activeElement = null;\n      this.removeCloseKeyHandler();\n      this.layout();\n    },\n    clear() {\n      this.value = [];\n    },\n    selectOption(option) {\n      // Ignore click for a divider\n      if (option.kind === NAMESPACE_FILTER_KINDS.DIVIDER) {\n        return;\n      }\n\n      const current = this.value;\n\n      // Remove invalid\n      if (!!this.namespaceFilterMode?.length) {\n        this.value.forEach((v) => {\n          if (!this.namespaceFilterMode.find((f) => f === v.kind)) {\n            const index = current.findIndex((c) => c.id === v.id);\n\n            current.splice(index, 1);\n          }\n        });\n      }\n\n      const exists = current.findIndex((v) => v.id === option.id);\n\n      // Remove if it exists (or always add if in singleton mode - we've reset the list above)\n      if (exists !== -1) {\n        current.splice(exists, 1);\n      } else {\n        current.push(option);\n      }\n\n      this.value = current;\n\n      if (document.activeElement) {\n        document.activeElement.blur();\n      }\n    },\n    handleValueMouseDown(ns, event) {\n      this.removeOption(ns, event);\n\n      if (this.value.length === 0) {\n        this.open();\n      }\n    },\n\n    removeOption(ns, event) {\n      this.selectOption(ns);\n      event.preventDefault();\n      event.stopPropagation();\n    },\n\n    defaultOption() {\n      // Note - This is one place where a default ns/project filter value is provided (ALL_USER)\n      // There's also..\n      // - dashboard root store `loadCluster` --> when `updateNamespaces` is dispatched\n      // - harvester root store `loadCluster` --> when `updateNamespaces` is dispatched (can be discarded)\n      // Due to this, we can't really set a nicer default when forced ns/project filtering is on (ALL_USER is invalid)\n      if (this.currentProduct?.customNamespaceFilter) {\n        return [];\n      }\n\n      return [ALL_USER];\n    },\n\n    calcNamespaceFilterMode() {\n      if (pAndNFiltering.isEnabled(this.$store.getters)) {\n        return [NAMESPACE_FILTER_KINDS.NAMESPACE, NAMESPACE_FILTER_KINDS.PROJECT];\n      }\n\n      return null;\n    },\n  }\n};\n</script>\n\n<template>\n  <div\n    v-if=\"!$fetchState.pending\"\n    class=\"ns-filter\"\n    data-testid=\"namespaces-filter\"\n    tabindex=\"0\"\n    @focus=\"open()\"\n  >\n    <div\n      v-if=\"isOpen\"\n      class=\"ns-glass\"\n      @click=\"close()\"\n    />\n\n    <!-- Select Dropdown control -->\n    <div\n      ref=\"dropdown\"\n      class=\"ns-dropdown\"\n      data-testid=\"namespaces-dropdown\"\n      :class=\"{ 'ns-open': isOpen }\"\n      @click=\"toggle()\"\n    >\n      <!-- No filters found or available -->\n      <div\n        v-if=\"value.length === 0\"\n        ref=\"values\"\n        data-testid=\"namespaces-values-none\"\n        class=\"ns-values\"\n      >\n        {{ t('nav.ns.all') }}\n      </div>\n\n      <!-- Filtered by set with custom label E.g. \"All namespaces\" -->\n      <div\n        v-else-if=\"isSingleSpecial\"\n        ref=\"values\"\n        data-testid=\"namespaces-values-label\"\n        class=\"ns-values\"\n      >\n        {{ value[0].label }}\n      </div>\n\n      <!-- All the selected namespaces -->\n      <div\n        v-else\n        ref=\"values\"\n        v-clean-tooltip=\"tooltip\"\n        data-testid=\"namespaces-values\"\n        class=\"ns-values\"\n      >\n        <div\n          v-if=\"total\"\n          ref=\"total\"\n          data-testid=\"namespaces-values-total\"\n          class=\"ns-value ns-abs\"\n        >\n          {{ t('namespaceFilter.selected.label', { total }) }}\n        </div>\n        <div\n          v-for=\"(ns, j) in value\"\n          ref=\"value\"\n          :key=\"ns.id\"\n          :data-testid=\"`namespaces-value-${j}`\"\n          class=\"ns-value\"\n        >\n          <div>{{ ns.label }}</div>\n          <!-- block user from removing the last selection if ns forced filtering is on -->\n          <i\n            v-if=\"!namespaceFilterMode || value.length > 1\"\n            class=\"icon icon-close\"\n            :data-testid=\"`namespaces-values-close-${j}`\"\n            @click=\"removeOption(ns, $event)\"\n            @mousedown=\"handleValueMouseDown(ns, $event)\"\n          />\n        </div>\n      </div>\n\n      <!-- Inform user if more namespaces are selected -->\n      <div\n        v-if=\"hidden > 0\"\n        ref=\"more\"\n        v-clean-tooltip=\"tooltip\"\n        class=\"ns-more\"\n      >\n        {{ t('namespaceFilter.more', { more: hidden }) }}\n      </div>\n      <i\n        v-if=\"!isOpen\"\n        class=\"icon icon-chevron-down\"\n      />\n      <i\n        v-else\n        class=\"icon icon-chevron-up\"\n      />\n    </div>\n    <button\n      v-shortkey.once=\"['n']\"\n      class=\"hide\"\n      @shortkey=\"open()\"\n    />\n\n    <!-- Dropdown menu -->\n    <div\n      v-if=\"isOpen\"\n      class=\"ns-dropdown-menu\"\n      data-testid=\"namespaces-menu\"\n    >\n      <div class=\"ns-controls\">\n        <div class=\"ns-input\">\n          <input\n            ref=\"filter\"\n            v-model=\"filter\"\n            tabindex=\"0\"\n            class=\"ns-filter-input\"\n            @keydown=\"inputKeyHandler($event)\"\n          >\n          <i\n            v-if=\"hasFilter\"\n            class=\"ns-filter-clear icon icon-close\"\n            @click=\"filter = ''\"\n          />\n        </div>\n        <div\n          v-if=\"namespaceFilterMode\"\n          class=\"ns-singleton-info\"\n        >\n          <i\n            v-clean-tooltip=\"t('resourceList.nsFilterToolTip')\"\n            class=\"icon icon-info\"\n          />\n        </div>\n        <div\n          v-else\n          class=\"ns-clear\"\n        >\n          <i\n            class=\"icon icon-close\"\n            @click=\"clear()\"\n          />\n        </div>\n      </div>\n      <div class=\"ns-divider mt-0\" />\n      <div\n        ref=\"options\"\n        class=\"ns-options\"\n        role=\"list\"\n      >\n        <div\n          v-for=\"(opt, i) in cachedFiltered\"\n          :id=\"opt.elementId\"\n          :key=\"opt.id\"\n          tabindex=\"0\"\n          class=\"ns-option\"\n          :disabled=\"!opt.enabled\"\n          :class=\"{\n            'ns-selected': opt.selected,\n            'ns-single-match': cachedFiltered.length === 1 && !opt.selected,\n          }\"\n          :data-testid=\"`namespaces-option-${i}`\"\n          @click=\"opt.enabled && selectOption(opt)\"\n          @mouseover=\"opt.enabled && mouseOver($event)\"\n          @keydown=\"itemKeyHandler($event, opt)\"\n        >\n          <div\n            v-if=\"opt.kind === NAMESPACE_FILTER_KINDS.DIVIDER\"\n            class=\"ns-divider\"\n          />\n          <div\n            v-else\n            class=\"ns-item\"\n          >\n            <i\n              v-if=\"opt.kind === NAMESPACE_FILTER_KINDS.NAMESPACE\"\n              class=\"icon icon-folder\"\n            />\n            <div>{{ opt.label }}</div>\n            <i\n              v-if=\"opt.selected\"\n              class=\"icon icon-checkmark\"\n            />\n          </div>\n        </div>\n        <div\n          v-if=\"cachedFiltered.length === 0\"\n          class=\"ns-none\"\n          data-testid=\"namespaces-option-none\"\n        >\n          {{ t('namespaceFilter.noMatchingOptions') }}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  $ns_dropdown_size: 24px;\n\n  .ns-abs {\n    position: absolute;\n  }\n\n  .ns-filter {\n    width: 280px;\n    display: inline-block;\n\n    $glass-z-index: 2;\n    $dropdown-z-index: 1000;\n\n    .ns-glass {\n      height: 100vh;\n      left: 0;\n      opacity: 0;\n      position: absolute;\n      top: 0;\n      width: 100vw;\n      z-index: $glass-z-index;\n    }\n\n    .ns-controls {\n      align-items: center;\n      display: flex;\n    }\n\n    .ns-clear {\n      &:hover {\n        color: var(--primary);\n        cursor: pointer;\n      }\n    }\n\n    .ns-singleton-info, .ns-clear {\n      align-items: center;\n      display: flex;\n      > i {\n        padding-right: 5px;\n      }\n    }\n\n    .ns-input {\n      flex: 1;\n      padding: 5px;\n      position: relative;\n    }\n\n    .ns-filter-input {\n      height: 24px;\n    }\n\n    .ns-filter-clear {\n      cursor: pointer;\n      position: absolute;\n      right: 10px;\n      top: 5px;\n      line-height: 24px;\n      text-align: center;\n      width: 24px;\n    }\n\n    .ns-dropdown-menu {\n      background-color: var(--header-bg);\n      border: 1px solid var(--primary-border);\n      border-bottom-left-radius: var(--border-radius);\n      border-bottom-right-radius: var(--border-radius);\n      color: var(--header-btn-text);\n      margin-top: -1px;\n      padding-bottom: 10px;\n      position: relative;\n      z-index: $dropdown-z-index;\n\n      .ns-options {\n        max-height: 50vh;\n        overflow-y: auto;\n\n        .ns-none {\n          color: var(--muted);\n          padding: 0 10px;\n        }\n      }\n\n      .ns-divider {\n        border-top: 1px solid var(--border);\n        cursor: default;\n        margin-top: 10px;\n        padding-bottom: 10px;\n      }\n\n      .ns-option {\n\n        &[disabled] {\n          cursor: default;\n        }\n\n        &:not([disabled]) {\n          &:focus {\n            background-color: var(--dropdown-hover-bg);\n            color: var(--dropdown-hover-text);\n          }\n          .ns-item {\n             &:hover, &:focus {\n              background-color: var(--dropdown-hover-bg);\n              color: var(--dropdown-hover-text);\n              cursor: pointer;\n\n              > i {\n                color: var(--dropdown-hover-text);\n              }\n            }\n          }\n\n          &.ns-selected {\n            &:hover,&:focus {\n              .ns-item {\n                > * {\n                  background-color: var(--dropdown-hover-bg);\n                  color: var(--dropdown-hover-text);\n                }\n              }\n            }\n          }\n\n          &.ns-selected:not(:hover) {\n            .ns-item {\n              > * {\n                color: var(--dropdown-hover-bg);\n              }\n            }\n\n            &:focus {\n              .ns-item {\n                > * {\n                  color: var(--dropdown-hover-text);\n                }\n              }\n            }\n          }\n        }\n\n        .ns-item {\n          align-items: center;\n          display: flex;\n          height: 24px;\n          line-height: 24px;\n          padding: 0 10px;\n\n          > i {\n            color: var(--muted);\n            margin: 0 5px;\n          }\n\n          > div {\n            flex: 1;\n            overflow: hidden;\n            text-overflow: ellipsis;\n            white-space: nowrap;\n          }\n\n        }\n\n        &.ns-single-match {\n          .ns-item {\n            background-color: var(--dropdown-hover-bg);\n            > * {\n              color: var(--dropdown-hover-text);\n            }\n          }\n        }\n      }\n    }\n\n    .ns-dropdown {\n      align-items: center;\n      display: flex;\n      border: 1px solid var(--header-border);\n      border-radius: var(--border-radius);\n      color: var(--header-btn-text);\n      cursor: pointer;\n      height: 40px;\n      padding: 0 10px;\n      position: relative;\n      z-index: $dropdown-z-index;\n\n      &.ns-open {\n        border-bottom-left-radius: 0;\n        border-bottom-right-radius: 0;\n        border-color: var(--primary-border);\n      }\n\n      > .ns-values {\n        flex: 1;\n      }\n\n      &:hover {\n        > i {\n          color: var(--primary);\n        }\n      }\n\n      > i {\n        height: $ns_dropdown_size;\n        width: $ns_dropdown_size;\n        cursor: pointer;\n        text-align: center;\n        line-height: $ns_dropdown_size;\n      }\n\n      .ns-more {\n        border: 1px solid var(--header-border);\n        border-radius: 5px;\n        padding: 2px 8px;\n        margin-left: 4px;\n      }\n\n      .ns-values {\n        display: flex;\n        overflow: hidden;\n\n        .ns-value {\n          align-items: center;\n          background-color: rgba(0,0,0,.05);\n          border: 1px solid var(--header-border);\n          border-radius: 5px;\n          color: var(--tag-text);\n          display: flex;\n          line-height: 20px;\n          padding: 2px 5px;\n          white-space: nowrap;\n\n          > i {\n            margin-left: 5px;\n\n            &:hover {\n              color: var(--primary);\n            };\n          }\n\n          // Spacing between tags\n          &:not(:last-child) {\n            margin-right: 5px;\n          }\n        }\n      }\n    }\n  }\n</style>\n<style lang=\"scss\">\n  .tooltip {\n    .ns-filter-tooltip {\n      background-color: var(--body-bg);\n      margin: -6px;\n      padding: 6px;\n\n      .ns-filter-tooltip-item {\n        > div {\n          background-color: rgba(0,0,0,.05);\n          border: 1px solid var(--header-border);\n          border-radius: 5px;\n          color: var(--tag-text);\n          display: inline-block;\n          line-height: 20px;\n          padding: 2px 5px;\n          white-space: nowrap;\n          margin: 4px 0;\n        }\n      }\n    }\n  }\n</style>\n"],"mappings":"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"}]}