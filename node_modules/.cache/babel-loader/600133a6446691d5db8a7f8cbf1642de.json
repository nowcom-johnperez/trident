{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/RemoveUIPlugins.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/RemoveUIPlugins.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0LnByb21pc2UuYWxsLXNldHRsZWQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBDQVRBTE9HLCBVSV9QTFVHSU4gfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IERpYWxvZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9EaWFsb2cudnVlJzsKaW1wb3J0IENoZWNrYm94IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vQ2hlY2tib3gvQ2hlY2tib3gudnVlJzsKaW1wb3J0IHsgVUlfUExVR0lOX05BTUVTUEFDRSwgVUlfUExVR0lOX0NIQVJUUywgVUlfUExVR0lOX09QRVJBVE9SX0NSRF9DSEFSVF9OQU1FLCBVSV9QTFVHSU5TX1JFUE9fTkFNRSwgVUlfUExVR0lOU19SRVBPX1VSTCwgVUlfUExVR0lOU19SRVBPX0JSQU5DSCwgVUlfUExVR0lOU19QQVJUTkVSU19SRVBPX05BTUUsIFVJX1BMVUdJTlNfUEFSVE5FUlNfUkVQT19VUkwsIFVJX1BMVUdJTlNfUEFSVE5FUlNfUkVQT19CUkFOQ0ggfSBmcm9tICdAc2hlbGwvY29uZmlnL3VpcGx1Z2lucyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDaGVja2JveDogQ2hlY2tib3gsCiAgICBEaWFsb2c6IERpYWxvZwogIH0sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBwbHVnaW5zOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBpZiAoIV90aGlzLiRzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L3NjaGVtYUZvciddKENBVEFMT0cuQ0xVU1RFUl9SRVBPKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogQ0FUQUxPRy5DTFVTVEVSX1JFUE8sCiAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICBmb3JjZTogdHJ1ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGlmICghX3RoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvc2NoZW1hRm9yJ10oVUlfUExVR0lOKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogVUlfUExVR0lOCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBwbHVnaW5zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgLy8gQXJlIHRoZXJlIGFueSBwbHVnaW5zIGluc3RhbGxlZD8KICAgICAgICAgICAgX3RoaXMuaGFzUGx1Z2luc0luc3RhbGxlZCA9IChwbHVnaW5zIHx8IFtdKS5sZW5ndGggPiAwOwogICAgICAgICAgICBfdGhpcy5yZW1vdmVDUkQgPSAhX3RoaXMuaGFzUGx1Z2luc0luc3RhbGxlZDsKICAgICAgICAgIGNhc2UgOToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGVycm9yczogW10sCiAgICAgIHJlbW92ZVJlcG9zOiB7CiAgICAgICAgb2ZmaWNpYWw6IHRydWUsCiAgICAgICAgcGFydG5lcnM6IHRydWUKICAgICAgfSwKICAgICAgcmVwb3NJbmZvOiB7CiAgICAgICAgb2ZmaWNpYWw6IHsKICAgICAgICAgIG5hbWU6IFVJX1BMVUdJTlNfUkVQT19OQU1FLAogICAgICAgICAgdXJsOiBVSV9QTFVHSU5TX1JFUE9fVVJMLAogICAgICAgICAgYnJhbmNoOiBVSV9QTFVHSU5TX1JFUE9fQlJBTkNICiAgICAgICAgfSwKICAgICAgICBwYXJ0bmVyczogewogICAgICAgICAgbmFtZTogVUlfUExVR0lOU19QQVJUTkVSU19SRVBPX05BTUUsCiAgICAgICAgICB1cmw6IFVJX1BMVUdJTlNfUEFSVE5FUlNfUkVQT19VUkwsCiAgICAgICAgICBicmFuY2g6IFVJX1BMVUdJTlNfUEFSVE5FUlNfUkVQT19CUkFOQ0gKICAgICAgICB9CiAgICAgIH0sCiAgICAgIHJlbW92ZUNSRDogdHJ1ZSwKICAgICAgaGFzUGx1Z2luc0luc3RhbGxlZDogZmFsc2UKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKHsKICAgIHJlcG9zOiAnY2F0YWxvZy9yZXBvcycKICB9KSksIHt9LCB7CiAgICBvZmZpY2lhbFJlcG86IGZ1bmN0aW9uIG9mZmljaWFsUmVwbygpIHsKICAgICAgdmFyIHJlcG8gPSB0aGlzLnJlcG9zLmZpbmQoZnVuY3Rpb24gKHIpIHsKICAgICAgICByZXR1cm4gci51cmxEaXNwbGF5ID09PSBVSV9QTFVHSU5TX1JFUE9fVVJMOwogICAgICB9KTsKICAgICAgcmV0dXJuIHJlcG8gIT09IG51bGwgJiYgcmVwbyAhPT0gdm9pZCAwICYmIHJlcG8uaWQgPyByZXBvIDogdW5kZWZpbmVkOwogICAgfSwKICAgIHBhcnRuZXJzUmVwbzogZnVuY3Rpb24gcGFydG5lcnNSZXBvKCkgewogICAgICB2YXIgcmVwbyA9IHRoaXMucmVwb3MuZmluZChmdW5jdGlvbiAocikgewogICAgICAgIHJldHVybiByLnVybERpc3BsYXkgPT09IFVJX1BMVUdJTlNfUEFSVE5FUlNfUkVQT19VUkw7CiAgICAgIH0pOwogICAgICByZXR1cm4gcmVwbyAhPT0gbnVsbCAmJiByZXBvICE9PSB2b2lkIDAgJiYgcmVwby5pZCA/IHJlcG8gOiB1bmRlZmluZWQ7CiAgICB9CiAgfSksCiAgbWV0aG9kczogewogICAgcmVtb3ZlQ2hhcnQ6IGZ1bmN0aW9uIHJlbW92ZUNoYXJ0KG5hbWUpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBhcHBzLCBmb3VuZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBDQVRBTE9HLkFQUAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgYXBwcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIGZvdW5kID0gYXBwcy5maW5kKGZ1bmN0aW9uIChhcHApIHsKICAgICAgICAgICAgICAgIHJldHVybiBhcHAubmFtZXNwYWNlID09PSBVSV9QTFVHSU5fTkFNRVNQQUNFICYmIGFwcC5uYW1lID09PSBuYW1lOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIGlmICghZm91bmQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZm91bmQucmVtb3ZlKCkpOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcigiQ291bGQgbm90IGZpbmQgY2hhcnQgXHhBN3sgbmFtZSB9IikpKTsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgc2hvd0RpYWxvZzogZnVuY3Rpb24gc2hvd0RpYWxvZygpIHsKICAgICAgdGhpcy5yZW1vdmVSZXBvcyA9IHsKICAgICAgICBvZmZpY2lhbDogISF0aGlzLm9mZmljaWFsUmVwbywKICAgICAgICBwYXJ0bmVyczogISF0aGlzLnBhcnRuZXJzUmVwbwogICAgICB9OwogICAgICB0aGlzLiRtb2RhbC5zaG93KCdjb25maXJtLXVpcGx1Z2lucy1yZW1vdmUnKTsKICAgIH0sCiAgICBkb1JlbW92ZTogZnVuY3Rpb24gZG9SZW1vdmUoYnRuQ2IpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciB1bmluc3RhbGwsIGksIGNoYXJ0LCBwcm9taXNlcywga2V5LCByZXM7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF90aGlzMy5lcnJvcnMgPSBbXTsKCiAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRoZSBjaGFydHMgaW4gdGhlIHJldmVyc2Ugb3JkZXIgdGhhdCB3ZSBpbnN0YWxsIHRoZW0gaW4KICAgICAgICAgICAgICB1bmluc3RhbGwgPSBfdG9Db25zdW1hYmxlQXJyYXkoVUlfUExVR0lOX0NIQVJUUykucmV2ZXJzZSgpOwogICAgICAgICAgICAgIGlmICghX3RoaXMzLnJlbW92ZUNSRCkgewogICAgICAgICAgICAgICAgLy8gVXNlciBkb2VzIG5vdCB3YW50IHRvIHVuaW5zdGFsbCB0aGUgQ1JELCBzbyByZW1vdmUgdGhlIGNoYXJ0CiAgICAgICAgICAgICAgICB1bmluc3RhbGwgPSB1bmluc3RhbGwuZmlsdGVyKGZ1bmN0aW9uIChjaGFydCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gY2hhcnQgIT09IFVJX1BMVUdJTl9PUEVSQVRPUl9DUkRfQ0hBUlRfTkFNRTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGlmICghKGkgPCB1bmluc3RhbGwubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBjaGFydCA9IHVuaW5zdGFsbFtpXTsKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDY7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA5OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczMucmVtb3ZlQ2hhcnQoY2hhcnQpOwogICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDExOwogICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IF9jb250ZXh0M1siY2F0Y2giXSg2KTsKICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzLnB1c2goX2NvbnRleHQzLnQwLm1lc3NhZ2UpOwogICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgLy8gcmVtb3ZlIGV4dGVuc2lvbiByZXBvcyB0aGF0IGhhdmUgYmVlbiBwaWNrZWQKICAgICAgICAgICAgICBwcm9taXNlcyA9IFtdOwogICAgICAgICAgICAgIGZvciAoa2V5IGluIF90aGlzMy5yZW1vdmVSZXBvcykgewogICAgICAgICAgICAgICAgaWYgKF90aGlzMy5yZW1vdmVSZXBvc1trZXldICYmIF90aGlzM1siIi5jb25jYXQoa2V5LCAiUmVwbyIpXSkgewogICAgICAgICAgICAgICAgICBwcm9taXNlcy5wdXNoKF90aGlzM1siIi5jb25jYXQoa2V5LCAiUmVwbyIpXS5yZW1vdmUoKSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsU2V0dGxlZChwcm9taXNlcyk7CiAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgcmVzID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgICAgcmVzLmZvckVhY2goZnVuY3Rpb24gKHJlc3VsdCkgewogICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGF0dXMgPT09ICdyZWplY3RlZCcpIHsKICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihyZXN1bHQucmVhc29uKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCgogICAgICAgICAgICAgICAgICBfdGhpczMuZXJyb3JzLnB1c2gocmVzdWx0LnJlYXNvbik7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIC8vIGZvcmdldCBQTFVHSU5TIHR5cGUgZnJvbSBzdG9yZSBhcyBpdCdzIG5vdCBuZWVkZWQKICAgICAgICAgICAgICBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZvcmdldFR5cGUnLCBVSV9QTFVHSU4pOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gc2V0VGltZW91dChyZXNvbHZlLCA1MDAwKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgICBfdGhpczMuJGVtaXQoJ2RvbmUnKTsKICAgICAgICAgICAgICBidG5DYih0cnVlKTsKICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMywgbnVsbCwgW1s2LCAxMV1dKTsKICAgICAgfSkpKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapGetters","CATALOG","UI_PLUGIN","Dialog","Checkbox","UI_PLUGIN_NAMESPACE","UI_PLUGIN_CHARTS","UI_PLUGIN_OPERATOR_CRD_CHART_NAME","UI_PLUGINS_REPO_NAME","UI_PLUGINS_REPO_URL","UI_PLUGINS_REPO_BRANCH","UI_PLUGINS_PARTNERS_REPO_NAME","UI_PLUGINS_PARTNERS_REPO_URL","UI_PLUGINS_PARTNERS_REPO_BRANCH","components","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","plugins","wrap","_callee$","_context","prev","next","$store","getters","CLUSTER_REPO","dispatch","type","opt","force","sent","hasPluginsInstalled","length","removeCRD","stop","data","errors","removeRepos","official","partners","reposInfo","name","url","branch","computed","_objectSpread","repos","officialRepo","repo","find","r","urlDisplay","id","undefined","partnersRepo","methods","removeChart","_this2","_callee2","apps","found","_callee2$","_context2","APP","app","namespace","abrupt","remove","Promise","reject","Error","showDialog","$modal","show","doRemove","btnCb","_this3","_callee3","uninstall","i","chart","promises","key","res","_callee3$","_context3","_toConsumableArray","reverse","filter","t0","push","message","concat","allSettled","forEach","result","status","console","error","reason","resolve","setTimeout","$emit"],"sources":["node_modules/@rancher/shell/pages/c/_cluster/uiplugins/RemoveUIPlugins.vue"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport { CATALOG, UI_PLUGIN } from '@shell/config/types';\nimport Dialog from '@shell/components/Dialog.vue';\nimport Checkbox from '@components/Form/Checkbox/Checkbox.vue';\nimport {\n  UI_PLUGIN_NAMESPACE,\n  UI_PLUGIN_CHARTS,\n  UI_PLUGIN_OPERATOR_CRD_CHART_NAME,\n  UI_PLUGINS_REPO_NAME,\n  UI_PLUGINS_REPO_URL,\n  UI_PLUGINS_REPO_BRANCH,\n  UI_PLUGINS_PARTNERS_REPO_NAME,\n  UI_PLUGINS_PARTNERS_REPO_URL,\n  UI_PLUGINS_PARTNERS_REPO_BRANCH,\n} from '@shell/config/uiplugins';\n\nexport default {\n  components: {\n    Checkbox,\n    Dialog,\n  },\n\n  async fetch() {\n    if (this.$store.getters['management/schemaFor'](CATALOG.CLUSTER_REPO)) {\n      // we need to force the request, so that we know at all times if what's the status of the offical and partners repos (installed or not)\n      await this.$store.dispatch('management/findAll', { type: CATALOG.CLUSTER_REPO, opt: { force: true } });\n    }\n\n    if (this.$store.getters['management/schemaFor'](UI_PLUGIN)) {\n      const plugins = await this.$store.dispatch('management/findAll', { type: UI_PLUGIN });\n\n      // Are there any plugins installed?\n      this.hasPluginsInstalled = (plugins || []).length > 0;\n      this.removeCRD = !this.hasPluginsInstalled;\n    }\n  },\n\n  data() {\n    return {\n      errors:      [],\n      removeRepos: {\n        official: true,\n        partners: true\n      },\n      reposInfo: {\n        official: {\n          name:   UI_PLUGINS_REPO_NAME,\n          url:    UI_PLUGINS_REPO_URL,\n          branch: UI_PLUGINS_REPO_BRANCH,\n        },\n        partners: {\n          name:   UI_PLUGINS_PARTNERS_REPO_NAME,\n          url:    UI_PLUGINS_PARTNERS_REPO_URL,\n          branch: UI_PLUGINS_PARTNERS_REPO_BRANCH,\n        }\n      },\n      removeCRD:           true,\n      hasPluginsInstalled: false,\n    };\n  },\n\n  computed: {\n    ...mapGetters({ repos: 'catalog/repos' }),\n    officialRepo() {\n      const repo = this.repos.find((r) => r.urlDisplay === UI_PLUGINS_REPO_URL);\n\n      return repo?.id ? repo : undefined;\n    },\n    partnersRepo() {\n      const repo = this.repos.find((r) => r.urlDisplay === UI_PLUGINS_PARTNERS_REPO_URL);\n\n      return repo?.id ? repo : undefined;\n    }\n  },\n\n  methods: {\n    async removeChart(name) {\n      const apps = await this.$store.dispatch('management/findAll', { type: CATALOG.APP });\n      const found = apps.find((app) => {\n        return app.namespace === UI_PLUGIN_NAMESPACE && app.name === name;\n      });\n\n      if (found) {\n        return found.remove();\n      }\n\n      // Return rejected promise - could not find the required chart\n      return Promise.reject(new Error(`Could not find chart §{ name }`));\n    },\n\n    showDialog() {\n      this.removeRepos = {\n        official: !!this.officialRepo,\n        partners: !!this.partnersRepo,\n      };\n      this.$modal.show('confirm-uiplugins-remove');\n    },\n\n    async doRemove(btnCb) {\n      this.errors = [];\n\n      // Remove the charts in the reverse order that we install them in\n      let uninstall = [...UI_PLUGIN_CHARTS].reverse();\n\n      if (!this.removeCRD) {\n        // User does not want to uninstall the CRD, so remove the chart\n        uninstall = uninstall.filter((chart) => chart !== UI_PLUGIN_OPERATOR_CRD_CHART_NAME);\n      }\n\n      for (let i = 0; i < uninstall.length; i++) {\n        const chart = uninstall[i];\n\n        try {\n          await this.removeChart(chart);\n        } catch (e) {\n          this.errors.push(e.message);\n        }\n      }\n\n      // remove extension repos that have been picked\n      const promises = [];\n\n      for (const key in this.removeRepos) {\n        if (this.removeRepos[key] && this[`${ key }Repo`]) {\n          promises.push(this[`${ key }Repo`].remove());\n        }\n      }\n\n      const res = await Promise.allSettled(promises);\n\n      res.forEach((result) => {\n        if (result.status === 'rejected') {\n          console.error(result.reason); // eslint-disable-line no-console\n\n          this.errors.push(result.reason);\n        }\n      });\n\n      // forget PLUGINS type from store as it's not needed\n      this.$store.dispatch('management/forgetType', UI_PLUGIN);\n\n      await new Promise((resolve) => setTimeout(resolve, 5000));\n\n      this.$emit('done');\n\n      btnCb(true);\n    },\n  }\n};\n</script>\n<template>\n  <Dialog\n    name=\"confirm-uiplugins-remove\"\n    :title=\"t('plugins.setup.remove.title')\"\n    mode=\"disable\"\n    data-testid=\"disable-ext-modal\"\n    @okay=\"doRemove\"\n  >\n    <template>\n      <p class=\"mb-20\">\n        {{ t('plugins.setup.remove.prompt') }}\n      </p>\n      <!-- Official repo -->\n      <div\n        class=\"mb-15\"\n      >\n        <Checkbox\n          v-model=\"removeRepos.official\"\n          :primary=\"true\"\n          :disabled=\"!officialRepo\"\n          label-key=\"plugins.setup.remove.registry.official.title\"\n          data-testid=\"disable-ext-modal-remove-official-repo\"\n        />\n        <div\n          v-if=\"!officialRepo\"\n          class=\"checkbox-info\"\n        >\n          ({{ t('plugins.setup.uninstalled') }})\n        </div>\n      </div>\n      <!-- Partners repo -->\n      <div\n        class=\"mb-15\"\n      >\n        <Checkbox\n          v-model=\"removeRepos.partners\"\n          :primary=\"true\"\n          :disabled=\"!partnersRepo\"\n          label-key=\"plugins.setup.remove.registry.partners.title\"\n          data-testid=\"disable-ext-modal-remove-partners-repo\"\n        />\n        <div\n          v-if=\"!partnersRepo\"\n          class=\"checkbox-info\"\n        >\n          ({{ t('plugins.setup.uninstalled') }})\n        </div>\n      </div>\n      <div\n        v-if=\"hasPluginsInstalled\"\n        class=\"mt-20\"\n      >\n        <Checkbox\n          v-model=\"removeCRD\"\n          :primary=\"true\"\n          label-key=\"plugins.setup.remove.crd.title\"\n        />\n        <div class=\"checkbox-info\">\n          {{ t('plugins.setup.remove.crd.prompt') }}\n        </div>\n      </div>\n    </template>\n  </Dialog>\n</template>\n<style lang=\"scss\" scoped>\n  .enable-plugin-support {\n    font-size: 14px;\n    margin-top: 20px;\n  }\n\n  .plugin-setup-error {\n    font-size: 14px;\n    color: var(--error);\n    margin: 10px 0 0 0;\n  }\n\n  .checkbox-info {\n    margin-left: 20px;\n    opacity: 0.7;\n  }\n</style>\n"],"mappings":"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"}]}