{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/Questions/Reference.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/Questions/Reference.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IHsgZmlsdGVyQnkgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwppbXBvcnQgeyBQVkMsIFNUT1JBR0VfQ0xBU1MgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IFF1ZXN0aW9uIGZyb20gJy4vUXVlc3Rpb24nOwoKLy8gT2xkZXIgdmVyc2lvbnMgb2YgcmFuY2hlciBkb2N1bWVudCB0aGVzZSB3b3JkcyBhcyB2YWxpZCB0eXBlcwp2YXIgTEVHQUNZX01BUCA9IHsKICBzdG9yYWdlY2xhc3M6IFNUT1JBR0VfQ0xBU1MsCiAgcHZjOiBQVkMKfTsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExhYmVsZWRJbnB1dDogTGFiZWxlZElucHV0LAogICAgTGFiZWxlZFNlbGVjdDogTGFiZWxlZFNlbGVjdAogIH0sCiAgbWl4aW5zOiBbUXVlc3Rpb25dLAogIHByb3BzOiB7CiAgICBpblN0b3JlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NsdXN0ZXInCiAgICB9LAogICAgdGFyZ2V0TmFtZXNwYWNlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfQogIH0sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmICghX3RoaXMudHlwZVNjaGVtYSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCIiLmNvbmNhdChfdGhpcy5pblN0b3JlLCAiL2ZpbmRBbGwiKSwgewogICAgICAgICAgICAgIHR5cGU6IF90aGlzLnR5cGVOYW1lCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBfdGhpcy5hbGwgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIHQgPSB0aGlzLnF1ZXN0aW9uLnR5cGU7CiAgICB2YXIgdHlwZU5hbWU7CiAgICB2YXIgbWF0Y2ggPSB0Lm1hdGNoKC9ecmVmZXJlbmNlXFsoLiopXF0kLyk7CiAgICBpZiAobWF0Y2gpIHsKICAgICAgdHlwZU5hbWUgPSBtYXRjaCA9PT0gbnVsbCB8fCBtYXRjaCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWF0Y2hbMV07CiAgICB9IGVsc2UgewogICAgICB0eXBlTmFtZSA9IExFR0FDWV9NQVBbdF0gfHwgdDsKICAgIH0KICAgIHZhciB0eXBlU2NoZW1hOwogICAgaWYgKHR5cGVOYW1lKSB7CiAgICAgIHR5cGVTY2hlbWEgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWyIiLmNvbmNhdCh0aGlzLmluU3RvcmUsICIvc2NoZW1hRm9yIildKHR5cGVOYW1lKTsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHR5cGVOYW1lOiB0eXBlTmFtZSwKICAgICAgdHlwZVNjaGVtYTogdHlwZVNjaGVtYSwKICAgICAgYWxsOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpc05hbWVzcGFjZWQ6IGZ1bmN0aW9uIGlzTmFtZXNwYWNlZCgpIHsKICAgICAgdmFyIF90aGlzJHR5cGVTY2hlbWE7CiAgICAgIHJldHVybiAhISgoX3RoaXMkdHlwZVNjaGVtYSA9IHRoaXMudHlwZVNjaGVtYSkgIT09IG51bGwgJiYgX3RoaXMkdHlwZVNjaGVtYSAhPT0gdm9pZCAwICYmIChfdGhpcyR0eXBlU2NoZW1hID0gX3RoaXMkdHlwZVNjaGVtYS5hdHRyaWJ1dGVzKSAhPT0gbnVsbCAmJiBfdGhpcyR0eXBlU2NoZW1hICE9PSB2b2lkIDAgJiYgX3RoaXMkdHlwZVNjaGVtYS5uYW1lc3BhY2VkKTsKICAgIH0sCiAgICBvcHRpb25zOiBmdW5jdGlvbiBvcHRpb25zKCkgewogICAgICB2YXIgb3V0ID0gdGhpcy5hbGw7CiAgICAgIGlmICh0aGlzLmlzTmFtZXNwYWNlZCkgewogICAgICAgIG91dCA9IGZpbHRlckJ5KHRoaXMuYWxsLCAnbWV0YWRhdGEubmFtZXNwYWNlJywgdGhpcy50YXJnZXROYW1lc3BhY2UpOwogICAgICB9CiAgICAgIHJldHVybiBvdXQubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxhYmVsOiB4Lm5hbWVEaXNwbGF5IHx8IHgubWV0YWRhdGEubmFtZSwKICAgICAgICAgIHZhbHVlOiB4Lm1ldGFkYXRhLm5hbWUKICAgICAgICB9OwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["LabeledInput","LabeledSelect","filterBy","PVC","STORAGE_CLASS","Question","LEGACY_MAP","storageclass","pvc","components","mixins","props","inStore","type","String","default","targetNamespace","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","typeSchema","$store","dispatch","concat","typeName","all","sent","stop","data","t","question","match","getters","computed","isNamespaced","_this$typeSchema","attributes","namespaced","options","out","map","x","label","nameDisplay","metadata","name","value"],"sources":["node_modules/@rancher/shell/components/Questions/Reference.vue"],"sourcesContent":["<script>\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { filterBy } from '@shell/utils/array';\nimport { PVC, STORAGE_CLASS } from '@shell/config/types';\nimport Question from './Question';\n\n// Older versions of rancher document these words as valid types\nconst LEGACY_MAP = {\n  storageclass: STORAGE_CLASS,\n  pvc:          PVC,\n};\n\nexport default {\n  components: { LabeledInput, LabeledSelect },\n  mixins:     [Question],\n\n  props: {\n    inStore: {\n      type:    String,\n      default: 'cluster',\n    },\n\n    targetNamespace: {\n      type:    String,\n      default: null,\n    },\n  },\n\n  async fetch() {\n    if ( this.typeSchema ) {\n      this.all = await this.$store.dispatch(`${ this.inStore }/findAll`, { type: this.typeName });\n    }\n  },\n\n  data() {\n    const t = this.question.type;\n\n    let typeName;\n\n    const match = t.match(/^reference\\[(.*)\\]$/);\n\n    if ( match ) {\n      typeName = match?.[1];\n    } else {\n      typeName = LEGACY_MAP[t] || t;\n    }\n\n    let typeSchema;\n\n    if ( typeName ) {\n      typeSchema = this.$store.getters[`${ this.inStore }/schemaFor`](typeName);\n    }\n\n    return {\n      typeName,\n      typeSchema,\n      all: [],\n    };\n  },\n\n  computed: {\n    isNamespaced() {\n      return !!this.typeSchema?.attributes?.namespaced;\n    },\n\n    options() {\n      let out = this.all;\n\n      if ( this.isNamespaced ) {\n        out = filterBy(this.all, 'metadata.namespace', this.targetNamespace);\n      }\n\n      return out.map((x) => {\n        return {\n          label: x.nameDisplay || x.metadata.name,\n          value: x.metadata.name\n        };\n      });\n    }\n  },\n};\n</script>\n\n<template>\n  <div\n    v-if=\"typeSchema\"\n    class=\"row\"\n  >\n    <div class=\"col span-6\">\n      <LabeledSelect\n        :mode=\"mode\"\n        :options=\"options\"\n        :disabled=\"$fetchState.pending || disabled\"\n        :label=\"displayLabel\"\n        :placeholder=\"question.description\"\n        :required=\"question.required\"\n        :value=\"value\"\n        :tooltip=\"displayTooltip\"\n        @input=\"!$fetchState.pending && $emit('input', $event)\"\n      />\n    </div>\n    <div class=\"col span-6 mt-10\">\n      {{ typeSchema.attributes.kind }}<span v-if=\"isNamespaced\"> in namespace {{ targetNamespace }}</span>\n      <div v-if=\"showDescription\">\n        {{ question.description }}\n      </div>\n    </div>\n  </div>\n  <div\n    v-else\n    class=\"row\"\n  >\n    <div class=\"col span-6\">\n      <LabeledInput\n        :mode=\"mode\"\n        :disabled=\"$fetchState.pending || disabled\"\n        :label=\"displayLabel\"\n        :placeholder=\"question.description\"\n        :required=\"question.required\"\n        :value=\"value\"\n        :tooltip=\"displayTooltip\"\n        @input=\"!$fetchState.pending && $emit('input', $event)\"\n      />\n    </div>\n    <div class=\"col span-6 mt-10\">\n      {{ question.type }}<span v-if=\"isNamespaced\"> in namespace {{ targetNamespace }}</span>\n      <div v-if=\"showDescription\">\n        {{ question.description }}\n      </div>\n      <div class=\"text-error\">\n        (You do not have access to list this type)\n      </div>\n    </div>\n  </div>\n</template>\n"],"mappings":";;;;;;AACA,SAAAA,YAAA;AACA,OAAAC,aAAA;AACA,SAAAC,QAAA;AACA,SAAAC,GAAA,EAAAC,aAAA;AACA,OAAAC,QAAA;;AAEA;AACA,IAAAC,UAAA;EACAC,YAAA,EAAAH,aAAA;EACAI,GAAA,EAAAL;AACA;AAEA;EACAM,UAAA;IAAAT,YAAA,EAAAA,YAAA;IAAAC,aAAA,EAAAA;EAAA;EACAS,MAAA,GAAAL,QAAA;EAEAM,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IAEAC,eAAA;MACAH,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EAEAE,KAAA,WAAAA,MAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAAC,QAAA;MAAA,OAAAF,kBAAA,CAAAG,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAA,KACAT,KAAA,CAAAU,UAAA;cAAAH,QAAA,CAAAE,IAAA;cAAA;YAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACAT,KAAA,CAAAW,MAAA,CAAAC,QAAA,IAAAC,MAAA,CAAAb,KAAA,CAAAN,OAAA;cAAAC,IAAA,EAAAK,KAAA,CAAAc;YAAA;UAAA;YAAAd,KAAA,CAAAe,GAAA,GAAAR,QAAA,CAAAS,IAAA;UAAA;UAAA;YAAA,OAAAT,QAAA,CAAAU,IAAA;QAAA;MAAA,GAAAb,OAAA;IAAA;EAEA;EAEAc,IAAA,WAAAA,KAAA;IACA,IAAAC,CAAA,QAAAC,QAAA,CAAAzB,IAAA;IAEA,IAAAmB,QAAA;IAEA,IAAAO,KAAA,GAAAF,CAAA,CAAAE,KAAA;IAEA,IAAAA,KAAA;MACAP,QAAA,GAAAO,KAAA,aAAAA,KAAA,uBAAAA,KAAA;IACA;MACAP,QAAA,GAAA1B,UAAA,CAAA+B,CAAA,KAAAA,CAAA;IACA;IAEA,IAAAT,UAAA;IAEA,IAAAI,QAAA;MACAJ,UAAA,QAAAC,MAAA,CAAAW,OAAA,IAAAT,MAAA,MAAAnB,OAAA,iBAAAoB,QAAA;IACA;IAEA;MACAA,QAAA,EAAAA,QAAA;MACAJ,UAAA,EAAAA,UAAA;MACAK,GAAA;IACA;EACA;EAEAQ,QAAA;IACAC,YAAA,WAAAA,aAAA;MAAA,IAAAC,gBAAA;MACA,WAAAA,gBAAA,QAAAf,UAAA,cAAAe,gBAAA,gBAAAA,gBAAA,GAAAA,gBAAA,CAAAC,UAAA,cAAAD,gBAAA,eAAAA,gBAAA,CAAAE,UAAA;IACA;IAEAC,OAAA,WAAAA,QAAA;MACA,IAAAC,GAAA,QAAAd,GAAA;MAEA,SAAAS,YAAA;QACAK,GAAA,GAAA7C,QAAA,MAAA+B,GAAA,6BAAAjB,eAAA;MACA;MAEA,OAAA+B,GAAA,CAAAC,GAAA,WAAAC,CAAA;QACA;UACAC,KAAA,EAAAD,CAAA,CAAAE,WAAA,IAAAF,CAAA,CAAAG,QAAA,CAAAC,IAAA;UACAC,KAAA,EAAAL,CAAA,CAAAG,QAAA,CAAAC;QACA;MACA;IACA;EACA;AACA"}]}