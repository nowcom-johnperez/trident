{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/ServiceTargets.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/ServiceTargets.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmVuZHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgaXNFbXB0eSBmcm9tICdsb2Rhc2gvaXNFbXB0eSc7CmltcG9ydCB7IENBVFRMRV9QVUJMSUNfRU5EUE9JTlRTIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgRW5kcG9pbnRzIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm1hdHRlci9FbmRwb2ludHMnOwppbXBvcnQgaGFzIGZyb20gJ2xvZGFzaC9oYXMnOwppbXBvcnQgeyBpc01heWJlU2VjdXJlIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3VybCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBFbmRwb2ludHM6IEVuZHBvaW50cwogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFtBcnJheSwgU3RyaW5nXSwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIHJvdzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgY29sOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICBoYXNQdWJsaWM6IGZ1bmN0aW9uIGhhc1B1YmxpYygpIHsKICAgICAgdmFyIF90aGlzJHJvdyRtZXRhZGF0YSRhbiA9IHRoaXMucm93Lm1ldGFkYXRhLmFubm90YXRpb25zLAogICAgICAgIGFubm90YXRpb25zID0gX3RoaXMkcm93JG1ldGFkYXRhJGFuID09PSB2b2lkIDAgPyB7fSA6IF90aGlzJHJvdyRtZXRhZGF0YSRhbjsKICAgICAgaWYgKCFpc0VtcHR5KGFubm90YXRpb25zKSAmJiBoYXMoYW5ub3RhdGlvbnMsIENBVFRMRV9QVUJMSUNfRU5EUE9JTlRTKSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICBwYXJzZWQ6IGZ1bmN0aW9uIHBhcnNlZCgpIHsKICAgICAgdmFyIHJvdyA9IHRoaXMucm93LAogICAgICAgIGhhc1B1YmxpYyA9IHRoaXMuaGFzUHVibGljOwogICAgICB2YXIgX3JvdyRtZXRhZGF0YSRhbm5vdGF0ID0gcm93Lm1ldGFkYXRhLmFubm90YXRpb25zLAogICAgICAgIGFubm90YXRpb25zID0gX3JvdyRtZXRhZGF0YSRhbm5vdGF0ID09PSB2b2lkIDAgPyB7fSA6IF9yb3ckbWV0YWRhdGEkYW5ub3RhdCwKICAgICAgICBfcm93JHNwZWMgPSByb3cuc3BlYywKICAgICAgICBfcm93JHNwZWMkY2x1c3RlcklQID0gX3JvdyRzcGVjLmNsdXN0ZXJJUCwKICAgICAgICBjbHVzdGVySVAgPSBfcm93JHNwZWMkY2x1c3RlcklQID09PSB2b2lkIDAgPyBudWxsIDogX3JvdyRzcGVjJGNsdXN0ZXJJUCwKICAgICAgICBfcm93JHNwZWMkcG9ydHMgPSBfcm93JHNwZWMucG9ydHMsCiAgICAgICAgcG9ydHMgPSBfcm93JHNwZWMkcG9ydHMgPT09IHZvaWQgMCA/IFtdIDogX3JvdyRzcGVjJHBvcnRzLAogICAgICAgIHNlcnZpY2VUeXBlID0gX3JvdyRzcGVjLnR5cGUsCiAgICAgICAgZXh0ZXJuYWxOYW1lID0gX3JvdyRzcGVjLmV4dGVybmFsTmFtZTsKICAgICAgdmFyIG91dCA9IFtdOwogICAgICB2YXIgaXNIZWFkbGVzcyA9IHNlcnZpY2VUeXBlID09PSAnQ2x1c3RlcklQJyAmJiBjbHVzdGVySVAgPT09ICdOb25lJzsKICAgICAgdmFyIHBhcnNlZENsdXN0ZXJJcCA9ICFpc0VtcHR5KGNsdXN0ZXJJUCkgJiYgIWlzSGVhZGxlc3MgPyAiIi5jb25jYXQoY2x1c3RlcklQLCAiOiIpIDogJyc7CiAgICAgIHZhciBsYWJlbCA9ICcnOwogICAgICB2YXIgbGluayA9ICcnOwogICAgICBpZiAoaGFzUHVibGljKSB7CiAgICAgICAgcmV0dXJuIGFubm90YXRpb25zW0NBVFRMRV9QVUJMSUNfRU5EUE9JTlRTXTsKICAgICAgfQoKICAgICAgLy8gPENMVVNURVJfSVA+OjxQT1JUPi88UFJPVE9DT0w+ID4gPFRBUkdFVCBQT1JUPgogICAgICBpZiAoaXNFbXB0eShwb3J0cykpIHsKICAgICAgICBpZiAoIWlzRW1wdHkocGFyc2VkQ2x1c3RlcklwKSkgewogICAgICAgICAgbGFiZWwgPSBwYXJzZWRDbHVzdGVySXA7CiAgICAgICAgfSBlbHNlIGlmIChzZXJ2aWNlVHlwZSA9PT0gJ0V4dGVybmFsTmFtZScgJiYgIWlzRW1wdHkoZXh0ZXJuYWxOYW1lKSkgewogICAgICAgICAgbGFiZWwgPSBleHRlcm5hbE5hbWU7CiAgICAgICAgfQogICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgIGxhYmVsOiBsYWJlbCwKICAgICAgICAgIGxpbms6IGxpbmsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIHsKICAgICAgICBwb3J0cy5mb3JFYWNoKGZ1bmN0aW9uIChwKSB7CiAgICAgICAgICB2YXIgcHJveHlVcmw7CiAgICAgICAgICB2YXIgc3RyaW5nUG9ydCA9IHAucG9ydC50b1N0cmluZygpOwogICAgICAgICAgaWYgKChwID09PSBudWxsIHx8IHAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHAucHJvdG9jb2wpID09PSAnVENQJyAmJiAoc3RyaW5nUG9ydC5lbmRzV2l0aCgnODAnKSB8fCBzdHJpbmdQb3J0LmVuZHNXaXRoKCc0NDMnKSkpIHsKICAgICAgICAgICAgaWYgKGlzTWF5YmVTZWN1cmUocC5wb3J0LCBwID09PSBudWxsIHx8IHAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHAucHJvdG9jb2wpKSB7CiAgICAgICAgICAgICAgcHJveHlVcmwgPSByb3cucHJveHlVcmwoJ2h0dHBzJywgcC5wb3J0KTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBwcm94eVVybCA9IHJvdy5wcm94eVVybCgnaHR0cCcsIHAucG9ydCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICAgIHZhciBjbHVzdGVySXBBbmRQb3J0ID0gcHJveHlVcmwgPyAiPGEgaHJlZj1cIiIuY29uY2F0KHByb3h5VXJsLCAiXCIgdGFyZ2V0PVwiX2JsYW5rXCIgcmVsPVwibm9vcGVuZXIgbm9yZWZlcnJlciBub2ZvbGxvd1wiPiIpLmNvbmNhdChwICE9PSBudWxsICYmIHAgIT09IHZvaWQgMCAmJiBwLm5hbWUgPyBwLm5hbWUgOiAiIi5jb25jYXQocGFyc2VkQ2x1c3RlcklwKS5jb25jYXQocC5wb3J0KSwgIjwvYT4iKSA6ICIiLmNvbmNhdChwYXJzZWRDbHVzdGVySXApLmNvbmNhdChwLnBvcnQpOwogICAgICAgICAgdmFyIHRhcmdldFBvcnQgPSBwICE9PSBudWxsICYmIHAgIT09IHZvaWQgMCAmJiBwLnRhcmdldFBvcnQgPyAiIDxzcGFuIGNsYXNzPVwiaWNvbiBpY29uLWVuZHBvaW50c19jb25uZWN0ZWQgaWNvbi1sZ1wiPjwvc3Bhbj4gIi5jb25jYXQocC50YXJnZXRQb3J0KSA6ICcnOwogICAgICAgICAgdmFyIHByb3RvY29sID0gcCAhPT0gbnVsbCAmJiBwICE9PSB2b2lkIDAgJiYgcC5wcm90b2NvbCA/ICIvIi5jb25jYXQocC5wcm90b2NvbCkgOiAnJzsKICAgICAgICAgIGxhYmVsID0gIiIuY29uY2F0KGNsdXN0ZXJJcEFuZFBvcnQpLmNvbmNhdCh0YXJnZXRQb3J0KS5jb25jYXQocHJvdG9jb2wpOwogICAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgICBsYWJlbDogbGFiZWwsCiAgICAgICAgICAgIGxpbms6IGxpbmsKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["isEmpty","CATTLE_PUBLIC_ENDPOINTS","Endpoints","has","isMaybeSecure","components","props","value","type","Array","String","default","row","Object","required","col","computed","hasPublic","_this$row$metadata$an","metadata","annotations","parsed","_row$metadata$annotat","_row$spec","spec","_row$spec$clusterIP","clusterIP","_row$spec$ports","ports","serviceType","externalName","out","isHeadless","parsedClusterIp","concat","label","link","push","forEach","p","proxyUrl","stringPort","port","toString","protocol","endsWith","clusterIpAndPort","name","targetPort"],"sources":["node_modules/@rancher/shell/components/formatter/ServiceTargets.vue"],"sourcesContent":["<script>\nimport isEmpty from 'lodash/isEmpty';\nimport { CATTLE_PUBLIC_ENDPOINTS } from '@shell/config/labels-annotations';\nimport Endpoints from '@shell/components/formatter/Endpoints';\nimport has from 'lodash/has';\nimport { isMaybeSecure } from '@shell/utils/url';\n\nexport default {\n  components: { Endpoints },\n  props:      {\n    value: {\n      type:    [Array, String],\n      default: null,\n    },\n    row: {\n      type:     Object,\n      required: true,\n    },\n    col: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  computed: {\n    hasPublic() {\n      const { metadata: { annotations = {} } } = this.row;\n\n      if (!isEmpty(annotations) && has(annotations, CATTLE_PUBLIC_ENDPOINTS)) {\n        return true;\n      }\n\n      return false;\n    },\n\n    parsed() {\n      const { row, hasPublic } = this;\n      const {\n        metadata: { annotations = {} },\n        spec: {\n          clusterIP = null, ports = [], type: serviceType, externalName\n        },\n      } = row;\n      const out = [];\n      const isHeadless = serviceType === 'ClusterIP' && clusterIP === 'None';\n      const parsedClusterIp =\n        !isEmpty(clusterIP) && !isHeadless ? `${ clusterIP }:` : '';\n      let label = '';\n      const link = '';\n\n      if (hasPublic) {\n        return annotations[CATTLE_PUBLIC_ENDPOINTS];\n      }\n\n      // <CLUSTER_IP>:<PORT>/<PROTOCOL> > <TARGET PORT>\n      if (isEmpty(ports)) {\n        if (!isEmpty(parsedClusterIp)) {\n          label = parsedClusterIp;\n        } else if (serviceType === 'ExternalName' && !isEmpty(externalName)) {\n          label = externalName;\n        }\n\n        out.push({\n          label,\n          link,\n        });\n      } else {\n        ports.forEach((p) => {\n          let proxyUrl;\n\n          const stringPort = p.port.toString();\n\n          if (p?.protocol === 'TCP' && (stringPort.endsWith('80') || stringPort.endsWith('443'))) {\n            if (isMaybeSecure(p.port, p?.protocol)) {\n              proxyUrl = row.proxyUrl('https', p.port);\n            } else {\n              proxyUrl = row.proxyUrl('http', p.port);\n            }\n          }\n\n          const clusterIpAndPort = proxyUrl ? `<a href=\"${ proxyUrl }\" target=\"_blank\" rel=\"noopener noreferrer nofollow\">${ p?.name ? p.name : `${ parsedClusterIp }${ p.port }` }</a>` : `${ parsedClusterIp }${ p.port }`;\n          const targetPort = p?.targetPort ? ` <span class=\"icon icon-endpoints_connected icon-lg\"></span> ${ p.targetPort }` : '';\n          const protocol = p?.protocol ? `/${ p.protocol }` : '';\n\n          label = `${ clusterIpAndPort }${ targetPort }${ protocol }`;\n\n          out.push({\n            label,\n            link,\n          });\n        });\n      }\n\n      return out;\n    },\n  },\n};\n</script>>\n\n<template>\n  <div>\n    <div\n      v-if=\"hasPublic\"\n      class=\"text-small\"\n    >\n      <Endpoints\n        v-model=\"parsed\"\n        :row=\"{}\"\n        :col=\"{}\"\n      />\n    </div>\n    <div\n      v-for=\"(port, index) in parsed\"\n      v-else\n      :key=\"index\"\n      class=\"text-small\"\n    >\n      <span v-clean-html=\"port.label\" />\n    </div>\n  </div>\n</template>\n"],"mappings":"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"}]}