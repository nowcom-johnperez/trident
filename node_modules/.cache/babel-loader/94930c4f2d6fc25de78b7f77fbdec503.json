{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc-root-store.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc-root-store.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0IGdjIGZyb20gJy4vZ2MnOwppbXBvcnQgZ2NJbnRlcnZhbCBmcm9tICcuL2djLWludGVydmFsJzsKaW1wb3J0IGdjUm91dGUgZnJvbSAnLi9nYy1yb3V0ZS1jaGFuZ2VkJzsKZXhwb3J0IHZhciBnY0dldHRlcnMgPSB7CiAgLyoqCiAgICogRmV0Y2ggYWxsIHN0b3JlcyB0aGF0IHN1cHBvcnQgZ2FyYmFnZSBjb2xsZWN0aW9uCiAgICovCiAgZ2NTdG9yZXM6IGZ1bmN0aW9uIGdjU3RvcmVzKHN0YXRlKSB7CiAgICAvLyBJdCB3b3VsZCBiZSBuaWNlIHRvIGdyYWIgYWxsIHZ1ZXggbW9kdWxlIHN0b3JlcyB0aGF0IHdlJ3ZlIHJlZ2lzdGVyZWQsIGFwcGFyZW50bHkgdGhpcyBpcyBvbmx5IHBvc3NpYmxlIHZpYSB0aGUKICAgIC8vIGludGVybmFsIHByb3BlcnRpZXMgc3RvcmUuX21vZHVsZXMucm9vdC5fY2hpbGRyZW4uCiAgICAvLyBTbyBpbnN0ZWFkIGxvb3AgdGhyb3VnaCBhbGwgc3RhdGUgZW50cmllcyB0byBmaW5kIHRoZSBnYyBzdG9yZXMKICAgIHJldHVybiBPYmplY3QuZW50cmllcyhzdGF0ZSkuZmlsdGVyKGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgIHN0b3JlTmFtZSA9IF9yZWYyWzBdLAogICAgICAgIHN0b3JlU3RhdGUgPSBfcmVmMlsxXTsKICAgICAgaWYgKF90eXBlb2Yoc3RvcmVTdGF0ZSkgIT09ICdvYmplY3QnKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICghZ2MuZ2NFbmFibGVkRm9yU3RvcmUoc3RvcmVTdGF0ZSkpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9KTsKICB9Cn07CmV4cG9ydCB2YXIgZ2NBY3Rpb25zID0gewogIGdjUHJlZmVyZW5jZXNVcGRhdGVkOiBmdW5jdGlvbiBnY1ByZWZlcmVuY2VzVXBkYXRlZChfcmVmMywgX3JlZjQpIHsKICAgIHZhciBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoOwogICAgdmFyIHByZXZpb3VzbHlFbmFibGVkID0gX3JlZjQucHJldmlvdXNseUVuYWJsZWQsCiAgICAgIG5ld1ByZWZlcmVuY2VzID0gX3JlZjQubmV3UHJlZmVyZW5jZXM7CiAgICAvLyBBbHdheXMgc3RvcCB0aGUgaW50ZXJ2YWwKICAgIC8vIC0gR0MgRGlzYWJsZWQsIHNvIGl0IG5lZWRzIHRvIHN0b3AKICAgIC8vIC0gR0MgRW5hYmxlZCwgd2UgbmVlZCB0byBwaWNrIHVwIG5ldyBzZXR0aW5ncwogICAgZGlzcGF0Y2goJ2djU3RvcEludGVydmFscycsIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7CiAgICBpZiAobmV3UHJlZmVyZW5jZXMuZW5hYmxlZCkgewogICAgICAvLyBDYXRlciBmb3IgZnVuY3Rpb25hbGl0eSB0aGF0IHdlIGdldCB3aGVuIHRoZSBhcHAgbG9hZHMKICAgICAgZGlzcGF0Y2goJ2djU3RhcnRJbnRlcnZhbHMnLCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgIH0gZWxzZSBpZiAocHJldmlvdXNseUVuYWJsZWQpIHsKICAgICAgLy8gSWYgd2UncmUgZ29pbmcgZnJvbSBlbmFibGVkIC0tPiBkaXNhYmxlZCB3ZSBzaG91bGQgcmVzZXQgYW55IGdjIHN0YXRlIHdlIGhhdmUgc3RvcmVkLiBUaGlzIGF2b2lkcy4uLgogICAgICAvLyAtIExhc3QgYWNjZXNzZWQgdGltZXMgYXJlIHN0b3JlZAogICAgICAvLyAtIEdDIGRpc2FibGVkIHNvIHdlIGRvbid0IHVwZGF0ZSBsYXN0IGFjY2Vzc2VkIHRpbWVzCiAgICAgIC8vIC0gR0MgZW5hYmxlZCBhbmQgd2UgaGF2ZSBzdGFsZSBhY2Nlc3NlZCB0aW1lcyBpbiB0aGUgc3RvcmUKICAgICAgZGlzcGF0Y2goJ2djUmVzZXRTdG9yZXMnLCB7CiAgICAgICAgcm9vdDogdHJ1ZQogICAgICB9KTsKICAgIH0KICB9LAogIGdjUm91dGVDaGFuZ2VkOiBmdW5jdGlvbiBnY1JvdXRlQ2hhbmdlZChjdHgsIHRvKSB7CiAgICBnY1JvdXRlLmdjUm91dGVDaGFuZ2VkKGN0eCwgdG8pOwogIH0sCiAgZ2NTdGFydEludGVydmFsczogZnVuY3Rpb24gZ2NTdGFydEludGVydmFscyhjdHgpIHsKICAgIGdjSW50ZXJ2YWwuZ2NTdGFydEludGVydmFscyhjdHgpOwogIH0sCiAgZ2NTdG9wSW50ZXJ2YWxzOiBmdW5jdGlvbiBnY1N0b3BJbnRlcnZhbHMoY3R4KSB7CiAgICBnY0ludGVydmFsLmdjU3RvcEludGVydmFscygpOwogIH0sCiAgZ2NSZXNldFN0b3JlczogZnVuY3Rpb24gZ2NSZXNldFN0b3JlcyhfcmVmNSkgewogICAgdmFyIGRpc3BhdGNoID0gX3JlZjUuZGlzcGF0Y2gsCiAgICAgIGdldHRlcnMgPSBfcmVmNS5nZXR0ZXJzOwogICAgZ2V0dGVycy5nY1N0b3Jlcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmNikgewogICAgICB2YXIgX3JlZjcgPSBfc2xpY2VkVG9BcnJheShfcmVmNiwgMiksCiAgICAgICAgc3RvcmVOYW1lID0gX3JlZjdbMF0sCiAgICAgICAgc3RvcmVTdGF0ZSA9IF9yZWY3WzFdOwogICAgICBkaXNwYXRjaCgiIi5jb25jYXQoc3RvcmVOYW1lLCAiL2djUmVzZXRTdG9yZSIpKTsKICAgIH0pOwogIH0sCiAgLyoqCiAgICogS2ljayBvZiBhIEdDIGluIGFsbCBzdG9yZXMgdGhhdCBzdXBwb3J0IGl0CiAgICovCiAgZ2FyYmFnZUNvbGxlY3Q6IGZ1bmN0aW9uIGdhcmJhZ2VDb2xsZWN0KF9yZWY4LCBpZ25vcmVUeXBlcykgewogICAgdmFyIHJvb3RTdGF0ZSA9IF9yZWY4LnJvb3RTdGF0ZSwKICAgICAgZGlzcGF0Y2ggPSBfcmVmOC5kaXNwYXRjaCwKICAgICAgZ2V0dGVycyA9IF9yZWY4LmdldHRlcnM7CiAgICBpZiAoIWdjLmdjRW5hYmxlZFNldHRpbmcoewogICAgICByb290U3RhdGU6IHJvb3RTdGF0ZQogICAgfSkpIHsKICAgICAgcmV0dXJuOwogICAgfQogICAgZ2V0dGVycy5nY1N0b3Jlcy5mb3JFYWNoKGZ1bmN0aW9uIChfcmVmOSkgewogICAgICB2YXIgX3JlZjEwID0gX3NsaWNlZFRvQXJyYXkoX3JlZjksIDIpLAogICAgICAgIHN0b3JlTmFtZSA9IF9yZWYxMFswXSwKICAgICAgICBzdG9yZVN0YXRlID0gX3JlZjEwWzFdOwogICAgICBkaXNwYXRjaCgiIi5jb25jYXQoc3RvcmVOYW1lLCAiL2dhcmJhZ2VDb2xsZWN0IiksIGlnbm9yZVR5cGVzKTsKICAgIH0pOwogIH0KfTs="},{"version":3,"names":["gc","gcInterval","gcRoute","gcGetters","gcStores","state","Object","entries","filter","_ref","_ref2","_slicedToArray","storeName","storeState","_typeof","gcEnabledForStore","gcActions","gcPreferencesUpdated","_ref3","_ref4","dispatch","previouslyEnabled","newPreferences","root","enabled","gcRouteChanged","ctx","to","gcStartIntervals","gcStopIntervals","gcResetStores","_ref5","getters","forEach","_ref6","_ref7","concat","garbageCollect","_ref8","ignoreTypes","rootState","gcEnabledSetting","_ref9","_ref10"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc-root-store.js"],"sourcesContent":["import gc from './gc';\nimport gcInterval from './gc-interval';\nimport gcRoute from './gc-route-changed';\n\nexport const gcGetters = {\n  /**\n   * Fetch all stores that support garbage collection\n   */\n  gcStores(state) {\n    // It would be nice to grab all vuex module stores that we've registered, apparently this is only possible via the\n    // internal properties store._modules.root._children.\n    // So instead loop through all state entries to find the gc stores\n    return Object.entries(state).filter(([storeName, storeState]) => {\n      if (typeof (storeState) !== 'object') {\n        return;\n      }\n\n      if (!gc.gcEnabledForStore(storeState)) {\n        return;\n      }\n\n      return true;\n    });\n  }\n};\n\nexport const gcActions = {\n  gcPreferencesUpdated({ dispatch }, { previouslyEnabled, newPreferences }) {\n    // Always stop the interval\n    // - GC Disabled, so it needs to stop\n    // - GC Enabled, we need to pick up new settings\n    dispatch('gcStopIntervals', { root: true });\n\n    if (newPreferences.enabled) {\n      // Cater for functionality that we get when the app loads\n      dispatch('gcStartIntervals', { root: true });\n    } else if (previouslyEnabled) {\n      // If we're going from enabled --> disabled we should reset any gc state we have stored. This avoids...\n      // - Last accessed times are stored\n      // - GC disabled so we don't update last accessed times\n      // - GC enabled and we have stale accessed times in the store\n      dispatch('gcResetStores', { root: true });\n    }\n  },\n\n  gcRouteChanged(ctx, to) {\n    gcRoute.gcRouteChanged(ctx, to);\n  },\n\n  gcStartIntervals(ctx) {\n    gcInterval.gcStartIntervals(ctx);\n  },\n\n  gcStopIntervals(ctx) {\n    gcInterval.gcStopIntervals();\n  },\n\n  gcResetStores({ dispatch, getters }) {\n    getters.gcStores.forEach(([storeName, storeState]) => {\n      dispatch(`${ storeName }/gcResetStore`);\n    });\n  },\n\n  /**\n   * Kick of a GC in all stores that support it\n   */\n  garbageCollect({ rootState, dispatch, getters }, ignoreTypes) {\n    if (!gc.gcEnabledSetting({ rootState })) {\n      return;\n    }\n\n    getters.gcStores.forEach(([storeName, storeState]) => {\n      dispatch(`${ storeName }/garbageCollect`, ignoreTypes);\n    });\n  }\n};\n"],"mappings":"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"}]}