{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/models/service.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/models/service.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanMiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZiI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KaW1wb3J0IGZpbmQgZnJvbSAnbG9kYXNoL2ZpbmQnOwppbXBvcnQgeyBQT0QgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IFN0ZXZlTW9kZWwgZnJvbSAnQHNoZWxsL3BsdWdpbnMvc3RldmUvc3RldmUtY2xhc3MnOwpleHBvcnQgdmFyIERFRkFVTFRfU0VSVklDRV9UWVBFUyA9IFt7CiAgaWQ6ICdDbHVzdGVySVAnLAogIGxhYmVsOiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5jbHVzdGVySXAubGFiZWwnLAogIGRlc2NyaXB0aW9uOiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5jbHVzdGVySXAuZGVzY3JpcHRpb24nLAogIGJhbm5lckFiYnJ2OiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5jbHVzdGVySXAuYWJicnYnCn0sIHsKICBpZDogJ0V4dGVybmFsTmFtZScsCiAgbGFiZWw6ICdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLmV4dGVybmFsTmFtZS5sYWJlbCcsCiAgZGVzY3JpcHRpb246ICdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLmV4dGVybmFsTmFtZS5kZXNjcmlwdGlvbicsCiAgYmFubmVyQWJicnY6ICdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLmV4dGVybmFsTmFtZS5hYmJydicKfSwgewogIGlkOiAnSGVhZGxlc3MnLAogIGxhYmVsOiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5oZWFkbGVzcy5sYWJlbCcsCiAgZGVzY3JpcHRpb246ICdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLmhlYWRsZXNzLmRlc2NyaXB0aW9uJywKICBiYW5uZXJBYmJydjogJ3NlcnZpY2VzUGFnZS5zZXJ2aWNlVHlwZXMuaGVhZGxlc3MuYWJicnYnCn0sIHsKICBpZDogJ0xvYWRCYWxhbmNlcicsCiAgbGFiZWw6ICdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLmxvYWRCYWxhbmNlci5sYWJlbCcsCiAgZGVzY3JpcHRpb246ICdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLmxvYWRCYWxhbmNlci5kZXNjcmlwdGlvbicsCiAgYmFubmVyQWJicnY6ICdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLmxvYWRCYWxhbmNlci5hYmJydicKfSwgewogIGlkOiAnTm9kZVBvcnQnLAogIGxhYmVsOiAnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5ub2RlUG9ydC5sYWJlbCcsCiAgZGVzY3JpcHRpb246ICdzZXJ2aWNlc1BhZ2Uuc2VydmljZVR5cGVzLm5vZGVQb3J0LmRlc2NyaXB0aW9uJywKICBiYW5uZXJBYmJydjogJ3NlcnZpY2VzUGFnZS5zZXJ2aWNlVHlwZXMubm9kZVBvcnQuYWJicnYnCn1dOwpleHBvcnQgdmFyIEhFQURMRVNTID0gZnVuY3Rpb24gKCkgewogIHZhciBoZWFkbGVzcyA9IGZpbmQoREVGQVVMVF9TRVJWSUNFX1RZUEVTLCBbJ2lkJywgJ0hlYWRsZXNzJ10pOwogIHJldHVybiBoZWFkbGVzcy5pZDsKfSgpOwpleHBvcnQgdmFyIENMVVNURVJJUCA9IGZ1bmN0aW9uICgpIHsKICB2YXIgY2x1c3RlcklwID0gZmluZChERUZBVUxUX1NFUlZJQ0VfVFlQRVMsIFsnaWQnLCAnQ2x1c3RlcklQJ10pOwogIHJldHVybiBjbHVzdGVySXAuaWQ7Cn0oKTsKdmFyIF9kZWZhdWx0ID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfU3RldmVNb2RlbCkgewogIF9pbmhlcml0cyhfZGVmYXVsdCwgX1N0ZXZlTW9kZWwpOwogIHZhciBfc3VwZXIgPSBfY3JlYXRlU3VwZXIoX2RlZmF1bHQpOwogIGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIF9kZWZhdWx0KTsKICAgIHJldHVybiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICB9CiAgX2NyZWF0ZUNsYXNzKF9kZWZhdWx0LCBbewogICAga2V5OiAiY3VzdG9tVmFsaWRhdGlvblJ1bGVzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gW3sKICAgICAgICBudWxsYWJsZTogZmFsc2UsCiAgICAgICAgcGF0aDogJ21ldGFkYXRhLm5hbWUnLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHRyYW5zbGF0aW9uS2V5OiAnZ2VuZXJpYy5uYW1lJywKICAgICAgICB0eXBlOiAnZG5zTGFiZWwnCiAgICAgIH0sIHsKICAgICAgICBudWxsYWJsZTogZmFsc2UsCiAgICAgICAgcGF0aDogJ3NwZWMnLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6ICdhcnJheScsCiAgICAgICAgdmFsaWRhdG9yczogWydzZXJ2aWNlUG9ydCddCiAgICAgIH0sIHsKICAgICAgICBudWxsYWJsZTogdHJ1ZSwKICAgICAgICBwYXRoOiAnc3BlYycsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgdmFsaWRhdG9yczogWydjbHVzdGVySXAnXQogICAgICB9LCB7CiAgICAgICAgbnVsbGFibGU6IHRydWUsCiAgICAgICAgcGF0aDogJ3NwZWMnLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6ICdhcnJheScsCiAgICAgICAgdmFsaWRhdG9yczogWydleHRlcm5hbE5hbWUnXQogICAgICB9XTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZXRhaWxzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc2VydmljZVR5cGU7CiAgICAgIHZhciBvdXQgPSBbewogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2dlbmVyaWMudHlwZScpLAogICAgICAgIGNvbnRlbnQ6ICgoX3RoaXMkc2VydmljZVR5cGUgPSB0aGlzLnNlcnZpY2VUeXBlKSA9PT0gbnVsbCB8fCBfdGhpcyRzZXJ2aWNlVHlwZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc2VydmljZVR5cGUuaWQpIHx8IHRoaXMuc2VydmljZVR5cGUKICAgICAgfV07CiAgICAgIHZhciBfdGhpcyRzcGVjID0gdGhpcy5zcGVjLAogICAgICAgIGNsdXN0ZXJJUCA9IF90aGlzJHNwZWMuY2x1c3RlcklQLAogICAgICAgIGV4dGVybmFsTmFtZSA9IF90aGlzJHNwZWMuZXh0ZXJuYWxOYW1lLAogICAgICAgIHNlc3Npb25BZmZpbml0eSA9IF90aGlzJHNwZWMuc2Vzc2lvbkFmZmluaXR5LAogICAgICAgIGxvYWRCYWxhbmNlcklQID0gX3RoaXMkc3BlYy5sb2FkQmFsYW5jZXJJUDsKICAgICAgaWYgKGNsdXN0ZXJJUCkgewogICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ3NlcnZpY2VzUGFnZS5zZXJ2aWNlVHlwZXMuY2x1c3RlcklwLmxhYmVsJyksCiAgICAgICAgICBjb250ZW50OiBjbHVzdGVySVAKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAodGhpcy5zZXJ2aWNlVHlwZSA9PT0gJ0xvYWRCYWxhbmNlcicpIHsKICAgICAgICB2YXIgX3RoaXMkc3RhdHVzJGxvYWRCYWxhOwogICAgICAgIHZhciBzdGF0dXNJcHMgPSAoX3RoaXMkc3RhdHVzJGxvYWRCYWxhID0gdGhpcy5zdGF0dXMubG9hZEJhbGFuY2VyKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXMkbG9hZEJhbGEgPT09IHZvaWQgMCB8fCAoX3RoaXMkc3RhdHVzJGxvYWRCYWxhID0gX3RoaXMkc3RhdHVzJGxvYWRCYWxhLmluZ3Jlc3MpID09PSBudWxsIHx8IF90aGlzJHN0YXR1cyRsb2FkQmFsYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdHVzJGxvYWRCYWxhLm1hcChmdW5jdGlvbiAoaW5ncmVzcykgewogICAgICAgICAgcmV0dXJuIGluZ3Jlc3MuaG9zdG5hbWUgfHwgaW5ncmVzcy5pcDsKICAgICAgICB9KS5qb2luKCcsICcpOwogICAgICAgIHZhciBsb2FkYmFsYW5jZXJJbmZvID0gbG9hZEJhbGFuY2VySVAgfHwgc3RhdHVzSXBzIHx8ICcnOwogICAgICAgIGlmIChsb2FkYmFsYW5jZXJJbmZvKSB7CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ3NlcnZpY2VzUGFnZS5pcHMubG9hZEJhbGFuY2VyLmxhYmVsJyksCiAgICAgICAgICAgIGNvbnRlbnQ6IGxvYWRiYWxhbmNlckluZm8KICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfQogICAgICBpZiAoZXh0ZXJuYWxOYW1lKSB7CiAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgbGFiZWw6IHRoaXMudCgnc2VydmljZXNQYWdlLnNlcnZpY2VUeXBlcy5leHRlcm5hbE5hbWUubGFiZWwnKSwKICAgICAgICAgIGNvbnRlbnQ6IGV4dGVybmFsTmFtZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmIChzZXNzaW9uQWZmaW5pdHkpIHsKICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICBsYWJlbDogdGhpcy50KCdzZXJ2aWNlc1BhZ2UuYWZmaW5pdHkubGFiZWwnKSwKICAgICAgICAgIGNvbnRlbnQ6IHNlc3Npb25BZmZpbml0eQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgfSwgewogICAga2V5OiAicG9kUmVsYXRpb25zaGlwIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWV0YWRhdGEkcmVsYXRpID0gdGhpcy5tZXRhZGF0YS5yZWxhdGlvbnNoaXBzLAogICAgICAgIHJlbGF0aW9uc2hpcHMgPSBfdGhpcyRtZXRhZGF0YSRyZWxhdGkgPT09IHZvaWQgMCA/IFtdIDogX3RoaXMkbWV0YWRhdGEkcmVsYXRpOwogICAgICByZXR1cm4gKHJlbGF0aW9uc2hpcHMgfHwgW10pLmZpbHRlcihmdW5jdGlvbiAocmVsYXRpb25zaGlwKSB7CiAgICAgICAgcmV0dXJuIHJlbGF0aW9uc2hpcC50b1R5cGUgPT09IFBPRDsKICAgICAgfSlbMF07CiAgICB9CiAgfSwgewogICAga2V5OiAiZmV0Y2hQb2RzIiwKICAgIHZhbHVlOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZmV0Y2hQb2RzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghdGhpcy5wb2RSZWxhdGlvbnNoaXApIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLiRkaXNwYXRjaCgnY2x1c3Rlci9maW5kTWF0Y2hpbmcnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBQT0QsCiAgICAgICAgICAgICAgICBzZWxlY3RvcjogdGhpcy5wb2RSZWxhdGlvbnNoaXAuc2VsZWN0b3IsCiAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IHRoaXMubmFtZXNwYWNlCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBmZXRjaFBvZHMoKSB7CiAgICAgICAgcmV0dXJuIF9mZXRjaFBvZHMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gZmV0Y2hQb2RzOwogICAgfSgpCiAgfSwgewogICAga2V5OiAicG9kcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgcmV0dXJuIHRoaXMucG9kUmVsYXRpb25zaGlwID8gdGhpcy4kZ2V0dGVycy5tYXRjaGluZyhQT0QsIHRoaXMucG9kUmVsYXRpb25zaGlwLnNlbGVjdG9yLCB0aGlzLm5hbWVzcGFjZSkgOiBbXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXJ2aWNlVHlwZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHNwZWMyLCBfdGhpcyRzcGVjMzsKICAgICAgdmFyIHNlcnZpY2VUeXBlID0gKF90aGlzJHNwZWMyID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzIudHlwZTsKICAgICAgdmFyIGNsdXN0ZXJJcCA9IChfdGhpcyRzcGVjMyA9IHRoaXMuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkc3BlYzMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNwZWMzLmNsdXN0ZXJJUDsKICAgICAgdmFyIGRlZmF1bHRTZXJ2aWNlID0gZmluZChERUZBVUxUX1NFUlZJQ0VfVFlQRVMsIFsnaWQnLCBDTFVTVEVSSVBdKTsKICAgICAgaWYgKHNlcnZpY2VUeXBlKSB7CiAgICAgICAgaWYgKHNlcnZpY2VUeXBlID09PSBDTFVTVEVSSVAgJiYgY2x1c3RlcklwID09PSAnTm9uZScpIHsKICAgICAgICAgIHJldHVybiBIRUFETEVTUzsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHNlcnZpY2VUeXBlOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gZGVmYXVsdFNlcnZpY2U7CiAgICB9CiAgfSwgewogICAga2V5OiAicHJveHlVcmwiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHByb3h5VXJsKHNjaGVtZSwgcG9ydCkgewogICAgICB2YXIgdmlldyA9IHRoaXMubGlua0ZvcigndmlldycpOwogICAgICB2YXIgaWR4ID0gdmlldy5sYXN0SW5kZXhPZigiLyIpOwogICAgICByZXR1cm4gcHJveHlVcmxGcm9tQmFzZSh2aWV3LnNsaWNlKDAsIGlkeCksIHNjaGVtZSwgdGhpcy5tZXRhZGF0YS5uYW1lLCBwb3J0KTsKICAgIH0KICB9XSk7CiAgcmV0dXJuIF9kZWZhdWx0Owp9KFN0ZXZlTW9kZWwpOwpleHBvcnQgeyBfZGVmYXVsdCBhcyBkZWZhdWx0IH07CmV4cG9ydCBmdW5jdGlvbiBwcm94eVVybEZyb21QYXJ0cyhjbHVzdGVySWQsIG5hbWVzcGFjZSwgbmFtZSwgc2NoZW1lLCBwb3J0LCBwYXRoKSB7CiAgdmFyIGJhc2UgPSAiL2s4cy9jbHVzdGVycy8iLmNvbmNhdChlc2NhcGUoY2x1c3RlcklkKSwgIi9hcGkvdjEvbmFtZXNwYWNlcy8iKS5jb25jYXQoZXNjYXBlKG5hbWVzcGFjZSksICIvc2VydmljZXMiKTsKICByZXR1cm4gcHJveHlVcmxGcm9tQmFzZShiYXNlLCBzY2hlbWUsIG5hbWUsIHBvcnQsIHBhdGgpOwp9CmV4cG9ydCBmdW5jdGlvbiBwcm94eVVybEZyb21CYXNlKGJhc2UsIHNjaGVtZSwgbmFtZSwgcG9ydCwgcGF0aCkgewogIHZhciBzY2hlbWFOYW1lUG9ydCA9IChzY2hlbWUgPyAiIi5jb25jYXQoZXNjYXBlKHNjaGVtZSksICI6IikgOiAnJykgKyBlc2NhcGUobmFtZSkgKyAocG9ydCA/ICI6Ii5jb25jYXQoZXNjYXBlKHBvcnQpKSA6ICcnKTsKICB2YXIgY2xlYW5QYXRoID0gIi8iLmNvbmNhdCgocGF0aCB8fCAnJykucmVwbGFjZSgvXlwvKy9nLCAnJykpOwogIHZhciBjbGVhbkJhc2UgPSBiYXNlLnJlcGxhY2UoL1wvKyQvZywgJycpOwogIHZhciBvdXQgPSAiIi5jb25jYXQoY2xlYW5CYXNlLCAiLyIpLmNvbmNhdChzY2hlbWFOYW1lUG9ydCwgIi9wcm94eSIpLmNvbmNhdChjbGVhblBhdGgpOwogIHJldHVybiBvdXQ7Cn0="},{"version":3,"names":["find","POD","SteveModel","DEFAULT_SERVICE_TYPES","id","label","description","bannerAbbrv","HEADLESS","headless","CLUSTERIP","clusterIp","_default","_SteveModel","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","get","nullable","path","required","translationKey","type","validators","_this$serviceType","out","t","content","serviceType","_this$spec","spec","clusterIP","externalName","sessionAffinity","loadBalancerIP","push","_this$status$loadBala","statusIps","status","loadBalancer","ingress","map","hostname","ip","join","loadbalancerInfo","_this$metadata$relati","metadata","relationships","filter","relationship","toType","value","_fetchPods","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","podRelationship","$dispatch","selector","namespace","root","stop","fetchPods","$getters","matching","_this$spec2","_this$spec3","defaultService","proxyUrl","scheme","port","view","linkFor","idx","lastIndexOf","proxyUrlFromBase","slice","name","default","proxyUrlFromParts","clusterId","base","concat","escape","schemaNamePort","cleanPath","replace","cleanBase"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/models/service.js"],"sourcesContent":["import find from 'lodash/find';\nimport { POD } from '@shell/config/types';\nimport SteveModel from '@shell/plugins/steve/steve-class';\n\nexport const DEFAULT_SERVICE_TYPES = [\n  {\n    id:          'ClusterIP',\n    label:       'servicesPage.serviceTypes.clusterIp.label',\n    description: 'servicesPage.serviceTypes.clusterIp.description',\n    bannerAbbrv: 'servicesPage.serviceTypes.clusterIp.abbrv',\n  },\n  {\n    id:          'ExternalName',\n    label:       'servicesPage.serviceTypes.externalName.label',\n    description: 'servicesPage.serviceTypes.externalName.description',\n    bannerAbbrv: 'servicesPage.serviceTypes.externalName.abbrv',\n  },\n  {\n    id:          'Headless',\n    label:       'servicesPage.serviceTypes.headless.label',\n    description: 'servicesPage.serviceTypes.headless.description',\n    bannerAbbrv: 'servicesPage.serviceTypes.headless.abbrv',\n  },\n  {\n    id:          'LoadBalancer',\n    label:       'servicesPage.serviceTypes.loadBalancer.label',\n    description: 'servicesPage.serviceTypes.loadBalancer.description',\n    bannerAbbrv: 'servicesPage.serviceTypes.loadBalancer.abbrv',\n  },\n  {\n    id:          'NodePort',\n    label:       'servicesPage.serviceTypes.nodePort.label',\n    description: 'servicesPage.serviceTypes.nodePort.description',\n    bannerAbbrv: 'servicesPage.serviceTypes.nodePort.abbrv',\n  },\n];\n\nexport const HEADLESS = (() => {\n  const headless = find(DEFAULT_SERVICE_TYPES, ['id', 'Headless']);\n\n  return headless.id;\n})();\n\nexport const CLUSTERIP = (() => {\n  const clusterIp = find(DEFAULT_SERVICE_TYPES, ['id', 'ClusterIP']);\n\n  return clusterIp.id;\n})();\n\nexport default class extends SteveModel {\n  get customValidationRules() {\n    return [\n      {\n        nullable:       false,\n        path:           'metadata.name',\n        required:       true,\n        translationKey: 'generic.name',\n        type:           'dnsLabel',\n      },\n      {\n        nullable:   false,\n        path:       'spec',\n        required:   true,\n        type:       'array',\n        validators: ['servicePort'],\n      },\n      {\n        nullable:   true,\n        path:       'spec',\n        required:   true,\n        type:       'string',\n        validators: ['clusterIp'],\n      },\n      {\n        nullable:   true,\n        path:       'spec',\n        required:   true,\n        type:       'array',\n        validators: ['externalName'],\n      },\n    ];\n  }\n\n  get details() {\n    const out = [{\n      label:   this.t('generic.type'),\n      content: this.serviceType?.id || this.serviceType,\n    }];\n\n    const {\n      clusterIP, externalName, sessionAffinity, loadBalancerIP\n    } = this.spec;\n\n    if (clusterIP) {\n      out.push({\n        label:   this.t('servicesPage.serviceTypes.clusterIp.label'),\n        content: clusterIP,\n      });\n    }\n\n    if (this.serviceType === 'LoadBalancer') {\n      const statusIps = this.status.loadBalancer?.ingress?.map((ingress) => ingress.hostname || ingress.ip).join(', ');\n\n      const loadbalancerInfo = loadBalancerIP || statusIps || '';\n\n      if (loadbalancerInfo) {\n        out.push({\n          label:   this.t('servicesPage.ips.loadBalancer.label'),\n          content: loadbalancerInfo\n        });\n      }\n    }\n\n    if (externalName) {\n      out.push({\n        label:   this.t('servicesPage.serviceTypes.externalName.label'),\n        content: externalName,\n      });\n    }\n\n    if (sessionAffinity) {\n      out.push({\n        label:   this.t('servicesPage.affinity.label'),\n        content: sessionAffinity,\n      });\n    }\n\n    return out;\n  }\n\n  get podRelationship() {\n    const { metadata:{ relationships = [] } } = this;\n\n    return (relationships || []).filter((relationship) => relationship.toType === POD)[0];\n  }\n\n  async fetchPods() {\n    if (this.podRelationship) {\n      await this.$dispatch('cluster/findMatching', {\n        type:      POD,\n        selector:  this.podRelationship.selector,\n        namespace: this.namespace\n      }, { root: true });\n    }\n  }\n\n  get pods() {\n    return this.podRelationship ? this.$getters.matching( POD, this.podRelationship.selector, this.namespace ) : [];\n  }\n\n  get serviceType() {\n    const serviceType = this.spec?.type;\n    const clusterIp = this.spec?.clusterIP;\n    const defaultService = find(DEFAULT_SERVICE_TYPES, ['id', CLUSTERIP]);\n\n    if (serviceType) {\n      if (serviceType === CLUSTERIP && clusterIp === 'None') {\n        return HEADLESS;\n      } else {\n        return serviceType;\n      }\n    }\n\n    return defaultService;\n  }\n\n  proxyUrl(scheme, port) {\n    const view = this.linkFor('view');\n    const idx = view.lastIndexOf(`/`);\n\n    return proxyUrlFromBase(view.slice(0, idx), scheme, this.metadata.name, port);\n  }\n}\n\nexport function proxyUrlFromParts(clusterId, namespace, name, scheme, port, path) {\n  const base = `/k8s/clusters/${ escape(clusterId) }/api/v1/namespaces/${ escape(namespace) }/services`;\n\n  return proxyUrlFromBase(base, scheme, name, port, path);\n}\n\nexport function proxyUrlFromBase(base, scheme, name, port, path) {\n  const schemaNamePort = (scheme ? `${ escape(scheme) }:` : '') + escape(name) + (port ? `:${ escape(port) }` : '');\n\n  const cleanPath = `/${ (path || '').replace(/^\\/+/g, '') }`;\n  const cleanBase = base.replace(/\\/+$/g, '');\n\n  const out = `${ cleanBase }/${ schemaNamePort }/proxy${ cleanPath }`;\n\n  return out;\n}\n"],"mappings":"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"}]}