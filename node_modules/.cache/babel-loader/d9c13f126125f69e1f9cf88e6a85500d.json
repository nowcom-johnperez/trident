{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/AgentConfiguration.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/AgentConfiguration.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IEdyb3VwUGFuZWwgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvR3JvdXBQYW5lbCc7CmltcG9ydCBQb2RBZmZpbml0eSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL1BvZEFmZmluaXR5JzsKaW1wb3J0IE5vZGVBZmZpbml0eSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL05vZGVBZmZpbml0eSc7CmltcG9ydCBDb250YWluZXJSZXNvdXJjZUxpbWl0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NvbnRhaW5lclJlc291cmNlTGltaXQnOwppbXBvcnQgVG9sZXJhdGlvbnMgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9Ub2xlcmF0aW9ucyc7CmltcG9ydCB7IGNsZWFuVXAgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgZmV0Y2hTZXR0aW5nIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NldHRpbmdzJzsKaW1wb3J0IHsgUmFkaW9Hcm91cCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vUmFkaW8nOwoKLy8gQWZmaW5pdHkgcmFkaW8gYnV0dG9uIGNob2ljZXMKdmFyIERFRkFVTFQgPSAnZGVmYXVsdCc7CnZhciBDVVNUT00gPSAnY3VzdG9tJzsKCi8vIFRoaXMgaXMgdGhlIGZvcm0gZm9yIEFnZW50IENvbmZpZ3VyYXRpb24KLy8gVXNlZCBmb3IgYm90aCBDbHVzdGVyIEFnZW50IGFuZCBGbGVldCBBZ2VudCBjb25maWd1cmF0aW9uCmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBCYW5uZXI6IEJhbm5lciwKICAgIENvbnRhaW5lclJlc291cmNlTGltaXQ6IENvbnRhaW5lclJlc291cmNlTGltaXQsCiAgICBHcm91cFBhbmVsOiBHcm91cFBhbmVsLAogICAgUG9kQWZmaW5pdHk6IFBvZEFmZmluaXR5LAogICAgTm9kZUFmZmluaXR5OiBOb2RlQWZmaW5pdHksCiAgICBSYWRpb0dyb3VwOiBSYWRpb0dyb3VwLAogICAgVG9sZXJhdGlvbnM6IFRvbGVyYXRpb25zCiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdHlwZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHNldHRpbmdJZCwgc2V0dGluZywgcGFyc2VkOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAvLyBEZWZhdWx0IGFmZmluaXR5CiAgICAgICAgICAgIHNldHRpbmdJZCA9ICIiLmNvbmNhdChfdGhpcy50eXBlLCAiLWFnZW50LWRlZmF1bHQtYWZmaW5pdHkiKTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBmZXRjaFNldHRpbmcoX3RoaXMuJHN0b3JlLCBzZXR0aW5nSWQpOwogICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICBzZXR0aW5nID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgaWYgKHNldHRpbmcpIHsKICAgICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgICAgcGFyc2VkID0gSlNPTi5wYXJzZShzZXR0aW5nLnZhbHVlIHx8IHNldHRpbmcuZGVmYXVsdCk7CiAgICAgICAgICAgICAgICBfdGhpcy5kZWZhdWx0QWZmaW5pdHkgPSBwYXJzZWQgfHwge307CiAgICAgICAgICAgICAgfSBjYXRjaCAoZSkgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ291bGQgbm90IHBhcnNlIGFnZW50IGRlZmF1bHQgc2V0dGluZycsIGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgICAgIF90aGlzLmRlZmF1bHRBZmZpbml0eSA9IHt9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzJHZhbHVlLCBfdGhpcyR2YWx1ZTIsIF90aGlzJHZhbHVlMzsKICAgIHZhciBub2RlQWZmaW5pdHkgPSAoX3RoaXMkdmFsdWUgPSB0aGlzLnZhbHVlKSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZSA9PT0gdm9pZCAwIHx8IChfdGhpcyR2YWx1ZSA9IF90aGlzJHZhbHVlLm92ZXJyaWRlQWZmaW5pdHkpID09PSBudWxsIHx8IF90aGlzJHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2YWx1ZS5ub2RlQWZmaW5pdHk7CiAgICB2YXIgcG9kQWZmaW5pdHkgPSAoX3RoaXMkdmFsdWUyID0gdGhpcy52YWx1ZSkgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUyID09PSB2b2lkIDAgfHwgKF90aGlzJHZhbHVlMiA9IF90aGlzJHZhbHVlMi5vdmVycmlkZUFmZmluaXR5KSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZTIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZhbHVlMi5wb2RBZmZpbml0eTsKICAgIHZhciBwb2RBbnRpQWZmaW5pdHkgPSAoX3RoaXMkdmFsdWUzID0gdGhpcy52YWx1ZSkgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUzID09PSB2b2lkIDAgfHwgKF90aGlzJHZhbHVlMyA9IF90aGlzJHZhbHVlMy5vdmVycmlkZUFmZmluaXR5KSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZhbHVlMy5wb2RBbnRpQWZmaW5pdHk7CiAgICB2YXIgaGFzQWZmaW5pdHlQb3B1bGF0ZWQgPSBmYWxzZTsKICAgIGlmIChub2RlQWZmaW5pdHkgJiYgT2JqZWN0LmtleXMobm9kZUFmZmluaXR5KS5sZW5ndGggfHwgcG9kQWZmaW5pdHkgJiYgT2JqZWN0LmtleXMocG9kQWZmaW5pdHkpLmxlbmd0aCB8fCBwb2RBbnRpQWZmaW5pdHkgJiYgT2JqZWN0LmtleXMocG9kQW50aUFmZmluaXR5KS5sZW5ndGgpIHsKICAgICAgaGFzQWZmaW5pdHlQb3B1bGF0ZWQgPSB0cnVlOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgZGVmYXVsdEFmZmluaXR5OiB7fSwKICAgICAgYWZmaW5pdHlTZXR0aW5nOiBoYXNBZmZpbml0eVBvcHVsYXRlZCA/IENVU1RPTSA6IERFRkFVTFQsCiAgICAgIG5vZGVBZmZpbml0eToge30KICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5lbnN1cmVWYWx1ZSgpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGZsYXRSZXNvdXJjZXM6IHsKICAgICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgICAgdmFyIF9yZWYgPSB0aGlzLnZhbHVlLm92ZXJyaWRlUmVzb3VyY2VSZXF1aXJlbWVudHMgfHwge30sCiAgICAgICAgICBfcmVmJGxpbWl0cyA9IF9yZWYubGltaXRzLAogICAgICAgICAgbGltaXRzID0gX3JlZiRsaW1pdHMgPT09IHZvaWQgMCA/IHt9IDogX3JlZiRsaW1pdHMsCiAgICAgICAgICBfcmVmJHJlcXVlc3RzID0gX3JlZi5yZXF1ZXN0cywKICAgICAgICAgIHJlcXVlc3RzID0gX3JlZiRyZXF1ZXN0cyA9PT0gdm9pZCAwID8ge30gOiBfcmVmJHJlcXVlc3RzOwogICAgICAgIHZhciBsaW1pdHNDcHUgPSBsaW1pdHMuY3B1LAogICAgICAgICAgbGltaXRzTWVtb3J5ID0gbGltaXRzLm1lbW9yeTsKICAgICAgICB2YXIgcmVxdWVzdHNDcHUgPSByZXF1ZXN0cy5jcHUsCiAgICAgICAgICByZXF1ZXN0c01lbW9yeSA9IHJlcXVlc3RzLm1lbW9yeTsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbGltaXRzQ3B1OiBsaW1pdHNDcHUsCiAgICAgICAgICBsaW1pdHNNZW1vcnk6IGxpbWl0c01lbW9yeSwKICAgICAgICAgIHJlcXVlc3RzQ3B1OiByZXF1ZXN0c0NwdSwKICAgICAgICAgIHJlcXVlc3RzTWVtb3J5OiByZXF1ZXN0c01lbW9yeQogICAgICAgIH07CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KG5ldSkgewogICAgICAgIHZhciBfdGhpcyR2YWx1ZTQ7CiAgICAgICAgdmFyIGxpbWl0c0NwdSA9IG5ldS5saW1pdHNDcHUsCiAgICAgICAgICBsaW1pdHNNZW1vcnkgPSBuZXUubGltaXRzTWVtb3J5LAogICAgICAgICAgcmVxdWVzdHNDcHUgPSBuZXUucmVxdWVzdHNDcHUsCiAgICAgICAgICByZXF1ZXN0c01lbW9yeSA9IG5ldS5yZXF1ZXN0c01lbW9yeTsKICAgICAgICB2YXIgZXhpc3RpbmcgPSAoKF90aGlzJHZhbHVlNCA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlNCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmFsdWU0Lm92ZXJyaWRlUmVzb3VyY2VSZXF1aXJlbWVudHMpIHx8IHt9OwogICAgICAgIGRlbGV0ZSBleGlzdGluZy5yZXF1ZXN0czsKICAgICAgICBkZWxldGUgZXhpc3RpbmcubGltaXRzOwogICAgICAgIHZhciBvdXQgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIGV4aXN0aW5nKSwge30sIHsKICAgICAgICAgIHJlcXVlc3RzOiB7CiAgICAgICAgICAgIGNwdTogcmVxdWVzdHNDcHUsCiAgICAgICAgICAgIG1lbW9yeTogcmVxdWVzdHNNZW1vcnkKICAgICAgICAgIH0sCiAgICAgICAgICBsaW1pdHM6IHsKICAgICAgICAgICAgY3B1OiBsaW1pdHNDcHUsCiAgICAgICAgICAgIG1lbW9yeTogbGltaXRzTWVtb3J5CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdvdmVycmlkZVJlc291cmNlUmVxdWlyZW1lbnRzJywgY2xlYW5VcChvdXQpKTsKICAgICAgfQogICAgfSwKICAgIGFmZmluaXR5T3B0aW9uczogZnVuY3Rpb24gYWZmaW5pdHlPcHRpb25zKCkgewogICAgICByZXR1cm4gW3sKICAgICAgICBsYWJlbDogdGhpcy50KCdjbHVzdGVyLmFnZW50Q29uZmlnLmFmZmluaXR5LmRlZmF1bHQnKSwKICAgICAgICB2YWx1ZTogREVGQVVMVAogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMudCgnY2x1c3Rlci5hZ2VudENvbmZpZy5hZmZpbml0eS5jdXN0b20nKSwKICAgICAgICB2YWx1ZTogQ1VTVE9NCiAgICAgIH1dOwogICAgfSwKICAgIGNhbkVkaXRBZmZpbml0eTogZnVuY3Rpb24gY2FuRWRpdEFmZmluaXR5KCkgewogICAgICByZXR1cm4gdGhpcy5hZmZpbml0eVNldHRpbmcgPT09IENVU1RPTTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICB2YWx1ZTogZnVuY3Rpb24gdmFsdWUoKSB7CiAgICAgIHRoaXMuZW5zdXJlVmFsdWUoKTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGVuc3VyZVZhbHVlOiBmdW5jdGlvbiBlbnN1cmVWYWx1ZSgpIHsKICAgICAgLy8gRW5zdXJlIHdlIGhhdmUgdGhlIG1vZGVsIHN0cnVjdHVyZSBuZWVkZWQgZm9yIHRoZSBmb3JtIGNvbnRyb2xzCiAgICAgIGlmICh0aGlzLnZhbHVlKSB7CiAgICAgICAgdmFyIF90aGlzJHZhbHVlNTsKICAgICAgICB0aGlzLnZhbHVlLm92ZXJyaWRlQWZmaW5pdHkgPSB0aGlzLnZhbHVlLm92ZXJyaWRlQWZmaW5pdHkgfHwge307CiAgICAgICAgdGhpcy52YWx1ZS5hcHBlbmRUb2xlcmF0aW9ucyA9IHRoaXMudmFsdWUuYXBwZW5kVG9sZXJhdGlvbnMgfHwgW107CiAgICAgICAgdGhpcy52YWx1ZS5vdmVycmlkZVJlc291cmNlUmVxdWlyZW1lbnRzID0gdGhpcy52YWx1ZS5vdmVycmlkZVJlc291cmNlUmVxdWlyZW1lbnRzIHx8IHt9OwogICAgICAgIHRoaXMubm9kZUFmZmluaXR5ID0gKChfdGhpcyR2YWx1ZTUgPSB0aGlzLnZhbHVlKSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZTUgPT09IHZvaWQgMCB8fCAoX3RoaXMkdmFsdWU1ID0gX3RoaXMkdmFsdWU1Lm92ZXJyaWRlQWZmaW5pdHkpID09PSBudWxsIHx8IF90aGlzJHZhbHVlNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmFsdWU1Lm5vZGVBZmZpbml0eSkgfHwge307CiAgICAgIH0KICAgIH0sCiAgICBhZmZpbml0eVNldHRpbmdDaGFuZ2U6IGZ1bmN0aW9uIGFmZmluaXR5U2V0dGluZ0NoYW5nZSgpIHsKICAgICAgaWYgKHRoaXMuYWZmaW5pdHlTZXR0aW5nID09PSBDVVNUT00pIHsKICAgICAgICB2YXIgcGFyc2VkRGVmYXVsdEFmZmluaXRlcyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGhpcy5kZWZhdWx0QWZmaW5pdHkpKTsKCiAgICAgICAgLy8gQ29weSB0aGUgZGVmYXVsdCBzbyB0aGF0IHRoZSB1c2VyIGNhbiBlZGl0IGl0CiAgICAgICAgLy8gdGhpcyB3aWxsIGNvdmVyIHRoZSBwb2QgYWZmaW5pdGllcwogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnb3ZlcnJpZGVBZmZpbml0eScsIHBhcnNlZERlZmF1bHRBZmZpbml0ZXMpOwoKICAgICAgICAvLyBpbiBvcmRlciBub3QgdG8gYnJlYWsgdGhlIG5vZGUgYWZmaW5pdHkgY29tcG9uZW50LCBsZXQncyBnbyBmb3IgYSBzbGlnaHRseSBkaWZmZXJlbnQgd2F5IG9mIGhhbmRsaW5nIHRoZSBsb2dpYyBoZXJlCiAgICAgICAgaWYgKHBhcnNlZERlZmF1bHRBZmZpbml0ZXMubm9kZUFmZmluaXR5KSB7CiAgICAgICAgICB0aGlzLm5vZGVBZmZpbml0eSA9IHBhcnNlZERlZmF1bHRBZmZpbml0ZXMubm9kZUFmZmluaXR5OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ292ZXJyaWRlQWZmaW5pdHknLCB7fSk7CiAgICAgIH0KICAgIH0sCiAgICB1cGRhdGVOb2RlQWZmaW5pdHk6IGZ1bmN0aW9uIHVwZGF0ZU5vZGVBZmZpbml0eSh2YWwpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUub3ZlcnJpZGVBZmZpbml0eSwgJ25vZGVBZmZpbml0eScsIHZhbCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Banner","GroupPanel","PodAffinity","NodeAffinity","ContainerResourceLimit","Tolerations","cleanUp","fetchSetting","RadioGroup","DEFAULT","CUSTOM","components","props","value","type","Object","default","_default","mode","String","required","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","settingId","setting","parsed","wrap","_callee$","_context","prev","next","concat","$store","sent","JSON","parse","defaultAffinity","e","console","error","stop","data","_this$value","_this$value2","_this$value3","nodeAffinity","overrideAffinity","podAffinity","podAntiAffinity","hasAffinityPopulated","keys","length","affinitySetting","created","ensureValue","computed","flatResources","get","_ref","overrideResourceRequirements","_ref$limits","limits","_ref$requests","requests","limitsCpu","cpu","limitsMemory","memory","requestsCpu","requestsMemory","set","neu","_this$value4","existing","out","_objectSpread","$set","affinityOptions","label","t","canEditAffinity","watch","methods","_this$value5","appendTolerations","affinitySettingChange","parsedDefaultAffinites","stringify","updateNodeAffinity","val"],"sources":["node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/AgentConfiguration.vue"],"sourcesContent":["<script>\nimport { Banner } from '@components/Banner';\nimport GroupPanel from '@shell/components/GroupPanel';\nimport PodAffinity from '@shell/components/form/PodAffinity';\nimport NodeAffinity from '@shell/components/form/NodeAffinity';\nimport ContainerResourceLimit from '@shell/components/ContainerResourceLimit';\nimport Tolerations from '@shell/components/form/Tolerations';\nimport { cleanUp } from '@shell/utils/object';\nimport { fetchSetting } from '@shell/utils/settings';\nimport { RadioGroup } from '@components/Form/Radio';\n\n// Affinity radio button choices\nconst DEFAULT = 'default';\nconst CUSTOM = 'custom';\n\n// This is the form for Agent Configuration\n// Used for both Cluster Agent and Fleet Agent configuration\nexport default {\n  components: {\n    Banner,\n    ContainerResourceLimit,\n    GroupPanel,\n    PodAffinity,\n    NodeAffinity,\n    RadioGroup,\n    Tolerations,\n  },\n  props: {\n    value: {\n      type:    Object,\n      default: () => {},\n    },\n\n    mode: {\n      type:     String,\n      required: true,\n    },\n\n    type: {\n      type:     String,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    // Default affinity\n    const settingId = `${ this.type }-agent-default-affinity`;\n    const setting = await fetchSetting(this.$store, settingId);\n\n    if (setting) {\n      try {\n        const parsed = JSON.parse(setting.value || setting.default);\n\n        this.defaultAffinity = parsed || {};\n      } catch (e) {\n        console.error('Could not parse agent default setting', e); // eslint-disable-line no-console\n        this.defaultAffinity = {};\n      }\n    }\n  },\n\n  data() {\n    const nodeAffinity = this.value?.overrideAffinity?.nodeAffinity;\n    const podAffinity = this.value?.overrideAffinity?.podAffinity;\n    const podAntiAffinity = this.value?.overrideAffinity?.podAntiAffinity;\n\n    let hasAffinityPopulated = false;\n\n    if ((nodeAffinity && Object.keys(nodeAffinity).length) ||\n      (podAffinity && Object.keys(podAffinity).length) ||\n      (podAntiAffinity && Object.keys(podAntiAffinity).length)) {\n      hasAffinityPopulated = true;\n    }\n\n    return {\n      defaultAffinity: {},\n      affinitySetting: hasAffinityPopulated ? CUSTOM : DEFAULT,\n      nodeAffinity:    {}\n    };\n  },\n\n  created() {\n    this.ensureValue();\n  },\n\n  computed: {\n    flatResources: {\n      get() {\n        const { limits = {}, requests = {} } = this.value.overrideResourceRequirements || {};\n        const {\n          cpu: limitsCpu,\n          memory: limitsMemory,\n        } = limits;\n        const { cpu: requestsCpu, memory: requestsMemory } = requests;\n\n        return {\n          limitsCpu,\n          limitsMemory,\n          requestsCpu,\n          requestsMemory,\n        };\n      },\n      set(neu) {\n        const {\n          limitsCpu,\n          limitsMemory,\n          requestsCpu,\n          requestsMemory,\n        } = neu;\n\n        const existing = this.value?.overrideResourceRequirements || {};\n\n        delete existing.requests;\n        delete existing.limits;\n\n        const out = {\n          ...existing,\n          requests: {\n            cpu:    requestsCpu,\n            memory: requestsMemory,\n          },\n          limits: {\n            cpu:    limitsCpu,\n            memory: limitsMemory,\n          },\n        };\n\n        this.$set(this.value, 'overrideResourceRequirements', cleanUp(out));\n      },\n    },\n\n    affinityOptions() {\n      return [{\n        label: this.t('cluster.agentConfig.affinity.default'),\n        value: DEFAULT,\n      }, {\n        label: this.t('cluster.agentConfig.affinity.custom'),\n        value: CUSTOM,\n      }];\n    },\n\n    canEditAffinity() {\n      return this.affinitySetting === CUSTOM;\n    }\n  },\n\n  watch: {\n    value() {\n      this.ensureValue();\n    }\n  },\n\n  methods: {\n    ensureValue() {\n      // Ensure we have the model structure needed for the form controls\n      if (this.value) {\n        this.value.overrideAffinity = this.value.overrideAffinity || {};\n        this.value.appendTolerations = this.value.appendTolerations || [];\n        this.value.overrideResourceRequirements = this.value.overrideResourceRequirements || {};\n\n        this.nodeAffinity = this.value?.overrideAffinity?.nodeAffinity || {};\n      }\n    },\n\n    affinitySettingChange() {\n      if (this.affinitySetting === CUSTOM) {\n        const parsedDefaultAffinites = JSON.parse(JSON.stringify(this.defaultAffinity));\n\n        // Copy the default so that the user can edit it\n        // this will cover the pod affinities\n        this.$set(this.value, 'overrideAffinity', parsedDefaultAffinites);\n\n        // in order not to break the node affinity component, let's go for a slightly different way of handling the logic here\n        if (parsedDefaultAffinites.nodeAffinity) {\n          this.nodeAffinity = parsedDefaultAffinites.nodeAffinity;\n        }\n      } else {\n        this.$set(this.value, 'overrideAffinity', {});\n      }\n    },\n    updateNodeAffinity(val) {\n      this.$set(this.value.overrideAffinity, 'nodeAffinity', val);\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <Banner\n      :closable=\"false\"\n      color=\"info\"\n      label-key=\"cluster.agentConfig.banners.advanced\"\n    />\n\n    <GroupPanel\n      label-key=\"cluster.agentConfig.groups.podRequestsAndLimits\"\n      class=\"mt-20\"\n    >\n      <Banner\n        :closable=\"false\"\n        color=\"info\"\n        label-key=\"cluster.agentConfig.banners.limits\"\n      />\n      <ContainerResourceLimit\n        v-model=\"flatResources\"\n        :mode=\"mode\"\n        :show-tip=\"false\"\n        :handle-gpu-limit=\"false\"\n        class=\"mt-10\"\n      />\n    </GroupPanel>\n\n    <GroupPanel\n      label-key=\"cluster.agentConfig.groups.podTolerations\"\n      class=\"mt-20\"\n    >\n      <Banner\n        :closable=\"false\"\n        color=\"info\"\n        label-key=\"cluster.agentConfig.banners.tolerations\"\n      />\n      <Tolerations\n        v-model=\"value.appendTolerations\"\n        :mode=\"mode\"\n        class=\"mt-10\"\n      />\n    </GroupPanel>\n\n    <GroupPanel\n      label-key=\"cluster.agentConfig.groups.podAffinity\"\n      class=\"mt-20\"\n    >\n      <RadioGroup\n        v-model=\"affinitySetting\"\n        name=\"affinity-override\"\n        :mode=\"mode\"\n        :options=\"affinityOptions\"\n        class=\"mt-10\"\n        data-testid=\"affinity-options\"\n        @input=\"affinitySettingChange\"\n      />\n\n      <Banner\n        v-if=\"canEditAffinity\"\n        :closable=\"false\"\n        color=\"warning\"\n      >\n        <p v-clean-html=\"t('cluster.agentConfig.banners.windowsCompatibility', {}, true)\" />\n      </Banner>\n\n      <h4 v-if=\"canEditAffinity\">\n        {{ t('cluster.agentConfig.subGroups.podAffinityAnti') }}\n      </h4>\n\n      <PodAffinity\n        v-if=\"canEditAffinity\"\n        v-model=\"value\"\n        field=\"overrideAffinity\"\n        :mode=\"mode\"\n        class=\"mt-0 mb-20\"\n        :all-namespaces-option-available=\"true\"\n        :force-input-namespace-selection=\"true\"\n        :remove-labeled-input-namespace-label=\"true\"\n        data-testid=\"pod-affinity\"\n      />\n\n      <div\n        v-if=\"canEditAffinity\"\n        class=\"separator\"\n      />\n      <h4\n        v-if=\"canEditAffinity\"\n        class=\"mt-20\"\n      >\n        {{ t('cluster.agentConfig.subGroups.nodeAffinity') }}\n      </h4>\n\n      <NodeAffinity\n        v-if=\"canEditAffinity\"\n        v-model=\"nodeAffinity\"\n        :matching-selector-display=\"true\"\n        :mode=\"mode\"\n        class=\"mt-0\"\n        data-testid=\"node-affinity\"\n        @input=\"updateNodeAffinity\"\n      />\n    </GroupPanel>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n.separator {\n  width: 100%;\n  border-top: 1px solid var(--border);\n}\n</style>\n"],"mappings":"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"}]}