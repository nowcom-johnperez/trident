{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgU0VFTl9XSEFUU19ORVcgfSBmcm9tICdAc2hlbGwvc3RvcmUvcHJlZnMnOwppbXBvcnQgeyBnZXRWZXJzaW9uSW5mbyB9IGZyb20gJ0BzaGVsbC91dGlscy92ZXJzaW9uJzsKdmFyIHZhbGlkUm91dGUgPSBmdW5jdGlvbiB2YWxpZFJvdXRlKHJvdXRlLCByb3V0ZXIpIHsKICB2YXIgX3JvdXRlciRyZXNvbHZlOwogIHJldHVybiAhIXJvdXRlICYmICEhKChfcm91dGVyJHJlc29sdmUgPSByb3V0ZXIucmVzb2x2ZShyb3V0ZSkpICE9PSBudWxsICYmIF9yb3V0ZXIkcmVzb2x2ZSAhPT0gdm9pZCAwICYmIChfcm91dGVyJHJlc29sdmUgPSBfcm91dGVyJHJlc29sdmUucmVzb2x2ZWQpICE9PSBudWxsICYmIF9yb3V0ZXIkcmVzb2x2ZSAhPT0gdm9pZCAwICYmIChfcm91dGVyJHJlc29sdmUgPSBfcm91dGVyJHJlc29sdmUubWF0Y2hlZCkgIT09IG51bGwgJiYgX3JvdXRlciRyZXNvbHZlICE9PSB2b2lkIDAgJiYgX3JvdXRlciRyZXNvbHZlLmxlbmd0aCk7Cn07CmV4cG9ydCBkZWZhdWx0IHsKICBtaWRkbGV3YXJlOiBmdW5jdGlvbiBtaWRkbGV3YXJlKF9yZWYpIHsKICAgIHZhciBfdGFyZ2V0Um91dGUkcm91dGU7CiAgICB2YXIgcmVkaXJlY3QgPSBfcmVmLnJlZGlyZWN0LAogICAgICBzdG9yZSA9IF9yZWYuc3RvcmUsCiAgICAgIGFwcCA9IF9yZWYuYXBwLAogICAgICByb3V0ZSA9IF9yZWYucm91dGU7CiAgICB2YXIgc2VlbldoYXRzTmV3ID0gc3RvcmUuZ2V0dGVyc1sncHJlZnMvZ2V0J10oU0VFTl9XSEFUU19ORVcpOwogICAgdmFyIHZlcnNpb25JbmZvID0gZ2V0VmVyc2lvbkluZm8oc3RvcmUpOwogICAgdmFyIGlzU2luZ2xlUHJvZHVjdCA9IHN0b3JlLmdldHRlcnNbJ2lzU2luZ2xlUHJvZHVjdCddOwogICAgdmFyIGRhc2hib2FyZEhvbWUgPSB7CiAgICAgIG5hbWU6ICdob21lJwogICAgfTsKCiAgICAvLyBJZiB0aGlzIGlzIGEgbmV3IHZlcnNpb24sIHRoZW4gdGFrZSB0aGUgdXNlciB0byB0aGUgaG9tZSBwYWdlIHRvIHZpZXcgdGhlIHJlbGVhc2Ugbm90ZXMKICAgIGlmICh2ZXJzaW9uSW5mby5mdWxsVmVyc2lvbiAhPT0gc2VlbldoYXRzTmV3ICYmICFpc1NpbmdsZVByb2R1Y3QpIHsKICAgICAgcmV0dXJuIHJlZGlyZWN0KGRhc2hib2FyZEhvbWUpOwogICAgfQogICAgdmFyIGFmdGVyTG9naW5Sb3V0ZU9iamVjdCA9IHN0b3JlLmdldHRlcnNbJ3ByZWZzL2FmdGVyTG9naW5Sb3V0ZSddOwogICAgdmFyIHRhcmdldFJvdXRlID0gYXBwLnJvdXRlci5yZXNvbHZlKGFmdGVyTG9naW5Sb3V0ZU9iamVjdCk7CgogICAgLy8gSWYgdGFyZ2V0IHJvdXRlIGlzIC8sIHRoZW4gd2Ugd2lsbCBsb29wIHdpdGggZW5kbGVzcyByZWRpcmVjdCAtIHNvIGRldGVjdCB0aGF0IGhlcmUgYW5kCiAgICAvLyByZWRpcmVjdCB0byAvaG9tZSwgd2hpY2ggaXMgd2hhdCB3ZSB3b3VsZCBkbyBiZWxvdywgaWYgdGhlcmUgd2FzIG5vIGBhZnRlckxvZ2luUm91dGVPYmplY3RgCiAgICBpZiAoKHRhcmdldFJvdXRlID09PSBudWxsIHx8IHRhcmdldFJvdXRlID09PSB2b2lkIDAgfHwgKF90YXJnZXRSb3V0ZSRyb3V0ZSA9IHRhcmdldFJvdXRlLnJvdXRlKSA9PT0gbnVsbCB8fCBfdGFyZ2V0Um91dGUkcm91dGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90YXJnZXRSb3V0ZSRyb3V0ZS5mdWxsUGF0aCkgPT09ICcvJykgewogICAgICByZXR1cm4gcmVkaXJlY3QoZGFzaGJvYXJkSG9tZSk7CiAgICB9CgogICAgLy8gQ29uZmlybSB0aGlzIGlzIGEgdmFsaWQgcm91dGUgKGl0IGNvdWxkIGhhdmUgY29tZSBmcm9tIGFuIHVuaW5zdGFsbGVkIHBsdWdpbikKICAgIGlmICh2YWxpZFJvdXRlKGFmdGVyTG9naW5Sb3V0ZU9iamVjdCwgYXBwLnJvdXRlcikpIHsKICAgICAgLy8gVGFrZSB0aGUgdXNlciB0byB0aGUgY29uZmlndXJlZCBsb2dpbiByb3V0ZQogICAgICByZXR1cm4gcmVkaXJlY3QoYWZ0ZXJMb2dpblJvdXRlT2JqZWN0KTsKICAgIH0KICAgIGlmICh2YWxpZFJvdXRlKGlzU2luZ2xlUHJvZHVjdCA9PT0gbnVsbCB8fCBpc1NpbmdsZVByb2R1Y3QgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGlzU2luZ2xlUHJvZHVjdC5hZnRlckxvZ2luUm91dGUsIGFwcC5yb3V0ZXIpKSB7CiAgICAgIHJldHVybiByZWRpcmVjdChpc1NpbmdsZVByb2R1Y3QuYWZ0ZXJMb2dpblJvdXRlKTsKICAgIH0KICAgIHJldHVybiByZWRpcmVjdChkYXNoYm9hcmRIb21lKTsKICB9Cn07"},{"version":3,"names":["SEEN_WHATS_NEW","getVersionInfo","validRoute","route","router","_router$resolve","resolve","resolved","matched","length","middleware","_ref","_targetRoute$route","redirect","store","app","seenWhatsNew","getters","versionInfo","isSingleProduct","dashboardHome","name","fullVersion","afterLoginRouteObject","targetRoute","fullPath","afterLoginRoute"],"sources":["node_modules/@rancher/shell/pages/index.vue"],"sourcesContent":["<script>\nimport { SEEN_WHATS_NEW } from '@shell/store/prefs';\nimport { getVersionInfo } from '@shell/utils/version';\n\nconst validRoute = (route, router) => {\n  return !!route && !!router.resolve(route)?.resolved?.matched?.length;\n};\n\nexport default {\n  middleware({\n    redirect, store, app, route\n  } ) {\n    const seenWhatsNew = store.getters['prefs/get'](SEEN_WHATS_NEW);\n    const versionInfo = getVersionInfo(store);\n    const isSingleProduct = store.getters['isSingleProduct'];\n    const dashboardHome = { name: 'home' };\n\n    // If this is a new version, then take the user to the home page to view the release notes\n    if (versionInfo.fullVersion !== seenWhatsNew && !isSingleProduct) {\n      return redirect(dashboardHome);\n    }\n\n    const afterLoginRouteObject = store.getters['prefs/afterLoginRoute'];\n    const targetRoute = app.router.resolve(afterLoginRouteObject);\n\n    // If target route is /, then we will loop with endless redirect - so detect that here and\n    // redirect to /home, which is what we would do below, if there was no `afterLoginRouteObject`\n    if (targetRoute?.route?.fullPath === '/') {\n      return redirect(dashboardHome);\n    }\n\n    // Confirm this is a valid route (it could have come from an uninstalled plugin)\n    if (validRoute(afterLoginRouteObject, app.router)) {\n      // Take the user to the configured login route\n      return redirect(afterLoginRouteObject);\n    }\n\n    if (validRoute(isSingleProduct?.afterLoginRoute, app.router)) {\n      return redirect(isSingleProduct.afterLoginRoute);\n    }\n\n    return redirect(dashboardHome);\n  }\n};\n</script>\n"],"mappings":"AACA,SAAAA,cAAA;AACA,SAAAC,cAAA;AAEA,IAAAC,UAAA,YAAAA,WAAAC,KAAA,EAAAC,MAAA;EAAA,IAAAC,eAAA;EACA,SAAAF,KAAA,QAAAE,eAAA,GAAAD,MAAA,CAAAE,OAAA,CAAAH,KAAA,eAAAE,eAAA,gBAAAA,eAAA,GAAAA,eAAA,CAAAE,QAAA,cAAAF,eAAA,gBAAAA,eAAA,GAAAA,eAAA,CAAAG,OAAA,cAAAH,eAAA,eAAAA,eAAA,CAAAI,MAAA;AACA;AAEA;EACAC,UAAA,WAAAA,WAAAC,IAAA,EAEA;IAAA,IAAAC,kBAAA;IAAA,IADAC,QAAA,GAAAF,IAAA,CAAAE,QAAA;MAAAC,KAAA,GAAAH,IAAA,CAAAG,KAAA;MAAAC,GAAA,GAAAJ,IAAA,CAAAI,GAAA;MAAAZ,KAAA,GAAAQ,IAAA,CAAAR,KAAA;IAEA,IAAAa,YAAA,GAAAF,KAAA,CAAAG,OAAA,cAAAjB,cAAA;IACA,IAAAkB,WAAA,GAAAjB,cAAA,CAAAa,KAAA;IACA,IAAAK,eAAA,GAAAL,KAAA,CAAAG,OAAA;IACA,IAAAG,aAAA;MAAAC,IAAA;IAAA;;IAEA;IACA,IAAAH,WAAA,CAAAI,WAAA,KAAAN,YAAA,KAAAG,eAAA;MACA,OAAAN,QAAA,CAAAO,aAAA;IACA;IAEA,IAAAG,qBAAA,GAAAT,KAAA,CAAAG,OAAA;IACA,IAAAO,WAAA,GAAAT,GAAA,CAAAX,MAAA,CAAAE,OAAA,CAAAiB,qBAAA;;IAEA;IACA;IACA,KAAAC,WAAA,aAAAA,WAAA,gBAAAZ,kBAAA,GAAAY,WAAA,CAAArB,KAAA,cAAAS,kBAAA,uBAAAA,kBAAA,CAAAa,QAAA;MACA,OAAAZ,QAAA,CAAAO,aAAA;IACA;;IAEA;IACA,IAAAlB,UAAA,CAAAqB,qBAAA,EAAAR,GAAA,CAAAX,MAAA;MACA;MACA,OAAAS,QAAA,CAAAU,qBAAA;IACA;IAEA,IAAArB,UAAA,CAAAiB,eAAA,aAAAA,eAAA,uBAAAA,eAAA,CAAAO,eAAA,EAAAX,GAAA,CAAAX,MAAA;MACA,OAAAS,QAAA,CAAAM,eAAA,CAAAO,eAAA;IACA;IAEA,OAAAb,QAAA,CAAAO,aAAA;EACA;AACA"}]}