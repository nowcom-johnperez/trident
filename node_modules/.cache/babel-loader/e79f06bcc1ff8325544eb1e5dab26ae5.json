{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/dashboard-store/mutations.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/dashboard-store/mutations.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwpmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1siQEBpdGVyYXRvciJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKSBpdC5yZXR1cm4oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfQpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldOyByZXR1cm4gYXJyMjsgfQpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQubWFwLmRlbGV0ZS1hbGwuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQubWFwLmV2ZXJ5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lm1hcC5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQubWFwLmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQubWFwLmZpbmQta2V5LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lm1hcC5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5tYXAua2V5LW9mLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXNuZXh0Lm1hcC5tYXAta2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5tYXAubWFwLXZhbHVlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5tYXAubWVyZ2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQubWFwLnJlZHVjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5tYXAuc29tZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzbmV4dC5tYXAudXBkYXRlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmFzc2lnbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IGFkZE9iamVjdCwgYWRkT2JqZWN0cywgY2xlYXIsIHJlbW92ZU9iamVjdCB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCB7IFNDSEVNQSwgQ09VTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgbm9ybWFsaXplVHlwZSwga2V5RmllbGRGb3IgfSBmcm9tICdAc2hlbGwvcGx1Z2lucy9kYXNoYm9hcmQtc3RvcmUvbm9ybWFsaXplJzsKaW1wb3J0IHsgYWRkU2NoZW1hSW5kZXhGaWVsZHMgfSBmcm9tICdAc2hlbGwvcGx1Z2lucy9zdGV2ZS9zY2hlbWEudXRpbHMnOwppbXBvcnQgeyBjbGFzc2lmeSB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZS9jbGFzc2lmeSc7CmltcG9ydCBnYXJiYWdlQ29sbGVjdCBmcm9tICdAc2hlbGwvdXRpbHMvZ2MvZ2MnOwpmdW5jdGlvbiByZWdpc3RlclR5cGUoc3RhdGUsIHR5cGUpIHsKICB2YXIgY2FjaGUgPSBzdGF0ZS50eXBlc1t0eXBlXTsKICBpZiAoIWNhY2hlKSB7CiAgICBjYWNoZSA9IHsKICAgICAgbGlzdDogW10sCiAgICAgIGhhdmVBbGw6IGZhbHNlLAogICAgICBoYXZlU2VsZWN0b3I6IHt9LAogICAgICBoYXZlTmFtZXNwYWNlOiB1bmRlZmluZWQsCiAgICAgIC8vIElmIHRoZSBjYWNoZWQgbGlzdCBvbmx5IGNvbnRhaW5zIHJlc291cmNlcyBmb3IgYSBuYW1lc3BhY2UsIHRoaXMgd2lsbCBjb250YWluIHRoZSBucyBuYW1lCiAgICAgIHJldmlzaW9uOiAwLAogICAgICAvLyBUaGUgaGlnaGVzdCBrbm93biByZXNvdXJjZVZlcnNpb24gZnJvbSB0aGUgc2VydmVyIGZvciB0aGlzIHR5cGUKICAgICAgZ2VuZXJhdGlvbjogMCwKICAgICAgLy8gVXBkYXRlZCBldmVyeSB0aW1lIHNvbWV0aGluZyBpcyBsb2FkZWQgZm9yIHRoaXMgdHlwZQogICAgICBsb2FkQ291bnRlcjogMCAvLyBVc2VkIHRvIGNhbmNlbCBpbmNyZW1lbnRhbCBsb2FkcyBpZiB0aGUgcGFnZSBjaGFuZ2VzIGR1cmluZyBsb2FkCiAgICB9OwoKICAgIC8vIE5vdCBlbnVtZXJhYmxlIHNvIHRoZXkgZG9uJ3QgZ2V0IHNlbnQgYmFjayB0byB0aGUgY2xpZW50IGZvciBTU1IKICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjYWNoZSwgJ21hcCcsIHsKICAgICAgdmFsdWU6IG5ldyBNYXAoKQogICAgfSk7CiAgICBpZiAocHJvY2Vzcy5zZXJ2ZXIgJiYgIWNhY2hlLmxpc3QuX19yZWh5ZHJhdGVBbGwpIHsKICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KGNhY2hlLmxpc3QsICdfX3JlaHlkcmF0ZUFsbCcsIHsKICAgICAgICB2YWx1ZTogIiIuY29uY2F0KHN0YXRlLmNvbmZpZy5uYW1lc3BhY2UsICIvIikuY29uY2F0KHR5cGUpLAogICAgICAgIGVudW1lcmFibGU6IHRydWUKICAgICAgfSk7CiAgICB9CiAgICBWdWUuc2V0KHN0YXRlLnR5cGVzLCB0eXBlLCBjYWNoZSk7CiAgfQogIHJldHVybiBjYWNoZTsKfQpleHBvcnQgZnVuY3Rpb24gcmVwbGFjZShleGlzdGluZywgZGF0YSkgewogIGZvciAodmFyIF9pID0gMCwgX09iamVjdCRrZXlzID0gT2JqZWN0LmtleXMoZXhpc3RpbmcpOyBfaSA8IF9PYmplY3Qka2V5cy5sZW5ndGg7IF9pKyspIHsKICAgIHZhciBrID0gX09iamVjdCRrZXlzW19pXTsKICAgIGRlbGV0ZSBleGlzdGluZ1trXTsKICB9CiAgZm9yICh2YXIgX2kyID0gMCwgX09iamVjdCRrZXlzMiA9IE9iamVjdC5rZXlzKGRhdGEpOyBfaTIgPCBfT2JqZWN0JGtleXMyLmxlbmd0aDsgX2kyKyspIHsKICAgIHZhciBfayA9IF9PYmplY3Qka2V5czJbX2kyXTsKICAgIFZ1ZS5zZXQoZXhpc3RpbmcsIF9rLCBkYXRhW19rXSk7CiAgfQogIHJldHVybiBleGlzdGluZzsKfQpmdW5jdGlvbiByZXBsYWNlUmVzb3VyY2UoZXhpc3RpbmcsIGRhdGEsIGdldHRlcnMpIHsKICBkYXRhID0gZ2V0dGVycy5jbGVhblJlc291cmNlKGV4aXN0aW5nLCBkYXRhKTsKICByZXR1cm4gcmVwbGFjZShleGlzdGluZywgZGF0YSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGxvYWQoc3RhdGUsIF9yZWYpIHsKICB2YXIgZGF0YSA9IF9yZWYuZGF0YSwKICAgIGN0eCA9IF9yZWYuY3R4LAogICAgZXhpc3RpbmcgPSBfcmVmLmV4aXN0aW5nOwogIHZhciBnZXR0ZXJzID0gY3R4LmdldHRlcnM7CiAgdmFyIHR5cGUgPSBub3JtYWxpemVUeXBlKGRhdGEudHlwZSk7CiAgdmFyIGtleUZpZWxkID0gZ2V0dGVycy5rZXlGaWVsZEZvclR5cGUodHlwZSk7CiAgdmFyIG9wdHMgPSBjdHgucm9vdEdldHRlcnNbInR5cGUtbWFwL29wdGlvbnNGb3IiXSh0eXBlKTsKICB2YXIgbGltaXQgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMubGltaXQ7CgogIC8vIEluamVjdCBzcGVjaWFsIGZpZWxkcyBmb3IgaW5kZXhpbmcgc2NoZW1hcwogIGlmICh0eXBlID09PSBTQ0hFTUEpIHsKICAgIGFkZFNjaGVtYUluZGV4RmllbGRzKGRhdGEpOwogIH0KICB2YXIgaWQgPSBkYXRhW2tleUZpZWxkXTsKICB2YXIgY2FjaGUgPSByZWdpc3RlclR5cGUoc3RhdGUsIHR5cGUpOwogIGNhY2hlLmdlbmVyYXRpb24rKzsKICB2YXIgZW50cnk7CiAgaWYgKGV4aXN0aW5nICYmICFleGlzdGluZy5pZCkgewogICAgLy8gQSBzcGVjaWZpYyBwcm94eSBpbnN0YW5jZSB0byB1c2VkIHdhcyBwYXNzZWQgaW4gKGZvciBjcmVhdGUgLT4gc2F2ZSksCiAgICAvLyB1c2UgaXQgaW5zdGVhZCBvZiBtYWtpbmcgYSBuZXcgcHJveHkKICAgIGVudHJ5ID0gcmVwbGFjZVJlc291cmNlKGV4aXN0aW5nLCBkYXRhLCBnZXR0ZXJzKTsKICAgIGFkZE9iamVjdChjYWNoZS5saXN0LCBlbnRyeSk7CiAgICBjYWNoZS5tYXAuc2V0KGlkLCBlbnRyeSk7CiAgICAvLyBjb25zb2xlLmxvZygnIyMjIE11dGF0aW9uIGFkZGVkIGZyb20gZXhpc3RpbmcgcHJveHknLCB0eXBlLCBpZCk7CiAgfSBlbHNlIHsKICAgIGVudHJ5ID0gY2FjaGUubWFwLmdldChpZCk7CiAgICBpZiAoZW50cnkpIHsKICAgICAgLy8gVGhlcmUncyBhbHJlYWR5IGFuIGVudHJ5IGluIHRoZSBzdG9yZSwgdXBkYXRlIGl0CiAgICAgIHJlcGxhY2VSZXNvdXJjZShlbnRyeSwgZGF0YSwgZ2V0dGVycyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCcjIyMgTXV0YXRpb24gVXBkYXRlZCcsIHR5cGUsIGlkKTsKICAgIH0gZWxzZSB7CiAgICAgIC8vIFRoZXJlJ3Mgbm8gZW50cnksIG1ha2UgYSBuZXcgcHJveHkKICAgICAgZW50cnkgPSBjbGFzc2lmeShjdHgsIGRhdGEpOwogICAgICBhZGRPYmplY3QoY2FjaGUubGlzdCwgZW50cnkpOwogICAgICBjYWNoZS5tYXAuc2V0KGlkLCBlbnRyeSk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCcjIyMgTXV0YXRpb24nLCB0eXBlLCBpZCk7CgogICAgICAvLyBJZiB0aGVyZSBpcyBhIGxpbWl0IHRvIHRoZSBudW1iZXIgb2YgcmVzb3VyY2VzIHdlIGNhbiBzdG9yZSBmb3IgdGhpcyB0eXBlIHRoZW4KICAgICAgLy8gcmVtb3ZlIHRoZSBmaXJzdCBvbmUgdG8ga2VlcCB0aGUgbGlzdCBzaXplIHRvIHRoYXQgbGltaXQKICAgICAgaWYgKGxpbWl0ICYmIGNhY2hlLmxpc3QubGVuZ3RoID4gbGltaXQpIHsKICAgICAgICB2YXIgcm0gPSBjYWNoZS5saXN0LnNoaWZ0KCk7CiAgICAgICAgY2FjaGUubWFwLmRlbGV0ZShybS5pZCk7CiAgICAgIH0KICAgIH0KICB9CiAgaWYgKGRhdGEuYmFzZVR5cGUpIHsKICAgIHR5cGUgPSBub3JtYWxpemVUeXBlKGRhdGEuYmFzZVR5cGUpOwogICAgY2FjaGUgPSBzdGF0ZS50eXBlc1t0eXBlXTsKICAgIGlmIChjYWNoZSkgewogICAgICBhZGRPYmplY3QoY2FjaGUubGlzdCwgZW50cnkpOwogICAgICBjYWNoZS5tYXAuc2V0KGlkLCBlbnRyeSk7CiAgICB9CiAgfQogIHJldHVybiBlbnRyeTsKfQpleHBvcnQgZnVuY3Rpb24gZm9yZ2V0VHlwZShzdGF0ZSwgdHlwZSkgewogIHZhciBjYWNoZSA9IHN0YXRlLnR5cGVzW3R5cGVdOwogIGlmIChjYWNoZSkgewogICAgY2FjaGUuaGF2ZUFsbCA9IGZhbHNlOwogICAgY2FjaGUuaGF2ZVNlbGVjdG9yID0ge307CiAgICBjYWNoZS5oYXZlTmFtZXNwYWNlID0gdW5kZWZpbmVkOwogICAgY2FjaGUucmV2aXNpb24gPSAwOwogICAgY2FjaGUuZ2VuZXJhdGlvbiA9IDA7CiAgICBjbGVhcihjYWNoZS5saXN0KTsKICAgIGNhY2hlLm1hcC5jbGVhcigpOwogICAgZGVsZXRlIHN0YXRlLnR5cGVzW3R5cGVdOwogICAgZ2FyYmFnZUNvbGxlY3QuZ2NSZXNldFR5cGUoc3RhdGUsIHR5cGUpOwogICAgcmV0dXJuIHRydWU7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiByZXNldFN0b3JlKHN0YXRlLCBjb21taXQpIHsKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZQogIGNvbnNvbGUubG9nKCdSZXNldCBzdG9yZTogJywgc3RhdGUuY29uZmlnLm5hbWVzcGFjZSk7CiAgZm9yICh2YXIgX2kzID0gMCwgX09iamVjdCRrZXlzMyA9IE9iamVjdC5rZXlzKHN0YXRlLnR5cGVzKTsgX2kzIDwgX09iamVjdCRrZXlzMy5sZW5ndGg7IF9pMysrKSB7CiAgICB2YXIgdHlwZSA9IF9PYmplY3Qka2V5czNbX2kzXTsKICAgIGNvbW1pdCgiIi5jb25jYXQoc3RhdGUuY29uZmlnLm5hbWVzcGFjZSwgIi9mb3JnZXRUeXBlIiksIHR5cGUpOwogIH0KICBnYXJiYWdlQ29sbGVjdC5nY1Jlc2V0U3RvcmUoc3RhdGUpOwp9CmZ1bmN0aW9uIF9yZW1vdmUoc3RhdGUsIG9iaiwgZ2V0dGVycykgewogIGlmIChvYmopIHsKICAgIHZhciB0eXBlID0gbm9ybWFsaXplVHlwZShvYmoudHlwZSk7CiAgICB2YXIga2V5RmllbGQgPSBnZXR0ZXJzWyIiLmNvbmNhdChzdGF0ZS5jb25maWcubmFtZXNwYWNlLCAiL2tleUZpZWxkRm9yVHlwZSIpXSh0eXBlKTsKICAgIHZhciBpZCA9IG9ialtrZXlGaWVsZF07CiAgICB2YXIgZW50cnkgPSBzdGF0ZS50eXBlc1t0eXBlXTsKICAgIGlmIChlbnRyeSkgewogICAgICByZW1vdmVPYmplY3QoZW50cnkubGlzdCwgb2JqKTsKICAgICAgZW50cnkubWFwLmRlbGV0ZShpZCk7CiAgICB9CiAgICBpZiAob2JqLmJhc2VUeXBlKSB7CiAgICAgIHR5cGUgPSBub3JtYWxpemVUeXBlKG9iai5iYXNlVHlwZSk7CiAgICAgIGVudHJ5ID0gc3RhdGUudHlwZXNbdHlwZV07CiAgICAgIGlmIChlbnRyeSkgewogICAgICAgIHJlbW92ZU9iamVjdChlbnRyeS5saXN0LCBvYmopOwogICAgICAgIGVudHJ5Lm1hcC5kZWxldGUoaWQpOwogICAgICB9CiAgICB9CiAgfQp9CmV4cG9ydCB7IF9yZW1vdmUgYXMgcmVtb3ZlIH07CmV4cG9ydCBmdW5jdGlvbiBiYXRjaENoYW5nZXMoc3RhdGUsIF9yZWYyKSB7CiAgdmFyIGN0eCA9IF9yZWYyLmN0eCwKICAgIGJhdGNoID0gX3JlZjIuYmF0Y2g7CiAgdmFyIGJhdGNoVHlwZXMgPSBPYmplY3Qua2V5cyhiYXRjaCk7CiAgdmFyIGNvbWJpbmVkQmF0Y2ggPSB7fTsKICBiYXRjaFR5cGVzLmZvckVhY2goZnVuY3Rpb24gKGJhdGNoVHlwZSkgewogICAgdmFyIF90eXBlT3B0aW9uJGFsaWFzOwogICAgY29tYmluZWRCYXRjaFtiYXRjaFR5cGVdID0gYmF0Y2hbYmF0Y2hUeXBlXTsKICAgIHZhciB0eXBlT3B0aW9uID0gY3R4LnJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9vcHRpb25zRm9yJ10oYmF0Y2hUeXBlKTsKICAgIGlmICgodHlwZU9wdGlvbiA9PT0gbnVsbCB8fCB0eXBlT3B0aW9uID09PSB2b2lkIDAgfHwgKF90eXBlT3B0aW9uJGFsaWFzID0gdHlwZU9wdGlvbi5hbGlhcykgPT09IG51bGwgfHwgX3R5cGVPcHRpb24kYWxpYXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90eXBlT3B0aW9uJGFsaWFzLmxlbmd0aCkgPiAwKSB7CiAgICAgIHZhciBhbGlhcyA9ICh0eXBlT3B0aW9uID09PSBudWxsIHx8IHR5cGVPcHRpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IHR5cGVPcHRpb24uYWxpYXMpIHx8IFtdOwogICAgICBhbGlhcy5mb3JFYWNoKGZ1bmN0aW9uIChhbGlhc1R5cGUpIHsKICAgICAgICBjb21iaW5lZEJhdGNoW2FsaWFzVHlwZV0gPSB7fTsKICAgICAgICBmb3IgKHZhciBfaTQgPSAwLCBfT2JqZWN0JGVudHJpZXMgPSBPYmplY3QuZW50cmllcyhiYXRjaFtiYXRjaFR5cGVdKTsgX2k0IDwgX09iamVjdCRlbnRyaWVzLmxlbmd0aDsgX2k0KyspIHsKICAgICAgICAgIHZhciBfT2JqZWN0JGVudHJpZXMkX2kgPSBfc2xpY2VkVG9BcnJheShfT2JqZWN0JGVudHJpZXNbX2k0XSwgMiksCiAgICAgICAgICAgIGtleSA9IF9PYmplY3QkZW50cmllcyRfaVswXSwKICAgICAgICAgICAgdmFsdWUgPSBfT2JqZWN0JGVudHJpZXMkX2lbMV07CiAgICAgICAgICBjb21iaW5lZEJhdGNoW2FsaWFzVHlwZV1ba2V5XSA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgdmFsdWUpLCB7fSwgewogICAgICAgICAgICB0eXBlOiBhbGlhc1R5cGUKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfSk7CiAgdmFyIGNvbWJpbmVkQmF0Y2hUeXBlcyA9IE9iamVjdC5rZXlzKGNvbWJpbmVkQmF0Y2gpOwogIGNvbWJpbmVkQmF0Y2hUeXBlcy5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlKSB7CiAgICB2YXIgbm9ybWFsaXplZFR5cGUgPSBub3JtYWxpemVUeXBlKHR5cGUgPT09ICdjb3VudHMnID8gQ09VTlQgOiB0eXBlKTsKICAgIHZhciBrZXlGaWVsZCA9IGtleUZpZWxkRm9yKG5vcm1hbGl6ZWRUeXBlKTsKICAgIHZhciB0eXBlQ2FjaGUgPSByZWdpc3RlclR5cGUoc3RhdGUsIG5vcm1hbGl6ZWRUeXBlKTsKCiAgICAvLyBtYWtpbmcgYSBtYXAgZm9yIGV2ZXJ5IHJlc291cmNlJ3MgbG9jYXRpb24gaW4gdGhlIGxpc3QgaXMgZ29ubmEgZW5zdXJlIHdlIG9ubHkgaGF2ZSB0byBsb29wIHRocm91Z2ggdGhlIGJpZyBsaXN0IG9uY2UuCiAgICB2YXIgdHlwZUNhY2hlSW5kZXhNYXAgPSB7fTsKICAgIHR5cGVDYWNoZS5saXN0LmZvckVhY2goZnVuY3Rpb24gKHJlc291cmNlLCBpbmRleCkgewogICAgICB0eXBlQ2FjaGVJbmRleE1hcFtyZXNvdXJjZVtrZXlGaWVsZF1dID0gaW5kZXg7CiAgICB9KTsKICAgIHZhciByZW1vdmVBdEluZGV4ZXMgPSBbXTsKCiAgICAvLyBsb29waW5nIHRocm91Z2ggdGhlIGJhdGNoLCBleGVjdXRpbmcgY2hhbmdlcywgZGVmZXJyaW5nIGNyZWF0ZXMgYW5kIHJlbW92ZXMgc2luY2UgdGhleSBjaGFuZ2UgdGhlIGFycmF5IGxlbmd0aAogICAgT2JqZWN0LmtleXMoY29tYmluZWRCYXRjaFtub3JtYWxpemVkVHlwZV0pLmZvckVhY2goZnVuY3Rpb24gKGlkKSB7CiAgICAgIHZhciBpbmRleCA9IHR5cGVDYWNoZUluZGV4TWFwW2lkXTsKICAgICAgdmFyIHJlc291cmNlID0gY29tYmluZWRCYXRjaFtub3JtYWxpemVkVHlwZV1baWRdOwoKICAgICAgLy8gYW4gZW1wdHkgcmVzb3VyY2UgcGFzc2VkIGludG8gYmF0Y2ggY2hhbmdlcyBpcyBob3cgd2UnbGwgc2lnbmFsIHdoaWNoIG9uZXMgdG8gZGVsZXRlCiAgICAgIGlmIChPYmplY3Qua2V5cyhyZXNvdXJjZSkubGVuZ3RoID09PSAwICYmIGluZGV4ICE9PSB1bmRlZmluZWQpIHsKICAgICAgICB0eXBlQ2FjaGUubWFwLmRlbGV0ZShpZCk7CiAgICAgICAgcmVtb3ZlQXRJbmRleGVzLnB1c2goaW5kZXgpOwogICAgICB9IGVsc2UgaWYgKE9iamVjdC5rZXlzKHJlc291cmNlKS5sZW5ndGggPT09IDApIHsKICAgICAgICAvLyBObyBvcC4gV2UncmUgcmVtb3ZpbmcgaXQuLi4gYnV0IHdlIGRvbid0IGhhdmUgaXQgaW4gdGhlIGNhY2hlCiAgICAgIH0gZWxzZSB7CiAgICAgICAgaWYgKG5vcm1hbGl6ZWRUeXBlID09PSBTQ0hFTUEpIHsKICAgICAgICAgIGFkZFNjaGVtYUluZGV4RmllbGRzKHJlc291cmNlKTsKICAgICAgICB9CiAgICAgICAgdmFyIGNsYXNzeVJlc291cmNlID0gY2xhc3NpZnkoY3R4LCByZXNvdXJjZSk7CiAgICAgICAgaWYgKGluZGV4ID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHR5cGVDYWNoZS5saXN0LnB1c2goY2xhc3N5UmVzb3VyY2UpOwogICAgICAgICAgdHlwZUNhY2hlLm1hcC5zZXQoaWQsIGNsYXNzeVJlc291cmNlKTsKICAgICAgICAgIHR5cGVDYWNoZUluZGV4TWFwW2NsYXNzeVJlc291cmNlW2tleUZpZWxkXV0gPSB0eXBlQ2FjaGUubGlzdC5sZW5ndGggLSAxOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXBsYWNlUmVzb3VyY2UodHlwZUNhY2hlLmxpc3RbaW5kZXhdLCByZXNvdXJjZSwgY3R4LmdldHRlcnMpOwogICAgICAgIH0KICAgICAgfQogICAgfSk7CgogICAgLy8gbG9vcGluZyB0aHJvdWdoIHRoZSByZW1vdmVBdEluZGV4ZXMsIG1ha2luZyBzdXJlIHRvIG9mZnNldCBieSBpdGVyYXRpb24gc28gdGhlIGFycmF5IGNoYW5naW5nIGRvZXNuJ3QgbWVzcyB1cyB1cAogICAgcmVtb3ZlQXRJbmRleGVzLnNvcnQoKS5mb3JFYWNoKGZ1bmN0aW9uIChjYWNoZUluZGV4LCBsb29wSW5kZXgpIHsKICAgICAgdHlwZUNhY2hlLmxpc3Quc3BsaWNlKGNhY2hlSW5kZXggLSBsb29wSW5kZXgsIDEpOwogICAgfSk7CiAgICB2YXIgb3B0cyA9IGN0eC5yb290R2V0dGVyc1sidHlwZS1tYXAvb3B0aW9uc0ZvciJdKHR5cGUpOwogICAgdmFyIGxpbWl0ID0gb3B0cyA9PT0gbnVsbCB8fCBvcHRzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBvcHRzLmxpbWl0OwoKICAgIC8vIElmIHRoZXJlIGlzIGEgbGltaXQgdG8gdGhlIG51bWJlciBvZiByZXNvdXJjZXMgd2UgY2FuIHN0b3JlIGZvciB0aGlzIHR5cGUgdGhlbgogICAgLy8gcmVtb3ZlIHRoZSBmaXJzdCBvbmUgdG8ga2VlcCB0aGUgbGlzdCBzaXplIHRvIHRoYXQgbGltaXQKICAgIGlmIChsaW1pdCAmJiB0eXBlQ2FjaGUubGlzdC5sZW5ndGggPiBsaW1pdCkgewogICAgICB2YXIgcm0gPSB0eXBlQ2FjaGUubGlzdC5zaGlmdCgpOwogICAgICB0eXBlQ2FjaGUubWFwLmRlbGV0ZShybS5pZCk7CiAgICB9CiAgICB0eXBlQ2FjaGUuZ2VuZXJhdGlvbisrOwogIH0pOwp9CmV4cG9ydCBmdW5jdGlvbiBsb2FkQWxsKHN0YXRlLCBfcmVmMykgewogIHZhciB0eXBlID0gX3JlZjMudHlwZSwKICAgIGRhdGEgPSBfcmVmMy5kYXRhLAogICAgY3R4ID0gX3JlZjMuY3R4LAogICAgc2tpcEhhdmVBbGwgPSBfcmVmMy5za2lwSGF2ZUFsbCwKICAgIG5hbWVzcGFjZSA9IF9yZWYzLm5hbWVzcGFjZSwKICAgIHJldmlzaW9uID0gX3JlZjMucmV2aXNpb247CiAgdmFyIGdldHRlcnMgPSBjdHguZ2V0dGVyczsKICBpZiAoIWRhdGEpIHsKICAgIHJldHVybjsKICB9CiAgdmFyIG9wdHMgPSBjdHgucm9vdEdldHRlcnNbInR5cGUtbWFwL29wdGlvbnNGb3IiXSh0eXBlKTsKICB2YXIgbGltaXQgPSBvcHRzID09PSBudWxsIHx8IG9wdHMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdHMubGltaXQ7CgogIC8vIElmIHRoZXJlIGlzIGEgbGltaXQsIG9ubHkgc3RvcmUgdGhlIGxhc3QgZWxlbWVudHMgZnJvbSB0aGUgbGlzdCB0byBrZWVwIHRvIHRoYXQgbGltaXQKICBpZiAobGltaXQpIHsKICAgIGRhdGEgPSBkYXRhLnNsaWNlKC1saW1pdCk7CiAgfQogIHZhciBrZXlGaWVsZCA9IGdldHRlcnMua2V5RmllbGRGb3JUeXBlKHR5cGUpOwogIHZhciBwcm94aWVzID0gZGF0YS5tYXAoZnVuY3Rpb24gKHgpIHsKICAgIHJldHVybiBjbGFzc2lmeShjdHgsIHgpOwogIH0pOwogIHZhciBjYWNoZSA9IHJlZ2lzdGVyVHlwZShzdGF0ZSwgdHlwZSk7CiAgY2xlYXIoY2FjaGUubGlzdCk7CiAgY2FjaGUubWFwLmNsZWFyKCk7CiAgY2FjaGUucmV2aXNpb24gPSByZXZpc2lvbiB8fCAwOwogIGNhY2hlLmdlbmVyYXRpb24rKzsKICBhZGRPYmplY3RzKGNhY2hlLmxpc3QsIHByb3hpZXMpOwogIGZvciAodmFyIGkgPSAwOyBpIDwgcHJveGllcy5sZW5ndGg7IGkrKykgewogICAgY2FjaGUubWFwLnNldChwcm94aWVzW2ldW2tleUZpZWxkXSwgcHJveGllc1tpXSk7CiAgfQoKICAvLyBBbGxvdyByZXF1ZXN0ZXIgdG8gc2tpcCBzZXR0aW5nIHRoYXQgZXZlcnl0aGluZyBoYXMgbG9hZGVkCiAgaWYgKCFza2lwSGF2ZUFsbCkgewogICAgY2FjaGUuaGF2ZU5hbWVzcGFjZSA9IG5hbWVzcGFjZTsKICAgIGNhY2hlLmhhdmVBbGwgPSAhbmFtZXNwYWNlOwogIH0KICByZXR1cm4gcHJveGllczsKfQpleHBvcnQgZGVmYXVsdCB7CiAgcmVnaXN0ZXJUeXBlOiByZWdpc3RlclR5cGUsCiAgbG9hZDogbG9hZCwKICBhcHBseUNvbmZpZzogZnVuY3Rpb24gYXBwbHlDb25maWcoc3RhdGUsIGNvbmZpZykgewogICAgaWYgKCFzdGF0ZS5jb25maWcpIHsKICAgICAgc3RhdGUuY29uZmlnID0ge307CiAgICB9CiAgICBPYmplY3QuYXNzaWduKHN0YXRlLmNvbmZpZywgY29uZmlnKTsKICB9LAogIGxvYWRNdWx0aTogZnVuY3Rpb24gbG9hZE11bHRpKHN0YXRlLCBfcmVmNCkgewogICAgdmFyIGRhdGEgPSBfcmVmNC5kYXRhLAogICAgICBjdHggPSBfcmVmNC5jdHg7CiAgICAvLyBjb25zb2xlLmxvZygnIyMjIE11dGF0aW9uIGxvYWRNdWx0aScsIGRhdGE/Lmxlbmd0aCk7CiAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZGF0YSksCiAgICAgIF9zdGVwOwogICAgdHJ5IHsKICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICB2YXIgZW50cnkgPSBfc3RlcC52YWx1ZTsKICAgICAgICBsb2FkKHN0YXRlLCB7CiAgICAgICAgICBkYXRhOiBlbnRyeSwKICAgICAgICAgIGN0eDogY3R4CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KICB9LAogIGxvYWRTZWxlY3RvcjogZnVuY3Rpb24gbG9hZFNlbGVjdG9yKHN0YXRlLCBfcmVmNSkgewogICAgdmFyIHR5cGUgPSBfcmVmNS50eXBlLAogICAgICBlbnRyaWVzID0gX3JlZjUuZW50cmllcywKICAgICAgY3R4ID0gX3JlZjUuY3R4LAogICAgICBzZWxlY3RvciA9IF9yZWY1LnNlbGVjdG9yLAogICAgICByZXZpc2lvbiA9IF9yZWY1LnJldmlzaW9uOwogICAgdmFyIGNhY2hlID0gcmVnaXN0ZXJUeXBlKHN0YXRlLCB0eXBlKTsKICAgIHZhciBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoZW50cmllcyksCiAgICAgIF9zdGVwMjsKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIGRhdGEgPSBfc3RlcDIudmFsdWU7CiAgICAgICAgbG9hZChzdGF0ZSwgewogICAgICAgICAgZGF0YTogZGF0YSwKICAgICAgICAgIGN0eDogY3R4CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvcjIuZigpOwogICAgfQogICAgY2FjaGUuaGF2ZVNlbGVjdG9yW3NlbGVjdG9yXSA9IHRydWU7CiAgICBjYWNoZS5yZXZpc2lvbiA9IHJldmlzaW9uIHx8IDA7CiAgfSwKICBsb2FkQWxsOiBsb2FkQWxsLAogIC8qKgogICAqIEhhbmRsZXMgY2hhbmdlcyAoYWRkLCB1cGRhdGUsIHJlbW92ZSkgdG8gbXVsdGlwbGUgcmVzb3VyY2VzIGZvciBtdWx0aXBsZSB0eXBlcwogICAqLwogIGJhdGNoQ2hhbmdlczogYmF0Y2hDaGFuZ2VzLAogIGxvYWRNZXJnZTogZnVuY3Rpb24gbG9hZE1lcmdlKHN0YXRlLCBfcmVmNikgewogICAgdmFyIHR5cGUgPSBfcmVmNi50eXBlLAogICAgICBhbGxMYXRlc3QgPSBfcmVmNi5kYXRhLAogICAgICBjdHggPSBfcmVmNi5jdHg7CiAgICB2YXIgY29tbWl0ID0gY3R4LmNvbW1pdCwKICAgICAgZ2V0dGVycyA9IGN0eC5nZXR0ZXJzOwogICAgLy8gY29uc3QgYWxsTGF0ZXN0ID0gYXdhaXQgZGlzcGF0Y2goJ2ZpbmRBbGwnLCB7IHR5cGUsIG9wdDogeyBmb3JjZTogdHJ1ZSwgbG9hZCwgX05PTkUgfSB9KTsKICAgIC8vIGNvbnN0IGFsbEV4aXN0aW5nID0gZ2V0dGVycy5hbGwoe3R5cGV9KTsKICAgIHZhciBrZXlGaWVsZCA9IGdldHRlcnMua2V5RmllbGRGb3JUeXBlKHR5cGUpOwogICAgdmFyIGNhY2hlID0gc3RhdGUudHlwZXNbdHlwZV07CiAgICBhbGxMYXRlc3QuZm9yRWFjaChmdW5jdGlvbiAoZW50cnkpIHsKICAgICAgdmFyIGV4aXN0aW5nID0gc3RhdGUudHlwZXNbdHlwZV0ubWFwLmdldChlbnRyeVtrZXlGaWVsZF0pOwogICAgICBsb2FkKHN0YXRlLCB7CiAgICAgICAgZGF0YTogZW50cnksCiAgICAgICAgY3R4OiBjdHgsCiAgICAgICAgZXhpc3Rpbmc6IGV4aXN0aW5nCiAgICAgIH0pOwogICAgfSk7CiAgICBjYWNoZS5saXN0LmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7CiAgICAgIGlmICghYWxsTGF0ZXN0LmZpbmQoZnVuY3Rpb24gKHRvTG9hZEVudHJ5KSB7CiAgICAgICAgcmV0dXJuIHRvTG9hZEVudHJ5LmlkID09PSBlbnRyeS5pZDsKICAgICAgfSkpIHsKICAgICAgICBjb21taXQoJ3JlbW92ZScsIGVudHJ5KTsKICAgICAgfQogICAgfSk7CiAgfSwKICAvLyBBZGQgYSBzZXQgb2YgcmVzb3VyY2VzIHRvIHRoZSBzdG9yZSBmb3IgYSBnaXZlbiB0eXBlCiAgLy8gRG9uJ3QgbWFyayB0aGUgJ2hhdmVBbGwnIGZpZWxkIC0gdGhpcyBpcyB1c2VkIGZvciBpbmNyZW1lbnRhbCBsb2FkaW5nCiAgbG9hZEFkZDogZnVuY3Rpb24gbG9hZEFkZChzdGF0ZSwgX3JlZjcpIHsKICAgIHZhciB0eXBlID0gX3JlZjcudHlwZSwKICAgICAgYWxsTGF0ZXN0ID0gX3JlZjcuZGF0YSwKICAgICAgY3R4ID0gX3JlZjcuY3R4OwogICAgdmFyIGdldHRlcnMgPSBjdHguZ2V0dGVyczsKICAgIHZhciBrZXlGaWVsZCA9IGdldHRlcnMua2V5RmllbGRGb3JUeXBlKHR5cGUpOwogICAgYWxsTGF0ZXN0LmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7CiAgICAgIHZhciBleGlzdGluZyA9IHN0YXRlLnR5cGVzW3R5cGVdLm1hcC5nZXQoZW50cnlba2V5RmllbGRdKTsKICAgICAgbG9hZChzdGF0ZSwgewogICAgICAgIGRhdGE6IGVudHJ5LAogICAgICAgIGN0eDogY3R4LAogICAgICAgIGV4aXN0aW5nOiBleGlzdGluZwogICAgICB9KTsKICAgIH0pOwogIH0sCiAgZm9yZ2V0QWxsOiBmdW5jdGlvbiBmb3JnZXRBbGwoc3RhdGUsIF9yZWY4KSB7CiAgICB2YXIgdHlwZSA9IF9yZWY4LnR5cGU7CiAgICB2YXIgY2FjaGUgPSByZWdpc3RlclR5cGUoc3RhdGUsIHR5cGUpOwogICAgY2xlYXIoY2FjaGUubGlzdCk7CiAgICBjYWNoZS5tYXAuY2xlYXIoKTsKICAgIGNhY2hlLmdlbmVyYXRpb24rKzsKICB9LAogIHNldEhhdmVBbGw6IGZ1bmN0aW9uIHNldEhhdmVBbGwoc3RhdGUsIF9yZWY5KSB7CiAgICB2YXIgdHlwZSA9IF9yZWY5LnR5cGU7CiAgICB2YXIgY2FjaGUgPSByZWdpc3RlclR5cGUoc3RhdGUsIHR5cGUpOwogICAgY2FjaGUuaGF2ZUFsbCA9IHRydWU7CiAgfSwKICBzZXRIYXZlTmFtZXNwYWNlOiBmdW5jdGlvbiBzZXRIYXZlTmFtZXNwYWNlKHN0YXRlLCBfcmVmMTApIHsKICAgIHZhciB0eXBlID0gX3JlZjEwLnR5cGUsCiAgICAgIG5hbWVzcGFjZSA9IF9yZWYxMC5uYW1lc3BhY2U7CiAgICB2YXIgY2FjaGUgPSByZWdpc3RlclR5cGUoc3RhdGUsIHR5cGUpOwogICAgY2FjaGUuaGF2ZU5hbWVzcGFjZSA9IG5hbWVzcGFjZTsKICB9LAogIGxvYWRlZEFsbDogZnVuY3Rpb24gbG9hZGVkQWxsKHN0YXRlLCBfcmVmMTEpIHsKICAgIHZhciB0eXBlID0gX3JlZjExLnR5cGU7CiAgICB2YXIgY2FjaGUgPSByZWdpc3RlclR5cGUoc3RhdGUsIHR5cGUpOwogICAgY2FjaGUuZ2VuZXJhdGlvbisrOwogICAgY2FjaGUuaGF2ZUFsbCA9IHRydWU7CiAgfSwKICByZW1vdmU6IGZ1bmN0aW9uIHJlbW92ZShzdGF0ZSwgb2JqKSB7CiAgICBpZiAob2JqKSB7CiAgICAgIF9yZW1vdmUoc3RhdGUsIG9iaiwgdGhpcy5nZXR0ZXJzKTsKICAgIH0KICB9LAogIHJlc2V0OiBmdW5jdGlvbiByZXNldChzdGF0ZSkgewogICAgcmVzZXRTdG9yZShzdGF0ZSwgdGhpcy5jb21taXQpOwogIH0sCiAgZm9yZ2V0VHlwZTogZm9yZ2V0VHlwZSwKICBpbmNyZW1lbnRMb2FkQ291bnRlcjogZnVuY3Rpb24gaW5jcmVtZW50TG9hZENvdW50ZXIoc3RhdGUsIHR5cGUpIHsKICAgIHZhciB0eXBlRGF0YSA9IHN0YXRlLnR5cGVzW3R5cGVdOwogICAgaWYgKHR5cGVEYXRhKSB7CiAgICAgIHR5cGVEYXRhLmxvYWRDb3VudGVyKys7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Vue","addObject","addObjects","clear","removeObject","SCHEMA","COUNT","normalizeType","keyFieldFor","addSchemaIndexFields","classify","garbageCollect","registerType","state","type","cache","types","list","haveAll","haveSelector","haveNamespace","undefined","revision","generation","loadCounter","Object","defineProperty","value","Map","process","server","__rehydrateAll","concat","config","namespace","enumerable","set","replace","existing","data","_i","_Object$keys","keys","length","k","_i2","_Object$keys2","replaceResource","getters","cleanResource","load","_ref","ctx","keyField","keyFieldForType","opts","rootGetters","limit","id","entry","map","get","rm","shift","delete","baseType","forgetType","gcResetType","resetStore","commit","console","log","_i3","_Object$keys3","gcResetStore","remove","obj","_remove","batchChanges","_ref2","batch","batchTypes","combinedBatch","forEach","batchType","_typeOption$alias","typeOption","alias","aliasType","_i4","_Object$entries","entries","_Object$entries$_i","_slicedToArray","key","_objectSpread","combinedBatchTypes","normalizedType","typeCache","typeCacheIndexMap","resource","index","removeAtIndexes","push","classyResource","sort","cacheIndex","loopIndex","splice","loadAll","_ref3","skipHaveAll","slice","proxies","x","i","applyConfig","assign","loadMulti","_ref4","_iterator","_createForOfIteratorHelper","_step","s","n","done","err","e","f","loadSelector","_ref5","selector","_iterator2","_step2","loadMerge","_ref6","allLatest","find","toLoadEntry","loadAdd","_ref7","forgetAll","_ref8","setHaveAll","_ref9","setHaveNamespace","_ref10","loadedAll","_ref11","reset","incrementLoadCounter","typeData"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/dashboard-store/mutations.js"],"sourcesContent":["import Vue from 'vue';\nimport { addObject, addObjects, clear, removeObject } from '@shell/utils/array';\nimport { SCHEMA, COUNT } from '@shell/config/types';\nimport { normalizeType, keyFieldFor } from '@shell/plugins/dashboard-store/normalize';\nimport { addSchemaIndexFields } from '@shell/plugins/steve/schema.utils';\nimport { classify } from '@shell/plugins/dashboard-store/classify';\nimport garbageCollect from '@shell/utils/gc/gc';\n\nfunction registerType(state, type) {\n  let cache = state.types[type];\n\n  if ( !cache ) {\n    cache = {\n      list:          [],\n      haveAll:       false,\n      haveSelector:  {},\n      haveNamespace: undefined, // If the cached list only contains resources for a namespace, this will contain the ns name\n      revision:      0, // The highest known resourceVersion from the server for this type\n      generation:    0, // Updated every time something is loaded for this type\n      loadCounter:   0, // Used to cancel incremental loads if the page changes during load\n    };\n\n    // Not enumerable so they don't get sent back to the client for SSR\n    Object.defineProperty(cache, 'map', { value: new Map() });\n\n    if ( process.server && !cache.list.__rehydrateAll ) {\n      Object.defineProperty(cache.list, '__rehydrateAll', { value: `${ state.config.namespace }/${ type }`, enumerable: true });\n    }\n\n    Vue.set(state.types, type, cache);\n  }\n\n  return cache;\n}\n\nexport function replace(existing, data) {\n  for ( const k of Object.keys(existing) ) {\n    delete existing[k];\n  }\n\n  for ( const k of Object.keys(data) ) {\n    Vue.set(existing, k, data[k]);\n  }\n\n  return existing;\n}\n\nfunction replaceResource(existing, data, getters) {\n  data = getters.cleanResource(existing, data);\n\n  return replace(existing, data);\n}\n\nexport function load(state, { data, ctx, existing }) {\n  const { getters } = ctx;\n  let type = normalizeType(data.type);\n  const keyField = getters.keyFieldForType(type);\n  const opts = ctx.rootGetters[`type-map/optionsFor`](type);\n  const limit = opts?.limit;\n\n  // Inject special fields for indexing schemas\n  if ( type === SCHEMA ) {\n    addSchemaIndexFields(data);\n  }\n\n  const id = data[keyField];\n\n  let cache = registerType(state, type);\n\n  cache.generation++;\n\n  let entry;\n\n  if ( existing && !existing.id ) {\n    // A specific proxy instance to used was passed in (for create -> save),\n    // use it instead of making a new proxy\n    entry = replaceResource(existing, data, getters);\n    addObject(cache.list, entry);\n    cache.map.set(id, entry);\n    // console.log('### Mutation added from existing proxy', type, id);\n  } else {\n    entry = cache.map.get(id);\n\n    if ( entry ) {\n      // There's already an entry in the store, update it\n      replaceResource(entry, data, getters);\n      // console.log('### Mutation Updated', type, id);\n    } else {\n      // There's no entry, make a new proxy\n      entry = classify(ctx, data);\n      addObject(cache.list, entry);\n      cache.map.set(id, entry);\n      // console.log('### Mutation', type, id);\n\n      // If there is a limit to the number of resources we can store for this type then\n      // remove the first one to keep the list size to that limit\n      if (limit && cache.list.length > limit) {\n        const rm = cache.list.shift();\n\n        cache.map.delete(rm.id);\n      }\n    }\n  }\n\n  if ( data.baseType ) {\n    type = normalizeType(data.baseType);\n    cache = state.types[type];\n    if ( cache ) {\n      addObject(cache.list, entry);\n      cache.map.set(id, entry);\n    }\n  }\n\n  return entry;\n}\n\nexport function forgetType(state, type) {\n  const cache = state.types[type];\n\n  if ( cache ) {\n    cache.haveAll = false;\n    cache.haveSelector = {};\n    cache.haveNamespace = undefined;\n    cache.revision = 0;\n    cache.generation = 0;\n    clear(cache.list);\n    cache.map.clear();\n    delete state.types[type];\n\n    garbageCollect.gcResetType(state, type);\n\n    return true;\n  }\n}\n\nexport function resetStore(state, commit) {\n  // eslint-disable-next-line no-console\n  console.log('Reset store: ', state.config.namespace);\n\n  for ( const type of Object.keys(state.types) ) {\n    commit(`${ state.config.namespace }/forgetType`, type);\n  }\n\n  garbageCollect.gcResetStore(state);\n}\n\nexport function remove(state, obj, getters) {\n  if (obj) {\n    let type = normalizeType(obj.type);\n    const keyField = getters[`${ state.config.namespace }/keyFieldForType`](type);\n    const id = obj[keyField];\n\n    let entry = state.types[type];\n\n    if ( entry ) {\n      removeObject(entry.list, obj);\n      entry.map.delete(id);\n    }\n\n    if ( obj.baseType ) {\n      type = normalizeType(obj.baseType);\n      entry = state.types[type];\n\n      if ( entry ) {\n        removeObject(entry.list, obj);\n        entry.map.delete(id);\n      }\n    }\n  }\n}\n\nexport function batchChanges(state, { ctx, batch }) {\n  const batchTypes = Object.keys(batch);\n  const combinedBatch = {};\n\n  batchTypes.forEach((batchType) => {\n    combinedBatch[batchType] = batch[batchType];\n    const typeOption = ctx.rootGetters['type-map/optionsFor'](batchType);\n\n    if (typeOption?.alias?.length > 0) {\n      const alias = typeOption?.alias || [];\n\n      alias.forEach((aliasType) => {\n        combinedBatch[aliasType] = {};\n        for (const [key, value] of Object.entries(batch[batchType])) {\n          combinedBatch[aliasType][key] = {\n            ...value,\n            type: aliasType\n          };\n        }\n      });\n    }\n  });\n\n  const combinedBatchTypes = Object.keys(combinedBatch);\n\n  combinedBatchTypes.forEach((type) => {\n    const normalizedType = normalizeType(type === 'counts' ? COUNT : type);\n    const keyField = keyFieldFor(normalizedType);\n    const typeCache = registerType(state, normalizedType);\n\n    // making a map for every resource's location in the list is gonna ensure we only have to loop through the big list once.\n    const typeCacheIndexMap = {};\n\n    typeCache.list.forEach((resource, index) => {\n      typeCacheIndexMap[resource[keyField]] = index;\n    });\n\n    const removeAtIndexes = [];\n\n    // looping through the batch, executing changes, deferring creates and removes since they change the array length\n    Object.keys(combinedBatch[normalizedType]).forEach((id) => {\n      const index = typeCacheIndexMap[id];\n      const resource = combinedBatch[normalizedType][id];\n\n      // an empty resource passed into batch changes is how we'll signal which ones to delete\n      if (Object.keys(resource).length === 0 && index !== undefined) {\n        typeCache.map.delete(id);\n        removeAtIndexes.push(index);\n      } else if (Object.keys(resource).length === 0) {\n        // No op. We're removing it... but we don't have it in the cache\n      } else {\n        if (normalizedType === SCHEMA) {\n          addSchemaIndexFields(resource);\n        }\n        const classyResource = classify(ctx, resource);\n\n        if (index === undefined) {\n          typeCache.list.push(classyResource);\n          typeCache.map.set(id, classyResource);\n\n          typeCacheIndexMap[classyResource[keyField]] = typeCache.list.length - 1;\n        } else {\n          replaceResource(typeCache.list[index], resource, ctx.getters);\n        }\n      }\n    });\n\n    // looping through the removeAtIndexes, making sure to offset by iteration so the array changing doesn't mess us up\n    removeAtIndexes.sort().forEach((cacheIndex, loopIndex) => {\n      typeCache.list.splice(cacheIndex - loopIndex, 1);\n    });\n\n    const opts = ctx.rootGetters[`type-map/optionsFor`](type);\n    const limit = opts?.limit;\n\n    // If there is a limit to the number of resources we can store for this type then\n    // remove the first one to keep the list size to that limit\n    if (limit && typeCache.list.length > limit) {\n      const rm = typeCache.list.shift();\n\n      typeCache.map.delete(rm.id);\n    }\n\n    typeCache.generation++;\n  });\n}\n\nexport function loadAll(state, {\n  type,\n  data,\n  ctx,\n  skipHaveAll,\n  namespace,\n  revision\n}) {\n  const { getters } = ctx;\n\n  if (!data) {\n    return;\n  }\n\n  const opts = ctx.rootGetters[`type-map/optionsFor`](type);\n  const limit = opts?.limit;\n\n  // If there is a limit, only store the last elements from the list to keep to that limit\n  if (limit) {\n    data = data.slice(-limit);\n  }\n\n  const keyField = getters.keyFieldForType(type);\n  const proxies = data.map((x) => classify(ctx, x));\n  const cache = registerType(state, type);\n\n  clear(cache.list);\n  cache.map.clear();\n  cache.revision = revision || 0;\n  cache.generation++;\n\n  addObjects(cache.list, proxies);\n\n  for ( let i = 0 ; i < proxies.length ; i++ ) {\n    cache.map.set(proxies[i][keyField], proxies[i]);\n  }\n\n  // Allow requester to skip setting that everything has loaded\n  if (!skipHaveAll) {\n    cache.haveNamespace = namespace;\n    cache.haveAll = !namespace;\n  }\n\n  return proxies;\n}\n\nexport default {\n  registerType,\n  load,\n\n  applyConfig(state, config) {\n    if ( !state.config ) {\n      state.config = {};\n    }\n\n    Object.assign(state.config, config);\n  },\n\n  loadMulti(state, { data, ctx }) {\n    // console.log('### Mutation loadMulti', data?.length);\n    for ( const entry of data ) {\n      load(state, { data: entry, ctx });\n    }\n  },\n\n  loadSelector(state, {\n    type, entries, ctx, selector, revision\n  }) {\n    const cache = registerType(state, type);\n\n    for ( const data of entries ) {\n      load(state, { data, ctx });\n    }\n\n    cache.haveSelector[selector] = true;\n    cache.revision = revision || 0;\n  },\n\n  loadAll,\n\n  /**\n   * Handles changes (add, update, remove) to multiple resources for multiple types\n   */\n  batchChanges,\n\n  loadMerge(state, { type, data: allLatest, ctx }) {\n    const { commit, getters } = ctx;\n    // const allLatest = await dispatch('findAll', { type, opt: { force: true, load, _NONE } });\n    // const allExisting = getters.all({type});\n    const keyField = getters.keyFieldForType(type);\n    const cache = state.types[type];\n\n    allLatest.forEach((entry) => {\n      const existing = state.types[type].map.get(entry[keyField]);\n\n      load(state, {\n        data: entry, ctx, existing\n      });\n    });\n    cache.list.forEach((entry) => {\n      if (!allLatest.find((toLoadEntry) => toLoadEntry.id === entry.id)) {\n        commit('remove', entry);\n      }\n    });\n  },\n\n  // Add a set of resources to the store for a given type\n  // Don't mark the 'haveAll' field - this is used for incremental loading\n  loadAdd(state, { type, data: allLatest, ctx }) {\n    const { getters } = ctx;\n    const keyField = getters.keyFieldForType(type);\n\n    allLatest.forEach((entry) => {\n      const existing = state.types[type].map.get(entry[keyField]);\n\n      load(state, {\n        data: entry, ctx, existing\n      });\n    });\n  },\n\n  forgetAll(state, { type }) {\n    const cache = registerType(state, type);\n\n    clear(cache.list);\n    cache.map.clear();\n    cache.generation++;\n  },\n\n  setHaveAll(state, { type }) {\n    const cache = registerType(state, type);\n\n    cache.haveAll = true;\n  },\n\n  setHaveNamespace(state, { type, namespace }) {\n    const cache = registerType(state, type);\n\n    cache.haveNamespace = namespace;\n  },\n\n  loadedAll(state, { type }) {\n    const cache = registerType(state, type);\n\n    cache.generation++;\n    cache.haveAll = true;\n  },\n\n  remove(state, obj) {\n    if (obj) {\n      remove(state, obj, this.getters);\n    }\n  },\n\n  reset(state) {\n    resetStore(state, this.commit);\n  },\n\n  forgetType,\n\n  incrementLoadCounter(state, type) {\n    const typeData = state.types[type];\n\n    if (typeData) {\n      typeData.loadCounter++;\n    }\n  },\n\n};\n"],"mappings":"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"}]}