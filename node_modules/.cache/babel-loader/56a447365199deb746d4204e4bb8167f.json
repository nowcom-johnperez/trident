{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/steve/actions.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/steve/actions.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bIkBAaXRlcmF0b3IiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IGh0dHBzIGZyb20gJ2h0dHBzJzsKaW1wb3J0IHsgYWRkUGFyYW0sIHBhcnNlIGFzIHBhcnNlVXJsLCBzdHJpbmdpZnkgYXMgdW5QYXJzZVVybCB9IGZyb20gJ0BzaGVsbC91dGlscy91cmwnOwppbXBvcnQgeyBoYW5kbGVTcG9vZmVkUmVxdWVzdCwgbG9hZFNjaGVtYXMgYXMgX2xvYWRTY2hlbWFzIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvZGFzaGJvYXJkLXN0b3JlL2FjdGlvbnMnOwppbXBvcnQgeyBzZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgZGVmZXJyZWQgfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CmltcG9ydCB7IHN0cmVhbUpzb24sIHN0cmVhbWluZ1N1cHBvcnRlZCB9IGZyb20gJ0BzaGVsbC91dGlscy9zdHJlYW0nOwppbXBvcnQgaXNPYmplY3QgZnJvbSAnbG9kYXNoL2lzT2JqZWN0JzsKaW1wb3J0IHsgY2xhc3NpZnkgfSBmcm9tICdAc2hlbGwvcGx1Z2lucy9kYXNoYm9hcmQtc3RvcmUvY2xhc3NpZnknOwppbXBvcnQgeyBOQU1FU1BBQ0UgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IGpzeWFtbCBmcm9tICdqcy15YW1sJzsKaW1wb3J0IHsgaGFuZGxlS3ViZUFwaUhlYWRlcldhcm5pbmdzIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvc3RldmUvaGVhZGVyLXdhcm5pbmdzJzsKZXhwb3J0IGRlZmF1bHQgewogIC8vIE5lZWQgdG8gb3ZlcnJpZGUgdGhpcywgc28gdGhhdCB0aGUgJ3RoaXMnIGNvbnRleHQgaXMgY29ycmVjdCAodGhpcyBjbGFzcyBub3QgdGhlIGJhc2UgY2xhc3MpCiAgbG9hZFNjaGVtYXM6IGZ1bmN0aW9uIGxvYWRTY2hlbWFzKGN0eCkgewogICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgd2F0Y2g7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHdhdGNoID0gX2FyZ3VtZW50cy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMV0gOiB0cnVlOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgcmV0dXJuIF9sb2FkU2NoZW1hcyhjdHgsIHdhdGNoKTsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgX2NvbnRleHQuc2VudCk7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIHJlcXVlc3Q6IGZ1bmN0aW9uIHJlcXVlc3QoX3JlZiwgcE9wdCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgc3RhdGUsIGRpc3BhdGNoLCByb290R2V0dGVycywgb3B0LCBzcG9vZmVkUmVzLCBwcmVwZW5kUGF0aCwgdXJsLCBtZXRob2QsIGhlYWRlcnMsIGtleSwgd2FpdGluZywgbGF0ZXIsIHBhZ2luYXRlZFJlc3VsdCwgX291dCRwYWdpbmF0aW9uLCBvdXQsIF9wYWdpbmF0ZWRSZXN1bHQkcGFnaSwgX3BhZ2luYXRlZFJlc3VsdCRwYWdpMiwgX3BhZ2luYXRlZFJlc3VsdCRwYWdpMywgX3BhZ2luYXRlZFJlc3VsdCRwYWdpNCwgbWFrZVJlcXVlc3QsIGZpbmlzaERlZmVycmVkLCByZXNwb25zZU9iamVjdCwgb25FcnJvcjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIG9uRXJyb3IgPSBmdW5jdGlvbiBfb25FcnJvcihlcnIpIHsKICAgICAgICAgICAgICB2YXIgb3V0ID0gZXJyOwogICAgICAgICAgICAgIGlmIChlcnIgIT09IG51bGwgJiYgZXJyICE9PSB2b2lkIDAgJiYgZXJyLnJlc3BvbnNlKSB7CiAgICAgICAgICAgICAgICB2YXIgcmVzID0gZXJyLnJlc3BvbnNlOwoKICAgICAgICAgICAgICAgIC8vIEdvIHRvIHRoZSBsb2dvdXQgcGFnZSBmb3IgNDAxcywgdW5sZXNzIHJlZGlyZWN0VW5hdXRob3JpemVkIHNwZWNpZmljYWxseSBkaXNhYmxlcyAoZm9yIHRoZSBsb2dpbiBwYWdlKQogICAgICAgICAgICAgICAgaWYgKG9wdC5yZWRpcmVjdFVuYXV0aG9yaXplZCAhPT0gZmFsc2UgJiYgcmVzLnN0YXR1cyA9PT0gNDAxKSB7CiAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdhdXRoL2xvZ291dCcsIG9wdC5sb2dvdXRPbkVycm9yLCB7CiAgICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcmVzLmRhdGEgIT09ICd1bmRlZmluZWQnKSB7CiAgICAgICAgICAgICAgICAgIG91dCA9IHJlc3BvbnNlT2JqZWN0KHJlcyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGZpbmlzaERlZmVycmVkKGtleSwgJ3JlamVjdCcsIG91dCk7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG91dCk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHJlc3BvbnNlT2JqZWN0ID0gZnVuY3Rpb24gX3Jlc3BvbnNlT2JqZWN0KHJlcykgewogICAgICAgICAgICAgIHZhciBvdXQgPSByZXMuZGF0YTsKICAgICAgICAgICAgICB2YXIgZnJvbUhlYWRlciA9IHJlcy5oZWFkZXJzWyd4LWFwaS1jYXR0bGUtYXV0aCddOwogICAgICAgICAgICAgIGlmIChmcm9tSGVhZGVyICYmIGZyb21IZWFkZXIgIT09IHJvb3RHZXR0ZXJzWydhdXRoL2Zyb21IZWFkZXInXSkgewogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2F1dGgvZ290SGVhZGVyJywgZnJvbUhlYWRlciwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKHJlcy5zdGF0dXMgPT09IDIwNCB8fCBvdXQgPT09IG51bGwpIHsKICAgICAgICAgICAgICAgIG91dCA9IHt9OwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoX3R5cGVvZihvdXQpICE9PSAnb2JqZWN0JykgewogICAgICAgICAgICAgICAgb3V0ID0gewogICAgICAgICAgICAgICAgICBkYXRhOiBvdXQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKG91dCwgewogICAgICAgICAgICAgICAgX3N0YXR1czogewogICAgICAgICAgICAgICAgICB2YWx1ZTogcmVzLnN0YXR1cwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9zdGF0dXNUZXh0OiB7CiAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXMuc3RhdHVzVGV4dAogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9oZWFkZXJzOiB7CiAgICAgICAgICAgICAgICAgIHZhbHVlOiByZXMuaGVhZGVycwogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIF9yZXE6IHsKICAgICAgICAgICAgICAgICAgdmFsdWU6IHJlcy5yZXF1ZXN0CiAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgX3VybDogewogICAgICAgICAgICAgICAgICB2YWx1ZTogb3B0LnVybAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGZpbmlzaERlZmVycmVkID0gZnVuY3Rpb24gX2ZpbmlzaERlZmVycmVkKGtleSkgewogICAgICAgICAgICAgIHZhciBhY3Rpb24gPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6ICdyZXNvbHZlJzsKICAgICAgICAgICAgICB2YXIgcmVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgPyBhcmd1bWVudHNbMl0gOiB1bmRlZmluZWQ7CiAgICAgICAgICAgICAgdmFyIHdhaXRpbmcgPSBzdGF0ZS5kZWZlcnJlZFJlcXVlc3RzW2tleV0gfHwgW107CgogICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCdSZXNvbHZpbmcgZGVmZXJyZWQgZm9yJywga2V5LCB3YWl0aW5nLmxlbmd0aCk7CgogICAgICAgICAgICAgIHdoaWxlICh3YWl0aW5nLmxlbmd0aCkgewogICAgICAgICAgICAgICAgd2FpdGluZy5wb3AoKVthY3Rpb25dKHJlcyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIGRlbGV0ZSBzdGF0ZS5kZWZlcnJlZFJlcXVlc3RzW2tleV07CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIG1ha2VSZXF1ZXN0ID0gZnVuY3Rpb24gX21ha2VSZXF1ZXN0KHRoYXQsIG9wdCwgcm9vdEdldHRlcnMpIHsKICAgICAgICAgICAgICByZXR1cm4gdGhhdC4kYXhpb3Mob3B0KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICAgICAgICAgIHZhciBvdXQ7CiAgICAgICAgICAgICAgICBpZiAob3B0LnJlc3BvbnNlVHlwZSkgewogICAgICAgICAgICAgICAgICBvdXQgPSByZXM7CiAgICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgICBvdXQgPSByZXNwb25zZU9iamVjdChyZXMpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZmluaXNoRGVmZXJyZWQoa2V5LCAncmVzb2x2ZScsIG91dCk7CiAgICAgICAgICAgICAgICBoYW5kbGVLdWJlQXBpSGVhZGVyV2FybmluZ3MocmVzLCBkaXNwYXRjaCwgcm9vdEdldHRlcnMsIG9wdC5tZXRob2QpOwogICAgICAgICAgICAgICAgcmV0dXJuIG91dDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfTsKICAgICAgICAgICAgc3RhdGUgPSBfcmVmLnN0YXRlLCBkaXNwYXRjaCA9IF9yZWYuZGlzcGF0Y2gsIHJvb3RHZXR0ZXJzID0gX3JlZi5yb290R2V0dGVyczsKICAgICAgICAgICAgb3B0ID0gcE9wdC5vcHQgfHwgcE9wdDsKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gaGFuZGxlU3Bvb2ZlZFJlcXVlc3Qocm9vdEdldHRlcnMsICdjbHVzdGVyJywgb3B0KTsKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgc3Bvb2ZlZFJlcyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICBpZiAoIXNwb29mZWRSZXMpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBzcG9vZmVkUmVzKTsKICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgIG9wdC51cmwgPSBvcHQudXJsLnJlcGxhY2UoL1wvKiQvZywgJycpOwoKICAgICAgICAgICAgLy8gRklYTUU6IFJDIFN0YW5kYWxvbmUgLSBUZWNoIERlYnQgbW92ZSB0aGlzIHRvIHN0ZXZlIHN0b3JlIGdldC9zZXQgcHJlcGVuZFBhdGgKICAgICAgICAgICAgLy8gQ292ZXIgY2FzZXMgd2hlcmUgdGhlIHN0ZXZlIHN0b3JlIGlzbid0IGFjdHVhbGx5IGdvaW5nIG91dCB0byBzdGV2ZSAoZXBpbmlvIHN0YW5kYWxvbmUpCiAgICAgICAgICAgIHByZXBlbmRQYXRoID0gX3RoaXMuJGNvbmZpZy5yYW5jaGVyRW52ID09PSAnZXBpbmlvJyA/ICIvcHAvdjEvZXBpbmlvL3JhbmNoZXIiIDogJyc7CiAgICAgICAgICAgIGlmIChwcmVwZW5kUGF0aCkgewogICAgICAgICAgICAgIGlmIChvcHQudXJsLnN0YXJ0c1dpdGgoJy8nKSkgewogICAgICAgICAgICAgICAgb3B0LnVybCA9IHByZXBlbmRQYXRoICsgb3B0LnVybDsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdXJsID0gcGFyc2VVcmwob3B0LnVybCk7CiAgICAgICAgICAgICAgICBpZiAoIXVybC5wYXRoLnN0YXJ0c1dpdGgocHJlcGVuZFBhdGgpKSB7CiAgICAgICAgICAgICAgICAgIHVybC5wYXRoID0gcHJlcGVuZFBhdGggKyB1cmwucGF0aDsKICAgICAgICAgICAgICAgICAgb3B0LnVybCA9IHVuUGFyc2VVcmwodXJsKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3B0Lmh0dHBzQWdlbnQgPSBuZXcgaHR0cHMuQWdlbnQoewogICAgICAgICAgICAgIHJlamVjdFVuYXV0aG9yaXplZDogZmFsc2UKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIG1ldGhvZCA9IChvcHQubWV0aG9kIHx8ICdnZXQnKS50b0xvd2VyQ2FzZSgpOwogICAgICAgICAgICBoZWFkZXJzID0gb3B0LmhlYWRlcnMgfHwge307CiAgICAgICAgICAgIGtleSA9IEpTT04uc3RyaW5naWZ5KGhlYWRlcnMpICsgbWV0aG9kICsgb3B0LnVybDsKICAgICAgICAgICAgaWYgKCEobWV0aG9kID09PSAnZ2V0JykpIHsKICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDI4OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHdhaXRpbmcgPSBzdGF0ZS5kZWZlcnJlZFJlcXVlc3RzW2tleV07CiAgICAgICAgICAgIGlmICghd2FpdGluZykgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjY7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbGF0ZXIgPSBkZWZlcnJlZCgpOwogICAgICAgICAgICB3YWl0aW5nLnB1c2gobGF0ZXIpOwoKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coJ0RlZmVycmVkIHJlcXVlc3QgZm9yJywga2V5LCB3YWl0aW5nLmxlbmd0aCk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBsYXRlci5wcm9taXNlKTsKICAgICAgICAgIGNhc2UgMjY6CiAgICAgICAgICAgIC8vIFNldCBpdCB0byBzb21ldGhpbmcgc28gdGhhdCBmdXR1cmUgcmVxdWVzdHMga25vdyB0byBkZWZlci4KICAgICAgICAgICAgd2FpdGluZyA9IFtdOwogICAgICAgICAgICBzdGF0ZS5kZWZlcnJlZFJlcXVlc3RzW2tleV0gPSB3YWl0aW5nOwogICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgaWYgKCEob3B0LnN0cmVhbSAmJiBzdGF0ZS5hbGxvd1N0cmVhbWluZyAmJiBzdGF0ZS5jb25maWcuc3VwcG9ydHNTdHJlYW0gJiYgc3RyZWFtaW5nU3VwcG9ydGVkKCkpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAzMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgc3RyZWFtSnNvbihvcHQudXJsLCBvcHQsIG9wdC5vbkRhdGEpLnRoZW4oZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICBmaW5pc2hEZWZlcnJlZDogZmluaXNoRGVmZXJyZWQuYmluZChudWxsLCBrZXksICdyZXNvbHZlJykKICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG9uRXJyb3IoZXJyKTsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgY2FzZSAzMjoKICAgICAgICAgICAgaWYgKCF0cnVlKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1NjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDMzOwogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM2OwogICAgICAgICAgICByZXR1cm4gbWFrZVJlcXVlc3QoX3RoaXMsIG9wdCwgcm9vdEdldHRlcnMpOwogICAgICAgICAgY2FzZSAzNjoKICAgICAgICAgICAgb3V0ID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIGlmIChvcHQuZGVwYWdpbmF0ZSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIG91dCk7CiAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICBpZiAoIXBhZ2luYXRlZFJlc3VsdCkgewogICAgICAgICAgICAgIC8vIEZpcnN0IHJlc3VsdCwgc28gc3RvcmUgaXQKICAgICAgICAgICAgICBwYWdpbmF0ZWRSZXN1bHQgPSBvdXQ7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gU3Vic2VxdWVudCByZXF1ZXN0LCBzbyBhZGQgdG8gaXQKICAgICAgICAgICAgICBwYWdpbmF0ZWRSZXN1bHQuZGF0YSA9IHBhZ2luYXRlZFJlc3VsdC5kYXRhLmNvbmNhdChvdXQuZGF0YSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCEob3V0ICE9PSBudWxsICYmIG91dCAhPT0gdm9pZCAwICYmIChfb3V0JHBhZ2luYXRpb24gPSBvdXQucGFnaW5hdGlvbikgIT09IG51bGwgJiYgX291dCRwYWdpbmF0aW9uICE9PSB2b2lkIDAgJiYgX291dCRwYWdpbmF0aW9uLm5leHQpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA0NDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBNb3JlIHJlc3VsdHMgdG8gY29tZSwgdXBkYXRlIG9wdGlvbnMKICAgICAgICAgICAgb3B0LnVybCA9IG91dC5wYWdpbmF0aW9uLm5leHQ7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA0NDoKICAgICAgICAgICAgLy8gTm8gbW9yZSByZXN1bHRzLCBzbyBjbGVhciBvdXQgdGhlIHBhZ2luYXRpb24gc2VjdGlvbiAod2hpY2ggd2lsbCBiZSBzdGFsZSBmcm9tIHRoZSBmaXJzdCByZXF1ZXN0KQogICAgICAgICAgICAoX3BhZ2luYXRlZFJlc3VsdCRwYWdpID0gcGFnaW5hdGVkUmVzdWx0LnBhZ2luYXRpb24pID09PSBudWxsIHx8IF9wYWdpbmF0ZWRSZXN1bHQkcGFnaSA9PT0gdm9pZCAwIHx8IGRlbGV0ZSBfcGFnaW5hdGVkUmVzdWx0JHBhZ2kuZmlyc3Q7CiAgICAgICAgICAgIChfcGFnaW5hdGVkUmVzdWx0JHBhZ2kyID0gcGFnaW5hdGVkUmVzdWx0LnBhZ2luYXRpb24pID09PSBudWxsIHx8IF9wYWdpbmF0ZWRSZXN1bHQkcGFnaTIgPT09IHZvaWQgMCB8fCBkZWxldGUgX3BhZ2luYXRlZFJlc3VsdCRwYWdpMi5sYXN0OwogICAgICAgICAgICAoX3BhZ2luYXRlZFJlc3VsdCRwYWdpMyA9IHBhZ2luYXRlZFJlc3VsdC5wYWdpbmF0aW9uKSA9PT0gbnVsbCB8fCBfcGFnaW5hdGVkUmVzdWx0JHBhZ2kzID09PSB2b2lkIDAgfHwgZGVsZXRlIF9wYWdpbmF0ZWRSZXN1bHQkcGFnaTMubmV4dDsKICAgICAgICAgICAgKF9wYWdpbmF0ZWRSZXN1bHQkcGFnaTQgPSBwYWdpbmF0ZWRSZXN1bHQucGFnaW5hdGlvbikgPT09IG51bGwgfHwgX3BhZ2luYXRlZFJlc3VsdCRwYWdpNCA9PT0gdm9pZCAwIHx8IGRlbGV0ZSBfcGFnaW5hdGVkUmVzdWx0JHBhZ2k0LnBhcnRpYWw7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBwYWdpbmF0ZWRSZXN1bHQpOwogICAgICAgICAgY2FzZSA0OToKICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1NDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDUxOgogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDUxOwogICAgICAgICAgICBfY29udGV4dDIudDAgPSBfY29udGV4dDJbImNhdGNoIl0oMzMpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgb25FcnJvcihfY29udGV4dDIudDApKTsKICAgICAgICAgIGNhc2UgNTQ6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA1NjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIsIG51bGwsIFtbMzMsIDUxXV0pOwogICAgfSkpKCk7CiAgfSwKICBwcm9tcHRNb3ZlOiBmdW5jdGlvbiBwcm9tcHRNb3ZlKF9yZWYyLCByZXNvdXJjZXMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMi5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICBjb21taXQoJ2FjdGlvbi1tZW51L3RvZ2dsZVByb21wdE1vdmUnLCByZXNvdXJjZXMsIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7CiAgfSwKICBwcm9tcHRSZXN0b3JlOiBmdW5jdGlvbiBwcm9tcHRSZXN0b3JlKF9yZWYzLCByZXNvdXJjZXMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMy5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjMuc3RhdGU7CiAgICBjb21taXQoJ2FjdGlvbi1tZW51L3RvZ2dsZVByb21wdFJlc3RvcmUnLCByZXNvdXJjZXMsIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7CiAgfSwKICBhc3NpZ25UbzogZnVuY3Rpb24gYXNzaWduVG8oX3JlZjQpIHsKICAgIHZhciBjb21taXQgPSBfcmVmNC5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjQuc3RhdGU7CiAgICB2YXIgcmVzb3VyY2VzID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBbXTsKICAgIGNvbW1pdCgnYWN0aW9uLW1lbnUvdG9nZ2xlQXNzaWduVG8nLCByZXNvdXJjZXMsIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7CiAgfSwKICByZXNvdXJjZUFjdGlvbjogZnVuY3Rpb24gcmVzb3VyY2VBY3Rpb24oX3JlZjUsIF9yZWY2KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMygpIHsKICAgICAgdmFyIGdldHRlcnMsIGRpc3BhdGNoLCByZXNvdXJjZSwgYWN0aW9uTmFtZSwgYm9keSwgb3B0LCByZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBnZXR0ZXJzID0gX3JlZjUuZ2V0dGVycywgZGlzcGF0Y2ggPSBfcmVmNS5kaXNwYXRjaDsKICAgICAgICAgICAgcmVzb3VyY2UgPSBfcmVmNi5yZXNvdXJjZSwgYWN0aW9uTmFtZSA9IF9yZWY2LmFjdGlvbk5hbWUsIGJvZHkgPSBfcmVmNi5ib2R5LCBvcHQgPSBfcmVmNi5vcHQ7CiAgICAgICAgICAgIG9wdCA9IG9wdCB8fCB7fTsKICAgICAgICAgICAgaWYgKCFvcHQudXJsKSB7CiAgICAgICAgICAgICAgb3B0LnVybCA9IHJlc291cmNlLmFjdGlvbkxpbmtGb3IoYWN0aW9uTmFtZSk7CiAgICAgICAgICAgICAgLy8gb3B0LnVybCA9IChyZXNvdXJjZS5hY3Rpb25zIHx8IHJlc291cmNlLmFjdGlvbkxpbmtzKVthY3Rpb25OYW1lXTsKICAgICAgICAgICAgfQogICAgICAgICAgICBvcHQubWV0aG9kID0gJ3Bvc3QnOwogICAgICAgICAgICBvcHQuZGF0YSA9IGJvZHk7CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdyZXF1ZXN0JywgewogICAgICAgICAgICAgIG9wdDogb3B0CiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgaWYgKCEob3B0LmxvYWQgIT09IGZhbHNlICYmIHJlcy50eXBlID09PSAnY29sbGVjdGlvbicpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2xvYWRNdWx0aScsIHJlcy5kYXRhKTsKICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCByZXMuZGF0YS5tYXAoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgICByZXR1cm4gZ2V0dGVycy5ieUlkKHgudHlwZSwgeC5pZCkgfHwgeDsKICAgICAgICAgICAgfSkpOwogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgaWYgKCEob3B0LmxvYWQgIT09IGZhbHNlICYmIHJlcy50eXBlICYmIHJlcy5pZCkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDE5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuYWJydXB0KCJyZXR1cm4iLCBkaXNwYXRjaCgnbG9hZCcsIHsKICAgICAgICAgICAgICBkYXRhOiByZXMKICAgICAgICAgICAgfSkpOwogICAgICAgICAgY2FzZSAxOToKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHJlcyk7CiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIHByb21wdFVwZGF0ZTogZnVuY3Rpb24gcHJvbXB0VXBkYXRlKF9yZWY3KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjcuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWY3LnN0YXRlOwogICAgdmFyIHJlc291cmNlcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogW107CiAgICBjb21taXQoJ2FjdGlvbi1tZW51L3RvZ2dsZVByb21wdFVwZGF0ZScsIHJlc291cmNlcywgewogICAgICByb290OiB0cnVlCiAgICB9KTsKICB9LAogIGNvbGxlY3Rpb25BY3Rpb246IGZ1bmN0aW9uIGNvbGxlY3Rpb25BY3Rpb24oX3JlZjgsIF9yZWY5KSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgdmFyIGdldHRlcnMsIGRpc3BhdGNoLCB0eXBlLCBhY3Rpb25OYW1lLCBib2R5LCBvcHQsIHNjaGVtYSwgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgZ2V0dGVycyA9IF9yZWY4LmdldHRlcnMsIGRpc3BhdGNoID0gX3JlZjguZGlzcGF0Y2g7CiAgICAgICAgICAgIHR5cGUgPSBfcmVmOS50eXBlLCBhY3Rpb25OYW1lID0gX3JlZjkuYWN0aW9uTmFtZSwgYm9keSA9IF9yZWY5LmJvZHksIG9wdCA9IF9yZWY5Lm9wdDsKICAgICAgICAgICAgb3B0ID0gb3B0IHx8IHt9OwogICAgICAgICAgICBpZiAoIW9wdC51cmwpIHsKICAgICAgICAgICAgICAvLyBDaGVhdGluZywgYnV0IGNoZWFwZXIgdGhhbiBsb2FkaW5nIHRoZSB3aG9sZSBjb2xsZWN0aW9uLi4uCiAgICAgICAgICAgICAgc2NoZW1hID0gZ2V0dGVyc1snc2NoZW1hRm9yJ10odHlwZSk7CiAgICAgICAgICAgICAgb3B0LnVybCA9IGFkZFBhcmFtKHNjaGVtYS5saW5rcy5jb2xsZWN0aW9uLCAnYWN0aW9uJywgYWN0aW9uTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgb3B0Lm1ldGhvZCA9ICdwb3N0JzsKICAgICAgICAgICAgb3B0LmRhdGEgPSBib2R5OwogICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDg7CiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgncmVxdWVzdCcsIHsKICAgICAgICAgICAgICBvcHQ6IG9wdAogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQ0LnNlbnQ7CiAgICAgICAgICAgIGlmICghKG9wdC5sb2FkICE9PSBmYWxzZSAmJiByZXMudHlwZSA9PT0gJ2NvbGxlY3Rpb24nKSkgewogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMjsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdsb2FkTXVsdGknLCByZXMuZGF0YSk7CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgcmVzLmRhdGEubWFwKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGdldHRlcnMuYnlJZCh4LnR5cGUsIHguaWQpIHx8IHg7CiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgIGlmICghKG9wdC5sb2FkICE9PSBmYWxzZSAmJiByZXMudHlwZSAmJiByZXMuaWQpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgZGlzcGF0Y2goJ2xvYWQnLCB7CiAgICAgICAgICAgICAgZGF0YTogcmVzCiAgICAgICAgICAgIH0pKTsKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iLCByZXMpOwogICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTQpOwogICAgfSkpKCk7CiAgfSwKICBjcmVhdGVOYW1lc3BhY2U6IGZ1bmN0aW9uIGNyZWF0ZU5hbWVzcGFjZShjdHgsIG9iaikgewogICAgcmV0dXJuIGNsYXNzaWZ5KGN0eCwgewogICAgICB0eXBlOiBOQU1FU1BBQ0UsCiAgICAgIG1ldGFkYXRhOiB7CiAgICAgICAgbmFtZTogb2JqLm5hbWUKICAgICAgfQogICAgfSk7CiAgfSwKICBjbGVhbkZvck5ldzogZnVuY3Rpb24gY2xlYW5Gb3JOZXcoY3R4LCBvYmopIHsKICAgIHZhciBfb2JqJHNwZWM7CiAgICB2YXIgbSA9IG9iai5tZXRhZGF0YSB8fCB7fTsKICAgIGRyb3BLZXlzKG9iaiwgbmV3Um9vdEtleXMpOwogICAgZHJvcEtleXMobSwgbmV3TWV0YWRhdGFLZXlzKTsKICAgIGRyb3BDYXR0bGVLZXlzKG0uYW5ub3RhdGlvbnMpOwogICAgZHJvcENhdHRsZUtleXMobS5sYWJlbHMpOwogICAgbS5uYW1lID0gJyc7CiAgICBpZiAob2JqICE9PSBudWxsICYmIG9iaiAhPT0gdm9pZCAwICYmIChfb2JqJHNwZWMgPSBvYmouc3BlYykgIT09IG51bGwgJiYgX29iaiRzcGVjICE9PSB2b2lkIDAgJiYgKF9vYmokc3BlYyA9IF9vYmokc3BlYy5jcmQpICE9PSBudWxsICYmIF9vYmokc3BlYyAhPT0gdm9pZCAwICYmIChfb2JqJHNwZWMgPSBfb2JqJHNwZWMuc3BlYykgIT09IG51bGwgJiYgX29iaiRzcGVjICE9PSB2b2lkIDAgJiYgKF9vYmokc3BlYyA9IF9vYmokc3BlYy5uYW1lcykgIT09IG51bGwgJiYgX29iaiRzcGVjICE9PSB2b2lkIDAgJiYgX29iaiRzcGVjLmtpbmQpIHsKICAgICAgb2JqLnNwZWMuY3JkLnNwZWMubmFtZXMua2luZCA9ICcnOwogICAgfQogICAgcmV0dXJuIG9iajsKICB9LAogIGNsZWFuRm9yRGlmZjogZnVuY3Rpb24gY2xlYW5Gb3JEaWZmKGN0eCwgb2JqKSB7CiAgICB2YXIgbSA9IG9iai5tZXRhZGF0YSB8fCB7fTsKICAgIGlmICghbS5sYWJlbHMpIHsKICAgICAgbS5sYWJlbHMgPSB7fTsKICAgIH0KICAgIGlmICghbS5hbm5vdGF0aW9ucykgewogICAgICBtLmFubm90YXRpb25zID0ge307CiAgICB9CiAgICBkcm9wVW5kZXJzY29yZXMob2JqKTsKICAgIGRyb3BLZXlzKG9iaiwgZGlmZlJvb3RLZXlzKTsKICAgIGRyb3BLZXlzKG0sIGRpZmZNZXRhZGF0YUtleXMpOwogICAgZHJvcENhdHRsZUtleXMobS5hbm5vdGF0aW9ucyk7CiAgICBkcm9wQ2F0dGxlS2V5cyhtLmxhYmVscyk7CiAgICByZXR1cm4gb2JqOwogIH0sCiAgY2xlYW5Gb3JEZXRhaWw6IGZ1bmN0aW9uIGNsZWFuRm9yRGV0YWlsKGN0eCwgcmVzb3VyY2UpIHsKICAgIC8vIEVuc3VyZSBsYWJlbHMgJiBhbm5vdGF0aW9ucyBleGlzdHMsIHNpbmNlIGxvdHMgb2YgdGhpbmdzIG5lZWQgdGhlbQogICAgaWYgKCFyZXNvdXJjZS5tZXRhZGF0YSkgewogICAgICBzZXQocmVzb3VyY2UsICdtZXRhZGF0YScsIHt9KTsKICAgIH0KICAgIGlmICghcmVzb3VyY2UubWV0YWRhdGEuYW5ub3RhdGlvbnMpIHsKICAgICAgc2V0KHJlc291cmNlLCAnbWV0YWRhdGEuYW5ub3RhdGlvbnMnLCB7fSk7CiAgICB9CiAgICBpZiAoIXJlc291cmNlLm1ldGFkYXRhLmxhYmVscykgewogICAgICBzZXQocmVzb3VyY2UsICdtZXRhZGF0YS5sYWJlbHMnLCB7fSk7CiAgICB9CiAgICByZXR1cm4gcmVzb3VyY2U7CiAgfSwKICAvLyByZW1vdmUgZmllbGRzIGFkZGVkIGJ5IHN0ZXZlIGJlZm9yZSBzaG93aW5nL2Rvd25sb2FkaW5nIHlhbWxzCiAgY2xlYW5Gb3JEb3dubG9hZDogZnVuY3Rpb24gY2xlYW5Gb3JEb3dubG9hZChjdHgsIHlhbWwpIHsKICAgIHZhciBfb2JqJHN0YXR1czsKICAgIGlmICgheWFtbCkgewogICAgICByZXR1cm47CiAgICB9CiAgICB2YXIgcm9vdEtleXMgPSBbJ2lkJywgJ2xpbmtzJywgJ3R5cGUnLCAnYWN0aW9ucyddOwogICAgdmFyIG1ldGFkYXRhS2V5cyA9IFsnZmllbGRzJywgJ3JlbGF0aW9uc2hpcHMnLCAnc3RhdGUnXTsKICAgIHZhciBjb25kaXRpb25LZXlzID0gWydlcnJvcicsICd0cmFuc2l0aW9uaW5nJ107CiAgICB2YXIgb2JqID0ganN5YW1sLmxvYWQoeWFtbCk7CiAgICBkcm9wS2V5cyhvYmosIHJvb3RLZXlzKTsKICAgIGRyb3BLZXlzKG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai5tZXRhZGF0YSwgbWV0YWRhdGFLZXlzKTsKICAgICgob2JqID09PSBudWxsIHx8IG9iaiA9PT0gdm9pZCAwIHx8IChfb2JqJHN0YXR1cyA9IG9iai5zdGF0dXMpID09PSBudWxsIHx8IF9vYmokc3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfb2JqJHN0YXR1cy5jb25kaXRpb25zKSB8fCBbXSkuZm9yRWFjaChmdW5jdGlvbiAoY29uZGl0aW9uKSB7CiAgICAgIHJldHVybiBkcm9wS2V5cyhjb25kaXRpb24sIGNvbmRpdGlvbktleXMpOwogICAgfSk7CiAgICByZXR1cm4ganN5YW1sLmR1bXAob2JqKTsKICB9Cn07CnZhciBkaWZmUm9vdEtleXMgPSBbJ2FjdGlvbnMnLCAnbGlua3MnLCAnc3RhdHVzJywgJ19fcmVoeWRyYXRlJywgJ19fY2xvbmUnXTsKdmFyIGRpZmZNZXRhZGF0YUtleXMgPSBbJ293bmVyUmVmZXJlbmNlcycsICdzZWxmTGluaycsICdjcmVhdGlvblRpbWVzdGFtcCcsICdkZWxldGlvblRpbWVzdGFtcCcsICdzdGF0ZScsICdmaWVsZHMnLCAncmVsYXRpb25zaGlwcycsICdnZW5lcmF0aW9uJywgJ21hbmFnZWRGaWVsZHMnLCAncmVzb3VyY2VWZXJzaW9uJ107CnZhciBuZXdSb290S2V5cyA9IFsnYWN0aW9ucycsICdsaW5rcycsICdzdGF0dXMnLCAnaWQnXTsKdmFyIG5ld01ldGFkYXRhS2V5cyA9IFtdLmNvbmNhdChkaWZmTWV0YWRhdGFLZXlzLCBbJ3VpZCddKTsKZnVuY3Rpb24gZHJvcFVuZGVyc2NvcmVzKG9iaikgewogIGZvciAodmFyIGsgaW4gb2JqKSB7CiAgICBpZiAoay5zdGFydHNXaXRoKCdfXycpKSB7CiAgICAgIGRlbGV0ZSBvYmpba107CiAgICB9IGVsc2UgewogICAgICB2YXIgdiA9IG9ialtrXTsKICAgICAgaWYgKGlzT2JqZWN0KHYpKSB7CiAgICAgICAgZHJvcFVuZGVyc2NvcmVzKHYpOwogICAgICB9CiAgICB9CiAgfQp9CmZ1bmN0aW9uIGRyb3BLZXlzKG9iaiwga2V5cykgewogIGlmICghb2JqKSB7CiAgICByZXR1cm47CiAgfQogIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihrZXlzKSwKICAgIF9zdGVwOwogIHRyeSB7CiAgICBmb3IgKF9pdGVyYXRvci5zKCk7ICEoX3N0ZXAgPSBfaXRlcmF0b3IubigpKS5kb25lOykgewogICAgICB2YXIgayA9IF9zdGVwLnZhbHVlOwogICAgICBkZWxldGUgb2JqW2tdOwogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yLmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yLmYoKTsKICB9Cn0KZnVuY3Rpb24gZHJvcENhdHRsZUtleXMob2JqKSB7CiAgaWYgKCFvYmopIHsKICAgIHJldHVybjsKICB9CiAgT2JqZWN0LmtleXMob2JqKS5mb3JFYWNoKGZ1bmN0aW9uIChrZXkpIHsKICAgIGlmICghIWtleS5tYXRjaCgvKF58ZmllbGRcLiljYXR0bGVcLmlvKFwvLip8JCkvKSkgewogICAgICBkZWxldGUgb2JqW2tleV07CiAgICB9CiAgfSk7Cn0="},{"version":3,"names":["https","addParam","parse","parseUrl","stringify","unParseUrl","handleSpoofedRequest","loadSchemas","set","deferred","streamJson","streamingSupported","isObject","classify","NAMESPACE","jsyaml","handleKubeApiHeaderWarnings","ctx","_arguments","arguments","_asyncToGenerator","regeneratorRuntime","mark","_callee","watch","wrap","_callee$","_context","prev","next","length","undefined","abrupt","sent","stop","request","_ref","pOpt","_this","_callee2","state","dispatch","rootGetters","opt","spoofedRes","prependPath","url","method","headers","key","waiting","later","paginatedResult","_out$pagination","out","_paginatedResult$pagi","_paginatedResult$pagi2","_paginatedResult$pagi3","_paginatedResult$pagi4","makeRequest","finishDeferred","responseObject","onError","_callee2$","_context2","_onError","err","response","res","redirectUnauthorized","status","logoutOnError","root","data","Promise","reject","_responseObject","fromHeader","_typeof","Object","defineProperties","_status","value","_statusText","statusText","_headers","_req","_url","_finishDeferred","action","deferredRequests","pop","_makeRequest","that","$axios","then","responseType","replace","$config","rancherEnv","startsWith","path","httpsAgent","Agent","rejectUnauthorized","toLowerCase","JSON","push","promise","stream","allowStreaming","config","supportsStream","onData","bind","catch","depaginate","concat","pagination","first","last","partial","t0","promptMove","_ref2","resources","commit","promptRestore","_ref3","assignTo","_ref4","resourceAction","_ref5","_ref6","_callee3","getters","resource","actionName","body","_callee3$","_context3","actionLinkFor","load","type","map","x","byId","id","promptUpdate","_ref7","collectionAction","_ref8","_ref9","_callee4","schema","_callee4$","_context4","links","collection","createNamespace","obj","metadata","name","cleanForNew","_obj$spec","m","dropKeys","newRootKeys","newMetadataKeys","dropCattleKeys","annotations","labels","spec","crd","names","kind","cleanForDiff","dropUnderscores","diffRootKeys","diffMetadataKeys","cleanForDetail","cleanForDownload","yaml","_obj$status","rootKeys","metadataKeys","conditionKeys","conditions","forEach","condition","dump","k","v","keys","_iterator","_createForOfIteratorHelper","_step","s","n","done","e","f","match"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/steve/actions.js"],"sourcesContent":["import https from 'https';\nimport { addParam, parse as parseUrl, stringify as unParseUrl } from '@shell/utils/url';\nimport { handleSpoofedRequest, loadSchemas } from '@shell/plugins/dashboard-store/actions';\nimport { set } from '@shell/utils/object';\nimport { deferred } from '@shell/utils/promise';\nimport { streamJson, streamingSupported } from '@shell/utils/stream';\nimport isObject from 'lodash/isObject';\nimport { classify } from '@shell/plugins/dashboard-store/classify';\nimport { NAMESPACE } from '@shell/config/types';\nimport jsyaml from 'js-yaml';\nimport { handleKubeApiHeaderWarnings } from '@shell/plugins/steve/header-warnings';\n\nexport default {\n\n  // Need to override this, so that the 'this' context is correct (this class not the base class)\n  async loadSchemas(ctx, watch = true) {\n    return await loadSchemas(ctx, watch);\n  },\n\n  async request({ state, dispatch, rootGetters }, pOpt ) {\n    const opt = pOpt.opt || pOpt;\n\n    const spoofedRes = await handleSpoofedRequest(rootGetters, 'cluster', opt);\n\n    if (spoofedRes) {\n      return spoofedRes;\n    }\n\n    opt.url = opt.url.replace(/\\/*$/g, '');\n\n    // FIXME: RC Standalone - Tech Debt move this to steve store get/set prependPath\n    // Cover cases where the steve store isn't actually going out to steve (epinio standalone)\n    const prependPath = this.$config.rancherEnv === 'epinio' ? `/pp/v1/epinio/rancher` : '';\n\n    if (prependPath) {\n      if (opt.url.startsWith('/')) {\n        opt.url = prependPath + opt.url;\n      } else {\n        const url = parseUrl(opt.url);\n\n        if (!url.path.startsWith(prependPath)) {\n          url.path = prependPath + url.path;\n          opt.url = unParseUrl(url);\n        }\n      }\n    }\n\n    opt.httpsAgent = new https.Agent({ rejectUnauthorized: false });\n\n    const method = (opt.method || 'get').toLowerCase();\n    const headers = (opt.headers || {});\n    const key = JSON.stringify(headers) + method + opt.url;\n    let waiting;\n\n    if ( (method === 'get') ) {\n      waiting = state.deferredRequests[key];\n\n      if ( waiting ) {\n        const later = deferred();\n\n        waiting.push(later);\n\n        // console.log('Deferred request for', key, waiting.length);\n\n        return later.promise;\n      } else {\n        // Set it to something so that future requests know to defer.\n        waiting = [];\n        state.deferredRequests[key] = waiting;\n      }\n    }\n\n    if ( opt.stream && state.allowStreaming && state.config.supportsStream && streamingSupported() ) {\n      // console.log('Using Streaming for', opt.url);\n\n      return streamJson(opt.url, opt, opt.onData).then(() => {\n        return { finishDeferred: finishDeferred.bind(null, key, 'resolve') };\n      }).catch((err) => {\n        return onError(err);\n      });\n    } else {\n      // console.log('NOT Using Streaming for', opt.url);\n    }\n\n    let paginatedResult;\n\n    while (true) {\n      try {\n        const out = await makeRequest(this, opt, rootGetters);\n\n        if (!opt.depaginate) {\n          return out;\n        }\n\n        if (!paginatedResult) {\n          // First result, so store it\n          paginatedResult = out;\n        } else {\n          // Subsequent request, so add to it\n          paginatedResult.data = paginatedResult.data.concat(out.data);\n        }\n\n        if (out?.pagination?.next) {\n          // More results to come, update options\n          opt.url = out.pagination.next;\n        } else {\n          // No more results, so clear out the pagination section (which will be stale from the first request)\n          delete paginatedResult.pagination?.first;\n          delete paginatedResult.pagination?.last;\n          delete paginatedResult.pagination?.next;\n          delete paginatedResult.pagination?.partial;\n\n          return paginatedResult;\n        }\n      } catch (err) {\n        return onError(err);\n      }\n    }\n\n    function makeRequest(that, opt, rootGetters) {\n      return that.$axios(opt).then((res) => {\n        let out;\n\n        if ( opt.responseType ) {\n          out = res;\n        } else {\n          out = responseObject(res);\n        }\n\n        finishDeferred(key, 'resolve', out);\n\n        handleKubeApiHeaderWarnings(res, dispatch, rootGetters, opt.method);\n\n        return out;\n      });\n    }\n\n    function finishDeferred(key, action = 'resolve', res) {\n      const waiting = state.deferredRequests[key] || [];\n\n      // console.log('Resolving deferred for', key, waiting.length);\n\n      while ( waiting.length ) {\n        waiting.pop()[action](res);\n      }\n\n      delete state.deferredRequests[key];\n    }\n\n    function responseObject(res) {\n      let out = res.data;\n\n      const fromHeader = res.headers['x-api-cattle-auth'];\n\n      if ( fromHeader && fromHeader !== rootGetters['auth/fromHeader'] ) {\n        dispatch('auth/gotHeader', fromHeader, { root: true });\n      }\n\n      if ( res.status === 204 || out === null ) {\n        out = {};\n      }\n\n      if ( typeof out !== 'object' ) {\n        out = { data: out };\n      }\n\n      Object.defineProperties(out, {\n        _status:     { value: res.status },\n        _statusText: { value: res.statusText },\n        _headers:    { value: res.headers },\n        _req:        { value: res.request },\n        _url:        { value: opt.url },\n      });\n\n      return out;\n    }\n\n    function onError(err) {\n      let out = err;\n\n      if ( err?.response ) {\n        const res = err.response;\n\n        // Go to the logout page for 401s, unless redirectUnauthorized specifically disables (for the login page)\n        if ( opt.redirectUnauthorized !== false && res.status === 401 ) {\n          dispatch('auth/logout', opt.logoutOnError, { root: true });\n        }\n\n        if ( typeof res.data !== 'undefined' ) {\n          out = responseObject(res);\n        }\n      }\n\n      finishDeferred(key, 'reject', out);\n\n      return Promise.reject(out);\n    }\n  },\n\n  promptMove({ commit, state }, resources) {\n    commit('action-menu/togglePromptMove', resources, { root: true });\n  },\n\n  promptRestore({ commit, state }, resources ) {\n    commit('action-menu/togglePromptRestore', resources, { root: true });\n  },\n\n  assignTo({ commit, state }, resources = []) {\n    commit('action-menu/toggleAssignTo', resources, { root: true });\n  },\n\n  async resourceAction({ getters, dispatch }, {\n    resource, actionName, body, opt,\n  }) {\n    opt = opt || {};\n\n    if ( !opt.url ) {\n      opt.url = resource.actionLinkFor(actionName);\n      // opt.url = (resource.actions || resource.actionLinks)[actionName];\n    }\n\n    opt.method = 'post';\n    opt.data = body;\n\n    const res = await dispatch('request', { opt });\n\n    if ( opt.load !== false && res.type === 'collection' ) {\n      await dispatch('loadMulti', res.data);\n\n      return res.data.map((x) => getters.byId(x.type, x.id) || x);\n    } else if ( opt.load !== false && res.type && res.id ) {\n      return dispatch('load', { data: res });\n    } else {\n      return res;\n    }\n  },\n\n  promptUpdate({ commit, state }, resources = []) {\n    commit('action-menu/togglePromptUpdate', resources, { root: true });\n  },\n\n  async collectionAction({ getters, dispatch }, {\n    type, actionName, body, opt\n  }) {\n    opt = opt || {};\n\n    if ( !opt.url ) {\n      // Cheating, but cheaper than loading the whole collection...\n      const schema = getters['schemaFor'](type);\n\n      opt.url = addParam(schema.links.collection, 'action', actionName);\n    }\n\n    opt.method = 'post';\n    opt.data = body;\n\n    const res = await dispatch('request', { opt });\n\n    if ( opt.load !== false && res.type === 'collection' ) {\n      await dispatch('loadMulti', res.data);\n\n      return res.data.map((x) => getters.byId(x.type, x.id) || x);\n    } else if ( opt.load !== false && res.type && res.id ) {\n      return dispatch('load', { data: res });\n    } else {\n      return res;\n    }\n  },\n\n  createNamespace(ctx, obj) {\n    return classify(ctx, {\n      type:     NAMESPACE,\n      metadata: { name: obj.name }\n    });\n  },\n\n  cleanForNew(ctx, obj) {\n    const m = obj.metadata || {};\n\n    dropKeys(obj, newRootKeys);\n    dropKeys(m, newMetadataKeys);\n    dropCattleKeys(m.annotations);\n    dropCattleKeys(m.labels);\n\n    m.name = '';\n\n    if ( obj?.spec?.crd?.spec?.names?.kind ) {\n      obj.spec.crd.spec.names.kind = '';\n    }\n\n    return obj;\n  },\n\n  cleanForDiff(ctx, obj) {\n    const m = obj.metadata || {};\n\n    if ( !m.labels ) {\n      m.labels = {};\n    }\n\n    if ( !m.annotations ) {\n      m.annotations = {};\n    }\n\n    dropUnderscores(obj);\n    dropKeys(obj, diffRootKeys);\n    dropKeys(m, diffMetadataKeys);\n    dropCattleKeys(m.annotations);\n    dropCattleKeys(m.labels);\n\n    return obj;\n  },\n\n  cleanForDetail(ctx, resource) {\n    // Ensure labels & annotations exists, since lots of things need them\n    if ( !resource.metadata ) {\n      set(resource, 'metadata', {});\n    }\n\n    if ( !resource.metadata.annotations ) {\n      set(resource, 'metadata.annotations', {});\n    }\n\n    if ( !resource.metadata.labels ) {\n      set(resource, 'metadata.labels', {});\n    }\n\n    return resource;\n  },\n\n  // remove fields added by steve before showing/downloading yamls\n  cleanForDownload(ctx, yaml) {\n    if (!yaml) {\n      return;\n    }\n    const rootKeys = [\n      'id',\n      'links',\n      'type',\n      'actions'\n    ];\n    const metadataKeys = [\n      'fields',\n      'relationships',\n      'state',\n    ];\n    const conditionKeys = [\n      'error',\n      'transitioning',\n    ];\n    const obj = jsyaml.load(yaml);\n\n    dropKeys(obj, rootKeys);\n    dropKeys(obj?.metadata, metadataKeys);\n    (obj?.status?.conditions || []).forEach((condition) => dropKeys(condition, conditionKeys));\n\n    return jsyaml.dump(obj);\n  }\n};\n\nconst diffRootKeys = [\n  'actions', 'links', 'status', '__rehydrate', '__clone'\n];\n\nconst diffMetadataKeys = [\n  'ownerReferences',\n  'selfLink',\n  'creationTimestamp',\n  'deletionTimestamp',\n  'state',\n  'fields',\n  'relationships',\n  'generation',\n  'managedFields',\n  'resourceVersion',\n];\n\nconst newRootKeys = [\n  'actions', 'links', 'status', 'id'\n];\n\nconst newMetadataKeys = [\n  ...diffMetadataKeys,\n  'uid',\n];\n\nfunction dropUnderscores(obj) {\n  for ( const k in obj ) {\n    if ( k.startsWith('__') ) {\n      delete obj[k];\n    } else {\n      const v = obj[k];\n\n      if ( isObject(v) ) {\n        dropUnderscores(v);\n      }\n    }\n  }\n}\n\nfunction dropKeys(obj, keys) {\n  if ( !obj ) {\n    return;\n  }\n\n  for ( const k of keys ) {\n    delete obj[k];\n  }\n}\n\nfunction dropCattleKeys(obj) {\n  if ( !obj ) {\n    return;\n  }\n\n  Object.keys(obj).forEach((key) => {\n    if ( !!key.match(/(^|field\\.)cattle\\.io(\\/.*|$)/) ) {\n      delete obj[key];\n    }\n  });\n}\n"],"mappings":"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"}]}