{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/LiveExpiryBadgeState.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/LiveExpiryBadgeState.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCBkYXkgZnJvbSAnZGF5anMnOwppbXBvcnQgeyBCYWRnZVN0YXRlIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFkZ2VTdGF0ZSc7CmltcG9ydCB7IGNvbG9yRm9yU3RhdGUsIHN0YXRlRGlzcGxheSB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZS9yZXNvdXJjZS1jbGFzcyc7CmltcG9ydCB7IHNhZmVTZXRUaW1lb3V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3RpbWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQmFkZ2VTdGF0ZTogQmFkZ2VTdGF0ZQogIH0sCiAgcHJvcHM6IHsKICAgIHJvdzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzdGF0ZTogdGhpcy51cGRhdGUoKQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzdGF0ZVZhbHVlOiBmdW5jdGlvbiBzdGF0ZVZhbHVlKCkgewogICAgICByZXR1cm4gdGhpcy5zdGF0ZTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICByb3c6IGZ1bmN0aW9uIHJvdygpIHsKICAgICAgdGhpcy51cGRhdGUoKTsKICAgIH0KICB9LAogIGJlZm9yZURlc3Ryb3k6IGZ1bmN0aW9uIGJlZm9yZURlc3Ryb3koKSB7CiAgICBjbGVhclRpbWVvdXQodGhpcy50aW1lcik7CiAgfSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgdmFyIHN0YXRlID0gdGhpcy5yb3cuc3RhdGU7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICAgICAgaWYgKHN0YXRlICE9PSAnZXhwaXJlZCcgJiYgdGhpcy5yb3cuZXhwaXJlc0F0KSB7CiAgICAgICAgLy8gTm90IGV4cGlyZWQgYW5kIGhhcyBhbiBleHBpcnkgZGF0ZSwgc28gc2V0IGEgdGltZXIgdG8gdXBkYXRlIHRoZSBzdGF0ZSBvbmNlIGl0cyBleHBpcmVkCiAgICAgICAgdmFyIGV4cGlyeSA9IGRheSh0aGlzLnJvdy5leHBpcmVzQXQpOwogICAgICAgIHZhciBub3cgPSBkYXkoKTsKICAgICAgICB2YXIgdGltZVRvRXhwaXJlID0gZXhwaXJ5LmRpZmYobm93KTsKICAgICAgICB0aGlzLnRpbWVyID0gc2FmZVNldFRpbWVvdXQodGltZVRvRXhwaXJlLCB0aGlzLnVwZGF0ZSwgdGhpcyk7CiAgICAgIH0KICAgICAgdmFyIG91dCA9IHt9OwogICAgICB2YXIgY29sb3IgPSBjb2xvckZvclN0YXRlKHN0YXRlKTsKICAgICAgb3V0LnN0YXRlRGlzcGxheSA9IHN0YXRlRGlzcGxheShzdGF0ZSk7CiAgICAgIG91dC5zdGF0ZUJhY2tncm91bmQgPSBjb2xvci5yZXBsYWNlKCd0ZXh0LScsICdiZy0nKTsKICAgICAgdGhpcy5zdGF0ZSA9IG91dDsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICB9Cn07"},{"version":3,"names":["day","BadgeState","colorForState","stateDisplay","safeSetTimeout","components","props","row","type","Object","default","data","state","update","computed","stateValue","watch","beforeDestroy","clearTimeout","timer","methods","expiresAt","expiry","now","timeToExpire","diff","out","color","stateBackground","replace"],"sources":["node_modules/@rancher/shell/components/formatter/LiveExpiryBadgeState.vue"],"sourcesContent":["<script>\nimport day from 'dayjs';\nimport { BadgeState } from '@components/BadgeState';\nimport { colorForState, stateDisplay } from '@shell/plugins/dashboard-store/resource-class';\nimport { safeSetTimeout } from '@shell/utils/time';\n\nexport default {\n  components: { BadgeState },\n\n  props: {\n    row: {\n      type:    Object,\n      default: null,\n    },\n  },\n\n  data() {\n    return { state: this.update() };\n  },\n\n  computed: {\n    stateValue() {\n      return this.state;\n    }\n  },\n\n  watch: {\n    row() {\n      this.update();\n    }\n  },\n\n  beforeDestroy() {\n    clearTimeout(this.timer);\n  },\n\n  methods: {\n    update() {\n      const state = this.row.state;\n\n      clearTimeout(this.timer);\n      if (state !== 'expired' && this.row.expiresAt) {\n        // Not expired and has an expiry date, so set a timer to update the state once its expired\n        const expiry = day(this.row.expiresAt);\n        const now = day();\n        const timeToExpire = expiry.diff(now);\n\n        this.timer = safeSetTimeout(timeToExpire, this.update, this);\n      }\n\n      const out = {};\n      const color = colorForState(state);\n\n      out.stateDisplay = stateDisplay(state);\n      out.stateBackground = color.replace('text-', 'bg-');\n      this.state = out;\n\n      return out;\n    }\n  }\n};\n</script>\n\n<template>\n  <BadgeState :value=\"stateValue\" />\n</template>\n"],"mappings":";;AACA,OAAAA,GAAA;AACA,SAAAC,UAAA;AACA,SAAAC,aAAA,EAAAC,YAAA;AACA,SAAAC,cAAA;AAEA;EACAC,UAAA;IAAAJ,UAAA,EAAAA;EAAA;EAEAK,KAAA;IACAC,GAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EAEAC,IAAA,WAAAA,KAAA;IACA;MAAAC,KAAA,OAAAC,MAAA;IAAA;EACA;EAEAC,QAAA;IACAC,UAAA,WAAAA,WAAA;MACA,YAAAH,KAAA;IACA;EACA;EAEAI,KAAA;IACAT,GAAA,WAAAA,IAAA;MACA,KAAAM,MAAA;IACA;EACA;EAEAI,aAAA,WAAAA,cAAA;IACAC,YAAA,MAAAC,KAAA;EACA;EAEAC,OAAA;IACAP,MAAA,WAAAA,OAAA;MACA,IAAAD,KAAA,QAAAL,GAAA,CAAAK,KAAA;MAEAM,YAAA,MAAAC,KAAA;MACA,IAAAP,KAAA,uBAAAL,GAAA,CAAAc,SAAA;QACA;QACA,IAAAC,MAAA,GAAAtB,GAAA,MAAAO,GAAA,CAAAc,SAAA;QACA,IAAAE,GAAA,GAAAvB,GAAA;QACA,IAAAwB,YAAA,GAAAF,MAAA,CAAAG,IAAA,CAAAF,GAAA;QAEA,KAAAJ,KAAA,GAAAf,cAAA,CAAAoB,YAAA,OAAAX,MAAA;MACA;MAEA,IAAAa,GAAA;MACA,IAAAC,KAAA,GAAAzB,aAAA,CAAAU,KAAA;MAEAc,GAAA,CAAAvB,YAAA,GAAAA,YAAA,CAAAS,KAAA;MACAc,GAAA,CAAAE,eAAA,GAAAD,KAAA,CAAAE,OAAA;MACA,KAAAjB,KAAA,GAAAc,GAAA;MAEA,OAAAA,GAAA;IACA;EACA;AACA"}]}