{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/WorkloadDetailEndpoints.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/WorkloadDetailEndpoints.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubGluay5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0IHsgTk9ERSB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgVGFnIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1RhZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogW0FycmF5LCBTdHJpbmddLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBUYWc6IFRhZwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIG5vZGVzOiBmdW5jdGlvbiBub2RlcygpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NsdXN0ZXIvYWxsJ10oTk9ERSk7CiAgICB9LAogICAgLy8gdmFsdWUgbWF5IGJlIEpTT04gZnJvbSAiZmllbGQuY2F0dGxlLmlvL3B1YmxpY0VuZHBvaW50cyIgbGFiZWwKICAgIHBhcnNlZDogZnVuY3Rpb24gcGFyc2VkKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgbm9kZXMgPSB0aGlzLm5vZGVzOwogICAgICB2YXIgbm9kZVdpdGhFeHRlcm5hbCA9IG5vZGVzLmZpbmQoZnVuY3Rpb24gKG5vZGUpIHsKICAgICAgICByZXR1cm4gISFub2RlLmV4dGVybmFsSXA7CiAgICAgIH0pIHx8IHt9OwogICAgICB2YXIgZXh0ZXJuYWxJcCA9IG5vZGVXaXRoRXh0ZXJuYWwuZXh0ZXJuYWxJcDsKICAgICAgaWYgKHRoaXMudmFsdWUgJiYgdGhpcy52YWx1ZS5sZW5ndGgpIHsKICAgICAgICB2YXIgb3V0OwogICAgICAgIHRyeSB7CiAgICAgICAgICBvdXQgPSBKU09OLnBhcnNlKHRoaXMudmFsdWUpOwogICAgICAgICAgb3V0LmZvckVhY2goZnVuY3Rpb24gKGVuZHBvaW50KSB7CiAgICAgICAgICAgIHZhciBwcm90b2NvbCA9ICdodHRwJzsKICAgICAgICAgICAgaWYgKGVuZHBvaW50LnBvcnQgPT09IDQ0MykgewogICAgICAgICAgICAgIHByb3RvY29sID0gJ2h0dHBzJzsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAoZW5kcG9pbnQuYWRkcmVzc2VzKSB7CiAgICAgICAgICAgICAgZW5kcG9pbnQubGluayA9ICIiLmNvbmNhdChwcm90b2NvbCwgIjovLyIpLmNvbmNhdChlbmRwb2ludC5hZGRyZXNzZXNbMF0sICI6IikuY29uY2F0KGVuZHBvaW50LnBvcnQpOwogICAgICAgICAgICB9IGVsc2UgaWYgKGV4dGVybmFsSXApIHsKICAgICAgICAgICAgICBlbmRwb2ludC5saW5rID0gIiIuY29uY2F0KHByb3RvY29sLCAiOi8vIikuY29uY2F0KGV4dGVybmFsSXAsICI6IikuY29uY2F0KGVuZHBvaW50LnBvcnQpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIGVuZHBvaW50LmRpc3BsYXkgPSAiWyIuY29uY2F0KF90aGlzLnQoJ3NlcnZpY2VzUGFnZS5hbnlOb2RlJyksICJdOiIpLmNvbmNhdChlbmRwb2ludC5wb3J0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVbMF07CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBudWxsOwogICAgfSwKICAgIHByb3RvY29sOiBmdW5jdGlvbiBwcm90b2NvbCgpIHsKICAgICAgdmFyIHBhcnNlZCA9IHRoaXMucGFyc2VkOwogICAgICBpZiAocGFyc2VkKSB7CiAgICAgICAgaWYgKHRoaXMucGFyc2VkWzBdLnByb3RvY29sKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy5wYXJzZWRbMF0ucHJvdG9jb2w7CiAgICAgICAgfQogICAgICAgIHZhciBtYXRjaCA9IHBhcnNlZC5tYXRjaCgvXihbXjpdKyk6XC9cLy8pOwogICAgICAgIGlmIChtYXRjaCkgewogICAgICAgICAgcmV0dXJuIG1hdGNoWzFdOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gJ2xpbmsnOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0KICB9Cn07"},{"version":3,"names":["NODE","Tag","props","value","type","Array","String","default","components","computed","nodes","$store","getters","parsed","_this","nodeWithExternal","find","node","externalIp","length","out","JSON","parse","forEach","endpoint","protocol","port","addresses","link","concat","display","t","err","match"],"sources":["node_modules/@rancher/shell/components/formatter/WorkloadDetailEndpoints.vue"],"sourcesContent":["<script>\nimport { NODE } from '@shell/config/types';\nimport Tag from '@shell/components/Tag';\n\nexport default {\n  props: {\n    value: {\n      type:    [Array, String],\n      default: null,\n    },\n  },\n\n  components: { Tag },\n\n  computed: {\n    nodes() {\n      return this.$store.getters['cluster/all'](NODE);\n    },\n    // value may be JSON from \"field.cattle.io/publicEndpoints\" label\n    parsed() {\n      const nodes = this.nodes;\n      const nodeWithExternal = nodes.find((node) => !!node.externalIp) || {};\n      const externalIp = nodeWithExternal.externalIp;\n\n      if ( this.value && this.value.length ) {\n        let out ;\n\n        try {\n          out = JSON.parse(this.value);\n          out.forEach((endpoint) => {\n            let protocol = 'http';\n\n            if (endpoint.port === 443) {\n              protocol = 'https';\n            }\n\n            if (endpoint.addresses) {\n              endpoint.link = `${ protocol }://${ endpoint.addresses[0] }:${ endpoint.port }`;\n            } else if (externalIp) {\n              endpoint.link = `${ protocol }://${ externalIp }:${ endpoint.port }`;\n            } else {\n              endpoint.display = `[${ this.t('servicesPage.anyNode') }]:${ endpoint.port }`;\n            }\n          });\n\n          return out;\n        } catch (err) {\n          return this.value[0];\n        }\n      }\n\n      return null;\n    },\n\n    protocol() {\n      const { parsed } = this;\n\n      if ( parsed) {\n        if (this.parsed[0].protocol) {\n          return this.parsed[0].protocol;\n        }\n\n        const match = parsed.match(/^([^:]+):\\/\\//);\n\n        if ( match ) {\n          return match[1];\n        } else {\n          return 'link';\n        }\n      }\n\n      return null;\n    }\n  },\n};\n</script>\n\n<template>\n  <span>\n    <template v-for=\"endpoint in parsed\">\n      <Tag\n        v-if=\"endpoint.display\"\n        :key=\"endpoint.display\"\n        class=\"endpoint-tag\"\n      >{{ endpoint.display }}</Tag>\n      <a\n        v-else\n        :key=\"endpoint.link\"\n        class=\"endpoint-link\"\n        :href=\"endpoint.link\"\n        target=\"_blank\"\n        rel=\"nofollow noopener noreferrer\"\n      ><span v-if=\"endpoint.port\">{{ endpoint.port }}/</span>{{ endpoint.protocol }}</a>\n    </template>\n  </span>\n</template>\n\n<style lang=\"scss\" scoped>\n.endpoint-tag {\n  display: inline-block;\n}\n.endpoint-tag:not(:first-of-type) {\n  margin: 2px 4px 0 2px;\n}\n.endpoint-link:after {\n  content: ',\\a0';\n  display: inline-block;\n  color: var(--default-text);\n}\n.endpoint-link:last-of-type:after {\n  content: '';\n}\n\n</style>\n"],"mappings":";;;;;;;;AACA,SAAAA,IAAA;AACA,OAAAC,GAAA;AAEA;EACAC,KAAA;IACAC,KAAA;MACAC,IAAA,GAAAC,KAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EAEAC,UAAA;IAAAP,GAAA,EAAAA;EAAA;EAEAQ,QAAA;IACAC,KAAA,WAAAA,MAAA;MACA,YAAAC,MAAA,CAAAC,OAAA,gBAAAZ,IAAA;IACA;IACA;IACAa,MAAA,WAAAA,OAAA;MAAA,IAAAC,KAAA;MACA,IAAAJ,KAAA,QAAAA,KAAA;MACA,IAAAK,gBAAA,GAAAL,KAAA,CAAAM,IAAA,WAAAC,IAAA;QAAA,SAAAA,IAAA,CAAAC,UAAA;MAAA;MACA,IAAAA,UAAA,GAAAH,gBAAA,CAAAG,UAAA;MAEA,SAAAf,KAAA,SAAAA,KAAA,CAAAgB,MAAA;QACA,IAAAC,GAAA;QAEA;UACAA,GAAA,GAAAC,IAAA,CAAAC,KAAA,MAAAnB,KAAA;UACAiB,GAAA,CAAAG,OAAA,WAAAC,QAAA;YACA,IAAAC,QAAA;YAEA,IAAAD,QAAA,CAAAE,IAAA;cACAD,QAAA;YACA;YAEA,IAAAD,QAAA,CAAAG,SAAA;cACAH,QAAA,CAAAI,IAAA,MAAAC,MAAA,CAAAJ,QAAA,SAAAI,MAAA,CAAAL,QAAA,CAAAG,SAAA,UAAAE,MAAA,CAAAL,QAAA,CAAAE,IAAA;YACA,WAAAR,UAAA;cACAM,QAAA,CAAAI,IAAA,MAAAC,MAAA,CAAAJ,QAAA,SAAAI,MAAA,CAAAX,UAAA,OAAAW,MAAA,CAAAL,QAAA,CAAAE,IAAA;YACA;cACAF,QAAA,CAAAM,OAAA,OAAAD,MAAA,CAAAf,KAAA,CAAAiB,CAAA,gCAAAF,MAAA,CAAAL,QAAA,CAAAE,IAAA;YACA;UACA;UAEA,OAAAN,GAAA;QACA,SAAAY,GAAA;UACA,YAAA7B,KAAA;QACA;MACA;MAEA;IACA;IAEAsB,QAAA,WAAAA,SAAA;MACA,IAAAZ,MAAA,QAAAA,MAAA;MAEA,IAAAA,MAAA;QACA,SAAAA,MAAA,IAAAY,QAAA;UACA,YAAAZ,MAAA,IAAAY,QAAA;QACA;QAEA,IAAAQ,KAAA,GAAApB,MAAA,CAAAoB,KAAA;QAEA,IAAAA,KAAA;UACA,OAAAA,KAAA;QACA;UACA;QACA;MACA;MAEA;IACA;EACA;AACA"}]}