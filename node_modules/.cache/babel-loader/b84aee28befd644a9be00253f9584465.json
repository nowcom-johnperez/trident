{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--17-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc-interval.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc-interval.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgZ2MgZnJvbSAnLi9nYyc7Ci8qKgogKiBLaWNrIG9mIHJlZ3VsYXIgR0MKICovCnZhciBHYXJiYWdlQ29sbGVjdEludGVydmFsID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICBmdW5jdGlvbiBHYXJiYWdlQ29sbGVjdEludGVydmFsKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEdhcmJhZ2VDb2xsZWN0SW50ZXJ2YWwpOwogIH0KICBfY3JlYXRlQ2xhc3MoR2FyYmFnZUNvbGxlY3RJbnRlcnZhbCwgW3sKICAgIGtleTogImdjU3RhcnRJbnRlcnZhbHMiLAogICAgdmFsdWU6CiAgICAvKioKICAgICogUmVxdWVzdCB3ZSBzdGFydCBnYXJiYWdlIGNvbGxlY3Rpb24gYXQgcmVndWxhciBpbnRlcnZhbHMKICAgICoKICAgICogSWYgR0MgaXMgZGlzYWJsZWQgb3IgcnVubmluZyByZXR1cm4gZWFybHkKICAgICovCiAgICBmdW5jdGlvbiBnY1N0YXJ0SW50ZXJ2YWxzKGN0eCkgewogICAgICB2YXIgX2djJGdjRW5hYmxlZEludGVydmFsID0gZ2MuZ2NFbmFibGVkSW50ZXJ2YWwoY3R4KSwKICAgICAgICBlbmFibGVkID0gX2djJGdjRW5hYmxlZEludGVydmFsLmVuYWJsZWQsCiAgICAgICAgaW50ZXJ2YWwgPSBfZ2MkZ2NFbmFibGVkSW50ZXJ2YWwuaW50ZXJ2YWw7CiAgICAgIGlmICghZ2MuZ2NFbmFibGVkU2V0dGluZyhjdHgpIHx8ICFlbmFibGVkKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLmdjSW50ZXJ2YWwpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5nY0ludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogICAgICAgIGN0eC5kaXNwYXRjaCgnZ2FyYmFnZUNvbGxlY3QnKTsgLy8gZ2MuZ2FyYmFnZUNvbGxlY3QgaXMgcGVyIHN0b3JlLCBzbyBkaXNwYXRjaCB2aWEgY2VudHJhbCBwb2ludAogICAgICB9LCBpbnRlcnZhbCAqIDEwMDApOwogICAgfQogIH0sIHsKICAgIGtleTogImdjU3RvcEludGVydmFscyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gZ2NTdG9wSW50ZXJ2YWxzKCkgewogICAgICBpZiAodGhpcy5nY0ludGVydmFsKSB7CiAgICAgICAgY2xlYXJJbnRlcnZhbCh0aGlzLmdjSW50ZXJ2YWwpOwogICAgICAgIGRlbGV0ZSB0aGlzLmdjSW50ZXJ2YWw7CiAgICAgIH0KICAgIH0KICB9XSk7CiAgcmV0dXJuIEdhcmJhZ2VDb2xsZWN0SW50ZXJ2YWw7Cn0oKTsKdmFyIGdjaSA9IG5ldyBHYXJiYWdlQ29sbGVjdEludGVydmFsKCk7CmV4cG9ydCBkZWZhdWx0IGdjaTs="},{"version":3,"names":["gc","GarbageCollectInterval","_classCallCheck","_createClass","key","value","gcStartIntervals","ctx","_gc$gcEnabledInterval","gcEnabledInterval","enabled","interval","gcEnabledSetting","gcInterval","setInterval","dispatch","gcStopIntervals","clearInterval","gci"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc-interval.ts"],"sourcesContent":["import gc from './gc';\n\n/**\n * Kick of regular GC\n */\nclass GarbageCollectInterval {\n  private gcInterval?: NodeJS.Timer;\n\n  /**\n  * Request we start garbage collection at regular intervals\n  *\n  * If GC is disabled or running return early\n  */\n  gcStartIntervals(ctx: any) {\n    const { enabled, interval } = gc.gcEnabledInterval(ctx);\n\n    if (!gc.gcEnabledSetting(ctx) || !enabled) {\n      return;\n    }\n\n    if (this.gcInterval) {\n      return;\n    }\n\n    this.gcInterval = setInterval(() => {\n      ctx.dispatch('garbageCollect'); // gc.garbageCollect is per store, so dispatch via central point\n    }, interval * 1000);\n  }\n\n  gcStopIntervals() {\n    if (this.gcInterval) {\n      clearInterval(this.gcInterval);\n      delete this.gcInterval;\n    }\n  }\n}\n\nconst gci = new GarbageCollectInterval();\n\nexport default gci;\n"],"mappings":";;AAAA,OAAOA,EAAE,MAAM,MAAM;AAErB;;;AAAA,IAGMC,sBAAsB;EAAA,SAAAA,uBAAA;IAAAC,eAAA,OAAAD,sBAAA;EAAA;EAAAE,YAAA,CAAAF,sBAAA;IAAAG,GAAA;IAAAC,KAAA;IAG1B;;;;;IAKA,SAAAC,iBAAiBC,GAAQ;MACvB,IAAAC,qBAAA,GAA8BR,EAAE,CAACS,iBAAiB,CAACF,GAAG,CAAC;QAA/CG,OAAO,GAAAF,qBAAA,CAAPE,OAAO;QAAEC,QAAQ,GAAAH,qBAAA,CAARG,QAAQ;MAEzB,IAAI,CAACX,EAAE,CAACY,gBAAgB,CAACL,GAAG,CAAC,IAAI,CAACG,OAAO,EAAE;QACzC;;MAGF,IAAI,IAAI,CAACG,UAAU,EAAE;QACnB;;MAGF,IAAI,CAACA,UAAU,GAAGC,WAAW,CAAC,YAAK;QACjCP,GAAG,CAACQ,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC;MAClC,CAAC,EAAEJ,QAAQ,GAAG,IAAI,CAAC;IACrB;EAAC;IAAAP,GAAA;IAAAC,KAAA,EAED,SAAAW,gBAAA,EAAe;MACb,IAAI,IAAI,CAACH,UAAU,EAAE;QACnBI,aAAa,CAAC,IAAI,CAACJ,UAAU,CAAC;QAC9B,OAAO,IAAI,CAACA,UAAU;;IAE1B;EAAC;EAAA,OAAAZ,sBAAA;AAAA;AAGH,IAAMiB,GAAG,GAAG,IAAIjB,sBAAsB,EAAE;AAExC,eAAeiB,GAAG"}]}