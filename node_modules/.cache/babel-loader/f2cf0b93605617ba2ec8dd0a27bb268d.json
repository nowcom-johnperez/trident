{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/networking.k8s.io.ingress/DefaultBackend.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/networking.k8s.io.ingress/DefaultBackend.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwppbXBvcnQgeyBfRURJVCwgX1ZJRVcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CmltcG9ydCB7IGdldCwgc2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMYWJlbGVkSW5wdXQ6IExhYmVsZWRJbnB1dCwKICAgIExhYmVsZWRTZWxlY3Q6IExhYmVsZWRTZWxlY3QsCiAgICBCYW5uZXI6IEJhbm5lcgogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgc2VydmljZVRhcmdldHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBfRURJVAogICAgfSwKICAgIHJ1bGVzOiB7CiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBuYW1lOiBbXSwKICAgICAgICAgIHBvcnQ6IFtdCiAgICAgICAgfTsKICAgICAgfSwKICAgICAgdHlwZTogT2JqZWN0CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIGJhY2tlbmQgPSBnZXQodGhpcy52YWx1ZS5zcGVjLCB0aGlzLnZhbHVlLmRlZmF1bHRCYWNrZW5kUGF0aCk7CiAgICB2YXIgc2VydmljZU5hbWUgPSBnZXQoYmFja2VuZCwgdGhpcy52YWx1ZS5zZXJ2aWNlTmFtZVBhdGgpIHx8ICcnOwogICAgdmFyIHNlcnZpY2VQb3J0ID0gZ2V0KGJhY2tlbmQsIHRoaXMudmFsdWUuc2VydmljZVBvcnRQYXRoKSB8fCAnJzsKICAgIHJldHVybiB7CiAgICAgIHNlcnZpY2VOYW1lOiBzZXJ2aWNlTmFtZSwKICAgICAgc2VydmljZVBvcnQ6IHNlcnZpY2VQb3J0CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzVmlldzogZnVuY3Rpb24gaXNWaWV3KCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfVklFVzsKICAgIH0sCiAgICBwb3J0T3B0aW9uczogZnVuY3Rpb24gcG9ydE9wdGlvbnMoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICAgIHZhciBzZXJ2aWNlID0gdGhpcy5zZXJ2aWNlVGFyZ2V0cy5maW5kKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgcmV0dXJuIHMubGFiZWwgPT09IF90aGlzLnNlcnZpY2VOYW1lOwogICAgICB9KTsKICAgICAgcmV0dXJuIChzZXJ2aWNlID09PSBudWxsIHx8IHNlcnZpY2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHNlcnZpY2UucG9ydHMpIHx8IFtdOwogICAgfSwKICAgIHNlcnZpY2VUYXJnZXRTdGF0dXM6IGZ1bmN0aW9uIHNlcnZpY2VUYXJnZXRTdGF0dXMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICB2YXIgaXNWYWx1ZUFuT3B0aW9uID0gIXRoaXMuc2VydmljZU5hbWUgfHwgdGhpcy5zZXJ2aWNlVGFyZ2V0cy5maW5kKGZ1bmN0aW9uICh0YXJnZXQpIHsKICAgICAgICByZXR1cm4gX3RoaXMyLnNlcnZpY2VOYW1lID09PSB0YXJnZXQudmFsdWU7CiAgICAgIH0pOwogICAgICByZXR1cm4gaXNWYWx1ZUFuT3B0aW9uID8gbnVsbCA6ICd3YXJuaW5nJzsKICAgIH0sCiAgICBzZXJ2aWNlVGFyZ2V0VG9vbHRpcDogZnVuY3Rpb24gc2VydmljZVRhcmdldFRvb2x0aXAoKSB7CiAgICAgIHJldHVybiB0aGlzLnNlcnZpY2VUYXJnZXRTdGF0dXMgPT09ICd3YXJuaW5nJyA/IHRoaXMudCgnaW5ncmVzcy5ydWxlcy50YXJnZXQuZG9lc250RXhpc3QnKSA6IG51bGw7CiAgICB9LAogICAgc2VydmljZVRhcmdldE9wdGlvbnM6IGZ1bmN0aW9uIHNlcnZpY2VUYXJnZXRPcHRpb25zKCkgewogICAgICByZXR1cm4gW3sKICAgICAgICBsYWJlbDogdGhpcy50KCdnZW5lcmljLm5vbmUnKSwKICAgICAgICB2YWx1ZTogJycsCiAgICAgICAgcG9ydHM6IFtdCiAgICAgIH1dLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5zZXJ2aWNlVGFyZ2V0cykpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHZhciBiYWNrZW5kID0gZ2V0KHRoaXMudmFsdWUuc3BlYywgdGhpcy52YWx1ZS5kZWZhdWx0QmFja2VuZFBhdGgpIHx8IHt9OwogICAgICBzZXQoYmFja2VuZCwgdGhpcy52YWx1ZS5zZXJ2aWNlTmFtZVBhdGgsIHRoaXMuc2VydmljZU5hbWUpOwogICAgICBzZXQoYmFja2VuZCwgdGhpcy52YWx1ZS5zZXJ2aWNlUG9ydFBhdGgsIHRoaXMuc2VydmljZVBvcnQpOwogICAgICBzZXQodGhpcy52YWx1ZS5zcGVjLCB0aGlzLnZhbHVlLmRlZmF1bHRCYWNrZW5kUGF0aCwgYmFja2VuZCk7CiAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdGhpcy52YWx1ZSk7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgc2VydmljZU5hbWU6IGZ1bmN0aW9uIHNlcnZpY2VOYW1lKCkgewogICAgICAvLyBmaXhlcyBhbiBpc3N1ZSB3aGVyZWluIHNlbGVjdGluZyBhIHRhcmdldCBzZXJ2aWNlIHZpc3VhbGx5IGNsZWFycyBvdXQgdGhlIHBvcnQgYnV0IHRoZSBwcmV2aW91cyB2YWx1ZSByZW1haW5zCiAgICAgIHRoaXMudXBkYXRlKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["LabeledInput","LabeledSelect","_EDIT","_VIEW","Banner","get","set","components","props","value","type","Object","default","_default","serviceTargets","Array","mode","String","rules","name","port","data","backend","spec","defaultBackendPath","serviceName","serviceNamePath","servicePort","servicePortPath","computed","isView","portOptions","_this","service","find","s","label","ports","serviceTargetStatus","_this2","isValueAnOption","target","serviceTargetTooltip","t","serviceTargetOptions","concat","_toConsumableArray","methods","update","$emit","watch"],"sources":["node_modules/@rancher/shell/edit/networking.k8s.io.ingress/DefaultBackend.vue"],"sourcesContent":["<script>\r\nimport { LabeledInput } from '@components/Form/LabeledInput';\r\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\r\nimport { _EDIT, _VIEW } from '@shell/config/query-params';\r\nimport { Banner } from '@components/Banner';\r\nimport { get, set } from '@shell/utils/object';\r\n\r\nexport default {\r\n  components: {\r\n    LabeledInput, LabeledSelect, Banner\r\n  },\r\n  props: {\r\n    value: {\r\n      type:    Object,\r\n      default: () => {\r\n        return {};\r\n      }\r\n    },\r\n    serviceTargets: {\r\n      type:    Array,\r\n      default: () => []\r\n    },\r\n    mode: {\r\n      type:    String,\r\n      default: _EDIT\r\n    },\r\n    rules: {\r\n      default: () => ({\r\n        name: [],\r\n        port: []\r\n      }),\r\n      type: Object,\r\n    }\r\n  },\r\n  data() {\r\n    const backend = get(this.value.spec, this.value.defaultBackendPath);\r\n    const serviceName = get(backend, this.value.serviceNamePath) || '';\r\n    const servicePort = get(backend, this.value.servicePortPath) || '';\r\n\r\n    return { serviceName, servicePort };\r\n  },\r\n  computed: {\r\n    isView() {\r\n      return this.mode === _VIEW;\r\n    },\r\n    portOptions() {\r\n      const service = this.serviceTargets.find((s) => s.label === this.serviceName);\r\n\r\n      return service?.ports || [];\r\n    },\r\n    serviceTargetStatus() {\r\n      const isValueAnOption = !this.serviceName || this.serviceTargets.find((target) => this.serviceName === target.value);\r\n\r\n      return isValueAnOption ? null : 'warning';\r\n    },\r\n    serviceTargetTooltip() {\r\n      return this.serviceTargetStatus === 'warning' ? this.t('ingress.rules.target.doesntExist') : null;\r\n    },\r\n    serviceTargetOptions() {\r\n      return [\r\n        {\r\n          label: this.t('generic.none'),\r\n          value: '',\r\n          ports: []\r\n        },\r\n        ...this.serviceTargets\r\n      ];\r\n    }\r\n  },\r\n  methods: {\r\n    update() {\r\n      const backend = get(this.value.spec, this.value.defaultBackendPath) || {};\r\n\r\n      set(backend, this.value.serviceNamePath, this.serviceName);\r\n      set(backend, this.value.servicePortPath, this.servicePort);\r\n      set(this.value.spec, this.value.defaultBackendPath, backend);\r\n\r\n      this.$emit('input', this.value);\r\n    }\r\n  },\r\n  watch: {\r\n    serviceName() { // fixes an issue wherein selecting a target service visually clears out the port but the previous value remains\r\n      this.update();\r\n    }\r\n  }\r\n};\r\n</script>\r\n<template>\r\n  <div>\r\n    <Banner\n      color=\"warning\"\n      :label=\"t('ingress.defaultBackend.warning')\"\n    />\r\n    <div\n      v-if=\"serviceName || !isView\"\n      class=\"row\"\n    >\r\n      <div class=\"col span-4\">\r\n        <LabeledSelect\r\n          v-model=\"serviceName\"\r\n          :taggable=\"true\"\r\n          :mode=\"mode\"\r\n          :label=\"t('ingress.defaultBackend.targetService.label')\"\r\n          :options=\"serviceTargetOptions\"\r\n          option-label=\"label\"\r\n          :status=\"serviceTargetStatus\"\r\n          :tooltip=\"serviceTargetTooltip\"\r\n          :rules=\"rules.name\"\r\n          @input=\"update(); servicePort = ''\"\r\n        />\r\n      </div>\r\n      <div\n        class=\"col span-3\"\n        :style=\"{'margin-right': '0px'}\"\n      >\r\n        <LabeledInput\r\n          v-if=\"portOptions.length === 0 || isView\"\r\n          v-model.number=\"servicePort\"\r\n          :mode=\"mode\"\r\n          :label=\"t('ingress.defaultBackend.port.label')\"\r\n          :placeholder=\"t('ingress.defaultBackend.port.placeholder')\"\r\n          :rules=\"rules.port\"\r\n          @input=\"update\"\r\n        />\r\n        <LabeledSelect\r\n          v-else\r\n          v-model=\"servicePort\"\r\n          :mode=\"mode\"\r\n          :options=\"portOptions\"\r\n          :label=\"t('ingress.defaultBackend.port.label')\"\r\n          :placeholder=\"t('ingress.defaultBackend.port.placeholder')\"\r\n          :rules=\"rules.port\"\r\n          @input=\"update\"\r\n        />\r\n      </div>\r\n    </div>\r\n    <div\n      v-else\n      class=\"pl-10\"\n    >\r\n      {{ t('ingress.defaultBackend.noServiceSelected') }}\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"mappings":";;;;AACA,SAAAA,YAAA;AACA,OAAAC,aAAA;AACA,SAAAC,KAAA,EAAAC,KAAA;AACA,SAAAC,MAAA;AACA,SAAAC,GAAA,EAAAC,GAAA;AAEA;EACAC,UAAA;IACAP,YAAA,EAAAA,YAAA;IAAAC,aAAA,EAAAA,aAAA;IAAAG,MAAA,EAAAA;EACA;EACAI,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,WAAAC,SAAA;QACA;MACA;IACA;IACAC,cAAA;MACAJ,IAAA,EAAAK,KAAA;MACAH,OAAA,WAAAC,SAAA;QAAA;MAAA;IACA;IACAG,IAAA;MACAN,IAAA,EAAAO,MAAA;MACAL,OAAA,EAAAV;IACA;IACAgB,KAAA;MACAN,OAAA,WAAAC,SAAA;QAAA;UACAM,IAAA;UACAC,IAAA;QACA;MAAA;MACAV,IAAA,EAAAC;IACA;EACA;EACAU,IAAA,WAAAA,KAAA;IACA,IAAAC,OAAA,GAAAjB,GAAA,MAAAI,KAAA,CAAAc,IAAA,OAAAd,KAAA,CAAAe,kBAAA;IACA,IAAAC,WAAA,GAAApB,GAAA,CAAAiB,OAAA,OAAAb,KAAA,CAAAiB,eAAA;IACA,IAAAC,WAAA,GAAAtB,GAAA,CAAAiB,OAAA,OAAAb,KAAA,CAAAmB,eAAA;IAEA;MAAAH,WAAA,EAAAA,WAAA;MAAAE,WAAA,EAAAA;IAAA;EACA;EACAE,QAAA;IACAC,MAAA,WAAAA,OAAA;MACA,YAAAd,IAAA,KAAAb,KAAA;IACA;IACA4B,WAAA,WAAAA,YAAA;MAAA,IAAAC,KAAA;MACA,IAAAC,OAAA,QAAAnB,cAAA,CAAAoB,IAAA,WAAAC,CAAA;QAAA,OAAAA,CAAA,CAAAC,KAAA,KAAAJ,KAAA,CAAAP,WAAA;MAAA;MAEA,QAAAQ,OAAA,aAAAA,OAAA,uBAAAA,OAAA,CAAAI,KAAA;IACA;IACAC,mBAAA,WAAAA,oBAAA;MAAA,IAAAC,MAAA;MACA,IAAAC,eAAA,SAAAf,WAAA,SAAAX,cAAA,CAAAoB,IAAA,WAAAO,MAAA;QAAA,OAAAF,MAAA,CAAAd,WAAA,KAAAgB,MAAA,CAAAhC,KAAA;MAAA;MAEA,OAAA+B,eAAA;IACA;IACAE,oBAAA,WAAAA,qBAAA;MACA,YAAAJ,mBAAA,sBAAAK,CAAA;IACA;IACAC,oBAAA,WAAAA,qBAAA;MACA,QACA;QACAR,KAAA,OAAAO,CAAA;QACAlC,KAAA;QACA4B,KAAA;MACA,GAAAQ,MAAA,CAAAC,kBAAA,CACA,KAAAhC,cAAA;IAEA;EACA;EACAiC,OAAA;IACAC,MAAA,WAAAA,OAAA;MACA,IAAA1B,OAAA,GAAAjB,GAAA,MAAAI,KAAA,CAAAc,IAAA,OAAAd,KAAA,CAAAe,kBAAA;MAEAlB,GAAA,CAAAgB,OAAA,OAAAb,KAAA,CAAAiB,eAAA,OAAAD,WAAA;MACAnB,GAAA,CAAAgB,OAAA,OAAAb,KAAA,CAAAmB,eAAA,OAAAD,WAAA;MACArB,GAAA,MAAAG,KAAA,CAAAc,IAAA,OAAAd,KAAA,CAAAe,kBAAA,EAAAF,OAAA;MAEA,KAAA2B,KAAA,eAAAxC,KAAA;IACA;EACA;EACAyC,KAAA;IACAzB,WAAA,WAAAA,YAAA;MAAA;MACA,KAAAuB,MAAA;IACA;EACA;AACA"}]}