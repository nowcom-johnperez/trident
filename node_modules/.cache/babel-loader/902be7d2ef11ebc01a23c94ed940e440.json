{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/dashboard-store/actions.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/dashboard-store/actions.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgX3RvQXJyYXkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9BcnJheSI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIudXJsLnRvLWpzb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgbWVyZ2UgZnJvbSAnbG9kYXNoL21lcmdlJzsKaW1wb3J0IHsgU0NIRU1BIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IFNQT09GRURfQVBJX1BSRUZJWCwgU1BPT0ZFRF9QUkVGSVggfSBmcm9tICdAc2hlbGwvc3RvcmUvdHlwZS1tYXAnOwppbXBvcnQgeyBjcmVhdGVZYW1sIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2NyZWF0ZS15YW1sJzsKaW1wb3J0IHsgY2xhc3NpZnkgfSBmcm9tICdAc2hlbGwvcGx1Z2lucy9kYXNoYm9hcmQtc3RvcmUvY2xhc3NpZnknOwppbXBvcnQgeyBub3JtYWxpemVUeXBlIH0gZnJvbSAnLi9ub3JtYWxpemUnOwppbXBvcnQgX2dhcmJhZ2VDb2xsZWN0IGZyb20gJ0BzaGVsbC91dGlscy9nYy9nYyc7CmltcG9ydCB7IGFkZFNjaGVtYUluZGV4RmllbGRzIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvc3RldmUvc2NoZW1hLnV0aWxzJzsKZXhwb3J0IHZhciBfQUxMID0gJ2FsbCc7CmV4cG9ydCB2YXIgX01FUkdFID0gJ21lcmdlJzsKZXhwb3J0IHZhciBfTVVMVEkgPSAnbXVsdGknOwpleHBvcnQgdmFyIF9BTExfSUZfQVVUSEVEID0gJ2FsbElmQXV0aGVkJzsKZXhwb3J0IHZhciBfTk9ORSA9ICdub25lJzsKdmFyIFNDSEVNQV9DSEVDS19SRVRSSUVTID0gMTU7CnZhciBTQ0hFTUFfQ0hFQ0tfUkVUUllfTE9HID0gMTA7CmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVTcG9vZmVkUmVxdWVzdChfeCwgX3gyLCBfeDMsIF94NCkgewogIHJldHVybiBfaGFuZGxlU3Bvb2ZlZFJlcXVlc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpmdW5jdGlvbiBfaGFuZGxlU3Bvb2ZlZFJlcXVlc3QoKSB7CiAgX2hhbmRsZVNwb29mZWRSZXF1ZXN0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNihyb290R2V0dGVycywgc2NoZW1hU3RvcmUsIG9wdCwgcHJvZHVjdCkgewogICAgdmFyIF9vcHQkdXJsJHNwbGl0LCBfb3B0JHVybCRzcGxpdDIsIGVtcHR5LCBzY2hlbWUsIHR5cGUsIHJlc3QsIGlkLCBpc0FwaSwgdHlwZW1hcEdldHRlciwgc2NoZW1hcywgaW5zdGFuY2UsIGRhdGE7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTYkKF9jb250ZXh0NikgewogICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgaWYgKCEob3B0LnVybC5pbmNsdWRlcyhTUE9PRkVEX1BSRUZJWCkgfHwgb3B0LnVybC5pbmNsdWRlcyhTUE9PRkVEX0FQSV9QUkVGSVgpKSkgewogICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDExOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICAgIF9vcHQkdXJsJHNwbGl0ID0gb3B0LnVybC5zcGxpdCgnLycpLCBfb3B0JHVybCRzcGxpdDIgPSBfdG9BcnJheShfb3B0JHVybCRzcGxpdCksIGVtcHR5ID0gX29wdCR1cmwkc3BsaXQyWzBdLCBzY2hlbWUgPSBfb3B0JHVybCRzcGxpdDJbMV0sIHR5cGUgPSBfb3B0JHVybCRzcGxpdDJbMl0sIHJlc3QgPSBfb3B0JHVybCRzcGxpdDIuc2xpY2UoMyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tdW51c2VkLXZhcnMKICAgICAgICAgIGlkID0gcmVzdC5qb2luKCcvJyk7IC8vIENvdmVyIGNhc2Ugd2hlcmUgaWQgY29udGFpbnMgJy8nCiAgICAgICAgICBpc0FwaSA9IHNjaGVtZSA9PT0gU1BPT0ZFRF9BUElfUFJFRklYOwogICAgICAgICAgdHlwZW1hcEdldHRlciA9IGlkID8gJ2dldFNwb29mZWRJbnN0YW5jZScgOiAnZ2V0U3Bvb2ZlZEluc3RhbmNlcyc7CiAgICAgICAgICBzY2hlbWFzID0gcm9vdEdldHRlcnNbIiIuY29uY2F0KHNjaGVtYVN0b3JlLCAiL2FsbCIpXShTQ0hFTUEpOyAvLyBnZXR0ZXJzIHJldHVybiBhc3luYyBnZXRTcG9vZmVkSW5zdGFuY2UvZ2V0U3Bvb2ZlZEluc3RhbmNlcyBmbgogICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA4OwogICAgICAgICAgcmV0dXJuIHJvb3RHZXR0ZXJzWyJ0eXBlLW1hcC8iLmNvbmNhdCh0eXBlbWFwR2V0dGVyKV0odHlwZSwgcHJvZHVjdCwgaWQpOwogICAgICAgIGNhc2UgODoKICAgICAgICAgIGluc3RhbmNlID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICBkYXRhID0gaXNBcGkgPyBjcmVhdGVZYW1sKHNjaGVtYXMsIHR5cGUsIGluc3RhbmNlKSA6IGluc3RhbmNlOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ni5hYnJ1cHQoInJldHVybiIsIGlkICYmICFpc0FwaSA/IGRhdGEgOiB7CiAgICAgICAgICAgIGRhdGE6IGRhdGEKICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgMTE6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlNik7CiAgfSkpOwogIHJldHVybiBfaGFuZGxlU3Bvb2ZlZFJlcXVlc3QuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKfQpleHBvcnQgZnVuY3Rpb24gbG9hZFNjaGVtYXMoX3g1KSB7CiAgcmV0dXJuIF9sb2FkU2NoZW1hcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmZ1bmN0aW9uIF9sb2FkU2NoZW1hcygpIHsKICBfbG9hZFNjaGVtYXMgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KGN0eCkgewogICAgdmFyIHdhdGNoLAogICAgICBnZXR0ZXJzLAogICAgICBkaXNwYXRjaCwKICAgICAgY29tbWl0LAogICAgICByb290R2V0dGVycywKICAgICAgcmVzLAogICAgICBzcG9vZmVkVHlwZXMsCiAgICAgIGFsbCwKICAgICAgX2FyZ3M4ID0gYXJndW1lbnRzOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU3JChfY29udGV4dDcpIHsKICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ3LnByZXYgPSBfY29udGV4dDcubmV4dCkgewogICAgICAgIGNhc2UgMDoKICAgICAgICAgIHdhdGNoID0gX2FyZ3M4Lmxlbmd0aCA+IDEgJiYgX2FyZ3M4WzFdICE9PSB1bmRlZmluZWQgPyBfYXJnczhbMV0gOiB0cnVlOwogICAgICAgICAgZ2V0dGVycyA9IGN0eC5nZXR0ZXJzLCBkaXNwYXRjaCA9IGN0eC5kaXNwYXRjaCwgY29tbWl0ID0gY3R4LmNvbW1pdCwgcm9vdEdldHRlcnMgPSBjdHgucm9vdEdldHRlcnM7CiAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDQ7CiAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2ZpbmRBbGwnLCB7CiAgICAgICAgICAgIHR5cGU6IFNDSEVNQSwKICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgdXJsOiAnc2NoZW1hcycsCiAgICAgICAgICAgICAgbG9hZDogZmFsc2UKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSA0OgogICAgICAgICAgcmVzID0gX2NvbnRleHQ3LnNlbnQ7CiAgICAgICAgICBzcG9vZmVkVHlwZXMgPSByb290R2V0dGVyc1sndHlwZS1tYXAvYWxsU3Bvb2ZlZFNjaGVtYXMnXTsKICAgICAgICAgIGlmIChBcnJheS5pc0FycmF5KHJlcy5kYXRhKSkgewogICAgICAgICAgICByZXMuZGF0YSA9IHJlcy5kYXRhLmNvbmNhdChzcG9vZmVkVHlwZXMpOwogICAgICAgICAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHJlcykpIHsKICAgICAgICAgICAgcmVzLmRhdGEgPSByZXMuY29uY2F0KHNwb29mZWRUeXBlcyk7CiAgICAgICAgICB9CiAgICAgICAgICByZXMuZGF0YS5mb3JFYWNoKGFkZFNjaGVtYUluZGV4RmllbGRzKTsKICAgICAgICAgIGNvbW1pdCgnbG9hZEFsbCcsIHsKICAgICAgICAgICAgY3R4OiBjdHgsCiAgICAgICAgICAgIHR5cGU6IFNDSEVNQSwKICAgICAgICAgICAgZGF0YTogcmVzLmRhdGEsCiAgICAgICAgICAgIHJldmlzaW9uOiByZXMucmV2aXNpb24KICAgICAgICAgIH0pOwogICAgICAgICAgaWYgKHdhdGNoICE9PSBmYWxzZSkgewogICAgICAgICAgICBkaXNwYXRjaCgnd2F0Y2gnLCB7CiAgICAgICAgICAgICAgdHlwZTogU0NIRU1BLAogICAgICAgICAgICAgIHJldmlzaW9uOiByZXMucmV2aXNpb24KICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBhbGwgPSBnZXR0ZXJzLmFsbChTQ0hFTUEpOwogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIGFsbCk7CiAgICAgICAgY2FzZSAxMjoKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWU3KTsKICB9KSk7CiAgcmV0dXJuIF9sb2FkU2NoZW1hcy5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwp9CmV4cG9ydCBkZWZhdWx0IHsKICByZXF1ZXN0OiBmdW5jdGlvbiByZXF1ZXN0KCkgewogICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgSW1wbGVtZW50ZWQnKTsKICB9LAogIGxvYWRTY2hlbWFzOiBsb2FkU2NoZW1hcywKICAvLyBMb2FkIGEgcGFnZSBvZiBkYXRhIGZvciBhIGdpdmVuIHR5cGUKICAvLyBVc2VkIGZvciBpbmNyZW1lbnRhbCBsb2FkaW5nIHdoZW4gZW5hYmxlZAogIGxvYWREYXRhUGFnZTogZnVuY3Rpb24gbG9hZERhdGFQYWdlKGN0eCwgX3JlZikgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHR5cGUsIG9wdCwgZ2V0dGVycywgY29tbWl0LCBkaXNwYXRjaCwgbG9hZENvdW50LCBfcmVzJHBhZ2luYXRpb24sIHJlcywgbmV3TG9hZENvdW50LCBfcmVzJHBhZ2luYXRpb24yOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB0eXBlID0gX3JlZi50eXBlLCBvcHQgPSBfcmVmLm9wdDsKICAgICAgICAgICAgZ2V0dGVycyA9IGN0eC5nZXR0ZXJzLCBjb21taXQgPSBjdHguY29tbWl0LCBkaXNwYXRjaCA9IGN0eC5kaXNwYXRjaDsKICAgICAgICAgICAgdHlwZSA9IGdldHRlcnMubm9ybWFsaXplVHlwZSh0eXBlKTsKCiAgICAgICAgICAgIC8vIGlmIHRoZXJlJ3Mgbm8gcmVnaXN0ZXJlZCB0eXBlLCB0aGVuIHJlZ2lzdGVyIGl0IHNvCiAgICAgICAgICAgIC8vIHRoYXQgd2UgZG9uJ3QgaGF2ZSBpc3N1ZXMgb24gJ2xvYWRBZGQnIG11dGF0aW9uCiAgICAgICAgICAgIGlmICghZ2V0dGVycy50eXBlUmVnaXN0ZXJlZCh0eXBlKSkgewogICAgICAgICAgICAgIGNvbW1pdCgncmVnaXN0ZXJUeXBlJywgdHlwZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgbG9hZENvdW50ID0gZ2V0dGVyc1snbG9hZENvdW50ZXInXSh0eXBlKTsKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDU7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA4OwogICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ3JlcXVlc3QnLCB7CiAgICAgICAgICAgICAgb3B0OiBvcHQsCiAgICAgICAgICAgICAgdHlwZTogdHlwZQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgbmV3TG9hZENvdW50ID0gZ2V0dGVyc1snbG9hZENvdW50ZXInXSh0eXBlKTsgLy8gTG9hZCBjb3VudCBjaGFuZ2VkLCBzbyB3ZSBjaGFuZ2VkIHBhZ2Ugb3Igc3RhcnRlZCBhIG5ldyBsb2FkCiAgICAgICAgICAgIC8vIGFmdGVyIHRoaXMgcGFnZSBsb2FkIHdhcyBzdGFydGVkLCBzbyBkb24ndCBjb250aW51ZSB3aXRoIGluY3JlbWVudGFsIGxvYWQKICAgICAgICAgICAgaWYgKCEobG9hZENvdW50ICE9PSBuZXdMb2FkQ291bnQpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY29tbWl0KCdsb2FkQWRkJywgewogICAgICAgICAgICAgIGN0eDogY3R4LAogICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgZGF0YTogcmVzLmRhdGEKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmICgoX3JlcyRwYWdpbmF0aW9uID0gcmVzLnBhZ2luYXRpb24pICE9PSBudWxsICYmIF9yZXMkcGFnaW5hdGlvbiAhPT0gdm9pZCAwICYmIF9yZXMkcGFnaW5hdGlvbi5uZXh0KSB7CiAgICAgICAgICAgICAgZGlzcGF0Y2goJ2xvYWREYXRhUGFnZScsIHsKICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICBvcHQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgb3B0KSwge30sIHsKICAgICAgICAgICAgICAgICAgdXJsOiAoX3JlcyRwYWdpbmF0aW9uMiA9IHJlcy5wYWdpbmF0aW9uKSA9PT0gbnVsbCB8fCBfcmVzJHBhZ2luYXRpb24yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcmVzJHBhZ2luYXRpb24yLm5leHQKICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgLy8gV2UgaGF2ZSBldmVyeXRoaW5nIQogICAgICAgICAgICAgIGlmIChvcHQuaGFzTWFudWFsUmVmcmVzaCkgewogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3Jlc291cmNlLWZldGNoL3VwZGF0ZU1hbnVhbFJlZnJlc2hJc0xvYWRpbmcnLCBmYWxzZSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKG9wdC5uYW1lc3BhY2VkKSB7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldEhhdmVOYW1lc3BhY2UnLCB7CiAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogb3B0Lm5hbWVzcGFjZWQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb21taXQoJ3NldEhhdmVBbGwnLCB7CiAgICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDE2OwogICAgICAgICAgICBfY29udGV4dC50MCA9IF9jb250ZXh0WyJjYXRjaCJdKDUpOwogICAgICAgICAgICBpZiAob3B0Lmhhc01hbnVhbFJlZnJlc2gpIHsKICAgICAgICAgICAgICBkaXNwYXRjaCgncmVzb3VyY2UtZmV0Y2gvdXBkYXRlTWFudWFsUmVmcmVzaElzTG9hZGluZycsIGZhbHNlLCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgUHJvbWlzZS5yZWplY3QoX2NvbnRleHQudDApKTsKICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSwgbnVsbCwgW1s1LCAxNl1dKTsKICAgIH0pKSgpOwogIH0sCiAgZmluZEFsbDogZnVuY3Rpb24gZmluZEFsbChjdHgsIF9yZWYyKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIHR5cGUsIG9wdCwgZ2V0dGVycywgY29tbWl0LCBkaXNwYXRjaCwgcm9vdEdldHRlcnMsIGFyZ3MsIGxvYWQsIGhlYWRlciwgdHlwZU9wdGlvbnMsIHNraXBIYXZlQWxsLCBwYWdlRmV0Y2hPcHRzLCBzdHJlYW1TdGFydGVkLCBvdXQsIHF1ZXVlLCBzdHJlYW1Db2xsZWN0aW9uLCByZXMsIF9hbGwsIF9hcmdzMiwgYWxsOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdHlwZSA9IF9yZWYyLnR5cGUsIG9wdCA9IF9yZWYyLm9wdDsKICAgICAgICAgICAgZ2V0dGVycyA9IGN0eC5nZXR0ZXJzLCBjb21taXQgPSBjdHguY29tbWl0LCBkaXNwYXRjaCA9IGN0eC5kaXNwYXRjaCwgcm9vdEdldHRlcnMgPSBjdHgucm9vdEdldHRlcnM7CiAgICAgICAgICAgIG9wdCA9IG9wdCB8fCB7fTsKICAgICAgICAgICAgdHlwZSA9IGdldHRlcnMubm9ybWFsaXplVHlwZSh0eXBlKTsKICAgICAgICAgICAgaWYgKCFnZXR0ZXJzLnR5cGVSZWdpc3RlcmVkKHR5cGUpKSB7CiAgICAgICAgICAgICAgY29tbWl0KCdyZWdpc3RlclR5cGUnLCB0eXBlKTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLy8gTm8gbmVlZCB0byByZXF1ZXN0IHRoZSByZXNvdXJjZXMgaWYgd2UgaGF2ZSB0aGVtIGFscmVhZHkKICAgICAgICAgICAgaWYgKCEob3B0LmZvcmNlICE9PSB0cnVlICYmIChnZXR0ZXJzWydoYXZlQWxsJ10odHlwZSkgfHwgZ2V0dGVyc1snaGF2ZUFsbE5hbWVzcGFjZSddKHR5cGUsIG9wdC5uYW1lc3BhY2VkKSkpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGFyZ3MgPSB7CiAgICAgICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgICAgICByZXZpc2lvbjogJycsCiAgICAgICAgICAgICAgLy8gd2F0Y2hOYW1lc3BhY2UgLSB1c2VkIHNvbWV0aW1lcyB3aGVuIHdlIGhhdmVuJ3QgZmV0Y2hlZCB0aGUgcmVzdWx0cyBvZiBhIHNpbmdsZSBuYW1lc3BhY2UKICAgICAgICAgICAgICAvLyBuYW1lc3BhY2VkIC0gdXNlZCB3aGVuIHdlIGhhdmUgZmV0Y2hlZCB0aGUgcmVzdWx0IG9mIGEgc2luZ2xlIG5hbWVzcGFjZSAoc2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9yYW5jaGVyL2Rhc2hib2FyZC9wdWxsLzczMjkvZmlsZXMpCiAgICAgICAgICAgICAgbmFtZXNwYWNlOiBvcHQud2F0Y2hOYW1lc3BhY2UgfHwgb3B0Lm5hbWVzcGFjZWQKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKG9wdC53YXRjaCAhPT0gZmFsc2UpIHsKICAgICAgICAgICAgICBkaXNwYXRjaCgnd2F0Y2gnLCBhcmdzKTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgZ2V0dGVycy5hbGwodHlwZSkpOwogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgICBsb2FkID0gb3B0LmxvYWQgPT09IHVuZGVmaW5lZCA/IF9BTEwgOiBvcHQubG9hZDsKICAgICAgICAgICAgaWYgKG9wdC5sb2FkID09PSBmYWxzZSB8fCBvcHQubG9hZCA9PT0gX05PTkUpIHsKICAgICAgICAgICAgICBsb2FkID0gX05PTkU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0LmxvYWQgPT09IF9BTExfSUZfQVVUSEVEKSB7CiAgICAgICAgICAgICAgaGVhZGVyID0gcm9vdEdldHRlcnNbJ2F1dGgvZnJvbUhlYWRlciddOwogICAgICAgICAgICAgIGlmICgiIi5jb25jYXQoaGVhZGVyKSA9PT0gJ3RydWUnIHx8ICIiLmNvbmNhdChoZWFkZXIpID09PSAnbm9uZScpIHsKICAgICAgICAgICAgICAgIGxvYWQgPSBfQUxMOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBsb2FkID0gX01VTFRJOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0eXBlT3B0aW9ucyA9IHJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9vcHRpb25zRm9yJ10odHlwZSk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGaW5kIEFsbDogWyIuY29uY2F0KGN0eC5zdGF0ZS5jb25maWcubmFtZXNwYWNlLCAiXSAiKS5jb25jYXQodHlwZSkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgb3B0ID0gb3B0IHx8IHt9OwogICAgICAgICAgICBvcHQudXJsID0gZ2V0dGVycy51cmxGb3IodHlwZSwgbnVsbCwgb3B0KTsKICAgICAgICAgICAgb3B0LnN0cmVhbSA9IG9wdC5zdHJlYW0gIT09IGZhbHNlICYmIGxvYWQgIT09IF9OT05FOwogICAgICAgICAgICBvcHQuZGVwYWdpbmF0ZSA9IHR5cGVPcHRpb25zID09PSBudWxsIHx8IHR5cGVPcHRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiB0eXBlT3B0aW9ucy5kZXBhZ2luYXRlOwogICAgICAgICAgICBza2lwSGF2ZUFsbCA9IGZhbHNlOyAvLyBpZiBpdCdzIGluY3JlbWVudGFsIGxvYWRpbmcsIHdlIGRvIHR3byBwYXJhbGxlbCByZXF1ZXN0cwogICAgICAgICAgICAvLyBvbiBmb3IgYSBsaW1pdCBvZiAxMDAsIHRvIHF1aWNrbHkgc2hvdyBkYXRhCiAgICAgICAgICAgIC8vIGFub3RoZXIgb25lIHdpdGggMXN0IHBhZ2Ugb2YgdGhlIHN1YnNldCBvZiB0aGUgcmVzb3VyY2Ugd2UgYXJlIGZldGNoaW5nCiAgICAgICAgICAgIC8vIHRoZSBkZWZhdWx0IGlzIDQgcGFnZXMsIGJ1dCBpdCBjYW4gYmUgY2hhbmdlZCBvbiBtaXhpbi9yZXNvdXJjZS1mZXRjaC5qcwogICAgICAgICAgICBpZiAob3B0LmluY3JlbWVudGFsKSB7CiAgICAgICAgICAgICAgY29tbWl0KCdpbmNyZW1lbnRMb2FkQ291bnRlcicsIHR5cGUpOwogICAgICAgICAgICAgIGlmIChvcHQuaGFzTWFudWFsUmVmcmVzaCkgewogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ3Jlc291cmNlLWZldGNoL3VwZGF0ZU1hbnVhbFJlZnJlc2hJc0xvYWRpbmcnLCB0cnVlLCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBwYWdlRmV0Y2hPcHRzID0gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBvcHQpLCB7fSwgewogICAgICAgICAgICAgICAgdXJsOiAiIi5jb25jYXQob3B0LnVybCwgIj9saW1pdD0iKS5jb25jYXQob3B0LmluY3JlbWVudGFsKQogICAgICAgICAgICAgIH0pOyAvLyB0aGlzIGlzIHdoZXJlIHdlICJoaWphY2siIHRoZSBsaW1pdCBmb3IgdGhlIGRpc3BhdGNoKCdyZXF1ZXN0Jykgc29tZSBsaW5lcyBiZWxvdwogICAgICAgICAgICAgIC8vIGFuZCB0aGVyZWZvcmUgaGF2ZSAyIGluaXRpYWwgcmVxdWVzdHMgaW4gcGFyYWxsZWwKICAgICAgICAgICAgICBvcHQudXJsID0gIiIuY29uY2F0KG9wdC51cmwsICI/bGltaXQ9MTAwIik7CiAgICAgICAgICAgICAgc2tpcEhhdmVBbGwgPSB0cnVlOwoKICAgICAgICAgICAgICAvLyBzaW5jZSB3ZSBhcmUgZm9yY2luZyBhIHJlcXVlc3QsIGNsZWFyIHRoZSBoYXZlQWxsCiAgICAgICAgICAgICAgLy8gbmVlZGVkIGZvciB0aGUgcmVzb3VyY2UtZmV0Y2ggbWl4aW4sIG90aGVyd2lzZSB0aGUgaW5jcmVtZW50YWwgaW5kaWNhdG9yCiAgICAgICAgICAgICAgLy8gd29uJ3QgcG9wLXVwIGFnYWluIHdoZW4gbWFudWFsIHJlZnJlc2hpbmcKICAgICAgICAgICAgICBpZiAob3B0LmZvcmNlKSB7CiAgICAgICAgICAgICAgICBjb21taXQoJ2ZvcmdldFR5cGUnLCB0eXBlKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZGlzcGF0Y2goJ2xvYWREYXRhUGFnZScsIHsKICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICBvcHQ6IHBhZ2VGZXRjaE9wdHMKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBzdHJlYW1TdGFydGVkID0gZmFsc2U7CiAgICAgICAgICAgIHF1ZXVlID0gW107CiAgICAgICAgICAgIG9wdC5vbkRhdGEgPSBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgICAgICAgIGlmIChzdHJlYW1TdGFydGVkKSB7CiAgICAgICAgICAgICAgICAvLyBCYXRjaCBsb2FkcyBpbnRvIGdyb3VwcyBvZiAxMCB0byByZWR1Y2UgdnVleCBvdmVyaGVhZAogICAgICAgICAgICAgICAgcXVldWUucHVzaChkYXRhKTsKICAgICAgICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPiAxMCkgewogICAgICAgICAgICAgICAgICB2YXIgdG1wID0gcXVldWU7CiAgICAgICAgICAgICAgICAgIHF1ZXVlID0gW107CiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnbG9hZE11bHRpJywgewogICAgICAgICAgICAgICAgICAgIGN0eDogY3R4LAogICAgICAgICAgICAgICAgICAgIGRhdGE6IHRtcAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgLy8gVGhlIGZpcnN0IGxpbmUgaXMgdGhlIGNvbGxlY3Rpb24gb2JqZWN0IChzYW5zIGBkYXRhYCkKICAgICAgICAgICAgICAgIGNvbW1pdCgnZm9yZ2V0QWxsJywgewogICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIHN0cmVhbVN0YXJ0ZWQgPSB0cnVlOwogICAgICAgICAgICAgICAgc3RyZWFtQ29sbGVjdGlvbiA9IGRhdGE7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDIyOwogICAgICAgICAgICBpZiAoIW9wdC5pbmNyZW1lbnRhbCAmJiBvcHQuaGFzTWFudWFsUmVmcmVzaCkgewogICAgICAgICAgICAgIGRpc3BhdGNoKCdyZXNvdXJjZS1mZXRjaC91cGRhdGVNYW51YWxSZWZyZXNoSXNMb2FkaW5nJywgdHJ1ZSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjY7CiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgncmVxdWVzdCcsIHsKICAgICAgICAgICAgICBvcHQ6IG9wdCwKICAgICAgICAgICAgICB0eXBlOiB0eXBlCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAyNjoKICAgICAgICAgICAgcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgIGlmIChzdHJlYW1TdGFydGVkKSB7CiAgICAgICAgICAgICAgLy8gRmx1c2ggYW55IHJlbWFpbmluZyBlbnRyaWVzIGxlZnQgb3ZlciB0aGF0IGRpZG4ndCBnZXQgbG9hZGVkIGJ5IG9uRGF0YQogICAgICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIGNvbW1pdCgnbG9hZE11bHRpJywgewogICAgICAgICAgICAgICAgICBjdHg6IGN0eCwKICAgICAgICAgICAgICAgICAgZGF0YTogcXVldWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgcXVldWUgPSBbXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgY29tbWl0KCdsb2FkZWRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX2FsbCA9IGdldHRlcnMuYWxsKHR5cGUpOwogICAgICAgICAgICAgIHJlcy5maW5pc2hEZWZlcnJlZChfYWxsKTsKICAgICAgICAgICAgICBvdXQgPSBzdHJlYW1Db2xsZWN0aW9uOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG91dCA9IHJlczsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM0OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgIF9jb250ZXh0Mi5wcmV2ID0gMzA7CiAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgyMik7CiAgICAgICAgICAgIGlmICghb3B0LmluY3JlbWVudGFsICYmIG9wdC5oYXNNYW51YWxSZWZyZXNoKSB7CiAgICAgICAgICAgICAgZGlzcGF0Y2goJ3Jlc291cmNlLWZldGNoL3VwZGF0ZU1hbnVhbFJlZnJlc2hJc0xvYWRpbmcnLCBmYWxzZSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBQcm9taXNlLnJlamVjdChfY29udGV4dDIudDApKTsKICAgICAgICAgIGNhc2UgMzQ6CiAgICAgICAgICAgIGlmICghKGxvYWQgPT09IF9OT05FKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFvcHQuaW5jcmVtZW50YWwgJiYgb3B0Lmhhc01hbnVhbFJlZnJlc2gpIHsKICAgICAgICAgICAgICBkaXNwYXRjaCgncmVzb3VyY2UtZmV0Y2gvdXBkYXRlTWFudWFsUmVmcmVzaElzTG9hZGluZycsIGZhbHNlLCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIsIG91dCk7CiAgICAgICAgICBjYXNlIDM5OgogICAgICAgICAgICBpZiAob3V0LmRhdGEpIHsKICAgICAgICAgICAgICBpZiAobG9hZCA9PT0gX01VTFRJKSB7CiAgICAgICAgICAgICAgICAvLyBUaGlzIGhhcyB0aGUgZWZmZWN0IG9mIGFkZGluZyB0aGUgcmVzcG9uc2UgdG8gdGhlIHN0b3JlLAogICAgICAgICAgICAgICAgLy8gd2l0aG91dCByZXBsYWNpbmcgYWxsIHRoZSBleGlzdGluZyBjb250ZW50IGZvciB0aGF0IHR5cGUsCiAgICAgICAgICAgICAgICAvLyBhbmQgd2l0aG91dCBtYXJraW5nIHRoYXQgdHlwZSBhcyBoYXZpbmcgJ2FsbCAnbG9hZGVkLgogICAgICAgICAgICAgICAgLy8KICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdXNlZCBlLmcuIHRvIGxvYWQgYSBwYXJ0aWFsIGxpc3Qgb2Ygc2V0dGluZ3MgYmVmb3JlIGxvZ2luCiAgICAgICAgICAgICAgICAvLyB3aGlsZSBzdGlsbCBrbm93aW5nIHdlIG5lZWQgdG8gbG9hZCB0aGUgZnVsbCBsaXN0IGxhdGVyLgogICAgICAgICAgICAgICAgY29tbWl0KCdsb2FkTXVsdGknLCB7CiAgICAgICAgICAgICAgICAgIGN0eDogY3R4LAogICAgICAgICAgICAgICAgICBkYXRhOiBvdXQuZGF0YQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChsb2FkID09PSBfTUVSR0UpIHsKICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgbGlrZSBsb2FkTXVsdGkgKHVwZGF0ZXMgZXhpc3RpbmcgZW50cmllcykgYnV0IGFsc28gcmVtb3ZlcyBlbnRyaWVzIHRoYXQgbm8gbG9uZ2VyIGV4aXN0CiAgICAgICAgICAgICAgICAvLyBUaGlzIGFsbG93cyBjaGFuZ2VzIHRvIGV4aXN0aW5nIHJlc291cmNlcyB0byBiZSByZWZsZWN0ZWQgaW4gcGxhY2UgaW4gdGhlIFVJCiAgICAgICAgICAgICAgICAvLyAobm9ybWFsbHkgbm90IG5lZWRlZCBhcyBSYW5jaGVyIHVwZGF0ZXMgY29tZSBvdmVyIHNvY2tldCBhbmQgYXJlIGhhbmRsZWQgaW5kaXZpZHVhbGx5KQogICAgICAgICAgICAgICAgY29tbWl0KCdsb2FkTWVyZ2UnLCB7CiAgICAgICAgICAgICAgICAgIGN0eDogY3R4LAogICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgICBkYXRhOiBvdXQuZGF0YSwKICAgICAgICAgICAgICAgICAgZXhpc3Rpbmc6IHRydWUKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBjb21taXQoJ2xvYWRBbGwnLCB7CiAgICAgICAgICAgICAgICAgIGN0eDogY3R4LAogICAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgICBkYXRhOiBvdXQuZGF0YSwKICAgICAgICAgICAgICAgICAgcmV2aXNpb246IG91dC5yZXZpc2lvbiwKICAgICAgICAgICAgICAgICAgc2tpcEhhdmVBbGw6IHNraXBIYXZlQWxsLAogICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG9wdC5uYW1lc3BhY2VkCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgNDA6CiAgICAgICAgICAgIC8vIFRvRG86IFNNIGlmIHdlIHN0YXJ0IGEgImJpZ2dlciIgd2F0Y2ggKHN1Y2ggYXMgd2F0Y2ggd2l0aG91dCBhIG5hbWVzcGFjZSB2cyBhIHdhdGNoIHdpdGggYSBuYW1lc3BhY2UpLCB3ZSBzaG91bGQgc3RvcCB0aGUgc3RvcCB0aGUgInNtYWxsZXIiIHdhdGNoIHNvIHdlIGRvbid0IGhhdmUgZHVwbGljYXRlIGV2ZW50cyBjb21pbmcgYmFjawogICAgICAgICAgICBpZiAob3B0LndhdGNoICE9PSBmYWxzZSkgewogICAgICAgICAgICAgIF9hcmdzMiA9IHsKICAgICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgICByZXZpc2lvbjogb3V0LnJldmlzaW9uLAogICAgICAgICAgICAgICAgbmFtZXNwYWNlOiBvcHQud2F0Y2hOYW1lc3BhY2UgfHwgb3B0Lm5hbWVzcGFjZWQsCiAgICAgICAgICAgICAgICAvLyBpdCBjb3VsZCBiZSBlaXRoZXIgYXBwYXJlbnRseQogICAgICAgICAgICAgICAgLy8gVG9EbzogU00gbmFtZXNwYWNlZCBpcyBzb21ldGltZXMgYSBib29sZWFuIGFuZCBzb21ldGltZXMgYSBzdHJpbmcsIEkgZG9uJ3Qgc2VlIGl0IGFzIGVzcGVjaWFsbHkgYnJva2VuIGJ1dCB3ZSBzaG91bGQgcmVmYWN0b3IgdGhhdCBpbiB0aGUgZnV0dXJlCiAgICAgICAgICAgICAgICBmb3JjZTogb3B0LmZvcmNlV2F0Y2ggPT09IHRydWUKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGRpc3BhdGNoKCd3YXRjaCcsIF9hcmdzMik7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgYWxsID0gZ2V0dGVycy5hbGwodHlwZSk7CiAgICAgICAgICAgIGlmICghb3B0LmluY3JlbWVudGFsICYmIG9wdC5oYXNNYW51YWxSZWZyZXNoKSB7CiAgICAgICAgICAgICAgZGlzcGF0Y2goJ3Jlc291cmNlLWZldGNoL3VwZGF0ZU1hbnVhbFJlZnJlc2hJc0xvYWRpbmcnLCBmYWxzZSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9nYXJiYWdlQ29sbGVjdC5nY1VwZGF0ZUxhc3RBY2Nlc3NlZChjdHgsIHR5cGUpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIiwgYWxsKTsKICAgICAgICAgIGNhc2UgNDU6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyLCBudWxsLCBbWzIyLCAzMF1dKTsKICAgIH0pKSgpOwogIH0sCiAgZmluZE1hdGNoaW5nOiBmdW5jdGlvbiBmaW5kTWF0Y2hpbmcoY3R4LCBfcmVmMykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciB0eXBlLCBzZWxlY3Rvciwgb3B0LCBuYW1lc3BhY2UsIGdldHRlcnMsIGNvbW1pdCwgZGlzcGF0Y2gsIHJvb3RHZXR0ZXJzLCB0eXBlT3B0aW9ucywgcmVzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgdHlwZSA9IF9yZWYzLnR5cGUsIHNlbGVjdG9yID0gX3JlZjMuc2VsZWN0b3IsIG9wdCA9IF9yZWYzLm9wdCwgbmFtZXNwYWNlID0gX3JlZjMubmFtZXNwYWNlOwogICAgICAgICAgICBnZXR0ZXJzID0gY3R4LmdldHRlcnMsIGNvbW1pdCA9IGN0eC5jb21taXQsIGRpc3BhdGNoID0gY3R4LmRpc3BhdGNoLCByb290R2V0dGVycyA9IGN0eC5yb290R2V0dGVyczsKICAgICAgICAgICAgb3B0ID0gb3B0IHx8IHt9OwogICAgICAgICAgICBjb25zb2xlLmxvZygiRmluZCBNYXRjaGluZzogWyIuY29uY2F0KGN0eC5zdGF0ZS5jb25maWcubmFtZXNwYWNlLCAiXSAiKS5jb25jYXQodHlwZSksIHNlbGVjdG9yKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgIHR5cGUgPSBnZXR0ZXJzLm5vcm1hbGl6ZVR5cGUodHlwZSk7CiAgICAgICAgICAgIGlmICghZ2V0dGVycy50eXBlUmVnaXN0ZXJlZCh0eXBlKSkgewogICAgICAgICAgICAgIGNvbW1pdCgncmVnaXN0ZXJUeXBlJywgdHlwZSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCEob3B0LmZvcmNlICE9PSB0cnVlICYmIGdldHRlcnNbJ2hhdmVTZWxlY3RvciddKHR5cGUsIHNlbGVjdG9yKSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGdldHRlcnMubWF0Y2hpbmcodHlwZSwgc2VsZWN0b3IsIG5hbWVzcGFjZSkpOwogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICB0eXBlT3B0aW9ucyA9IHJvb3RHZXR0ZXJzWyd0eXBlLW1hcC9vcHRpb25zRm9yJ10odHlwZSk7CiAgICAgICAgICAgIG9wdCA9IG9wdCB8fCB7fTsKICAgICAgICAgICAgb3B0LmZpbHRlciA9IG9wdC5maWx0ZXIgfHwge307CiAgICAgICAgICAgIG9wdC5maWx0ZXJbJ2xhYmVsU2VsZWN0b3InXSA9IHNlbGVjdG9yOwogICAgICAgICAgICBvcHQudXJsID0gZ2V0dGVycy51cmxGb3IodHlwZSwgbnVsbCwgb3B0KTsKICAgICAgICAgICAgb3B0LmRlcGFnaW5hdGUgPSB0eXBlT3B0aW9ucyA9PT0gbnVsbCB8fCB0eXBlT3B0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogdHlwZU9wdGlvbnMuZGVwYWdpbmF0ZTsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxNjsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdyZXF1ZXN0JywgewogICAgICAgICAgICAgIG9wdDogb3B0LAogICAgICAgICAgICAgIHR5cGU6IHR5cGUKICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICByZXMgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgaWYgKCEob3B0LmxvYWQgPT09IGZhbHNlKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTk7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIHJlcy5kYXRhKTsKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIGNvbW1pdCgnbG9hZFNlbGVjdG9yJywgewogICAgICAgICAgICAgIGN0eDogY3R4LAogICAgICAgICAgICAgIHR5cGU6IHR5cGUsCiAgICAgICAgICAgICAgZW50cmllczogcmVzLmRhdGEsCiAgICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yLAogICAgICAgICAgICAgIHJldmlzaW9uOiByZXMucmV2aXNpb24KICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGlmIChvcHQud2F0Y2ggIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgZGlzcGF0Y2goJ3dhdGNoJywgewogICAgICAgICAgICAgICAgdHlwZTogdHlwZSwKICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvciwKICAgICAgICAgICAgICAgIHJldmlzaW9uOiByZXMucmV2aXNpb24sCiAgICAgICAgICAgICAgICBmb3JjZTogb3B0LmZvcmNlV2F0Y2ggPT09IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfZ2FyYmFnZUNvbGxlY3QuZ2NVcGRhdGVMYXN0QWNjZXNzZWQoY3R4LCB0eXBlKTsKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5hYnJ1cHQoInJldHVybiIsIGdldHRlcnMubWF0Y2hpbmcodHlwZSwgc2VsZWN0b3IsIG5hbWVzcGFjZSkpOwogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMpOwogICAgfSkpKCk7CiAgfSwKICAvLyBvcHQ6CiAgLy8gIGZpbHRlcjogRmlsdGVyIGJ5IGZpZWxkcywgZS5nLiB7ZmllbGQ6IHZhbHVlLCBhbm90aGVyRmllbGQ6IGFub3RoZXJWYWx1ZX0gKGRlZmF1bHQ6IG5vbmUpCiAgLy8gIGxpbWl0OiBOdW1iZXIgb2YgcmVjb3JkcyB0byByZXR1cm4gcGVyIHBhZ2UgKGRlZmF1bHQ6IDEwMDApCiAgLy8gIHNvcnRCeTogU29ydCBieSBmaWVsZAogIC8vICBzb3J0T3JkZXI6IGFzYyBvciBkZXNjCiAgLy8gIHVybDogVXNlIHRoaXMgc3BlY2lmaWMgVVJMIGluc3RlYWQgb2YgbG9va2luZyB1cCB0aGUgVVJMIGZvciB0aGUgdHlwZS9pZC4gIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgYm9vdHN0cmFwcGluZyBzY2hlbWFzIG9uIHN0YXJ0dXAuCiAgLy8gIEBUT0RPIGRlcGFnaW5hdGU6IElmIHRoZSByZXNwb25zZSBpcyBwYWdpbmF0ZWQsIHJldHJpZXZlIGFsbCB0aGUgcGFnZXMuIChkZWZhdWx0OiB0cnVlKQogIGZpbmQ6IGZ1bmN0aW9uIGZpbmQoY3R4LCBfcmVmNCkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgIHZhciB0eXBlLCBpZCwgb3B0LCBnZXR0ZXJzLCBkaXNwYXRjaCwgb3V0LCByZXMsIF9yZXMkbWV0YWRhdGEsIHdhdGNoTXNnLCBpZHg7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNCQoX2NvbnRleHQ0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICB0eXBlID0gX3JlZjQudHlwZSwgaWQgPSBfcmVmNC5pZCwgb3B0ID0gX3JlZjQub3B0OwogICAgICAgICAgICBpZiAoaWQpIHsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29uc29sZS5lcnJvcignQXR0ZW1wdGluZyB0byBmaW5kIGEgcmVzb3VyY2Ugd2l0aCBubyBpZCcsIHR5cGUsIGlkKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgZ2V0dGVycyA9IGN0eC5nZXR0ZXJzLCBkaXNwYXRjaCA9IGN0eC5kaXNwYXRjaDsKICAgICAgICAgICAgb3B0ID0gb3B0IHx8IHt9OwogICAgICAgICAgICB0eXBlID0gbm9ybWFsaXplVHlwZSh0eXBlKTsKICAgICAgICAgICAgY29uc29sZS5sb2coIkZpbmQ6IFsiLmNvbmNhdChjdHguc3RhdGUuY29uZmlnLm5hbWVzcGFjZSwgIl0gIikuY29uY2F0KHR5cGUsICIgIikuY29uY2F0KGlkKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICBpZiAoIShvcHQuZm9yY2UgIT09IHRydWUpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBvdXQgPSBnZXR0ZXJzLmJ5SWQodHlwZSwgaWQpOwogICAgICAgICAgICBpZiAoIW91dCkgewogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5hYnJ1cHQoInJldHVybiIsIG91dCk7CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICBvcHQgPSBvcHQgfHwge307CiAgICAgICAgICAgIG9wdC51cmwgPSBnZXR0ZXJzLnVybEZvcih0eXBlLCBpZCwgb3B0KTsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxNjsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdyZXF1ZXN0JywgewogICAgICAgICAgICAgIG9wdDogb3B0LAogICAgICAgICAgICAgIHR5cGU6IHR5cGUKICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICByZXMgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAxOTsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdsb2FkJywgewogICAgICAgICAgICAgIGRhdGE6IHJlcwogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgMTk6CiAgICAgICAgICAgIGlmIChvcHQud2F0Y2ggIT09IGZhbHNlKSB7CiAgICAgICAgICAgICAgd2F0Y2hNc2cgPSB7CiAgICAgICAgICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgICAgICAgICAgaWQ6IGlkLAogICAgICAgICAgICAgICAgcmV2aXNpb246IHJlcyA9PT0gbnVsbCB8fCByZXMgPT09IHZvaWQgMCB8fCAoX3JlcyRtZXRhZGF0YSA9IHJlcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3JlcyRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcyRtZXRhZGF0YS5yZXNvdXJjZVZlcnNpb24sCiAgICAgICAgICAgICAgICBmb3JjZTogb3B0LmZvcmNlV2F0Y2ggPT09IHRydWUKICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgIGlkeCA9IGlkLmluZGV4T2YoJy8nKTsKICAgICAgICAgICAgICBpZiAoaWR4ID4gMCkgewogICAgICAgICAgICAgICAgd2F0Y2hNc2cubmFtZXNwYWNlID0gaWQuc3Vic3RyKDAsIGlkeCk7CiAgICAgICAgICAgICAgICB3YXRjaE1zZy5pZCA9IGlkLnN1YnN0cihpZHggKyAxKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgZGlzcGF0Y2goJ3dhdGNoJywgd2F0Y2hNc2cpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG91dCA9IGdldHRlcnMuYnlJZCh0eXBlLCBpZCk7CiAgICAgICAgICAgIF9nYXJiYWdlQ29sbGVjdC5nY1VwZGF0ZUxhc3RBY2Nlc3NlZChjdHgsIHR5cGUpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgb3V0KTsKICAgICAgICAgIGNhc2UgMjM6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWU0KTsKICAgIH0pKSgpOwogIH0sCiAgbG9hZDogZnVuY3Rpb24gbG9hZChjdHgsIF9yZWY1KSB7CiAgICB2YXIgZGF0YSA9IF9yZWY1LmRhdGEsCiAgICAgIGV4aXN0aW5nID0gX3JlZjUuZXhpc3Rpbmc7CiAgICB2YXIgZ2V0dGVycyA9IGN0eC5nZXR0ZXJzLAogICAgICBjb21taXQgPSBjdHguY29tbWl0OwogICAgdmFyIHR5cGUgPSBub3JtYWxpemVUeXBlKGRhdGEudHlwZSk7CiAgICBpZiAoIWdldHRlcnMudHlwZVJlZ2lzdGVyZWQodHlwZSkpIHsKICAgICAgY29tbWl0KCdyZWdpc3RlclR5cGUnLCB0eXBlKTsKICAgIH0KICAgIGlmIChkYXRhLmJhc2VUeXBlICYmIGRhdGEuYmFzZVR5cGUgIT09IGRhdGEudHlwZSkgewogICAgICB0eXBlID0gbm9ybWFsaXplVHlwZShkYXRhLmJhc2VUeXBlKTsKICAgICAgaWYgKCFnZXR0ZXJzLnR5cGVSZWdpc3RlcmVkKHR5cGUpKSB7CiAgICAgICAgY29tbWl0KCdyZWdpc3RlclR5cGUnLCB0eXBlKTsKICAgICAgfQogICAgfQogICAgLy8gSW5qZWN0IHNwZWNpYWwgZmllbGRzIGZvciBpbmRleGluZyBzY2hlbWFzCiAgICBpZiAodHlwZSA9PT0gU0NIRU1BKSB7CiAgICAgIGFkZFNjaGVtYUluZGV4RmllbGRzKGRhdGEpOwogICAgfQogICAgdmFyIGtleUZpZWxkID0gZ2V0dGVycy5rZXlGaWVsZEZvclR5cGUodHlwZSk7CiAgICB2YXIgaWQgPSAoZGF0YSA9PT0gbnVsbCB8fCBkYXRhID09PSB2b2lkIDAgPyB2b2lkIDAgOiBkYXRhW2tleUZpZWxkXSkgfHwgKGV4aXN0aW5nID09PSBudWxsIHx8IGV4aXN0aW5nID09PSB2b2lkIDAgPyB2b2lkIDAgOiBleGlzdGluZ1trZXlGaWVsZF0pOwogICAgaWYgKCFpZCkgewogICAgICBjb25zb2xlLndhcm4oJ0F0dGVtcHRpbmcgdG8gbG9hZCBhIHJlc291cmNlIHdpdGggbm8gaWQnLCBkYXRhLCBleGlzdGluZyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQoKICAgICAgcmV0dXJuOwogICAgfQogICAgY29tbWl0KCdsb2FkJywgewogICAgICBjdHg6IGN0eCwKICAgICAgZGF0YTogZGF0YSwKICAgICAgZXhpc3Rpbmc6IGV4aXN0aW5nCiAgICB9KTsKICAgIGlmICh0eXBlID09PSBTQ0hFTUEpIHsKICAgICAgY29tbWl0KCd0eXBlLW1hcC9zY2hlbWFDaGFuZ2VkJywgbnVsbCwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gZ2V0dGVyc1snYnlJZCddKHR5cGUsIGlkKTsKICB9LAogIGxvYWRNdWx0aTogZnVuY3Rpb24gbG9hZE11bHRpKGN0eCwgZGF0YSkgewogICAgdmFyIGNvbW1pdCA9IGN0eC5jb21taXQ7CiAgICBjb21taXQoJ2xvYWRNdWx0aScsIHsKICAgICAgZGF0YTogZGF0YSwKICAgICAgY3R4OiBjdHgKICAgIH0pOwogIH0sCiAgYmF0Y2hDaGFuZ2VzOiBmdW5jdGlvbiBiYXRjaENoYW5nZXMoY3R4LCBiYXRjaCkgewogICAgdmFyIGNvbW1pdCA9IGN0eC5jb21taXQ7CiAgICBjb21taXQoJ2JhdGNoQ2hhbmdlcycsIHsKICAgICAgY3R4OiBjdHgsCiAgICAgIGJhdGNoOiBiYXRjaAogICAgfSk7CiAgfSwKICBsb2FkQWxsOiBmdW5jdGlvbiBsb2FkQWxsKGN0eCwgX3JlZjYpIHsKICAgIHZhciB0eXBlID0gX3JlZjYudHlwZSwKICAgICAgZGF0YSA9IF9yZWY2LmRhdGE7CiAgICB2YXIgY29tbWl0ID0gY3R4LmNvbW1pdDsKICAgIGNvbW1pdCgnbG9hZEFsbCcsIHsKICAgICAgY3R4OiBjdHgsCiAgICAgIHR5cGU6IHR5cGUsCiAgICAgIGRhdGE6IGRhdGEKICAgIH0pOwogIH0sCiAgY3JlYXRlOiBmdW5jdGlvbiBjcmVhdGUoY3R4LCBkYXRhKSB7CiAgICByZXR1cm4gY2xhc3NpZnkoY3R4LCBkYXRhKTsKICB9LAogIGNyZWF0ZU1hbnk6IGZ1bmN0aW9uIGNyZWF0ZU1hbnkoY3R4LCBkYXRhKSB7CiAgICByZXR1cm4gZGF0YS5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgcmV0dXJuIGNsYXNzaWZ5KGN0eCwgZCk7CiAgICB9KTsKICB9LAogIGNyZWF0ZVBvcHVsYXRlZDogZnVuY3Rpb24gY3JlYXRlUG9wdWxhdGVkKGN0eCwgdXNlckRhdGEpIHsKICAgIHZhciBkYXRhID0gY3R4LmdldHRlcnNbJ2RlZmF1bHRGb3InXSh1c2VyRGF0YS50eXBlKTsKICAgIG1lcmdlKGRhdGEsIHVzZXJEYXRhKTsKICAgIHJldHVybiBjbGFzc2lmeShjdHgsIGRhdGEpOwogIH0sCiAgY2xvbmU6IGZ1bmN0aW9uIGNsb25lKGN0eCkgewogICAgdmFyIF9yZWY3ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fSwKICAgICAgcmVzb3VyY2UgPSBfcmVmNy5yZXNvdXJjZTsKICAgIHJldHVybiBjbGFzc2lmeShjdHgsIHJlc291cmNlLnRvSlNPTigpLCB0cnVlKTsKICB9LAogIC8vIEZvcmdldCBhIHR5cGUgaW4gdGhlIHN0b3JlCiAgLy8gUmVtb3ZlIGFsbCBlbnRyaWVzIGZvciB0aGF0IHR5cGUgYW5kIHN0b3Agd2F0Y2hpbmcgaXQKICBmb3JnZXRUeXBlOiBmdW5jdGlvbiBmb3JnZXRUeXBlKF9yZWY4LCB0eXBlKSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjguY29tbWl0LAogICAgICBkaXNwYXRjaCA9IF9yZWY4LmRpc3BhdGNoLAogICAgICBzdGF0ZSA9IF9yZWY4LnN0YXRlOwogICAgc3RhdGUuc3RhcnRlZC5maWx0ZXIoZnVuY3Rpb24gKGVudHJ5KSB7CiAgICAgIHJldHVybiBlbnRyeS50eXBlID09PSB0eXBlOwogICAgfSkuZm9yRWFjaChmdW5jdGlvbiAoZW50cnkpIHsKICAgICAgcmV0dXJuIGRpc3BhdGNoKCd1bndhdGNoJywgZW50cnkpOwogICAgfSk7CiAgICBjb21taXQoJ2ZvcmdldFR5cGUnLCB0eXBlKTsKICB9LAogIHByb21wdFJlbW92ZTogZnVuY3Rpb24gcHJvbXB0UmVtb3ZlKF9yZWY5LCByZXNvdXJjZXMpIHsKICAgIHZhciBjb21taXQgPSBfcmVmOS5jb21taXQsCiAgICAgIHN0YXRlID0gX3JlZjkuc3RhdGU7CiAgICBjb21taXQoJ2FjdGlvbi1tZW51L3RvZ2dsZVByb21wdFJlbW92ZScsIHJlc291cmNlcywgewogICAgICByb290OiB0cnVlCiAgICB9KTsKICB9LAogIHByb21wdE1vZGFsOiBmdW5jdGlvbiBwcm9tcHRNb2RhbChfcmVmMTAsIGRhdGEpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMTAuY29tbWl0LAogICAgICBzdGF0ZSA9IF9yZWYxMC5zdGF0ZTsKICAgIGNvbW1pdCgnYWN0aW9uLW1lbnUvdG9nZ2xlUHJvbXB0TW9kYWwnLCBkYXRhLCB7CiAgICAgIHJvb3Q6IHRydWUKICAgIH0pOwogIH0sCiAgcmVzb3VyY2VBY3Rpb246IGZ1bmN0aW9uIHJlc291cmNlQWN0aW9uKF9yZWYxMSwgX3JlZjEyKSB7CiAgICB2YXIgZ2V0dGVycyA9IF9yZWYxMS5nZXR0ZXJzLAogICAgICBkaXNwYXRjaCA9IF9yZWYxMS5kaXNwYXRjaDsKICAgIHZhciByZXNvdXJjZSA9IF9yZWYxMi5yZXNvdXJjZSwKICAgICAgYWN0aW9uTmFtZSA9IF9yZWYxMi5hY3Rpb25OYW1lLAogICAgICBib2R5ID0gX3JlZjEyLmJvZHksCiAgICAgIG9wdCA9IF9yZWYxMi5vcHQ7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBJbXBsZW1lbnRlZCcpOwogIH0sCiAgY29sbGVjdGlvbkFjdGlvbjogZnVuY3Rpb24gY29sbGVjdGlvbkFjdGlvbihfcmVmMTMsIF9yZWYxNCkgewogICAgdmFyIGdldHRlcnMgPSBfcmVmMTMuZ2V0dGVycywKICAgICAgZGlzcGF0Y2ggPSBfcmVmMTMuZGlzcGF0Y2g7CiAgICB2YXIgdHlwZSA9IF9yZWYxNC50eXBlLAogICAgICBhY3Rpb25OYW1lID0gX3JlZjE0LmFjdGlvbk5hbWUsCiAgICAgIGJvZHkgPSBfcmVmMTQuYm9keSwKICAgICAgb3B0ID0gX3JlZjE0Lm9wdDsKICAgIHRocm93IG5ldyBFcnJvcignTm90IEltcGxlbWVudGVkJyk7CiAgfSwKICBjbGVhbkZvck5ldzogZnVuY3Rpb24gY2xlYW5Gb3JOZXcoY3R4LCByZXNvdXJjZSkgewogICAgdGhyb3cgbmV3IEVycm9yKCdOb3QgSW1wbGVtZW50ZWQnKTsKICB9LAogIGNyZWF0ZU5hbWVzcGFjZTogZnVuY3Rpb24gY3JlYXRlTmFtZXNwYWNlKGN0eCwgcmVzb3VyY2UpIHsKICAgIHRocm93IG5ldyBFcnJvcignTm90IEltcGxlbWVudGVkJyk7CiAgfSwKICBjbGVhbkZvckRpZmY6IGZ1bmN0aW9uIGNsZWFuRm9yRGlmZihjdHgsIHJlc291cmNlKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBJbXBsZW1lbnRlZCcpOwogIH0sCiAgLy8gQ2xlYW4gYSByZXNvdXJjZSBmb3IgdGhlIFJlc291cmNlRGV0YWlsIHBhZ2UKICAvLyBUaGlzIGNhbiBlbnN1cmUgY29tbW9uLCByZXF1aXJlZCBwcm9wZXJ0aWVzIGV4aXN0cyB0aGF0IG1pZ2h0IGhhdmUgYmVlbiByZW1vdmVkCiAgY2xlYW5Gb3JEZXRhaWw6IGZ1bmN0aW9uIGNsZWFuRm9yRGV0YWlsKGN0eCwgcmVzb3VyY2UpIHsKICAgIHJldHVybiByZXNvdXJjZTsKICB9LAogIGNsZWFuRm9yRG93bmxvYWQ6IGZ1bmN0aW9uIGNsZWFuRm9yRG93bmxvYWQoY3R4LCByZXNvdXJjZSkgewogICAgcmV0dXJuIHJlc291cmNlOwogIH0sCiAgLy8gV2FpdCBmb3IgYSBzY2hlbWEgdGhhdCBpcyBleHBlY3RlZCB0byBleGlzdCB0aGF0IG1heSBub3QgaGF2ZSBiZWVuIGxvYWRlZCB5ZXQgKGZvciBpbnN0YW5jZSB3aGVuIGxvYWRDbHVzdGVyIGlzIHN0aWxsIHJ1bm5pbmcpLgogIHdhaXRGb3JTY2hlbWE6IGZ1bmN0aW9uIHdhaXRGb3JTY2hlbWEoX3JlZjE1LCBfcmVmMTYpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICB2YXIgZ2V0dGVycywgZGlzcGF0Y2gsIHR5cGUsIHRyaWVzLCBzY2hlbWE7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNSQoX2NvbnRleHQ1KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBnZXR0ZXJzID0gX3JlZjE1LmdldHRlcnMsIGRpc3BhdGNoID0gX3JlZjE1LmRpc3BhdGNoOwogICAgICAgICAgICB0eXBlID0gX3JlZjE2LnR5cGU7CiAgICAgICAgICAgIHRyaWVzID0gU0NIRU1BX0NIRUNLX1JFVFJJRVM7CiAgICAgICAgICAgIHNjaGVtYSA9IG51bGw7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGlmICghKCFzY2hlbWEgJiYgdHJpZXMgPiAwKSkgewogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2NoZW1hID0gZ2V0dGVyc1snc2NoZW1hRm9yJ10odHlwZSk7CiAgICAgICAgICAgIGlmIChzY2hlbWEpIHsKICAgICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0cmllcyA9PT0gU0NIRU1BX0NIRUNLX1JFVFJZX0xPRykgewogICAgICAgICAgICAgIGNvbnNvbGUud2FybigiU2NoZW1hIGZvciAiLmNvbmNhdCh0eXBlLCAiIG5vdCBhdmFpbGFibGUuLi4gcmV0cnlpbmcuLi4iKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgICAgICAgIHJldHVybiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMDApOwogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgIHRyaWVzLS07CiAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICBfY29udGV4dDUubmV4dCA9IDQ7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxMzoKICAgICAgICAgICAgaWYgKCEodHJpZXMgPT09IDApKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBSYW4gb3V0IG9mIHRyaWVzIC0gZmV0Y2ggdGhlIHNjaGVtYXMgYWdhaW4KICAgICAgICAgICAgY29uc29sZS53YXJuKCJTY2hlbWEgZm9yICIuY29uY2F0KHR5cGUsICIgc3RpbGwgdW5hdmFpbGFibGUuLi4gbG9hZGluZyBzY2hlbWFzIGFnYWluLi4uIikpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNzsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdsb2FkU2NoZW1hcycsIHRydWUpOwogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTUpOwogICAgfSkpKCk7CiAgfSwKICBpbmNyZW1lbnRMb2FkQ291bnRlcjogZnVuY3Rpb24gaW5jcmVtZW50TG9hZENvdW50ZXIoX3JlZjE3LCByZXNvdXJjZSkgewogICAgdmFyIGNvbW1pdCA9IF9yZWYxNy5jb21taXQ7CiAgICBjb21taXQoJ2luY3JlbWVudExvYWRDb3VudGVyJywgcmVzb3VyY2UpOwogIH0sCiAgZ2FyYmFnZUNvbGxlY3Q6IGZ1bmN0aW9uIGdhcmJhZ2VDb2xsZWN0KGN0eCwgaWdub3JlVHlwZXMpIHsKICAgIHJldHVybiBfZ2FyYmFnZUNvbGxlY3QuZ2FyYmFnZUNvbGxlY3QoY3R4LCBpZ25vcmVUeXBlcyk7CiAgfSwKICBnY1Jlc2V0U3RvcmU6IGZ1bmN0aW9uIGdjUmVzZXRTdG9yZShfcmVmMTgpIHsKICAgIHZhciBzdGF0ZSA9IF9yZWYxOC5zdGF0ZTsKICAgIF9nYXJiYWdlQ29sbGVjdC5nY1Jlc2V0U3RvcmUoc3RhdGUpOwogIH0KfTs="},{"version":3,"names":["merge","SCHEMA","SPOOFED_API_PREFIX","SPOOFED_PREFIX","createYaml","classify","normalizeType","garbageCollect","addSchemaIndexFields","_ALL","_MERGE","_MULTI","_ALL_IF_AUTHED","_NONE","SCHEMA_CHECK_RETRIES","SCHEMA_CHECK_RETRY_LOG","handleSpoofedRequest","_x","_x2","_x3","_x4","_handleSpoofedRequest","apply","arguments","_asyncToGenerator","regeneratorRuntime","mark","_callee6","rootGetters","schemaStore","opt","product","_opt$url$split","_opt$url$split2","empty","scheme","type","rest","id","isApi","typemapGetter","schemas","instance","data","wrap","_callee6$","_context6","prev","next","url","includes","split","_toArray","slice","join","concat","sent","abrupt","stop","loadSchemas","_x5","_loadSchemas","_callee7","ctx","watch","getters","dispatch","commit","res","spoofedTypes","all","_args8","_callee7$","_context7","length","undefined","load","Array","isArray","forEach","revision","request","Error","loadDataPage","_ref","_callee","loadCount","_res$pagination","newLoadCount","_res$pagination2","_callee$","_context","typeRegistered","pagination","_objectSpread","hasManualRefresh","root","namespaced","namespace","t0","Promise","reject","findAll","_ref2","_callee2","args","header","typeOptions","skipHaveAll","pageFetchOpts","streamStarted","out","queue","streamCollection","_all","_args2","_callee2$","_context2","force","watchNamespace","console","log","state","config","urlFor","stream","depaginate","incremental","onData","push","tmp","finishDeferred","existing","forceWatch","gcUpdateLastAccessed","findMatching","_ref3","_callee3","selector","_callee3$","_context3","matching","filter","entries","find","_ref4","_callee4","_res$metadata","watchMsg","idx","_callee4$","_context4","error","byId","metadata","resourceVersion","indexOf","substr","_ref5","baseType","keyField","keyFieldForType","warn","loadMulti","batchChanges","batch","loadAll","_ref6","create","createMany","map","d","createPopulated","userData","clone","_ref7","resource","toJSON","forgetType","_ref8","started","entry","promptRemove","_ref9","resources","promptModal","_ref10","resourceAction","_ref11","_ref12","actionName","body","collectionAction","_ref13","_ref14","cleanForNew","createNamespace","cleanForDiff","cleanForDetail","cleanForDownload","waitForSchema","_ref15","_ref16","_callee5","tries","schema","_callee5$","_context5","resolve","setTimeout","incrementLoadCounter","_ref17","ignoreTypes","gcResetStore","_ref18"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/dashboard-store/actions.js"],"sourcesContent":["import merge from 'lodash/merge';\n\nimport { SCHEMA } from '@shell/config/types';\nimport { SPOOFED_API_PREFIX, SPOOFED_PREFIX } from '@shell/store/type-map';\nimport { createYaml } from '@shell/utils/create-yaml';\nimport { classify } from '@shell/plugins/dashboard-store/classify';\nimport { normalizeType } from './normalize';\nimport garbageCollect from '@shell/utils/gc/gc';\nimport { addSchemaIndexFields } from '@shell/plugins/steve/schema.utils';\n\nexport const _ALL = 'all';\nexport const _MERGE = 'merge';\nexport const _MULTI = 'multi';\nexport const _ALL_IF_AUTHED = 'allIfAuthed';\nexport const _NONE = 'none';\n\nconst SCHEMA_CHECK_RETRIES = 15;\nconst SCHEMA_CHECK_RETRY_LOG = 10;\n\nexport async function handleSpoofedRequest(rootGetters, schemaStore, opt, product) {\n  // Handle spoofed types instead of making an actual request\n  // Spoofing is handled here to ensure it's done for both yaml and form editing.\n  // It became apparent that this was the only place that both intersected\n  if (opt.url.includes(SPOOFED_PREFIX) || opt.url.includes(SPOOFED_API_PREFIX)) {\n    const [empty, scheme, type, ...rest] = opt.url.split('/'); // eslint-disable-line no-unused-vars\n    const id = rest.join('/'); // Cover case where id contains '/'\n    const isApi = scheme === SPOOFED_API_PREFIX;\n    const typemapGetter = id ? 'getSpoofedInstance' : 'getSpoofedInstances';\n\n    const schemas = rootGetters[`${ schemaStore }/all`](SCHEMA);\n    // getters return async getSpoofedInstance/getSpoofedInstances fn\n    const instance = await rootGetters[`type-map/${ typemapGetter }`](type, product, id);\n    const data = isApi ? createYaml(schemas, type, instance) : instance;\n\n    return id && !isApi ? data : { data };\n  }\n}\n\nexport async function loadSchemas(ctx, watch = true) {\n  const {\n    getters, dispatch, commit, rootGetters\n  } = ctx;\n  const res = await dispatch('findAll', { type: SCHEMA, opt: { url: 'schemas', load: false } });\n  const spoofedTypes = rootGetters['type-map/allSpoofedSchemas'] ;\n\n  if (Array.isArray(res.data)) {\n    res.data = res.data.concat(spoofedTypes);\n  } else if (Array.isArray(res)) {\n    res.data = res.concat(spoofedTypes);\n  }\n\n  res.data.forEach(addSchemaIndexFields);\n\n  commit('loadAll', {\n    ctx,\n    type:     SCHEMA,\n    data:     res.data,\n    revision: res.revision\n  });\n\n  if ( watch !== false ) {\n    dispatch('watch', {\n      type:     SCHEMA,\n      revision: res.revision\n    });\n  }\n\n  const all = getters.all(SCHEMA);\n\n  return all;\n}\n\nexport default {\n  request() {\n    throw new Error('Not Implemented');\n  },\n\n  loadSchemas,\n\n  // Load a page of data for a given type\n  // Used for incremental loading when enabled\n  async loadDataPage(ctx, { type, opt }) {\n    const { getters, commit, dispatch } = ctx;\n\n    type = getters.normalizeType(type);\n\n    // if there's no registered type, then register it so\n    // that we don't have issues on 'loadAdd' mutation\n    if ( !getters.typeRegistered(type) ) {\n      commit('registerType', type);\n    }\n\n    const loadCount = getters['loadCounter'](type);\n\n    try {\n      const res = await dispatch('request', { opt, type });\n\n      const newLoadCount = getters['loadCounter'](type);\n\n      // Load count changed, so we changed page or started a new load\n      // after this page load was started, so don't continue with incremental load\n      if (loadCount !== newLoadCount) {\n        return;\n      }\n\n      commit('loadAdd', {\n        ctx,\n        type,\n        data: res.data,\n      });\n\n      if (res.pagination?.next) {\n        dispatch('loadDataPage', {\n          type,\n          opt: {\n            ...opt,\n            url: res.pagination?.next\n          }\n        });\n      } else {\n      // We have everything!\n        if (opt.hasManualRefresh) {\n          dispatch('resource-fetch/updateManualRefreshIsLoading', false, { root: true });\n        }\n        if (opt.namespaced) {\n          commit('setHaveNamespace', { type, namespace: opt.namespaced });\n        } else {\n          commit('setHaveAll', { type });\n        }\n      }\n    } catch (e) {\n      if (opt.hasManualRefresh) {\n        dispatch('resource-fetch/updateManualRefreshIsLoading', false, { root: true });\n      }\n\n      return Promise.reject(e);\n    }\n  },\n\n  async findAll(ctx, { type, opt }) {\n    const {\n      getters, commit, dispatch, rootGetters\n    } = ctx;\n\n    opt = opt || {};\n    type = getters.normalizeType(type);\n\n    if ( !getters.typeRegistered(type) ) {\n      commit('registerType', type);\n    }\n\n    // No need to request the resources if we have them already\n    if ( opt.force !== true && (getters['haveAll'](type) || getters['haveAllNamespace'](type, opt.namespaced))) {\n      const args = {\n        type,\n        revision:  '',\n        // watchNamespace - used sometimes when we haven't fetched the results of a single namespace\n        // namespaced - used when we have fetched the result of a single namespace (see https://github.com/rancher/dashboard/pull/7329/files)\n        namespace: opt.watchNamespace || opt.namespaced\n      };\n\n      if (opt.watch !== false ) {\n        dispatch('watch', args);\n      }\n\n      return getters.all(type);\n    }\n\n    let load = (opt.load === undefined ? _ALL : opt.load);\n\n    if ( opt.load === false || opt.load === _NONE ) {\n      load = _NONE;\n    } else if ( opt.load === _ALL_IF_AUTHED ) {\n      const header = rootGetters['auth/fromHeader'];\n\n      if ( `${ header }` === 'true' || `${ header }` === 'none' ) {\n        load = _ALL;\n      } else {\n        load = _MULTI;\n      }\n    }\n\n    const typeOptions = rootGetters['type-map/optionsFor'](type);\n\n    console.log(`Find All: [${ ctx.state.config.namespace }] ${ type }`); // eslint-disable-line no-console\n    opt = opt || {};\n    opt.url = getters.urlFor(type, null, opt);\n    opt.stream = opt.stream !== false && load !== _NONE;\n    opt.depaginate = typeOptions?.depaginate;\n\n    let skipHaveAll = false;\n\n    // if it's incremental loading, we do two parallel requests\n    // on for a limit of 100, to quickly show data\n    // another one with 1st page of the subset of the resource we are fetching\n    // the default is 4 pages, but it can be changed on mixin/resource-fetch.js\n    if (opt.incremental) {\n      commit('incrementLoadCounter', type);\n\n      if (opt.hasManualRefresh) {\n        dispatch('resource-fetch/updateManualRefreshIsLoading', true, { root: true });\n      }\n\n      const pageFetchOpts = {\n        ...opt,\n        url: `${ opt.url }?limit=${ opt.incremental }`\n      };\n\n      // this is where we \"hijack\" the limit for the dispatch('request') some lines below\n      // and therefore have 2 initial requests in parallel\n      opt.url = `${ opt.url }?limit=100`;\n      skipHaveAll = true;\n\n      // since we are forcing a request, clear the haveAll\n      // needed for the resource-fetch mixin, otherwise the incremental indicator\n      // won't pop-up again when manual refreshing\n      if (opt.force) {\n        commit('forgetType', type);\n      }\n\n      dispatch('loadDataPage', { type, opt: pageFetchOpts });\n    }\n\n    let streamStarted = false;\n    let out;\n\n    let queue = [];\n    let streamCollection;\n\n    opt.onData = function(data) {\n      if ( streamStarted ) {\n        // Batch loads into groups of 10 to reduce vuex overhead\n        queue.push(data);\n\n        if ( queue.length > 10 ) {\n          const tmp = queue;\n\n          queue = [];\n          commit('loadMulti', { ctx, data: tmp });\n        }\n      } else {\n        // The first line is the collection object (sans `data`)\n        commit('forgetAll', { type });\n        streamStarted = true;\n        streamCollection = data;\n      }\n    };\n\n    try {\n      if (!opt.incremental && opt.hasManualRefresh) {\n        dispatch('resource-fetch/updateManualRefreshIsLoading', true, { root: true });\n      }\n\n      const res = await dispatch('request', { opt, type });\n\n      if ( streamStarted ) {\n        // Flush any remaining entries left over that didn't get loaded by onData\n        if ( queue.length ) {\n          commit('loadMulti', { ctx, data: queue });\n          queue = [];\n        }\n        commit('loadedAll', { type });\n        const all = getters.all(type);\n\n        res.finishDeferred(all);\n        out = streamCollection;\n      } else {\n        out = res;\n      }\n    } catch (e) {\n      if (!opt.incremental && opt.hasManualRefresh) {\n        dispatch('resource-fetch/updateManualRefreshIsLoading', false, { root: true });\n      }\n\n      return Promise.reject(e);\n    }\n\n    if ( load === _NONE ) {\n      if (!opt.incremental && opt.hasManualRefresh) {\n        dispatch('resource-fetch/updateManualRefreshIsLoading', false, { root: true });\n      }\n\n      return out;\n    } else if ( out.data ) {\n      if ( load === _MULTI ) {\n        // This has the effect of adding the response to the store,\n        // without replacing all the existing content for that type,\n        // and without marking that type as having 'all 'loaded.\n        //\n        // This is used e.g. to load a partial list of settings before login\n        // while still knowing we need to load the full list later.\n        commit('loadMulti', {\n          ctx,\n          data: out.data\n        });\n      } else if (load === _MERGE) {\n        // This is like loadMulti (updates existing entries) but also removes entries that no longer exist\n        // This allows changes to existing resources to be reflected in place in the UI\n        // (normally not needed as Rancher updates come over socket and are handled individually)\n        commit('loadMerge', {\n          ctx,\n          type,\n          data:     out.data,\n          existing: true\n        });\n      } else {\n        commit('loadAll', {\n          ctx,\n          type,\n          data:      out.data,\n          revision:  out.revision,\n          skipHaveAll,\n          namespace: opt.namespaced\n        });\n      }\n    }\n\n    // ToDo: SM if we start a \"bigger\" watch (such as watch without a namespace vs a watch with a namespace), we should stop the stop the \"smaller\" watch so we don't have duplicate events coming back\n    if ( opt.watch !== false ) {\n      const args = {\n        type,\n        revision:  out.revision,\n        namespace: opt.watchNamespace || opt.namespaced, // it could be either apparently\n        // ToDo: SM namespaced is sometimes a boolean and sometimes a string, I don't see it as especially broken but we should refactor that in the future\n        force:     opt.forceWatch === true,\n      };\n\n      dispatch('watch', args);\n    }\n\n    const all = getters.all(type);\n\n    if (!opt.incremental && opt.hasManualRefresh) {\n      dispatch('resource-fetch/updateManualRefreshIsLoading', false, { root: true });\n    }\n\n    garbageCollect.gcUpdateLastAccessed(ctx, type);\n\n    return all;\n  },\n\n  async findMatching(ctx, {\n    type,\n    selector,\n    opt,\n    namespace\n  }) {\n    const {\n      getters, commit, dispatch, rootGetters\n    } = ctx;\n\n    opt = opt || {};\n    console.log(`Find Matching: [${ ctx.state.config.namespace }] ${ type }`, selector); // eslint-disable-line no-console\n    type = getters.normalizeType(type);\n\n    if ( !getters.typeRegistered(type) ) {\n      commit('registerType', type);\n    }\n    if ( opt.force !== true && getters['haveSelector'](type, selector) ) {\n      return getters.matching( type, selector, namespace );\n    }\n\n    const typeOptions = rootGetters['type-map/optionsFor'](type);\n\n    opt = opt || {};\n\n    opt.filter = opt.filter || {};\n    opt.filter['labelSelector'] = selector;\n\n    opt.url = getters.urlFor(type, null, opt);\n    opt.depaginate = typeOptions?.depaginate;\n\n    const res = await dispatch('request', { opt, type });\n\n    if ( opt.load === false ) {\n      return res.data;\n    }\n\n    commit('loadSelector', {\n      ctx,\n      type,\n      entries:  res.data,\n      selector,\n      revision: res.revision,\n    });\n\n    if ( opt.watch !== false ) {\n      dispatch('watch', {\n        type,\n        selector,\n        revision: res.revision,\n        force:    opt.forceWatch === true,\n      });\n    }\n\n    garbageCollect.gcUpdateLastAccessed(ctx, type);\n\n    return getters.matching( type, selector, namespace );\n  },\n\n  // opt:\n  //  filter: Filter by fields, e.g. {field: value, anotherField: anotherValue} (default: none)\n  //  limit: Number of records to return per page (default: 1000)\n  //  sortBy: Sort by field\n  //  sortOrder: asc or desc\n  //  url: Use this specific URL instead of looking up the URL for the type/id.  This should only be used for bootstrapping schemas on startup.\n  //  @TODO depaginate: If the response is paginated, retrieve all the pages. (default: true)\n  async find(ctx, { type, id, opt }) {\n    if (!id) {\n      console.error('Attempting to find a resource with no id', type, id); // eslint-disable-line no-console\n\n      return;\n    }\n\n    const { getters, dispatch } = ctx;\n\n    opt = opt || {};\n\n    type = normalizeType(type);\n\n    console.log(`Find: [${ ctx.state.config.namespace }] ${ type } ${ id }`); // eslint-disable-line no-console\n    let out;\n\n    if ( opt.force !== true ) {\n      out = getters.byId(type, id);\n\n      if ( out ) {\n        return out;\n      }\n    }\n\n    opt = opt || {};\n    opt.url = getters.urlFor(type, id, opt);\n\n    const res = await dispatch('request', { opt, type });\n\n    await dispatch('load', { data: res });\n\n    if ( opt.watch !== false ) {\n      const watchMsg = {\n        type,\n        id,\n        revision: res?.metadata?.resourceVersion,\n        force:    opt.forceWatch === true,\n      };\n\n      const idx = id.indexOf('/');\n\n      if ( idx > 0 ) {\n        watchMsg.namespace = id.substr(0, idx);\n        watchMsg.id = id.substr(idx + 1);\n      }\n\n      dispatch('watch', watchMsg);\n    }\n\n    out = getters.byId(type, id);\n\n    garbageCollect.gcUpdateLastAccessed(ctx, type);\n\n    return out;\n  },\n\n  load(ctx, { data, existing }) {\n    const { getters, commit } = ctx;\n\n    let type = normalizeType(data.type);\n\n    if ( !getters.typeRegistered(type) ) {\n      commit('registerType', type);\n    }\n\n    if ( data.baseType && data.baseType !== data.type ) {\n      type = normalizeType(data.baseType);\n\n      if ( !getters.typeRegistered(type) ) {\n        commit('registerType', type);\n      }\n    }\n    // Inject special fields for indexing schemas\n    if ( type === SCHEMA ) {\n      addSchemaIndexFields(data);\n    }\n\n    const keyField = getters.keyFieldForType(type);\n    const id = data?.[keyField] || existing?.[keyField];\n\n    if ( !id ) {\n      console.warn('Attempting to load a resource with no id', data, existing); // eslint-disable-line no-console\n\n      return;\n    }\n\n    commit('load', {\n      ctx,\n      data,\n      existing\n    });\n\n    if ( type === SCHEMA ) {\n      commit('type-map/schemaChanged', null, { root: true });\n    }\n\n    return getters['byId'](type, id);\n  },\n\n  loadMulti(ctx, data) {\n    const { commit } = ctx;\n\n    commit('loadMulti', {\n      data,\n      ctx,\n    });\n  },\n\n  batchChanges(ctx, batch) {\n    const { commit } = ctx;\n\n    commit('batchChanges', {\n      ctx,\n      batch\n    });\n  },\n\n  loadAll(ctx, { type, data }) {\n    const { commit } = ctx;\n\n    commit('loadAll', {\n      ctx,\n      type,\n      data\n    });\n  },\n\n  create(ctx, data) {\n    return classify(ctx, data);\n  },\n\n  createMany(ctx, data) {\n    return data.map((d) => classify(ctx, d));\n  },\n\n  createPopulated(ctx, userData) {\n    const data = ctx.getters['defaultFor'](userData.type);\n\n    merge(data, userData);\n\n    return classify(ctx, data);\n  },\n\n  clone(ctx, { resource } = {}) {\n    return classify(ctx, resource.toJSON(), true);\n  },\n\n  // Forget a type in the store\n  // Remove all entries for that type and stop watching it\n  forgetType({ commit, dispatch, state }, type) {\n    state.started\n      .filter((entry) => entry.type === type)\n      .forEach((entry) => dispatch('unwatch', entry));\n\n    commit('forgetType', type);\n  },\n\n  promptRemove({ commit, state }, resources ) {\n    commit('action-menu/togglePromptRemove', resources, { root: true });\n  },\n\n  promptModal({ commit, state }, data ) {\n    commit('action-menu/togglePromptModal', data, { root: true });\n  },\n\n  resourceAction({ getters, dispatch }, {\n    resource, actionName, body, opt,\n  }) {\n    throw new Error('Not Implemented');\n  },\n\n  collectionAction({ getters, dispatch }, {\n    type, actionName, body, opt\n  }) {\n    throw new Error('Not Implemented');\n  },\n\n  cleanForNew(ctx, resource) {\n    throw new Error('Not Implemented');\n  },\n\n  createNamespace(ctx, resource) {\n    throw new Error('Not Implemented');\n  },\n\n  cleanForDiff(ctx, resource) {\n    throw new Error('Not Implemented');\n  },\n\n  // Clean a resource for the ResourceDetail page\n  // This can ensure common, required properties exists that might have been removed\n  cleanForDetail(ctx, resource) {\n    return resource;\n  },\n\n  cleanForDownload(ctx, resource) {\n    return resource;\n  },\n\n  // Wait for a schema that is expected to exist that may not have been loaded yet (for instance when loadCluster is still running).\n  async waitForSchema({ getters, dispatch }, { type }) {\n    let tries = SCHEMA_CHECK_RETRIES;\n    let schema = null;\n\n    while (!schema && tries > 0) {\n      schema = getters['schemaFor'](type);\n\n      if (!schema) {\n        if (tries === SCHEMA_CHECK_RETRY_LOG) {\n          console.warn(`Schema for ${ type } not available... retrying...`); // eslint-disable-line no-console\n        }\n        await new Promise((resolve) => setTimeout(resolve, 1000));\n        tries--;\n      }\n    }\n\n    if (tries === 0) {\n      // Ran out of tries - fetch the schemas again\n      console.warn(`Schema for ${ type } still unavailable... loading schemas again...`); // eslint-disable-line no-console\n      await dispatch('loadSchemas', true);\n    }\n  },\n\n  incrementLoadCounter({ commit }, resource) {\n    commit('incrementLoadCounter', resource);\n  },\n\n  garbageCollect(ctx, ignoreTypes) {\n    return garbageCollect.garbageCollect(ctx, ignoreTypes);\n  },\n\n  gcResetStore({ state }) {\n    garbageCollect.gcResetStore(state);\n  }\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA,OAAOA,KAAK,MAAM,cAAc;AAEhC,SAASC,MAAM,QAAQ,qBAAqB;AAC5C,SAASC,kBAAkB,EAAEC,cAAc,QAAQ,uBAAuB;AAC1E,SAASC,UAAU,QAAQ,0BAA0B;AACrD,SAASC,QAAQ,QAAQ,yCAAyC;AAClE,SAASC,aAAa,QAAQ,aAAa;AAC3C,OAAOC,eAAc,MAAM,oBAAoB;AAC/C,SAASC,oBAAoB,QAAQ,mCAAmC;AAExE,OAAO,IAAMC,IAAI,GAAG,KAAK;AACzB,OAAO,IAAMC,MAAM,GAAG,OAAO;AAC7B,OAAO,IAAMC,MAAM,GAAG,OAAO;AAC7B,OAAO,IAAMC,cAAc,GAAG,aAAa;AAC3C,OAAO,IAAMC,KAAK,GAAG,MAAM;AAE3B,IAAMC,oBAAoB,GAAG,EAAE;AAC/B,IAAMC,sBAAsB,GAAG,EAAE;AAEjC,gBAAsBC,oBAAoBA,CAAAC,EAAA,EAAAC,GAAA,EAAAC,GAAA,EAAAC,GAAA;EAAA,OAAAC,qBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAiBzC,SAAAF,sBAAA;EAAAA,qBAAA,GAAAG,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,CAjBM,SAAAC,SAAoCC,WAAW,EAAEC,WAAW,EAAEC,GAAG,EAAEC,OAAO;IAAA,IAAAC,cAAA,EAAAC,eAAA,EAAAC,KAAA,EAAAC,MAAA,EAAAC,IAAA,EAAAC,IAAA,EAAAC,EAAA,EAAAC,KAAA,EAAAC,aAAA,EAAAC,OAAA,EAAAC,QAAA,EAAAC,IAAA;IAAA,OAAAlB,kBAAA,CAAAmB,IAAA,UAAAC,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAAC,IAAA,GAAAD,SAAA,CAAAE,IAAA;QAAA;UAAA,MAI3ElB,GAAG,CAACmB,GAAG,CAACC,QAAQ,CAAC/C,cAAc,CAAC,IAAI2B,GAAG,CAACmB,GAAG,CAACC,QAAQ,CAAChD,kBAAkB,CAAC;YAAA4C,SAAA,CAAAE,IAAA;YAAA;UAAA;UAAAhB,cAAA,GACnCF,GAAG,CAACmB,GAAG,CAACE,KAAK,CAAC,GAAG,CAAC,EAAAlB,eAAA,GAAAmB,QAAA,CAAApB,cAAA,GAAlDE,KAAK,GAAAD,eAAA,KAAEE,MAAM,GAAAF,eAAA,KAAEG,IAAI,GAAAH,eAAA,KAAKI,IAAI,GAAAJ,eAAA,CAAAoB,KAAA,KAAwB;UACrDf,EAAE,GAAGD,IAAI,CAACiB,IAAI,CAAC,GAAG,CAAC,EAAE;UACrBf,KAAK,GAAGJ,MAAM,KAAKjC,kBAAkB;UACrCsC,aAAa,GAAGF,EAAE,GAAG,oBAAoB,GAAG,qBAAqB;UAEjEG,OAAO,GAAGb,WAAW,IAAA2B,MAAA,CAAK1B,WAAW,UAAQ,CAAC5B,MAAM,CAAC,EAC3D;UAAA6C,SAAA,CAAAE,IAAA;UAAA,OACuBpB,WAAW,aAAA2B,MAAA,CAAcf,aAAa,EAAI,CAACJ,IAAI,EAAEL,OAAO,EAAEO,EAAE,CAAC;QAAA;UAA9EI,QAAQ,GAAAI,SAAA,CAAAU,IAAA;UACRb,IAAI,GAAGJ,KAAK,GAAGnC,UAAU,CAACqC,OAAO,EAAEL,IAAI,EAAEM,QAAQ,CAAC,GAAGA,QAAQ;UAAA,OAAAI,SAAA,CAAAW,MAAA,WAE5DnB,EAAE,IAAI,CAACC,KAAK,GAAGI,IAAI,GAAG;YAAEA,IAAI,EAAJA;UAAK,CAAC;QAAA;QAAA;UAAA,OAAAG,SAAA,CAAAY,IAAA;MAAA;IAAA,GAAA/B,QAAA;EAAA,CAExC;EAAA,OAAAN,qBAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAED,gBAAsBoC,WAAWA,CAAAC,GAAA;EAAA,OAAAC,YAAA,CAAAvC,KAAA,OAAAC,SAAA;AAAA;AAgChC,SAAAsC,aAAA;EAAAA,YAAA,GAAArC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,CAhCM,SAAAoC,SAA2BC,GAAG;IAAA,IAAAC,KAAA;MAAAC,OAAA;MAAAC,QAAA;MAAAC,MAAA;MAAAvC,WAAA;MAAAwC,GAAA;MAAAC,YAAA;MAAAC,GAAA;MAAAC,MAAA,GAAAhD,SAAA;IAAA,OAAAE,kBAAA,CAAAmB,IAAA,UAAA4B,UAAAC,SAAA;MAAA,kBAAAA,SAAA,CAAA1B,IAAA,GAAA0B,SAAA,CAAAzB,IAAA;QAAA;UAAEgB,KAAK,GAAAO,MAAA,CAAAG,MAAA,QAAAH,MAAA,QAAAI,SAAA,GAAAJ,MAAA,MAAG,IAAI;UAE/CN,OAAO,GACLF,GAAG,CADLE,OAAO,EAAEC,QAAQ,GACfH,GAAG,CADIG,QAAQ,EAAEC,MAAM,GACvBJ,GAAG,CADcI,MAAM,EAAEvC,WAAW,GACpCmC,GAAG,CADsBnC,WAAW;UAAA6C,SAAA,CAAAzB,IAAA;UAAA,OAEtBkB,QAAQ,CAAC,SAAS,EAAE;YAAE9B,IAAI,EAAEnC,MAAM;YAAE6B,GAAG,EAAE;cAAEmB,GAAG,EAAE,SAAS;cAAE2B,IAAI,EAAE;YAAM;UAAE,CAAC,CAAC;QAAA;UAAvFR,GAAG,GAAAK,SAAA,CAAAjB,IAAA;UACHa,YAAY,GAAGzC,WAAW,CAAC,4BAA4B,CAAC;UAE9D,IAAIiD,KAAK,CAACC,OAAO,CAACV,GAAG,CAACzB,IAAI,CAAC,EAAE;YAC3ByB,GAAG,CAACzB,IAAI,GAAGyB,GAAG,CAACzB,IAAI,CAACY,MAAM,CAACc,YAAY,CAAC;UAC1C,CAAC,MAAM,IAAIQ,KAAK,CAACC,OAAO,CAACV,GAAG,CAAC,EAAE;YAC7BA,GAAG,CAACzB,IAAI,GAAGyB,GAAG,CAACb,MAAM,CAACc,YAAY,CAAC;UACrC;UAEAD,GAAG,CAACzB,IAAI,CAACoC,OAAO,CAACvE,oBAAoB,CAAC;UAEtC2D,MAAM,CAAC,SAAS,EAAE;YAChBJ,GAAG,EAAHA,GAAG;YACH3B,IAAI,EAAMnC,MAAM;YAChB0C,IAAI,EAAMyB,GAAG,CAACzB,IAAI;YAClBqC,QAAQ,EAAEZ,GAAG,CAACY;UAChB,CAAC,CAAC;UAEF,IAAKhB,KAAK,KAAK,KAAK,EAAG;YACrBE,QAAQ,CAAC,OAAO,EAAE;cAChB9B,IAAI,EAAMnC,MAAM;cAChB+E,QAAQ,EAAEZ,GAAG,CAACY;YAChB,CAAC,CAAC;UACJ;UAEMV,GAAG,GAAGL,OAAO,CAACK,GAAG,CAACrE,MAAM,CAAC;UAAA,OAAAwE,SAAA,CAAAhB,MAAA,WAExBa,GAAG;QAAA;QAAA;UAAA,OAAAG,SAAA,CAAAf,IAAA;MAAA;IAAA,GAAAI,QAAA;EAAA,CACX;EAAA,OAAAD,YAAA,CAAAvC,KAAA,OAAAC,SAAA;AAAA;AAED,eAAe;EACb0D,OAAO,WAAAA,QAAA,EAAG;IACR,MAAM,IAAIC,KAAK,CAAC,iBAAiB,CAAC;EACpC,CAAC;EAEDvB,WAAW,EAAXA,WAAW;EAEX;EACA;EACMwB,YAAY,WAAAA,aAACpB,GAAG,EAAAqB,IAAA,EAAiB;IAAA,OAAA5D,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAA2D,QAAA;MAAA,IAAAjD,IAAA,EAAAN,GAAA,EAAAmC,OAAA,EAAAE,MAAA,EAAAD,QAAA,EAAAoB,SAAA,EAAAC,eAAA,EAAAnB,GAAA,EAAAoB,YAAA,EAAAC,gBAAA;MAAA,OAAAhE,kBAAA,CAAAmB,IAAA,UAAA8C,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAA5C,IAAA,GAAA4C,QAAA,CAAA3C,IAAA;UAAA;YAAbZ,IAAI,GAAAgD,IAAA,CAAJhD,IAAI,EAAEN,GAAG,GAAAsD,IAAA,CAAHtD,GAAG;YACzBmC,OAAO,GAAuBF,GAAG,CAAjCE,OAAO,EAAEE,MAAM,GAAeJ,GAAG,CAAxBI,MAAM,EAAED,QAAQ,GAAKH,GAAG,CAAhBG,QAAQ;YAEjC9B,IAAI,GAAG6B,OAAO,CAAC3D,aAAa,CAAC8B,IAAI,CAAC;;YAElC;YACA;YACA,IAAK,CAAC6B,OAAO,CAAC2B,cAAc,CAACxD,IAAI,CAAC,EAAG;cACnC+B,MAAM,CAAC,cAAc,EAAE/B,IAAI,CAAC;YAC9B;YAEMkD,SAAS,GAAGrB,OAAO,CAAC,aAAa,CAAC,CAAC7B,IAAI,CAAC;YAAAuD,QAAA,CAAA5C,IAAA;YAAA4C,QAAA,CAAA3C,IAAA;YAAA,OAG1BkB,QAAQ,CAAC,SAAS,EAAE;cAAEpC,GAAG,EAAHA,GAAG;cAAEM,IAAI,EAAJA;YAAK,CAAC,CAAC;UAAA;YAA9CgC,GAAG,GAAAuB,QAAA,CAAAnC,IAAA;YAEHgC,YAAY,GAAGvB,OAAO,CAAC,aAAa,CAAC,CAAC7B,IAAI,CAAC,EAEjD;YACA;YAAA,MACIkD,SAAS,KAAKE,YAAY;cAAAG,QAAA,CAAA3C,IAAA;cAAA;YAAA;YAAA,OAAA2C,QAAA,CAAAlC,MAAA;UAAA;YAI9BU,MAAM,CAAC,SAAS,EAAE;cAChBJ,GAAG,EAAHA,GAAG;cACH3B,IAAI,EAAJA,IAAI;cACJO,IAAI,EAAEyB,GAAG,CAACzB;YACZ,CAAC,CAAC;YAEF,KAAA4C,eAAA,GAAInB,GAAG,CAACyB,UAAU,cAAAN,eAAA,eAAdA,eAAA,CAAgBvC,IAAI,EAAE;cACxBkB,QAAQ,CAAC,cAAc,EAAE;gBACvB9B,IAAI,EAAJA,IAAI;gBACJN,GAAG,EAAAgE,aAAA,CAAAA,aAAA,KACEhE,GAAG;kBACNmB,GAAG,GAAAwC,gBAAA,GAAErB,GAAG,CAACyB,UAAU,cAAAJ,gBAAA,uBAAdA,gBAAA,CAAgBzC;gBAAI;cAE7B,CAAC,CAAC;YACJ,CAAC,MAAM;cACP;cACE,IAAIlB,GAAG,CAACiE,gBAAgB,EAAE;gBACxB7B,QAAQ,CAAC,6CAA6C,EAAE,KAAK,EAAE;kBAAE8B,IAAI,EAAE;gBAAK,CAAC,CAAC;cAChF;cACA,IAAIlE,GAAG,CAACmE,UAAU,EAAE;gBAClB9B,MAAM,CAAC,kBAAkB,EAAE;kBAAE/B,IAAI,EAAJA,IAAI;kBAAE8D,SAAS,EAAEpE,GAAG,CAACmE;gBAAW,CAAC,CAAC;cACjE,CAAC,MAAM;gBACL9B,MAAM,CAAC,YAAY,EAAE;kBAAE/B,IAAI,EAAJA;gBAAK,CAAC,CAAC;cAChC;YACF;YAACuD,QAAA,CAAA3C,IAAA;YAAA;UAAA;YAAA2C,QAAA,CAAA5C,IAAA;YAAA4C,QAAA,CAAAQ,EAAA,GAAAR,QAAA;YAED,IAAI7D,GAAG,CAACiE,gBAAgB,EAAE;cACxB7B,QAAQ,CAAC,6CAA6C,EAAE,KAAK,EAAE;gBAAE8B,IAAI,EAAE;cAAK,CAAC,CAAC;YAChF;YAAC,OAAAL,QAAA,CAAAlC,MAAA,WAEM2C,OAAO,CAACC,MAAM,CAAAV,QAAA,CAAAQ,EAAE,CAAC;UAAA;UAAA;YAAA,OAAAR,QAAA,CAAAjC,IAAA;QAAA;MAAA,GAAA2B,OAAA;IAAA;EAE5B,CAAC;EAEKiB,OAAO,WAAAA,QAACvC,GAAG,EAAAwC,KAAA,EAAiB;IAAA,OAAA/E,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAA8E,SAAA;MAAA,IAAApE,IAAA,EAAAN,GAAA,EAAAmC,OAAA,EAAAE,MAAA,EAAAD,QAAA,EAAAtC,WAAA,EAAA6E,IAAA,EAAA7B,IAAA,EAAA8B,MAAA,EAAAC,WAAA,EAAAC,WAAA,EAAAC,aAAA,EAAAC,aAAA,EAAAC,GAAA,EAAAC,KAAA,EAAAC,gBAAA,EAAA7C,GAAA,EAAA8C,IAAA,EAAAC,MAAA,EAAA7C,GAAA;MAAA,OAAA7C,kBAAA,CAAAmB,IAAA,UAAAwE,UAAAC,SAAA;QAAA,kBAAAA,SAAA,CAAAtE,IAAA,GAAAsE,SAAA,CAAArE,IAAA;UAAA;YAAbZ,IAAI,GAAAmE,KAAA,CAAJnE,IAAI,EAAEN,GAAG,GAAAyE,KAAA,CAAHzE,GAAG;YAE1BmC,OAAO,GACLF,GAAG,CADLE,OAAO,EAAEE,MAAM,GACbJ,GAAG,CADII,MAAM,EAAED,QAAQ,GACvBH,GAAG,CADYG,QAAQ,EAAEtC,WAAW,GACpCmC,GAAG,CADsBnC,WAAW;YAGxCE,GAAG,GAAGA,GAAG,IAAI,CAAC,CAAC;YACfM,IAAI,GAAG6B,OAAO,CAAC3D,aAAa,CAAC8B,IAAI,CAAC;YAElC,IAAK,CAAC6B,OAAO,CAAC2B,cAAc,CAACxD,IAAI,CAAC,EAAG;cACnC+B,MAAM,CAAC,cAAc,EAAE/B,IAAI,CAAC;YAC9B;;YAEA;YAAA,MACKN,GAAG,CAACwF,KAAK,KAAK,IAAI,KAAKrD,OAAO,CAAC,SAAS,CAAC,CAAC7B,IAAI,CAAC,IAAI6B,OAAO,CAAC,kBAAkB,CAAC,CAAC7B,IAAI,EAAEN,GAAG,CAACmE,UAAU,CAAC,CAAC;cAAAoB,SAAA,CAAArE,IAAA;cAAA;YAAA;YAClGyD,IAAI,GAAG;cACXrE,IAAI,EAAJA,IAAI;cACJ4C,QAAQ,EAAG,EAAE;cACb;cACA;cACAkB,SAAS,EAAEpE,GAAG,CAACyF,cAAc,IAAIzF,GAAG,CAACmE;YACvC,CAAC;YAED,IAAInE,GAAG,CAACkC,KAAK,KAAK,KAAK,EAAG;cACxBE,QAAQ,CAAC,OAAO,EAAEuC,IAAI,CAAC;YACzB;YAAC,OAAAY,SAAA,CAAA5D,MAAA,WAEMQ,OAAO,CAACK,GAAG,CAAClC,IAAI,CAAC;UAAA;YAGtBwC,IAAI,GAAI9C,GAAG,CAAC8C,IAAI,KAAKD,SAAS,GAAGlE,IAAI,GAAGqB,GAAG,CAAC8C,IAAI;YAEpD,IAAK9C,GAAG,CAAC8C,IAAI,KAAK,KAAK,IAAI9C,GAAG,CAAC8C,IAAI,KAAK/D,KAAK,EAAG;cAC9C+D,IAAI,GAAG/D,KAAK;YACd,CAAC,MAAM,IAAKiB,GAAG,CAAC8C,IAAI,KAAKhE,cAAc,EAAG;cAClC8F,MAAM,GAAG9E,WAAW,CAAC,iBAAiB,CAAC;cAE7C,IAAK,GAAA2B,MAAA,CAAImD,MAAM,MAAQ,MAAM,IAAI,GAAAnD,MAAA,CAAImD,MAAM,MAAQ,MAAM,EAAG;gBAC1D9B,IAAI,GAAGnE,IAAI;cACb,CAAC,MAAM;gBACLmE,IAAI,GAAGjE,MAAM;cACf;YACF;YAEMgG,WAAW,GAAG/E,WAAW,CAAC,qBAAqB,CAAC,CAACQ,IAAI,CAAC;YAE5DoF,OAAO,CAACC,GAAG,eAAAlE,MAAA,CAAgBQ,GAAG,CAAC2D,KAAK,CAACC,MAAM,CAACzB,SAAS,QAAA3C,MAAA,CAAOnB,IAAI,CAAG,CAAC,CAAC,CAAC;YACtEN,GAAG,GAAGA,GAAG,IAAI,CAAC,CAAC;YACfA,GAAG,CAACmB,GAAG,GAAGgB,OAAO,CAAC2D,MAAM,CAACxF,IAAI,EAAE,IAAI,EAAEN,GAAG,CAAC;YACzCA,GAAG,CAAC+F,MAAM,GAAG/F,GAAG,CAAC+F,MAAM,KAAK,KAAK,IAAIjD,IAAI,KAAK/D,KAAK;YACnDiB,GAAG,CAACgG,UAAU,GAAGnB,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEmB,UAAU;YAEpClB,WAAW,GAAG,KAAK,EAEvB;YACA;YACA;YACA;YACA,IAAI9E,GAAG,CAACiG,WAAW,EAAE;cACnB5D,MAAM,CAAC,sBAAsB,EAAE/B,IAAI,CAAC;cAEpC,IAAIN,GAAG,CAACiE,gBAAgB,EAAE;gBACxB7B,QAAQ,CAAC,6CAA6C,EAAE,IAAI,EAAE;kBAAE8B,IAAI,EAAE;gBAAK,CAAC,CAAC;cAC/E;cAEMa,aAAa,GAAAf,aAAA,CAAAA,aAAA,KACdhE,GAAG;gBACNmB,GAAG,KAAAM,MAAA,CAAMzB,GAAG,CAACmB,GAAG,aAAAM,MAAA,CAAYzB,GAAG,CAACiG,WAAW;cAAG,IAGhD;cACA;cACAjG,GAAG,CAACmB,GAAG,MAAAM,MAAA,CAAOzB,GAAG,CAACmB,GAAG,eAAa;cAClC2D,WAAW,GAAG,IAAI;;cAElB;cACA;cACA;cACA,IAAI9E,GAAG,CAACwF,KAAK,EAAE;gBACbnD,MAAM,CAAC,YAAY,EAAE/B,IAAI,CAAC;cAC5B;cAEA8B,QAAQ,CAAC,cAAc,EAAE;gBAAE9B,IAAI,EAAJA,IAAI;gBAAEN,GAAG,EAAE+E;cAAc,CAAC,CAAC;YACxD;YAEIC,aAAa,GAAG,KAAK;YAGrBE,KAAK,GAAG,EAAE;YAGdlF,GAAG,CAACkG,MAAM,GAAG,UAASrF,IAAI,EAAE;cAC1B,IAAKmE,aAAa,EAAG;gBACnB;gBACAE,KAAK,CAACiB,IAAI,CAACtF,IAAI,CAAC;gBAEhB,IAAKqE,KAAK,CAACtC,MAAM,GAAG,EAAE,EAAG;kBACvB,IAAMwD,GAAG,GAAGlB,KAAK;kBAEjBA,KAAK,GAAG,EAAE;kBACV7C,MAAM,CAAC,WAAW,EAAE;oBAAEJ,GAAG,EAAHA,GAAG;oBAAEpB,IAAI,EAAEuF;kBAAI,CAAC,CAAC;gBACzC;cACF,CAAC,MAAM;gBACL;gBACA/D,MAAM,CAAC,WAAW,EAAE;kBAAE/B,IAAI,EAAJA;gBAAK,CAAC,CAAC;gBAC7B0E,aAAa,GAAG,IAAI;gBACpBG,gBAAgB,GAAGtE,IAAI;cACzB;YACF,CAAC;YAAC0E,SAAA,CAAAtE,IAAA;YAGA,IAAI,CAACjB,GAAG,CAACiG,WAAW,IAAIjG,GAAG,CAACiE,gBAAgB,EAAE;cAC5C7B,QAAQ,CAAC,6CAA6C,EAAE,IAAI,EAAE;gBAAE8B,IAAI,EAAE;cAAK,CAAC,CAAC;YAC/E;YAACqB,SAAA,CAAArE,IAAA;YAAA,OAEiBkB,QAAQ,CAAC,SAAS,EAAE;cAAEpC,GAAG,EAAHA,GAAG;cAAEM,IAAI,EAAJA;YAAK,CAAC,CAAC;UAAA;YAA9CgC,GAAG,GAAAiD,SAAA,CAAA7D,IAAA;YAET,IAAKsD,aAAa,EAAG;cACnB;cACA,IAAKE,KAAK,CAACtC,MAAM,EAAG;gBAClBP,MAAM,CAAC,WAAW,EAAE;kBAAEJ,GAAG,EAAHA,GAAG;kBAAEpB,IAAI,EAAEqE;gBAAM,CAAC,CAAC;gBACzCA,KAAK,GAAG,EAAE;cACZ;cACA7C,MAAM,CAAC,WAAW,EAAE;gBAAE/B,IAAI,EAAJA;cAAK,CAAC,CAAC;cACvBkC,IAAG,GAAGL,OAAO,CAACK,GAAG,CAAClC,IAAI,CAAC;cAE7BgC,GAAG,CAAC+D,cAAc,CAAC7D,IAAG,CAAC;cACvByC,GAAG,GAAGE,gBAAgB;YACxB,CAAC,MAAM;cACLF,GAAG,GAAG3C,GAAG;YACX;YAACiD,SAAA,CAAArE,IAAA;YAAA;UAAA;YAAAqE,SAAA,CAAAtE,IAAA;YAAAsE,SAAA,CAAAlB,EAAA,GAAAkB,SAAA;YAED,IAAI,CAACvF,GAAG,CAACiG,WAAW,IAAIjG,GAAG,CAACiE,gBAAgB,EAAE;cAC5C7B,QAAQ,CAAC,6CAA6C,EAAE,KAAK,EAAE;gBAAE8B,IAAI,EAAE;cAAK,CAAC,CAAC;YAChF;YAAC,OAAAqB,SAAA,CAAA5D,MAAA,WAEM2C,OAAO,CAACC,MAAM,CAAAgB,SAAA,CAAAlB,EAAE,CAAC;UAAA;YAAA,MAGrBvB,IAAI,KAAK/D,KAAK;cAAAwG,SAAA,CAAArE,IAAA;cAAA;YAAA;YACjB,IAAI,CAAClB,GAAG,CAACiG,WAAW,IAAIjG,GAAG,CAACiE,gBAAgB,EAAE;cAC5C7B,QAAQ,CAAC,6CAA6C,EAAE,KAAK,EAAE;gBAAE8B,IAAI,EAAE;cAAK,CAAC,CAAC;YAChF;YAAC,OAAAqB,SAAA,CAAA5D,MAAA,WAEMsD,GAAG;UAAA;YACL,IAAKA,GAAG,CAACpE,IAAI,EAAG;cACrB,IAAKiC,IAAI,KAAKjE,MAAM,EAAG;gBACrB;gBACA;gBACA;gBACA;gBACA;gBACA;gBACAwD,MAAM,CAAC,WAAW,EAAE;kBAClBJ,GAAG,EAAHA,GAAG;kBACHpB,IAAI,EAAEoE,GAAG,CAACpE;gBACZ,CAAC,CAAC;cACJ,CAAC,MAAM,IAAIiC,IAAI,KAAKlE,MAAM,EAAE;gBAC1B;gBACA;gBACA;gBACAyD,MAAM,CAAC,WAAW,EAAE;kBAClBJ,GAAG,EAAHA,GAAG;kBACH3B,IAAI,EAAJA,IAAI;kBACJO,IAAI,EAAMoE,GAAG,CAACpE,IAAI;kBAClByF,QAAQ,EAAE;gBACZ,CAAC,CAAC;cACJ,CAAC,MAAM;gBACLjE,MAAM,CAAC,SAAS,EAAE;kBAChBJ,GAAG,EAAHA,GAAG;kBACH3B,IAAI,EAAJA,IAAI;kBACJO,IAAI,EAAOoE,GAAG,CAACpE,IAAI;kBACnBqC,QAAQ,EAAG+B,GAAG,CAAC/B,QAAQ;kBACvB4B,WAAW,EAAXA,WAAW;kBACXV,SAAS,EAAEpE,GAAG,CAACmE;gBACjB,CAAC,CAAC;cACJ;YACF;UAAC;YAED;YACA,IAAKnE,GAAG,CAACkC,KAAK,KAAK,KAAK,EAAG;cACnByC,MAAI,GAAG;gBACXrE,IAAI,EAAJA,IAAI;gBACJ4C,QAAQ,EAAG+B,GAAG,CAAC/B,QAAQ;gBACvBkB,SAAS,EAAEpE,GAAG,CAACyF,cAAc,IAAIzF,GAAG,CAACmE,UAAU;gBAAE;gBACjD;gBACAqB,KAAK,EAAMxF,GAAG,CAACuG,UAAU,KAAK;cAChC,CAAC;cAEDnE,QAAQ,CAAC,OAAO,EAAEuC,MAAI,CAAC;YACzB;YAEMnC,GAAG,GAAGL,OAAO,CAACK,GAAG,CAAClC,IAAI,CAAC;YAE7B,IAAI,CAACN,GAAG,CAACiG,WAAW,IAAIjG,GAAG,CAACiE,gBAAgB,EAAE;cAC5C7B,QAAQ,CAAC,6CAA6C,EAAE,KAAK,EAAE;gBAAE8B,IAAI,EAAE;cAAK,CAAC,CAAC;YAChF;YAEAzF,eAAc,CAAC+H,oBAAoB,CAACvE,GAAG,EAAE3B,IAAI,CAAC;YAAC,OAAAiF,SAAA,CAAA5D,MAAA,WAExCa,GAAG;UAAA;UAAA;YAAA,OAAA+C,SAAA,CAAA3D,IAAA;QAAA;MAAA,GAAA8C,QAAA;IAAA;EACZ,CAAC;EAEK+B,YAAY,WAAAA,aAACxE,GAAG,EAAAyE,KAAA,EAKnB;IAAA,OAAAhH,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAA+G,SAAA;MAAA,IAAArG,IAAA,EAAAsG,QAAA,EAAA5G,GAAA,EAAAoE,SAAA,EAAAjC,OAAA,EAAAE,MAAA,EAAAD,QAAA,EAAAtC,WAAA,EAAA+E,WAAA,EAAAvC,GAAA;MAAA,OAAA3C,kBAAA,CAAAmB,IAAA,UAAA+F,UAAAC,SAAA;QAAA,kBAAAA,SAAA,CAAA7F,IAAA,GAAA6F,SAAA,CAAA5F,IAAA;UAAA;YAJDZ,IAAI,GAAAoG,KAAA,CAAJpG,IAAI,EACJsG,QAAQ,GAAAF,KAAA,CAARE,QAAQ,EACR5G,GAAG,GAAA0G,KAAA,CAAH1G,GAAG,EACHoE,SAAS,GAAAsC,KAAA,CAATtC,SAAS;YAGPjC,OAAO,GACLF,GAAG,CADLE,OAAO,EAAEE,MAAM,GACbJ,GAAG,CADII,MAAM,EAAED,QAAQ,GACvBH,GAAG,CADYG,QAAQ,EAAEtC,WAAW,GACpCmC,GAAG,CADsBnC,WAAW;YAGxCE,GAAG,GAAGA,GAAG,IAAI,CAAC,CAAC;YACf0F,OAAO,CAACC,GAAG,oBAAAlE,MAAA,CAAqBQ,GAAG,CAAC2D,KAAK,CAACC,MAAM,CAACzB,SAAS,QAAA3C,MAAA,CAAOnB,IAAI,GAAKsG,QAAQ,CAAC,CAAC,CAAC;YACrFtG,IAAI,GAAG6B,OAAO,CAAC3D,aAAa,CAAC8B,IAAI,CAAC;YAElC,IAAK,CAAC6B,OAAO,CAAC2B,cAAc,CAACxD,IAAI,CAAC,EAAG;cACnC+B,MAAM,CAAC,cAAc,EAAE/B,IAAI,CAAC;YAC9B;YAAC,MACIN,GAAG,CAACwF,KAAK,KAAK,IAAI,IAAIrD,OAAO,CAAC,cAAc,CAAC,CAAC7B,IAAI,EAAEsG,QAAQ,CAAC;cAAAE,SAAA,CAAA5F,IAAA;cAAA;YAAA;YAAA,OAAA4F,SAAA,CAAAnF,MAAA,WACzDQ,OAAO,CAAC4E,QAAQ,CAAEzG,IAAI,EAAEsG,QAAQ,EAAExC,SAAU,CAAC;UAAA;YAGhDS,WAAW,GAAG/E,WAAW,CAAC,qBAAqB,CAAC,CAACQ,IAAI,CAAC;YAE5DN,GAAG,GAAGA,GAAG,IAAI,CAAC,CAAC;YAEfA,GAAG,CAACgH,MAAM,GAAGhH,GAAG,CAACgH,MAAM,IAAI,CAAC,CAAC;YAC7BhH,GAAG,CAACgH,MAAM,CAAC,eAAe,CAAC,GAAGJ,QAAQ;YAEtC5G,GAAG,CAACmB,GAAG,GAAGgB,OAAO,CAAC2D,MAAM,CAACxF,IAAI,EAAE,IAAI,EAAEN,GAAG,CAAC;YACzCA,GAAG,CAACgG,UAAU,GAAGnB,WAAW,aAAXA,WAAW,uBAAXA,WAAW,CAAEmB,UAAU;YAACc,SAAA,CAAA5F,IAAA;YAAA,OAEvBkB,QAAQ,CAAC,SAAS,EAAE;cAAEpC,GAAG,EAAHA,GAAG;cAAEM,IAAI,EAAJA;YAAK,CAAC,CAAC;UAAA;YAA9CgC,GAAG,GAAAwE,SAAA,CAAApF,IAAA;YAAA,MAEJ1B,GAAG,CAAC8C,IAAI,KAAK,KAAK;cAAAgE,SAAA,CAAA5F,IAAA;cAAA;YAAA;YAAA,OAAA4F,SAAA,CAAAnF,MAAA,WACdW,GAAG,CAACzB,IAAI;UAAA;YAGjBwB,MAAM,CAAC,cAAc,EAAE;cACrBJ,GAAG,EAAHA,GAAG;cACH3B,IAAI,EAAJA,IAAI;cACJ2G,OAAO,EAAG3E,GAAG,CAACzB,IAAI;cAClB+F,QAAQ,EAARA,QAAQ;cACR1D,QAAQ,EAAEZ,GAAG,CAACY;YAChB,CAAC,CAAC;YAEF,IAAKlD,GAAG,CAACkC,KAAK,KAAK,KAAK,EAAG;cACzBE,QAAQ,CAAC,OAAO,EAAE;gBAChB9B,IAAI,EAAJA,IAAI;gBACJsG,QAAQ,EAARA,QAAQ;gBACR1D,QAAQ,EAAEZ,GAAG,CAACY,QAAQ;gBACtBsC,KAAK,EAAKxF,GAAG,CAACuG,UAAU,KAAK;cAC/B,CAAC,CAAC;YACJ;YAEA9H,eAAc,CAAC+H,oBAAoB,CAACvE,GAAG,EAAE3B,IAAI,CAAC;YAAC,OAAAwG,SAAA,CAAAnF,MAAA,WAExCQ,OAAO,CAAC4E,QAAQ,CAAEzG,IAAI,EAAEsG,QAAQ,EAAExC,SAAU,CAAC;UAAA;UAAA;YAAA,OAAA0C,SAAA,CAAAlF,IAAA;QAAA;MAAA,GAAA+E,QAAA;IAAA;EACtD,CAAC;EAED;EACA;EACA;EACA;EACA;EACA;EACA;EACMO,IAAI,WAAAA,KAACjF,GAAG,EAAAkF,KAAA,EAAqB;IAAA,OAAAzH,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAAwH,SAAA;MAAA,IAAA9G,IAAA,EAAAE,EAAA,EAAAR,GAAA,EAAAmC,OAAA,EAAAC,QAAA,EAAA6C,GAAA,EAAA3C,GAAA,EAAA+E,aAAA,EAAAC,QAAA,EAAAC,GAAA;MAAA,OAAA5H,kBAAA,CAAAmB,IAAA,UAAA0G,UAAAC,SAAA;QAAA,kBAAAA,SAAA,CAAAxG,IAAA,GAAAwG,SAAA,CAAAvG,IAAA;UAAA;YAAjBZ,IAAI,GAAA6G,KAAA,CAAJ7G,IAAI,EAAEE,EAAE,GAAA2G,KAAA,CAAF3G,EAAE,EAAER,GAAG,GAAAmH,KAAA,CAAHnH,GAAG;YAAA,IACxBQ,EAAE;cAAAiH,SAAA,CAAAvG,IAAA;cAAA;YAAA;YACLwE,OAAO,CAACgC,KAAK,CAAC,0CAA0C,EAAEpH,IAAI,EAAEE,EAAE,CAAC,CAAC,CAAC;YAAA,OAAAiH,SAAA,CAAA9F,MAAA;UAAA;YAK/DQ,OAAO,GAAeF,GAAG,CAAzBE,OAAO,EAAEC,QAAQ,GAAKH,GAAG,CAAhBG,QAAQ;YAEzBpC,GAAG,GAAGA,GAAG,IAAI,CAAC,CAAC;YAEfM,IAAI,GAAG9B,aAAa,CAAC8B,IAAI,CAAC;YAE1BoF,OAAO,CAACC,GAAG,WAAAlE,MAAA,CAAYQ,GAAG,CAAC2D,KAAK,CAACC,MAAM,CAACzB,SAAS,QAAA3C,MAAA,CAAOnB,IAAI,OAAAmB,MAAA,CAAMjB,EAAE,CAAG,CAAC,CAAC,CAAC;YAAA,MAGrER,GAAG,CAACwF,KAAK,KAAK,IAAI;cAAAiC,SAAA,CAAAvG,IAAA;cAAA;YAAA;YACrB+D,GAAG,GAAG9C,OAAO,CAACwF,IAAI,CAACrH,IAAI,EAAEE,EAAE,CAAC;YAAC,KAExByE,GAAG;cAAAwC,SAAA,CAAAvG,IAAA;cAAA;YAAA;YAAA,OAAAuG,SAAA,CAAA9F,MAAA,WACCsD,GAAG;UAAA;YAIdjF,GAAG,GAAGA,GAAG,IAAI,CAAC,CAAC;YACfA,GAAG,CAACmB,GAAG,GAAGgB,OAAO,CAAC2D,MAAM,CAACxF,IAAI,EAAEE,EAAE,EAAER,GAAG,CAAC;YAACyH,SAAA,CAAAvG,IAAA;YAAA,OAEtBkB,QAAQ,CAAC,SAAS,EAAE;cAAEpC,GAAG,EAAHA,GAAG;cAAEM,IAAI,EAAJA;YAAK,CAAC,CAAC;UAAA;YAA9CgC,GAAG,GAAAmF,SAAA,CAAA/F,IAAA;YAAA+F,SAAA,CAAAvG,IAAA;YAAA,OAEHkB,QAAQ,CAAC,MAAM,EAAE;cAAEvB,IAAI,EAAEyB;YAAI,CAAC,CAAC;UAAA;YAErC,IAAKtC,GAAG,CAACkC,KAAK,KAAK,KAAK,EAAG;cACnBoF,QAAQ,GAAG;gBACfhH,IAAI,EAAJA,IAAI;gBACJE,EAAE,EAAFA,EAAE;gBACF0C,QAAQ,EAAEZ,GAAG,aAAHA,GAAG,gBAAA+E,aAAA,GAAH/E,GAAG,CAAEsF,QAAQ,cAAAP,aAAA,uBAAbA,aAAA,CAAeQ,eAAe;gBACxCrC,KAAK,EAAKxF,GAAG,CAACuG,UAAU,KAAK;cAC/B,CAAC;cAEKgB,GAAG,GAAG/G,EAAE,CAACsH,OAAO,CAAC,GAAG,CAAC;cAE3B,IAAKP,GAAG,GAAG,CAAC,EAAG;gBACbD,QAAQ,CAAClD,SAAS,GAAG5D,EAAE,CAACuH,MAAM,CAAC,CAAC,EAAER,GAAG,CAAC;gBACtCD,QAAQ,CAAC9G,EAAE,GAAGA,EAAE,CAACuH,MAAM,CAACR,GAAG,GAAG,CAAC,CAAC;cAClC;cAEAnF,QAAQ,CAAC,OAAO,EAAEkF,QAAQ,CAAC;YAC7B;YAEArC,GAAG,GAAG9C,OAAO,CAACwF,IAAI,CAACrH,IAAI,EAAEE,EAAE,CAAC;YAE5B/B,eAAc,CAAC+H,oBAAoB,CAACvE,GAAG,EAAE3B,IAAI,CAAC;YAAC,OAAAmH,SAAA,CAAA9F,MAAA,WAExCsD,GAAG;UAAA;UAAA;YAAA,OAAAwC,SAAA,CAAA7F,IAAA;QAAA;MAAA,GAAAwF,QAAA;IAAA;EACZ,CAAC;EAEDtE,IAAI,WAAAA,KAACb,GAAG,EAAA+F,KAAA,EAAsB;IAAA,IAAlBnH,IAAI,GAAAmH,KAAA,CAAJnH,IAAI;MAAEyF,QAAQ,GAAA0B,KAAA,CAAR1B,QAAQ;IACxB,IAAQnE,OAAO,GAAaF,GAAG,CAAvBE,OAAO;MAAEE,MAAM,GAAKJ,GAAG,CAAdI,MAAM;IAEvB,IAAI/B,IAAI,GAAG9B,aAAa,CAACqC,IAAI,CAACP,IAAI,CAAC;IAEnC,IAAK,CAAC6B,OAAO,CAAC2B,cAAc,CAACxD,IAAI,CAAC,EAAG;MACnC+B,MAAM,CAAC,cAAc,EAAE/B,IAAI,CAAC;IAC9B;IAEA,IAAKO,IAAI,CAACoH,QAAQ,IAAIpH,IAAI,CAACoH,QAAQ,KAAKpH,IAAI,CAACP,IAAI,EAAG;MAClDA,IAAI,GAAG9B,aAAa,CAACqC,IAAI,CAACoH,QAAQ,CAAC;MAEnC,IAAK,CAAC9F,OAAO,CAAC2B,cAAc,CAACxD,IAAI,CAAC,EAAG;QACnC+B,MAAM,CAAC,cAAc,EAAE/B,IAAI,CAAC;MAC9B;IACF;IACA;IACA,IAAKA,IAAI,KAAKnC,MAAM,EAAG;MACrBO,oBAAoB,CAACmC,IAAI,CAAC;IAC5B;IAEA,IAAMqH,QAAQ,GAAG/F,OAAO,CAACgG,eAAe,CAAC7H,IAAI,CAAC;IAC9C,IAAME,EAAE,GAAG,CAAAK,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAGqH,QAAQ,CAAC,MAAI5B,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAG4B,QAAQ,CAAC;IAEnD,IAAK,CAAC1H,EAAE,EAAG;MACTkF,OAAO,CAAC0C,IAAI,CAAC,0CAA0C,EAAEvH,IAAI,EAAEyF,QAAQ,CAAC,CAAC,CAAC;;MAE1E;IACF;IAEAjE,MAAM,CAAC,MAAM,EAAE;MACbJ,GAAG,EAAHA,GAAG;MACHpB,IAAI,EAAJA,IAAI;MACJyF,QAAQ,EAARA;IACF,CAAC,CAAC;IAEF,IAAKhG,IAAI,KAAKnC,MAAM,EAAG;MACrBkE,MAAM,CAAC,wBAAwB,EAAE,IAAI,EAAE;QAAE6B,IAAI,EAAE;MAAK,CAAC,CAAC;IACxD;IAEA,OAAO/B,OAAO,CAAC,MAAM,CAAC,CAAC7B,IAAI,EAAEE,EAAE,CAAC;EAClC,CAAC;EAED6H,SAAS,WAAAA,UAACpG,GAAG,EAAEpB,IAAI,EAAE;IACnB,IAAQwB,MAAM,GAAKJ,GAAG,CAAdI,MAAM;IAEdA,MAAM,CAAC,WAAW,EAAE;MAClBxB,IAAI,EAAJA,IAAI;MACJoB,GAAG,EAAHA;IACF,CAAC,CAAC;EACJ,CAAC;EAEDqG,YAAY,WAAAA,aAACrG,GAAG,EAAEsG,KAAK,EAAE;IACvB,IAAQlG,MAAM,GAAKJ,GAAG,CAAdI,MAAM;IAEdA,MAAM,CAAC,cAAc,EAAE;MACrBJ,GAAG,EAAHA,GAAG;MACHsG,KAAK,EAALA;IACF,CAAC,CAAC;EACJ,CAAC;EAEDC,OAAO,WAAAA,QAACvG,GAAG,EAAAwG,KAAA,EAAkB;IAAA,IAAdnI,IAAI,GAAAmI,KAAA,CAAJnI,IAAI;MAAEO,IAAI,GAAA4H,KAAA,CAAJ5H,IAAI;IACvB,IAAQwB,MAAM,GAAKJ,GAAG,CAAdI,MAAM;IAEdA,MAAM,CAAC,SAAS,EAAE;MAChBJ,GAAG,EAAHA,GAAG;MACH3B,IAAI,EAAJA,IAAI;MACJO,IAAI,EAAJA;IACF,CAAC,CAAC;EACJ,CAAC;EAED6H,MAAM,WAAAA,OAACzG,GAAG,EAAEpB,IAAI,EAAE;IAChB,OAAOtC,QAAQ,CAAC0D,GAAG,EAAEpB,IAAI,CAAC;EAC5B,CAAC;EAED8H,UAAU,WAAAA,WAAC1G,GAAG,EAAEpB,IAAI,EAAE;IACpB,OAAOA,IAAI,CAAC+H,GAAG,CAAC,UAACC,CAAC;MAAA,OAAKtK,QAAQ,CAAC0D,GAAG,EAAE4G,CAAC,CAAC;IAAA,EAAC;EAC1C,CAAC;EAEDC,eAAe,WAAAA,gBAAC7G,GAAG,EAAE8G,QAAQ,EAAE;IAC7B,IAAMlI,IAAI,GAAGoB,GAAG,CAACE,OAAO,CAAC,YAAY,CAAC,CAAC4G,QAAQ,CAACzI,IAAI,CAAC;IAErDpC,KAAK,CAAC2C,IAAI,EAAEkI,QAAQ,CAAC;IAErB,OAAOxK,QAAQ,CAAC0D,GAAG,EAAEpB,IAAI,CAAC;EAC5B,CAAC;EAEDmI,KAAK,WAAAA,MAAC/G,GAAG,EAAqB;IAAA,IAAAgH,KAAA,GAAAxJ,SAAA,CAAAmD,MAAA,QAAAnD,SAAA,QAAAoD,SAAA,GAAApD,SAAA,MAAJ,CAAC,CAAC;MAAfyJ,QAAQ,GAAAD,KAAA,CAARC,QAAQ;IACnB,OAAO3K,QAAQ,CAAC0D,GAAG,EAAEiH,QAAQ,CAACC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC;EAC/C,CAAC;EAED;EACA;EACAC,UAAU,WAAAA,WAAAC,KAAA,EAA8B/I,IAAI,EAAE;IAAA,IAAjC+B,MAAM,GAAAgH,KAAA,CAANhH,MAAM;MAAED,QAAQ,GAAAiH,KAAA,CAARjH,QAAQ;MAAEwD,KAAK,GAAAyD,KAAA,CAALzD,KAAK;IAClCA,KAAK,CAAC0D,OAAO,CACVtC,MAAM,CAAC,UAACuC,KAAK;MAAA,OAAKA,KAAK,CAACjJ,IAAI,KAAKA,IAAI;IAAA,EAAC,CACtC2C,OAAO,CAAC,UAACsG,KAAK;MAAA,OAAKnH,QAAQ,CAAC,SAAS,EAAEmH,KAAK,CAAC;IAAA,EAAC;IAEjDlH,MAAM,CAAC,YAAY,EAAE/B,IAAI,CAAC;EAC5B,CAAC;EAEDkJ,YAAY,WAAAA,aAAAC,KAAA,EAAoBC,SAAS,EAAG;IAAA,IAA7BrH,MAAM,GAAAoH,KAAA,CAANpH,MAAM;MAAEuD,KAAK,GAAA6D,KAAA,CAAL7D,KAAK;IAC1BvD,MAAM,CAAC,gCAAgC,EAAEqH,SAAS,EAAE;MAAExF,IAAI,EAAE;IAAK,CAAC,CAAC;EACrE,CAAC;EAEDyF,WAAW,WAAAA,YAAAC,MAAA,EAAoB/I,IAAI,EAAG;IAAA,IAAxBwB,MAAM,GAAAuH,MAAA,CAANvH,MAAM;MAAEuD,KAAK,GAAAgE,MAAA,CAALhE,KAAK;IACzBvD,MAAM,CAAC,+BAA+B,EAAExB,IAAI,EAAE;MAAEqD,IAAI,EAAE;IAAK,CAAC,CAAC;EAC/D,CAAC;EAED2F,cAAc,WAAAA,eAAAC,MAAA,EAAAC,MAAA,EAEX;IAAA,IAFc5H,OAAO,GAAA2H,MAAA,CAAP3H,OAAO;MAAEC,QAAQ,GAAA0H,MAAA,CAAR1H,QAAQ;IAAA,IAChC8G,QAAQ,GAAAa,MAAA,CAARb,QAAQ;MAAEc,UAAU,GAAAD,MAAA,CAAVC,UAAU;MAAEC,IAAI,GAAAF,MAAA,CAAJE,IAAI;MAAEjK,GAAG,GAAA+J,MAAA,CAAH/J,GAAG;IAE/B,MAAM,IAAIoD,KAAK,CAAC,iBAAiB,CAAC;EACpC,CAAC;EAED8G,gBAAgB,WAAAA,iBAAAC,MAAA,EAAAC,MAAA,EAEb;IAAA,IAFgBjI,OAAO,GAAAgI,MAAA,CAAPhI,OAAO;MAAEC,QAAQ,GAAA+H,MAAA,CAAR/H,QAAQ;IAAA,IAClC9B,IAAI,GAAA8J,MAAA,CAAJ9J,IAAI;MAAE0J,UAAU,GAAAI,MAAA,CAAVJ,UAAU;MAAEC,IAAI,GAAAG,MAAA,CAAJH,IAAI;MAAEjK,GAAG,GAAAoK,MAAA,CAAHpK,GAAG;IAE3B,MAAM,IAAIoD,KAAK,CAAC,iBAAiB,CAAC;EACpC,CAAC;EAEDiH,WAAW,WAAAA,YAACpI,GAAG,EAAEiH,QAAQ,EAAE;IACzB,MAAM,IAAI9F,KAAK,CAAC,iBAAiB,CAAC;EACpC,CAAC;EAEDkH,eAAe,WAAAA,gBAACrI,GAAG,EAAEiH,QAAQ,EAAE;IAC7B,MAAM,IAAI9F,KAAK,CAAC,iBAAiB,CAAC;EACpC,CAAC;EAEDmH,YAAY,WAAAA,aAACtI,GAAG,EAAEiH,QAAQ,EAAE;IAC1B,MAAM,IAAI9F,KAAK,CAAC,iBAAiB,CAAC;EACpC,CAAC;EAED;EACA;EACAoH,cAAc,WAAAA,eAACvI,GAAG,EAAEiH,QAAQ,EAAE;IAC5B,OAAOA,QAAQ;EACjB,CAAC;EAEDuB,gBAAgB,WAAAA,iBAACxI,GAAG,EAAEiH,QAAQ,EAAE;IAC9B,OAAOA,QAAQ;EACjB,CAAC;EAED;EACMwB,aAAa,WAAAA,cAAAC,MAAA,EAAAC,MAAA,EAAkC;IAAA,OAAAlL,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAAiL,SAAA;MAAA,IAAA1I,OAAA,EAAAC,QAAA,EAAA9B,IAAA,EAAAwK,KAAA,EAAAC,MAAA;MAAA,OAAApL,kBAAA,CAAAmB,IAAA,UAAAkK,UAAAC,SAAA;QAAA,kBAAAA,SAAA,CAAAhK,IAAA,GAAAgK,SAAA,CAAA/J,IAAA;UAAA;YAA/BiB,OAAO,GAAAwI,MAAA,CAAPxI,OAAO,EAAEC,QAAQ,GAAAuI,MAAA,CAARvI,QAAQ;YAAM9B,IAAI,GAAAsK,MAAA,CAAJtK,IAAI;YAC3CwK,KAAK,GAAG9L,oBAAoB;YAC5B+L,MAAM,GAAG,IAAI;UAAA;YAAA,MAEV,CAACA,MAAM,IAAID,KAAK,GAAG,CAAC;cAAAG,SAAA,CAAA/J,IAAA;cAAA;YAAA;YACzB6J,MAAM,GAAG5I,OAAO,CAAC,WAAW,CAAC,CAAC7B,IAAI,CAAC;YAAC,IAE/ByK,MAAM;cAAAE,SAAA,CAAA/J,IAAA;cAAA;YAAA;YACT,IAAI4J,KAAK,KAAK7L,sBAAsB,EAAE;cACpCyG,OAAO,CAAC0C,IAAI,eAAA3G,MAAA,CAAgBnB,IAAI,kCAAgC,CAAC,CAAC,CAAC;YACrE;YAAC2K,SAAA,CAAA/J,IAAA;YAAA,OACK,IAAIoD,OAAO,CAAC,UAAC4G,OAAO;cAAA,OAAKC,UAAU,CAACD,OAAO,EAAE,IAAI,CAAC;YAAA,EAAC;UAAA;YACzDJ,KAAK,EAAE;UAAC;YAAAG,SAAA,CAAA/J,IAAA;YAAA;UAAA;YAAA,MAIR4J,KAAK,KAAK,CAAC;cAAAG,SAAA,CAAA/J,IAAA;cAAA;YAAA;YACb;YACAwE,OAAO,CAAC0C,IAAI,eAAA3G,MAAA,CAAgBnB,IAAI,mDAAiD,CAAC,CAAC,CAAC;YAAA2K,SAAA,CAAA/J,IAAA;YAAA,OAC9EkB,QAAQ,CAAC,aAAa,EAAE,IAAI,CAAC;UAAA;UAAA;YAAA,OAAA6I,SAAA,CAAArJ,IAAA;QAAA;MAAA,GAAAiJ,QAAA;IAAA;EAEvC,CAAC;EAEDO,oBAAoB,WAAAA,qBAAAC,MAAA,EAAanC,QAAQ,EAAE;IAAA,IAApB7G,MAAM,GAAAgJ,MAAA,CAANhJ,MAAM;IAC3BA,MAAM,CAAC,sBAAsB,EAAE6G,QAAQ,CAAC;EAC1C,CAAC;EAEDzK,cAAc,WAAAA,eAACwD,GAAG,EAAEqJ,WAAW,EAAE;IAC/B,OAAO7M,eAAc,CAACA,cAAc,CAACwD,GAAG,EAAEqJ,WAAW,CAAC;EACxD,CAAC;EAEDC,YAAY,WAAAA,aAAAC,MAAA,EAAY;IAAA,IAAT5F,KAAK,GAAA4F,MAAA,CAAL5F,KAAK;IAClBnH,eAAc,CAAC8M,YAAY,CAAC3F,KAAK,CAAC;EACpC;AACF,CAAC"}]}