{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--17-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/steve/header-warnings.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/steve/header-warnings.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnRyaW0uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuZW5kcy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCB7IGdldFBlcmZvcm1hbmNlU2V0dGluZyB9IGZyb20gJ0BzaGVsbC91dGlscy9zZXR0aW5ncyc7Ci8qKgogKiBDYWNoZSB0aGUga3ViZSBhcGkgd2FybmluZyBoZWFkZXIgc2V0dGluZ3MgdGhhdCB3aWxsIGRldGVybWluZSBpZiB0aGV5IGFyZSBncm93bGVkIG9yIG5vdAogKi8KdmFyIHdhcm5pbmdIZWFkZXJTZXR0aW5nczsKLyoqCiAqIEV4dHJhY3Qgc2FuaXRpc2VkIHdhcm5pbmdzIGZyb20gdGhlIHdhcm5pbmdzIGhlYWRlciBzdHJpbmcKICovCmZ1bmN0aW9uIGt1YmVBcGlIZWFkZXJXYXJuaW5ncyhhbGxXYXJuaW5ncykgewogIC8vIEZpbmQgZWFjaCB3YXJuaW5nLgogIC8vIEVhY2ggd2FybmluZyBpcyBzZXBhcmF0ZWQgYnkgYCxgLi4uIGhvd2V2ZXIuLi4gdGhpcyBjYW4gYXBwZWFyIHdpdGhpbiB0aGUgd2FybmluZyBpdHNlbGYgc28gY2FuJ3QgYHNwbGl0YCBvbiBpdAogIC8vIEluc3RlYWQgcHJvdmlkZSBhIGNvbmZpZ3VyYWJsZSB3YXkgdG8gc3BsaXQgKGRlZmF1bHQgMjk5IC0gKQogIHZhciB3YXJuaW5ncyA9IGFsbFdhcm5pbmdzLnNwbGl0KHdhcm5pbmdIZWFkZXJTZXR0aW5ncy5zZXBhcmF0b3IpIHx8IFtdOwogIC8vIFRyaW0gYW5kIHJlbW92ZSBlZmZlY3RzIG9mIHNwbGl0CiAgcmV0dXJuIHdhcm5pbmdzLnJlZHVjZShmdW5jdGlvbiAocmVzLCB3YXJuaW5nKSB7CiAgICB2YXIgdHJpbW1lZFdhcm5pbmcgPSB3YXJuaW5nLnRyaW0oKTsKICAgIGlmICghdHJpbW1lZFdhcm5pbmcpIHsKICAgICAgcmV0dXJuIHJlczsKICAgIH0KICAgIHZhciBmaXhlZFdhcm5pbmcgPSB0cmltbWVkV2FybmluZy5lbmRzV2l0aCgnLCcpID8gdHJpbW1lZFdhcm5pbmcuc2xpY2UoMCwgLTEpIDogdHJpbW1lZFdhcm5pbmc7CiAgICAvLyBXaHkgYWRkIHRoZSBzZXBhcmF0b3IgYWdhaW4/IEl0J3MgYWxtb3N0IGNlcnRhaW5seSBgMjk5IC0gYCB3aGljaCBpcyBpbXBvcnRhbnQgaW5mbyB0byBpbmNsdWRlCiAgICByZXMucHVzaCh3YXJuaW5nSGVhZGVyU2V0dGluZ3Muc2VwYXJhdG9yICsgZml4ZWRXYXJuaW5nKTsKICAgIHJldHVybiByZXM7CiAgfSwgW10pOwp9Ci8qKgogKiBUYWtlIGFjdGlvbiBnaXZlbiB0aGUgYHdhcm5pbmdzYCBpbiB0aGUgcmVzcG9uc2UgaGVhZGVyIG9mIGEga3ViZSBhcGkgcmVxdWVzdAogKi8KLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9leHBsaWNpdC1tb2R1bGUtYm91bmRhcnktdHlwZXMKZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUt1YmVBcGlIZWFkZXJXYXJuaW5ncyhyZXMsIGRpc3BhdGNoLCByb290R2V0dGVycywgbWV0aG9kKSB7CiAgdmFyIHJlZnJlc2hDYWNoZSA9IGFyZ3VtZW50cy5sZW5ndGggPiA0ICYmIGFyZ3VtZW50c1s0XSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzRdIDogZmFsc2U7CiAgdmFyIF9hLCBfYiwgX2MsIF9kOwogIHZhciBzYWZlTWV0aG9kID0gbWV0aG9kID09PSBudWxsIHx8IG1ldGhvZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWV0aG9kLnRvTG93ZXJDYXNlKCk7IC8vIFNvbWUgcmVxdWVzdHMgaGF2ZSB0aGlzIGFzIHVwcGVyY2FzZQogIC8vIEV4aXQgZWFybHkgaWYgdGhlcmUncyBubyB3YXJuaW5ncwogIGlmIChzYWZlTWV0aG9kICE9PSAncG9zdCcgJiYgc2FmZU1ldGhvZCAhPT0gJ3B1dCcgfHwgISgoX2EgPSByZXMuaGVhZGVycykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLndhcm5pbmcpKSB7CiAgICByZXR1cm47CiAgfQogIC8vIEdyYWIgdGhlIHJlcXVpcmVkIHNldHRpbmdzCiAgaWYgKCF3YXJuaW5nSGVhZGVyU2V0dGluZ3MgfHwgcmVmcmVzaENhY2hlKSB7CiAgICB2YXIgc2V0dGluZ3MgPSBnZXRQZXJmb3JtYW5jZVNldHRpbmcocm9vdEdldHRlcnMpOwogICAgLy8gQ2FjaGUgdGhpcywgd2UgZG9uJ3QgbmVlZCB0byByZWFjdCB0byBjaGFuZ2VzIHdpdGhpbiB0aGUgc2FtZSBzZXNzaW9uCiAgICB3YXJuaW5nSGVhZGVyU2V0dGluZ3MgPSBzZXR0aW5ncyA9PT0gbnVsbCB8fCBzZXR0aW5ncyA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2V0dGluZ3Mua3ViZUFQSS53YXJuaW5nSGVhZGVyOwogIH0KICAvLyBEZXRlcm1pbmUgZWFjaCB3YXJuaW5nCiAgdmFyIHNhbml0aXNlZFdhcm5pbmdzID0ga3ViZUFwaUhlYWRlcldhcm5pbmdzKChfYiA9IHJlcy5oZWFkZXJzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Iud2FybmluZyk7CiAgaWYgKCFzYW5pdGlzZWRXYXJuaW5ncy5sZW5ndGgpIHsKICAgIHJldHVybjsKICB9CiAgLy8gU2hvd3Mgd2FybmluZ3MgYXMgZ3Jvd2xzCiAgdmFyIGdyb3dsV2FybmluZ3MgPSBzYW5pdGlzZWRXYXJuaW5ncy5maWx0ZXIoZnVuY3Rpb24gKHcpIHsKICAgIHJldHVybiAhd2FybmluZ0hlYWRlclNldHRpbmdzLm5vdGlmaWNhdGlvbkJsb2NrTGlzdC5maW5kKGZ1bmN0aW9uIChibG9ja2VkKSB7CiAgICAgIHJldHVybiB3LnN0YXJ0c1dpdGgoYmxvY2tlZCk7CiAgICB9KTsKICB9KTsKICBpZiAoZ3Jvd2xXYXJuaW5ncy5sZW5ndGgpIHsKICAgIHZhciByZXNvdXJjZVR5cGUgPSAoKF9jID0gcmVzLmRhdGEpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy50eXBlKSB8fCAoKF9kID0gcmVzLmRhdGEpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5raW5kKSB8fCByb290R2V0dGVyc1snaTE4bi90J10oJ2dlbmVyaWMucmVzb3VyY2UnLCB7CiAgICAgIGNvdW50OiAxCiAgICB9KTsKICAgIGRpc3BhdGNoKCdncm93bC93YXJuaW5nJywgewogICAgICB0aXRsZTogbWV0aG9kID09PSAncHV0JyA/IHJvb3RHZXR0ZXJzWydpMThuL3QnXSgnZ3Jvd2wua3ViZUFwaUhlYWRlcldhcm5pbmcudGl0bGVVcGRhdGUnLCB7CiAgICAgICAgcmVzb3VyY2VUeXBlOiByZXNvdXJjZVR5cGUKICAgICAgfSkgOiByb290R2V0dGVyc1snaTE4bi90J10oJ2dyb3dsLmt1YmVBcGlIZWFkZXJXYXJuaW5nLnRpdGxlQ3JlYXRlJywgewogICAgICAgIHJlc291cmNlVHlwZTogcmVzb3VyY2VUeXBlCiAgICAgIH0pLAogICAgICBtZXNzYWdlOiBncm93bFdhcm5pbmdzLmpvaW4oJywgJyksCiAgICAgIHRpbWVvdXQ6IDAKICAgIH0sIHsKICAgICAgcm9vdDogdHJ1ZQogICAgfSk7CiAgfQogIC8vIFByaW50IHdhcm5pbmdzIHRvIGNvbnNvbGUKICB2YXIgbWVzc2FnZSA9ICJWYWxpZGF0aW9uIFdhcm5pbmdzIGZvciAiLmNvbmNhdChyZXMuY29uZmlnLnVybCwgIlxuXG4iKS5jb25jYXQoc2FuaXRpc2VkV2FybmluZ3Muam9pbignXG4nKSk7CiAgaWYgKHByb2Nlc3MuZW52LmRldikgewogICAgY29uc29sZS53YXJuKCIiLmNvbmNhdChtZXNzYWdlLCAiXG5cbiIpLCByZXMuZGF0YSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogIH0gZWxzZSB7CiAgICBjb25zb2xlLmRlYnVnKG1lc3NhZ2UpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICB9Cn0="},{"version":3,"names":["getPerformanceSetting","warningHeaderSettings","kubeApiHeaderWarnings","allWarnings","warnings","split","separator","reduce","res","warning","trimmedWarning","trim","fixedWarning","endsWith","slice","push","handleKubeApiHeaderWarnings","dispatch","rootGetters","method","refreshCache","arguments","length","undefined","safeMethod","toLowerCase","_a","headers","settings","kubeAPI","warningHeader","sanitisedWarnings","_b","growlWarnings","filter","w","notificationBlockList","find","blocked","startsWith","resourceType","_c","data","type","_d","kind","count","title","message","join","timeout","root","concat","config","url","process","env","dev","console","warn","debug"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/steve/header-warnings.ts"],"sourcesContent":["import { PerfSettingsWarningHeaders } from '@shell/config/settings';\nimport { getPerformanceSetting } from '@shell/utils/settings';\n\ninterface HttpResponse {\n  headers?: { [key: string]: string},\n  data?: any,\n  config: {\n    url: string,\n  }\n}\n\n/**\n * Cache the kube api warning header settings that will determine if they are growled or not\n */\nlet warningHeaderSettings: PerfSettingsWarningHeaders;\n\n/**\n * Extract sanitised warnings from the warnings header string\n */\nfunction kubeApiHeaderWarnings(allWarnings: string): string[] {\n  // Find each warning.\n  // Each warning is separated by `,`... however... this can appear within the warning itself so can't `split` on it\n  // Instead provide a configurable way to split (default 299 - )\n  const warnings = allWarnings.split(warningHeaderSettings.separator) || [];\n\n  // Trim and remove effects of split\n  return warnings.reduce((res, warning) => {\n    const trimmedWarning = warning.trim();\n\n    if (!trimmedWarning) {\n      return res;\n    }\n\n    const fixedWarning = trimmedWarning.endsWith(',') ? trimmedWarning.slice(0, -1) : trimmedWarning;\n\n    // Why add the separator again? It's almost certainly `299 - ` which is important info to include\n    res.push(warningHeaderSettings.separator + fixedWarning);\n\n    return res;\n  }, [] as string[]);\n}\n\n/**\n * Take action given the `warnings` in the response header of a kube api request\n */\n// eslint-disable-next-line @typescript-eslint/explicit-module-boundary-types\nexport function handleKubeApiHeaderWarnings(res: HttpResponse, dispatch: any, rootGetters: any, method: string, refreshCache = false): void {\n  const safeMethod = method?.toLowerCase(); // Some requests have this as uppercase\n\n  // Exit early if there's no warnings\n  if ((safeMethod !== 'post' && safeMethod !== 'put') || !res.headers?.warning) {\n    return;\n  }\n\n  // Grab the required settings\n  if (!warningHeaderSettings || refreshCache) {\n    const settings = getPerformanceSetting(rootGetters);\n\n    // Cache this, we don't need to react to changes within the same session\n    warningHeaderSettings = settings?.kubeAPI.warningHeader;\n  }\n\n  // Determine each warning\n  const sanitisedWarnings = kubeApiHeaderWarnings(res.headers?.warning);\n\n  if (!sanitisedWarnings.length) {\n    return;\n  }\n\n  // Shows warnings as growls\n  const growlWarnings = sanitisedWarnings.filter((w) => !warningHeaderSettings.notificationBlockList.find((blocked) => w.startsWith(blocked)));\n\n  if (growlWarnings.length) {\n    const resourceType = res.data?.type || res.data?.kind || rootGetters['i18n/t']('generic.resource', { count: 1 });\n\n    dispatch('growl/warning', {\n      title:   method === 'put' ? rootGetters['i18n/t']('growl.kubeApiHeaderWarning.titleUpdate', { resourceType }) : rootGetters['i18n/t']('growl.kubeApiHeaderWarning.titleCreate', { resourceType }),\n      message: growlWarnings.join(', '),\n      timeout: 0,\n    }, { root: true });\n  }\n\n  // Print warnings to console\n  const message = `Validation Warnings for ${ res.config.url }\\n\\n${ sanitisedWarnings.join('\\n') }`;\n\n  if (process.env.dev) {\n    console.warn(`${ message }\\n\\n`, res.data); // eslint-disable-line no-console\n  } else {\n    console.debug(message); // eslint-disable-line no-console\n  }\n}\n"],"mappings":"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"}]}