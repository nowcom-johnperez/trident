{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/management.cattle.io.projectroletemplatebinding.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/management.cattle.io.projectroletemplatebinding.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCBDcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOwppbXBvcnQgQ3J1UmVzb3VyY2UgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQ3J1UmVzb3VyY2UnOwppbXBvcnQgeyBNQU5BR0VNRU5UIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IFBST0pFQ1RfSUQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCBQcm9qZWN0TWVtYmVyRWRpdG9yIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vUHJvamVjdE1lbWJlckVkaXRvcic7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDcnVSZXNvdXJjZTogQ3J1UmVzb3VyY2UsCiAgICBQcm9qZWN0TWVtYmVyRWRpdG9yOiBQcm9qZWN0TWVtYmVyRWRpdG9yCiAgfSwKICBtaXhpbnM6IFtDcmVhdGVFZGl0Vmlld10sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBfdGhpcyRwcm9qZWN0cyQ7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5VU0VSCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuUFJPSkVDVAogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgX3RoaXMucHJvamVjdHMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfdGhpcy4kc2V0KF90aGlzLmJpbmRpbmcsICdwcm9qZWN0SWQnLCBfdGhpcy5iaW5kaW5nLnByb2plY3RJZCB8fCAoKF90aGlzJHByb2plY3RzJCA9IF90aGlzLnByb2plY3RzWzBdKSA9PT0gbnVsbCB8fCBfdGhpcyRwcm9qZWN0cyQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHByb2plY3RzJC5pZC5yZXBsYWNlKCcvJywgJzonKSkpOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYmluZGluZzogewogICAgICAgIHBlcm1pc3Npb25Hcm91cDogJ21lbWJlcicsCiAgICAgICAgY3VzdG9tOiB7fSwKICAgICAgICBwcmluY2lwYWxJZDogJycsCiAgICAgICAgcHJvamVjdElkOiB0aGlzLiRyb3V0ZS5xdWVyeVtQUk9KRUNUX0lEXQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRvbmVMb2NhdGlvbk92ZXJyaWRlOiBmdW5jdGlvbiBkb25lTG9jYXRpb25PdmVycmlkZSgpIHsKICAgICAgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5W1BST0pFQ1RfSURdKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIG5hbWU6ICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZS1pZCcsCiAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgcmVzb3VyY2U6IE1BTkFHRU1FTlQuUFJPSkVDVCwKICAgICAgICAgICAgaWQ6IHRoaXMuJHJvdXRlLnF1ZXJ5W1BST0pFQ1RfSURdLnJlcGxhY2UoJzonLCAnLycpCiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfQogICAgICByZXR1cm4gdGhpcy52YWx1ZS5saXN0TG9jYXRpb247CiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICBvbkFkZDogZnVuY3Rpb24gb25BZGQocHJpbmNpcGFsSWQpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMsICdwcmluY2lwYWxJZCcsIHByaW5jaXBhbElkKTsKICAgIH0sCiAgICBzYXZlT3ZlcnJpZGU6IGZ1bmN0aW9uIHNhdmVPdmVycmlkZSgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBhc3luY0JpbmRpbmdzLCBiaW5kaW5nczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgYXN5bmNCaW5kaW5ncyA9IF90aGlzMi5iaW5kaW5nLnJvbGVUZW1wbGF0ZUlkcy5tYXAoZnVuY3Rpb24gKHJvbGVUZW1wbGF0ZUlkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgibWFuYWdlbWVudC9jcmVhdGUiLCB7CiAgICAgICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuUFJPSkVDVF9ST0xFX1RFTVBMQVRFX0JJTkRJTkcsCiAgICAgICAgICAgICAgICAgIHJvbGVUZW1wbGF0ZU5hbWU6IHJvbGVUZW1wbGF0ZUlkLAogICAgICAgICAgICAgICAgICBwcmluY2lwYWxOYW1lOiBfdGhpczIubWVtYmVyLnByaW5jaXBhbElkLAogICAgICAgICAgICAgICAgICBwcm9qZWN0TmFtZTogX3RoaXMyLm1lbWJlci5wcm9qZWN0SWQKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYXN5bmNCaW5kaW5ncyk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBiaW5kaW5ncyA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwoYmluZGluZ3MubWFwKGZ1bmN0aW9uIChiaW5kaW5nKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gYmluZGluZy5zYXZlKCk7CiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczIuJHN0b3JlLmRpc3BhdGNoKCJtYW5hZ2VtZW50L2ZpbmRBbGwiLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBNQU5BR0VNRU5ULlBST0pFQ1RfUk9MRV9URU1QTEFURV9CSU5ESU5HLAogICAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICAgIGZvcmNlOiB0cnVlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfdGhpczIuJHJvdXRlci5yZXBsYWNlKF90aGlzMi5kb25lTG9jYXRpb25PdmVycmlkZSk7CiAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["CreateEditView","CruResource","MANAGEMENT","PROJECT_ID","ProjectMemberEditor","components","mixins","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","_this$projects$","wrap","_callee$","_context","prev","next","$store","dispatch","type","USER","PROJECT","projects","sent","$set","binding","projectId","id","replace","stop","data","permissionGroup","custom","principalId","$route","query","computed","doneLocationOverride","name","params","resource","value","listLocation","methods","onAdd","saveOverride","_this2","_callee2","asyncBindings","bindings","_callee2$","_context2","roleTemplateIds","map","roleTemplateId","PROJECT_ROLE_TEMPLATE_BINDING","roleTemplateName","principalName","member","projectName","Promise","all","save","opt","force","$router"],"sources":["node_modules/@rancher/shell/edit/management.cattle.io.projectroletemplatebinding.vue"],"sourcesContent":["<script>\r\nimport CreateEditView from '@shell/mixins/create-edit-view';\r\nimport CruResource from '@shell/components/CruResource';\r\nimport { MANAGEMENT } from '@shell/config/types';\r\nimport { PROJECT_ID } from '@shell/config/query-params';\r\nimport ProjectMemberEditor from '@shell/components/form/ProjectMemberEditor';\r\n\r\nexport default {\r\n  components: {\r\n    CruResource,\r\n    ProjectMemberEditor,\r\n  },\r\n\r\n  mixins: [CreateEditView],\r\n  async fetch() {\r\n    await this.$store.dispatch('management/findAll', { type: MANAGEMENT.USER });\r\n    this.projects = await this.$store.dispatch('management/findAll', { type: MANAGEMENT.PROJECT });\r\n    this.$set(this.binding, 'projectId', this.binding.projectId || this.projects[0]?.id.replace('/', ':'));\r\n  },\r\n  data() {\r\n    return {\r\n      binding: {\r\n        permissionGroup: 'member',\r\n        custom:          {},\r\n        principalId:     '',\r\n        projectId:       this.$route.query[PROJECT_ID],\r\n      },\r\n    };\r\n  },\r\n  computed: {\r\n    doneLocationOverride() {\r\n      if (this.$route.query[PROJECT_ID]) {\r\n        return {\r\n          name:   'c-cluster-product-resource-id',\r\n          params: {\r\n            resource: MANAGEMENT.PROJECT,\r\n            id:       this.$route.query[PROJECT_ID].replace(':', '/')\r\n          }\r\n        };\r\n      }\r\n\r\n      return this.value.listLocation;\r\n    },\r\n  },\r\n  methods: {\r\n    onAdd(principalId) {\r\n      this.$set(this, 'principalId', principalId);\r\n    },\r\n    async saveOverride() {\r\n      const asyncBindings = this.binding.roleTemplateIds.map((roleTemplateId) => this.$store.dispatch(`management/create`, {\r\n        type:             MANAGEMENT.PROJECT_ROLE_TEMPLATE_BINDING,\r\n        roleTemplateName: roleTemplateId,\r\n        principalName:    this.member.principalId,\r\n        projectName:      this.member.projectId,\r\n      }));\r\n\r\n      const bindings = await Promise.all(asyncBindings);\r\n\r\n      await Promise.all(bindings.map((binding) => binding.save()));\r\n      await this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.PROJECT_ROLE_TEMPLATE_BINDING, opt: { force: true } });\r\n\r\n      this.$router.replace(this.doneLocationOverride);\r\n    }\r\n  }\r\n};\r\n\r\n</script>\r\n\r\n<template>\r\n  <CruResource\r\n    class=\"cluster-role-template-binding\"\r\n    :errors=\"errors\"\r\n    :mode=\"mode\"\r\n    :resource=\"value\"\r\n    :subtypes=\"[]\"\r\n    :can-yaml=\"false\"\r\n    :cancel-event=\"true\"\r\n    :validation-passed=\"!!binding.principalId && !!binding.projectId\"\r\n    @error=\"e=>errors = e\"\r\n    @finish=\"saveOverride\"\r\n    @cancel=\"done\"\r\n  >\r\n    <ProjectMemberEditor v-model=\"binding\" />\r\n  </CruResource>\r\n</template>\r\n<style lang=\"scss\" scoped>\r\nlabel.radio {\r\n  font-size: 16px;\r\n}\r\n\r\n.custom-permissions {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr 1fr;\r\n}\r\n</style>\r\n"],"mappings":"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"}]}