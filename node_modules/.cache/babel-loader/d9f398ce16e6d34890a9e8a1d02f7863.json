{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--17-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/validators/formRules/index.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/validators/formRules/index.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX3NsaWNlZFRvQXJyYXkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vc2xpY2VkVG9BcnJheSI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bIkBAaXRlcmF0b3IiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgdGhyb3cgX2UyOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UzKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMzsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKSBpdC5yZXR1cm4oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfQpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldOyByZXR1cm4gYXJyMjsgfQppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcubWF0Y2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5udW1iZXIuaXMtaW50ZWdlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmpvaW4uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zdGFydHMtd2l0aC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgeyBSQkFDIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IEhDSSB9IGZyb20gJ0BzaGVsbC9jb25maWcvbGFiZWxzLWFubm90YXRpb25zJzsKaW1wb3J0IGlzRW1wdHkgZnJvbSAnbG9kYXNoL2lzRW1wdHknOwppbXBvcnQgaGFzIGZyb20gJ2xvZGFzaC9oYXMnOwovLyBpbXBvcnQgdW5pcSBmcm9tICdsb2Rhc2gvdW5pcSc7CmltcG9ydCBjcm9uc3RydWUgZnJvbSAnY3JvbnN0cnVlJzsKZXhwb3J0IHZhciBQb3J0ID0gLyojX19QVVJFX18qL19jcmVhdGVDbGFzcyhmdW5jdGlvbiBQb3J0KHBvcnQpIHsKICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgUG9ydCk7CiAgdGhpcy5zdHJpbmcgPSBTdHJpbmcocG9ydCk7CiAgdGhpcy5pbnQgPSBwYXJzZUludCh0aGlzLnN0cmluZywgMTApOwogIHRoaXMuZW1wdHkgPSAhcG9ydCAmJiB0aGlzLmludCAhPT0gMDsKICB0aGlzLmlzTnVtYmVyID0gIWlzTmFOKHRoaXMuaW50KSAmJiAhdGhpcy5zdHJpbmcuaW5jbHVkZXMoJ2UnKTsgLy8gbGVhdmluZyBvdXQgdGhlIGV4cG9uZW50IGVkZ2UgY2FzZSB0byBrZWVwIHRoZSBsb2dpYyBzaW1wbGUgYW5kIGJlY2F1c2UgcG9ydCBudW1iZXJzIGFyZW4ndCB0aGF0IGJpZy4uLgogIHRoaXMuaXNJbnQgPSB0aGlzLmlzTnVtYmVyICYmICF0aGlzLnN0cmluZy5pbmNsdWRlcygnLicpOwp9KTsKdmFyIGh0dHBzS2V5cyA9IFsnc2VydmVyLXVybCddOwp2YXIgcnVuVmFsaWRhdG9ycyA9IGZ1bmN0aW9uIHJ1blZhbGlkYXRvcnModmFsLCB2YWxpZGF0b3JzKSB7CiAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHZhbGlkYXRvcnMpLAogICAgX3N0ZXA7CiAgdHJ5IHsKICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgIHZhciB2YWxpZGF0b3IgPSBfc3RlcC52YWx1ZTsKICAgICAgdmFyIG1lc3NhZ2UgPSB2YWxpZGF0b3IodmFsKTsKICAgICAgaWYgKG1lc3NhZ2UpIHsKICAgICAgICByZXR1cm4gbWVzc2FnZTsKICAgICAgfQogICAgfQogIH0gY2F0Y2ggKGVycikgewogICAgX2l0ZXJhdG9yLmUoZXJyKTsKICB9IGZpbmFsbHkgewogICAgX2l0ZXJhdG9yLmYoKTsKICB9Cn07Ci8vICJ0IiBpcyB0aGUgZnVuY3Rpb24gbmFtZSB3ZSB1c2UgZm9yIGdldHRpbmcgYSB0cmFuc2xhdGVkIHN0cmluZwpleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAodCwgX3JlZikgewogIHZhciBfcmVmJGtleSA9IF9yZWYua2V5LAogICAga2V5ID0gX3JlZiRrZXkgPT09IHZvaWQgMCA/ICdWYWx1ZScgOiBfcmVmJGtleTsKICAvLyB1dGlsaXR5IHZhbGlkYXRvcnMgdGhlc2UgdmFsaWRhdG9ycyBvbmx5IGdldCB1c2VkIGJ5IG90aGVyIHZhbGlkYXRvcnMKICB2YXIgc3RhcnREb3QgPSBmdW5jdGlvbiBzdGFydERvdChsYWJlbCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc2xpY2UoMCwgMSkpID09PSAnLicgPyB0KCJ2YWxpZGF0aW9uLmRucy4iLmNvbmNhdChsYWJlbCwgIi5zdGFydERvdCIpLCB7CiAgICAgICAga2V5OiBrZXkKICAgICAgfSkgOiB1bmRlZmluZWQ7CiAgICB9OwogIH07CiAgdmFyIGVuZERvdCA9IGZ1bmN0aW9uIGVuZERvdChsYWJlbCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc2xpY2UoLTEpKSA9PT0gJy4nID8gdCgidmFsaWRhdGlvbi5kbnMuIi5jb25jYXQobGFiZWwsICIuZW5kRG90IiksIHsKICAgICAgICBrZXk6IGtleQogICAgICB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICB2YXIgc3RhcnROdW1iZXIgPSBmdW5jdGlvbiBzdGFydE51bWJlcihsYWJlbCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgdmFyIF9hOwogICAgICByZXR1cm4gKChfYSA9IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5zbGljZSgwLCAxKSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLm1hdGNoKC9bMC05XS8pKSA/IHQoInZhbGlkYXRpb24uZG5zLiIuY29uY2F0KGxhYmVsLCAiLnN0YXJ0TnVtYmVyIiksIHsKICAgICAgICBrZXk6IGtleQogICAgICB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICB2YXIgc3RhcnRIeXBoZW4gPSBmdW5jdGlvbiBzdGFydEh5cGhlbihsYWJlbCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc2xpY2UoMCwgMSkpID09PSAnLScgPyB0KCJ2YWxpZGF0aW9uLmRucy4iLmNvbmNhdChsYWJlbCwgIi5zdGFydEh5cGhlbiIpLCB7CiAgICAgICAga2V5OiBrZXkKICAgICAgfSkgOiB1bmRlZmluZWQ7CiAgICB9OwogIH07CiAgdmFyIGVuZEh5cGhlbiA9IGZ1bmN0aW9uIGVuZEh5cGhlbihsYWJlbCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc2xpY2UoLTEpKSA9PT0gJy0nID8gdCgidmFsaWRhdGlvbi5kbnMuIi5jb25jYXQobGFiZWwsICIuZW5kSHlwaGVuIiksIHsKICAgICAgICBrZXk6IGtleQogICAgICB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICB2YXIgbWluVmFsdWUgPSBmdW5jdGlvbiBtaW5WYWx1ZShtaW4pIHsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiBOdW1iZXIodmFsKSA8IE51bWJlcihtaW4pID8gdCgndmFsaWRhdGlvbi5taW5WYWx1ZScsIHsKICAgICAgICBrZXk6IGtleSwKICAgICAgICBtaW46IG1pbgogICAgICB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICB2YXIgbWF4VmFsdWUgPSBmdW5jdGlvbiBtYXhWYWx1ZShtYXgpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiBOdW1iZXIodmFsKSA+IE51bWJlcihtYXgpID8gdCgndmFsaWRhdGlvbi5tYXhWYWx1ZScsIHsKICAgICAgICBrZXk6IGtleSwKICAgICAgICBtYXg6IG1heAogICAgICB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICB2YXIgYmV0d2VlblZhbHVlcyA9IGZ1bmN0aW9uIGJldHdlZW5WYWx1ZXMoX3JlZjIpIHsKICAgIHZhciBfcmVmMyA9IF9zbGljZWRUb0FycmF5KF9yZWYyLCAyKSwKICAgICAgbWluID0gX3JlZjNbMF0sCiAgICAgIG1heCA9IF9yZWYzWzFdOwogICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIG1pblZhbHVlKG1pbikodmFsKSB8fCBtYXhWYWx1ZShtYXgpKHZhbCkgPyB0KCd2YWxpZGF0aW9uLmJldHdlZW5WYWx1ZXMnLCB7CiAgICAgICAga2V5OiBrZXksCiAgICAgICAgbWluOiBtaW4sCiAgICAgICAgbWF4OiBtYXgKICAgICAgfSkgOiB1bmRlZmluZWQ7CiAgICB9OwogIH07CiAgdmFyIG1pbkxlbmd0aCA9IGZ1bmN0aW9uIG1pbkxlbmd0aChtaW4pIHsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiB2YWwubGVuZ3RoIDwgTnVtYmVyKG1pbikgPyB0KCd2YWxpZGF0aW9uLm1pbkxlbmd0aCcsIHsKICAgICAgICBrZXk6IGtleSwKICAgICAgICBtaW46IG1pbgogICAgICB9KSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICB2YXIgbWF4TGVuZ3RoID0gZnVuY3Rpb24gbWF4TGVuZ3RoKG1heCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICh2YWwpIHsKICAgICAgcmV0dXJuIHZhbC5sZW5ndGggPiBOdW1iZXIobWF4KSA/IHQoJ3ZhbGlkYXRpb24ubWF4TGVuZ3RoJywgewogICAgICAgIGtleToga2V5LAogICAgICAgIG1heDogbWF4CiAgICAgIH0pIDogdW5kZWZpbmVkOwogICAgfTsKICB9OwogIHZhciBiZXR3ZWVuTGVuZ3RocyA9IGZ1bmN0aW9uIGJldHdlZW5MZW5ndGhzKF9yZWY0KSB7CiAgICB2YXIgX3JlZjUgPSBfc2xpY2VkVG9BcnJheShfcmVmNCwgMiksCiAgICAgIG1pbiA9IF9yZWY1WzBdLAogICAgICBtYXggPSBfcmVmNVsxXTsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHJldHVybiBtaW5MZW5ndGgobWluKSh2YWwpIHx8IG1heExlbmd0aChtYXgpKHZhbCkgPyB0KCd2YWxpZGF0aW9uLmJldHdlZW5MZW5ndGhzJywgewogICAgICAgIGtleToga2V5LAogICAgICAgIG1pbjogbWluLAogICAgICAgIG1heDogbWF4CiAgICAgIH0pIDogdW5kZWZpbmVkOwogICAgfTsKICB9OwogIHZhciByZXF1aXJlZEludCA9IGZ1bmN0aW9uIHJlcXVpcmVkSW50KHZhbCkgewogICAgcmV0dXJuIGlzTmFOKHBhcnNlSW50KHZhbCwgMTApKSA/IHQoJ3ZhbGlkYXRpb24ubnVtYmVyLnJlcXVpcmVkSW50JywgewogICAgICBrZXk6IGtleQogICAgfSkgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgaXNJbnRlZ2VyID0gZnVuY3Rpb24gaXNJbnRlZ2VyKHZhbCkgewogICAgcmV0dXJuICFOdW1iZXIuaXNJbnRlZ2VyKCt2YWwpIHx8ICIiLmNvbmNhdCh2YWwpLm1hdGNoKC9cLisvZykgPyB0KCd2YWxpZGF0aW9uLm51bWJlci5yZXF1aXJlZEludCcsIHsKICAgICAga2V5OiBrZXkKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGlzUG9zaXRpdmUgPSBmdW5jdGlvbiBpc1Bvc2l0aXZlKHZhbCkgewogICAgcmV0dXJuICt2YWwgPCAwID8gdCgndmFsaWRhdGlvbi5udW1iZXIuaXNQb3NpdGl2ZScsIHsKICAgICAga2V5OiBrZXkKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGlzT2N0YWwgPSBmdW5jdGlvbiBpc09jdGFsKHZhbCkgewogICAgdmFyIHZhbHVlU3RyaW5nID0gIiIuY29uY2F0KHZhbCk7CiAgICB2YXIgaXNWYWxpZCA9IHZhbHVlU3RyaW5nLm1hdGNoKC8oXjArKSguKykvKTsKICAgIHJldHVybiBpc1ZhbGlkID8gdCgndmFsaWRhdGlvbi5udW1iZXIuaXNPY3RhbCcsIHsKICAgICAga2V5OiBrZXkKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIHBvcnROdW1iZXIgPSBmdW5jdGlvbiBwb3J0TnVtYmVyKHZhbCkgewogICAgcmV0dXJuIHBhcnNlSW50KHZhbCwgMTApIDwgMSB8fCBwYXJzZUludCh2YWwsIDEwKSA+IDY1NTM1ID8gdCgndmFsaWRhdGlvbi5udW1iZXIuYmV0d2VlbicsIHsKICAgICAga2V5OiBrZXksCiAgICAgIG1pbjogJzEnLAogICAgICBtYXg6ICc2NTUzNScKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGRuc0NoYXJzID0gZnVuY3Rpb24gZG5zQ2hhcnModmFsKSB7CiAgICB2YXIgbWF0Y2hlZENoYXJzID0gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLm1hdGNoKC9bXiR7J0EtWmEtejAtOS0nfV0vZyk7CiAgICBpZiAobWF0Y2hlZENoYXJzKSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLmNoYXJzJywgewogICAgICAgIGtleToga2V5LAogICAgICAgIGNvdW50OiBtYXRjaGVkQ2hhcnMubGVuZ3RoLAogICAgICAgIGNoYXJzOiBtYXRjaGVkQ2hhcnMubWFwKGZ1bmN0aW9uIChjaGFyKSB7CiAgICAgICAgICByZXR1cm4gY2hhciA9PT0gJyAnID8gJ1NwYWNlJyA6ICJcIiIuY29uY2F0KGNoYXIsICJcIiIpOwogICAgICAgIH0pLmpvaW4oJywgJykKICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gdW5kZWZpbmVkOwogIH07CiAgLy8gdGhlIHdlaXJkIGVkZ2UgY2FzZSBoZXJlIGRlYWxzIHdpdGggaW50ZXJuYXRpb25hbGl6ZWQgZG9tYWluIG5hbWVzIHdoaWNoIGFyZSBwcmVwZW5kZWQgd2l0aCAneG4tLScKICAvLyBodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzU4OTEjc2VjdGlvbi00LjIuMy4xCiAgdmFyIGRuc0RvdWJsZURhc2ggPSBmdW5jdGlvbiBkbnNEb3VibGVEYXNoKHZhbCkgewogICAgcmV0dXJuICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc3Vic3RyKDIsIDIpKSA9PT0gJy0tJyAmJiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnN1YnN0cigwLCAyKSkgIT09ICd4bicgPyB0KCJ2YWxpZGF0aW9uLmRucy5kb3VibGVIeXBoZW4iLCB7CiAgICAgIGtleToga2V5CiAgICB9KSA6IHVuZGVmaW5lZDsKICB9OwogIHZhciBkbnNJYW5hU2VydmljZU5hbWVEb3VibGVEYXNoID0gZnVuY3Rpb24gZG5zSWFuYVNlcnZpY2VOYW1lRG91YmxlRGFzaCh2YWwpIHsKICAgIHJldHVybiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnN1YnN0cigyLCAyKSkgPT09ICctLScgJiYgKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5zdWJzdHIoMCwgMikpICE9PSAneG4nID8gdCgidmFsaWRhdGlvbi5kbnMuZG91YmxlSHlwaGVuIiwgewogICAgICBrZXk6IGtleQogICAgfSkgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgZG5zRW1wdHkgPSBmdW5jdGlvbiBkbnNFbXB0eShsYWJlbCkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHZhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogJyc7CiAgICAgIHJldHVybiB2YWwubGVuZ3RoID09PSAwID8gdCgidmFsaWRhdGlvbi5kbnMuIi5jb25jYXQobGFiZWwsICIuZW1wdHlMYWJlbCIpLCB7CiAgICAgICAga2V5OiBrZXksCiAgICAgICAgbWluOiAxCiAgICAgIH0pIDogdW5kZWZpbmVkOwogICAgfTsKICB9OwogIHZhciBkbnNUb29Mb25nID0gZnVuY3Rpb24gZG5zVG9vTG9uZyhsYWJlbCkgewogICAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogNjM7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICB2YXIgdmFsID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAnJzsKICAgICAgcmV0dXJuIHZhbC5sZW5ndGggPiBsZW5ndGggPyB0KCJ2YWxpZGF0aW9uLmRucy4iLmNvbmNhdChsYWJlbCwgIi50b29Mb25nTGFiZWwiKSwgewogICAgICAgIGtleToga2V5LAogICAgICAgIG1heDogbGVuZ3RoCiAgICAgIH0pIDogdW5kZWZpbmVkOwogICAgfTsKICB9OwogIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBuby11bnVzZWQtdmFycwogIHZhciBob3N0bmFtZUVtcHR5ID0gZnVuY3Rpb24gaG9zdG5hbWVFbXB0eSgpIHsKICAgIHZhciB2YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnOwogICAgcmV0dXJuIHZhbC5sZW5ndGggPT09IDAgPyB0KCd2YWxpZGF0aW9uLmRucy5ob3N0bmFtZS5lbXB0eScsIHsKICAgICAga2V5OiBrZXkKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGhvc3RuYW1lVG9vTG9uZyA9IGZ1bmN0aW9uIGhvc3RuYW1lVG9vTG9uZygpIHsKICAgIHZhciB2YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnOwogICAgcmV0dXJuIHZhbC5sZW5ndGggPiAyNTMgPyB0KCd2YWxpZGF0aW9uLmRucy5ob3N0bmFtZS50b29Mb25nJywgewogICAgICBrZXk6IGtleSwKICAgICAgbWF4OiAyNTMKICAgIH0pIDogdW5kZWZpbmVkOwogIH07CiAgdmFyIGFic29sdXRlUGF0aCA9IGZ1bmN0aW9uIGFic29sdXRlUGF0aCgpIHsKICAgIHZhciB2YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnOwogICAgcmV0dXJuIHZhbFswXSAhPT0gJy8nICYmIHZhbC5sZW5ndGggPiAwID8gdCgndmFsaWRhdGlvbi5wYXRoJywgewogICAgICBrZXk6IGtleQogICAgfSkgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgcmVxdWlyZWQgPSBmdW5jdGlvbiByZXF1aXJlZCh2YWwpIHsKICAgIHJldHVybiAhdmFsICYmIHZhbCAhPT0gZmFsc2UgPyB0KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgewogICAgICBrZXk6IGtleQogICAgfSkgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgbm9VcHBlckNhc2UgPSBmdW5jdGlvbiBub1VwcGVyQ2FzZSgpIHsKICAgIHZhciB2YWwgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6ICcnOwogICAgcmV0dXJuIHZhbC50b0xvd2VyQ2FzZSgpICE9PSB2YWwgPyB0KCd2YWxpZGF0aW9uLm5vVXBwZXJDYXNlJywgewogICAgICBrZXk6IGtleQogICAgfSkgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgY3JvblNjaGVkdWxlID0gZnVuY3Rpb24gY3JvblNjaGVkdWxlKHZhbCkgewogICAgdHJ5IHsKICAgICAgY3JvbnN0cnVlLnRvU3RyaW5nKHZhbCk7CiAgICB9IGNhdGNoIChlKSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLmludmFsaWRDcm9uJyk7CiAgICB9CiAgfTsKICB2YXIgaXNIdHRwcyA9IGZ1bmN0aW9uIGlzSHR0cHMoa2V5KSB7CiAgICB2YXIgaXNIdHRwcyA9IGZ1bmN0aW9uIGlzSHR0cHModmFsKSB7CiAgICAgIHJldHVybiBodHRwc0tleXMuaW5jbHVkZXMoa2V5KSAmJiAhdmFsLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSA/IHQoJ3ZhbGlkYXRpb24uc2V0dGluZy5zZXJ2ZXJVcmwuaHR0cHMnKSA6IHVuZGVmaW5lZDsKICAgIH07CiAgICByZXR1cm4gaXNIdHRwczsKICB9OwogIHZhciBpbnRlcnZhbCA9IGZ1bmN0aW9uIGludGVydmFsKHZhbCkgewogICAgcmV0dXJuICEvXlxkK1tobXNdJC8udGVzdCh2YWwpID8gdCgndmFsaWRhdGlvbi5tb25pdG9yaW5nLnJvdXRlLmludGVydmFsJywgewogICAgICBrZXk6IGtleQogICAgfSkgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgY29udGFpbmVySW1hZ2UgPSBmdW5jdGlvbiBjb250YWluZXJJbWFnZSh2YWwpIHsKICAgIHJldHVybiAhKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5pbWFnZSkgPyB0KCd3b3JrbG9hZC52YWxpZGF0aW9uLmNvbnRhaW5lckltYWdlJywgewogICAgICBuYW1lOiB2YWwubmFtZQogICAgfSkgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgY29udGFpbmVySW1hZ2VzID0gZnVuY3Rpb24gY29udGFpbmVySW1hZ2VzKHZhbCkgewogICAgdmFyIF9hLCBfYiwgX2MsIF9kLCBfZSwgX2Y7CiAgICB2YXIgY29udGFpbmVycyA9IHZhbC5qb2JUZW1wbGF0ZSA/IChfZCA9IChfYyA9IChfYiA9IChfYSA9IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5qb2JUZW1wbGF0ZSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLnNwZWMpID09PSBudWxsIHx8IF9iID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYi50ZW1wbGF0ZSkgPT09IG51bGwgfHwgX2MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jLnNwZWMpID09PSBudWxsIHx8IF9kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZC5jb250YWluZXJzIDogKF9mID0gKF9lID0gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnRlbXBsYXRlKSA9PT0gbnVsbCB8fCBfZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2Uuc3BlYykgPT09IG51bGwgfHwgX2YgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9mLmNvbnRhaW5lcnM7CiAgICBpZiAoIWNvbnRhaW5lcnMgfHwgIWNvbnRhaW5lcnMubGVuZ3RoKSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgewogICAgICAgIGtleTogdCgnd29ya2xvYWQuY29udGFpbmVyLnRpdGxlcy5jb250YWluZXJzJykKICAgICAgfSk7CiAgICB9CiAgICAvLyBtYWtpbmcgc3VyZSBlYWNoIGNvbnRhaW5lciBoYXMgYW4gaW1hZ2UgbmFtZQogICAgcmV0dXJuIGNvbnRhaW5lcnMubWFwKGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgcmV0dXJuIGNvbnRhaW5lckltYWdlKGNvbnRhaW5lcik7CiAgICB9KS5maW5kKGZ1bmN0aW9uIChjb250YWluZXJFcnJvcikgewogICAgICByZXR1cm4gY29udGFpbmVyRXJyb3I7CiAgICB9KTsKICB9OwogIHZhciBkbnNMYWJlbCA9IGZ1bmN0aW9uIGRuc0xhYmVsKHZhbCkgewogICAgdmFyIHZhbGlkYXRvcnMgPSBbZG5zQ2hhcnMsIHN0YXJ0SHlwaGVuKCdsYWJlbCcpLCBlbmRIeXBoZW4oJ2xhYmVsJyksIGRuc0RvdWJsZURhc2gsCiAgICAvLyBkbnNFbXB0eSgnbGFiZWwnKSwgLy8gcXVlc3Rpb25hYmxlIGFzIHRvIGlmIHRoaXMgaXMgbmVlZGVkIGlmIHRoZSBmaWVsZCBpcyBhbHNvIHJlcXVpcmVkLi4uCiAgICBkbnNUb29Mb25nKCdsYWJlbCcpXTsKICAgIHJldHVybiBydW5WYWxpZGF0b3JzKHZhbCwgdmFsaWRhdG9ycyk7CiAgfTsKICB2YXIgZG5zTGFiZWxJYW5hU2VydmljZU5hbWUgPSBmdW5jdGlvbiBkbnNMYWJlbElhbmFTZXJ2aWNlTmFtZSh2YWwpIHsKICAgIHZhciB2YWxpZGF0b3JzID0gW2Ruc0NoYXJzLCBzdGFydEh5cGhlbignbGFiZWwnKSwgZW5kSHlwaGVuKCdsYWJlbCcpLCBkbnNJYW5hU2VydmljZU5hbWVEb3VibGVEYXNoLCBkbnNFbXB0eSgnbGFiZWwnKSwgZG5zVG9vTG9uZygnbGFiZWwnLCAxNSldOwogICAgcmV0dXJuIHJ1blZhbGlkYXRvcnModmFsLCB2YWxpZGF0b3JzKTsKICB9OwogIHZhciBkbnNMYWJlbFJlc3RyaWN0ZWQgPSBmdW5jdGlvbiBkbnNMYWJlbFJlc3RyaWN0ZWQodmFsKSB7CiAgICB2YXIgdmFsaWRhdG9ycyA9IFtkbnNDaGFycywgc3RhcnROdW1iZXIoJ2xhYmVsJyksIHN0YXJ0SHlwaGVuKCdsYWJlbCcpLCBlbmRIeXBoZW4oJ2xhYmVsJyksIGRuc0RvdWJsZURhc2gsIGRuc0VtcHR5KCdsYWJlbCcpLCBkbnNUb29Mb25nKCdsYWJlbCcpXTsKICAgIHJldHVybiBydW5WYWxpZGF0b3JzKHZhbCwgdmFsaWRhdG9ycyk7CiAgfTsKICB2YXIgaG9zdG5hbWUgPSBmdW5jdGlvbiBob3N0bmFtZSh2YWwpIHsKICAgIGlmICh2YWwpIHsKICAgICAgdmFyIHZhbGlkYXRvcnMgPSBbc3RhcnREb3QoJ2hvc3RuYW1lJyksIGhvc3RuYW1lVG9vTG9uZywgZW5kRG90KCdob3N0bmFtZScpXTsKICAgICAgdmFyIGhvc3ROYW1lTWVzc2FnZSA9IHJ1blZhbGlkYXRvcnModmFsLCB2YWxpZGF0b3JzKTsKICAgICAgaWYgKGhvc3ROYW1lTWVzc2FnZSkgewogICAgICAgIHJldHVybiBob3N0TmFtZU1lc3NhZ2U7CiAgICAgIH0KICAgICAgdmFyIGxhYmVscyA9IHZhbC5zcGxpdCgnLicpOwogICAgICB2YXIgbGFiZWxWYWxpZGF0b3JzID0gW2Ruc0NoYXJzLCBzdGFydEh5cGhlbignaG9zdG5hbWUnKSwgZW5kSHlwaGVuKCdob3N0bmFtZScpLCBkbnNEb3VibGVEYXNoLCBkbnNFbXB0eSgnaG9zdG5hbWUnKSwgZG5zVG9vTG9uZygnaG9zdG5hbWUnKV07CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGFiZWxzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgdmFyIGxhYmVsTWVzc2FnZSA9IHJ1blZhbGlkYXRvcnMobGFiZWxzW2ldLCBsYWJlbFZhbGlkYXRvcnMpOwogICAgICAgIGlmIChsYWJlbE1lc3NhZ2UpIHsKICAgICAgICAgIHJldHVybiBsYWJlbE1lc3NhZ2U7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfTsKICB2YXIgd2lsZGNhcmRIb3N0bmFtZSA9IGZ1bmN0aW9uIHdpbGRjYXJkSG9zdG5hbWUodmFsKSB7CiAgICAvLyBhbGxvdyB3aWxkY2FyZCBpbiBmaXJzdCBwYXJ0IG9mIGhvc3RuYW1lCiAgICB2YWwgPSB2YWwgPyB2YWwucmVwbGFjZSgvXlwqXC4vLCAnJykgOiB2YWw7CiAgICByZXR1cm4gaG9zdG5hbWUodmFsKTsKICB9OwogIHZhciBleHRlcm5hbE5hbWUgPSBmdW5jdGlvbiBleHRlcm5hbE5hbWUodmFsKSB7CiAgICBpZiAoaXNFbXB0eSh2YWwpKSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UuZXh0ZXJuYWxOYW1lLm5vbmUnKTsKICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiBob3N0bmFtZSh2YWwpOwogICAgfQogIH07CiAgdmFyIHRlc3RSdWxlID0gZnVuY3Rpb24gdGVzdFJ1bGUodmFsKSB7CiAgICByZXR1cm4gJ1RoaXMgaXMgYW4gZXJyb3IgcmV0dXJuZWQgYnkgdGhlIHRlc3RSdWxlIHZhbGlkYXRvcic7CiAgfTsKICB2YXIgcnVsZUdyb3VwcyA9IGZ1bmN0aW9uIHJ1bGVHcm91cHModmFsKSB7CiAgICByZXR1cm4gaXNFbXB0eSh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuZ3JvdXBzKSA/IHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnJlcXVpcmVkJykgOiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgY2x1c3Rlck5hbWUgPSBmdW5jdGlvbiBjbHVzdGVyTmFtZShpc1JrZTIpIHsKICAgIHJldHVybiBmdW5jdGlvbiAodmFsKSB7CiAgICAgIHZhciBfYTsKICAgICAgcmV0dXJuIGlzUmtlMiAmJiAoKF9hID0gdmFsIHx8ICcnKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EubWF0Y2goL14oYy0uezV9fGxvY2FsKSQvaSkpID8gdCgndmFsaWRhdGlvbi5jbHVzdGVyLm5hbWUnKSA6IHVuZGVmaW5lZDsKICAgIH07CiAgfTsKICB2YXIgc2VydmljZVBvcnQgPSBmdW5jdGlvbiBzZXJ2aWNlUG9ydCh2YWwpIHsKICAgIHZhciBfYTsKICAgIHZhciBuYW1lID0gdmFsLm5hbWUsCiAgICAgIGlkeCA9IHZhbC5pZHg7CiAgICB2YXIgbm9kZVBvcnQgPSBuZXcgUG9ydCh2YWwubm9kZVBvcnQpOwogICAgdmFyIGxpc3RlbmluZ1BvcnQgPSBuZXcgUG9ydCh2YWwucG9ydCk7CiAgICB2YXIgdGFyZ2V0UG9ydCA9IG5ldyBQb3J0KHZhbC50YXJnZXRQb3J0KTsKICAgIGlmIChpc0VtcHR5KG5hbWUpKSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMubmFtZS5yZXF1aXJlZCcsIHsKICAgICAgICBwb3NpdGlvbjogaWR4ICsgMQogICAgICB9KTsKICAgIH0KICAgIGlmICghbm9kZVBvcnQuZW1wdHkpIHsKICAgICAgaWYgKCFub2RlUG9ydC5pc0ludCkgewogICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMubm9kZVBvcnQucmVxdWlyZWRJbnQnLCB7CiAgICAgICAgICBwb3NpdGlvbjogaWR4ICsgMQogICAgICAgIH0pOwogICAgICB9IGVsc2UgaWYgKG5vZGVQb3J0LmludCA8IDEgfHwgbm9kZVBvcnQuaW50ID4gNjU1MzUpIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLnBvcnRzLm5vZGVQb3J0LmJldHdlZW4nLCB7CiAgICAgICAgICBwb3NpdGlvbjogaWR4ICsgMQogICAgICAgIH0pOwogICAgICB9CiAgICB9CiAgICBpZiAoIWxpc3RlbmluZ1BvcnQuZW1wdHkpIHsKICAgICAgaWYgKCFsaXN0ZW5pbmdQb3J0LmlzSW50KSB7CiAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5wb3J0cy5wb3J0LnJlcXVpcmVkSW50JywgewogICAgICAgICAgcG9zaXRpb246IGlkeCArIDEKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmIChsaXN0ZW5pbmdQb3J0LmludCA8IDEgfHwgbGlzdGVuaW5nUG9ydC5pbnQgPiA2NTUzNSkgewogICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMucG9ydC5iZXR3ZWVuJywgewogICAgICAgICAgcG9zaXRpb246IGlkeCArIDEKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICgoX2EgPSBsaXN0ZW5pbmdQb3J0LnN0cmluZykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmluY2x1ZGVzKCcuJykpIHsKICAgICAgICByZXR1cm4gbGlzdGVuaW5nUG9ydDsKICAgICAgfQogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5wb3J0cy5wb3J0LnJlcXVpcmVkJywgewogICAgICAgIHBvc2l0aW9uOiBpZHggKyAxCiAgICAgIH0pOwogICAgfQogICAgaWYgKCF0YXJnZXRQb3J0LmVtcHR5KSB7CiAgICAgIGlmICghdGFyZ2V0UG9ydC5pc0ludCkgewogICAgICAgIHZhciBpYW5hU2VydmljZU5hbWVFcnJvcnMgPSBkbnNMYWJlbElhbmFTZXJ2aWNlTmFtZSh0YXJnZXRQb3J0LnN0cmluZyk7CiAgICAgICAgaWYgKGlhbmFTZXJ2aWNlTmFtZUVycm9ycykgewogICAgICAgICAgcmV0dXJuIGlhbmFTZXJ2aWNlTmFtZUVycm9yczsKICAgICAgICB9CiAgICAgIH0gZWxzZSBpZiAodGFyZ2V0UG9ydC5pbnQgPCAxIHx8IHRhcmdldFBvcnQuaW50ID4gNjU1MzUpIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLnBvcnRzLnRhcmdldFBvcnQuYmV0d2VlbicsIHsKICAgICAgICAgIHBvc2l0aW9uOiBpZHggKyAxCiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMudGFyZ2V0UG9ydC5yZXF1aXJlZCcsIHsKICAgICAgICBwb3NpdGlvbjogaWR4ICsgMQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgZ3JvdXBJc1ZhbGlkID0gZnVuY3Rpb24gZ3JvdXBJc1ZhbGlkKHZhbCwgcmVhZGFibGVJbmRleCkgewogICAgdmFyIHJldHVybk1lc3NhZ2U7CiAgICBpZiAoaXNFbXB0eSh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwubmFtZSkpIHsKICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnZhbGlkLm5hbWUnLCB7CiAgICAgICAgaW5kZXg6IHJlYWRhYmxlSW5kZXgKICAgICAgfSk7CiAgICB9CiAgICBpZiAoaXNFbXB0eSh2YWwucnVsZXMpKSB7CiAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnByb21ldGhldXNSdWxlLmdyb3Vwcy52YWxpZC5zaW5nbGVFbnRyeScsIHsKICAgICAgICBpbmRleDogcmVhZGFibGVJbmRleAogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHZhbC5ydWxlcy5mb3JFYWNoKGZ1bmN0aW9uIChydWxlLCBpZHgpIHsKICAgICAgICB2YXIgcmVhZGFibGVSdWxlSW5kZXggPSBpZHggKyAxOwogICAgICAgIGlmIChoYXMocnVsZSwgJ2FsZXJ0JykgJiYgaXNFbXB0eShydWxlID09PSBudWxsIHx8IHJ1bGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJ1bGUuYWxlcnQpICYmICFyZXR1cm5NZXNzYWdlKSB7CiAgICAgICAgICByZXR1cm5NZXNzYWdlID0gdCgndmFsaWRhdGlvbi5wcm9tZXRoZXVzUnVsZS5ncm91cHMudmFsaWQucnVsZS5hbGVydE5hbWUnLCB7CiAgICAgICAgICAgIGdyb3VwSW5kZXg6IHJlYWRhYmxlSW5kZXgsCiAgICAgICAgICAgIHJ1bGVJbmRleDogcmVhZGFibGVSdWxlSW5kZXgKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSBpZiAoaGFzKHJ1bGUsICdyZWNvcmQnKSAmJiBpc0VtcHR5KHJ1bGUgPT09IG51bGwgfHwgcnVsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcnVsZS5yZWNvcmQpKSB7CiAgICAgICAgICByZXR1cm5NZXNzYWdlID0gdCgndmFsaWRhdGlvbi5wcm9tZXRoZXVzUnVsZS5ncm91cHMudmFsaWQucnVsZS5yZWNvcmROYW1lJywgewogICAgICAgICAgICBncm91cEluZGV4OiByZWFkYWJsZUluZGV4LAogICAgICAgICAgICBydWxlSW5kZXg6IHJlYWRhYmxlUnVsZUluZGV4CiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgaWYgKGhhcyhydWxlLCAnZXhwcicpICYmIGlzRW1wdHkocnVsZS5leHByKSAmJiAhcmV0dXJuTWVzc2FnZSB8fCAhaGFzKHJ1bGUsICdleHByJykgJiYgIXJldHVybk1lc3NhZ2UpIHsKICAgICAgICAgIHJldHVybk1lc3NhZ2UgPSB0KCd2YWxpZGF0aW9uLnByb21ldGhldXNSdWxlLmdyb3Vwcy52YWxpZC5ydWxlLmV4cHInLCB7CiAgICAgICAgICAgIGdyb3VwSW5kZXg6IHJlYWRhYmxlSW5kZXgsCiAgICAgICAgICAgIHJ1bGVJbmRleDogcmVhZGFibGVSdWxlSW5kZXgKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBpZiAoaGFzKHJ1bGUsICdhbGVydCcpKSB7CiAgICAgICAgICBpZiAoaGFzKHJ1bGUsICdsYWJlbHMnKSAmJiBpc0VtcHR5KHJ1bGUubGFiZWxzKSAmJiAhcmV0dXJuTWVzc2FnZSB8fCAhaGFzKHJ1bGUsICdsYWJlbHMnKSAmJiAhcmV0dXJuTWVzc2FnZSkgewogICAgICAgICAgICByZXR1cm5NZXNzYWdlID0gdCgndmFsaWRhdGlvbi5wcm9tZXRoZXVzUnVsZS5ncm91cHMudmFsaWQucnVsZS5sYWJlbHMnLCB7CiAgICAgICAgICAgICAgZ3JvdXBJbmRleDogcmVhZGFibGVJbmRleCwKICAgICAgICAgICAgICBydWxlSW5kZXg6IHJlYWRhYmxlUnVsZUluZGV4CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgICByZXR1cm4gcmV0dXJuTWVzc2FnZTsKICB9OwogIHZhciBncm91cHNBcmVWYWxpZCA9IGZ1bmN0aW9uIGdyb3Vwc0FyZVZhbGlkKHZhbCkgewogICAgdmFyIGdyb3VwcyA9IF90b0NvbnN1bWFibGVBcnJheSh2YWwpOyAvLyBtYWtpbmcgYSBuZXcgYXJyYXkgaW4gdGhlIGZ1bmN0aW9uIGJlY2F1c2UgSSdtIGdvbm5hIG11dGF0ZSBpdCBsYXRlci4uLgogICAgdmFyIG1lc3NhZ2U7CiAgICBncm91cHMuZm9yRWFjaChmdW5jdGlvbiAoZ3JvdXAsIGlkeCwgYXJyKSB7CiAgICAgIG1lc3NhZ2UgPSBncm91cElzVmFsaWQoZ3JvdXAsIGlkeCArIDEpOwogICAgICBpZiAoISFtZXNzYWdlKSB7CiAgICAgICAgYXJyLmxlbmd0aCA9IGlkeCArIDE7IC8vIHRoaXMgaXMgYSB0cmlja3N5IHdheSBvZiBicmVha2luZyBhIGZvckVhY2ggbG9vcCBzaW5jZSB3ZSBqdXN0IHdhbnQgdGhlIGZpcnN0IG1lc3NhZ2UKICAgICAgfQogICAgfSk7CiAgICByZXR1cm4gbWVzc2FnZTsKICB9OwogIHZhciBtYXRjaGluZyA9IGZ1bmN0aW9uIG1hdGNoaW5nKHZhbCkgewogICAgaWYgKGlzRW1wdHkodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLm1hdGNoKSAmJiBpc0VtcHR5KHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbFsnbWF0Y2hfcmUnXSkpIHsKICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ubW9uaXRvcmluZy5yb3V0ZS5tYXRjaCcpOwogICAgfQogIH07CiAgdmFyIHJvbGVUZW1wbGF0ZVJ1bGVzID0gZnVuY3Rpb24gcm9sZVRlbXBsYXRlUnVsZXModHlwZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIHZhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogW107CiAgICAgIGlmICh2YWwuc29tZShmdW5jdGlvbiAocnVsZSkgewogICAgICAgIHJldHVybiBpc0VtcHR5KHJ1bGUudmVyYnMpOwogICAgICB9KSkgewogICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJvbGVUZW1wbGF0ZS5yb2xlVGVtcGxhdGVSdWxlcy5taXNzaW5nVmVyYicpOwogICAgICB9CiAgICAgIGlmICh2YWwuc29tZShmdW5jdGlvbiAocnVsZSkgewogICAgICAgIHZhciBfYSwgX2I7CiAgICAgICAgcmV0dXJuICgoX2EgPSBydWxlLnJlc291cmNlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgJiYgKChfYiA9IHJ1bGUubm9uUmVzb3VyY2VVUkxzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubGVuZ3RoKTsKICAgICAgfSkpIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yb2xlVGVtcGxhdGUucm9sZVRlbXBsYXRlUnVsZXMubm9SZXNvdXJjZUFuZE5vblJlc291cmNlJyk7CiAgICAgIH0KICAgICAgaWYgKHR5cGUgPT09IFJCQUMuUk9MRSkgewogICAgICAgIGlmICh2YWwuc29tZShmdW5jdGlvbiAocnVsZSkgewogICAgICAgICAgcmV0dXJuIGlzRW1wdHkocnVsZS5yZXNvdXJjZXMpOwogICAgICAgIH0pKSB7CiAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yb2xlVGVtcGxhdGUucm9sZVRlbXBsYXRlUnVsZXMubWlzc2luZ1Jlc291cmNlJyk7CiAgICAgICAgfQogICAgICAgIGlmICh2YWwuc29tZShmdW5jdGlvbiAocnVsZSkgewogICAgICAgICAgcmV0dXJuIGlzRW1wdHkocnVsZS5hcGlHcm91cHMpOwogICAgICAgIH0pKSB7CiAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yb2xlVGVtcGxhdGUucm9sZVRlbXBsYXRlUnVsZXMubWlzc2luZ0FwaUdyb3VwJyk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHZhbC5zb21lKGZ1bmN0aW9uIChydWxlKSB7CiAgICAgICAgcmV0dXJuIGlzRW1wdHkocnVsZS5yZXNvdXJjZXMpICYmIGlzRW1wdHkocnVsZS5ub25SZXNvdXJjZVVSTHMpICYmIGlzRW1wdHkocnVsZS5hcGlHcm91cHMpOwogICAgICB9KSkgewogICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJvbGVUZW1wbGF0ZS5yb2xlVGVtcGxhdGVSdWxlcy5taXNzaW5nT25lUmVzb3VyY2UnKTsKICAgICAgfQogICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfTsKICB9OwogIC8vIFRoZSBleGlzdGluZyB2YWxpZGF0b3IgZm9yIGNsdXN0ZXJJcCBuZXZlciBhY3R1YWxseSByZXR1cm5zIGFuIGVycm9yCiAgdmFyIGNsdXN0ZXJJcCA9IGZ1bmN0aW9uIGNsdXN0ZXJJcCh2YWwpIHsKICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgYmFja3VwVGFyZ2V0ID0gZnVuY3Rpb24gYmFja3VwVGFyZ2V0KHZhbCkgewogICAgdmFyIHBhcnNlVmFsdWUgPSBKU09OLnBhcnNlKHZhbCk7CiAgICB2YXIgdHlwZSA9IHBhcnNlVmFsdWUudHlwZTsKICAgIGlmICghdHlwZSkgewogICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsKICAgICAgICBrZXk6ICdUeXBlJwogICAgICB9KTsKICAgIH0KICAgIGlmICh0eXBlID09PSAnczMnKSB7CiAgICAgIGlmICghcGFyc2VWYWx1ZS5hY2Nlc3NLZXlJZCkgewogICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgewogICAgICAgICAga2V5OiAnYWNjZXNzS2V5SWQnCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKCFwYXJzZVZhbHVlLnNlY3JldEFjY2Vzc0tleSkgewogICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgewogICAgICAgICAga2V5OiAnc2VjcmV0QWNjZXNzS2V5JwogICAgICAgIH0pOwogICAgICB9CiAgICAgIGlmICghcGFyc2VWYWx1ZS5idWNrZXRSZWdpb24pIHsKICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yZXF1aXJlZCcsIHsKICAgICAgICAgIGtleTogJ2J1Y2tldFJlZ2lvbicKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAoIXBhcnNlVmFsdWUuYnVja2V0TmFtZSkgewogICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgewogICAgICAgICAga2V5OiAnYnVja2V0TmFtZScKICAgICAgICB9KTsKICAgICAgfQogICAgfQogICAgcmV0dXJuIHVuZGVmaW5lZDsKICB9OwogIHZhciBpbWFnZVVybCA9IGZ1bmN0aW9uIGltYWdlVXJsKHZhbCkgewogICAgdmFyIFZNX0lNQUdFX0ZJTEVfRk9STUFUID0gWydxY293JywgJ3Fjb3cyJywgJ3JhdycsICdpbWcnLCAnaXNvJ107CiAgICBpZiAoIXZhbCB8fCB2YWwgPT09ICcnKSB7CiAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9CiAgICB2YXIgdXJsU2x1ZyA9IHZhbC5zcGxpdCgnLycpLnBvcCgpOwogICAgdmFyIGZpbGVFeHRlbnNpb24gPSB1cmxTbHVnLnNwbGl0KCcuJykucG9wKCkudG9Mb3dlckNhc2UoKTsKICAgIGlmICghVk1fSU1BR0VfRklMRV9GT1JNQVQuaW5jbHVkZXMoZmlsZUV4dGVuc2lvbikpIHsKICAgICAgcmV0dXJuIHQoJ2hhcnZlc3Rlci52YWxpZGF0aW9uLmltYWdlLnJ1bGVUaXAnKTsKICAgIH0KICAgIHJldHVybiB1bmRlZmluZWQ7CiAgfTsKICB2YXIgZmlsZVJlcXVpcmVkID0gZnVuY3Rpb24gZmlsZVJlcXVpcmVkKCkgewogICAgdmFyIHZhbCA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDoge307CiAgICBpZiAoIXZhbFtIQ0kuSU1BR0VfTkFNRV0pIHsKICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7CiAgICAgICAga2V5OiB0KCdoYXJ2ZXN0ZXIuaW1hZ2UuZmlsZU5hbWUnKQogICAgICB9KTsKICAgIH0KICB9OwogIHZhciBzdWJEb21haW4gPSBmdW5jdGlvbiBzdWJEb21haW4odmFsKSB7CiAgICB2YXIgbWF0Y2hlZENoYXJzID0gdmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLm1hdGNoKC9bXmEtejAtOS4tXS9nKTsKICAgIGlmIChtYXRjaGVkQ2hhcnMpIHsKICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uY2hhcnMnLCB7CiAgICAgICAga2V5OiBrZXksCiAgICAgICAgY291bnQ6IG1hdGNoZWRDaGFycy5sZW5ndGgsCiAgICAgICAgY2hhcnM6IG1hdGNoZWRDaGFycy5tYXAoZnVuY3Rpb24gKGNoYXIpIHsKICAgICAgICAgIHJldHVybiBjaGFyID09PSAnICcgPyAnU3BhY2UnIDogIlwiIi5jb25jYXQoY2hhciwgIlwiIik7CiAgICAgICAgfSkuam9pbignLCAnKQogICAgICB9KTsKICAgIH0KICAgIHJldHVybiBydW5WYWxpZGF0b3JzKHZhbCwgW3N0YXJ0SHlwaGVuKCdsYWJlbCcpLCBlbmRIeXBoZW4oJ2xhYmVsJyksIHN0YXJ0RG90KCdsYWJlbCcpLCBlbmREb3QoJ2xhYmVsJyksIHJlcXVpcmVkXSk7CiAgfTsKICByZXR1cm4gewogICAgYWJzb2x1dGVQYXRoOiBhYnNvbHV0ZVBhdGgsCiAgICBiYWNrdXBUYXJnZXQ6IGJhY2t1cFRhcmdldCwKICAgIGJldHdlZW5MZW5ndGhzOiBiZXR3ZWVuTGVuZ3RocywKICAgIGJldHdlZW5WYWx1ZXM6IGJldHdlZW5WYWx1ZXMsCiAgICBjbHVzdGVySXA6IGNsdXN0ZXJJcCwKICAgIGNsdXN0ZXJOYW1lOiBjbHVzdGVyTmFtZSwKICAgIGNvbnRhaW5lckltYWdlOiBjb250YWluZXJJbWFnZSwKICAgIGNvbnRhaW5lckltYWdlczogY29udGFpbmVySW1hZ2VzLAogICAgY3JvblNjaGVkdWxlOiBjcm9uU2NoZWR1bGUsCiAgICBkbnNMYWJlbDogZG5zTGFiZWwsCiAgICBkbnNMYWJlbElhbmFTZXJ2aWNlTmFtZTogZG5zTGFiZWxJYW5hU2VydmljZU5hbWUsCiAgICBkbnNMYWJlbFJlc3RyaWN0ZWQ6IGRuc0xhYmVsUmVzdHJpY3RlZCwKICAgIGV4dGVybmFsTmFtZTogZXh0ZXJuYWxOYW1lLAogICAgZmlsZVJlcXVpcmVkOiBmaWxlUmVxdWlyZWQsCiAgICBncm91cHNBcmVWYWxpZDogZ3JvdXBzQXJlVmFsaWQsCiAgICBob3N0bmFtZTogaG9zdG5hbWUsCiAgICBpbWFnZVVybDogaW1hZ2VVcmwsCiAgICBpbnRlcnZhbDogaW50ZXJ2YWwsCiAgICBpc0h0dHBzOiBpc0h0dHBzLAogICAgbWF0Y2hpbmc6IG1hdGNoaW5nLAogICAgbWF4TGVuZ3RoOiBtYXhMZW5ndGgsCiAgICBtYXhWYWx1ZTogbWF4VmFsdWUsCiAgICBtaW5MZW5ndGg6IG1pbkxlbmd0aCwKICAgIG1pblZhbHVlOiBtaW5WYWx1ZSwKICAgIG5vVXBwZXJDYXNlOiBub1VwcGVyQ2FzZSwKICAgIHBvcnROdW1iZXI6IHBvcnROdW1iZXIsCiAgICByZXF1aXJlZDogcmVxdWlyZWQsCiAgICByZXF1aXJlZEludDogcmVxdWlyZWRJbnQsCiAgICBpc0ludGVnZXI6IGlzSW50ZWdlciwKICAgIGlzUG9zaXRpdmU6IGlzUG9zaXRpdmUsCiAgICBpc09jdGFsOiBpc09jdGFsLAogICAgcm9sZVRlbXBsYXRlUnVsZXM6IHJvbGVUZW1wbGF0ZVJ1bGVzLAogICAgcnVsZUdyb3VwczogcnVsZUdyb3VwcywKICAgIHNlcnZpY2VQb3J0OiBzZXJ2aWNlUG9ydCwKICAgIHN1YkRvbWFpbjogc3ViRG9tYWluLAogICAgdGVzdFJ1bGU6IHRlc3RSdWxlLAogICAgd2lsZGNhcmRIb3N0bmFtZTogd2lsZGNhcmRIb3N0bmFtZQogIH07Cn0="},{"version":3,"names":["RBAC","HCI","isEmpty","has","cronstrue","Port","_createClass","port","_classCallCheck","string","String","int","parseInt","empty","isNumber","isNaN","includes","isInt","httpsKeys","runValidators","val","validators","_iterator","_createForOfIteratorHelper","_step","s","n","done","validator","value","message","err","e","f","t","_ref","_ref$key","key","startDot","label","slice","concat","undefined","endDot","startNumber","_a","match","startHyphen","endHyphen","minValue","min","Number","maxValue","max","betweenValues","_ref2","_ref3","_slicedToArray","minLength","length","maxLength","betweenLengths","_ref4","_ref5","requiredInt","isInteger","isPositive","isOctal","valueString","isValid","portNumber","dnsChars","matchedChars","count","chars","map","char","join","dnsDoubleDash","substr","dnsIanaServiceNameDoubleDash","dnsEmpty","arguments","dnsTooLong","hostnameEmpty","hostnameTooLong","absolutePath","required","noUpperCase","toLowerCase","cronSchedule","toString","isHttps","startsWith","interval","test","containerImage","image","name","containerImages","containers","jobTemplate","_d","_c","_b","spec","template","_f","_e","container","find","containerError","dnsLabel","dnsLabelIanaServiceName","dnsLabelRestricted","hostname","hostNameMessage","labels","split","labelValidators","i","labelMessage","wildcardHostname","replace","externalName","testRule","ruleGroups","groups","clusterName","isRke2","servicePort","idx","nodePort","listeningPort","targetPort","position","ianaServiceNameErrors","groupIsValid","readableIndex","returnMessage","index","rules","forEach","rule","readableRuleIndex","alert","groupIndex","ruleIndex","record","expr","groupsAreValid","_toConsumableArray","group","arr","matching","roleTemplateRules","type","some","verbs","resources","nonResourceURLs","ROLE","apiGroups","clusterIp","backupTarget","parseValue","JSON","parse","accessKeyId","secretAccessKey","bucketRegion","bucketName","imageUrl","VM_IMAGE_FILE_FORMAT","urlSlug","pop","fileExtension","fileRequired","IMAGE_NAME","subDomain"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/validators/formRules/index.ts"],"sourcesContent":["import { RBAC } from '@shell/config/types';\nimport { HCI } from '@shell/config/labels-annotations';\nimport isEmpty from 'lodash/isEmpty';\nimport has from 'lodash/has';\n// import uniq from 'lodash/uniq';\nimport cronstrue from 'cronstrue';\nimport { Translation } from '@shell/types/t';\n\n// import uniq from 'lodash/uniq';\nexport type Validator<T = undefined | string> = (val: any, arg?: any) => T;\n\nexport type ValidatorFactory = (arg1: any, arg2?: any) => Validator\n\ntype ServicePort = {\n  name?: string,\n  nodePort?: string | number,\n  port?: string | number,\n  targetPort?: string | number,\n  idx: number\n}\n\nexport class Port {\n  empty: boolean;\n  int: number;\n  string: string;\n  isNumber: boolean;\n  isInt: boolean;\n  constructor(port: number | string | undefined) {\n    this.string = String(port);\n    this.int = parseInt(this.string, 10);\n    this.empty = (!port && this.int !== 0);\n    this.isNumber = !isNaN(this.int) && !this.string.includes('e'); // leaving out the exponent edge case to keep the logic simple and because port numbers aren't that big...\n    this.isInt = this.isNumber && !this.string.includes('.');\n  }\n}\n\nconst httpsKeys = [\n  'server-url'\n];\n\nconst runValidators = (val: any, validators: Validator[]) => {\n  for (const validator of validators) {\n    const message = validator(val);\n\n    if (message) {\n      return message;\n    }\n  }\n};\n\nexport interface ValidationOptions {\n  key?: string,\n}\n\n// \"t\" is the function name we use for getting a translated string\nexport default function(t: Translation, { key = 'Value' }: ValidationOptions): { [key:string]: Validator<any> | ValidatorFactory } {\n  // utility validators these validators only get used by other validators\n  const startDot: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1) === '.' ? t(`validation.dns.${ label }.startDot`, { key }) : undefined;\n\n  const endDot = (label: string): Validator => (val: string) => val?.slice(-1) === '.' ? t(`validation.dns.${ label }.endDot`, { key }) : undefined;\n\n  const startNumber: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1)?.match(/[0-9]/) ? t(`validation.dns.${ label }.startNumber`, { key }) : undefined;\n\n  const startHyphen: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1) === '-' ? t(`validation.dns.${ label }.startHyphen`, { key }) : undefined;\n\n  const endHyphen: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(-1) === '-' ? t(`validation.dns.${ label }.endHyphen`, { key }) : undefined;\n\n  const minValue: ValidatorFactory = (min: string) => (val: string | number) => Number(val) < Number(min) ? t('validation.minValue', { key, min }) : undefined;\n\n  const maxValue: ValidatorFactory = (max: string) => (val: string | number) => Number(val) > Number(max) ? t('validation.maxValue', { key, max }) : undefined;\n\n  const betweenValues: ValidatorFactory = ([min, max]: string[]) => (val: string | number) => minValue(min)(val) || maxValue(max)(val) ? t('validation.betweenValues', {\n    key, min, max\n  }) : undefined;\n\n  const minLength: ValidatorFactory = (min: string) => (val: string) => val.length < Number(min) ? t('validation.minLength', { key, min }) : undefined;\n\n  const maxLength: ValidatorFactory = (max: string) => (val: string) => val.length > Number(max) ? t('validation.maxLength', { key, max }) : undefined;\n\n  const betweenLengths: ValidatorFactory = ([min, max]: string[]) => (val: string) => minLength(min)(val) || maxLength(max)(val) ? t('validation.betweenLengths', {\n    key, min, max\n  }) : undefined;\n\n  const requiredInt: Validator = (val: string) => isNaN(parseInt(val, 10)) ? t('validation.number.requiredInt', { key }) : undefined;\n\n  const isInteger: Validator = (val: string | number) => !Number.isInteger(+val) || `${ val }`.match(/\\.+/g) ? t('validation.number.requiredInt', { key }) : undefined;\n\n  const isPositive: Validator = (val: string | number) => +val < 0 ? t('validation.number.isPositive', { key }) : undefined;\n\n  const isOctal: Validator = (val: string | number) => {\n    const valueString = `${ val }`;\n    const isValid = valueString.match(/(^0+)(.+)/);\n\n    return isValid ? t('validation.number.isOctal', { key }) : undefined;\n  };\n\n  const portNumber: Validator = (val: string) => parseInt(val, 10) < 1 || parseInt(val, 10) > 65535 ? t('validation.number.between', {\n    key, min: '1', max: '65535'\n  }) : undefined;\n\n  const dnsChars: Validator = (val: string) => {\n    const matchedChars = val?.match(/[^${'A-Za-z0-9-'}]/g);\n\n    if (matchedChars) {\n      return t('validation.chars', {\n        key, count: matchedChars.length, chars: matchedChars.map((char) => char === ' ' ? 'Space' : `\"${ char }\"`).join(', ')\n      });\n    }\n\n    return undefined;\n  };\n\n  // the weird edge case here deals with internationalized domain names which are prepended with 'xn--'\n  // https://datatracker.ietf.org/doc/html/rfc5891#section-4.2.3.1\n  const dnsDoubleDash: Validator = (val: string) => (val?.substr(2, 2) === '--' && val?.substr(0, 2) !== 'xn') ? t(`validation.dns.doubleHyphen`, { key }) : undefined;\n\n  const dnsIanaServiceNameDoubleDash: Validator = (val: string) => (val?.substr(2, 2) === '--' && val?.substr(0, 2) !== 'xn') ? t(`validation.dns.doubleHyphen`, { key }) : undefined;\n\n  const dnsEmpty: ValidatorFactory = (label: string): Validator => (val = '') => val.length === 0 ? t(`validation.dns.${ label }.emptyLabel`, { key, min: 1 }) : undefined;\n\n  const dnsTooLong: ValidatorFactory = (label: string, length = 63): Validator => (val = '') => val.length > length ? t(`validation.dns.${ label }.tooLongLabel`, { key, max: length }) : undefined;\n\n  // eslint-disable-next-line no-unused-vars\n  const hostnameEmpty: Validator = (val = '') => val.length === 0 ? t('validation.dns.hostname.empty', { key }) : undefined;\n\n  const hostnameTooLong: Validator = (val = '') => val.length > 253 ? t('validation.dns.hostname.tooLong', { key, max: 253 }) : undefined;\n\n  const absolutePath: Validator = (val = '') => val[0] !== '/' && val.length > 0 ? t('validation.path', { key }) : undefined;\n\n  const required: Validator = (val: any) => !val && val !== false ? t('validation.required', { key }) : undefined;\n\n  const noUpperCase: Validator = (val = '') => val.toLowerCase() !== val ? t('validation.noUpperCase', { key }) : undefined;\n\n  const cronSchedule: Validator = (val: string) => {\n    try {\n      cronstrue.toString(val);\n    } catch (e) {\n      return t('validation.invalidCron');\n    }\n  };\n\n  const isHttps: ValidatorFactory = (key: string) => {\n    const isHttps: Validator = (val: string) => httpsKeys.includes(key) && !val.toLowerCase().startsWith('https://') ? t('validation.setting.serverUrl.https') : undefined;\n\n    return isHttps;\n  };\n\n  const interval: Validator = (val: string) => !/^\\d+[hms]$/.test(val) ? t('validation.monitoring.route.interval', { key }) : undefined;\n\n  const containerImage: Validator = (val: any) => !val?.image ? t('workload.validation.containerImage', { name: val.name }) : undefined;\n\n  const containerImages: Validator = (val: any | [any]) => {\n    const containers = val.jobTemplate ? val?.jobTemplate?.spec?.template?.spec?.containers : val?.template?.spec?.containers;\n\n    if (!containers || !containers.length) {\n      return t('validation.required', { key: t('workload.container.titles.containers') });\n    }\n\n    // making sure each container has an image name\n    return containers.map((container: any) => containerImage(container)).find((containerError: string) => containerError);\n  };\n\n  const dnsLabel: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsDoubleDash,\n      // dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label')\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const dnsLabelIanaServiceName: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsIanaServiceNameDoubleDash,\n      dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label', 15)\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const dnsLabelRestricted: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startNumber('label'),\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsDoubleDash,\n      dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label')\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const hostname: Validator = (val: string) => {\n    if (val) {\n      const validators = [\n        startDot('hostname'),\n        hostnameTooLong,\n        endDot('hostname')\n      ];\n\n      const hostNameMessage = runValidators(val, validators);\n\n      if (hostNameMessage) {\n        return hostNameMessage;\n      }\n\n      const labels = val.split('.');\n      const labelValidators = [\n        dnsChars,\n        startHyphen('hostname'),\n        endHyphen('hostname'),\n        dnsDoubleDash,\n        dnsEmpty('hostname'),\n        dnsTooLong('hostname')\n      ];\n\n      for ( let i = 0; i < labels.length; i++ ) {\n        const labelMessage = runValidators(labels[i], labelValidators);\n\n        if (labelMessage) {\n          return labelMessage;\n        }\n      }\n    }\n  };\n\n  const wildcardHostname: Validator = (val: string) => {\n    // allow wildcard in first part of hostname\n    val = val ? val.replace(/^\\*\\./, '') : val;\n\n    return hostname(val);\n  };\n\n  const externalName: Validator = (val: string) => {\n    if (isEmpty(val)) {\n      return t('validation.service.externalName.none');\n    } else {\n      return hostname(val);\n    }\n  };\n\n  const testRule = (val: string | undefined) => {\n    return 'This is an error returned by the testRule validator';\n  };\n\n  const ruleGroups: Validator = (val: {groups?: any}) => isEmpty(val?.groups) ? t('validation.prometheusRule.groups.required') : undefined;\n\n  const clusterName: ValidatorFactory = (isRke2: boolean): Validator => (val: string | undefined) => isRke2 && (val || '')?.match(/^(c-.{5}|local)$/i) ? t('validation.cluster.name') : undefined;\n\n  const servicePort: Validator<string | Port | undefined> = (val: ServicePort) => {\n    const {\n      name,\n      idx\n    } = val;\n\n    const nodePort = new Port(val.nodePort);\n    const listeningPort = new Port(val.port);\n    const targetPort = new Port(val.targetPort);\n\n    if (isEmpty(name)) {\n      return t('validation.service.ports.name.required', { position: idx + 1 });\n    }\n\n    if (!nodePort.empty) {\n      if (!nodePort.isInt) {\n        return t('validation.service.ports.nodePort.requiredInt', { position: idx + 1 });\n      } else if (nodePort.int < 1 || nodePort.int > 65535) {\n        return t('validation.service.ports.nodePort.between', { position: idx + 1 });\n      }\n    }\n\n    if (!listeningPort.empty) {\n      if (!listeningPort.isInt) {\n        return t('validation.service.ports.port.requiredInt', { position: idx + 1 });\n      } else if (listeningPort.int < 1 || listeningPort.int > 65535) {\n        return t('validation.service.ports.port.between', { position: idx + 1 });\n      } else if (listeningPort.string?.includes('.')) {\n        return listeningPort;\n      }\n    } else {\n      return t('validation.service.ports.port.required', { position: idx + 1 });\n    }\n\n    if (!targetPort.empty) {\n      if (!targetPort.isInt) {\n        const ianaServiceNameErrors = dnsLabelIanaServiceName(targetPort.string);\n\n        if (ianaServiceNameErrors) {\n          return ianaServiceNameErrors;\n        }\n      } else if (targetPort.int < 1 || targetPort.int > 65535) {\n        return t('validation.service.ports.targetPort.between', { position: idx + 1 });\n      }\n    } else {\n      return t('validation.service.ports.targetPort.required', { position: idx + 1 });\n    }\n\n    return undefined;\n  };\n\n  const groupIsValid: Validator = (val, readableIndex) => {\n    let returnMessage: string | undefined;\n\n    if (isEmpty(val?.name)) {\n      return t('validation.prometheusRule.groups.valid.name', { index: readableIndex });\n    }\n\n    if (isEmpty(val.rules)) {\n      return t('validation.prometheusRule.groups.valid.singleEntry', { index: readableIndex });\n    } else {\n      val.rules.forEach((rule: any, idx: number) => {\n        const readableRuleIndex = idx + 1;\n\n        if (has(rule, 'alert') && isEmpty(rule?.alert) && !returnMessage) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.alertName', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        } else if (has(rule, 'record') && isEmpty(rule?.record)) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.recordName', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        }\n\n        if ((has(rule, 'expr') && isEmpty(rule.expr) && !returnMessage) || (!has(rule, 'expr') && !returnMessage)) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.expr', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        }\n\n        if (has(rule, 'alert')) {\n          if (\n            (has(rule, 'labels') && isEmpty(rule.labels) && !returnMessage) ||\n            (!has(rule, 'labels') && !returnMessage)\n          ) {\n            returnMessage = t('validation.prometheusRule.groups.valid.rule.labels', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n          }\n        }\n      });\n    }\n\n    return returnMessage;\n  };\n\n  const groupsAreValid: Validator = (val) => {\n    const groups = [...val]; // making a new array in the function because I'm gonna mutate it later...\n    let message;\n\n    groups.forEach((group, idx, arr) => {\n      message = groupIsValid(group, idx + 1);\n      if (!!message) {\n        arr.length = idx + 1; // this is a tricksy way of breaking a forEach loop since we just want the first message\n      }\n    });\n\n    return message;\n  };\n\n  const matching: Validator = (val) => {\n    if (isEmpty(val?.match) && isEmpty(val?.['match_re'])) {\n      return t('validation.monitoring.route.match');\n    }\n  };\n\n  const roleTemplateRules: ValidatorFactory = (type): Validator => (val = []) => {\n    if (val.some((rule: any) => isEmpty(rule.verbs))) {\n      return t('validation.roleTemplate.roleTemplateRules.missingVerb');\n    }\n\n    if (val.some((rule: any) => rule.resources?.length && rule.nonResourceURLs?.length)) {\n      return t('validation.roleTemplate.roleTemplateRules.noResourceAndNonResource');\n    }\n\n    if (type === RBAC.ROLE) {\n      if (val.some((rule: any) => isEmpty(rule.resources))) {\n        return t('validation.roleTemplate.roleTemplateRules.missingResource');\n      }\n\n      if (val.some((rule: any) => isEmpty(rule.apiGroups))) {\n        return t('validation.roleTemplate.roleTemplateRules.missingApiGroup');\n      }\n    } else if (val.some((rule: any) => isEmpty(rule.resources) && isEmpty(rule.nonResourceURLs) && isEmpty(rule.apiGroups))) {\n      return t('validation.roleTemplate.roleTemplateRules.missingOneResource');\n    }\n\n    return undefined;\n  };\n\n  // The existing validator for clusterIp never actually returns an error\n  const clusterIp: Validator = (val) => undefined;\n\n  const backupTarget: Validator = (val) => {\n    const parseValue = JSON.parse(val);\n    const type = parseValue.type;\n\n    if (!type) {\n      return t('validation.required', { key: 'Type' });\n    }\n\n    if (type === 's3') {\n      if (!parseValue.accessKeyId) {\n        return t('validation.required', { key: 'accessKeyId' });\n      }\n\n      if (!parseValue.secretAccessKey) {\n        return t('validation.required', { key: 'secretAccessKey' });\n      }\n\n      if (!parseValue.bucketRegion) {\n        return t('validation.required', { key: 'bucketRegion' });\n      }\n\n      if (!parseValue.bucketName) {\n        return t('validation.required', { key: 'bucketName' });\n      }\n    }\n\n    return undefined;\n  };\n\n  const imageUrl: Validator = (val) => {\n    const VM_IMAGE_FILE_FORMAT = ['qcow', 'qcow2', 'raw', 'img', 'iso'];\n\n    if (!val || val === '') {\n      return undefined;\n    }\n\n    const urlSlug = val.split('/').pop();\n    const fileExtension = urlSlug.split('.').pop().toLowerCase();\n\n    if (!VM_IMAGE_FILE_FORMAT.includes(fileExtension)) {\n      return t('harvester.validation.image.ruleTip');\n    }\n\n    return undefined;\n  };\n\n  const fileRequired: Validator = (val = {}) => {\n    if (!val[HCI.IMAGE_NAME]) {\n      return t('validation.required', { key: t('harvester.image.fileName') });\n    }\n  };\n\n  const subDomain: Validator = (val) => {\n    const matchedChars = val?.match(/[^a-z0-9.-]/g);\n\n    if (matchedChars) {\n      return t('validation.chars', {\n        key, count: matchedChars.length, chars: matchedChars.map((char: string) => char === ' ' ? 'Space' : `\"${ char }\"`).join(', ')\n      });\n    }\n\n    return runValidators(val, [startHyphen('label'), endHyphen('label'), startDot('label'), endDot('label'), required]);\n  };\n\n  return {\n    absolutePath,\n    backupTarget,\n    betweenLengths,\n    betweenValues,\n    clusterIp,\n    clusterName,\n    containerImage,\n    containerImages,\n    cronSchedule,\n    dnsLabel,\n    dnsLabelIanaServiceName,\n    dnsLabelRestricted,\n    externalName,\n    fileRequired,\n    groupsAreValid,\n    hostname,\n    imageUrl,\n    interval,\n    isHttps,\n    matching,\n    maxLength,\n    maxValue,\n    minLength,\n    minValue,\n    noUpperCase,\n    portNumber,\n    required,\n    requiredInt,\n    isInteger,\n    isPositive,\n    isOctal,\n    roleTemplateRules,\n    ruleGroups,\n    servicePort,\n    subDomain,\n    testRule,\n    wildcardHostname,\n  };\n}\n"],"mappings":"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"}]}