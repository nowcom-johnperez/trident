{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/CatalogList/CatalogUninstallDialog.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/uiplugins/CatalogList/CatalogUninstallDialog.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgQ0FUQUxPRywgVUlfUExVR0lOLCBTRVJWSUNFLCBXT1JLTE9BRF9UWVBFUyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBVSV9QTFVHSU5fTEFCRUxTLCBVSV9QTFVHSU5fTkFNRVNQQUNFIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy91aXBsdWdpbnMnOwppbXBvcnQgeyBhbGxIYXNoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3Byb21pc2UnOwppbXBvcnQgQXN5bmNCdXR0b24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQXN5bmNCdXR0b24nOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgQXN5bmNCdXR0b246IEFzeW5jQnV0dG9uCiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHBsdWdpbnM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGlmIChfdGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9zY2hlbWFGb3InXShVSV9QTFVHSU4pKSB7CiAgICAgICAgICAgICAgcGx1Z2lucyA9IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogVUlfUExVR0lOCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgX3RoaXMucGx1Z2lucyA9IHBsdWdpbnMgfHwgW107CiAgICAgICAgICAgIH0KICAgICAgICAgIGNhc2UgMToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGNhdGFsb2c6IHVuZGVmaW5lZCwKICAgICAgYnVzeTogZmFsc2UsCiAgICAgIHBsdWdpbnM6IG51bGwKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKHsKICAgIGFsbENoYXJ0czogJ2NhdGFsb2cvY2hhcnRzJwogIH0pKSwge30sIHsKICAgIHBsdWdpbnNGcm9tQ2F0YWxvZ0ltYWdlOiBmdW5jdGlvbiBwbHVnaW5zRnJvbUNhdGFsb2dJbWFnZSgpIHsKICAgICAgcmV0dXJuIHRoaXMucGx1Z2lucy5maWx0ZXIoZnVuY3Rpb24gKHApIHsKICAgICAgICB2YXIgX3AkbWV0YWRhdGE7CiAgICAgICAgcmV0dXJuIChfcCRtZXRhZGF0YSA9IHAubWV0YWRhdGEpID09PSBudWxsIHx8IF9wJG1ldGFkYXRhID09PSB2b2lkIDAgfHwgKF9wJG1ldGFkYXRhID0gX3AkbWV0YWRhdGEubGFiZWxzKSA9PT0gbnVsbCB8fCBfcCRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3AkbWV0YWRhdGFbVUlfUExVR0lOX0xBQkVMUy5DQVRBTE9HX0lNQUdFXTsKICAgICAgfSk7CiAgICB9CiAgfSksCiAgbWV0aG9kczogewogICAgc2hvd0RpYWxvZzogZnVuY3Rpb24gc2hvd0RpYWxvZyhjYXRhbG9nKSB7CiAgICAgIHRoaXMuY2F0YWxvZyA9IGNhdGFsb2c7CiAgICAgIHRoaXMuYnVzeSA9IGZhbHNlOwogICAgICB0aGlzLiRtb2RhbC5zaG93KCd1bmluc3RhbGxDYXRhbG9nRGlhbG9nJyk7CiAgICB9LAogICAgY2xvc2VEaWFsb2c6IGZ1bmN0aW9uIGNsb3NlRGlhbG9nKHJlc3VsdCkgewogICAgICB0aGlzLiRtb2RhbC5oaWRlKCd1bmluc3RhbGxDYXRhbG9nRGlhbG9nJyk7CiAgICAgIHRoaXMuJGVtaXQoJ2Nsb3NlZCcsIHJlc3VsdCk7CiAgICAgIGlmIChyZXN1bHQpIHsKICAgICAgICB0aGlzLiRlbWl0KCdyZWZyZXNoJyk7CiAgICAgIH0KICAgIH0sCiAgICB1bmluc3RhbGw6IGZ1bmN0aW9uIHVuaW5zdGFsbCgpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICAgIHZhciBjYXRhbG9nLCBhcHBzLCBwbHVnaW5BcHBzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfdGhpczIuYnVzeSA9IHRydWU7CiAgICAgICAgICAgICAgY2F0YWxvZyA9IF90aGlzMi5jYXRhbG9nOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogQ0FUQUxPRy5BUFAKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgIGFwcHMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBwbHVnaW5BcHBzID0gYXBwcy5maWx0ZXIoZnVuY3Rpb24gKGFwcCkgewogICAgICAgICAgICAgICAgaWYgKGFwcC5uYW1lc3BhY2UgPT09IFVJX1BMVUdJTl9OQU1FU1BBQ0UpIHsKICAgICAgICAgICAgICAgICAgLy8gRmluZCB0aGUgcmVsYXRlZCBhcHBzIGZyb20gdGhlIGRlcGxveWVkIGhlbG0gcmVwb3NpdG9yeQogICAgICAgICAgICAgICAgICB2YXIgY2hhcnRzID0gX3RoaXMyLmFsbENoYXJ0cy5maWx0ZXIoZnVuY3Rpb24gKGNoYXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgdmFyIF9jYXRhbG9nJHJlcG87CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYXJ0LnJlcG9OYW1lID09PSAoKF9jYXRhbG9nJHJlcG8gPSBjYXRhbG9nLnJlcG8pID09PSBudWxsIHx8IF9jYXRhbG9nJHJlcG8gPT09IHZvaWQgMCB8fCAoX2NhdGFsb2ckcmVwbyA9IF9jYXRhbG9nJHJlcG8ubWV0YWRhdGEpID09PSBudWxsIHx8IF9jYXRhbG9nJHJlcG8gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jYXRhbG9nJHJlcG8ubmFtZSk7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgICByZXR1cm4gY2hhcnRzLnNvbWUoZnVuY3Rpb24gKGNoYXJ0KSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNoYXJ0LmNoYXJ0TmFtZSA9PT0gYXBwLm1ldGFkYXRhLm5hbWU7CiAgICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnJlbW92ZUNhdGFsb2dSZXNvdXJjZXMoY2F0YWxvZyk7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBpZiAoIXBsdWdpbkFwcHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEyOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRyeSB7CiAgICAgICAgICAgICAgICBwbHVnaW5BcHBzLmZvckVhY2goZnVuY3Rpb24gKGFwcCkgewogICAgICAgICAgICAgICAgICBfdGhpczIuJGVtaXQoJ3VwZGF0ZScsIGFwcC5uYW1lLCAndW5pbnN0YWxsJyk7CiAgICAgICAgICAgICAgICAgIGFwcC5yZW1vdmUoKTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgICAgICAgIF90aGlzMi4kc3RvcmUuZGlzcGF0Y2goJ2dyb3dsL2Vycm9yJywgewogICAgICAgICAgICAgICAgICB0aXRsZTogX3RoaXMyLnQoJ3BsdWdpbnMuZXJyb3IuZ2VuZXJpYycpLAogICAgICAgICAgICAgICAgICBtZXNzYWdlOiBlLm1lc3NhZ2UgPyBlLm1lc3NhZ2UgOiBlLAogICAgICAgICAgICAgICAgICB0aW1lb3V0OiAxMDAwMAogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogQ0FUQUxPRy5PUEVSQVRJT04KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfdGhpczIuY2xvc2VEaWFsb2coY2F0YWxvZyk7CiAgICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZW1vdmVDYXRhbG9nUmVzb3VyY2VzOiBmdW5jdGlvbiByZW1vdmVDYXRhbG9nUmVzb3VyY2VzKGNhdGFsb2cpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBzZWxlY3RvciwgbmFtZXNwYWNlLCBoYXNoLCBfaSwgX09iamVjdCRrZXlzLCByZXNvdXJjZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTMkKF9jb250ZXh0MykgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQzLnByZXYgPSBfY29udGV4dDMubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgc2VsZWN0b3IgPSAiIi5jb25jYXQoVUlfUExVR0lOX0xBQkVMUy5DQVRBTE9HX0lNQUdFLCAiPSIpLmNvbmNhdChjYXRhbG9nLm5hbWUpOwogICAgICAgICAgICAgIG5hbWVzcGFjZSA9IFVJX1BMVUdJTl9OQU1FU1BBQ0U7CiAgICAgICAgICAgICAgaWYgKCFzZWxlY3RvcikgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gYWxsSGFzaCh7CiAgICAgICAgICAgICAgICBkZXBsb3ltZW50OiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRNYXRjaGluZycsIHsKICAgICAgICAgICAgICAgICAgdHlwZTogV09SS0xPQURfVFlQRVMuREVQTE9ZTUVOVCwKICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yLAogICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZQogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICBzZXJ2aWNlOiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRNYXRjaGluZycsIHsKICAgICAgICAgICAgICAgICAgdHlwZTogU0VSVklDRSwKICAgICAgICAgICAgICAgICAgc2VsZWN0b3I6IHNlbGVjdG9yLAogICAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IG5hbWVzcGFjZQogICAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgICByZXBvOiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmRNYXRjaGluZycsIHsKICAgICAgICAgICAgICAgICAgdHlwZTogQ0FUQUxPRy5DTFVTVEVSX1JFUE8sCiAgICAgICAgICAgICAgICAgIHNlbGVjdG9yOiBzZWxlY3RvcgogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIGhhc2ggPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBmb3IgKF9pID0gMCwgX09iamVjdCRrZXlzID0gT2JqZWN0LmtleXMoaGFzaCk7IF9pIDwgX09iamVjdCRrZXlzLmxlbmd0aDsgX2krKykgewogICAgICAgICAgICAgICAgcmVzb3VyY2UgPSBfT2JqZWN0JGtleXNbX2ldOwogICAgICAgICAgICAgICAgaWYgKGhhc2hbcmVzb3VyY2VdKSB7CiAgICAgICAgICAgICAgICAgIGhhc2hbcmVzb3VyY2VdLmZvckVhY2goZnVuY3Rpb24gKHIpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gci5yZW1vdmUoKTsKICAgICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["mapGetters","CATALOG","UI_PLUGIN","SERVICE","WORKLOAD_TYPES","UI_PLUGIN_LABELS","UI_PLUGIN_NAMESPACE","allHash","AsyncButton","components","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","plugins","wrap","_callee$","_context","prev","next","$store","getters","dispatch","type","stop","data","catalog","undefined","busy","computed","_objectSpread","allCharts","pluginsFromCatalogImage","filter","p","_p$metadata","metadata","labels","CATALOG_IMAGE","methods","showDialog","$modal","show","closeDialog","result","hide","$emit","uninstall","_this2","_callee2","apps","pluginApps","_callee2$","_context2","APP","sent","app","namespace","charts","chart","_catalog$repo","repoName","repo","name","some","chartName","removeCatalogResources","length","forEach","remove","e","title","t","message","timeout","root","OPERATION","_this3","_callee3","selector","hash","_i","_Object$keys","resource","_callee3$","_context3","concat","deployment","DEPLOYMENT","service","CLUSTER_REPO","Object","keys","r"],"sources":["node_modules/@rancher/shell/pages/c/_cluster/uiplugins/CatalogList/CatalogUninstallDialog.vue"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\n\nimport { CATALOG, UI_PLUGIN, SERVICE, WORKLOAD_TYPES } from '@shell/config/types';\nimport { UI_PLUGIN_LABELS, UI_PLUGIN_NAMESPACE } from '@shell/config/uiplugins';\nimport { allHash } from '@shell/utils/promise';\n\nimport AsyncButton from '@shell/components/AsyncButton';\n\nexport default {\n  components: { AsyncButton },\n\n  async fetch() {\n    if ( this.$store.getters['management/schemaFor'](UI_PLUGIN) ) {\n      const plugins = this.$store.dispatch('management/findAll', { type: UI_PLUGIN });\n\n      this.plugins = plugins || [];\n    }\n  },\n\n  data() {\n    return {\n      catalog: undefined, busy: false, plugins: null\n    };\n  },\n\n  computed: {\n    ...mapGetters({ allCharts: 'catalog/charts' }),\n\n    pluginsFromCatalogImage() {\n      return this.plugins.filter((p) => p.metadata?.labels?.[UI_PLUGIN_LABELS.CATALOG_IMAGE]);\n    }\n  },\n\n  methods: {\n    showDialog(catalog) {\n      this.catalog = catalog;\n      this.busy = false;\n      this.$modal.show('uninstallCatalogDialog');\n    },\n\n    closeDialog(result) {\n      this.$modal.hide('uninstallCatalogDialog');\n      this.$emit('closed', result);\n\n      if ( result ) {\n        this.$emit('refresh');\n      }\n    },\n\n    async uninstall() {\n      this.busy = true;\n\n      const catalog = this.catalog;\n      const apps = await this.$store.dispatch('management/findAll', { type: CATALOG.APP });\n      const pluginApps = apps.filter((app) => {\n        if ( app.namespace === UI_PLUGIN_NAMESPACE ) {\n          // Find the related apps from the deployed helm repository\n          const charts = this.allCharts.filter((chart) => chart.repoName === catalog.repo?.metadata?.name);\n\n          return charts.some((chart) => chart.chartName === app.metadata.name);\n        }\n\n        return false;\n      });\n\n      await this.removeCatalogResources(catalog);\n\n      if ( pluginApps.length ) {\n        try {\n          pluginApps.forEach((app) => {\n            this.$emit('update', app.name, 'uninstall');\n            app.remove();\n          });\n        } catch (e) {\n          this.$store.dispatch('growl/error', {\n            title:   this.t('plugins.error.generic'),\n            message: e.message ? e.message : e,\n            timeout: 10000\n          }, { root: true });\n        }\n\n        await this.$store.dispatch('management/findAll', { type: CATALOG.OPERATION });\n      }\n\n      this.closeDialog(catalog);\n    },\n\n    async removeCatalogResources(catalog) {\n      const selector = `${ UI_PLUGIN_LABELS.CATALOG_IMAGE }=${ catalog.name }`;\n      const namespace = UI_PLUGIN_NAMESPACE;\n\n      if ( selector ) {\n        const hash = await allHash({\n          deployment: this.$store.dispatch('management/findMatching', {\n            type: WORKLOAD_TYPES.DEPLOYMENT, selector, namespace\n          }),\n          service: this.$store.dispatch('management/findMatching', {\n            type: SERVICE, selector, namespace\n          }),\n          repo: this.$store.dispatch('management/findMatching', { type: CATALOG.CLUSTER_REPO, selector })\n        });\n\n        for ( const resource of Object.keys(hash) ) {\n          if ( hash[resource] ) {\n            hash[resource].forEach((r) => r.remove());\n          }\n        }\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <modal\n    name=\"uninstallCatalogDialog\"\n    height=\"auto\"\n    :scrollable=\"true\"\n  >\n    <div\n      v-if=\"catalog\"\n      class=\"plugin-install-dialog\"\n    >\n      <h4 class=\"mt-10\">\n        {{ t('plugins.uninstall.title', { name: catalog.name }) }}\n      </h4>\n      <div class=\"mt-10 dialog-panel\">\n        <div class=\"dialog-info\">\n          <p>\n            {{ t('plugins.uninstall.catalog') }}\n          </p>\n        </div>\n        <div class=\"dialog-buttons\">\n          <button\n            :disabled=\"busy\"\n            class=\"btn role-secondary\"\n            data-testid=\"uninstall-ext-modal-cancel-btn\"\n            @click=\"closeDialog(false)\"\n          >\n            {{ t('generic.cancel') }}\n          </button>\n          <AsyncButton\n            mode=\"uninstall\"\n            data-testid=\"uninstall-ext-modal-uninstall-btn\"\n            @click=\"uninstall()\"\n          />\n        </div>\n      </div>\n    </div>\n  </modal>\n</template>\n\n<style lang=\"scss\" scoped>\n  .plugin-install-dialog {\n    padding: 10px;\n\n    h4 {\n      font-weight: bold;\n    }\n\n    .dialog-panel {\n      display: flex;\n      flex-direction: column;\n      min-height: 100px;\n\n      .dialog-info {\n        flex: 1;\n      }\n    }\n\n    .dialog-buttons {\n      display: flex;\n      justify-content: flex-end;\n      margin-top: 10px;\n\n      > *:not(:last-child) {\n        margin-right: 10px;\n      }\n    }\n  }\n</style>\n"],"mappings":"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"}]}