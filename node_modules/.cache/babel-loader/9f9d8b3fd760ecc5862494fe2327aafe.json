{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ResourceSummary.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/ResourceSummary.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgU2ltcGxlQm94IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1NpbXBsZUJveCc7CmltcG9ydCB7IENPVU5UIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IGNvbG9yRm9yU3RhdGUgfSBmcm9tICdAc2hlbGwvcGx1Z2lucy9kYXNoYm9hcmQtc3RvcmUvcmVzb3VyY2UtY2xhc3MnOwpleHBvcnQgZnVuY3Rpb24gY29sb3JUb0NvdW50TmFtZShjb2xvcikgewogIHN3aXRjaCAoY29sb3IpIHsKICAgIGNhc2UgJ3RleHQtc3VjY2Vzcyc6CiAgICBjYXNlICd0ZXh0LWluZm8nOgogICAgICByZXR1cm4gJ3VzZWZ1bCc7CiAgICBjYXNlICd0ZXh0LXdhcm5pbmcnOgogICAgICByZXR1cm4gJ3dhcm5pbmdDb3VudCc7CiAgICBkZWZhdWx0OgogICAgICByZXR1cm4gJ2Vycm9yQ291bnQnOwogIH0KfQpmdW5jdGlvbiBfcmVzb3VyY2VDb3VudHMoc3RvcmUsIHJlc291cmNlKSB7CiAgdmFyIF9zdG9yZSRnZXR0ZXJzLCBfY2x1c3RlckNvdW50cyRyZXNvdXI7CiAgdmFyIGluU3RvcmUgPSBzdG9yZS5nZXR0ZXJzWydjdXJyZW50U3RvcmUnXShDT1VOVCk7CiAgdmFyIGNsdXN0ZXJDb3VudHMgPSAoX3N0b3JlJGdldHRlcnMgPSBzdG9yZS5nZXR0ZXJzWyIiLmNvbmNhdChpblN0b3JlLCAiL2FsbCIpXShDT1VOVCkpID09PSBudWxsIHx8IF9zdG9yZSRnZXR0ZXJzID09PSB2b2lkIDAgfHwgKF9zdG9yZSRnZXR0ZXJzID0gX3N0b3JlJGdldHRlcnNbMF0pID09PSBudWxsIHx8IF9zdG9yZSRnZXR0ZXJzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3RvcmUkZ2V0dGVycy5jb3VudHM7CiAgdmFyIHN1bW1hcnkgPSAoY2x1c3RlckNvdW50cyA9PT0gbnVsbCB8fCBjbHVzdGVyQ291bnRzID09PSB2b2lkIDAgfHwgKF9jbHVzdGVyQ291bnRzJHJlc291ciA9IGNsdXN0ZXJDb3VudHNbcmVzb3VyY2VdKSA9PT0gbnVsbCB8fCBfY2x1c3RlckNvdW50cyRyZXNvdXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jbHVzdGVyQ291bnRzJHJlc291ci5zdW1tYXJ5KSB8fCB7fTsKICB2YXIgY291bnRzID0gewogICAgdG90YWw6IHN1bW1hcnkuY291bnQgfHwgMCwKICAgIHVzZWZ1bDogc3VtbWFyeS5jb3VudCB8fCAwLAogICAgd2FybmluZ0NvdW50OiAwLAogICAgZXJyb3JDb3VudDogMAogIH07CiAgT2JqZWN0LmVudHJpZXMoc3VtbWFyeS5zdGF0ZXMgfHwge30pLmZvckVhY2goZnVuY3Rpb24gKGVudHJ5KSB7CiAgICB2YXIgY29sb3IgPSBjb2xvckZvclN0YXRlKGVudHJ5WzBdKTsKICAgIHZhciBjb3VudCA9IGVudHJ5WzFdOwogICAgdmFyIGNvdW50TmFtZSA9IGNvbG9yVG9Db3VudE5hbWUoY29sb3IpOwogICAgY291bnRzWyd1c2VmdWwnXSAtPSBjb3VudDsKICAgIGNvdW50c1tjb3VudE5hbWVdICs9IGNvdW50OwogIH0pOwogIHJldHVybiBjb3VudHM7Cn0KZXhwb3J0IHsgX3Jlc291cmNlQ291bnRzIGFzIHJlc291cmNlQ291bnRzIH07CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBTaW1wbGVCb3g6IFNpbXBsZUJveAogIH0sCiAgcHJvcHM6IHsKICAgIHJlc291cmNlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICBzcG9vZmVkQ291bnRzOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIGNsdXN0ZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgcmVzb3VyY2VDb3VudHM6IGZ1bmN0aW9uIHJlc291cmNlQ291bnRzKCkgewogICAgICBpZiAodGhpcy5zcG9vZmVkQ291bnRzKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc3Bvb2ZlZENvdW50czsKICAgICAgfQogICAgICByZXR1cm4gX3Jlc291cmNlQ291bnRzKHRoaXMuJHN0b3JlLCB0aGlzLnJlc291cmNlKTsKICAgIH0sCiAgICBsb2NhdGlvbjogZnVuY3Rpb24gbG9jYXRpb24oKSB7CiAgICAgIGlmICh0aGlzLnNwb29mZWRDb3VudHMpIHsKICAgICAgICByZXR1cm4gdGhpcy5zcG9vZmVkQ291bnRzLmxvY2F0aW9uOwogICAgICB9CiAgICAgIHZhciByb3V0ZSA9IHsKICAgICAgICBuYW1lOiAnYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2UnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgcHJvZHVjdDogdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXS5uYW1lLAogICAgICAgICAgcmVzb3VyY2U6IHRoaXMucmVzb3VyY2UKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmICh0aGlzLmNsdXN0ZXIpIHsKICAgICAgICByb3V0ZS5wYXJhbXMuY2x1c3RlciA9IHRoaXMuY2x1c3RlcjsKICAgICAgfQogICAgICByZXR1cm4gcm91dGU7CiAgICB9LAogICAgbmFtZTogZnVuY3Rpb24gbmFtZSgpIHsKICAgICAgaWYgKHRoaXMuc3Bvb2ZlZENvdW50cykgewogICAgICAgIHJldHVybiB0aGlzLnNwb29mZWRDb3VudHMubmFtZTsKICAgICAgfQogICAgICB2YXIgaW5TdG9yZSA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRTdG9yZSddKHRoaXMucmVzb3VyY2UpOwogICAgICB2YXIgc2NoZW1hID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1siIi5jb25jYXQoaW5TdG9yZSwgIi9zY2hlbWFGb3IiKV0odGhpcy5yZXNvdXJjZSk7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWyd0eXBlLW1hcC9sYWJlbEZvciddKHNjaGVtYSwgdGhpcy5yZXNvdXJjZUNvdW50cy51c2VmdWwpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgZ29Ub1Jlc291cmNlOiBmdW5jdGlvbiBnb1RvUmVzb3VyY2UoKSB7CiAgICAgIGlmICh0aGlzLmxvY2F0aW9uKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnB1c2godGhpcy5sb2NhdGlvbik7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["SimpleBox","COUNT","colorForState","colorToCountName","color","resourceCounts","store","resource","_store$getters","_clusterCounts$resour","inStore","getters","clusterCounts","concat","counts","summary","total","count","useful","warningCount","errorCount","Object","entries","states","forEach","entry","countName","_resourceCounts","components","props","type","String","default","spoofedCounts","cluster","computed","$store","location","route","name","params","product","schema","methods","goToResource","$router","push"],"sources":["node_modules/@rancher/shell/components/ResourceSummary.vue"],"sourcesContent":["<script>\nimport SimpleBox from '@shell/components/SimpleBox';\nimport { COUNT } from '@shell/config/types';\nimport { colorForState } from '@shell/plugins/dashboard-store/resource-class';\n\nexport function colorToCountName(color) {\n  switch (color) {\n  case 'text-success':\n  case 'text-info':\n    return 'useful';\n  case 'text-warning':\n    return 'warningCount';\n  default:\n    return 'errorCount';\n  }\n}\n\nexport function resourceCounts(store, resource) {\n  const inStore = store.getters['currentStore'](COUNT);\n  const clusterCounts = store.getters[`${ inStore }/all`](COUNT)?.[0]?.counts;\n  const summary = clusterCounts?.[resource]?.summary || {};\n\n  const counts = {\n    total:        summary.count || 0,\n    useful:       summary.count || 0,\n    warningCount: 0,\n    errorCount:   0\n  };\n\n  Object.entries(summary.states || {}).forEach((entry) => {\n    const color = colorForState(entry[0]);\n    const count = entry[1];\n    const countName = colorToCountName(color);\n\n    counts['useful'] -= count;\n    counts[countName] += count;\n  });\n\n  return counts;\n}\n\nexport default {\n  components: { SimpleBox },\n\n  props: {\n    resource: {\n      type:    String,\n      default: ''\n    },\n\n    spoofedCounts: {\n      type:    Object,\n      default: null\n    },\n\n    cluster: {\n      type:    String,\n      default: null,\n    },\n  },\n\n  computed: {\n    resourceCounts() {\n      if (this.spoofedCounts) {\n        return this.spoofedCounts;\n      }\n\n      return resourceCounts(this.$store, this.resource);\n    },\n\n    location() {\n      if (this.spoofedCounts) {\n        return this.spoofedCounts.location;\n      }\n\n      const route = {\n        name:   'c-cluster-product-resource',\n        params: {\n          product:  this.$store.getters['currentProduct'].name,\n          resource: this.resource,\n        }\n      };\n\n      if (this.cluster) {\n        route.params.cluster = this.cluster;\n      }\n\n      return route;\n    },\n\n    name() {\n      if (this.spoofedCounts) {\n        return this.spoofedCounts.name;\n      }\n      const inStore = this.$store.getters['currentStore'](this.resource);\n      const schema = this.$store.getters[`${ inStore }/schemaFor`](this.resource);\n\n      return this.$store.getters['type-map/labelFor'](schema, this.resourceCounts.useful);\n    },\n  },\n\n  methods: {\n    goToResource() {\n      if (this.location) {\n        this.$router.push(this.location);\n      }\n    },\n  }\n\n};\n</script>\n\n<template>\n  <div>\n    <SimpleBox\n      class=\"container\"\n      :class=\"{'has-link': !!location}\"\n      @click=\"goToResource\"\n    >\n      <h1>{{ resourceCounts.total }}</h1>\n      <h3>\n        {{ name }}\n      </h3>\n      <div class=\"warnings\">\n        <div\n          v-if=\"resourceCounts.warningCount\"\n          class=\"warn-count mb-10 chip\"\n        >\n          {{ resourceCounts.warningCount }}\n        </div>\n        <div\n          v-if=\"resourceCounts.errorCount\"\n          class=\"error-count chip\"\n        >\n          {{ resourceCounts.errorCount }}\n        </div>\n      </div>\n    </SimpleBox>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n  .has-link {\n    cursor: pointer;\n\n    &:hover {\n      border-color: var(--link);\n    }\n  }\n\n  ::v-deep .content{\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    & H1, H3 {\n        margin: 0;\n    }\n\n    & .chip{\n      border-radius: 2em;\n      color: var(--body-bg);\n      padding: 0px 1em;\n\n      &.warn-count {\n          background: var(--warning)\n      }\n\n      &.error-count {\n          background: var(--error)\n      }\n    }\n}\n</style>\n"],"mappings":";;;;AACA,OAAAA,SAAA;AACA,SAAAC,KAAA;AACA,SAAAC,aAAA;AAEA,gBAAAC,iBAAAC,KAAA;EACA,QAAAA,KAAA;IACA;IACA;MACA;IACA;MACA;IACA;MACA;EACA;AACA;AAEA,SAAAC,gBAAAC,KAAA,EAAAC,QAAA;EAAA,IAAAC,cAAA,EAAAC,qBAAA;EACA,IAAAC,OAAA,GAAAJ,KAAA,CAAAK,OAAA,iBAAAV,KAAA;EACA,IAAAW,aAAA,IAAAJ,cAAA,GAAAF,KAAA,CAAAK,OAAA,IAAAE,MAAA,CAAAH,OAAA,WAAAT,KAAA,eAAAO,cAAA,gBAAAA,cAAA,GAAAA,cAAA,iBAAAA,cAAA,uBAAAA,cAAA,CAAAM,MAAA;EACA,IAAAC,OAAA,IAAAH,aAAA,aAAAA,aAAA,gBAAAH,qBAAA,GAAAG,aAAA,CAAAL,QAAA,eAAAE,qBAAA,uBAAAA,qBAAA,CAAAM,OAAA;EAEA,IAAAD,MAAA;IACAE,KAAA,EAAAD,OAAA,CAAAE,KAAA;IACAC,MAAA,EAAAH,OAAA,CAAAE,KAAA;IACAE,YAAA;IACAC,UAAA;EACA;EAEAC,MAAA,CAAAC,OAAA,CAAAP,OAAA,CAAAQ,MAAA,QAAAC,OAAA,WAAAC,KAAA;IACA,IAAArB,KAAA,GAAAF,aAAA,CAAAuB,KAAA;IACA,IAAAR,KAAA,GAAAQ,KAAA;IACA,IAAAC,SAAA,GAAAvB,gBAAA,CAAAC,KAAA;IAEAU,MAAA,cAAAG,KAAA;IACAH,MAAA,CAAAY,SAAA,KAAAT,KAAA;EACA;EAEA,OAAAH,MAAA;AACA;AAAA,SAAAa,eAAA,IAAAtB,cAAA;AAEA;EACAuB,UAAA;IAAA5B,SAAA,EAAAA;EAAA;EAEA6B,KAAA;IACAtB,QAAA;MACAuB,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IAEAC,aAAA;MACAH,IAAA,EAAAT,MAAA;MACAW,OAAA;IACA;IAEAE,OAAA;MACAJ,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;EACA;EAEAG,QAAA;IACA9B,cAAA,WAAAA,eAAA;MACA,SAAA4B,aAAA;QACA,YAAAA,aAAA;MACA;MAEA,OAAA5B,eAAA,MAAA+B,MAAA,OAAA7B,QAAA;IACA;IAEA8B,QAAA,WAAAA,SAAA;MACA,SAAAJ,aAAA;QACA,YAAAA,aAAA,CAAAI,QAAA;MACA;MAEA,IAAAC,KAAA;QACAC,IAAA;QACAC,MAAA;UACAC,OAAA,OAAAL,MAAA,CAAAzB,OAAA,mBAAA4B,IAAA;UACAhC,QAAA,OAAAA;QACA;MACA;MAEA,SAAA2B,OAAA;QACAI,KAAA,CAAAE,MAAA,CAAAN,OAAA,QAAAA,OAAA;MACA;MAEA,OAAAI,KAAA;IACA;IAEAC,IAAA,WAAAA,KAAA;MACA,SAAAN,aAAA;QACA,YAAAA,aAAA,CAAAM,IAAA;MACA;MACA,IAAA7B,OAAA,QAAA0B,MAAA,CAAAzB,OAAA,sBAAAJ,QAAA;MACA,IAAAmC,MAAA,QAAAN,MAAA,CAAAzB,OAAA,IAAAE,MAAA,CAAAH,OAAA,sBAAAH,QAAA;MAEA,YAAA6B,MAAA,CAAAzB,OAAA,sBAAA+B,MAAA,OAAArC,cAAA,CAAAa,MAAA;IACA;EACA;EAEAyB,OAAA;IACAC,YAAA,WAAAA,aAAA;MACA,SAAAP,QAAA;QACA,KAAAQ,OAAA,CAAAC,IAAA,MAAAT,QAAA;MACA;IACA;EACA;AAEA"}]}