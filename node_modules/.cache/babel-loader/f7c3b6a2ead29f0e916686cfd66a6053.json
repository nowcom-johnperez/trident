{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/poller.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/poller.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubnVtYmVyLmNvbnN0cnVjdG9yLmpzIjsKdmFyIFBvbGxlciA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgZnVuY3Rpb24gUG9sbGVyKGZuLCBwb2xsUmF0ZU1zKSB7CiAgICB2YXIgbWF4UmV0cmllcyA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBvbGxlcik7CiAgICB0aGlzLmZuID0gdm9pZCAwOwogICAgdGhpcy5wb2xsUmF0ZU1zID0gdm9pZCAwOwogICAgdGhpcy5tYXhSZXRyaWVzID0gdm9pZCAwOwogICAgdGhpcy5pbnRlcnZhbElkID0gdm9pZCAwOwogICAgdGhpcy50cnlDb3VudCA9IDA7CiAgICB0aGlzLmZuID0gZm4gfHwgZnVuY3Rpb24gKCkge307CiAgICB0aGlzLnBvbGxSYXRlTXMgPSBwb2xsUmF0ZU1zOwogICAgdGhpcy5tYXhSZXRyaWVzID0gbWF4UmV0cmllczsKICB9CiAgX2NyZWF0ZUNsYXNzKFBvbGxlciwgW3sKICAgIGtleTogInN0YXJ0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzdGFydCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgLy8gRW5zdXJlIG9ubHkgb25lIGlzIHJ1bm5pbmcKICAgICAgdGhpcy5zdG9wKCk7CiAgICAgIHRoaXMuX2ludGVydmFsTWV0aG9kKCk7CiAgICAgIHRoaXMuaW50ZXJ2YWxJZCA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMuX2ludGVydmFsTWV0aG9kKCk7CiAgICAgIH0sIHRoaXMucG9sbFJhdGVNcyk7CiAgICB9CiAgfSwgewogICAga2V5OiAic3RvcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RvcCgpIHsKICAgICAgaWYgKHRoaXMuaW50ZXJ2YWxJZCkgewogICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbElkKTsKICAgICAgICB0aGlzLmludGVydmFsSWQgPSB1bmRlZmluZWQ7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfaW50ZXJ2YWxNZXRob2QiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9pbnRlcnZhbE1ldGhvZDIgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDA7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZm4oKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIHRoaXMudHJ5Q291bnQgPSAwOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA2OwogICAgICAgICAgICAgIF9jb250ZXh0LnQwID0gX2NvbnRleHRbImNhdGNoIl0oMCk7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZW5jb3VudGVyZWQgd2hpbGUgcG9sbGluZycsIF9jb250ZXh0LnQwKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgaWYgKCsrdGhpcy50cnlDb3VudCA+PSB0aGlzLm1heFJldHJpZXMpIHsKICAgICAgICAgICAgICAgIHRoaXMuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUsIHRoaXMsIFtbMCwgNl1dKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBfaW50ZXJ2YWxNZXRob2QoKSB7CiAgICAgICAgcmV0dXJuIF9pbnRlcnZhbE1ldGhvZDIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gX2ludGVydmFsTWV0aG9kOwogICAgfSgpCiAgfV0pOwogIHJldHVybiBQb2xsZXI7Cn0oKTsKZXhwb3J0IHsgUG9sbGVyIGFzIGRlZmF1bHQgfTs="},{"version":3,"names":["Poller","fn","pollRateMs","maxRetries","arguments","length","undefined","Number","POSITIVE_INFINITY","_classCallCheck","intervalId","tryCount","_createClass","key","value","start","_this","stop","_intervalMethod","setInterval","clearInterval","_intervalMethod2","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","t0","console","error","apply","default"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/poller.js"],"sourcesContent":["export default class Poller {\n    fn;\n    pollRateMs;\n    maxRetries;\n    intervalId;\n    tryCount = 0;\n\n    constructor(fn, pollRateMs, maxRetries = Number.POSITIVE_INFINITY) {\n      this.fn = fn || (() => {});\n      this.pollRateMs = pollRateMs;\n      this.maxRetries = maxRetries;\n    }\n\n    start() {\n      // Ensure only one is running\n      this.stop();\n      this._intervalMethod();\n      this.intervalId = setInterval(() => this._intervalMethod(), this.pollRateMs);\n    }\n\n    stop() {\n      if (this.intervalId) {\n        clearInterval(this.intervalId);\n        this.intervalId = undefined;\n      }\n    }\n\n    async _intervalMethod() {\n      try {\n        await this.fn();\n        this.tryCount = 0;\n      } catch (ex) {\n        console.error('Error encountered while polling', ex); // eslint-disable-line no-console\n        if (++this.tryCount >= this.maxRetries) {\n          this.stop();\n        }\n      }\n    }\n}\n"],"mappings":";;;;;IAAqBA,MAAM;EAOvB,SAAAA,OAAYC,EAAE,EAAEC,UAAU,EAAyC;IAAA,IAAvCC,UAAU,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAGG,MAAM,CAACC,iBAAiB;IAAAC,eAAA,OAAAT,MAAA;IAAA,KANjEC,EAAE;IAAA,KACFC,UAAU;IAAA,KACVC,UAAU;IAAA,KACVO,UAAU;IAAA,KACVC,QAAQ,GAAG,CAAC;IAGV,IAAI,CAACV,EAAE,GAAGA,EAAE,IAAK,YAAM,CAAC,CAAE;IAC1B,IAAI,CAACC,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,UAAU,GAAGA,UAAU;EAC9B;EAACS,YAAA,CAAAZ,MAAA;IAAAa,GAAA;IAAAC,KAAA,EAED,SAAAC,MAAA,EAAQ;MAAA,IAAAC,KAAA;MACN;MACA,IAAI,CAACC,IAAI,CAAC,CAAC;MACX,IAAI,CAACC,eAAe,CAAC,CAAC;MACtB,IAAI,CAACR,UAAU,GAAGS,WAAW,CAAC;QAAA,OAAMH,KAAI,CAACE,eAAe,CAAC,CAAC;MAAA,GAAE,IAAI,CAAChB,UAAU,CAAC;IAC9E;EAAC;IAAAW,GAAA;IAAAC,KAAA,EAED,SAAAG,KAAA,EAAO;MACL,IAAI,IAAI,CAACP,UAAU,EAAE;QACnBU,aAAa,CAAC,IAAI,CAACV,UAAU,CAAC;QAC9B,IAAI,CAACA,UAAU,GAAGJ,SAAS;MAC7B;IACF;EAAC;IAAAO,GAAA;IAAAC,KAAA;MAAA,IAAAO,gBAAA,GAAAC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,CAED,SAAAC,QAAA;QAAA,OAAAF,kBAAA,CAAAG,IAAA,UAAAC,SAAAC,QAAA;UAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAE,IAAA;cAAA,OAEU,IAAI,CAAC7B,EAAE,CAAC,CAAC;YAAA;cACf,IAAI,CAACU,QAAQ,GAAG,CAAC;cAACiB,QAAA,CAAAE,IAAA;cAAA;YAAA;cAAAF,QAAA,CAAAC,IAAA;cAAAD,QAAA,CAAAG,EAAA,GAAAH,QAAA;cAElBI,OAAO,CAACC,KAAK,CAAC,iCAAiC,EAAAL,QAAA,CAAAG,EAAI,CAAC,CAAC,CAAC;cACtD,IAAI,EAAE,IAAI,CAACpB,QAAQ,IAAI,IAAI,CAACR,UAAU,EAAE;gBACtC,IAAI,CAACc,IAAI,CAAC,CAAC;cACb;YAAC;YAAA;cAAA,OAAAW,QAAA,CAAAX,IAAA;UAAA;QAAA,GAAAQ,OAAA;MAAA,CAEJ;MAAA,SAAAP,gBAAA;QAAA,OAAAG,gBAAA,CAAAa,KAAA,OAAA9B,SAAA;MAAA;MAAA,OAAAc,eAAA;IAAA;EAAA;EAAA,OAAAlB,MAAA;AAAA;AAAA,SArCgBA,MAAM,IAAAmC,OAAA"}]}