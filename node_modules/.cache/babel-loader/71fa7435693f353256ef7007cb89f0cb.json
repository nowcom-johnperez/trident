{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/resource-manager.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/resource-manager.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBhbGxIYXNoU2V0dGxlZCB9IGZyb20gJ0BzaGVsbC91dGlscy9wcm9taXNlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKHt9LCBtYXBHZXR0ZXJzKFsnY3VycmVudENsdXN0ZXInXSkpLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBpc0xvYWRpbmdTZWNvbmRhcnlSZXNvdXJjZXM6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgLyoqCiAgICAqCiAgICAqIEZ1bmN0aW9uIHJlc291cmNlTWFuYWdlckZldGNoU2Vjb25kYXJ5UmVzb3VyY2VzCiAgICAqIFRoaXMgbWV0aG9kIGlzIHVzZWQgdG8gZmV0Y2ggd2hhdCBpcyBjYWxsZWQgInNlY29uZGFyeSByZXNvdXJjZXMiLCB3aGljaCBjYW4gYmUgZGVmaW5lZCBhcyByZXNvdXJjZXMgdGhhdCBhcmUgbmVlZGVkIHRvIHBvcHVsYXRlCiAgICAqIHRoZSBwYWdlL2NvbXBvbmVudCBpdHNlbGYgKGV4OiB1c2VkIGFzIG9wdGlvbnMgb24gYSBTZWxlY3QpIGJ1dCBkb24ndCBuZWVkIHRvIGJlIHB1dCBpbnRvIFZ1ZXggc3RvcmUgb3Igd2F0Y2hlZCB0byBnZXQgY29uc3RhbnQgdXBkYXRlcy4KICAgICogVGhpcyBtZXRob2QgYWxsb3dzIHRvIGZldGNoIHJlc291cmNlcyBmb3IgYSBnaXZlbiBuYW1lc3BhY2UgdG8gcmVkdWNlIHRoZSBhbW91bnQgb2YgcmVzdWx0cyBpbnN0ZWFkIG9mIG5lZWRpbmcgdG8gZmV0Y2ggYWxsIGFuZCBmaWx0ZXJpbmcgYWZ0ZXJ3YXJkcy4KICAgICoKICAgICoKICAgICogQHBhcmFtIHtTdHJpbmd9IHJlc291cmNlRGF0YS5uYW1lc3BhY2UgLSBOYW1lc3BhY2UgaWRlbnRpZmllcgogICAgKiBAcGFyYW0ge09iamVjdH0gcmVzb3VyY2VEYXRhLmRhdGEgLSBPYmplY3QgY29udGFpbmluZyBpbmZvIGFib3V0IHRoZSBkYXRhIG5lZWRlZCB0byBiZSBmZXRjaGVkIGFuZCBob3cgaXQgc2hvdWxkIGJlIHBhcnNlZC4gTm90ZTogVGhlIEtFWSBORUVEUyB0byBiZSB0aGUgcmVzb3VyY2UgVFlQRSEKICAgICogQHBhcmFtIHtBcnJheX0gcmVzb3VyY2VEYXRhLmRhdGFbVFlQRV0uYXBwbHlUbyAtIFRoZSBhcnJheSBvZiBvcGVyYXRpb25zIG5lZWRlZCB0byBiZSBwZXJmb3JtZWQgZm9yIHRoZSBzcGVjaWZpYyBkYXRhIFRZUEUKICAgICogQHBhcmFtIHtTdHJpbmd9IHJlc291cmNlRGF0YS5kYXRhW1RZUEVdLmFwcGx5VG9beF0udmFyIC0gVGhlICd0aGlzJyBwcm9wZXJ0eSBuYW1lIHRoYXQgc2hvdWxkIGJlIHBvcHVsYXRlZCB3aXRoIHRoZSBkYXRhIGZldGNoZWQKICAgICogQHBhcmFtIHtCb29sZWFufSByZXNvdXJjZURhdGEuZGF0YVtUWVBFXS5hcHBseVRvW3hdLmNsYXNzaWZ5IC0gV2hldGhlciB0aGUgZGF0YSBmZXRjaGVkIHNob3VsZCBoYXZlIGEgbW9kZWwgYXBwbGllZCB0byBpdAogICAgKiBAcGFyYW0ge0Z1bmN0aW9ufSByZXNvdXJjZURhdGEuZGF0YVtUWVBFXS5hcHBseVRvW3hdLnBhcnNpbmdGdW5jIC0gT3B0aW9uYWwgcGFyc2luZyBmdW5jdGlvbiBpZiB0aGUgZmV0Y2hlZCBkYXRhIG5lZWRzIHRvIGJlIHBhcnNlZAogICAgKiBAcGFyYW0ge0Jvb2xlYW59IG9ubHlOYW1lc3BhY2VkIC0gT25seSBmZXRjaCBuYW1lc3BhY2VkIHJlc291cmNlcwogICAgKi8KICAgIHJlc291cmNlTWFuYWdlckZldGNoU2Vjb25kYXJ5UmVzb3VyY2VzOiBmdW5jdGlvbiByZXNvdXJjZU1hbmFnZXJGZXRjaFNlY29uZGFyeVJlc291cmNlcyhyZXNvdXJjZURhdGEpIHsKICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHMsCiAgICAgICAgX3RoaXMgPSB0aGlzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBvbmx5TmFtZXNwYWNlZCwgcmVxdWVzdHMsIG5hbWVzcGFjZSwgaGFzaCwgdHlwZXMsIGksIF9yZXNvdXJjZURhdGEkZGF0YSR0eSwgdHlwZSwgc3RhdHVzLCByZXF1ZXN0RGF0YSwgeSwgYXBwbHksIHJlc291cmNlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBvbmx5TmFtZXNwYWNlZCA9IF9hcmd1bWVudHMubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgICAgICAgICAgICAgcmVxdWVzdHMgPSB7fTsKICAgICAgICAgICAgICBuYW1lc3BhY2UgPSByZXNvdXJjZURhdGEubmFtZXNwYWNlOyAvLyBPbmx5IGZldGNoIHR5cGVzIGlmIHRoZSB1c2VyIGlzIGFsbG93ZWQgdG8uLi4KICAgICAgICAgICAgICBPYmplY3Qua2V5cyhyZXNvdXJjZURhdGEuZGF0YSkuZm9yRWFjaChmdW5jdGlvbiAodHlwZSkgewogICAgICAgICAgICAgICAgdmFyIHNjaGVtYSA9IF90aGlzLiRzdG9yZS5nZXR0ZXJzWydjbHVzdGVyL3NjaGVtYUZvciddKHR5cGUpOwogICAgICAgICAgICAgICAgaWYgKHNjaGVtYSkgewogICAgICAgICAgICAgICAgICB2YXIgX3NjaGVtYSRhdHRyaWJ1dGVzOwogICAgICAgICAgICAgICAgICB2YXIgdXJsID0gc2NoZW1hLmxpbmtzLmNvbGxlY3Rpb247CiAgICAgICAgICAgICAgICAgIGlmIChzY2hlbWEgIT09IG51bGwgJiYgc2NoZW1hICE9PSB2b2lkIDAgJiYgKF9zY2hlbWEkYXR0cmlidXRlcyA9IHNjaGVtYS5hdHRyaWJ1dGVzKSAhPT0gbnVsbCAmJiBfc2NoZW1hJGF0dHJpYnV0ZXMgIT09IHZvaWQgMCAmJiBfc2NoZW1hJGF0dHJpYnV0ZXMubmFtZXNwYWNlZCAmJiBuYW1lc3BhY2UpIHsKICAgICAgICAgICAgICAgICAgICB1cmwgPSAiIi5jb25jYXQodXJsLCAiLyIpLmNvbmNhdChuYW1lc3BhY2UpOwogICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9ubHlOYW1lc3BhY2VkKSB7CiAgICAgICAgICAgICAgICAgICAgLy8gVHlwZSBpc24ndCBuYW1lc3BhY2VkIGFuZCB3ZSd2ZSBiZWVuIHJlcXVlc3RlZCB0byBvbmx5IGZldGNoIG5hbWVzcGFjZWQgdHlwZXMKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgcmVxdWVzdHNbdHlwZV0gPSBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvcmVxdWVzdCcsIHsKICAgICAgICAgICAgICAgICAgICB1cmw6IHVybAogICAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBpZiAoIU9iamVjdC5rZXlzKHJlcXVlc3RzKS5sZW5ndGgpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAvLyB0aGlzIGlzIHRoZSBmbGFnL3ZhcmlhYmxlIHRoYXQgd2UgbmVlZCB0byBhcHBseSB0byBhbGwgcGxhY2VzIHRoYXQgcmVseSBvbiB0aGlzIGRhdGEuIEV4OiBMYWJlbGVkU2VsZWN0CiAgICAgICAgICAgICAgX3RoaXMuaXNMb2FkaW5nU2Vjb25kYXJ5UmVzb3VyY2VzID0gdHJ1ZTsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gYWxsSGFzaFNldHRsZWQocmVxdWVzdHMpOwogICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgaGFzaCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgdHlwZXMgPSBPYmplY3Qua2V5cyhoYXNoKTsKICAgICAgICAgICAgICBpID0gMDsKICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICBpZiAoIShpIDwgdHlwZXMubGVuZ3RoKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM0OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHR5cGUgPSB0eXBlc1tpXTsKICAgICAgICAgICAgICBzdGF0dXMgPSBoYXNoW3R5cGVdLnN0YXR1czsgLy8gaWYgaXQncyBuYW1lc3BhY2VkLCB3ZSBnZXQgdGhlIGRhdGEgb24gJ2l0ZW1zJyBwcm9wLCBmb3Igbm9uLW5hbWVzcGFjZWQgaXQncyAgJ2RhdGEnIHByb3AuLi4KICAgICAgICAgICAgICByZXF1ZXN0RGF0YSA9IGhhc2hbdHlwZV0udmFsdWUuaXRlbXMgfHwgaGFzaFt0eXBlXS52YWx1ZS5kYXRhIHx8IGhhc2hbdHlwZV0udmFsdWU7CiAgICAgICAgICAgICAgaWYgKCEoc3RhdHVzID09PSAnZnVsZmlsbGVkJyAmJiByZXNvdXJjZURhdGEuZGF0YVt0eXBlXSAmJiAoX3Jlc291cmNlRGF0YSRkYXRhJHR5ID0gcmVzb3VyY2VEYXRhLmRhdGFbdHlwZV0uYXBwbHlUbykgIT09IG51bGwgJiYgX3Jlc291cmNlRGF0YSRkYXRhJHR5ICE9PSB2b2lkIDAgJiYgX3Jlc291cmNlRGF0YSRkYXRhJHR5Lmxlbmd0aCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB5ID0gMDsKICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICBpZiAoISh5IDwgcmVzb3VyY2VEYXRhLmRhdGFbdHlwZV0uYXBwbHlUby5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjg7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgYXBwbHkgPSByZXNvdXJjZURhdGEuZGF0YVt0eXBlXS5hcHBseVRvW3ldOwogICAgICAgICAgICAgIHJlc291cmNlcyA9IHJlcXVlc3REYXRhOwogICAgICAgICAgICAgIGlmICghYXBwbHkuY2xhc3NpZnkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyNDsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9jcmVhdGVNYW55JywgcmVxdWVzdERhdGEpOwogICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgIHJlc291cmNlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgICAgaWYgKGFwcGx5LnBhcnNpbmdGdW5jKSB7CiAgICAgICAgICAgICAgICBfdGhpc1thcHBseS52YXJdID0gYXBwbHkucGFyc2luZ0Z1bmMocmVzb3VyY2VzKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgX3RoaXNbYXBwbHkudmFyXSA9IHJlc291cmNlczsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIGNhc2UgMjU6CiAgICAgICAgICAgICAgeSsrOwogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyODoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgICAgaWYgKHN0YXR1cyA9PT0gJ3JlamVjdGVkJykgewogICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiUmVzb3VyY2UgTWFuYWdlciAtIHNlY29uZGFyeSBkYXRhIHJlcXVlc3QgZm9yIHR5cGUgIi5jb25jYXQodHlwZSwgIiBoYXMgZmFpbGVkIiksIHN0YXR1cy5lcnJvcik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAzMToKICAgICAgICAgICAgICBpKys7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDExOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDM0OgogICAgICAgICAgICAgIF90aGlzLmlzTG9hZGluZ1NlY29uZGFyeVJlc291cmNlcyA9IGZhbHNlOwogICAgICAgICAgICBjYXNlIDM1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIC8qKgogICAgICogQ2xlYXIgdGhlIGNhY2hlZCBzZWNvbmRhcnkgcmVzb3VyY2VzCiAgICAgKgogICAgICogQHBhcmFtIHsqfSByZXNvdXJjZURhdGEgU2VlIHJlc291cmNlTWFuYWdlckZldGNoU2Vjb25kYXJ5UmVzb3VyY2VzCiAgICAgKiBAcGFyYW0geyp9IG9ubHlOYW1lc3BhY2VkIENsZWFyIG9ubHkgbmFtZXNwYWNlZCByZXNvdXJjZXMKICAgICAqLwogICAgcmVzb3VyY2VNYW5hZ2VyQ2xlYXJTZWNvbmRhcnlSZXNvdXJjZXM6IGZ1bmN0aW9uIHJlc291cmNlTWFuYWdlckNsZWFyU2Vjb25kYXJ5UmVzb3VyY2VzKHJlc291cmNlRGF0YSkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIG9ubHlOYW1lc3BhY2VkID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiBmYWxzZTsKICAgICAgT2JqZWN0LmtleXMocmVzb3VyY2VEYXRhLmRhdGEpLmZvckVhY2goZnVuY3Rpb24gKHR5cGUpIHsKICAgICAgICB2YXIgc2NoZW1hID0gX3RoaXMyLiRzdG9yZS5nZXR0ZXJzWydjbHVzdGVyL3NjaGVtYUZvciddKHR5cGUpOwogICAgICAgIGlmIChzY2hlbWEpIHsKICAgICAgICAgIHZhciBfc2NoZW1hJGF0dHJpYnV0ZXMyOwogICAgICAgICAgaWYgKCEoc2NoZW1hICE9PSBudWxsICYmIHNjaGVtYSAhPT0gdm9pZCAwICYmIChfc2NoZW1hJGF0dHJpYnV0ZXMyID0gc2NoZW1hLmF0dHJpYnV0ZXMpICE9PSBudWxsICYmIF9zY2hlbWEkYXR0cmlidXRlczIgIT09IHZvaWQgMCAmJiBfc2NoZW1hJGF0dHJpYnV0ZXMyLm5hbWVzcGFjZWQpICYmIG9ubHlOYW1lc3BhY2VkKSB7CiAgICAgICAgICAgIC8vIHJlc291cmNlIGlzbid0IG5hbWVzcGFjZWQgYW5kIHdlJ3JlIG9ubHkgaW50ZXJlc3RlZCBpbiBuYW1lc3BhY2VkIHJlc291cmNlcwogICAgICAgICAgICByZXR1cm47CiAgICAgICAgICB9CiAgICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IHJlc291cmNlRGF0YS5kYXRhW3R5cGVdLmFwcGx5VG8ubGVuZ3RoOyB5KyspIHsKICAgICAgICAgICAgdmFyIGFwcGx5ID0gcmVzb3VyY2VEYXRhLmRhdGFbdHlwZV0uYXBwbHlUb1t5XTsKICAgICAgICAgICAgX3RoaXMyW2FwcGx5LnZhcl0gPSBbXTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["mapGetters","allHashSettled","computed","_objectSpread","data","isLoadingSecondaryResources","methods","resourceManagerFetchSecondaryResources","resourceData","_arguments","arguments","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","onlyNamespaced","requests","namespace","hash","types","i","_resourceData$data$ty","type","status","requestData","y","apply","resources","wrap","_callee$","_context","prev","next","length","undefined","Object","keys","forEach","schema","$store","getters","_schema$attributes","url","links","collection","attributes","namespaced","concat","dispatch","sent","value","items","applyTo","classify","parsingFunc","var","console","error","stop","resourceManagerClearSecondaryResources","_this2","_schema$attributes2"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/mixins/resource-manager.js"],"sourcesContent":["import { mapGetters } from 'vuex';\nimport { allHashSettled } from '@shell/utils/promise';\n\nexport default {\n  computed: { ...mapGetters(['currentCluster']) },\n  data() {\n    return { isLoadingSecondaryResources: false };\n  },\n  methods: {\n    /**\n    *\n    * Function resourceManagerFetchSecondaryResources\n    * This method is used to fetch what is called \"secondary resources\", which can be defined as resources that are needed to populate\n    * the page/component itself (ex: used as options on a Select) but don't need to be put into Vuex store or watched to get constant updates.\n    * This method allows to fetch resources for a given namespace to reduce the amount of results instead of needing to fetch all and filtering afterwards.\n    *\n    *\n    * @param {String} resourceData.namespace - Namespace identifier\n    * @param {Object} resourceData.data - Object containing info about the data needed to be fetched and how it should be parsed. Note: The KEY NEEDS to be the resource TYPE!\n    * @param {Array} resourceData.data[TYPE].applyTo - The array of operations needed to be performed for the specific data TYPE\n    * @param {String} resourceData.data[TYPE].applyTo[x].var - The 'this' property name that should be populated with the data fetched\n    * @param {Boolean} resourceData.data[TYPE].applyTo[x].classify - Whether the data fetched should have a model applied to it\n    * @param {Function} resourceData.data[TYPE].applyTo[x].parsingFunc - Optional parsing function if the fetched data needs to be parsed\n    * @param {Boolean} onlyNamespaced - Only fetch namespaced resources\n    */\n    async resourceManagerFetchSecondaryResources(resourceData, onlyNamespaced = false) {\n      const requests = {};\n      const namespace = resourceData.namespace;\n\n      // Only fetch types if the user is allowed to...\n      Object.keys(resourceData.data).forEach((type) => {\n        const schema = this.$store.getters['cluster/schemaFor'](type);\n\n        if (schema) {\n          let url = schema.links.collection;\n\n          if (schema?.attributes?.namespaced && namespace) {\n            url = `${ url }/${ namespace }`;\n          } else if (onlyNamespaced) {\n            // Type isn't namespaced and we've been requested to only fetch namespaced types\n            return;\n          }\n\n          requests[type] = this.$store.dispatch('cluster/request', { url });\n        }\n      });\n\n      if (Object.keys(requests).length) {\n        // this is the flag/variable that we need to apply to all places that rely on this data. Ex: LabeledSelect\n        this.isLoadingSecondaryResources = true;\n        const hash = await allHashSettled(requests);\n        const types = Object.keys(hash);\n\n        for (let i = 0; i < types.length; i++) {\n          const type = types[i];\n          const status = hash[type].status;\n          // if it's namespaced, we get the data on 'items' prop, for non-namespaced it's  'data' prop...\n          const requestData = hash[type].value.items || hash[type].value.data || hash[type].value;\n\n          if (status === 'fulfilled' && resourceData.data[type] && resourceData.data[type].applyTo?.length) {\n            for (let y = 0; y < resourceData.data[type].applyTo.length; y++) {\n              const apply = resourceData.data[type].applyTo[y];\n              let resources = requestData;\n\n              if (apply.classify) {\n                resources = await this.$store.dispatch('cluster/createMany', requestData);\n              }\n\n              if (apply.parsingFunc) {\n                this[apply.var] = apply.parsingFunc(resources);\n              } else {\n                this[apply.var] = resources;\n              }\n            }\n          } else if (status === 'rejected') {\n            console.error(`Resource Manager - secondary data request for type ${ type } has failed`, status.error); // eslint-disable-line no-console\n          }\n        }\n\n        this.isLoadingSecondaryResources = false;\n      }\n    },\n\n    /**\n     * Clear the cached secondary resources\n     *\n     * @param {*} resourceData See resourceManagerFetchSecondaryResources\n     * @param {*} onlyNamespaced Clear only namespaced resources\n     */\n    resourceManagerClearSecondaryResources(resourceData, onlyNamespaced = false) {\n      Object.keys(resourceData.data).forEach((type) => {\n        const schema = this.$store.getters['cluster/schemaFor'](type);\n\n        if (schema) {\n          if (!schema?.attributes?.namespaced && onlyNamespaced) {\n            // resource isn't namespaced and we're only interested in namespaced resources\n            return;\n          }\n\n          for (let y = 0; y < resourceData.data[type].applyTo.length; y++) {\n            const apply = resourceData.data[type].applyTo[y];\n\n            this[apply.var] = [];\n          }\n        }\n      });\n    }\n  },\n};\n"],"mappings":"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"}]}