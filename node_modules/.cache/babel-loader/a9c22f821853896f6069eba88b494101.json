{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/models/workload.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/models/workload.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jbGFzc0NhbGxDaGVjayI7CmltcG9ydCBfY3JlYXRlQ2xhc3MgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlQ2xhc3MiOwppbXBvcnQgX2dldCBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXQiOwppbXBvcnQgX2luaGVyaXRzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2luaGVyaXRzIjsKaW1wb3J0IF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4iOwppbXBvcnQgX2dldFByb3RvdHlwZU9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2dldFByb3RvdHlwZU9mIjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bIkBAaXRlcmF0b3IiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH0KaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwpmdW5jdGlvbiBfY3JlYXRlU3VwZXIoRGVyaXZlZCkgeyB2YXIgaGFzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCA9IF9pc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QoKTsgcmV0dXJuIGZ1bmN0aW9uIF9jcmVhdGVTdXBlckludGVybmFsKCkgeyB2YXIgU3VwZXIgPSBfZ2V0UHJvdG90eXBlT2YoRGVyaXZlZCksIHJlc3VsdDsgaWYgKGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QpIHsgdmFyIE5ld1RhcmdldCA9IF9nZXRQcm90b3R5cGVPZih0aGlzKS5jb25zdHJ1Y3RvcjsgcmVzdWx0ID0gUmVmbGVjdC5jb25zdHJ1Y3QoU3VwZXIsIGFyZ3VtZW50cywgTmV3VGFyZ2V0KTsgfSBlbHNlIHsgcmVzdWx0ID0gU3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsgfSByZXR1cm4gX3Bvc3NpYmxlQ29uc3RydWN0b3JSZXR1cm4odGhpcywgcmVzdWx0KTsgfTsgfQpmdW5jdGlvbiBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCkgeyBpZiAodHlwZW9mIFJlZmxlY3QgPT09ICJ1bmRlZmluZWQiIHx8ICFSZWZsZWN0LmNvbnN0cnVjdCkgcmV0dXJuIGZhbHNlOyBpZiAoUmVmbGVjdC5jb25zdHJ1Y3Quc2hhbSkgcmV0dXJuIGZhbHNlOyBpZiAodHlwZW9mIFByb3h5ID09PSAiZnVuY3Rpb24iKSByZXR1cm4gdHJ1ZTsgdHJ5IHsgQm9vbGVhbi5wcm90b3R5cGUudmFsdWVPZi5jYWxsKFJlZmxlY3QuY29uc3RydWN0KEJvb2xlYW4sIFtdLCBmdW5jdGlvbiAoKSB7fSkpOyByZXR1cm4gdHJ1ZTsgfSBjYXRjaCAoZSkgeyByZXR1cm4gZmFsc2U7IH0gfQppbXBvcnQgeyBmaW5kQnksIGluc2VydEF0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL2FycmF5JzsKaW1wb3J0IHsgVElNRVNUQU1QLCBDQVRUTEVfUFVCTElDX0VORFBPSU5UUyB9IGZyb20gJ0BzaGVsbC9jb25maWcvbGFiZWxzLWFubm90YXRpb25zJzsKaW1wb3J0IHsgV09SS0xPQURfVFlQRVMsIFNFUlZJQ0UsIFBPRCB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBnZXQgYXMgX2dldDIsIHNldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgZGF5IGZyb20gJ2RheWpzJzsKaW1wb3J0IHsgY29udmVydFNlbGVjdG9yT2JqLCBtYXRjaGluZywgbWF0Y2hlcyB9IGZyb20gJ0BzaGVsbC91dGlscy9zZWxlY3Rvcic7CmltcG9ydCB7IFNFUEFSQVRPUiB9IGZyb20gJ0BzaGVsbC9jb25maWcvd29ya2xvYWQnOwppbXBvcnQgV29ya2xvYWRTZXJ2aWNlIGZyb20gJ0BzaGVsbC9tb2RlbHMvd29ya2xvYWQuc2VydmljZSc7CmV4cG9ydCB2YXIgZGVmYXVsdENvbnRhaW5lciA9IHsKICBpbWFnZVB1bGxQb2xpY3k6ICdBbHdheXMnLAogIG5hbWU6ICdjb250YWluZXItMCcsCiAgc2VjdXJpdHlDb250ZXh0OiB7CiAgICBydW5Bc05vblJvb3Q6IGZhbHNlLAogICAgcmVhZE9ubHlSb290RmlsZXN5c3RlbTogZmFsc2UsCiAgICBwcml2aWxlZ2VkOiBmYWxzZSwKICAgIGFsbG93UHJpdmlsZWdlRXNjYWxhdGlvbjogZmFsc2UKICB9Cn07CnZhciBXb3JrbG9hZCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX1dvcmtsb2FkU2VydmljZSkgewogIF9pbmhlcml0cyhXb3JrbG9hZCwgX1dvcmtsb2FkU2VydmljZSk7CiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihXb3JrbG9hZCk7CiAgZnVuY3Rpb24gV29ya2xvYWQoKSB7CiAgICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgV29ya2xvYWQpOwogICAgcmV0dXJuIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogIH0KICBfY3JlYXRlQ2xhc3MoV29ya2xvYWQsIFt7CiAgICBrZXk6ICJfYXZhaWxhYmxlQWN0aW9ucyIsCiAgICBnZXQ6CiAgICAvLyByZW1vdmUgY2xvbmUgYXMgeWFtbC9lZGl0IGFzIHlhbWwgdW50aWwgQVBJIHN1cHBvcnRlZAogICAgZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgb3V0ID0gX2dldChfZ2V0UHJvdG90eXBlT2YoV29ya2xvYWQucHJvdG90eXBlKSwgIl9hdmFpbGFibGVBY3Rpb25zIiwgdGhpcyk7CiAgICAgIHZhciB0eXBlID0gdGhpcy5fdHlwZSA/IHRoaXMuX3R5cGUgOiB0aGlzLnR5cGU7CiAgICAgIHZhciBlZGl0WWFtbCA9IGZpbmRCeShvdXQsICdhY3Rpb24nLCAnZ29Ub0VkaXRZYW1sJyk7CiAgICAgIHZhciBpbmRleCA9IGVkaXRZYW1sID8gb3V0LmluZGV4T2YoZWRpdFlhbWwpIDogMDsKICAgICAgaW5zZXJ0QXQob3V0LCBpbmRleCwgewogICAgICAgIGFjdGlvbjogJ2FkZFNpZGVjYXInLAogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2FjdGlvbi5hZGRTaWRlY2FyJyksCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1wbHVzJywKICAgICAgICBlbmFibGVkOiAhIXRoaXMubGlua3MudXBkYXRlCiAgICAgIH0pOwogICAgICBpZiAodHlwZSAhPT0gV09SS0xPQURfVFlQRVMuSk9CICYmIHR5cGUgIT09IFdPUktMT0FEX1RZUEVTLkNST05fSk9CKSB7CiAgICAgICAgdmFyIF90aGlzJHNwZWMsIF90aGlzJHNwZWMyOwogICAgICAgIGluc2VydEF0KG91dCwgMCwgewogICAgICAgICAgYWN0aW9uOiAndG9nZ2xlUm9sbGJhY2tNb2RhbCcsCiAgICAgICAgICBsYWJlbDogdGhpcy50KCdhY3Rpb24ucm9sbGJhY2snKSwKICAgICAgICAgIGljb246ICdpY29uIGljb24taGlzdG9yeScsCiAgICAgICAgICBlbmFibGVkOiAhIXRoaXMubGlua3MudXBkYXRlCiAgICAgICAgfSk7CiAgICAgICAgaW5zZXJ0QXQob3V0LCAwLCB7CiAgICAgICAgICBhY3Rpb246ICdyZWRlcGxveScsCiAgICAgICAgICBsYWJlbDogdGhpcy50KCdhY3Rpb24ucmVkZXBsb3knKSwKICAgICAgICAgIGljb246ICdpY29uIGljb24tcmVmcmVzaCcsCiAgICAgICAgICBlbmFibGVkOiAhIXRoaXMubGlua3MudXBkYXRlLAogICAgICAgICAgYnVsa2FibGU6IHRydWUKICAgICAgICB9KTsKICAgICAgICBpbnNlcnRBdChvdXQsIDAsIHsKICAgICAgICAgIGFjdGlvbjogJ3BhdXNlJywKICAgICAgICAgIGxhYmVsOiB0aGlzLnQoJ2FzeW5jQnV0dG9uLnBhdXNlLmFjdGlvbicpLAogICAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1wYXVzZScsCiAgICAgICAgICBlbmFibGVkOiAhIXRoaXMubGlua3MudXBkYXRlICYmICEoKF90aGlzJHNwZWMgPSB0aGlzLnNwZWMpICE9PSBudWxsICYmIF90aGlzJHNwZWMgIT09IHZvaWQgMCAmJiBfdGhpcyRzcGVjLnBhdXNlZCkKICAgICAgICB9KTsKICAgICAgICBpbnNlcnRBdChvdXQsIDAsIHsKICAgICAgICAgIGFjdGlvbjogJ3Jlc3VtZScsCiAgICAgICAgICBsYWJlbDogdGhpcy50KCdhc3luY0J1dHRvbi5yZXN1bWUuYWN0aW9uJyksCiAgICAgICAgICBpY29uOiAnaWNvbiBpY29uLXBsYXknLAogICAgICAgICAgZW5hYmxlZDogISF0aGlzLmxpbmtzLnVwZGF0ZSAmJiAoKF90aGlzJHNwZWMyID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzIucGF1c2VkKSA9PT0gdHJ1ZQogICAgICAgIH0pOwogICAgICB9CiAgICAgIGluc2VydEF0KG91dCwgMCwgewogICAgICAgIGRpdmlkZXI6IHRydWUKICAgICAgfSk7CiAgICAgIGluc2VydEF0KG91dCwgMCwgewogICAgICAgIGFjdGlvbjogJ29wZW5TaGVsbCcsCiAgICAgICAgZW5hYmxlZDogISF0aGlzLmxpbmtzLnZpZXcsCiAgICAgICAgaWNvbjogJ2ljb24gaWNvbi1mdyBpY29uLWNoZXZyb24tcmlnaHQnLAogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2FjdGlvbi5vcGVuU2hlbGwnKSwKICAgICAgICB0b3RhbDogMQogICAgICB9KTsKICAgICAgdmFyIHRvRmlsdGVyID0gWydjbG9uZVlhbWwnXTsKICAgICAgb3V0ID0gb3V0LmZpbHRlcihmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICAgICAgaWYgKCF0b0ZpbHRlci5pbmNsdWRlcyhhY3Rpb24uYWN0aW9uKSkgewogICAgICAgICAgcmV0dXJuIGFjdGlvbjsKICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0sIHsKICAgIGtleTogImFwcGx5RGVmYXVsdHMiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGFwcGx5RGVmYXVsdHModm0pIHsKICAgICAgdmFyIF90aGlzJHNwZWMzID0gdGhpcy5zcGVjLAogICAgICAgIHNwZWMgPSBfdGhpcyRzcGVjMyA9PT0gdm9pZCAwID8ge30gOiBfdGhpcyRzcGVjMzsKICAgICAgaWYgKHRoaXMudHlwZSA9PT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IpIHsKICAgICAgICBpZiAoIXNwZWMuam9iVGVtcGxhdGUpIHsKICAgICAgICAgIHNwZWMuam9iVGVtcGxhdGUgPSB7CiAgICAgICAgICAgIHNwZWM6IHsKICAgICAgICAgICAgICB0ZW1wbGF0ZTogewogICAgICAgICAgICAgICAgc3BlYzogewogICAgICAgICAgICAgICAgICByZXN0YXJ0UG9saWN5OiAnTmV2ZXInLAogICAgICAgICAgICAgICAgICBjb250YWluZXJzOiBbewogICAgICAgICAgICAgICAgICAgIGltYWdlUHVsbFBvbGljeTogJ0Fsd2F5cycsCiAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2NvbnRhaW5lci0wJwogICAgICAgICAgICAgICAgICB9XSwKICAgICAgICAgICAgICAgICAgaW5pdENvbnRhaW5lcnM6IFtdCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIXNwZWMucmVwbGljYXMgJiYgc3BlYy5yZXBsaWNhcyAhPT0gMCkgewogICAgICAgICAgc3BlYy5yZXBsaWNhcyA9IDE7CiAgICAgICAgfQogICAgICAgIGlmICghc3BlYy50ZW1wbGF0ZSkgewogICAgICAgICAgc3BlYy50ZW1wbGF0ZSA9IHsKICAgICAgICAgICAgc3BlYzogewogICAgICAgICAgICAgIHJlc3RhcnRQb2xpY3k6IHRoaXMudHlwZSA9PT0gV09SS0xPQURfVFlQRVMuSk9CID8gJ05ldmVyJyA6ICdBbHdheXMnLAogICAgICAgICAgICAgIGNvbnRhaW5lcnM6IFtfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0Q29udGFpbmVyKV0sCiAgICAgICAgICAgICAgaW5pdENvbnRhaW5lcnM6IFtdCiAgICAgICAgICAgIH0KICAgICAgICAgIH07CiAgICAgICAgfQogICAgICAgIGlmICghc3BlYy5zZWxlY3RvcikgewogICAgICAgICAgc3BlYy5zZWxlY3RvciA9IHt9OwogICAgICAgIH0KICAgICAgfQogICAgICB2bS4kc2V0KHRoaXMsICdzcGVjJywgc3BlYyk7CiAgICB9CiAgfSwgewogICAga2V5OiAidG9nZ2xlUm9sbGJhY2tNb2RhbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gdG9nZ2xlUm9sbGJhY2tNb2RhbCgpIHsKICAgICAgdmFyIHdvcmtsb2FkID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB0aGlzOwogICAgICB0aGlzLiRkaXNwYXRjaCgncHJvbXB0TW9kYWwnLCB7CiAgICAgICAgY29tcG9uZW50UHJvcHM6IHsKICAgICAgICAgIHdvcmtsb2FkOiB3b3JrbG9hZAogICAgICAgIH0sCiAgICAgICAgY29tcG9uZW50OiAnUm9sbGJhY2tXb3JrbG9hZERpYWxvZycKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAicm9sbEJhY2tXb3JrbG9hZCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3JvbGxCYWNrV29ya2xvYWQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoY2x1c3Rlciwgd29ya2xvYWQsIHR5cGUsIHJvbGxiYWNrUmVxdWVzdERhdGEpIHsKICAgICAgICB2YXIgcm9sbGJhY2tSZXF1ZXN0Qm9keSwgbmFtZXNwYWNlLCB3b3JrbG9hZE5hbWU7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcm9sbGJhY2tSZXF1ZXN0Qm9keSA9IEpTT04uc3RyaW5naWZ5KHJvbGxiYWNrUmVxdWVzdERhdGEpOwogICAgICAgICAgICAgIGlmICghQXJyYXkuaXNBcnJheSh3b3JrbG9hZCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IodGhpcy50KCdwcm9tcHRSb2xsYmFjay5tdWx0aXBsZVdvcmtsb2FkRXJyb3InKSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBuYW1lc3BhY2UgPSB3b3JrbG9hZC5tZXRhZGF0YS5uYW1lc3BhY2U7CiAgICAgICAgICAgICAgd29ya2xvYWROYW1lID0gd29ya2xvYWQubWV0YWRhdGEubmFtZTsKICAgICAgICAgICAgICAvKioKICAgICAgICAgICAgICAgKiBFbnN1cmUgd2UgZ28gb3V0IHRvIHRoZSBjb3JyZWN0IGNsdXN0ZXIKICAgICAgICAgICAgICAgKgogICAgICAgICAgICAgICAqIEJ1aWxkIHRoZSByZXF1ZXN0IGJvZHkgaW4gdGhlIHNhbWUgZm9ybWF0IHRoYXQga3ViZWN0bAogICAgICAgICAgICAgICAqIHVzZXMgdG8gY2FsbCB0aGUgS3ViZXJuZXRlcyBBUEkgdG8gcm9sbCBiYWNrIGEgd29ya2xvYWQuCiAgICAgICAgICAgICAgICogVG8gc2VlIGFuIGV4YW1wbGUgcmVxdWVzdCBib2R5LCBydW46CiAgICAgICAgICAgICAgICoga3ViZWN0bCByb2xsb3V0IHVuZG8gZGVwbG95bWVudC9bZGVwbG95bWVudCBuYW1lXSAtLXRvLXJldmlzaW9uPVtyZXZpc2lvbiBudW1iZXJdIC12PTgKICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gdGhpcy5wYXRjaChyb2xsYmFja1JlcXVlc3RCb2R5LCB7CiAgICAgICAgICAgICAgICB1cmw6ICIvazhzL2NsdXN0ZXJzLyIuY29uY2F0KGNsdXN0ZXIuaWQsICIvYXBpcy9hcHBzL3YxL25hbWVzcGFjZXMvIikuY29uY2F0KG5hbWVzcGFjZSwgIi8iKS5jb25jYXQodHlwZSwgIi8iKS5jb25jYXQod29ya2xvYWROYW1lKQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiByb2xsQmFja1dvcmtsb2FkKF94LCBfeDIsIF94MywgX3g0KSB7CiAgICAgICAgcmV0dXJuIF9yb2xsQmFja1dvcmtsb2FkLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHJvbGxCYWNrV29ya2xvYWQ7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJwYXVzZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcGF1c2UoKSB7CiAgICAgIHNldCh0aGlzLnNwZWMsICdwYXVzZWQnLCB0cnVlKTsKICAgICAgdGhpcy5zYXZlKCk7CiAgICB9CiAgfSwgewogICAga2V5OiAicmVzdW1lIiwKICAgIHZhbHVlOiBmdW5jdGlvbiByZXN1bWUoKSB7CiAgICAgIHNldCh0aGlzLnNwZWMsICdwYXVzZWQnLCBmYWxzZSk7CiAgICAgIHRoaXMuc2F2ZSgpOwogICAgfQogIH0sIHsKICAgIGtleTogInNjYWxlRG93biIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NjYWxlRG93biA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIG5ld1NjYWxlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBuZXdTY2FsZSA9IHRoaXMuc3BlYy5yZXBsaWNhcyAtIDE7CiAgICAgICAgICAgICAgaWYgKCEobmV3U2NhbGUgPj0gMCkpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBzZXQodGhpcy5zcGVjLCAncmVwbGljYXMnLCBuZXdTY2FsZSk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA1OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLnNhdmUoKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUyLCB0aGlzKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBzY2FsZURvd24oKSB7CiAgICAgICAgcmV0dXJuIF9zY2FsZURvd24uYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gc2NhbGVEb3duOwogICAgfSgpCiAgfSwgewogICAga2V5OiAic2NhbGVVcCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX3NjYWxlVXAgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBzZXQodGhpcy5zcGVjLCAncmVwbGljYXMnLCB0aGlzLnNwZWMucmVwbGljYXMgKyAxKTsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2F2ZSgpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIHNjYWxlVXAoKSB7CiAgICAgICAgcmV0dXJuIF9zY2FsZVVwLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIHNjYWxlVXA7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJzdGF0ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHNwZWM0OwogICAgICBpZiAoKChfdGhpcyRzcGVjNCA9IHRoaXMuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkc3BlYzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHNwZWM0LnBhdXNlZCkgPT09IHRydWUpIHsKICAgICAgICByZXR1cm4gJ3BhdXNlZCc7CiAgICAgIH0KICAgICAgcmV0dXJuIF9nZXQoX2dldFByb3RvdHlwZU9mKFdvcmtsb2FkLnByb3RvdHlwZSksICJzdGF0ZSIsIHRoaXMpOwogICAgfQogIH0sIHsKICAgIGtleTogIm9wZW5TaGVsbCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX29wZW5TaGVsbCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgdmFyIHBvZHMsIF9pdGVyYXRvciwgX3N0ZXAsIHBvZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiB0aGlzLm1hdGNoaW5nUG9kcygpOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgcG9kcyA9IF9jb250ZXh0NC5zZW50OwogICAgICAgICAgICAgIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHBvZHMpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gNDsKICAgICAgICAgICAgICBfaXRlcmF0b3IucygpOwogICAgICAgICAgICBjYXNlIDY6CiAgICAgICAgICAgICAgaWYgKChfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmUpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcG9kID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICAgICAgaWYgKCFwb2QuaXNSdW5uaW5nKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDExOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIHBvZC5vcGVuU2hlbGwoKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSA2OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnByZXYgPSAxNTsKICAgICAgICAgICAgICBfY29udGV4dDQudDAgPSBfY29udGV4dDRbImNhdGNoIl0oNCk7CiAgICAgICAgICAgICAgX2l0ZXJhdG9yLmUoX2NvbnRleHQ0LnQwKTsKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDE4OwogICAgICAgICAgICAgIF9pdGVyYXRvci5mKCk7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5maW5pc2goMTgpOwogICAgICAgICAgICBjYXNlIDIxOgogICAgICAgICAgICAgIHRoaXMuJGRpc3BhdGNoKCdncm93bC9lcnJvcicsIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnVW5hdmFpbGFibGUnLAogICAgICAgICAgICAgICAgbWVzc2FnZTogJ1RoZXJlIGFyZSBubyBydW5uaW5nIHBvZHMgdG8gZXhlY3V0ZSBhIHNoZWxsIGluLicKICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQsIHRoaXMsIFtbNCwgMTUsIDE4LCAyMV1dKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBvcGVuU2hlbGwoKSB7CiAgICAgICAgcmV0dXJuIF9vcGVuU2hlbGwuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gb3BlblNoZWxsOwogICAgfSgpCiAgfSwgewogICAga2V5OiAiYWRkU2lkZWNhciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gYWRkU2lkZWNhcigpIHsKICAgICAgcmV0dXJuIHRoaXMuZ29Ub0VkaXQoewogICAgICAgIHNpZGVjYXI6IHRydWUKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAic2hvd1BvZFJlc3RhcnRzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZXN0YXJ0Q291bnQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBwb2RzID0gdGhpcy5wb2RzOwogICAgICB2YXIgc3VtID0gMDsKICAgICAgcG9kcy5mb3JFYWNoKGZ1bmN0aW9uIChwb2QpIHsKICAgICAgICBpZiAocG9kLnN0YXR1cy5jb250YWluZXJTdGF0dXNlcykgewogICAgICAgICAgdmFyIF9wb2Qkc3RhdHVzOwogICAgICAgICAgc3VtICs9ICgoX3BvZCRzdGF0dXMgPSBwb2Quc3RhdHVzKSA9PT0gbnVsbCB8fCBfcG9kJHN0YXR1cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3BvZCRzdGF0dXMuY29udGFpbmVyU3RhdHVzZXNbMF0ucmVzdGFydENvdW50KSB8fCAwOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBzdW07CiAgICB9CiAgfSwgewogICAga2V5OiAiaGFzU2lkZWNhcnMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzcGVjNSwgX3RoaXMkc3BlYzY7CiAgICAgIHZhciBwb2RUZW1wbGF0ZVNwZWMgPSB0aGlzLnR5cGUgPT09IFdPUktMT0FEX1RZUEVTLkNST05fSk9CID8gdGhpcyA9PT0gbnVsbCB8fCB0aGlzID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWM1ID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNSA9PT0gdm9pZCAwIHx8IChfdGhpcyRzcGVjNSA9IF90aGlzJHNwZWM1LmpvYlRlbXBsYXRlKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNSA9PT0gdm9pZCAwIHx8IChfdGhpcyRzcGVjNSA9IF90aGlzJHNwZWM1LnNwZWMpID09PSBudWxsIHx8IF90aGlzJHNwZWM1ID09PSB2b2lkIDAgfHwgKF90aGlzJHNwZWM1ID0gX3RoaXMkc3BlYzUudGVtcGxhdGUpID09PSBudWxsIHx8IF90aGlzJHNwZWM1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzcGVjNS5zcGVjIDogKF90aGlzJHNwZWM2ID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNiA9PT0gdm9pZCAwIHx8IChfdGhpcyRzcGVjNiA9IF90aGlzJHNwZWM2LnRlbXBsYXRlKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzYuc3BlYzsKICAgICAgdmFyIF9wb2RUZW1wbGF0ZVNwZWMkY29udCA9IHBvZFRlbXBsYXRlU3BlYy5jb250YWluZXJzLAogICAgICAgIGNvbnRhaW5lcnMgPSBfcG9kVGVtcGxhdGVTcGVjJGNvbnQgPT09IHZvaWQgMCA/IFtdIDogX3BvZFRlbXBsYXRlU3BlYyRjb250LAogICAgICAgIF9wb2RUZW1wbGF0ZVNwZWMkaW5pdCA9IHBvZFRlbXBsYXRlU3BlYy5pbml0Q29udGFpbmVycywKICAgICAgICBpbml0Q29udGFpbmVycyA9IF9wb2RUZW1wbGF0ZVNwZWMkaW5pdCA9PT0gdm9pZCAwID8gW10gOiBfcG9kVGVtcGxhdGVTcGVjJGluaXQ7CiAgICAgIHJldHVybiBjb250YWluZXJzLmxlbmd0aCA+IDEgfHwgaW5pdENvbnRhaW5lcnMubGVuZ3RoOwogICAgfQogIH0sIHsKICAgIGtleTogImN1c3RvbVZhbGlkYXRpb25SdWxlcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIHR5cGUgPSB0aGlzLl90eXBlID8gdGhpcy5fdHlwZSA6IHRoaXMudHlwZTsKICAgICAgdmFyIHBvZFNwZWNQYXRoID0gdHlwZSA9PT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IgPyAnc3BlYy5qb2JUZW1wbGF0ZS5zcGVjLnRlbXBsYXRlLnNwZWMnIDogJ3NwZWMudGVtcGxhdGUuc3BlYyc7CiAgICAgIHZhciBvdXQgPSBbewogICAgICAgIG51bGxhYmxlOiBmYWxzZSwKICAgICAgICBwYXRoOiAnbWV0YWRhdGEubmFtZScsCiAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgdHJhbnNsYXRpb25LZXk6ICdnZW5lcmljLm5hbWUnLAogICAgICAgIHR5cGU6ICdzdWJEb21haW4nCiAgICAgIH0sIHsKICAgICAgICBudWxsYWJsZTogZmFsc2UsCiAgICAgICAgcGF0aDogJ3NwZWMnLAogICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgIHR5cGU6ICdvYmplY3QnLAogICAgICAgIHZhbGlkYXRvcnM6IFsnY29udGFpbmVySW1hZ2VzJ10KICAgICAgfSwgewogICAgICAgIG51bGxhYmxlOiB0cnVlLAogICAgICAgIHBhdGg6ICIiLmNvbmNhdChwb2RTcGVjUGF0aCwgIi5hZmZpbml0eSIpLAogICAgICAgIHR5cGU6ICdvYmplY3QnLAogICAgICAgIHZhbGlkYXRvcnM6IFsncG9kQWZmaW5pdHknXQogICAgICB9XTsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5ERVBMT1lNRU5UOgogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuUkVQTElDQV9TRVQ6CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIG51bGxhYmxlOiBmYWxzZSwKICAgICAgICAgICAgcGF0aDogJ3NwZWMucmVwbGljYXMnLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ251bWJlcicsCiAgICAgICAgICAgIHRyYW5zbGF0aW9uS2V5OiAnd29ya2xvYWQucmVwbGljYXMnCiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuU1RBVEVGVUxfU0VUOgogICAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgICBudWxsYWJsZTogZmFsc2UsCiAgICAgICAgICAgIHBhdGg6ICdzcGVjLnJlcGxpY2FzJywKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLAogICAgICAgICAgICB0cmFuc2xhdGlvbktleTogJ3dvcmtsb2FkLnJlcGxpY2FzJwogICAgICAgICAgfSk7CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIG51bGxhYmxlOiBmYWxzZSwKICAgICAgICAgICAgcGF0aDogJ3NwZWMuc2VydmljZU5hbWUnLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgICAgIHRyYW5zbGF0aW9uS2V5OiAnd29ya2xvYWQuc2VydmljZU5hbWUnCiAgICAgICAgICB9KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuQ1JPTl9KT0I6CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIG51bGxhYmxlOiBmYWxzZSwKICAgICAgICAgICAgcGF0aDogJ3NwZWMuc2NoZWR1bGUnLAogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsCiAgICAgICAgICAgIHZhbGlkYXRvcnM6IFsnY3JvblNjaGVkdWxlJ10sCiAgICAgICAgICAgIHRyYW5zbGF0aW9uS2V5OiAnd29ya2xvYWQuY3JvblNjaGVkdWxlJwogICAgICAgICAgfSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJlbmRwb2ludCIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJG1ldGFkYXRhOwogICAgICByZXR1cm4gdGhpcyA9PT0gbnVsbCB8fCB0aGlzID09PSB2b2lkIDAgfHwgKF90aGlzJG1ldGFkYXRhID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEgPT09IHZvaWQgMCB8fCAoX3RoaXMkbWV0YWRhdGEgPSBfdGhpcyRtZXRhZGF0YS5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJG1ldGFkYXRhW0NBVFRMRV9QVUJMSUNfRU5EUE9JTlRTXTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZXNpcmVkIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3BlYzc7CiAgICAgIHJldHVybiAoKF90aGlzJHNwZWM3ID0gdGhpcy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRzcGVjNyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3BlYzcucmVwbGljYXMpIHx8IDA7CiAgICB9CiAgfSwgewogICAga2V5OiAiYXZhaWxhYmxlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkc3RhdHVzOwogICAgICByZXR1cm4gKChfdGhpcyRzdGF0dXMgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXMucmVhZHlSZXBsaWNhcykgfHwgMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWFkeSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHN0YXR1czIsIF90aGlzJHN0YXR1czM7CiAgICAgIHZhciByZWFkeVJlcGxpY2FzID0gTWF0aC5tYXgoMCwgKCgoX3RoaXMkc3RhdHVzMiA9IHRoaXMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXMyLnJlcGxpY2FzKSB8fCAwKSAtICgoKF90aGlzJHN0YXR1czMgPSB0aGlzLnN0YXR1cykgPT09IG51bGwgfHwgX3RoaXMkc3RhdHVzMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc3RhdHVzMy51bmF2YWlsYWJsZVJlcGxpY2FzKSB8fCAwKSk7CiAgICAgIGlmICh0aGlzLnR5cGUgPT09IFdPUktMT0FEX1RZUEVTLkRBRU1PTl9TRVQpIHsKICAgICAgICByZXR1cm4gcmVhZHlSZXBsaWNhczsKICAgICAgfQogICAgICByZXR1cm4gIiIuY29uY2F0KHJlYWR5UmVwbGljYXMsICIvIikuY29uY2F0KHRoaXMuZGVzaXJlZCk7CiAgICB9CiAgfSwgewogICAga2V5OiAidW5hdmFpbGFibGUiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRzdGF0dXM0OwogICAgICByZXR1cm4gKChfdGhpcyRzdGF0dXM0ID0gdGhpcy5zdGF0dXMpID09PSBudWxsIHx8IF90aGlzJHN0YXR1czQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXR1czQudW5hdmFpbGFibGVSZXBsaWNhcykgfHwgMDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ1cFRvRGF0ZSIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIF90aGlzJHN0YXR1czU7CiAgICAgIHJldHVybiAoX3RoaXMkc3RhdHVzNSA9IHRoaXMuc3RhdHVzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdGF0dXM1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzdGF0dXM1LnVwZGF0ZWRSZXBsaWNhczsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJkZXRhaWxzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgb3V0ID0gW107CiAgICAgIHZhciB0eXBlID0gdGhpcy5fdHlwZSA/IHRoaXMuX3R5cGUgOiB0aGlzLnR5cGU7CiAgICAgIHZhciBkZXRhaWxJdGVtID0gewogICAgICAgIGVuZHBvaW50OiB7CiAgICAgICAgICBsYWJlbDogJ0VuZHBvaW50cycsCiAgICAgICAgICBjb250ZW50OiB0aGlzLmVuZHBvaW50LAogICAgICAgICAgZm9ybWF0dGVyOiAnV29ya2xvYWREZXRhaWxFbmRwb2ludHMnCiAgICAgICAgfSwKICAgICAgICByZWFkeTogewogICAgICAgICAgbGFiZWw6ICdSZWFkeScsCiAgICAgICAgICBjb250ZW50OiB0aGlzLnJlYWR5CiAgICAgICAgfSwKICAgICAgICB1cFRvRGF0ZTogewogICAgICAgICAgbGFiZWw6ICdVcC10by1kYXRlJywKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMudXBUb0RhdGUKICAgICAgICB9LAogICAgICAgIGF2YWlsYWJsZTogewogICAgICAgICAgbGFiZWw6ICdBdmFpbGFibGUnLAogICAgICAgICAgY29udGVudDogdGhpcy5hdmFpbGFibGUKICAgICAgICB9CiAgICAgIH07CiAgICAgIGlmICh0eXBlID09PSBXT1JLTE9BRF9UWVBFUy5KT0IpIHsKICAgICAgICB2YXIgX3RoaXMkc3RhdHVzNiA9IHRoaXMuc3RhdHVzLAogICAgICAgICAgY29tcGxldGlvblRpbWUgPSBfdGhpcyRzdGF0dXM2LmNvbXBsZXRpb25UaW1lLAogICAgICAgICAgc3RhcnRUaW1lID0gX3RoaXMkc3RhdHVzNi5zdGFydFRpbWU7CiAgICAgICAgdmFyIEZBQ1RPUlMgPSBbNjAsIDYwLCAyNF07CiAgICAgICAgdmFyIExBQkVMUyA9IFsnc2VjJywgJ21pbicsICdob3VyJywgJ2RheSddOwogICAgICAgIGlmIChzdGFydFRpbWUpIHsKICAgICAgICAgIG91dC5wdXNoKHsKICAgICAgICAgICAgbGFiZWw6ICdTdGFydGVkJywKICAgICAgICAgICAgY29udGVudDogc3RhcnRUaW1lLAogICAgICAgICAgICBmb3JtYXR0ZXI6ICdMaXZlRGF0ZScsCiAgICAgICAgICAgIGZvcm1hdHRlck9wdHM6IHsKICAgICAgICAgICAgICBhZGRTdWZmaXg6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICAgIGlmIChjb21wbGV0aW9uVGltZSAmJiBzdGFydFRpbWUpIHsKICAgICAgICAgIHZhciBlbmQgPSBkYXkoY29tcGxldGlvblRpbWUpOwogICAgICAgICAgdmFyIHN0YXJ0ID0gZGF5KHN0YXJ0VGltZSk7CiAgICAgICAgICB2YXIgZGlmZiA9IGVuZC5kaWZmKHN0YXJ0KSAvIDEwMDA7CiAgICAgICAgICB2YXIgbGFiZWw7CiAgICAgICAgICB2YXIgaSA9IDA7CiAgICAgICAgICB3aGlsZSAoZGlmZiA+PSBGQUNUT1JTW2ldICYmIGkgPCBGQUNUT1JTLmxlbmd0aCkgewogICAgICAgICAgICBkaWZmIC89IEZBQ1RPUlNbaV07CiAgICAgICAgICAgIGkrKzsKICAgICAgICAgIH0KICAgICAgICAgIGlmIChkaWZmIDwgNSkgewogICAgICAgICAgICBsYWJlbCA9IE1hdGguZmxvb3IoZGlmZiAqIDEwKSAvIDEwOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgbGFiZWwgPSBNYXRoLmZsb29yKGRpZmYpOwogICAgICAgICAgfQogICAgICAgICAgbGFiZWwgKz0gIiAiLmNvbmNhdCh0aGlzLnQoInVuaXQuIi5jb25jYXQoTEFCRUxTW2ldKSwgewogICAgICAgICAgICBjb3VudDogbGFiZWwKICAgICAgICAgIH0pLCAiICIpOwogICAgICAgICAgbGFiZWwgPSBsYWJlbC50cmltKCk7CiAgICAgICAgICBvdXQucHVzaCh7CiAgICAgICAgICAgIGxhYmVsOiAnRHVyYXRpb24nLAogICAgICAgICAgICBjb250ZW50OiBsYWJlbAogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9IGVsc2UgaWYgKHR5cGUgPT09IFdPUktMT0FEX1RZUEVTLkNST05fSk9CKSB7CiAgICAgICAgdmFyIF90aGlzJHN0YXR1czc7CiAgICAgICAgb3V0LnB1c2goewogICAgICAgICAgbGFiZWw6ICdMYXN0IFNjaGVkdWxlZCBUaW1lJywKICAgICAgICAgIGNvbnRlbnQ6IHRoaXMgPT09IG51bGwgfHwgdGhpcyA9PT0gdm9pZCAwIHx8IChfdGhpcyRzdGF0dXM3ID0gdGhpcy5zdGF0dXMpID09PSBudWxsIHx8IF90aGlzJHN0YXR1czcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0YXR1czcubGFzdFNjaGVkdWxlVGltZSwKICAgICAgICAgIGZvcm1hdHRlcjogJ0xpdmVEYXRlJwogICAgICAgIH0pOwogICAgICB9CiAgICAgIG91dC5wdXNoKHsKICAgICAgICBsYWJlbDogJ0ltYWdlJywKICAgICAgICBjb250ZW50OiB0aGlzLmltYWdlTmFtZXMsCiAgICAgICAgZm9ybWF0dGVyOiAnUG9kSW1hZ2VzJwogICAgICB9KTsKICAgICAgc3dpdGNoICh0eXBlKSB7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5ERVBMT1lNRU5UOgogICAgICAgICAgb3V0LnB1c2goZGV0YWlsSXRlbS5yZWFkeSwgZGV0YWlsSXRlbS51cFRvRGF0ZSwgZGV0YWlsSXRlbS5hdmFpbGFibGUsIFNFUEFSQVRPUiwgZGV0YWlsSXRlbS5lbmRwb2ludCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFdPUktMT0FEX1RZUEVTLkRBRU1PTl9TRVQ6CiAgICAgICAgICBvdXQucHVzaChkZXRhaWxJdGVtLnJlYWR5LCBTRVBBUkFUT1IsIGRldGFpbEl0ZW0uZW5kcG9pbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5SRVBMSUNBX1NFVDoKICAgICAgICAgIG91dC5wdXNoKGRldGFpbEl0ZW0ucmVhZHksIFNFUEFSQVRPUiwgZGV0YWlsSXRlbS5lbmRwb2ludCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFdPUktMT0FEX1RZUEVTLlNUQVRFRlVMX1NFVDoKICAgICAgICAgIG91dC5wdXNoKGRldGFpbEl0ZW0ucmVhZHksIFNFUEFSQVRPUiwgZGV0YWlsSXRlbS5lbmRwb2ludCk7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFdPUktMT0FEX1RZUEVTLlJFUExJQ0FUSU9OX0NPTlRST0xMRVI6CiAgICAgICAgICBvdXQucHVzaChkZXRhaWxJdGVtLnJlYWR5LCBTRVBBUkFUT1IsIGRldGFpbEl0ZW0uZW5kcG9pbnQpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSBXT1JLTE9BRF9UWVBFUy5KT0I6CiAgICAgICAgICBvdXQucHVzaChkZXRhaWxJdGVtLmVuZHBvaW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgV09SS0xPQURfVFlQRVMuQ1JPTl9KT0I6CiAgICAgICAgICBvdXQucHVzaChkZXRhaWxJdGVtLmVuZHBvaW50KTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgUE9EOgogICAgICAgICAgb3V0LnB1c2goZGV0YWlsSXRlbS5yZWFkeSk7CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgYnJlYWs7CiAgICAgIH0KICAgICAgcmV0dXJuIG91dDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWRlcGxveSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVkZXBsb3koKSB7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkucmVwbGFjZSgvXC5cZCtaJC8sICdaJyk7CiAgICAgIGlmICghdGhpcy5zcGVjLnRlbXBsYXRlLm1ldGFkYXRhKSB7CiAgICAgICAgc2V0KHRoaXMuc3BlYy50ZW1wbGF0ZSwgJ21ldGFkYXRhJywge30pOwogICAgICB9CiAgICAgIHZhciBhbm5vdGF0aW9ucyA9IHRoaXMuc3BlYy50ZW1wbGF0ZS5tZXRhZGF0YS5hbm5vdGF0aW9ucyB8fCB7fTsKICAgICAgYW5ub3RhdGlvbnNbVElNRVNUQU1QXSA9IG5vdzsKICAgICAgc2V0KHRoaXMuc3BlYy50ZW1wbGF0ZS5tZXRhZGF0YSwgJ2Fubm90YXRpb25zJywgYW5ub3RhdGlvbnMpOwogICAgICB0aGlzLnNhdmUoKTsKICAgIH0KCiAgICAvLyBtYXRjaCBleGlzdGluZyBjb250YWluZXIgcG9ydHMgd2l0aCBzZXJ2aWNlcyBjcmVhdGVkIGZvciB0aGlzIHdvcmtsb2FkCiAgfSwgewogICAga2V5OiAiZ2V0UG9ydHNXaXRoU2VydmljZVR5cGUiLAogICAgdmFsdWU6IGZ1bmN0aW9uICgpIHsKICAgICAgdmFyIF9nZXRQb3J0c1dpdGhTZXJ2aWNlVHlwZSA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHBvcnRzLCBjYW5BY2Nlc3NTZXJ2aWNlcywgc2VydmljZXMsIGNsdXN0ZXJJUFNlcnZpY2VQb3J0cywgbG9hZEJhbGFuY2VyU2VydmljZVBvcnRzLCBub2RlUG9ydFNlcnZpY2VQb3J0czsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgcG9ydHMgPSBbXTsKICAgICAgICAgICAgICB0aGlzLmNvbnRhaW5lcnMuZm9yRWFjaChmdW5jdGlvbiAoY29udGFpbmVyKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gcG9ydHMucHVzaC5hcHBseShwb3J0cywgX3RvQ29uc3VtYWJsZUFycmF5KGNvbnRhaW5lci5wb3J0cyB8fCBbXSkpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgICh0aGlzLmluaXRDb250YWluZXJzIHx8IFtdKS5mb3JFYWNoKGZ1bmN0aW9uIChjb250YWluZXIpIHsKICAgICAgICAgICAgICAgIHJldHVybiBwb3J0cy5wdXNoLmFwcGx5KHBvcnRzLCBfdG9Db25zdW1hYmxlQXJyYXkoY29udGFpbmVyLnBvcnRzIHx8IFtdKSk7CiAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIC8vIE9ubHkgZ2V0IHNlcnZpY2VzIG93bmVkIGlmIHdlIGNhbiBhY2Nlc3MgdGhlIHNlcnZpY2UgcmVzb3VyY2UKICAgICAgICAgICAgICBjYW5BY2Nlc3NTZXJ2aWNlcyA9IHRoaXMuJGdldHRlcnNbJ3NjaGVtYUZvciddKFNFUlZJQ0UpOwogICAgICAgICAgICAgIGlmICghY2FuQWNjZXNzU2VydmljZXMpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiB0aGlzLmdldFNlcnZpY2VzT3duZWQoKTsKICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgIF9jb250ZXh0NS50MCA9IF9jb250ZXh0NS5zZW50OwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQ1LnQwID0gW107CiAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgc2VydmljZXMgPSBfY29udGV4dDUudDA7CiAgICAgICAgICAgICAgY2x1c3RlcklQU2VydmljZVBvcnRzID0gW107CiAgICAgICAgICAgICAgbG9hZEJhbGFuY2VyU2VydmljZVBvcnRzID0gW107CiAgICAgICAgICAgICAgbm9kZVBvcnRTZXJ2aWNlUG9ydHMgPSBbXTsKICAgICAgICAgICAgICBpZiAoc2VydmljZXMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICBzZXJ2aWNlcy5mb3JFYWNoKGZ1bmN0aW9uIChzdmMpIHsKICAgICAgICAgICAgICAgICAgdmFyIF9zdmMkc3BlYywgX3N2YyRzcGVjMiwgX3N2YyRzcGVjMzsKICAgICAgICAgICAgICAgICAgc3dpdGNoIChzdmMuc3BlYy50eXBlKSB7CiAgICAgICAgICAgICAgICAgICAgY2FzZSAnQ2x1c3RlcklQJzoKICAgICAgICAgICAgICAgICAgICAgIGNsdXN0ZXJJUFNlcnZpY2VQb3J0cy5wdXNoLmFwcGx5KGNsdXN0ZXJJUFNlcnZpY2VQb3J0cywgX3RvQ29uc3VtYWJsZUFycmF5KChzdmMgPT09IG51bGwgfHwgc3ZjID09PSB2b2lkIDAgfHwgKF9zdmMkc3BlYyA9IHN2Yy5zcGVjKSA9PT0gbnVsbCB8fCBfc3ZjJHNwZWMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdmMkc3BlYy5wb3J0cykgfHwgW10pKTsKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICAgIGNhc2UgJ0xvYWRCYWxhbmNlcic6CiAgICAgICAgICAgICAgICAgICAgICBsb2FkQmFsYW5jZXJTZXJ2aWNlUG9ydHMucHVzaC5hcHBseShsb2FkQmFsYW5jZXJTZXJ2aWNlUG9ydHMsIF90b0NvbnN1bWFibGVBcnJheSgoc3ZjID09PSBudWxsIHx8IHN2YyA9PT0gdm9pZCAwIHx8IChfc3ZjJHNwZWMyID0gc3ZjLnNwZWMpID09PSBudWxsIHx8IF9zdmMkc3BlYzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9zdmMkc3BlYzIucG9ydHMpIHx8IFtdKSk7CiAgICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgICAgICBjYXNlICdOb2RlUG9ydCc6CiAgICAgICAgICAgICAgICAgICAgICBub2RlUG9ydFNlcnZpY2VQb3J0cy5wdXNoLmFwcGx5KG5vZGVQb3J0U2VydmljZVBvcnRzLCBfdG9Db25zdW1hYmxlQXJyYXkoKHN2YyA9PT0gbnVsbCB8fCBzdmMgPT09IHZvaWQgMCB8fCAoX3N2YyRzcGVjMyA9IHN2Yy5zcGVjKSA9PT0gbnVsbCB8fCBfc3ZjJHNwZWMzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfc3ZjJHNwZWMzLnBvcnRzKSB8fCBbXSkpOwogICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDoKICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgcG9ydHMuZm9yRWFjaChmdW5jdGlvbiAocG9ydCkgewogICAgICAgICAgICAgICAgdmFyIG5hbWUgPSBwb3J0Lm5hbWUgPyBwb3J0Lm5hbWUgOiAiIi5jb25jYXQocG9ydC5jb250YWluZXJQb3J0KS5jb25jYXQocG9ydC5wcm90b2NvbC50b0xvd2VyQ2FzZSgpKS5jb25jYXQocG9ydC5ob3N0UG9ydCB8fCBwb3J0Ll9saXN0ZW5pbmdQb3J0IHx8ICcnKTsKICAgICAgICAgICAgICAgIHBvcnQubmFtZSA9IG5hbWU7CiAgICAgICAgICAgICAgICBpZiAocG9ydC5fc2VydmljZVR5cGUgJiYgcG9ydC5fc2VydmljZVR5cGUgIT09ICcnKSB7CiAgICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChsb2FkQmFsYW5jZXJTZXJ2aWNlUG9ydHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBwb3J0U3BlYyA9IGZpbmRCeShsb2FkQmFsYW5jZXJTZXJ2aWNlUG9ydHMsICduYW1lJywgbmFtZSk7CiAgICAgICAgICAgICAgICAgIGlmIChwb3J0U3BlYykgewogICAgICAgICAgICAgICAgICAgIHBvcnQuX2xpc3RlbmluZ1BvcnQgPSBwb3J0U3BlYy5wb3J0OwogICAgICAgICAgICAgICAgICAgIHBvcnQuX3NlcnZpY2VUeXBlID0gJ0xvYWRCYWxhbmNlcic7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAobm9kZVBvcnRTZXJ2aWNlUG9ydHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIHZhciBfcG9ydFNwZWMgPSBmaW5kQnkobm9kZVBvcnRTZXJ2aWNlUG9ydHMsICduYW1lJywgbmFtZSk7CiAgICAgICAgICAgICAgICAgIGlmIChfcG9ydFNwZWMpIHsKICAgICAgICAgICAgICAgICAgICBwb3J0Ll9saXN0ZW5pbmdQb3J0ID0gX3BvcnRTcGVjLm5vZGVQb3J0OwogICAgICAgICAgICAgICAgICAgIHBvcnQuX3NlcnZpY2VUeXBlID0gJ05vZGVQb3J0JzsKICAgICAgICAgICAgICAgICAgICByZXR1cm47CiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmIChjbHVzdGVySVBTZXJ2aWNlUG9ydHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgICAgIGlmIChmaW5kQnkoY2x1c3RlcklQU2VydmljZVBvcnRzLCAnbmFtZScsIG5hbWUpKSB7CiAgICAgICAgICAgICAgICAgICAgcG9ydC5fc2VydmljZVR5cGUgPSAnQ2x1c3RlcklQJzsKICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuYWJydXB0KCJyZXR1cm4iLCBwb3J0cyk7CiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NS5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTUsIHRoaXMpOwogICAgICB9KSk7CiAgICAgIGZ1bmN0aW9uIGdldFBvcnRzV2l0aFNlcnZpY2VUeXBlKCkgewogICAgICAgIHJldHVybiBfZ2V0UG9ydHNXaXRoU2VydmljZVR5cGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gZ2V0UG9ydHNXaXRoU2VydmljZVR5cGU7CiAgICB9KCkKICB9LCB7CiAgICBrZXk6ICJvd25lZEJ5V29ya2xvYWQiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBfdGhpcyRtZXRhZGF0YTI7CiAgICAgIHZhciB0eXBlcyA9IE9iamVjdC52YWx1ZXMoV09SS0xPQURfVFlQRVMpOwogICAgICBpZiAoKF90aGlzJG1ldGFkYXRhMiA9IHRoaXMubWV0YWRhdGEpICE9PSBudWxsICYmIF90aGlzJG1ldGFkYXRhMiAhPT0gdm9pZCAwICYmIF90aGlzJG1ldGFkYXRhMi5vd25lclJlZmVyZW5jZXMpIHsKICAgICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMubWV0YWRhdGEub3duZXJSZWZlcmVuY2VzKSwKICAgICAgICAgIF9zdGVwMjsKICAgICAgICB0cnkgewogICAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgICAgdmFyIG93bmVyID0gX3N0ZXAyLnZhbHVlOwogICAgICAgICAgICB2YXIgaGF2ZSA9ICIiLmNvbmNhdChvd25lci5hcGlWZXJzaW9uLnJlcGxhY2UoL1wvLiovLCAnJyksICIuIikuY29uY2F0KG93bmVyLmtpbmQpLnRvTG93ZXJDYXNlKCk7CiAgICAgICAgICAgIGlmICh0eXBlcy5pbmNsdWRlcyhoYXZlKSkgewogICAgICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICB9IGZpbmFsbHkgewogICAgICAgICAgX2l0ZXJhdG9yMi5mKCk7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJpc0Zyb21Ob3JtYW4iLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHJldHVybiAodGhpcy5tZXRhZGF0YS5sYWJlbHMgfHwge30pWydjYXR0bGUuaW8vY3JlYXRvciddID09PSAnbm9ybWFuJzsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJ3YXJuRGVsZXRpb25NZXNzYWdlIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy5pc0Zyb21Ob3JtYW4pIHsKICAgICAgICByZXR1cm4gdGhpcy50KCd3b3JrbG9hZC5ub3JtYW5XYXJuaW5nJyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJwb2RzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMkbWV0YWRhdGEzOwogICAgICB2YXIgcmVsYXRpb25zaGlwcyA9ICgoX3RoaXMkbWV0YWRhdGEzID0gdGhpcy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3RoaXMkbWV0YWRhdGEzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRtZXRhZGF0YTMucmVsYXRpb25zaGlwcykgfHwgW107CiAgICAgIHZhciBwb2RSZWxhdGlvbnNoaXAgPSByZWxhdGlvbnNoaXBzLmZpbHRlcihmdW5jdGlvbiAocmVsYXRpb25zaGlwKSB7CiAgICAgICAgcmV0dXJuIHJlbGF0aW9uc2hpcC50b1R5cGUgPT09IFBPRDsKICAgICAgfSlbMF07CiAgICAgIGlmIChwb2RSZWxhdGlvbnNoaXApIHsKICAgICAgICB2YXIgcG9kcyA9IHRoaXMuJGdldHRlcnNbJ3BvZHNCeU5hbWVzcGFjZSddKHRoaXMubWV0YWRhdGEubmFtZXNwYWNlKTsKICAgICAgICByZXR1cm4gcG9kcy5maWx0ZXIoZnVuY3Rpb24gKG9iaikgewogICAgICAgICAgcmV0dXJuIG1hdGNoZXMob2JqLCBwb2RSZWxhdGlvbnNoaXAuc2VsZWN0b3IpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogInBvZEdhdWdlcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgdmFyIG91dCA9IHt9OwogICAgICBpZiAoIXRoaXMucG9kcykgewogICAgICAgIHJldHVybiBvdXQ7CiAgICAgIH0KICAgICAgdGhpcy5wb2RzLm1hcChmdW5jdGlvbiAocG9kKSB7CiAgICAgICAgdmFyIHN0YXRlQ29sb3IgPSBwb2Quc3RhdGVDb2xvciwKICAgICAgICAgIHN0YXRlRGlzcGxheSA9IHBvZC5zdGF0ZURpc3BsYXk7CiAgICAgICAgaWYgKG91dFtzdGF0ZURpc3BsYXldKSB7CiAgICAgICAgICBvdXRbc3RhdGVEaXNwbGF5XS5jb3VudCsrOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvdXRbc3RhdGVEaXNwbGF5XSA9IHsKICAgICAgICAgICAgY29sb3I6IHN0YXRlQ29sb3IucmVwbGFjZSgndGV4dC0nLCAnJyksCiAgICAgICAgICAgIGNvdW50OiAxCiAgICAgICAgICB9OwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CgogICAgLy8gSm9iIFNwZWNpZmljCiAgfSwgewogICAga2V5OiAiam9iUmVsYXRpb25zaGlwcyIsCiAgICBnZXQ6IGZ1bmN0aW9uIGdldCgpIHsKICAgICAgaWYgKHRoaXMudHlwZSAhPT0gV09SS0xPQURfVFlQRVMuQ1JPTl9KT0IpIHsKICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICB9CiAgICAgIHJldHVybiAoX2dldDIodGhpcywgJ21ldGFkYXRhLnJlbGF0aW9uc2hpcHMnKSB8fCBbXSkuZmlsdGVyKGZ1bmN0aW9uIChyZWxhdGlvbnNoaXApIHsKICAgICAgICByZXR1cm4gcmVsYXRpb25zaGlwLnRvVHlwZSA9PT0gV09SS0xPQURfVFlQRVMuSk9COwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJqb2JzIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAodGhpcy50eXBlICE9PSBXT1JLTE9BRF9UWVBFUy5DUk9OX0pPQikgewogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuam9iUmVsYXRpb25zaGlwcy5tYXAoZnVuY3Rpb24gKG9iaikgewogICAgICAgIHJldHVybiBfdGhpcy4kZ2V0dGVyc1snYnlJZCddKFdPUktMT0FEX1RZUEVTLkpPQiwgb2JqLnRvSWQpOwogICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4gISF4OwogICAgICB9KTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJqb2JHYXVnZXMiLAogICAgZ2V0OiBmdW5jdGlvbiBnZXQoKSB7CiAgICAgIHZhciBvdXQgPSB7CiAgICAgICAgc3VjY2VlZGVkOiB7CiAgICAgICAgICBjb2xvcjogJ3N1Y2Nlc3MnLAogICAgICAgICAgY291bnQ6IDAKICAgICAgICB9LAogICAgICAgIHJ1bm5pbmc6IHsKICAgICAgICAgIGNvbG9yOiAnaW5mbycsCiAgICAgICAgICBjb3VudDogMAogICAgICAgIH0sCiAgICAgICAgZmFpbGVkOiB7CiAgICAgICAgICBjb2xvcjogJ2Vycm9yJywKICAgICAgICAgIGNvdW50OiAwCiAgICAgICAgfQogICAgICB9OwogICAgICBpZiAodGhpcy50eXBlID09PSBXT1JLTE9BRF9UWVBFUy5DUk9OX0pPQikgewogICAgICAgIHRoaXMuam9icy5mb3JFYWNoKGZ1bmN0aW9uIChqb2IpIHsKICAgICAgICAgIHZhciBfam9iJHN0YXR1cyA9IGpvYi5zdGF0dXMsCiAgICAgICAgICAgIHN0YXR1cyA9IF9qb2Ikc3RhdHVzID09PSB2b2lkIDAgPyB7fSA6IF9qb2Ikc3RhdHVzOwogICAgICAgICAgb3V0LnJ1bm5pbmcuY291bnQgKz0gc3RhdHVzLmFjdGl2ZSB8fCAwOwogICAgICAgICAgb3V0LnN1Y2NlZWRlZC5jb3VudCArPSBzdGF0dXMuc3VjY2VlZGVkIHx8IDA7CiAgICAgICAgICBvdXQuZmFpbGVkLmNvdW50ICs9IHN0YXR1cy5mYWlsZWQgfHwgMDsKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnR5cGUgPT09IFdPUktMT0FEX1RZUEVTLkpPQikgewogICAgICAgIHZhciBfdGhpcyRzdGF0dXM4ID0gdGhpcy5zdGF0dXMsCiAgICAgICAgICBzdGF0dXMgPSBfdGhpcyRzdGF0dXM4ID09PSB2b2lkIDAgPyB7fSA6IF90aGlzJHN0YXR1czg7CiAgICAgICAgb3V0LnJ1bm5pbmcuY291bnQgPSBzdGF0dXMuYWN0aXZlIHx8IDA7CiAgICAgICAgb3V0LnN1Y2NlZWRlZC5jb3VudCA9IHN0YXR1cy5zdWNjZWVkZWQgfHwgMDsKICAgICAgICBvdXQuZmFpbGVkLmNvdW50ID0gc3RhdHVzLmZhaWxlZCB8fCAwOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiBudWxsOwogICAgICB9CiAgICAgIHJldHVybiBvdXQ7CiAgICB9CiAgfSwgewogICAga2V5OiAiY3VycmVudFJldmlzaW9uTnVtYmVyIiwKICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICBpZiAodGhpcy5vd25lZEJ5V29ya2xvYWQgfHwgdGhpcy5raW5kID09PSAnSm9iJyB8fCB0aGlzLmtpbmQgPT09ICdDcm9uSm9iJykgewogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgIH0KICAgICAgaWYgKHRoaXMua2luZCA9PT0gJ0RlcGxveW1lbnQnKSB7CiAgICAgICAgcmV0dXJuIHRoaXMubWV0YWRhdGEuYW5ub3RhdGlvbnNbJ2RlcGxveW1lbnQua3ViZXJuZXRlcy5pby9yZXZpc2lvbiddOwogICAgICB9CgogICAgICAvLyAnRGFlbW9uU2V0JywgJ1N0YXRlZnVsU2V0JwogICAgICByZXR1cm4gdGhpcy5tZXRhZGF0YS5nZW5lcmF0aW9uOwogICAgfQogIH0sIHsKICAgIGtleTogIm1hdGNoaW5nUG9kcyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gKCkgewogICAgICB2YXIgX21hdGNoaW5nUG9kcyA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgICAgdmFyIGFsbCwgYWxsSW5OYW1lc3BhY2UsIHNlbGVjdG9yOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuJGRpc3BhdGNoKCdmaW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogUE9ECiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBhbGwgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICBhbGxJbk5hbWVzcGFjZSA9IGFsbC5maWx0ZXIoZnVuY3Rpb24gKHBvZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHBvZC5tZXRhZGF0YS5uYW1lc3BhY2UgPT09IF90aGlzMi5tZXRhZGF0YS5uYW1lc3BhY2U7CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgc2VsZWN0b3IgPSBjb252ZXJ0U2VsZWN0b3JPYmoodGhpcy5zcGVjLnNlbGVjdG9yKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LmFicnVwdCgicmV0dXJuIiwgbWF0Y2hpbmcoYWxsSW5OYW1lc3BhY2UsIHNlbGVjdG9yKSk7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNiwgdGhpcyk7CiAgICAgIH0pKTsKICAgICAgZnVuY3Rpb24gbWF0Y2hpbmdQb2RzKCkgewogICAgICAgIHJldHVybiBfbWF0Y2hpbmdQb2RzLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgIH0KICAgICAgcmV0dXJuIG1hdGNoaW5nUG9kczsKICAgIH0oKQogIH1dKTsKICByZXR1cm4gV29ya2xvYWQ7Cn0oV29ya2xvYWRTZXJ2aWNlKTsKZXhwb3J0IHsgV29ya2xvYWQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"names":["findBy","insertAt","TIMESTAMP","CATTLE_PUBLIC_ENDPOINTS","WORKLOAD_TYPES","SERVICE","POD","get","set","day","convertSelectorObj","matching","matches","SEPARATOR","WorkloadService","defaultContainer","imagePullPolicy","name","securityContext","runAsNonRoot","readOnlyRootFilesystem","privileged","allowPrivilegeEscalation","Workload","_WorkloadService","_inherits","_super","_createSuper","_classCallCheck","apply","arguments","_createClass","key","out","_get","_getPrototypeOf","prototype","type","_type","editYaml","index","indexOf","action","label","t","icon","enabled","links","update","JOB","CRON_JOB","_this$spec","_this$spec2","bulkable","spec","paused","divider","view","total","toFilter","filter","includes","value","applyDefaults","vm","_this$spec3","jobTemplate","template","restartPolicy","containers","initContainers","replicas","_objectSpread","selector","$set","toggleRollbackModal","workload","length","undefined","$dispatch","componentProps","component","_rollBackWorkload","_asyncToGenerator","regeneratorRuntime","mark","_callee","cluster","rollbackRequestData","rollbackRequestBody","namespace","workloadName","wrap","_callee$","_context","prev","next","JSON","stringify","Array","isArray","TypeError","metadata","patch","url","concat","id","stop","rollBackWorkload","_x","_x2","_x3","_x4","pause","save","resume","_scaleDown","_callee2","newScale","_callee2$","_context2","scaleDown","_scaleUp","_callee3","_callee3$","_context3","scaleUp","_this$spec4","_openShell","_callee4","pods","_iterator","_step","pod","_callee4$","_context4","matchingPods","sent","_createForOfIteratorHelper","s","n","done","isRunning","openShell","abrupt","t0","e","f","finish","title","message","root","addSidecar","goToEdit","sidecar","sum","forEach","status","containerStatuses","_pod$status","restartCount","_this$spec5","_this$spec6","podTemplateSpec","_podTemplateSpec$cont","_podTemplateSpec$init","podSpecPath","nullable","path","required","translationKey","validators","DEPLOYMENT","REPLICA_SET","push","STATEFUL_SET","_this$metadata","annotations","_this$spec7","_this$status","readyReplicas","_this$status2","_this$status3","Math","max","unavailableReplicas","DAEMON_SET","desired","_this$status4","_this$status5","updatedReplicas","detailItem","endpoint","content","formatter","ready","upToDate","available","_this$status6","completionTime","startTime","FACTORS","LABELS","formatterOpts","addSuffix","end","start","diff","i","floor","count","trim","_this$status7","lastScheduleTime","imageNames","REPLICATION_CONTROLLER","redeploy","now","Date","toISOString","replace","_getPortsWithServiceType","_callee5","ports","canAccessServices","services","clusterIPServicePorts","loadBalancerServicePorts","nodePortServicePorts","_callee5$","_context5","container","_toConsumableArray","$getters","getServicesOwned","svc","_svc$spec","_svc$spec2","_svc$spec3","port","containerPort","protocol","toLowerCase","hostPort","_listeningPort","_serviceType","portSpec","nodePort","getPortsWithServiceType","_this$metadata2","types","Object","values","ownerReferences","_iterator2","_step2","owner","have","apiVersion","kind","err","labels","isFromNorman","_this$metadata3","relationships","podRelationship","relationship","toType","obj","map","stateColor","stateDisplay","color","_this","jobRelationships","toId","x","succeeded","running","failed","jobs","job","_job$status","active","_this$status8","ownedByWorkload","generation","_matchingPods","_callee6","_this2","all","allInNamespace","_callee6$","_context6","default"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/models/workload.js"],"sourcesContent":["import { findBy, insertAt } from '@shell/utils/array';\nimport { TIMESTAMP, CATTLE_PUBLIC_ENDPOINTS } from '@shell/config/labels-annotations';\nimport { WORKLOAD_TYPES, SERVICE, POD } from '@shell/config/types';\nimport { get, set } from '@shell/utils/object';\nimport day from 'dayjs';\nimport { convertSelectorObj, matching, matches } from '@shell/utils/selector';\nimport { SEPARATOR } from '@shell/config/workload';\nimport WorkloadService from '@shell/models/workload.service';\n\nexport const defaultContainer = {\n  imagePullPolicy: 'Always',\n  name:            'container-0',\n  securityContext: {\n    runAsNonRoot:             false,\n    readOnlyRootFilesystem:   false,\n    privileged:               false,\n    allowPrivilegeEscalation: false,\n  }\n};\nexport default class Workload extends WorkloadService {\n  // remove clone as yaml/edit as yaml until API supported\n  get _availableActions() {\n    let out = super._availableActions;\n    const type = this._type ? this._type : this.type;\n\n    const editYaml = findBy(out, 'action', 'goToEditYaml');\n    const index = editYaml ? out.indexOf(editYaml) : 0;\n\n    insertAt(out, index, {\n      action:  'addSidecar',\n      label:   this.t('action.addSidecar'),\n      icon:    'icon icon-plus',\n      enabled: !!this.links.update,\n    });\n\n    if (type !== WORKLOAD_TYPES.JOB && type !== WORKLOAD_TYPES.CRON_JOB) {\n      insertAt(out, 0, {\n        action:  'toggleRollbackModal',\n        label:   this.t('action.rollback'),\n        icon:    'icon icon-history',\n        enabled: !!this.links.update,\n      });\n\n      insertAt(out, 0, {\n        action:   'redeploy',\n        label:    this.t('action.redeploy'),\n        icon:     'icon icon-refresh',\n        enabled:  !!this.links.update,\n        bulkable: true,\n      });\n\n      insertAt(out, 0, {\n        action:  'pause',\n        label:   this.t('asyncButton.pause.action'),\n        icon:    'icon icon-pause',\n        enabled: !!this.links.update && !this.spec?.paused\n      });\n\n      insertAt(out, 0, {\n        action:  'resume',\n        label:   this.t('asyncButton.resume.action'),\n        icon:    'icon icon-play',\n        enabled: !!this.links.update && this.spec?.paused === true\n      });\n    }\n\n    insertAt(out, 0, { divider: true }) ;\n\n    insertAt(out, 0, {\n      action:  'openShell',\n      enabled: !!this.links.view,\n      icon:    'icon icon-fw icon-chevron-right',\n      label:   this.t('action.openShell'),\n      total:   1,\n    });\n\n    const toFilter = ['cloneYaml'];\n\n    out = out.filter((action) => {\n      if (!toFilter.includes(action.action)) {\n        return action;\n      }\n    });\n\n    return out;\n  }\n\n  applyDefaults(vm) {\n    const { spec = {} } = this;\n\n    if (this.type === WORKLOAD_TYPES.CRON_JOB) {\n      if (!spec.jobTemplate) {\n        spec.jobTemplate = {\n          spec: {\n            template: {\n              spec: {\n                restartPolicy: 'Never', containers: [{ imagePullPolicy: 'Always', name: 'container-0' }], initContainers: []\n              }\n            }\n          }\n        };\n      }\n    } else {\n      if (!spec.replicas && spec.replicas !== 0) {\n        spec.replicas = 1;\n      }\n\n      if (!spec.template) {\n        spec.template = {\n          spec: {\n            restartPolicy:  this.type === WORKLOAD_TYPES.JOB ? 'Never' : 'Always',\n            containers:     [{ ...defaultContainer }],\n            initContainers: []\n          }\n        };\n      }\n      if (!spec.selector) {\n        spec.selector = {};\n      }\n    }\n    vm.$set(this, 'spec', spec);\n  }\n\n  toggleRollbackModal( workload = this ) {\n    this.$dispatch('promptModal', {\n      componentProps: { workload },\n      component:      'RollbackWorkloadDialog'\n    });\n  }\n\n  async rollBackWorkload( cluster, workload, type, rollbackRequestData ) {\n    const rollbackRequestBody = JSON.stringify(rollbackRequestData);\n\n    if ( Array.isArray( workload ) ) {\n      throw new TypeError(this.t('promptRollback.multipleWorkloadError'));\n    }\n    const namespace = workload.metadata.namespace;\n    const workloadName = workload.metadata.name;\n\n    /**\n     * Ensure we go out to the correct cluster\n     *\n     * Build the request body in the same format that kubectl\n     * uses to call the Kubernetes API to roll back a workload.\n     * To see an example request body, run:\n     * kubectl rollout undo deployment/[deployment name] --to-revision=[revision number] -v=8\n     */\n    await this.patch(rollbackRequestBody, { url: `/k8s/clusters/${ cluster.id }/apis/apps/v1/namespaces/${ namespace }/${ type }/${ workloadName }` });\n  }\n\n  pause() {\n    set(this.spec, 'paused', true);\n    this.save();\n  }\n\n  resume() {\n    set(this.spec, 'paused', false);\n    this.save();\n  }\n\n  async scaleDown() {\n    const newScale = this.spec.replicas - 1;\n\n    if (newScale >= 0) {\n      set(this.spec, 'replicas', newScale);\n      await this.save();\n    }\n  }\n\n  async scaleUp() {\n    set(this.spec, 'replicas', this.spec.replicas + 1);\n    await this.save();\n  }\n\n  get state() {\n    if ( this.spec?.paused === true ) {\n      return 'paused';\n    }\n\n    return super.state;\n  }\n\n  async openShell() {\n    const pods = await this.matchingPods();\n\n    for ( const pod of pods ) {\n      if ( pod.isRunning ) {\n        pod.openShell();\n\n        return;\n      }\n    }\n\n    this.$dispatch('growl/error', {\n      title:   'Unavailable',\n      message: 'There are no running pods to execute a shell in.'\n    }, { root: true });\n  }\n\n  addSidecar() {\n    return this.goToEdit({ sidecar: true });\n  }\n\n  get showPodRestarts() {\n    return true;\n  }\n\n  get restartCount() {\n    const pods = this.pods;\n\n    let sum = 0;\n\n    pods.forEach((pod) => {\n      if (pod.status.containerStatuses) {\n        sum += pod.status?.containerStatuses[0].restartCount || 0;\n      }\n    });\n\n    return sum;\n  }\n\n  get hasSidecars() {\n    const podTemplateSpec = this.type === WORKLOAD_TYPES.CRON_JOB ? this?.spec?.jobTemplate?.spec?.template?.spec : this.spec?.template?.spec;\n\n    const { containers = [], initContainers = [] } = podTemplateSpec;\n\n    return containers.length > 1 || initContainers.length;\n  }\n\n  get customValidationRules() {\n    const type = this._type ? this._type : this.type;\n\n    const podSpecPath = type === WORKLOAD_TYPES.CRON_JOB ? 'spec.jobTemplate.spec.template.spec' : 'spec.template.spec';\n    const out = [\n      {\n        nullable:       false,\n        path:           'metadata.name',\n        required:       true,\n        translationKey: 'generic.name',\n        type:           'subDomain',\n      },\n      {\n        nullable:   false,\n        path:       'spec',\n        required:   true,\n        type:       'object',\n        validators: ['containerImages'],\n      },\n      {\n        nullable:   true,\n        path:       `${ podSpecPath }.affinity`,\n        type:       'object',\n        validators: ['podAffinity'],\n      }\n    ];\n\n    switch (type) {\n    case WORKLOAD_TYPES.DEPLOYMENT:\n    case WORKLOAD_TYPES.REPLICA_SET:\n      out.push( {\n        nullable:       false,\n        path:           'spec.replicas',\n        required:       true,\n        type:           'number',\n        translationKey: 'workload.replicas'\n      });\n      break;\n    case WORKLOAD_TYPES.STATEFUL_SET:\n      out.push({\n        nullable:       false,\n        path:           'spec.replicas',\n        required:       true,\n        type:           'number',\n        translationKey: 'workload.replicas'\n      });\n      out.push({\n        nullable:       false,\n        path:           'spec.serviceName',\n        required:       true,\n        type:           'string',\n        translationKey: 'workload.serviceName'\n      });\n      break;\n    case WORKLOAD_TYPES.CRON_JOB:\n      out.push( {\n        nullable:       false,\n        path:           'spec.schedule',\n        required:       true,\n        type:           'string',\n        validators:     ['cronSchedule'],\n        translationKey: 'workload.cronSchedule'\n      });\n    }\n\n    return out;\n  }\n\n  get endpoint() {\n    return this?.metadata?.annotations?.[CATTLE_PUBLIC_ENDPOINTS];\n  }\n\n  get desired() {\n    return this.spec?.replicas || 0;\n  }\n\n  get available() {\n    return this.status?.readyReplicas || 0;\n  }\n\n  get ready() {\n    const readyReplicas = Math.max(0, (this.status?.replicas || 0) - (this.status?.unavailableReplicas || 0));\n\n    if (this.type === WORKLOAD_TYPES.DAEMON_SET) {\n      return readyReplicas;\n    }\n\n    return `${ readyReplicas }/${ this.desired }`;\n  }\n\n  get unavailable() {\n    return this.status?.unavailableReplicas || 0;\n  }\n\n  get upToDate() {\n    return this.status?.updatedReplicas;\n  }\n\n  get details() {\n    const out = [];\n    const type = this._type ? this._type : this.type;\n\n    const detailItem = {\n      endpoint: {\n        label:     'Endpoints',\n        content:   this.endpoint,\n        formatter: 'WorkloadDetailEndpoints'\n      },\n      ready: {\n        label:   'Ready',\n        content: this.ready\n      },\n      upToDate: {\n        label:   'Up-to-date',\n        content: this.upToDate\n      },\n      available: {\n        label:   'Available',\n        content: this.available\n      }\n    };\n\n    if (type === WORKLOAD_TYPES.JOB) {\n      const { completionTime, startTime } = this.status;\n      const FACTORS = [60, 60, 24];\n      const LABELS = ['sec', 'min', 'hour', 'day'];\n\n      if ( startTime ) {\n        out.push({\n          label:         'Started',\n          content:       startTime,\n          formatter:     'LiveDate',\n          formatterOpts: { addSuffix: true },\n        });\n      }\n\n      if (completionTime && startTime) {\n        const end = day(completionTime);\n        const start = day(startTime);\n        let diff = end.diff(start) / 1000;\n\n        let label;\n\n        let i = 0;\n\n        while ( diff >= FACTORS[i] && i < FACTORS.length ) {\n          diff /= FACTORS[i];\n          i++;\n        }\n\n        if ( diff < 5 ) {\n          label = Math.floor(diff * 10) / 10;\n        } else {\n          label = Math.floor(diff);\n        }\n\n        label += ` ${ this.t(`unit.${ LABELS[i] }`, { count: label }) } `;\n        label = label.trim();\n\n        out.push({ label: 'Duration', content: label });\n      }\n    } else if ( type === WORKLOAD_TYPES.CRON_JOB ) {\n      out.push({\n        label:     'Last Scheduled Time',\n        content:   this?.status?.lastScheduleTime,\n        formatter: 'LiveDate'\n      });\n    }\n\n    out.push( {\n      label:     'Image',\n      content:   this.imageNames,\n      formatter: 'PodImages'\n    });\n\n    switch (type) {\n    case WORKLOAD_TYPES.DEPLOYMENT:\n      out.push(detailItem.ready, detailItem.upToDate, detailItem.available, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.DAEMON_SET:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.REPLICA_SET:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.STATEFUL_SET:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.REPLICATION_CONTROLLER:\n      out.push(detailItem.ready, SEPARATOR, detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.JOB:\n      out.push(detailItem.endpoint);\n      break;\n    case WORKLOAD_TYPES.CRON_JOB:\n      out.push(detailItem.endpoint);\n      break;\n    case POD:\n      out.push(detailItem.ready);\n      break;\n    default: break;\n    }\n\n    return out;\n  }\n\n  redeploy() {\n    const now = (new Date()).toISOString().replace(/\\.\\d+Z$/, 'Z');\n\n    if ( !this.spec.template.metadata ) {\n      set(this.spec.template, 'metadata', {});\n    }\n\n    const annotations = this.spec.template.metadata.annotations || {};\n\n    annotations[TIMESTAMP] = now;\n    set(this.spec.template.metadata, 'annotations', annotations);\n\n    this.save();\n  }\n\n  // match existing container ports with services created for this workload\n  async getPortsWithServiceType() {\n    const ports = [];\n\n    this.containers.forEach((container) => ports.push(...(container.ports || [])));\n    (this.initContainers || []).forEach((container) => ports.push(...(container.ports || [])));\n\n    // Only get services owned if we can access the service resource\n    const canAccessServices = this.$getters['schemaFor'](SERVICE);\n    const services = canAccessServices ? await this.getServicesOwned() : [];\n    const clusterIPServicePorts = [];\n    const loadBalancerServicePorts = [];\n    const nodePortServicePorts = [];\n\n    if (services.length) {\n      services.forEach((svc) => {\n        switch (svc.spec.type) {\n        case 'ClusterIP':\n          clusterIPServicePorts.push(...(svc?.spec?.ports || []));\n          break;\n        case 'LoadBalancer':\n          loadBalancerServicePorts.push(...(svc?.spec?.ports || []));\n          break;\n        case 'NodePort':\n          nodePortServicePorts.push(...(svc?.spec?.ports || []));\n          break;\n        default:\n          break;\n        }\n      });\n    }\n    ports.forEach((port) => {\n      const name = port.name ? port.name : `${ port.containerPort }${ port.protocol.toLowerCase() }${ port.hostPort || port._listeningPort || '' }`;\n\n      port.name = name;\n\n      if (port._serviceType && port._serviceType !== '') {\n        return;\n      }\n\n      if (loadBalancerServicePorts.length) {\n        const portSpec = findBy(loadBalancerServicePorts, 'name', name);\n\n        if (portSpec) {\n          port._listeningPort = portSpec.port;\n\n          port._serviceType = 'LoadBalancer';\n\n          return;\n        }\n      } if (nodePortServicePorts.length) {\n        const portSpec = findBy(nodePortServicePorts, 'name', name);\n\n        if (portSpec) {\n          port._listeningPort = portSpec.nodePort;\n\n          port._serviceType = 'NodePort';\n\n          return;\n        }\n      } if (clusterIPServicePorts.length) {\n        if (findBy(clusterIPServicePorts, 'name', name)) {\n          port._serviceType = 'ClusterIP';\n        }\n      }\n    });\n\n    return ports;\n  }\n\n  get ownedByWorkload() {\n    const types = Object.values(WORKLOAD_TYPES);\n\n    if (this.metadata?.ownerReferences) {\n      for (const owner of this.metadata.ownerReferences) {\n        const have = (`${ owner.apiVersion.replace(/\\/.*/, '') }.${ owner.kind }`).toLowerCase();\n\n        if ( types.includes(have) ) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  }\n\n  get isFromNorman() {\n    return (this.metadata.labels || {})['cattle.io/creator'] === 'norman';\n  }\n\n  get warnDeletionMessage() {\n    if (this.isFromNorman) {\n      return this.t('workload.normanWarning');\n    } else {\n      return null;\n    }\n  }\n\n  get pods() {\n    const relationships = this.metadata?.relationships || [];\n    const podRelationship = relationships.filter((relationship) => relationship.toType === POD)[0];\n\n    if (podRelationship) {\n      const pods = this.$getters['podsByNamespace'](this.metadata.namespace);\n\n      return pods.filter((obj) => {\n        return matches(obj, podRelationship.selector);\n      });\n    } else {\n      return [];\n    }\n  }\n\n  get podGauges() {\n    const out = { };\n\n    if (!this.pods) {\n      return out;\n    }\n\n    this.pods.map((pod) => {\n      const { stateColor, stateDisplay } = pod;\n\n      if (out[stateDisplay]) {\n        out[stateDisplay].count++;\n      } else {\n        out[stateDisplay] = {\n          color: stateColor.replace('text-', ''),\n          count: 1\n        };\n      }\n    });\n\n    return out;\n  }\n\n  // Job Specific\n  get jobRelationships() {\n    if (this.type !== WORKLOAD_TYPES.CRON_JOB) {\n      return undefined;\n    }\n\n    return (get(this, 'metadata.relationships') || []).filter((relationship) => relationship.toType === WORKLOAD_TYPES.JOB);\n  }\n\n  get jobs() {\n    if (this.type !== WORKLOAD_TYPES.CRON_JOB) {\n      return undefined;\n    }\n\n    return this.jobRelationships.map((obj) => {\n      return this.$getters['byId'](WORKLOAD_TYPES.JOB, obj.toId );\n    }).filter((x) => !!x);\n  }\n\n  get jobGauges() {\n    const out = {\n      succeeded: { color: 'success', count: 0 }, running: { color: 'info', count: 0 }, failed: { color: 'error', count: 0 }\n    };\n\n    if (this.type === WORKLOAD_TYPES.CRON_JOB) {\n      this.jobs.forEach((job) => {\n        const { status = {} } = job;\n\n        out.running.count += status.active || 0;\n        out.succeeded.count += status.succeeded || 0;\n        out.failed.count += status.failed || 0;\n      });\n    } else if (this.type === WORKLOAD_TYPES.JOB) {\n      const { status = {} } = this;\n\n      out.running.count = status.active || 0;\n      out.succeeded.count = status.succeeded || 0;\n      out.failed.count = status.failed || 0;\n    } else {\n      return null;\n    }\n\n    return out;\n  }\n\n  get currentRevisionNumber() {\n    if (this.ownedByWorkload || this.kind === 'Job' || this.kind === 'CronJob') {\n      return undefined;\n    }\n    if (this.kind === 'Deployment') {\n      return this.metadata.annotations['deployment.kubernetes.io/revision'];\n    }\n\n    // 'DaemonSet', 'StatefulSet'\n    return this.metadata.generation;\n  }\n\n  async matchingPods() {\n    const all = await this.$dispatch('findAll', { type: POD });\n    const allInNamespace = all.filter((pod) => pod.metadata.namespace === this.metadata.namespace);\n\n    const selector = convertSelectorObj(this.spec.selector);\n\n    return matching(allInNamespace, selector);\n  }\n}\n"],"mappings":"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"}]}