{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--17-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/persistentvolume/__tests__/persistentvolume.test.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/persistentvolume/__tests__/persistentvolume.test.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0IHsgbW91bnQgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgUGVyc2lzdGVudFZvbHVtZSBmcm9tICdAc2hlbGwvZWRpdC9wZXJzaXN0ZW50dm9sdW1lL2luZGV4JzsKZGVzY3JpYmUoJ3ZpZXc6IFBlcnNpc3RlbnRWb2x1bWUnLCBmdW5jdGlvbiAoKSB7CiAgaXQoJ3Nob3VsZCBsaXN0IGVuYWJsZWQgUFYgc3RvcmFnZSBvcHRpb24gaWYgc3VwcG9ydGVkJywgZnVuY3Rpb24gKCkgewogICAgdmFyIHBsdWdpbiA9IHsKICAgICAgbGFiZWxLZXk6ICdwZXJzaXN0ZW50Vm9sdW1lLmNzaS5sYWJlbCcsCiAgICAgIHN1cHBvcnRlZDogdHJ1ZSwKICAgICAgdmFsdWU6ICdjc2knCiAgICB9OwogICAgdmFyIHJlc291cmNlID0gJ1BlcnNpc3RlbnRWb2x1bWUnOwogICAgdmFyIHdyYXBwZXIgPSBtb3VudChQZXJzaXN0ZW50Vm9sdW1lLCB7CiAgICAgIHByb3BzRGF0YTogewogICAgICAgIHZhbHVlOiB7CiAgICAgICAgICBzcGVjOiB7fQogICAgICAgIH0KICAgICAgfSwKICAgICAgbW9ja3M6IHsKICAgICAgICAkc3RvcmU6IHsKICAgICAgICAgIGRpc3BhdGNoOiBmdW5jdGlvbiBkaXNwYXRjaCgpIHsKICAgICAgICAgICAgcmV0dXJuIGplc3QuZm4oKTsKICAgICAgICAgIH0sCiAgICAgICAgICBnZXR0ZXJzOiB7CiAgICAgICAgICAgICdpMThuL3QnOiBqZXN0LmZuKCksCiAgICAgICAgICAgICdpMThuL2V4aXN0cyc6IGplc3QuZm4oKSwKICAgICAgICAgICAgY3VycmVudFN0b3JlOiBmdW5jdGlvbiBjdXJyZW50U3RvcmUoKSB7CiAgICAgICAgICAgICAgcmV0dXJuICdjbHVzdGVyJzsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgJ2ZlYXR1cmVzL2dldCc6IGZ1bmN0aW9uIGZlYXR1cmVzR2V0KCkgewogICAgICAgICAgICAgIHJldHVybiBqZXN0LmZuKCk7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdwcmVmcy9nZXQnOiBmdW5jdGlvbiBwcmVmc0dldCgpIHsKICAgICAgICAgICAgICByZXR1cm4gcmVzb3VyY2U7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdjbHVzdGVyL3NjaGVtYUZvcic6IGZ1bmN0aW9uIGNsdXN0ZXJTY2hlbWFGb3IoKSB7fSwKICAgICAgICAgICAgJ2NsdXN0ZXIvYWxsJzogZnVuY3Rpb24gY2x1c3RlckFsbCgpIHsKICAgICAgICAgICAgICByZXR1cm4gW3t9XTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgJGZldGNoU3RhdGU6IHsKICAgICAgICAgIHBlbmRpbmc6IGZhbHNlLAogICAgICAgICAgZXJyb3I6IHRydWUsCiAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCkKICAgICAgICB9LAogICAgICAgICRyb3V0ZTogewogICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgIHJlc291cmNlOiByZXNvdXJjZQogICAgICAgICAgfSwKICAgICAgICAgIHF1ZXJ5OiB7CiAgICAgICAgICAgIEFTOiAnJwogICAgICAgICAgfSwKICAgICAgICAgIGhhc2g6ICcnCiAgICAgICAgfSwKICAgICAgICAkcm91dGVyOiB7CiAgICAgICAgICBjdXJyZW50Um91dGU6IHt9LAogICAgICAgICAgcmVwbGFjZTogamVzdC5mbigpCiAgICAgICAgfQogICAgICB9LAogICAgICBzdHViczogewogICAgICAgIExhYmVsZWRTZWxlY3Q6IHRydWUKICAgICAgfQogICAgfSk7CiAgICB2YXIgc2VsZWN0ID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9InBlcnNpc3RlbnQtdm9sdW1lLXBsdWdpbi1zZWxlY3QiXScpOwogICAgZXhwZWN0KHNlbGVjdC52bS5vcHRpb25zKS50b1N0cmljdEVxdWFsKGV4cGVjdC5hcnJheUNvbnRhaW5pbmcoW3BsdWdpbl0pKTsKICB9KTsKICBpdCgnc2hvdWxkIHNlbGVjdCBjdXJyZW50IHBsdWdpbicsIGZ1bmN0aW9uICgpIHsKICAgIHZhciBwbHVnaW4gPSAnY3NpJzsKICAgIHZhciByZXNvdXJjZSA9ICdQZXJzaXN0ZW50Vm9sdW1lJzsKICAgIHZhciB3cmFwcGVyID0gbW91bnQoUGVyc2lzdGVudFZvbHVtZSwgewogICAgICBwcm9wc0RhdGE6IHsKICAgICAgICB2YWx1ZTogewogICAgICAgICAgc3BlYzogX2RlZmluZVByb3BlcnR5KHt9LCBwbHVnaW4sIHsKICAgICAgICAgICAgdmFsdWU6IHBsdWdpbgogICAgICAgICAgfSkKICAgICAgICB9CiAgICAgIH0sCiAgICAgIG1vY2tzOiB7CiAgICAgICAgJHN0b3JlOiB7CiAgICAgICAgICBkaXNwYXRjaDogZnVuY3Rpb24gZGlzcGF0Y2goKSB7CiAgICAgICAgICAgIHJldHVybiBqZXN0LmZuKCk7CiAgICAgICAgICB9LAogICAgICAgICAgZ2V0dGVyczogewogICAgICAgICAgICAnaTE4bi90JzogamVzdC5mbigpLAogICAgICAgICAgICAnaTE4bi9leGlzdHMnOiBqZXN0LmZuKCksCiAgICAgICAgICAgIGN1cnJlbnRTdG9yZTogZnVuY3Rpb24gY3VycmVudFN0b3JlKCkgewogICAgICAgICAgICAgIHJldHVybiAnY2x1c3Rlcic7CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgICdmZWF0dXJlcy9nZXQnOiBmdW5jdGlvbiBmZWF0dXJlc0dldCgpIHsKICAgICAgICAgICAgICByZXR1cm4gamVzdC5mbigpOwogICAgICAgICAgICB9LAogICAgICAgICAgICAncHJlZnMvZ2V0JzogZnVuY3Rpb24gcHJlZnNHZXQoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHJlc291cmNlOwogICAgICAgICAgICB9LAogICAgICAgICAgICAnY2x1c3Rlci9zY2hlbWFGb3InOiBmdW5jdGlvbiBjbHVzdGVyU2NoZW1hRm9yKCkge30sCiAgICAgICAgICAgICdjbHVzdGVyL2FsbCc6IGZ1bmN0aW9uIGNsdXN0ZXJBbGwoKSB7CiAgICAgICAgICAgICAgcmV0dXJuIFt7fV07CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgICRmZXRjaFN0YXRlOiB7CiAgICAgICAgICBwZW5kaW5nOiBmYWxzZSwKICAgICAgICAgIGVycm9yOiB0cnVlLAogICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpCiAgICAgICAgfSwKICAgICAgICAkcm91dGU6IHsKICAgICAgICAgIHBhcmFtczogewogICAgICAgICAgICByZXNvdXJjZTogcmVzb3VyY2UKICAgICAgICAgIH0sCiAgICAgICAgICBxdWVyeTogewogICAgICAgICAgICBBUzogJycKICAgICAgICAgIH0sCiAgICAgICAgICBoYXNoOiAnJwogICAgICAgIH0sCiAgICAgICAgJHJvdXRlcjogewogICAgICAgICAgY3VycmVudFJvdXRlOiB7fSwKICAgICAgICAgIHJlcGxhY2U6IGplc3QuZm4oKQogICAgICAgIH0KICAgICAgfQogICAgfSk7CiAgICBleHBlY3Qod3JhcHBlci52bS5wbHVnaW4pLnRvQmUocGx1Z2luKTsKICB9KTsKfSk7"},{"version":3,"names":["mount","PersistentVolume","describe","it","plugin","labelKey","supported","value","resource","wrapper","propsData","spec","mocks","$store","dispatch","jest","fn","getters","currentStore","featuresGet","prefsGet","clusterSchemaFor","clusterAll","$fetchState","pending","error","timestamp","Date","now","$route","params","query","AS","hash","$router","currentRoute","replace","stubs","LabeledSelect","select","find","expect","vm","options","toStrictEqual","arrayContaining","_defineProperty","toBe"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/persistentvolume/__tests__/persistentvolume.test.ts"],"sourcesContent":["import { mount } from '@vue/test-utils';\nimport PersistentVolume from '@shell/edit/persistentvolume/index';\nimport { ExtendedVue, Vue } from 'vue/types/vue';\n\ndescribe('view: PersistentVolume', () => {\n  it('should list enabled PV storage option if supported', () => {\n    const plugin = {\n      labelKey: 'persistentVolume.csi.label', supported: true, value: 'csi'\n    };\n    const resource = 'PersistentVolume';\n    const wrapper = mount(PersistentVolume as ExtendedVue<Vue, {}, {}, {}, PersistentVolume>, {\n      propsData: { value: { spec: { } } },\n      mocks:     {\n        $store: {\n          dispatch: () => jest.fn(),\n          getters:  {\n            'i18n/t':            jest.fn(),\n            'i18n/exists':       jest.fn(),\n            currentStore:        () => 'cluster',\n            'features/get':      () => jest.fn(),\n            'prefs/get':         () => resource,\n            'cluster/schemaFor': () => {},\n            'cluster/all':       () => [{}],\n          }\n        },\n        $fetchState: {\n          pending: false, error: true, timestamp: Date.now()\n        },\n        $route: {\n          params: { resource },\n          query:  { AS: '' },\n          hash:   '',\n        },\n        $router: {\n          currentRoute: {},\n          replace:      jest.fn(),\n        }\n      },\n      stubs: { LabeledSelect: true }\n    });\n\n    const select = wrapper.find('[data-testid=\"persistent-volume-plugin-select\"]');\n\n    expect((select.vm as unknown as any).options).toStrictEqual(expect.arrayContaining([plugin]));\n  });\n\n  it('should select current plugin', () => {\n    const plugin = 'csi';\n    const resource = 'PersistentVolume';\n    const wrapper = mount(PersistentVolume as ExtendedVue<Vue, {}, {}, {}, PersistentVolume>, {\n      propsData: { value: { spec: { [plugin]: { value: plugin } } } },\n      mocks:     {\n        $store: {\n          dispatch: () => jest.fn(),\n          getters:  {\n            'i18n/t':            jest.fn(),\n            'i18n/exists':       jest.fn(),\n            currentStore:        () => 'cluster',\n            'features/get':      () => jest.fn(),\n            'prefs/get':         () => resource,\n            'cluster/schemaFor': () => {},\n            'cluster/all':       () => [{}],\n          }\n        },\n        $fetchState: {\n          pending: false, error: true, timestamp: Date.now()\n        },\n        $route: {\n          params: { resource },\n          query:  { AS: '' },\n          hash:   '',\n        },\n        $router: {\n          currentRoute: {},\n          replace:      jest.fn(),\n        }\n      }\n    });\n\n    expect(wrapper.vm.plugin).toBe(plugin);\n  });\n});\n"],"mappings":";;;AAAA,SAASA,KAAK,QAAQ,iBAAiB;AACvC,OAAOC,gBAAgB,MAAM,oCAAoC;AAGjEC,QAAQ,CAAC,wBAAwB,EAAE,YAAK;EACtCC,EAAE,CAAC,oDAAoD,EAAE,YAAK;IAC5D,IAAMC,MAAM,GAAG;MACbC,QAAQ,EAAE,4BAA4B;MAAEC,SAAS,EAAE,IAAI;MAAEC,KAAK,EAAE;KACjE;IACD,IAAMC,QAAQ,GAAG,kBAAkB;IACnC,IAAMC,OAAO,GAAGT,KAAK,CAACC,gBAAkE,EAAE;MACxFS,SAAS,EAAE;QAAEH,KAAK,EAAE;UAAEI,IAAI,EAAE;QAAG;MAAE,CAAE;MACnCC,KAAK,EAAM;QACTC,MAAM,EAAE;UACNC,QAAQ,EAAE,SAAAA,SAAA;YAAA,OAAMC,IAAI,CAACC,EAAE,EAAE;UAAA;UACzBC,OAAO,EAAG;YACR,QAAQ,EAAaF,IAAI,CAACC,EAAE,EAAE;YAC9B,aAAa,EAAQD,IAAI,CAACC,EAAE,EAAE;YAC9BE,YAAY,EAAS,SAAAA,aAAA;cAAA,OAAM,SAAS;YAAA;YACpC,cAAc,EAAO,SAAAC,YAAA;cAAA,OAAMJ,IAAI,CAACC,EAAE,EAAE;YAAA;YACpC,WAAW,EAAU,SAAAI,SAAA;cAAA,OAAMZ,QAAQ;YAAA;YACnC,mBAAmB,EAAE,SAAAa,iBAAA,EAAK,CAAE,CAAC;YAC7B,aAAa,EAAQ,SAAAC,WAAA;cAAA,OAAM,CAAC,EAAE,CAAC;YAAA;;SAElC;QACDC,WAAW,EAAE;UACXC,OAAO,EAAE,KAAK;UAAEC,KAAK,EAAE,IAAI;UAAEC,SAAS,EAAEC,IAAI,CAACC,GAAG;SACjD;QACDC,MAAM,EAAE;UACNC,MAAM,EAAE;YAAEtB,QAAQ,EAARA;UAAQ,CAAE;UACpBuB,KAAK,EAAG;YAAEC,EAAE,EAAE;UAAE,CAAE;UAClBC,IAAI,EAAI;SACT;QACDC,OAAO,EAAE;UACPC,YAAY,EAAE,EAAE;UAChBC,OAAO,EAAOrB,IAAI,CAACC,EAAE;;OAExB;MACDqB,KAAK,EAAE;QAAEC,aAAa,EAAE;MAAI;KAC7B,CAAC;IAEF,IAAMC,MAAM,GAAG9B,OAAO,CAAC+B,IAAI,CAAC,iDAAiD,CAAC;IAE9EC,MAAM,CAAEF,MAAM,CAACG,EAAqB,CAACC,OAAO,CAAC,CAACC,aAAa,CAACH,MAAM,CAACI,eAAe,CAAC,CAACzC,MAAM,CAAC,CAAC,CAAC;EAC/F,CAAC,CAAC;EAEFD,EAAE,CAAC,8BAA8B,EAAE,YAAK;IACtC,IAAMC,MAAM,GAAG,KAAK;IACpB,IAAMI,QAAQ,GAAG,kBAAkB;IACnC,IAAMC,OAAO,GAAGT,KAAK,CAACC,gBAAkE,EAAE;MACxFS,SAAS,EAAE;QAAEH,KAAK,EAAE;UAAEI,IAAI,EAAAmC,eAAA,KAAK1C,MAAM,EAAG;YAAEG,KAAK,EAAEH;UAAM,CAAE;QAAE;MAAE,CAAE;MAC/DQ,KAAK,EAAM;QACTC,MAAM,EAAE;UACNC,QAAQ,EAAE,SAAAA,SAAA;YAAA,OAAMC,IAAI,CAACC,EAAE,EAAE;UAAA;UACzBC,OAAO,EAAG;YACR,QAAQ,EAAaF,IAAI,CAACC,EAAE,EAAE;YAC9B,aAAa,EAAQD,IAAI,CAACC,EAAE,EAAE;YAC9BE,YAAY,EAAS,SAAAA,aAAA;cAAA,OAAM,SAAS;YAAA;YACpC,cAAc,EAAO,SAAAC,YAAA;cAAA,OAAMJ,IAAI,CAACC,EAAE,EAAE;YAAA;YACpC,WAAW,EAAU,SAAAI,SAAA;cAAA,OAAMZ,QAAQ;YAAA;YACnC,mBAAmB,EAAE,SAAAa,iBAAA,EAAK,CAAE,CAAC;YAC7B,aAAa,EAAQ,SAAAC,WAAA;cAAA,OAAM,CAAC,EAAE,CAAC;YAAA;;SAElC;QACDC,WAAW,EAAE;UACXC,OAAO,EAAE,KAAK;UAAEC,KAAK,EAAE,IAAI;UAAEC,SAAS,EAAEC,IAAI,CAACC,GAAG;SACjD;QACDC,MAAM,EAAE;UACNC,MAAM,EAAE;YAAEtB,QAAQ,EAARA;UAAQ,CAAE;UACpBuB,KAAK,EAAG;YAAEC,EAAE,EAAE;UAAE,CAAE;UAClBC,IAAI,EAAI;SACT;QACDC,OAAO,EAAE;UACPC,YAAY,EAAE,EAAE;UAChBC,OAAO,EAAOrB,IAAI,CAACC,EAAE;;;KAG1B,CAAC;IAEFyB,MAAM,CAAChC,OAAO,CAACiC,EAAE,CAACtC,MAAM,CAAC,CAAC2C,IAAI,CAAC3C,MAAM,CAAC;EACxC,CAAC,CAAC;AACJ,CAAC,CAAC"}]}