{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/list/group.principal.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/list/group.principal.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucHJvbWlzZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgUmVzb3VyY2VUYWJsZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9SZXNvdXJjZVRhYmxlJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBNYXN0aGVhZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9SZXNvdXJjZUxpc3QvTWFzdGhlYWQnOwppbXBvcnQgeyBOT1JNQU4sIE1BTkFHRU1FTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IEFzeW5jQnV0dG9uIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0FzeW5jQnV0dG9uJzsKaW1wb3J0IHsgYXBwbHlQcm9kdWN0cyB9IGZyb20gJ0BzaGVsbC9zdG9yZS90eXBlLW1hcCc7CmltcG9ydCB7IE5BTUUgfSBmcm9tICdAc2hlbGwvY29uZmlnL3Byb2R1Y3QvYXV0aCc7CmltcG9ydCB7IE1PREUsIF9FRElUIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgeyBtYXBTdGF0ZSB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBCTEFOS19DTFVTVEVSIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3N0b3JlLXR5cGVzLmpzJzsKaW1wb3J0IHsgYWxsSGFzaCB9IGZyb20gJ0BzaGVsbC91dGlscy9wcm9taXNlJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEFzeW5jQnV0dG9uOiBBc3luY0J1dHRvbiwKICAgIFJlc291cmNlVGFibGU6IFJlc291cmNlVGFibGUsCiAgICBNYXN0aGVhZDogTWFzdGhlYWQsCiAgICBMb2FkaW5nOiBMb2FkaW5nCiAgfSwKICBwcm9wczogewogICAgcmVzb3VyY2U6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHNjaGVtYTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgdXNlUXVlcnlQYXJhbXNGb3JTaW1wbGVGaWx0ZXJpbmc6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogZmFsc2UKICAgIH0KICB9LAogIGZldGNoOiBmdW5jdGlvbiBmZXRjaCgpIHsKICAgIHZhciBfdGhpcyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICB2YXIgX2hhc2gkdXNlciwgX2dyYlNjaGVtYSRjb2xsZWN0aW9uOwogICAgICB2YXIgYXV0aENvbmZpZ1NjaGVtYSwgZ3JiU2NoZW1hLCBoYXNoLCBub25Mb2NhbEF1dGhQcm92aWRlcjsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy51cGRhdGVSb3dzKCk7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGF1dGhDb25maWdTY2hlbWEgPSBfdGhpcy4kc3RvcmUuZ2V0dGVyc1sibWFuYWdlbWVudC9zY2hlbWFGb3IiXShNQU5BR0VNRU5ULkFVVEhfQ09ORklHKTsKICAgICAgICAgICAgZ3JiU2NoZW1hID0gX3RoaXMuJHN0b3JlLmdldHRlcnNbJ3JhbmNoZXIvc2NoZW1hRm9yJ10oTk9STUFOLkdMT0JBTF9ST0xFX0JJTkRJTkcpOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2goewogICAgICAgICAgICAgIHVzZXI6IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgncmFuY2hlci9yZXF1ZXN0JywgewogICAgICAgICAgICAgICAgdXJsOiAnL3YzL3VzZXJzP2xpbWl0PTAnCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgcHJvdmlkZXJzOiBhdXRoQ29uZmlnU2NoZW1hID8gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCJtYW5hZ2VtZW50L2ZpbmRBbGwiLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBNQU5BR0VNRU5ULkFVVEhfQ09ORklHCiAgICAgICAgICAgICAgfSkgOiBQcm9taXNlLnJlc29sdmUoW10pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBoYXNoID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgbm9uTG9jYWxBdXRoUHJvdmlkZXIgPSAhIWhhc2gucHJvdmlkZXJzLmZpbmQoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgICByZXR1cm4gcC5uYW1lICE9PSAnbG9jYWwnICYmIHAuZW5hYmxlZCA9PT0gdHJ1ZTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIF90aGlzLmNhblJlZnJlc2hBY2Nlc3MgPSBub25Mb2NhbEF1dGhQcm92aWRlciAmJiAhISgoX2hhc2gkdXNlciA9IGhhc2gudXNlcikgIT09IG51bGwgJiYgX2hhc2gkdXNlciAhPT0gdm9pZCAwICYmIChfaGFzaCR1c2VyID0gX2hhc2gkdXNlci5hY3Rpb25zKSAhPT0gbnVsbCAmJiBfaGFzaCR1c2VyICE9PSB2b2lkIDAgJiYgX2hhc2gkdXNlci5yZWZyZXNoYXV0aHByb3ZpZGVyYWNjZXNzKTsKICAgICAgICAgICAgX3RoaXMuY2FuQ3JlYXRlR2xvYmFsUm9sZUJpbmRpbmcgPSBub25Mb2NhbEF1dGhQcm92aWRlciAmJiAoZ3JiU2NoZW1hID09PSBudWxsIHx8IGdyYlNjaGVtYSA9PT0gdm9pZCAwIHx8IChfZ3JiU2NoZW1hJGNvbGxlY3Rpb24gPSBncmJTY2hlbWEuY29sbGVjdGlvbk1ldGhvZHMpID09PSBudWxsIHx8IF9ncmJTY2hlbWEkY29sbGVjdGlvbiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dyYlNjaGVtYSRjb2xsZWN0aW9uLmluY2x1ZGVzKCdQT1NUJykpOwogICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHJvd3M6IFtdLAogICAgICBjYW5DcmVhdGVHbG9iYWxSb2xlQmluZGluZzogZmFsc2UsCiAgICAgIGNhblJlZnJlc2hBY2Nlc3M6IGZhbHNlLAogICAgICBhc3NpZ25Mb2NhdGlvbjogewogICAgICAgIHBhdGg6ICIvYy8iLmNvbmNhdChCTEFOS19DTFVTVEVSLCAiLyIpLmNvbmNhdChOQU1FLCAiLyIpLmNvbmNhdChOT1JNQU4uU1BPT0ZFRC5HUk9VUF9QUklOQ0lQQUwsICIvYXNzaWduLWVkaXQiKSwKICAgICAgICBxdWVyeTogX2RlZmluZVByb3BlcnR5KHt9LCBNT0RFLCBfRURJVCkKICAgICAgfSwKICAgICAgaW5pdGlhbExvYWQ6IHRydWUKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7fSwgbWFwU3RhdGUoJ2FjdGlvbi1tZW51JywgWydzaG93UHJvbXB0UmVtb3ZlJywgJ3RvUmVtb3ZlJ10pKSwKICB3YXRjaDogewogICAgdG9SZW1vdmU6IGZ1bmN0aW9uIHRvUmVtb3ZlKHJlc291cmNlcykgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGlmICghX3RoaXMyLmluaXRpYWxMb2FkKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDM7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX3RoaXMyLmluaXRpYWxMb2FkID0gZmFsc2U7CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Mi5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgICBjYXNlIDM6CiAgICAgICAgICAgICAgaWYgKCEoKHJlc291cmNlcyA9PT0gbnVsbCB8fCByZXNvdXJjZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJlc291cmNlcy5sZW5ndGgpID09PSAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnJlZnJlc2hHcm91cE1lbWJlcnNoaXBzKGZ1bmN0aW9uICgpIHt9KTsKICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gODsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMyLnVwZGF0ZVJvd3ModHJ1ZSk7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMik7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlUm93czogZnVuY3Rpb24gdXBkYXRlUm93cygpIHsKICAgICAgdmFyIF9hcmd1bWVudHMgPSBhcmd1bWVudHMsCiAgICAgICAgX3RoaXMzID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgICAgdmFyIGZvcmNlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBmb3JjZSA9IF9hcmd1bWVudHMubGVuZ3RoID4gMCAmJiBfYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzWzBdIDogZmFsc2U7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczMudXBkYXRlR3JvdXBQcmluY2lwYWxzKGZvcmNlKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTUFOQUdFTUVOVC5HTE9CQUxfUk9MRQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA3OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczMuJHN0b3JlLmRpc3BhdGNoKCdyYW5jaGVyL2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBOT1JNQU4uUFJJTkNJUEFMLAogICAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICAgIHVybDogJy92My9wcmluY2lwYWxzJwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICByZWZyZXNoR3JvdXBNZW1iZXJzaGlwczogZnVuY3Rpb24gcmVmcmVzaEdyb3VwTWVtYmVyc2hpcHMoYnV0dG9uRG9uZSkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTQoKSB7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU0JChfY29udGV4dDQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0NC5wcmV2ID0gX2NvbnRleHQ0Lm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIF9jb250ZXh0NC5wcmV2ID0gMDsKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDM7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvcmVxdWVzdCcsIHsKICAgICAgICAgICAgICAgIHVybDogJy92My91c2Vycz9hY3Rpb249cmVmcmVzaGF1dGhwcm92aWRlcmFjY2VzcycsCiAgICAgICAgICAgICAgICBtZXRob2Q6ICdwb3N0JywKICAgICAgICAgICAgICAgIGRhdGE6IHt9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDU7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC51cGRhdGVHcm91cFByaW5jaXBhbHModHJ1ZSk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICBidXR0b25Eb25lKHRydWUpOwogICAgICAgICAgICAgIF9jb250ZXh0NC5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dDQucHJldiA9IDg7CiAgICAgICAgICAgICAgX2NvbnRleHQ0LnQwID0gX2NvbnRleHQ0WyJjYXRjaCJdKDApOwogICAgICAgICAgICAgIF90aGlzNC4kc3RvcmUuZGlzcGF0Y2goJ2dyb3dsL2Zyb21FcnJvcicsIHsKICAgICAgICAgICAgICAgIHRpdGxlOiAnRXJyb3IgcmVmcmVzaGluZyBncm91cCBtZW1iZXJzaGlwcycsCiAgICAgICAgICAgICAgICBlcnI6IF9jb250ZXh0NC50MAogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICBidXR0b25Eb25lKGZhbHNlKTsKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNCwgbnVsbCwgW1swLCA4XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVHcm91cFByaW5jaXBhbHM6IGZ1bmN0aW9uIHVwZGF0ZUdyb3VwUHJpbmNpcGFscygpIHsKICAgICAgdmFyIF9hcmd1bWVudHMyID0gYXJndW1lbnRzLAogICAgICAgIF90aGlzNSA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU1KCkgewogICAgICAgIHZhciBmb3JjZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgZm9yY2UgPSBfYXJndW1lbnRzMi5sZW5ndGggPiAwICYmIF9hcmd1bWVudHMyWzBdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzMlswXSA6IGZhbHNlOwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMzsKICAgICAgICAgICAgICByZXR1cm4gYXBwbHlQcm9kdWN0cyhfdGhpczUuJHN0b3JlKTsKICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM1LiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogTk9STUFOLlNQT09GRUQuR1JPVVBfUFJJTkNJUEFMLAogICAgICAgICAgICAgICAgb3B0OiB7CiAgICAgICAgICAgICAgICAgIGZvcmNlOiBmb3JjZQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF90aGlzNS5yb3dzID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfTs="},{"version":3,"names":["ResourceTable","Loading","Masthead","NORMAN","MANAGEMENT","AsyncButton","applyProducts","NAME","MODE","_EDIT","mapState","BLANK_CLUSTER","allHash","components","props","resource","type","String","required","schema","Object","useQueryParamsForSimpleFiltering","Boolean","default","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","_hash$user","_grbSchema$collection","authConfigSchema","grbSchema","hash","nonLocalAuthProvider","wrap","_callee$","_context","prev","next","updateRows","$store","getters","AUTH_CONFIG","GLOBAL_ROLE_BINDING","user","dispatch","url","providers","Promise","resolve","sent","find","p","name","enabled","canRefreshAccess","actions","refreshauthprovideraccess","canCreateGlobalRoleBinding","collectionMethods","includes","stop","data","rows","assignLocation","path","concat","SPOOFED","GROUP_PRINCIPAL","query","_defineProperty","initialLoad","computed","_objectSpread","watch","toRemove","resources","_this2","_callee2","_callee2$","_context2","abrupt","length","refreshGroupMemberships","methods","_arguments","arguments","_this3","_callee3","force","_callee3$","_context3","undefined","updateGroupPrincipals","GLOBAL_ROLE","PRINCIPAL","opt","buttonDone","_this4","_callee4","_callee4$","_context4","method","t0","title","err","root","_arguments2","_this5","_callee5","_callee5$","_context5"],"sources":["node_modules/@rancher/shell/list/group.principal.vue"],"sourcesContent":["<script>\nimport ResourceTable from '@shell/components/ResourceTable';\nimport Loading from '@shell/components/Loading';\nimport Masthead from '@shell/components/ResourceList/Masthead';\nimport { NORMAN, MANAGEMENT } from '@shell/config/types';\nimport AsyncButton from '@shell/components/AsyncButton';\nimport { applyProducts } from '@shell/store/type-map';\nimport { NAME } from '@shell/config/product/auth';\nimport { MODE, _EDIT } from '@shell/config/query-params';\nimport { mapState } from 'vuex';\nimport { BLANK_CLUSTER } from '@shell/store/store-types.js';\nimport { allHash } from '@shell/utils/promise';\n\nexport default {\n  components: {\n    AsyncButton, ResourceTable, Masthead, Loading\n  },\n  props: {\n    resource: {\n      type:     String,\n      required: true,\n    },\n\n    schema: {\n      type:     Object,\n      required: true,\n    },\n\n    useQueryParamsForSimpleFiltering: {\n      type:    Boolean,\n      default: false\n    }\n  },\n  async fetch() {\n    await this.updateRows();\n\n    const authConfigSchema = this.$store.getters[`management/schemaFor`](MANAGEMENT.AUTH_CONFIG);\n    const grbSchema = this.$store.getters['rancher/schemaFor'](NORMAN.GLOBAL_ROLE_BINDING);\n\n    const hash = await allHash({\n      user:      this.$store.dispatch('rancher/request', { url: '/v3/users?limit=0' }),\n      providers: authConfigSchema ? this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.AUTH_CONFIG }) : Promise.resolve([])\n    });\n\n    const nonLocalAuthProvider = !!hash.providers.find((p) => p.name !== 'local' && p.enabled === true);\n\n    this.canRefreshAccess = nonLocalAuthProvider && !!hash.user?.actions?.refreshauthprovideraccess;\n    this.canCreateGlobalRoleBinding = nonLocalAuthProvider && grbSchema?.collectionMethods?.includes('POST');\n  },\n  data() {\n    return {\n      rows:                       [],\n      canCreateGlobalRoleBinding: false,\n      canRefreshAccess:           false,\n      assignLocation:             {\n        path:  `/c/${ BLANK_CLUSTER }/${ NAME }/${ NORMAN.SPOOFED.GROUP_PRINCIPAL }/assign-edit`,\n        query: { [MODE]: _EDIT }\n      },\n      initialLoad: true,\n    };\n  },\n  computed: { ...mapState('action-menu', ['showPromptRemove', 'toRemove']) },\n  watch:    {\n    async toRemove(resources) {\n      if (this.initialLoad) {\n        this.initialLoad = false;\n\n        return;\n      }\n      if (resources?.length === 0) {\n        await this.refreshGroupMemberships(() => {});\n        // spoofed collections normally get updated when promptRemove has completed (given the resources are of a spoofed type)..\n        // ... however in this use case it doesn't happen so do it manually (the removed resources are not globalRoleBindings and not spoofed)\n        await this.updateRows(true);\n      }\n    }\n  },\n  methods: {\n    async updateRows(force = false) {\n      await this.updateGroupPrincipals(force);\n\n      // Upfront load all global roles, this makes it easier to sync fetch them later on\n      await this.$store.dispatch('management/findAll', { type: MANAGEMENT.GLOBAL_ROLE });\n\n      await this.$store.dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL, opt: { url: '/v3/principals' } });\n    },\n    async refreshGroupMemberships(buttonDone) {\n      try {\n        await this.$store.dispatch('rancher/request', {\n          url:    '/v3/users?action=refreshauthprovideraccess',\n          method: 'post',\n          data:   { },\n        });\n\n        await this.updateGroupPrincipals(true);\n\n        buttonDone(true);\n      } catch (err) {\n        this.$store.dispatch('growl/fromError', { title: 'Error refreshing group memberships', err }, { root: true });\n        buttonDone(false);\n      }\n    },\n    async updateGroupPrincipals(force = false) {\n      // This is needed in SSR, but not SPA. If this is not here... when cluster/findAll is dispatched... we fail to find the spoofed\n      // type's `getInstance` fn as it hasn't been registered (`instanceMethods` in type-map file is empty)\n      await applyProducts(this.$store);\n\n      // Force spoofed type getInstances to execute again\n      this.rows = await this.$store.dispatch('management/findAll', {\n        type: NORMAN.SPOOFED.GROUP_PRINCIPAL,\n        opt:  { force }\n      }, { root: true });\n    }\n  },\n\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <Masthead\n      :schema=\"schema\"\n      :resource=\"resource\"\n    >\n      <template slot=\"extraActions\">\n        <AsyncButton\n          v-if=\"canRefreshAccess\"\n          mode=\"refresh\"\n          :action-label=\"t('authGroups.actions.refresh')\"\n          :waiting-label=\"t('authGroups.actions.refresh')\"\n          :success-label=\"t('authGroups.actions.refresh')\"\n          :error-label=\"t('authGroups.actions.refresh')\"\n          :class=\"{'mr-5': canCreateGlobalRoleBinding}\"\n          @click=\"refreshGroupMemberships\"\n        />\n        <n-link\n          v-if=\"canCreateGlobalRoleBinding\"\n          :to=\"assignLocation\"\n          class=\"btn role-primary\"\n        >\n          {{ t(\"authGroups.actions.assignRoles\") }}\n        </n-link>\n      </template>\n    </Masthead>\n\n    <ResourceTable\n      :schema=\"schema\"\n      :rows=\"rows\"\n      :use-query-params-for-simple-filtering=\"useQueryParamsForSimpleFiltering\"\n    />\n  </div>\n</template>\n"],"mappings":"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"}]}