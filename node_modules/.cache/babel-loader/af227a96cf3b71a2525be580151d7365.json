{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/detail/fleet.cattle.io.gitrepo.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/detail/fleet.cattle.io.gitrepo.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCBSZXNvdXJjZVRhYnMgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9SZXNvdXJjZVRhYnMnOwppbXBvcnQgRmxlZXRTdW1tYXJ5IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2ZsZWV0L0ZsZWV0U3VtbWFyeSc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CmltcG9ydCBGbGVldFJlc291cmNlcyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mbGVldC9GbGVldFJlc291cmNlcyc7CmltcG9ydCBUYWIgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvVGFiYmVkL1RhYic7CmltcG9ydCB7IEZMRUVUIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy90eXBlcyc7CmltcG9ydCB7IGlzSGFydmVzdGVyQ2x1c3RlciB9IGZyb20gJ0BzaGVsbC91dGlscy9jbHVzdGVyJzsKaW1wb3J0IEZsZWV0QnVuZGxlcyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mbGVldC9GbGVldEJ1bmRsZXMudnVlJzsKaW1wb3J0IHsgcmVzb3VyY2VDb3VudHMgfSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9SZXNvdXJjZVN1bW1hcnkudnVlJzsKaW1wb3J0IHsgY2hlY2tTY2hlbWFzRm9yRmluZEFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvYXV0aCc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnRGV0YWlsR2l0UmVwbycsCiAgY29tcG9uZW50czogewogICAgRmxlZXRSZXNvdXJjZXM6IEZsZWV0UmVzb3VyY2VzLAogICAgRmxlZXRTdW1tYXJ5OiBGbGVldFN1bW1hcnksCiAgICBCYW5uZXI6IEJhbm5lciwKICAgIFJlc291cmNlVGFiczogUmVzb3VyY2VUYWJzLAogICAgVGFiOiBUYWIsCiAgICBGbGVldEJ1bmRsZXM6IEZsZWV0QnVuZGxlcwogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBhbGxGbGVldDogW10sCiAgICAgIGFsbEJ1bmRsZXM6IFtdLAogICAgICBhbGxCdW5kbGVEZXBsb3ltZW50czogW10KICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgZ2l0UmVwb0hhc0NsdXN0ZXJzOiBmdW5jdGlvbiBnaXRSZXBvSGFzQ2x1c3RlcnMoKSB7CiAgICAgIHJldHVybiB0aGlzLnZhbHVlLnN0YXR1cy5kZXNpcmVkUmVhZHlDbHVzdGVyczsKICAgIH0sCiAgICBoYXJ2ZXN0ZXJDbHVzdGVyczogZnVuY3Rpb24gaGFydmVzdGVyQ2x1c3RlcnMoKSB7CiAgICAgIHZhciBoYXJ2ZXN0ZXIgPSB7fTsKICAgICAgdGhpcy5hbGxGbGVldC5mb3JFYWNoKGZ1bmN0aW9uIChjKSB7CiAgICAgICAgaWYgKGlzSGFydmVzdGVyQ2x1c3RlcihjKSkgewogICAgICAgICAgaGFydmVzdGVyW2MubWV0YWRhdGEubmFtZV0gPSBjOwogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHJldHVybiBoYXJ2ZXN0ZXI7CiAgICB9LAogICAgYnVuZGxlQ291bnRzOiBmdW5jdGlvbiBidW5kbGVDb3VudHMoKSB7CiAgICAgIHJldHVybiByZXNvdXJjZUNvdW50cyh0aGlzLiRzdG9yZSwgRkxFRVQuQlVORExFKTsKICAgIH0sCiAgICBidW5kbGVzOiBmdW5jdGlvbiBidW5kbGVzKCkgewogICAgICB2YXIgaGFydmVzdGVyID0gdGhpcy5oYXJ2ZXN0ZXJDbHVzdGVyczsKICAgICAgdmFyIGJ1bmRsZXMgPSB0aGlzLmFsbEJ1bmRsZXMuZmlsdGVyKGZ1bmN0aW9uIChidW5kbGUpIHsKICAgICAgICB2YXIgX2J1bmRsZSRzcGVjOwogICAgICAgIHZhciB0YXJnZXRzID0gKChfYnVuZGxlJHNwZWMgPSBidW5kbGUuc3BlYykgPT09IG51bGwgfHwgX2J1bmRsZSRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYnVuZGxlJHNwZWMudGFyZ2V0cykgfHwgW107CgogICAgICAgIC8vIEZpbHRlciBvdXQgYW55IGJ1bmRsZSB0aGF0IGhhcyBvbmUgdGFyZ2V0IHdob3NlIGNsdXN0ZXIgaXMgYSBoYXJ2ZXN0ZXIgY2x1c3RlcgogICAgICAgIGlmICh0YXJnZXRzLmxlbmd0aCA9PT0gMSkgewogICAgICAgICAgcmV0dXJuICFoYXJ2ZXN0ZXJbdGFyZ2V0c1swXS5jbHVzdGVyTmFtZV07CiAgICAgICAgfQogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9KTsKICAgICAgcmV0dXJuIGJ1bmRsZXM7CiAgICB9CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGFsbERpc3BhdGNoZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gY2hlY2tTY2hlbWFzRm9yRmluZEFsbEhhc2goewogICAgICAgICAgICAgIGFsbEJ1bmRsZXM6IHsKICAgICAgICAgICAgICAgIGluU3RvcmVUeXBlOiAnbWFuYWdlbWVudCcsCiAgICAgICAgICAgICAgICB0eXBlOiBGTEVFVC5CVU5ETEUKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGFsbEJ1bmRsZURlcGxveW1lbnRzOiB7CiAgICAgICAgICAgICAgICBpblN0b3JlVHlwZTogJ21hbmFnZW1lbnQnLAogICAgICAgICAgICAgICAgdHlwZTogRkxFRVQuQlVORExFX0RFUExPWU1FTlQKICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgIGFsbEZsZWV0OiB7CiAgICAgICAgICAgICAgICBpblN0b3JlVHlwZTogJ21hbmFnZW1lbnQnLAogICAgICAgICAgICAgICAgdHlwZTogRkxFRVQuQ0xVU1RFUgogICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgY2x1c3Rlckdyb3VwczogewogICAgICAgICAgICAgICAgaW5TdG9yZVR5cGU6ICdtYW5hZ2VtZW50JywKICAgICAgICAgICAgICAgIHR5cGU6IEZMRUVULkNMVVNURVJfR1JPVVAKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sIF90aGlzLiRzdG9yZSk7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIGFsbERpc3BhdGNoZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfdGhpcy5hbGxCdW5kbGVEZXBsb3ltZW50cyA9IGFsbERpc3BhdGNoZXMuYWxsQnVuZGxlRGVwbG95bWVudHMgfHwgW107CiAgICAgICAgICAgIF90aGlzLmFsbEJ1bmRsZXMgPSBhbGxEaXNwYXRjaGVzLmFsbEJ1bmRsZXMgfHwgW107CiAgICAgICAgICAgIF90aGlzLmFsbEZsZWV0ID0gYWxsRGlzcGF0Y2hlcy5hbGxGbGVldCB8fCBbXTsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0KfTs="},{"version":3,"names":["ResourceTabs","FleetSummary","Banner","FleetResources","Tab","FLEET","isHarvesterCluster","FleetBundles","resourceCounts","checkSchemasForFindAllHash","name","components","props","value","type","Object","required","data","allFleet","allBundles","allBundleDeployments","computed","gitRepoHasClusters","status","desiredReadyClusters","harvesterClusters","harvester","forEach","c","metadata","bundleCounts","$store","BUNDLE","bundles","filter","bundle","_bundle$spec","targets","spec","length","clusterName","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","allDispatches","wrap","_callee$","_context","prev","next","inStoreType","BUNDLE_DEPLOYMENT","CLUSTER","clusterGroups","CLUSTER_GROUP","sent","stop"],"sources":["node_modules/@rancher/shell/detail/fleet.cattle.io.gitrepo.vue"],"sourcesContent":["<script>\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\nimport FleetSummary from '@shell/components/fleet/FleetSummary';\nimport { Banner } from '@components/Banner';\nimport FleetResources from '@shell/components/fleet/FleetResources';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport { FLEET } from '@shell/config/types';\nimport { isHarvesterCluster } from '@shell/utils/cluster';\nimport FleetBundles from '@shell/components/fleet/FleetBundles.vue';\nimport { resourceCounts } from '@shell/components/ResourceSummary.vue';\nimport { checkSchemasForFindAllHash } from '@shell/utils/auth';\n\nexport default {\n  name: 'DetailGitRepo',\n\n  components: {\n    FleetResources,\n    FleetSummary,\n    Banner,\n    ResourceTabs,\n    Tab,\n    FleetBundles,\n  },\n\n  props: {\n    value: {\n      type:     Object,\n      required: true,\n    },\n  },\n\n  data() {\n    return {\n      allFleet:             [],\n      allBundles:           [],\n      allBundleDeployments: [],\n    };\n  },\n\n  computed: {\n\n    gitRepoHasClusters() {\n      return this.value.status.desiredReadyClusters;\n    },\n    harvesterClusters() {\n      const harvester = {};\n\n      this.allFleet.forEach((c) => {\n        if (isHarvesterCluster(c)) {\n          harvester[c.metadata.name] = c;\n        }\n      });\n\n      return harvester;\n    },\n\n    bundleCounts() {\n      return resourceCounts(this.$store, FLEET.BUNDLE);\n    },\n    bundles() {\n      const harvester = this.harvesterClusters;\n\n      const bundles = this.allBundles.filter((bundle) => {\n        const targets = bundle.spec?.targets || [];\n\n        // Filter out any bundle that has one target whose cluster is a harvester cluster\n        if (targets.length === 1) {\n          return !harvester[targets[0].clusterName];\n        }\n\n        return true;\n      });\n\n      return bundles;\n    },\n  },\n  async fetch() {\n    const allDispatches = await checkSchemasForFindAllHash({\n      allBundles: {\n        inStoreType: 'management',\n        type:        FLEET.BUNDLE\n      },\n\n      allBundleDeployments: {\n        inStoreType: 'management',\n        type:        FLEET.BUNDLE_DEPLOYMENT\n      },\n\n      allFleet: {\n        inStoreType: 'management',\n        type:        FLEET.CLUSTER\n      },\n      clusterGroups: {\n        inStoreType: 'management',\n        type:        FLEET.CLUSTER_GROUP\n      }\n    }, this.$store);\n\n    this.allBundleDeployments = allDispatches.allBundleDeployments || [];\n    this.allBundles = allDispatches.allBundles || [];\n    this.allFleet = allDispatches.allFleet || [];\n  },\n\n};\n</script>\n\n<template>\n  <div class=\"mt-20\">\n    <FleetSummary\n      v-if=\"gitRepoHasClusters\"\n      :value=\"value\"\n      :bundles=\"bundles\"\n      class=\"mb-20\"\n    />\n    <Banner\n      v-else\n      color=\"info\"\n      class=\"mb-20\"\n    >\n      {{ t('fleet.fleetSummary.noClustersGitRepo') }}\n    </Banner>\n    <ResourceTabs\n      v-model=\"value\"\n      mode=\"view\"\n      class=\"mt-20\"\n      :need-related=\"false\"\n    >\n      <Tab\n        v-if=\"!!allBundles.length\"\n        label=\"Bundles\"\n        name=\"bundles\"\n        :weight=\"30\"\n      >\n        <FleetBundles :value=\"value\" />\n      </Tab>\n      <Tab\n        label=\"Resources\"\n        name=\"resources\"\n        :weight=\"20\"\n      >\n        <FleetResources :value=\"value\" />\n      </Tab>\n    </ResourceTabs>\n  </div>\n</template>\n"],"mappings":";;;;;;AACA,OAAAA,YAAA;AACA,OAAAC,YAAA;AACA,SAAAC,MAAA;AACA,OAAAC,cAAA;AACA,OAAAC,GAAA;AACA,SAAAC,KAAA;AACA,SAAAC,kBAAA;AACA,OAAAC,YAAA;AACA,SAAAC,cAAA;AACA,SAAAC,0BAAA;AAEA;EACAC,IAAA;EAEAC,UAAA;IACAR,cAAA,EAAAA,cAAA;IACAF,YAAA,EAAAA,YAAA;IACAC,MAAA,EAAAA,MAAA;IACAF,YAAA,EAAAA,YAAA;IACAI,GAAA,EAAAA,GAAA;IACAG,YAAA,EAAAA;EACA;EAEAK,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;EACA;EAEAC,IAAA,WAAAA,KAAA;IACA;MACAC,QAAA;MACAC,UAAA;MACAC,oBAAA;IACA;EACA;EAEAC,QAAA;IAEAC,kBAAA,WAAAA,mBAAA;MACA,YAAAT,KAAA,CAAAU,MAAA,CAAAC,oBAAA;IACA;IACAC,iBAAA,WAAAA,kBAAA;MACA,IAAAC,SAAA;MAEA,KAAAR,QAAA,CAAAS,OAAA,WAAAC,CAAA;QACA,IAAAtB,kBAAA,CAAAsB,CAAA;UACAF,SAAA,CAAAE,CAAA,CAAAC,QAAA,CAAAnB,IAAA,IAAAkB,CAAA;QACA;MACA;MAEA,OAAAF,SAAA;IACA;IAEAI,YAAA,WAAAA,aAAA;MACA,OAAAtB,cAAA,MAAAuB,MAAA,EAAA1B,KAAA,CAAA2B,MAAA;IACA;IACAC,OAAA,WAAAA,QAAA;MACA,IAAAP,SAAA,QAAAD,iBAAA;MAEA,IAAAQ,OAAA,QAAAd,UAAA,CAAAe,MAAA,WAAAC,MAAA;QAAA,IAAAC,YAAA;QACA,IAAAC,OAAA,KAAAD,YAAA,GAAAD,MAAA,CAAAG,IAAA,cAAAF,YAAA,uBAAAA,YAAA,CAAAC,OAAA;;QAEA;QACA,IAAAA,OAAA,CAAAE,MAAA;UACA,QAAAb,SAAA,CAAAW,OAAA,IAAAG,WAAA;QACA;QAEA;MACA;MAEA,OAAAP,OAAA;IACA;EACA;EACAQ,KAAA,WAAAA,MAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAAC,QAAA;MAAA,IAAAC,aAAA;MAAA,OAAAH,kBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACA3C,0BAAA;cACAU,UAAA;gBACAkC,WAAA;gBACAvC,IAAA,EAAAT,KAAA,CAAA2B;cACA;cAEAZ,oBAAA;gBACAiC,WAAA;gBACAvC,IAAA,EAAAT,KAAA,CAAAiD;cACA;cAEApC,QAAA;gBACAmC,WAAA;gBACAvC,IAAA,EAAAT,KAAA,CAAAkD;cACA;cACAC,aAAA;gBACAH,WAAA;gBACAvC,IAAA,EAAAT,KAAA,CAAAoD;cACA;YACA,GAAAf,KAAA,CAAAX,MAAA;UAAA;YAnBAgB,aAAA,GAAAG,QAAA,CAAAQ,IAAA;YAqBAhB,KAAA,CAAAtB,oBAAA,GAAA2B,aAAA,CAAA3B,oBAAA;YACAsB,KAAA,CAAAvB,UAAA,GAAA4B,aAAA,CAAA5B,UAAA;YACAuB,KAAA,CAAAxB,QAAA,GAAA6B,aAAA,CAAA7B,QAAA;UAAA;UAAA;YAAA,OAAAgC,QAAA,CAAAS,IAAA;QAAA;MAAA,GAAAb,OAAA;IAAA;EACA;AAEA"}]}