{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/apps/charts/install.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/pages/c/_cluster/apps/charts/install.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwpmdW5jdGlvbiBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvLCBhbGxvd0FycmF5TGlrZSkgeyB2YXIgaXQgPSB0eXBlb2YgU3ltYm9sICE9PSAidW5kZWZpbmVkIiAmJiBvW1N5bWJvbC5pdGVyYXRvcl0gfHwgb1siQEBpdGVyYXRvciJdOyBpZiAoIWl0KSB7IGlmIChBcnJheS5pc0FycmF5KG8pIHx8IChpdCA9IF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvKSkgfHwgYWxsb3dBcnJheUxpa2UgJiYgbyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSB7IGlmIChpdCkgbyA9IGl0OyB2YXIgaSA9IDA7IHZhciBGID0gZnVuY3Rpb24gRigpIHt9OyByZXR1cm4geyBzOiBGLCBuOiBmdW5jdGlvbiBuKCkgeyBpZiAoaSA+PSBvLmxlbmd0aCkgcmV0dXJuIHsgZG9uZTogdHJ1ZSB9OyByZXR1cm4geyBkb25lOiBmYWxzZSwgdmFsdWU6IG9baSsrXSB9OyB9LCBlOiBmdW5jdGlvbiBlKF9lKSB7IHRocm93IF9lOyB9LCBmOiBGIH07IH0gdGhyb3cgbmV3IFR5cGVFcnJvcigiSW52YWxpZCBhdHRlbXB0IHRvIGl0ZXJhdGUgbm9uLWl0ZXJhYmxlIGluc3RhbmNlLlxuSW4gb3JkZXIgdG8gYmUgaXRlcmFibGUsIG5vbi1hcnJheSBvYmplY3RzIG11c3QgaGF2ZSBhIFtTeW1ib2wuaXRlcmF0b3JdKCkgbWV0aG9kLiIpOyB9IHZhciBub3JtYWxDb21wbGV0aW9uID0gdHJ1ZSwgZGlkRXJyID0gZmFsc2UsIGVycjsgcmV0dXJuIHsgczogZnVuY3Rpb24gcygpIHsgaXQgPSBpdC5jYWxsKG8pOyB9LCBuOiBmdW5jdGlvbiBuKCkgeyB2YXIgc3RlcCA9IGl0Lm5leHQoKTsgbm9ybWFsQ29tcGxldGlvbiA9IHN0ZXAuZG9uZTsgcmV0dXJuIHN0ZXA7IH0sIGU6IGZ1bmN0aW9uIGUoX2UyKSB7IGRpZEVyciA9IHRydWU7IGVyciA9IF9lMjsgfSwgZjogZnVuY3Rpb24gZigpIHsgdHJ5IHsgaWYgKCFub3JtYWxDb21wbGV0aW9uICYmIGl0LnJldHVybiAhPSBudWxsKSBpdC5yZXR1cm4oKTsgfSBmaW5hbGx5IHsgaWYgKGRpZEVycikgdGhyb3cgZXJyOyB9IH0gfTsgfQpmdW5jdGlvbiBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobywgbWluTGVuKSB7IGlmICghbykgcmV0dXJuOyBpZiAodHlwZW9mIG8gPT09ICJzdHJpbmciKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgdmFyIG4gPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwobykuc2xpY2UoOCwgLTEpOyBpZiAobiA9PT0gIk9iamVjdCIgJiYgby5jb25zdHJ1Y3RvcikgbiA9IG8uY29uc3RydWN0b3IubmFtZTsgaWYgKG4gPT09ICJNYXAiIHx8IG4gPT09ICJTZXQiKSByZXR1cm4gQXJyYXkuZnJvbShvKTsgaWYgKG4gPT09ICJBcmd1bWVudHMiIHx8IC9eKD86VWl8SSludCg/Ojh8MTZ8MzIpKD86Q2xhbXBlZCk/QXJyYXkkLy50ZXN0KG4pKSByZXR1cm4gX2FycmF5TGlrZVRvQXJyYXkobywgbWluTGVuKTsgfQpmdW5jdGlvbiBfYXJyYXlMaWtlVG9BcnJheShhcnIsIGxlbikgeyBpZiAobGVuID09IG51bGwgfHwgbGVuID4gYXJyLmxlbmd0aCkgbGVuID0gYXJyLmxlbmd0aDsgZm9yICh2YXIgaSA9IDAsIGFycjIgPSBuZXcgQXJyYXkobGVuKTsgaSA8IGxlbjsgaSsrKSBhcnIyW2ldID0gYXJyW2ldOyByZXR1cm4gYXJyMjsgfQpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5wcm9taXNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnNwbGl0LmpzIjsKaW1wb3J0IGpzeWFtbCBmcm9tICdqcy15YW1sJzsKaW1wb3J0IG1lcmdlIGZyb20gJ2xvZGFzaC9tZXJnZSc7CmltcG9ydCBpc0VxdWFsIGZyb20gJ2xvZGFzaC9pc0VxdWFsJzsKaW1wb3J0IHsgbWFwUHJlZiwgRElGRiB9IGZyb20gJ0BzaGVsbC9zdG9yZS9wcmVmcyc7CmltcG9ydCB7IG1hcEZlYXR1cmUsIE1VTFRJX0NMVVNURVIsIExFR0FDWSB9IGZyb20gJ0BzaGVsbC9zdG9yZS9mZWF0dXJlcyc7CmltcG9ydCB7IG1hcEdldHRlcnMgfSBmcm9tICd2dWV4JzsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IEJ1dHRvbkdyb3VwIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0J1dHRvbkdyb3VwJzsKaW1wb3J0IENoYXJ0UmVhZG1lIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0NoYXJ0UmVhZG1lJzsKaW1wb3J0IHsgQ2hlY2tib3ggfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0NoZWNrYm94JzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgeyBMYWJlbGVkVG9vbHRpcCB9IGZyb20gJ0Bjb21wb25lbnRzL0xhYmVsZWRUb29sdGlwJzsKaW1wb3J0IExhenlJbWFnZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9MYXp5SW1hZ2UnOwppbXBvcnQgTG9hZGluZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Mb2FkaW5nJzsKaW1wb3J0IE5hbWVOc0Rlc2NyaXB0aW9uIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTmFtZU5zRGVzY3JpcHRpb24nOwppbXBvcnQgUmVzb3VyY2VDYW5jZWxNb2RhbCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9SZXNvdXJjZUNhbmNlbE1vZGFsJzsKaW1wb3J0IFF1ZXN0aW9ucyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9RdWVzdGlvbnMnOwppbXBvcnQgVGFiYmVkIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1RhYmJlZCc7CmltcG9ydCBVbml0SW5wdXQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9Vbml0SW5wdXQnOwppbXBvcnQgWWFtbEVkaXRvciwgeyBFRElUT1JfTU9ERVMgfSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9ZYW1sRWRpdG9yJzsKaW1wb3J0IFdpemFyZCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9XaXphcmQnOwppbXBvcnQgVHlwZURlc2NyaXB0aW9uIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL1R5cGVEZXNjcmlwdGlvbic7CmltcG9ydCBDaGFydE1peGluIGZyb20gJ0BzaGVsbC9taXhpbnMvY2hhcnQnOwppbXBvcnQgQ2hpbGRIb29rLCB7IEJFRk9SRV9TQVZFX0hPT0tTLCBBRlRFUl9TQVZFX0hPT0tTIH0gZnJvbSAnQHNoZWxsL21peGlucy9jaGlsZC1ob29rJzsKaW1wb3J0IHsgQ0FUQUxPRywgTUFOQUdFTUVOVCwgREVGQVVMVF9XT1JLU1BBQ0UsIENBUEkgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgQ0hBUlQsIEZST01fQ0xVU1RFUiwgRlJPTV9UT09MUywgSElERV9TSURFX05BViwgTkFNRVNQQUNFLCBSRVBPLCBSRVBPX1RZUEUsIFZFUlNJT04sIF9GTEFHR0VEIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgeyBDQVRBTE9HIGFzIENBVEFMT0dfQU5OT1RBVElPTlMsIFBST0pFQ1QgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCB7IGV4Y2VwdGlvblRvRXJyb3JzQXJyYXkgfSBmcm9tICdAc2hlbGwvdXRpbHMvZXJyb3InOwppbXBvcnQgeyBjbG9uZSwgZGlmZiwgZ2V0LCBzZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgaWdub3JlVmFyaWFibGVzIGFzIF9pZ25vcmVWYXJpYWJsZXMgfSBmcm9tICcuL2luc3RhbGwuaGVscGVycyc7CmltcG9ydCB7IGZpbmRCeSwgaW5zZXJ0QXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCB7IHNhZmVyRHVtcCB9IGZyb20gJ0BzaGVsbC91dGlscy9jcmVhdGUteWFtbCc7CmltcG9ydCB7IExJTlVYLCBXSU5ET1dTIH0gZnJvbSAnQHNoZWxsL3N0b3JlL2NhdGFsb2cnOwp2YXIgVkFMVUVTX1NUQVRFID0gewogIEZPUk06ICdGT1JNJywKICBZQU1MOiAnWUFNTCcsCiAgRElGRjogJ0RJRkYnCn07CmZ1bmN0aW9uIGlzUGxhaW5MYXlvdXQocXVlcnkpIHsKICByZXR1cm4gT2JqZWN0LmtleXMocXVlcnkpLmluY2x1ZGVzKEhJREVfU0lERV9OQVYpOwp9CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnSW5zdGFsbCcsCiAgbGF5b3V0OiBmdW5jdGlvbiBsYXlvdXQoY29udGV4dCkgewogICAgcmV0dXJuIGlzUGxhaW5MYXlvdXQoY29udGV4dC5xdWVyeSkgPyAncGxhaW4nIDogJyc7CiAgfSwKICBjb21wb25lbnRzOiB7CiAgICBCYW5uZXI6IEJhbm5lciwKICAgIEJ1dHRvbkdyb3VwOiBCdXR0b25Hcm91cCwKICAgIENoYXJ0UmVhZG1lOiBDaGFydFJlYWRtZSwKICAgIENoZWNrYm94OiBDaGVja2JveCwKICAgIExhYmVsZWRJbnB1dDogTGFiZWxlZElucHV0LAogICAgTGFiZWxlZFNlbGVjdDogTGFiZWxlZFNlbGVjdCwKICAgIExhYmVsZWRUb29sdGlwOiBMYWJlbGVkVG9vbHRpcCwKICAgIExhenlJbWFnZTogTGF6eUltYWdlLAogICAgTG9hZGluZzogTG9hZGluZywKICAgIE5hbWVOc0Rlc2NyaXB0aW9uOiBOYW1lTnNEZXNjcmlwdGlvbiwKICAgIFJlc291cmNlQ2FuY2VsTW9kYWw6IFJlc291cmNlQ2FuY2VsTW9kYWwsCiAgICBRdWVzdGlvbnM6IFF1ZXN0aW9ucywKICAgIFRhYmJlZDogVGFiYmVkLAogICAgVW5pdElucHV0OiBVbml0SW5wdXQsCiAgICBZYW1sRWRpdG9yOiBZYW1sRWRpdG9yLAogICAgV2l6YXJkOiBXaXphcmQsCiAgICBUeXBlRGVzY3JpcHRpb246IFR5cGVEZXNjcmlwdGlvbgogIH0sCiAgbWl4aW5zOiBbQ2hpbGRIb29rLCBDaGFydE1peGluXSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF90aGlzJGNoYXJ0LCBfdGhpcyRleGlzdGluZzI7CiAgICAgIHZhciBfdGhpcyRleGlzdGluZywgX3RoaXMkY2hhcnQyLCBucywgX25zJG1ldGFkYXRhJGFubm90YXRpLCBwcm9qZWN0LCBfdGhpcyR2ZXJzaW9uSW5mbywgX3RoaXMkdmVyc2lvbkluZm8yLCBfdGhpcyR2ZXJzaW9uLCB1c2VyVmFsdWVzLCBfdGhpcyRleGlzdGluZyRzcGVjLCBfdGhpcyRjaGFydFZhbHVlcywgX3RoaXMkY2hhcnRWYWx1ZXMyLCBfdGhpcyRjaGFydFZhbHVlczMsIF90aGlzJGNoYXJ0VmFsdWVzNCwgZXhpc3RpbmdSZWdpc3RyeTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX3RoaXMuZXJyb3JzID0gW107CiAgICAgICAgICAgIC8vIElNUE9SVEFOVCEgQW55IGV4Y2VwdGlvbiB0aHJvd24gYmVmb3JlIHRoaXMudmFsdWUgaXMgc2V0IHdpbGwgcmVzdWx0IGluIGFuIGVtcHR5IHBhZ2UKCiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgZmV0Y2hDaGFydCBpcyBkZWZpbmVkIGluIHNoZWxsL21peGlucy4gSXQgZmlyc3QgY2hlY2tzIHRoZSBVUkwKICAgICAgICAgICAgICBxdWVyeSBmb3IgYW4gYXBwIG5hbWUgYW5kIG5hbWVzcGFjZS4gSXQgdXNlcyB0aG9zZSB2YWx1ZXMgdG8gY2hlY2sKICAgICAgICAgICAgICBmb3IgYSBjYXRhbG9nIGFwcCByZXNvdXJjZS4gSWYgZm91bmQsIGl0IHNldHMgdGhlIGZvcm0gdG8gZWRpdAogICAgICAgICAgICAgIG1vZGUuIElmIG5vdCwgaXQgc2V0cyB0aGUgZm9ybSB0byBjcmVhdGUgbW9kZS4KICAgICAgICAgICAgICAgSWYgdGhlIGFwcCBhbmQgYXBwIG5hbWVzcGFjZSBhcmUgbm90IHByb3ZpZGVkIGluIHRoZSBxdWVyeSwKICAgICAgICAgICAgICBpdCBjaGVja3MgZm9yIHRhcmdldCBuYW1lIGFuZCBuYW1lc3BhY2UgdmFsdWVzIGRlZmluZWQgaW4gdGhlCiAgICAgICAgICAgICAgSGVsbSBjaGFydCBpdHNlbGYuCiAgICAgICAgICAgICovCiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxOwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmZldGNoQ2hhcnQoKTsKICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNjsKICAgICAgICAgICAgX2NvbnRleHQudDAgPSBfY29udGV4dFsiY2F0Y2giXSgxKTsKICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbmFibGUgdG8gZmV0Y2ggY2hhcnQ6ICcsIF9jb250ZXh0LnQwKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTI7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5mZXRjaEF1dG9JbnN0YWxsSW5mbygpOwogICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDE3OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAxNDsKICAgICAgICAgICAgX2NvbnRleHQudDEgPSBfY29udGV4dFsiY2F0Y2giXSg5KTsKICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbmFibGUgdG8gZGV0ZXJtaW5lIGlmIG90aGVyIGNoYXJ0cyByZXF1aXJlIGluc3RhbGw6ICcsIF9jb250ZXh0LnQxKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICBjYXNlIDE3OgogICAgICAgICAgICBpZiAoIV90aGlzLnNob3dDdXN0b21SZWdpc3RyeSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMTg7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMTsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLmdldENsdXN0ZXJSZWdpc3RyeSgpOwogICAgICAgICAgY2FzZSAyMToKICAgICAgICAgICAgX3RoaXMuY2x1c3RlclJlZ2lzdHJ5ID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI3OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjQ6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSAyNDsKICAgICAgICAgICAgX2NvbnRleHQudDIgPSBfY29udGV4dFsiY2F0Y2giXSgxOCk7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIGdldCBjbHVzdGVyIHJlZ2lzdHJ5OiAnLCBfY29udGV4dC50Mik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDI3OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzA7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5nZXRHbG9iYWxSZWdpc3RyeSgpOwogICAgICAgICAgY2FzZSAzMDoKICAgICAgICAgICAgX3RoaXMuZ2xvYmFsUmVnaXN0cnkgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzY7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDMzOwogICAgICAgICAgICBfY29udGV4dC50MyA9IF9jb250ZXh0WyJjYXRjaCJdKDI3KTsKICAgICAgICAgICAgY29uc29sZS53YXJuKCdVbmFibGUgdG8gZ2V0IGdsb2JhbCByZWdpc3RyeTogJywgX2NvbnRleHQudDMpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICAgIF90aGlzLmRlZmF1bHRSZWdpc3RyeVNldHRpbmcgPSBfdGhpcy5jbHVzdGVyUmVnaXN0cnkgfHwgX3RoaXMuZ2xvYmFsUmVnaXN0cnk7CiAgICAgICAgICBjYXNlIDM3OgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gMzc7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0MDsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnbWFuYWdlbWVudC9maW5kJywgewogICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuU0VUVElORywKICAgICAgICAgICAgICBpZDogJ3NlcnZlci11cmwnCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA0MDoKICAgICAgICAgICAgX3RoaXMuc2VydmVyVXJsU2V0dGluZyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0NjsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDQzOgogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDM7CiAgICAgICAgICAgIF9jb250ZXh0LnQ0ID0gX2NvbnRleHRbImNhdGNoIl0oMzcpOwogICAgICAgICAgICBjb25zb2xlLmVycm9yKCdVbmFibGUgdG8gZmV0Y2ggYHNlcnZlci11cmxgIHNldHRpbmc6ICcsIF9jb250ZXh0LnQ0KTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICBjYXNlIDQ2OgogICAgICAgICAgICAvKgogICAgICAgICAgICAgIEZpZ3VyZSBvdXQgdGhlIG5hbWVzcGFjZSB3aGVyZSB0aGUgY2hhcnQgaXMKICAgICAgICAgICAgICBiZWluZyBpbnN0YWxsZWQgb3IgdXBncmFkZWQuCiAgICAgICAgICAgICovCiAgICAgICAgICAgIGlmIChfdGhpcy5leGlzdGluZykgewogICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgSWYgdGhlIEhlbG0gY2hhcnQgaXMgYWxyZWFkeSBpbnN0YWxsZWQsCiAgICAgICAgICAgICAgdXNlIHRoZSBleGlzdGluZyBuYW1lc3BhY2UgYnkgZGVmYXVsdC4KICAgICAgICAgICAgICAqLwoKICAgICAgICAgICAgICBfdGhpcy5mb3JjZU5hbWVzcGFjZSA9IF90aGlzLmV4aXN0aW5nLm1ldGFkYXRhLm5hbWVzcGFjZTsKICAgICAgICAgICAgICBfdGhpcy5uYW1lRGlzYWJsZWQgPSB0cnVlOwogICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLiRyb3V0ZS5xdWVyeVtGUk9NX0NMVVNURVJdID09PSBfRkxBR0dFRCkgewogICAgICAgICAgICAgIC8qIEZvciBGbGVldCwgdXNlIHRoZSBmbGVldC1kZWZhdWx0IG5hbWVzcGFjZS4gKi8KICAgICAgICAgICAgICBfdGhpcy5mb3JjZU5hbWVzcGFjZSA9IERFRkFVTFRfV09SS1NQQUNFOwogICAgICAgICAgICB9IGVsc2UgaWYgKChfdGhpcyRjaGFydCA9IF90aGlzLmNoYXJ0KSAhPT0gbnVsbCAmJiBfdGhpcyRjaGFydCAhPT0gdm9pZCAwICYmIF90aGlzJGNoYXJ0LnRhcmdldE5hbWVzcGFjZSkgewogICAgICAgICAgICAgIC8qIElmIGEgdGFyZ2V0IG5hbWVzcGFjZSBpcyBkZWZpbmVkIGluIHRoZSBjaGFydCwKICAgICAgICAgICAgICBzZXQgdGhlIHRhcmdldCBuYW1lc3BhY2UgYXMgZGVmYXVsdC4gKi8KICAgICAgICAgICAgICBfdGhpcy5mb3JjZU5hbWVzcGFjZSA9IF90aGlzLmNoYXJ0LnRhcmdldE5hbWVzcGFjZTsKICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5xdWVyeS5hcHBOYW1lc3BhY2UpIHsKICAgICAgICAgICAgICAvKiBJZiBhIG5hbWVzcGFjZSBpcyBkZWZpbmVkIGluIHRoZSBVUkwgcXVlcnksCiAgICAgICAgICAgICAgIHVzZSB0aGF0IG5hbWVzcGFjZSBhcyBkZWZhdWx0LiAqLwogICAgICAgICAgICAgIF90aGlzLmZvcmNlTmFtZXNwYWNlID0gX3RoaXMucXVlcnkuYXBwTmFtZXNwYWNlOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIF90aGlzLmZvcmNlTmFtZXNwYWNlID0gbnVsbDsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLyogQ2hlY2sgaWYgdGhlIGFwcCBpcyBkZXByZWNhdGVkLiAqLwogICAgICAgICAgICBfY29udGV4dC5wcmV2ID0gNDc7CiAgICAgICAgICAgIGlmICghX3RoaXMuZXhpc3RpbmcpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTQ7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDUxOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuZXhpc3RpbmcuZGVwbG95ZWRBc0xlZ2FjeSgpOwogICAgICAgICAgY2FzZSA1MToKICAgICAgICAgICAgX2NvbnRleHQudDUgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA1NDoKICAgICAgICAgICAgX2NvbnRleHQudDUgPSBmYWxzZTsKICAgICAgICAgIGNhc2UgNTU6CiAgICAgICAgICAgIF90aGlzLmxlZ2FjeUFwcCA9IF9jb250ZXh0LnQ1OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjI7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA1ODoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDU4OwogICAgICAgICAgICBfY29udGV4dC50NiA9IF9jb250ZXh0WyJjYXRjaCJdKDQ3KTsKICAgICAgICAgICAgX3RoaXMubGVnYWN5QXBwID0gZmFsc2U7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIGRldGVybWluZSBpZiBleGlzdGluZyBpbnN0YWxsIGlzIGEgbGVnYWN5IGFwcDogJywgX2NvbnRleHQudDYpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgIGNhc2UgNjI6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA2MjsKICAgICAgICAgICAgaWYgKCFfdGhpcy5leGlzdGluZykgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNjY7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5leGlzdGluZy5kZXBsb3llZEFzTXVsdGlDbHVzdGVyKCk7CiAgICAgICAgICBjYXNlIDY2OgogICAgICAgICAgICBfY29udGV4dC50NyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3MDsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDY5OgogICAgICAgICAgICBfY29udGV4dC50NyA9IGZhbHNlOwogICAgICAgICAgY2FzZSA3MDoKICAgICAgICAgICAgX3RoaXMubWNhcHAgPSBfY29udGV4dC50NzsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDc3OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgNzM6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA3MzsKICAgICAgICAgICAgX2NvbnRleHQudDggPSBfY29udGV4dFsiY2F0Y2giXSg2Mik7CiAgICAgICAgICAgIF90aGlzLm1jYXBwID0gZmFsc2U7CiAgICAgICAgICAgIGNvbnNvbGUud2FybignVW5hYmxlIHRvIGRldGVybWluZSBpZiBleGlzdGluZyBpbnN0YWxsIGlzIGEgbWMgYXBwOiAnLCBfY29udGV4dC50OCk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgY2FzZSA3NzoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDc3OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODA7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvY3JlYXRlJywgewogICAgICAgICAgICAgIHR5cGU6ICdjaGFydEluc3RhbGxBY3Rpb24nLAogICAgICAgICAgICAgIG1ldGFkYXRhOiB7CiAgICAgICAgICAgICAgICBuYW1lc3BhY2U6IF90aGlzLmZvcmNlTmFtZXNwYWNlIHx8IF90aGlzLiRzdG9yZS5nZXR0ZXJzWydkZWZhdWx0TmFtZXNwYWNlJ10sCiAgICAgICAgICAgICAgICBuYW1lOiAoKF90aGlzJGV4aXN0aW5nID0gX3RoaXMuZXhpc3RpbmcpID09PSBudWxsIHx8IF90aGlzJGV4aXN0aW5nID09PSB2b2lkIDAgfHwgKF90aGlzJGV4aXN0aW5nID0gX3RoaXMkZXhpc3Rpbmcuc3BlYykgPT09IG51bGwgfHwgX3RoaXMkZXhpc3RpbmcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGV4aXN0aW5nLm5hbWUpIHx8IF90aGlzLnF1ZXJ5LmFwcE5hbWUgfHwgJycKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA4MDoKICAgICAgICAgICAgX3RoaXMudmFsdWUgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODc7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSA4MzoKICAgICAgICAgICAgX2NvbnRleHQucHJldiA9IDgzOwogICAgICAgICAgICBfY29udGV4dC50OSA9IF9jb250ZXh0WyJjYXRjaCJdKDc3KTsKICAgICAgICAgICAgY29uc29sZS5lcnJvcignVW5hYmxlIHRvIGNyZWF0ZSBvYmplY3Qgb2YgdHlwZSBgY2hhcnRJbnN0YWxsQWN0aW9uYDogJywgX2NvbnRleHQudDkpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKCiAgICAgICAgICAgIC8vIE5vdGhpbmcncyBnb2luZyB0byB3b3JrIHdpdGhvdXQgYSBgdmFsdWVgLiBTZWUgaHR0cHM6Ly9naXRodWIuY29tL3JhbmNoZXIvZGFzaGJvYXJkL2lzc3Vlcy85NDUyIHRvIGhhbmRsZSB0aGlzIGFuZCBvdGhlciBjYXRjaGVzLgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iKTsKICAgICAgICAgIGNhc2UgODc6CiAgICAgICAgICAgIC8qIExvZ2ljIGZvciB3aGVuIHRoZSBIZWxtIGNoYXJ0IGlzIG5vdCBhbHJlYWR5IGluc3RhbGxlZCAqLwogICAgICAgICAgICBpZiAoIV90aGlzLmV4aXN0aW5nKSB7CiAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgIFRoZSB0YXJnZXQgbmFtZSBpcyB1c2VkIGZvciBHaXQgcmVwb3MgZm9yIEZsZWV0LgogICAgICAgICAgICAgICAgVGhlIHRhcmdldCBuYW1lIGluZGljYXRlcyB0aGUgbmFtZSBvZiB0aGUgY2x1c3RlcgogICAgICAgICAgICAgICAgZ3JvdXAgdGhhdCB0aGUgY2hhcnQgaXMgbWVhbnQgdG8gYmUgaW5zdGFsbGVkIGluLgogICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgaWYgKChfdGhpcyRjaGFydDIgPSBfdGhpcy5jaGFydCkgIT09IG51bGwgJiYgX3RoaXMkY2hhcnQyICE9PSB2b2lkIDAgJiYgX3RoaXMkY2hhcnQyLnRhcmdldE5hbWUpIHsKICAgICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgICAgIFNldCB0aGUgbmFtZSBvZiB0aGUgY2hhcnRJbnN0YWxsQWN0aW9uCiAgICAgICAgICAgICAgICAgIHRvIHRoZSBuYW1lIG9mIHRoZSBjbHVzdGVyIGdyb3VwCiAgICAgICAgICAgICAgICAgIHdoZXJlIHRoZSBjaGFydCBzaG91bGQgYmUgaW5zdGFsbGVkLgogICAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICAgIF90aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWUgPSBfdGhpcy5jaGFydC50YXJnZXROYW1lOwogICAgICAgICAgICAgICAgX3RoaXMubmFtZURpc2FibGVkID0gdHJ1ZTsKICAgICAgICAgICAgICB9IGVsc2UgaWYgKF90aGlzLnF1ZXJ5LmFwcE5hbWUpIHsKICAgICAgICAgICAgICAgIF90aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWUgPSBfdGhpcy5xdWVyeS5hcHBOYW1lOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpcy5uYW1lRGlzYWJsZWQgPSBmYWxzZTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgaWYgKF90aGlzLnF1ZXJ5LmRlc2NyaXB0aW9uKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5jdXN0b21DbWRPcHRzLmRlc2NyaXB0aW9uID0gX3RoaXMucXVlcnkuZGVzY3JpcHRpb247CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IC8qIEVuZCBvZiBsb2dpYyBmb3Igd2hlbiBjaGFydCBpcyBhbHJlYWR5IGluc3RhbGxlZCAqLwoKICAgICAgICAgICAgLyoKICAgICAgICAgICAgICBMb2dpYyBmb3Igd2hhdCB0byBkbyBpZiB0aGUgdXNlciBpcyBpbnN0YWxsaW5nCiAgICAgICAgICAgICAgdGhlIEhlbG0gY2hhcnQgZm9yIHRoZSBmaXJzdCB0aW1lIGFuZCBhIGRlZmF1bHQKICAgICAgICAgICAgICBuYW1lc3BhY2UgaGFzIGJlZW4gc2V0LgogICAgICAgICAgICAqLwogICAgICAgICAgICBpZiAoIShfdGhpcy5mb3JjZU5hbWVzcGFjZSAmJiAhX3RoaXMuZXhpc3RpbmcpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk5OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA4OTsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDkyOwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdjbHVzdGVyL2ZpbmQnLCB7CiAgICAgICAgICAgICAgdHlwZTogTkFNRVNQQUNFLAogICAgICAgICAgICAgIGlkOiBfdGhpcy5mb3JjZU5hbWVzcGFjZQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgOTI6CiAgICAgICAgICAgIG5zID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgcHJvamVjdCA9IChfbnMkbWV0YWRhdGEkYW5ub3RhdGkgPSBucy5tZXRhZGF0YS5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX25zJG1ldGFkYXRhJGFubm90YXRpID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbnMkbWV0YWRhdGEkYW5ub3RhdGlbUFJPSkVDVF07CiAgICAgICAgICAgIGlmIChwcm9qZWN0KSB7CiAgICAgICAgICAgICAgX3RoaXMucHJvamVjdCA9IHByb2plY3QucmVwbGFjZSgnOicsICcvJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDk5OwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgOTc6CiAgICAgICAgICAgIF9jb250ZXh0LnByZXYgPSA5NzsKICAgICAgICAgICAgX2NvbnRleHQudDEwID0gX2NvbnRleHRbImNhdGNoIl0oODkpOwogICAgICAgICAgY2FzZSA5OToKICAgICAgICAgICAgaWYgKCEoIV90aGlzLmNoYXJ0IHx8ICFfdGhpcy5xdWVyeS52ZXJzaW9uTmFtZSkpIHsKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTAxOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIpOwogICAgICAgICAgY2FzZSAxMDE6CiAgICAgICAgICAgIGlmICghKF90aGlzLnZlcnNpb24gJiYgcHJvY2Vzcy5jbGllbnQpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwNDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTA0OwogICAgICAgICAgICByZXR1cm4gX3RoaXMubG9hZFZhbHVlc0NvbXBvbmVudCgpOwogICAgICAgICAgY2FzZSAxMDQ6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxMDY7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5sb2FkQ2hhcnRTdGVwcygpOwogICAgICAgICAgY2FzZSAxMDY6CiAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgdGhpcy5sb2FkZWRWZXJzaW9uIHdpbGwgb25seSBiZSB0cnVlIGlmIHlvdSBzZWxlY3QgYSBub24tZGVmYWx1dAogICAgICAgICAgICAgIG9wdGlvbiBmcm9tIHRoZSAiVmVyc2lvbiIgZHJvcGRvd24gbWVudSBpbiBBcHBzICYgTWFya2V0cGxhY2UKICAgICAgICAgICAgICB3aGVuIHVwZGF0aW5nIGEgcHJldmlvdXNseSBpbnN0YWxsZWQgYXBwLgogICAgICAgICAgICAqLwogICAgICAgICAgICBpZiAoIV90aGlzLmxvYWRlZFZlcnNpb24gfHwgX3RoaXMubG9hZGVkVmVyc2lvbiAhPT0gX3RoaXMudmVyc2lvbi5rZXkpIHsKICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgV2hlbiB5b3Ugc2VsZWN0IGEgdmVyc2lvbiwgYSBuZXcgY2hhcnQgaXMgbG9hZGVkLiBUaGVuCiAgICAgICAgICAgICAgICBSYW5jaGVyIGFudGljaXBhdGVzIHRoYXQgeW91IHByb2JhYmx5IHdhbnQgdG8gcG9ydCBhbGwgb2YgeW91cgogICAgICAgICAgICAgICAgcHJldmlvdXNseSBjdXN0b21pemVkLCBub24tZGVmYXVsdCB2YWx1ZXMgZnJvbSB0aGUgb2xkIGNoYXJ0CiAgICAgICAgICAgICAgICB2ZXJzaW9uIHRvIHRoZSBuZXcgY2hhcnQgdmVyc2lvbiwgc28gaXQgYXBwbGllcyB0aGUgcHJldmlvdXMKICAgICAgICAgICAgICAgIGNoYXJ0J3MgY3VzdG9taXphdGlvbiB0byB0aGUgbmV3IGNoYXJ0IHZhbHVlcyBiZWZvcmUKICAgICAgICAgICAgICAgIHlvdSBzZWUgdGhlIHZhbHVlcyBmb3JtIG9uIHRoZSBuZXh0IHBhZ2UgaW4gdGhlIHdvcmtmbG93LgogICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgaWYgKF90aGlzLmxvYWRlZFZlcnNpb24pIHsKICAgICAgICAgICAgICAgIGlmIChfdGhpcy5zaG93aW5nWWFtbCkgewogICAgICAgICAgICAgICAgICBfdGhpcy5hcHBseVlhbWxUb1ZhbHVlcygpOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgLyoKICAgICAgICAgICAgICAgICAgdGhpcy5sb2FkZWRWZXJzaW9uVmFsdWVzIGlzIHRha2VuIGZyb20gdmVyc2lvbkluZm8sCiAgICAgICAgICAgICAgICAgIHdoaWNoIGNvbnRhaW5zIGV2ZXJ5dGhpbmcgdGhlcmUgaXMgdG8ga25vdyBhYm91dCBhIHNwZWNpZmljCiAgICAgICAgICAgICAgICAgIHZlcnNpb24gb2YgYSBIZWxtIGNoYXJ0LCBpbmNsdWRpbmcgYWxsIGNoYXJ0IHZhbHVlcywKICAgICAgICAgICAgICAgICAgY2hhcnQgbWV0YWRhdGEsIGEgc2hvcnQgYXBwIFJFQURNRSBhbmQgYSBtb3JlCiAgICAgICAgICAgICAgICAgIHZlcnNpb24tc3BlY2lmaWMgUkVBRE1FIGNhbGxlZCB0aGUgY2hhcnQgUkVBRE1FLgogICAgICAgICAgICAgICAgICAgSGVyZSB3ZSBhc3N1bWUgdGhhdCBhbnkgZGlmZmVyZW5jZSBiZXR3ZWVuIHRoZSB2YWx1ZXMgaW4KICAgICAgICAgICAgICAgICAgdHdvIGRpZmZlcmVudCBIZWxtIGNoYXJ0IHZlcnNpb25zIGlzIGEgInVzZXIgdmFsdWUsIiBvcgogICAgICAgICAgICAgICAgICBhIHVzZXItc2VsZWN0ZWQgY3VzdG9taXphdGlvbi4KICAgICAgICAgICAgICAgICovCiAgICAgICAgICAgICAgICB1c2VyVmFsdWVzID0gZGlmZihfdGhpcy5sb2FkZWRWZXJzaW9uVmFsdWVzLCBfdGhpcy5jaGFydFZhbHVlcyk7CiAgICAgICAgICAgICAgfSBlbHNlIGlmIChfdGhpcy5leGlzdGluZykgewogICAgICAgICAgICAgICAgLyogRm9yIGFuIGFscmVhZHkgaW5zdGFsbGVkIGFwcCwgdXNlIHRoZSB2YWx1ZXMgZnJvbSB0aGUgcHJldmlvdXMgaW5zdGFsbC4gKi8KICAgICAgICAgICAgICAgIHVzZXJWYWx1ZXMgPSBjbG9uZSgoKF90aGlzJGV4aXN0aW5nJHNwZWMgPSBfdGhpcy5leGlzdGluZy5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRleGlzdGluZyRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRleGlzdGluZyRzcGVjLnZhbHVlcykgfHwge30pOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAvKiBGb3IgYW4gbmV3IGFwcCwgc3RhcnQgZW1wdHkuICovCiAgICAgICAgICAgICAgICB1c2VyVmFsdWVzID0ge307CiAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAvKgogICAgICAgICAgICAgICAgUmVtb3ZlIGdsb2JhbCB2YWx1ZXMgaWYgdGhleSBhcmUgaWRlbnRpY2FsIHRvCiAgICAgICAgICAgICAgICB0aGUgY3VycmVudGx5IGF2YWlsYWJsZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgY2x1c3RlcgogICAgICAgICAgICAgICAgYW5kIFJhbmNoZXIgc2V0dGluZ3MuCiAgICAgICAgICAgICAgICAgSW1tZWRpYXRlbHkgYmVmb3JlIHRoZSBIZWxtIGNoYXJ0IGlzIGluc3RhbGxlZCBvcgogICAgICAgICAgICAgICAgdXBncmFkZWQsIHRoZSBnbG9iYWwgdmFsdWVzIGFyZSByZS1hZGRlZC4KICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgIF90aGlzLnJlbW92ZUdsb2JhbFZhbHVlc0Zyb20odXNlclZhbHVlcyk7CgogICAgICAgICAgICAgIC8qCiAgICAgICAgICAgICAgICBUaGUgbWVyZ2UoKSBtZXRob2QgaXMgdXNlZCB0byBtZXJnZSB0d28gb3IgbW9yZSBvYmplY3RzCiAgICAgICAgICAgICAgICBzdGFydGluZyB3aXRoIHRoZSBsZWZ0LW1vc3QgdG8gdGhlIHJpZ2h0LW1vc3QgdG8gY3JlYXRlIGEKICAgICAgICAgICAgICAgIHBhcmVudCBtYXBwaW5nIG9iamVjdC4gV2hlbiB0d28ga2V5cyBhcmUgdGhlIHNhbWUsIHRoZQogICAgICAgICAgICAgICAgZ2VuZXJhdGVkIG9iamVjdCB3aWxsIGhhdmUgdmFsdWUgZm9yIHRoZSByaWdodG1vc3Qga2V5LgogICAgICAgICAgICAgICAgSW4gdGhpcyBjYXNlLCBhbnkgdmFsdWVzIGluIHVzZXJWYWx1ZXMgb3ZlcnJpZGUgYW55CiAgICAgICAgICAgICAgICBtYXRjaGluZyB2YWx1ZXMgaW4gdmVyc2lvbkluZm8uCiAgICAgICAgICAgICAgKi8KICAgICAgICAgICAgICBfdGhpcy5jaGFydFZhbHVlcyA9IG1lcmdlKG1lcmdlKHt9LCAoKF90aGlzJHZlcnNpb25JbmZvID0gX3RoaXMudmVyc2lvbkluZm8pID09PSBudWxsIHx8IF90aGlzJHZlcnNpb25JbmZvID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2ZXJzaW9uSW5mby52YWx1ZXMpIHx8IHt9KSwgdXNlclZhbHVlcyk7CiAgICAgICAgICAgICAgaWYgKF90aGlzLnNob3dDdXN0b21SZWdpc3RyeSkgewogICAgICAgICAgICAgICAgLyoqCiAgICAgICAgICAgICAgICAgKiBUaGUgaW5wdXQgdG8gY29uZmlndXJlIHRoZSByZWdpc3RyeSBzaG91bGQgbmV2ZXIgYmUKICAgICAgICAgICAgICAgICAqIHNob3duIGZvciB0aGlyZC1wYXJ0eSBjaGFydHMsIHdoaWNoIGRvbid0IGhhdmUgUmFuY2hlcgogICAgICAgICAgICAgICAgICogZ2xvYmFsIHZhbHVlcy4KICAgICAgICAgICAgICAgICAqLwogICAgICAgICAgICAgICAgZXhpc3RpbmdSZWdpc3RyeSA9ICgoX3RoaXMkY2hhcnRWYWx1ZXMgPSBfdGhpcy5jaGFydFZhbHVlcykgPT09IG51bGwgfHwgX3RoaXMkY2hhcnRWYWx1ZXMgPT09IHZvaWQgMCB8fCAoX3RoaXMkY2hhcnRWYWx1ZXMgPSBfdGhpcyRjaGFydFZhbHVlcy5nbG9iYWwpID09PSBudWxsIHx8IF90aGlzJGNoYXJ0VmFsdWVzID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjaGFydFZhbHVlcy5zeXN0ZW1EZWZhdWx0UmVnaXN0cnkpIHx8ICgoX3RoaXMkY2hhcnRWYWx1ZXMyID0gX3RoaXMuY2hhcnRWYWx1ZXMpID09PSBudWxsIHx8IF90aGlzJGNoYXJ0VmFsdWVzMiA9PT0gdm9pZCAwIHx8IChfdGhpcyRjaGFydFZhbHVlczIgPSBfdGhpcyRjaGFydFZhbHVlczIuZ2xvYmFsKSA9PT0gbnVsbCB8fCBfdGhpcyRjaGFydFZhbHVlczIgPT09IHZvaWQgMCB8fCAoX3RoaXMkY2hhcnRWYWx1ZXMyID0gX3RoaXMkY2hhcnRWYWx1ZXMyLmNhdHRsZSkgPT09IG51bGwgfHwgX3RoaXMkY2hhcnRWYWx1ZXMyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjaGFydFZhbHVlczIuc3lzdGVtRGVmYXVsdFJlZ2lzdHJ5KTsKICAgICAgICAgICAgICAgIChfdGhpcyRjaGFydFZhbHVlczMgPSBfdGhpcy5jaGFydFZhbHVlcykgPT09IG51bGwgfHwgX3RoaXMkY2hhcnRWYWx1ZXMzID09PSB2b2lkIDAgfHwgKF90aGlzJGNoYXJ0VmFsdWVzMyA9IF90aGlzJGNoYXJ0VmFsdWVzMy5nbG9iYWwpID09PSBudWxsIHx8IF90aGlzJGNoYXJ0VmFsdWVzMyA9PT0gdm9pZCAwIHx8IGRlbGV0ZSBfdGhpcyRjaGFydFZhbHVlczMuc3lzdGVtRGVmYXVsdFJlZ2lzdHJ5OwogICAgICAgICAgICAgICAgKF90aGlzJGNoYXJ0VmFsdWVzNCA9IF90aGlzLmNoYXJ0VmFsdWVzKSA9PT0gbnVsbCB8fCBfdGhpcyRjaGFydFZhbHVlczQgPT09IHZvaWQgMCB8fCAoX3RoaXMkY2hhcnRWYWx1ZXM0ID0gX3RoaXMkY2hhcnRWYWx1ZXM0Lmdsb2JhbCkgPT09IG51bGwgfHwgX3RoaXMkY2hhcnRWYWx1ZXM0ID09PSB2b2lkIDAgfHwgKF90aGlzJGNoYXJ0VmFsdWVzNCA9IF90aGlzJGNoYXJ0VmFsdWVzNC5jYXR0bGUpID09PSBudWxsIHx8IF90aGlzJGNoYXJ0VmFsdWVzNCA9PT0gdm9pZCAwIHx8IGRlbGV0ZSBfdGhpcyRjaGFydFZhbHVlczQuc3lzdGVtRGVmYXVsdFJlZ2lzdHJ5OwogICAgICAgICAgICAgICAgX3RoaXMuY3VzdG9tUmVnaXN0cnlTZXR0aW5nID0gZXhpc3RpbmdSZWdpc3RyeSB8fCBfdGhpcy5kZWZhdWx0UmVnaXN0cnlTZXR0aW5nOwogICAgICAgICAgICAgICAgX3RoaXMuc2hvd0N1c3RvbVJlZ2lzdHJ5SW5wdXQgPSAhIV90aGlzLmN1c3RvbVJlZ2lzdHJ5U2V0dGluZzsKICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgIC8qIFNlcmlhbGl6ZXMgYW4gb2JqZWN0IGFzIGEgWUFNTCBkb2N1bWVudCAqLwogICAgICAgICAgICAgIF90aGlzLnZhbHVlc1lhbWwgPSBzYWZlckR1bXAoX3RoaXMuY2hhcnRWYWx1ZXMpOwoKICAgICAgICAgICAgICAvKiBGb3IgWUFNTCBkaWZmICovCiAgICAgICAgICAgICAgaWYgKCFfdGhpcy5sb2FkZWRWZXJzaW9uKSB7CiAgICAgICAgICAgICAgICBfdGhpcy5vcmlnaW5hbFlhbWxWYWx1ZXMgPSBfdGhpcy52YWx1ZXNZYW1sOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfdGhpcy5sb2FkZWRWZXJzaW9uVmFsdWVzID0gKChfdGhpcyR2ZXJzaW9uSW5mbzIgPSBfdGhpcy52ZXJzaW9uSW5mbykgPT09IG51bGwgfHwgX3RoaXMkdmVyc2lvbkluZm8yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2ZXJzaW9uSW5mbzIudmFsdWVzKSB8fCB7fTsKICAgICAgICAgICAgICBfdGhpcy5sb2FkZWRWZXJzaW9uID0gKF90aGlzJHZlcnNpb24gPSBfdGhpcy52ZXJzaW9uKSA9PT0gbnVsbCB8fCBfdGhpcyR2ZXJzaW9uID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2ZXJzaW9uLmtleTsKICAgICAgICAgICAgfQoKICAgICAgICAgICAgLyogQ2hlY2sgaWYgY2hhcnQgZXhpc3RzIGFuZCBpZiByZXF1aXJlZCB2YWx1ZXMgZXhpc3QgKi8KICAgICAgICAgICAgX3RoaXMudXBkYXRlU3RlcE9uZVJlYWR5KCk7CiAgICAgICAgICAgIF90aGlzLnByZUZvcm1ZYW1sT3B0aW9uID0gX3RoaXMudmFsdWVzQ29tcG9uZW50IHx8IF90aGlzLmhhc1F1ZXN0aW9ucyA/IFZBTFVFU19TVEFURS5GT1JNIDogVkFMVUVTX1NUQVRFLllBTUw7CgogICAgICAgICAgICAvKiBMb29rIGZvciBhbm5vdGF0aW9uIHRvIHNheSB0aGlzIGFwcCBpcyBhIGxlZ2FjeSBtaWdyYXRlZCBhcHAgKHdlIGxvb2sgaW4gZWl0aGVyIHBsYWNlIGZvciBub3cpICovCiAgICAgICAgICAgIF90aGlzLm1pZ3JhdGVkQXBwID0gKChfdGhpcyRleGlzdGluZzIgPSBfdGhpcy5leGlzdGluZykgPT09IG51bGwgfHwgX3RoaXMkZXhpc3RpbmcyID09PSB2b2lkIDAgfHwgKF90aGlzJGV4aXN0aW5nMiA9IF90aGlzJGV4aXN0aW5nMi5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyRleGlzdGluZzIgPT09IHZvaWQgMCB8fCAoX3RoaXMkZXhpc3RpbmcyID0gX3RoaXMkZXhpc3RpbmcyLmNoYXJ0KSA9PT0gbnVsbCB8fCBfdGhpcyRleGlzdGluZzIgPT09IHZvaWQgMCB8fCAoX3RoaXMkZXhpc3RpbmcyID0gX3RoaXMkZXhpc3RpbmcyLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyRleGlzdGluZzIgPT09IHZvaWQgMCB8fCAoX3RoaXMkZXhpc3RpbmcyID0gX3RoaXMkZXhpc3RpbmcyLmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRleGlzdGluZzIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGV4aXN0aW5nMltDQVRBTE9HX0FOTk9UQVRJT05TLk1JR1JBVEVEXSkgPT09ICd0cnVlJzsKICAgICAgICAgIGNhc2UgMTEwOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUsIG51bGwsIFtbMSwgNl0sIFs5LCAxNF0sIFsxOCwgMjRdLCBbMjcsIDMzXSwgWzM3LCA0M10sIFs0NywgNThdLCBbNjIsIDczXSwgWzc3LCA4M10sIFs4OSwgOTddXSk7CiAgICB9KSkoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICAvKiBIZWxtIENMSSBvcHRpb25zIHRoYXQgYXJlIG5vdCBwZXJzaXN0ZWQgb24gdGhlIGJhY2sgZW5kLAogICAgYnV0IGFyZSB1c2VkIGZvciB0aGUgZmluYWwgaW5zdGFsbC91cGdyYWRlIG9wZXJhdGlvbi4gKi8KICAgIHZhciBkZWZhdWx0Q21kT3B0cyA9IHsKICAgICAgY2xlYW51cE9uRmFpbDogZmFsc2UsCiAgICAgIGNyZHM6IHRydWUsCiAgICAgIGhvb2tzOiB0cnVlLAogICAgICBmb3JjZTogZmFsc2UsCiAgICAgIHJlc2V0VmFsdWVzOiBmYWxzZSwKICAgICAgb3BlbkFwaTogdHJ1ZSwKICAgICAgd2FpdDogdHJ1ZSwKICAgICAgdGltZW91dDogNjAwLAogICAgICBoaXN0b3J5TWF4OiA1CiAgICB9OwogICAgcmV0dXJuIHsKICAgICAgZGVmYXVsdFJlZ2lzdHJ5U2V0dGluZzogJycsCiAgICAgIGN1c3RvbVJlZ2lzdHJ5U2V0dGluZzogJycsCiAgICAgIHNlcnZlclVybFNldHRpbmc6IG51bGwsCiAgICAgIGNoYXJ0VmFsdWVzOiBudWxsLAogICAgICBjbHVzdGVyUmVnaXN0cnk6ICcnLAogICAgICBvcmlnaW5hbFlhbWxWYWx1ZXM6IG51bGwsCiAgICAgIHByZXZpb3VzWWFtbFZhbHVlczogbnVsbCwKICAgICAgZXJyb3JzOiBudWxsLAogICAgICBleGlzdGluZzogbnVsbCwKICAgICAgZ2xvYmFsUmVnaXN0cnk6ICcnLAogICAgICBmb3JjZU5hbWVzcGFjZTogbnVsbCwKICAgICAgbG9hZGVkVmVyc2lvbjogbnVsbCwKICAgICAgbG9hZGVkVmVyc2lvblZhbHVlczogbnVsbCwKICAgICAgbGVnYWN5QXBwOiBudWxsLAogICAgICBtY2FwcDogbnVsbCwKICAgICAgbW9kZTogbnVsbCwKICAgICAgdmFsdWU6IG51bGwsCiAgICAgIHZhbHVlc0NvbXBvbmVudDogbnVsbCwKICAgICAgdmFsdWVzWWFtbDogJycsCiAgICAgIHByb2plY3Q6IG51bGwsCiAgICAgIG1pZ3JhdGVkQXBwOiBmYWxzZSwKICAgICAgZGVmYXVsdENtZE9wdHM6IGRlZmF1bHRDbWRPcHRzLAogICAgICBjdXN0b21DbWRPcHRzOiBfb2JqZWN0U3ByZWFkKHt9LCBkZWZhdWx0Q21kT3B0cyksCiAgICAgIGF1dG9JbnN0YWxsSW5mbzogW10sCiAgICAgIG5hbWVEaXNhYmxlZDogZmFsc2UsCiAgICAgIHByZUZvcm1ZYW1sT3B0aW9uOiBWQUxVRVNfU1RBVEUuWUFNTCwKICAgICAgZm9ybVlhbWxPcHRpb246IFZBTFVFU19TVEFURS5ZQU1MLAogICAgICBzaG93RGlmZjogZmFsc2UsCiAgICAgIHNob3dWYWx1ZXNDb21wb25lbnQ6IHRydWUsCiAgICAgIHNob3dRdWVzdGlvbnM6IHRydWUsCiAgICAgIHNob3dTbGlkZUluOiBmYWxzZSwKICAgICAgc2hvd25SZWFkbWVXaW5kb3dzOiBbXSwKICAgICAgY29tcG9uZW50SGFzVGFiczogZmFsc2UsCiAgICAgIHNob3dDb21tYW5kU3RlcDogZmFsc2UsCiAgICAgIHNob3dDdXN0b21SZWdpc3RyeUlucHV0OiBmYWxzZSwKICAgICAgaXNOYW1lc3BhY2VOZXc6IGZhbHNlLAogICAgICBzdGVwQmFzaWM6IHsKICAgICAgICBuYW1lOiAnYmFzaWNzJywKICAgICAgICBsYWJlbDogdGhpcy50KCdjYXRhbG9nLmluc3RhbGwuc3RlcHMuYmFzaWNzLmxhYmVsJyksCiAgICAgICAgc3VidGV4dDogdGhpcy50KCdjYXRhbG9nLmluc3RhbGwuc3RlcHMuYmFzaWNzLnN1YnRleHQnKSwKICAgICAgICBkZXNjcmlwdGlvbktleTogJ2NhdGFsb2cuaW5zdGFsbC5zdGVwcy5iYXNpY3MuZGVzY3JpcHRpb24nLAogICAgICAgIHJlYWR5OiB0cnVlLAogICAgICAgIHdlaWdodDogMzAKICAgICAgfSwKICAgICAgc3RlcENsdXN0ZXJUcGxWZXJzaW9uOiB7CiAgICAgICAgbmFtZTogJ2NsdXN0ZXJUcGxWZXJzaW9uJywKICAgICAgICBsYWJlbDogdGhpcy50KCdjYXRhbG9nLmluc3RhbGwuc3RlcHMuY2x1c3RlclRwbFZlcnNpb24ubGFiZWwnKSwKICAgICAgICBzdWJ0ZXh0OiB0aGlzLnQoJ2NhdGFsb2cuaW5zdGFsbC5zdGVwcy5jbHVzdGVyVHBsVmVyc2lvbi5zdWJ0ZXh0JyksCiAgICAgICAgZGVzY3JpcHRpb25LZXk6ICdjYXRhbG9nLmluc3RhbGwuc3RlcHMuaGVsbVZhbHVlcy5kZXNjcmlwdGlvbicsCiAgICAgICAgcmVhZHk6IHRydWUsCiAgICAgICAgd2VpZ2h0OiAzMAogICAgICB9LAogICAgICBzdGVwVmFsdWVzOiB7CiAgICAgICAgbmFtZTogJ2hlbG1WYWx1ZXMnLAogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2NhdGFsb2cuaW5zdGFsbC5zdGVwcy5oZWxtVmFsdWVzLmxhYmVsJyksCiAgICAgICAgc3VidGV4dDogdGhpcy50KCdjYXRhbG9nLmluc3RhbGwuc3RlcHMuaGVsbVZhbHVlcy5zdWJ0ZXh0JyksCiAgICAgICAgZGVzY3JpcHRpb25LZXk6ICdjYXRhbG9nLmluc3RhbGwuc3RlcHMuaGVsbVZhbHVlcy5kZXNjcmlwdGlvbicsCiAgICAgICAgcmVhZHk6IHRydWUsCiAgICAgICAgd2VpZ2h0OiAyMAogICAgICB9LAogICAgICBzdGVwQ29tbWFuZHM6IHsKICAgICAgICBuYW1lOiAnaGVsbUNsaScsCiAgICAgICAgbGFiZWw6IHRoaXMudCgnY2F0YWxvZy5pbnN0YWxsLnN0ZXBzLmhlbG1DbGkubGFiZWwnKSwKICAgICAgICBzdWJ0ZXh0OiB0aGlzLnQoJ2NhdGFsb2cuaW5zdGFsbC5zdGVwcy5oZWxtQ2xpLnN1YnRleHQnKSwKICAgICAgICBkZXNjcmlwdGlvbktleTogJ2NhdGFsb2cuaW5zdGFsbC5zdGVwcy5oZWxtQ2xpLmRlc2NyaXB0aW9uJywKICAgICAgICByZWFkeTogdHJ1ZSwKICAgICAgICB3ZWlnaHQ6IDEwCiAgICAgIH0sCiAgICAgIGN1c3RvbVN0ZXBzOiBbXSwKICAgICAgaXNQbGFpbkxheW91dDogaXNQbGFpbkxheW91dCh0aGlzLiRyb3V0ZS5xdWVyeSksCiAgICAgIGxlZ2FjeURlZnM6IHsKICAgICAgICBsZWdhY3k6IHRoaXMudCgnY2F0YWxvZy5pbnN0YWxsLmVycm9yLmxlZ2FjeS5jYXRlZ29yeS5sZWdhY3knKSwKICAgICAgICBtY206IHRoaXMudCgnY2F0YWxvZy5pbnN0YWxsLmVycm9yLmxlZ2FjeS5jYXRlZ29yeS5tY20nKQogICAgICB9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyh7CiAgICBpblN0b3JlOiAnY2F0YWxvZy9pblN0b3JlJywKICAgIGZlYXR1cmVzOiAnZmVhdHVyZXMvZ2V0JwogIH0pKSwge30sIHsKICAgIG1jbTogbWFwRmVhdHVyZShNVUxUSV9DTFVTVEVSKSwKICAgIC8qKgogICAgICogUmV0dXJuIGxpc3Qgb2YgdmFyaWFibGVzIHRvIGZpbHRlciBjaGFydCBxdWVzdGlvbnMKICAgICAqLwogICAgaWdub3JlVmFyaWFibGVzOiBmdW5jdGlvbiBpZ25vcmVWYXJpYWJsZXMoKSB7CiAgICAgIHJldHVybiBfaWdub3JlVmFyaWFibGVzKHRoaXMuY3VycmVudENsdXN0ZXIsIHRoaXMudmVyc2lvbkluZm8pOwogICAgfSwKICAgIG5hbWVzcGFjZUlzTmV3OiBmdW5jdGlvbiBuYW1lc3BhY2VJc05ldygpIHsKICAgICAgdmFyIF90aGlzJHZhbHVlOwogICAgICB2YXIgYWxsID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY2x1c3Rlci9hbGwnXShOQU1FU1BBQ0UpOwogICAgICB2YXIgd2FudCA9IChfdGhpcyR2YWx1ZSA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlID09PSB2b2lkIDAgfHwgKF90aGlzJHZhbHVlID0gX3RoaXMkdmFsdWUubWV0YWRhdGEpID09PSBudWxsIHx8IF90aGlzJHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2YWx1ZS5uYW1lc3BhY2U7CiAgICAgIGlmICghd2FudCkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gIWZpbmRCeShhbGwsICdpZCcsIHdhbnQpOwogICAgfSwKICAgIHNob3dQcm9qZWN0OiBmdW5jdGlvbiBzaG93UHJvamVjdCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNSYW5jaGVyICYmICF0aGlzLmV4aXN0aW5nICYmIHRoaXMuZm9yY2VOYW1lc3BhY2U7CiAgICB9LAogICAgcHJvamVjdE9wdHM6IGZ1bmN0aW9uIHByb2plY3RPcHRzKCkgewogICAgICB2YXIgY2x1c3RlciA9IHRoaXMuY3VycmVudENsdXN0ZXI7CiAgICAgIHZhciBwcm9qZWN0cyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvYWxsJ10oTUFOQUdFTUVOVC5QUk9KRUNUKTsKICAgICAgdmFyIG91dCA9IHByb2plY3RzLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiB4LnNwZWMuY2x1c3Rlck5hbWUgPT09IChjbHVzdGVyID09PSBudWxsIHx8IGNsdXN0ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsdXN0ZXIuaWQpOwogICAgICB9KS5tYXAoZnVuY3Rpb24gKHByb2plY3QpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgaWQ6IHByb2plY3QuaWQsCiAgICAgICAgICBsYWJlbDogcHJvamVjdC5uYW1lRGlzcGxheSwKICAgICAgICAgIHZhbHVlOiBwcm9qZWN0LmlkCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIG91dC51bnNoaWZ0KHsKICAgICAgICBpZDogJ25vbmUnLAogICAgICAgIGxhYmVsOiAiKCIuY29uY2F0KHRoaXMudCgnZ2VuZXJpYy5ub25lJyksICIpIiksCiAgICAgICAgdmFsdWU6ICcnCiAgICAgIH0pOwogICAgICByZXR1cm4gb3V0OwogICAgfSwKICAgIGNoYXJ0czogZnVuY3Rpb24gY2hhcnRzKCkgewogICAgICB2YXIgX3RoaXMkZXhpc3RpbmczLAogICAgICAgIF90aGlzMiA9IHRoaXM7CiAgICAgIHZhciBjdXJyZW50ID0gKF90aGlzJGV4aXN0aW5nMyA9IHRoaXMuZXhpc3RpbmcpID09PSBudWxsIHx8IF90aGlzJGV4aXN0aW5nMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkZXhpc3RpbmczLm1hdGNoaW5nQ2hhcnQodHJ1ZSk7CiAgICAgIHZhciBvdXQgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjYXRhbG9nL2NoYXJ0cyddLmZpbHRlcihmdW5jdGlvbiAoeCkgewogICAgICAgIGlmICh4LmtleSA9PT0gKGN1cnJlbnQgPT09IG51bGwgfHwgY3VycmVudCA9PT0gdm9pZCAwID8gdm9pZCAwIDogY3VycmVudC5rZXkpIHx8IHguY2hhcnROYW1lID09PSAoY3VycmVudCA9PT0gbnVsbCB8fCBjdXJyZW50ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjdXJyZW50LmNoYXJ0TmFtZSkpIHsKICAgICAgICAgIHJldHVybiB0cnVlOwogICAgICAgIH0KICAgICAgICBpZiAoeC5oaWRkZW4gJiYgIV90aGlzMi5zaG93SGlkZGVuKSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICAgIGlmICh4LmRlcHJlY2F0ZWQgJiYgIV90aGlzMi5zaG93RGVwcmVjYXRlZCkgewogICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfSk7CiAgICAgIHZhciBsYXN0ID0gJyc7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3V0Lmxlbmd0aDsgaSsrKSB7CiAgICAgICAgaWYgKG91dFtpXS5yZXBvTmFtZSAhPT0gbGFzdCkgewogICAgICAgICAgbGFzdCA9IG91dFtpXS5yZXBvTmFtZTsKICAgICAgICAgIGluc2VydEF0KG91dCwgaSwgewogICAgICAgICAgICBraW5kOiAnbGFiZWwnLAogICAgICAgICAgICBsYWJlbDogb3V0W2ldLnJlcG9OYW1lRGlzcGxheSwKICAgICAgICAgICAgZGlzYWJsZWQ6IHRydWUKICAgICAgICAgIH0pOwogICAgICAgICAgaSsrOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gb3V0OwogICAgfSwKICAgIHNob3dTZWxlY3RWZXJzaW9uT3JDaGFydDogZnVuY3Rpb24gc2hvd1NlbGVjdFZlcnNpb25PckNoYXJ0KCkgewogICAgICAvLyBBbGxvdyB0aGUgdXNlciB0byBjaG9vc2UgYSB2ZXJzaW9uIGlmIHRoZSBhcHAgZXhpc3RzIE9SIHRoZXkndmUgY29tZSBmcm9tIHRvb2xzCiAgICAgIHJldHVybiB0aGlzLmV4aXN0aW5nIHx8IEZST01fVE9PTFMgaW4gdGhpcy4kcm91dGUucXVlcnk7CiAgICB9LAogICAgc2hvd05hbWVFZGl0b3I6IGZ1bmN0aW9uIHNob3dOYW1lRWRpdG9yKCkgewogICAgICByZXR1cm4gIXRoaXMubmFtZURpc2FibGVkIHx8ICF0aGlzLmZvcmNlTmFtZXNwYWNlOwogICAgfSwKICAgIHNob3dWZXJzaW9uczogZnVuY3Rpb24gc2hvd1ZlcnNpb25zKCkgewogICAgICB2YXIgX3RoaXMkY2hhcnQzOwogICAgICByZXR1cm4gKChfdGhpcyRjaGFydDMgPSB0aGlzLmNoYXJ0KSA9PT0gbnVsbCB8fCBfdGhpcyRjaGFydDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNoYXJ0My52ZXJzaW9ucy5sZW5ndGgpID4gMTsKICAgIH0sCiAgICB0YXJnZXROYW1lc3BhY2U6IGZ1bmN0aW9uIHRhcmdldE5hbWVzcGFjZSgpIHsKICAgICAgdmFyIF90aGlzJHZhbHVlMjsKICAgICAgaWYgKHRoaXMuZm9yY2VOYW1lc3BhY2UpIHsKICAgICAgICByZXR1cm4gdGhpcy5mb3JjZU5hbWVzcGFjZTsKICAgICAgfSBlbHNlIGlmICgoX3RoaXMkdmFsdWUyID0gdGhpcy52YWx1ZSkgIT09IG51bGwgJiYgX3RoaXMkdmFsdWUyICE9PSB2b2lkIDAgJiYgX3RoaXMkdmFsdWUyLm1ldGFkYXRhLm5hbWVzcGFjZSkgewogICAgICAgIHJldHVybiB0aGlzLnZhbHVlLm1ldGFkYXRhLm5hbWVzcGFjZTsKICAgICAgfQogICAgICByZXR1cm4gJ2RlZmF1bHQnOwogICAgfSwKICAgIGVkaXRvck1vZGU6IGZ1bmN0aW9uIGVkaXRvck1vZGUoKSB7CiAgICAgIGlmICh0aGlzLnNob3dEaWZmKSB7CiAgICAgICAgcmV0dXJuIEVESVRPUl9NT0RFUy5ESUZGX0NPREU7CiAgICAgIH0KICAgICAgcmV0dXJuIEVESVRPUl9NT0RFUy5FRElUX0NPREU7CiAgICB9LAogICAgc2hvd2luZ1lhbWw6IGZ1bmN0aW9uIHNob3dpbmdZYW1sKCkgewogICAgICByZXR1cm4gdGhpcy5mb3JtWWFtbE9wdGlvbiA9PT0gVkFMVUVTX1NUQVRFLllBTUwgfHwgIXRoaXMudmFsdWVzQ29tcG9uZW50ICYmICF0aGlzLmhhc1F1ZXN0aW9uczsKICAgIH0sCiAgICBzaG93aW5nWWFtbERpZmY6IGZ1bmN0aW9uIHNob3dpbmdZYW1sRGlmZigpIHsKICAgICAgcmV0dXJuIHRoaXMuZm9ybVlhbWxPcHRpb24gPT09IFZBTFVFU19TVEFURS5ESUZGOwogICAgfSwKICAgIGZvcm1ZYW1sT3B0aW9uczogZnVuY3Rpb24gZm9ybVlhbWxPcHRpb25zKCkgewogICAgICB2YXIgb3B0aW9ucyA9IFtdOwogICAgICBpZiAodGhpcy52YWx1ZXNDb21wb25lbnQgfHwgdGhpcy5oYXNRdWVzdGlvbnMpIHsKICAgICAgICBvcHRpb25zLnB1c2goewogICAgICAgICAgbGFiZWxLZXk6ICdjYXRhbG9nLmluc3RhbGwuc2VjdGlvbi5jaGFydE9wdGlvbnMnLAogICAgICAgICAgdmFsdWU6IFZBTFVFU19TVEFURS5GT1JNCiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgb3B0aW9ucy5wdXNoKHsKICAgICAgICBsYWJlbEtleTogJ2NhdGFsb2cuaW5zdGFsbC5zZWN0aW9uLnZhbHVlc1lhbWwnLAogICAgICAgIHZhbHVlOiBWQUxVRVNfU1RBVEUuWUFNTAogICAgICB9LCB7CiAgICAgICAgbGFiZWxLZXk6ICdjYXRhbG9nLmluc3RhbGwuc2VjdGlvbi5kaWZmJywKICAgICAgICB2YWx1ZTogVkFMVUVTX1NUQVRFLkRJRkYsCiAgICAgICAgLy8gPT09IHF1aXRlIG9idmlvdXNseSBzaG91bGRuJ3Qgd29yaywgYnV0IGhhcyBiZWVuIGFuZCBzdGlsbCBkb2VzLiBXaGVuIHRoZSBtYWdpYyBicmVha3MgYWRkcmVzcyB3aXRoIGhlYXZpZXIgc3RyaW5naWZ5L2pzeWFtbC5kdW1wCiAgICAgICAgZGlzYWJsZWQ6IHRoaXMuZm9ybVlhbWxPcHRpb24gPT09IFZBTFVFU19TVEFURS5GT1JNID8gdGhpcy5vcmlnaW5hbFlhbWxWYWx1ZXMgPT09IGpzeWFtbC5kdW1wKHRoaXMuY2hhcnRWYWx1ZXMgfHwge30pIDogdGhpcy5vcmlnaW5hbFlhbWxWYWx1ZXMgPT09IHRoaXMudmFsdWVzWWFtbAogICAgICB9KTsKICAgICAgcmV0dXJuIG9wdGlvbnM7CiAgICB9LAogICAgeWFtbERpZmZNb2RlT3B0aW9uczogZnVuY3Rpb24geWFtbERpZmZNb2RlT3B0aW9ucygpIHsKICAgICAgcmV0dXJuIFt7CiAgICAgICAgbGFiZWxLZXk6ICdyZXNvdXJjZVlhbWwuYnV0dG9ucy51bmlmaWVkJywKICAgICAgICB2YWx1ZTogJ3VuaWZpZWQnCiAgICAgIH0sIHsKICAgICAgICBsYWJlbEtleTogJ3Jlc291cmNlWWFtbC5idXR0b25zLnNwbGl0JywKICAgICAgICB2YWx1ZTogJ3NwbGl0JwogICAgICB9XTsKICAgIH0sCiAgICBzdGVwcGVyTmFtZTogZnVuY3Rpb24gc3RlcHBlck5hbWUoKSB7CiAgICAgIHZhciBfdGhpcyRleGlzdGluZzQsIF90aGlzJGNoYXJ0NDsKICAgICAgcmV0dXJuICgoX3RoaXMkZXhpc3Rpbmc0ID0gdGhpcy5leGlzdGluZykgPT09IG51bGwgfHwgX3RoaXMkZXhpc3Rpbmc0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRleGlzdGluZzQubmFtZURpc3BsYXkpIHx8ICgoX3RoaXMkY2hhcnQ0ID0gdGhpcy5jaGFydCkgPT09IG51bGwgfHwgX3RoaXMkY2hhcnQ0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRjaGFydDQuY2hhcnROYW1lRGlzcGxheSk7CiAgICB9LAogICAgc3RlcHBlclN1YnRleHQ6IGZ1bmN0aW9uIHN0ZXBwZXJTdWJ0ZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5leGlzdGluZyAmJiB0aGlzLmN1cnJlbnRWZXJzaW9uICE9PSB0aGlzLnRhcmdldFZlcnNpb24gPyAiIi5jb25jYXQodGhpcy5jdXJyZW50VmVyc2lvbiwgIiA+ICIpLmNvbmNhdCh0aGlzLnRhcmdldFZlcnNpb24pIDogdGhpcy50YXJnZXRWZXJzaW9uOwogICAgfSwKICAgIHJlYWRtZVdpbmRvd05hbWU6IGZ1bmN0aW9uIHJlYWRtZVdpbmRvd05hbWUoKSB7CiAgICAgIHZhciBfdGhpcyR2ZXJzaW9uMjsKICAgICAgLy8gVmVyc2lvbiBjYW4gY2hhbmdlLCBzbyBhbGxvdyBtdWx0aXBsZSBXTSB0YWJzIGZvciBkaWZmZXJlbnQgdmVyc2lvbnMKICAgICAgcmV0dXJuICIiLmNvbmNhdCh0aGlzLnN0ZXBwZXJOYW1lLCAiLSIpLmNvbmNhdCgoX3RoaXMkdmVyc2lvbjIgPSB0aGlzLnZlcnNpb24pID09PSBudWxsIHx8IF90aGlzJHZlcnNpb24yID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2ZXJzaW9uMi52ZXJzaW9uKTsKICAgIH0sCiAgICBzaG93aW5nUmVhZG1lV2luZG93OiBmdW5jdGlvbiBzaG93aW5nUmVhZG1lV2luZG93KCkgewogICAgICByZXR1cm4gISF0aGlzLiRzdG9yZS5nZXR0ZXJzWyd3bS9ieUlkJ10odGhpcy5yZWFkbWVXaW5kb3dOYW1lKTsKICAgIH0sCiAgICBkaWZmTW9kZTogbWFwUHJlZihESUZGKSwKICAgIHN0ZXAxRGVzY3JpcHRpb246IGZ1bmN0aW9uIHN0ZXAxRGVzY3JpcHRpb24oKSB7CiAgICAgIHZhciBkZXNjcmlwdGlvbktleSA9IHRoaXMuc3RlcHMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBzLm5hbWUgPT09ICdiYXNpY3MnOwogICAgICB9KS5kZXNjcmlwdGlvbktleTsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vd2l0aEZhbGxiYWNrJ10oZGVzY3JpcHRpb25LZXksIHsKICAgICAgICBhY3Rpb246IHRoaXMuYWN0aW9uLAogICAgICAgIGV4aXN0aW5nOiAhIXRoaXMuZXhpc3RpbmcKICAgICAgfSwgJycpOwogICAgfSwKICAgIHN0ZXAyRGVzY3JpcHRpb246IGZ1bmN0aW9uIHN0ZXAyRGVzY3JpcHRpb24oKSB7CiAgICAgIHZhciBkZXNjcmlwdGlvbktleSA9IHRoaXMuc3RlcHMuZmluZChmdW5jdGlvbiAocykgewogICAgICAgIHJldHVybiBzLm5hbWUgPT09ICdoZWxtVmFsdWVzJzsKICAgICAgfSkuZGVzY3JpcHRpb25LZXk7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzWydpMThuL3dpdGhGYWxsYmFjayddKGRlc2NyaXB0aW9uS2V5LCB7CiAgICAgICAgYWN0aW9uOiB0aGlzLmFjdGlvbiwKICAgICAgICBleGlzdGluZzogISF0aGlzLmV4aXN0aW5nCiAgICAgIH0sICcnKTsKICAgIH0sCiAgICBzdGVwM0Rlc2NyaXB0aW9uOiBmdW5jdGlvbiBzdGVwM0Rlc2NyaXB0aW9uKCkgewogICAgICB2YXIgZGVzY3JpcHRpb25LZXkgPSB0aGlzLnN0ZXBzLmZpbmQoZnVuY3Rpb24gKHMpIHsKICAgICAgICByZXR1cm4gcy5uYW1lID09PSAnaGVsbUNsaSc7CiAgICAgIH0pLmRlc2NyaXB0aW9uS2V5OwogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi93aXRoRmFsbGJhY2snXShkZXNjcmlwdGlvbktleSwgewogICAgICAgIGFjdGlvbjogdGhpcy5hY3Rpb24sCiAgICAgICAgZXhpc3Rpbmc6ICEhdGhpcy5leGlzdGluZwogICAgICB9LCAnJyk7CiAgICB9LAogICAgc3RlcHM6IGZ1bmN0aW9uIHN0ZXBzKCkgewogICAgICB2YXIgX3RoaXMkdmVyc2lvbjM7CiAgICAgIHZhciBzdGVwcyA9IFtdOwogICAgICB2YXIgdHlwZSA9IChfdGhpcyR2ZXJzaW9uMyA9IHRoaXMudmVyc2lvbikgPT09IG51bGwgfHwgX3RoaXMkdmVyc2lvbjMgPT09IHZvaWQgMCB8fCAoX3RoaXMkdmVyc2lvbjMgPSBfdGhpcyR2ZXJzaW9uMy5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkdmVyc2lvbjMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZlcnNpb24zW0NBVEFMT0dfQU5OT1RBVElPTlMuVFlQRV07CiAgICAgIGlmICh0eXBlID09PSBDQVRBTE9HX0FOTk9UQVRJT05TLl9DTFVTVEVSX1RQTCkgewogICAgICAgIHZhciBfdGhpcyRmaWx0ZXJlZFZlcnNpb247CiAgICAgICAgaWYgKCgoX3RoaXMkZmlsdGVyZWRWZXJzaW9uID0gdGhpcy5maWx0ZXJlZFZlcnNpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyRmaWx0ZXJlZFZlcnNpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGZpbHRlcmVkVmVyc2lvbi5sZW5ndGgpID4gMSkgewogICAgICAgICAgc3RlcHMucHVzaCh0aGlzLnN0ZXBDbHVzdGVyVHBsVmVyc2lvbik7CiAgICAgICAgfQogICAgICAgIHN0ZXBzLnB1c2goX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCB0aGlzLnN0ZXBWYWx1ZXMpLCB7fSwgewogICAgICAgICAgbGFiZWw6IHRoaXMudCgnY2F0YWxvZy5pbnN0YWxsLnN0ZXBzLmNsdXN0ZXJUcGxWYWx1ZXMubGFiZWwnKSwKICAgICAgICAgIHN1YnRleHQ6IHRoaXMudCgnY2F0YWxvZy5pbnN0YWxsLnN0ZXBzLmNsdXN0ZXJUcGxWYWx1ZXMuc3VidGV4dCcpLAogICAgICAgICAgZGVzY3JpcHRpb25LZXk6ICdjYXRhbG9nLmluc3RhbGwuc3RlcHMuY2x1c3RlclRwbFZhbHVlcy5kZXNjcmlwdGlvbicKICAgICAgICB9KSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc3RlcHMucHVzaC5hcHBseShzdGVwcywgW3RoaXMuc3RlcEJhc2ljLCB0aGlzLnN0ZXBWYWx1ZXNdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkodGhpcy5jdXN0b21TdGVwcykpKTsKICAgICAgfQogICAgICBpZiAodGhpcy5zaG93Q29tbWFuZFN0ZXApIHsKICAgICAgICBzdGVwcy5wdXNoKHRoaXMuc3RlcENvbW1hbmRzKTsKICAgICAgfQogICAgICByZXR1cm4gc3RlcHMuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgIHJldHVybiAoYi53ZWlnaHQgfHwgMCkgLSAoYS53ZWlnaHQgfHwgMCk7CiAgICAgIH0pOwogICAgfSwKICAgIGNtZE9wdGlvbnM6IGZ1bmN0aW9uIGNtZE9wdGlvbnMoKSB7CiAgICAgIHJldHVybiB0aGlzLnNob3dDb21tYW5kU3RlcCA/IHRoaXMuY3VzdG9tQ21kT3B0cyA6IHRoaXMuZGVmYXVsdENtZE9wdHM7CiAgICB9LAogICAgbmFtZXNwYWNlTmV3QWxsb3dlZDogZnVuY3Rpb24gbmFtZXNwYWNlTmV3QWxsb3dlZCgpIHsKICAgICAgcmV0dXJuICF0aGlzLmV4aXN0aW5nICYmICF0aGlzLmZvcmNlTmFtZXNwYWNlOwogICAgfSwKICAgIGxlZ2FjeUVuYWJsZWQ6IGZ1bmN0aW9uIGxlZ2FjeUVuYWJsZWQoKSB7CiAgICAgIC8vIENoZWNrIGZvciB0aGUgbGVnYWN5IGZlYXR1cmUgZmxhZyBpbiB0aGUgc2V0dGluZ3MKICAgICAgcmV0dXJuIHRoaXMuZmVhdHVyZXMoTEVHQUNZKTsKICAgIH0sCiAgICBsZWdhY3lGZWF0dXJlUm91dGU6IGZ1bmN0aW9uIGxlZ2FjeUZlYXR1cmVSb3V0ZSgpIHsKICAgICAgcmV0dXJuIHsKICAgICAgICBuYW1lOiAnYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2UnLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgcHJvZHVjdDogJ3NldHRpbmdzJywKICAgICAgICAgIHJlc291cmNlOiAnbWFuYWdlbWVudC5jYXR0bGUuaW8uZmVhdHVyZScKICAgICAgICB9CiAgICAgIH07CiAgICB9LAogICAgbGVnYWN5QXBwUm91dGU6IGZ1bmN0aW9uIGxlZ2FjeUFwcFJvdXRlKCkgewogICAgICByZXR1cm4gewogICAgICAgIG5hbWU6ICdjLWNsdXN0ZXItbGVnYWN5LXByb2plY3QnCiAgICAgIH07CiAgICB9LAogICAgd2luZG93c0luY29tcGF0aWJsZTogZnVuY3Rpb24gd2luZG93c0luY29tcGF0aWJsZSgpIHsKICAgICAgdmFyIF90aGlzJGNoYXJ0NTsKICAgICAgaWYgKChfdGhpcyRjaGFydDUgPSB0aGlzLmNoYXJ0KSAhPT0gbnVsbCAmJiBfdGhpcyRjaGFydDUgIT09IHZvaWQgMCAmJiBfdGhpcyRjaGFydDUud2luZG93c0luY29tcGF0aWJsZSkgewogICAgICAgIHJldHVybiB0aGlzLnQoJ2NhdGFsb2cuY2hhcnRzLndpbmRvd3NJbmNvbXBhdGlibGUnKTsKICAgICAgfQogICAgICBpZiAodGhpcy52ZXJzaW9uSW5mbykgewogICAgICAgIHZhciBfdGhpcyR2ZXJzaW9uSW5mbzM7CiAgICAgICAgdmFyIGluY29tcGF0aWJsZVZlcnNpb24gPSAhKCgoX3RoaXMkdmVyc2lvbkluZm8zID0gdGhpcy52ZXJzaW9uSW5mbykgPT09IG51bGwgfHwgX3RoaXMkdmVyc2lvbkluZm8zID09PSB2b2lkIDAgfHwgKF90aGlzJHZlcnNpb25JbmZvMyA9IF90aGlzJHZlcnNpb25JbmZvMy5jaGFydCkgPT09IG51bGwgfHwgX3RoaXMkdmVyc2lvbkluZm8zID09PSB2b2lkIDAgfHwgKF90aGlzJHZlcnNpb25JbmZvMyA9IF90aGlzJHZlcnNpb25JbmZvMy5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3RoaXMkdmVyc2lvbkluZm8zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2ZXJzaW9uSW5mbzNbQ0FUQUxPR19BTk5PVEFUSU9OUy5QRVJNSVRURURfT1NdKSB8fCBMSU5VWCkuaW5jbHVkZXMoJ3dpbmRvd3MnKTsKICAgICAgICBpZiAoaW5jb21wYXRpYmxlVmVyc2lvbiAmJiAhdGhpcy5jaGFydC53aW5kb3dzSW5jb21wYXRpYmxlKSB7CiAgICAgICAgICByZXR1cm4gdGhpcy50KCdjYXRhbG9nLmNoYXJ0cy52ZXJzaW9uV2luZG93c0luY29tcGF0aWJsZScpOwogICAgICAgIH0KICAgICAgfQogICAgICByZXR1cm4gbnVsbDsKICAgIH0sCiAgICAvKioKICAgICAqIENoZWNrIGlmIHRoZSBjaGFydCBjb250YWlucyBgc3lzdGVtRGVmYXVsdFJlZ2lzdHJ5YCBwcm9wZXJ0aWVzLgogICAgICogSWYgbm90IHdlIHNob3VsZG4ndCBhcHBseSB0aGUgc2V0dGluZywgYmVjYXVzZSBpZiB0aGUgb3B0aW9uCiAgICAgKiBpcyBleHBvc2VkIGZvciB0aGlyZC1wYXJ0eSBIZWxtIGNoYXJ0cywgaXQgY29uZnVzZXMgdXNlcnMgYmVjYXVzZQogICAgICogaXQgc2hvd3MgYSBwcml2YXRlIHJlZ2lzdHJ5IHNldHRpbmcgdGhhdCBpcyBuZXZlciB1c2VkCiAgICAgKiBieSB0aGUgY2hhcnQgdGhleSBhcmUgaW5zdGFsbGluZy4gSWYgbm90IGhpZGRlbiwgdGhlIHNldHRpbmcKICAgICAqIGRvZXMgbm90aGluZywgYW5kIGlmIHRoZSB1c2VyIGNoYW5nZXMgaXQsIGl0IHdpbGwgbG9vayBsaWtlCiAgICAgKiB0aGVyZSBpcyBhIGJ1ZyBpbiB0aGUgVUkgd2hlbiBpdCBkb2Vzbid0IHdvcmssIGJlY2F1c2UgVUkgaXMKICAgICAqIGV4cG9zaW5nIGEgZmVhdHVyZSB0aGF0IHRoZSBjaGFydCBkb2VzIG5vdCBoYXZlLgogICAgICovCiAgICBzaG93Q3VzdG9tUmVnaXN0cnk6IGZ1bmN0aW9uIHNob3dDdXN0b21SZWdpc3RyeSgpIHsKICAgICAgdmFyIF90aGlzJHZlcnNpb25JbmZvNCwgX2dsb2JhbCRjYXR0bGU7CiAgICAgIHZhciBnbG9iYWwgPSAoKF90aGlzJHZlcnNpb25JbmZvNCA9IHRoaXMudmVyc2lvbkluZm8pID09PSBudWxsIHx8IF90aGlzJHZlcnNpb25JbmZvNCA9PT0gdm9pZCAwIHx8IChfdGhpcyR2ZXJzaW9uSW5mbzQgPSBfdGhpcyR2ZXJzaW9uSW5mbzQudmFsdWVzKSA9PT0gbnVsbCB8fCBfdGhpcyR2ZXJzaW9uSW5mbzQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZlcnNpb25JbmZvNC5nbG9iYWwpIHx8IHt9OwogICAgICByZXR1cm4gZ2xvYmFsLnN5c3RlbURlZmF1bHRSZWdpc3RyeSAhPT0gdW5kZWZpbmVkIHx8ICgoX2dsb2JhbCRjYXR0bGUgPSBnbG9iYWwuY2F0dGxlKSA9PT0gbnVsbCB8fCBfZ2xvYmFsJGNhdHRsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2dsb2JhbCRjYXR0bGUuc3lzdGVtRGVmYXVsdFJlZ2lzdHJ5KSAhPT0gdW5kZWZpbmVkOwogICAgfQogIH0pLAogIHdhdGNoOiB7CiAgICAnJHJvdXRlLnF1ZXJ5JzogZnVuY3Rpb24gJHJvdXRlUXVlcnkobmV1LCBvbGQpIHsKICAgICAgaWYgKCFpc0VxdWFsKG5ldSwgb2xkKSkgewogICAgICAgIHRoaXMuJGZldGNoKCk7CiAgICAgICAgdGhpcy5zaG93U2xpZGVJbiA9IGZhbHNlOwogICAgICB9CiAgICB9LAogICAgJ3ZhbHVlLm1ldGFkYXRhLm5hbWVzcGFjZSc6IGZ1bmN0aW9uIHZhbHVlTWV0YWRhdGFOYW1lc3BhY2UobmV1LCBvbGQpIHsKICAgICAgaWYgKG5ldSkgewogICAgICAgIHZhciBfbnMkbWV0YWRhdGEkYW5ub3RhdGkyOwogICAgICAgIHZhciBucyA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NsdXN0ZXIvYnlJZCddKE5BTUVTUEFDRSwgdGhpcy52YWx1ZS5tZXRhZGF0YS5uYW1lc3BhY2UpOwogICAgICAgIHZhciBwcm9qZWN0ID0gbnMgPT09IG51bGwgfHwgbnMgPT09IHZvaWQgMCB8fCAoX25zJG1ldGFkYXRhJGFubm90YXRpMiA9IG5zLm1ldGFkYXRhLmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfbnMkbWV0YWRhdGEkYW5ub3RhdGkyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbnMkbWV0YWRhdGEkYW5ub3RhdGkyW1BST0pFQ1RdOwogICAgICAgIGlmIChwcm9qZWN0KSB7CiAgICAgICAgICB0aGlzLnByb2plY3QgPSBwcm9qZWN0LnJlcGxhY2UoJzonLCAnLycpOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIHByZUZvcm1ZYW1sT3B0aW9uOiBmdW5jdGlvbiBwcmVGb3JtWWFtbE9wdGlvbihuZXUsIG9sZCkgewogICAgICBpZiAobmV1ID09PSBWQUxVRVNfU1RBVEUuRk9STSAmJiB0aGlzLnZhbHVlc1lhbWwgIT09IHRoaXMucHJldmlvdXNZYW1sVmFsdWVzICYmICEhdGhpcy4kcmVmcy5jYW5jZWxNb2RhbCkgewogICAgICAgIHRoaXMuJHJlZnMuY2FuY2VsTW9kYWwuc2hvdygpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZm9ybVlhbWxPcHRpb24gPSBuZXU7CiAgICAgIH0KICAgIH0sCiAgICBmb3JtWWFtbE9wdGlvbjogZnVuY3Rpb24gZm9ybVlhbWxPcHRpb24obmV1LCBvbGQpIHsKICAgICAgc3dpdGNoIChuZXUpIHsKICAgICAgICBjYXNlIFZBTFVFU19TVEFURS5GT1JNOgogICAgICAgICAgLy8gUmV0dXJuIHRvIGZvcm0sIHJlc2V0IGV2ZXJ5dGhpbmcgYmFjayB0byBzdGFydGluZyBwb2ludAogICAgICAgICAgdGhpcy52YWx1ZXNZYW1sID0gdGhpcy5wcmV2aW91c1lhbWxWYWx1ZXM7CiAgICAgICAgICB0aGlzLnNob3dWYWx1ZXNDb21wb25lbnQgPSB0cnVlOwogICAgICAgICAgdGhpcy5zaG93UXVlc3Rpb25zID0gdHJ1ZTsKICAgICAgICAgIHRoaXMuc2hvd0RpZmYgPSBmYWxzZTsKICAgICAgICAgIGJyZWFrOwogICAgICAgIGNhc2UgVkFMVUVTX1NUQVRFLllBTUw6CiAgICAgICAgICAvLyBTaG93IHRoZSBZQU1MIHByZXZpZXcKICAgICAgICAgIGlmIChvbGQgPT09IFZBTFVFU19TVEFURS5GT1JNKSB7CiAgICAgICAgICAgIHRoaXMudmFsdWVzWWFtbCA9IGpzeWFtbC5kdW1wKHRoaXMuY2hhcnRWYWx1ZXMgfHwge30pOwogICAgICAgICAgICB0aGlzLnByZXZpb3VzWWFtbFZhbHVlcyA9IHRoaXMudmFsdWVzWWFtbDsKICAgICAgICAgIH0KICAgICAgICAgIHRoaXMuc2hvd1ZhbHVlc0NvbXBvbmVudCA9IGZhbHNlOwogICAgICAgICAgdGhpcy5zaG93UXVlc3Rpb25zID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnNob3dEaWZmID0gZmFsc2U7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIFZBTFVFU19TVEFURS5ESUZGOgogICAgICAgICAgLy8gU2hvdyB0aGUgWUFNTCBkaWZmCiAgICAgICAgICBpZiAob2xkID09PSBWQUxVRVNfU1RBVEUuRk9STSkgewogICAgICAgICAgICB0aGlzLnZhbHVlc1lhbWwgPSBqc3lhbWwuZHVtcCh0aGlzLmNoYXJ0VmFsdWVzIHx8IHt9KTsKICAgICAgICAgICAgdGhpcy5wcmV2aW91c1lhbWxWYWx1ZXMgPSB0aGlzLnZhbHVlc1lhbWw7CiAgICAgICAgICB9CiAgICAgICAgICB0aGlzLnNob3dWYWx1ZXNDb21wb25lbnQgPSBmYWxzZTsKICAgICAgICAgIHRoaXMuc2hvd1F1ZXN0aW9ucyA9IGZhbHNlOwogICAgICAgICAgdGhpcy51cGRhdGVWYWx1ZSh0aGlzLnZhbHVlc1lhbWwpOwogICAgICAgICAgdGhpcy5zaG93RGlmZiA9IHRydWU7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIHJlcXVpcmVzOiBmdW5jdGlvbiByZXF1aXJlcygpIHsKICAgICAgdGhpcy51cGRhdGVTdGVwT25lUmVhZHkoKTsKICAgIH0sCiAgICB3YXJuaW5nczogZnVuY3Rpb24gd2FybmluZ3MoKSB7CiAgICAgIHRoaXMudXBkYXRlU3RlcE9uZVJlYWR5KCk7CiAgICB9CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkgewogICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5sb2FkVmFsdWVzQ29tcG9uZW50KCk7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIF90aGlzMy5sb2FkQ2hhcnRTdGVwcygpOwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICB3aW5kb3cuc2Nyb2xsVG9wID0gMDsKICAgICAgICAgICAgX3RoaXMzLnByZUZvcm1ZYW1sT3B0aW9uID0gX3RoaXMzLnZhbHVlc0NvbXBvbmVudCB8fCBfdGhpczMuaGFzUXVlc3Rpb25zID8gVkFMVUVTX1NUQVRFLkZPUk0gOiBWQUxVRVNfU1RBVEUuWUFNTDsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICBiZWZvcmVEZXN0cm95OiBmdW5jdGlvbiBiZWZvcmVEZXN0cm95KCkgewogICAgdmFyIF90aGlzNCA9IHRoaXM7CiAgICB0aGlzLnNob3duUmVhZG1lV2luZG93cy5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHJldHVybiBfdGhpczQuJHN0b3JlLmRpc3BhdGNoKCd3bS9jbG9zZScsIG5hbWUsIHsKICAgICAgICByb290OiB0cnVlCiAgICAgIH0pOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBnZXRDbHVzdGVyUmVnaXN0cnk6IGZ1bmN0aW9uIGdldENsdXN0ZXJSZWdpc3RyeSgpIHsKICAgICAgdmFyIF90aGlzNSA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBoYXNQZXJtaXNzaW9uVG9TZWVQcm92Q2x1c3RlciwgX3Byb3ZDbHVzdGVyLCBfcHJvdkNsdXN0ZXIyLCBtZ21DbHVzdGVyLCBwcm92Q2x1c3RlcklkLCBwcm92Q2x1c3RlciwgX3Byb3ZDbHVzdGVyJHNwZWMsIGFnZW50Q29uZmlnLCBjbHVzdGVyUmVnaXN0cnksIF9tZ21DbHVzdGVyJHNwZWMsIHJrZTFSZWdpc3RyaWVzLCBkZWZhdWx0UmVnaXN0cnk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgIGhhc1Blcm1pc3Npb25Ub1NlZVByb3ZDbHVzdGVyID0gX3RoaXM1LiRzdG9yZS5nZXR0ZXJzWyJtYW5hZ2VtZW50L3NjaGVtYUZvciJdKENBUEkuUkFOQ0hFUl9DTFVTVEVSKTsKICAgICAgICAgICAgICBpZiAoIWhhc1Blcm1pc3Npb25Ub1NlZVByb3ZDbHVzdGVyKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIG1nbUNsdXN0ZXIgPSBfdGhpczUuJHN0b3JlLmdldHRlcnNbJ2N1cnJlbnRDbHVzdGVyJ107CiAgICAgICAgICAgICAgcHJvdkNsdXN0ZXJJZCA9IG1nbUNsdXN0ZXIgPT09IG51bGwgfHwgbWdtQ2x1c3RlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogbWdtQ2x1c3Rlci5wcm92Q2x1c3RlcklkOwogICAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gNDsKICAgICAgICAgICAgICBpZiAoIXByb3ZDbHVzdGVySWQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTE7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSA4OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczUuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmQnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBDQVBJLlJBTkNIRVJfQ0xVU1RFUiwKICAgICAgICAgICAgICAgIGlkOiBwcm92Q2x1c3RlcklkCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICBfY29udGV4dDMudDAgPSBfY29udGV4dDMuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDEyOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDExOgogICAgICAgICAgICAgIF9jb250ZXh0My50MCA9IHt9OwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIHByb3ZDbHVzdGVyID0gX2NvbnRleHQzLnQwOwogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTg7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxNTsKICAgICAgICAgICAgICBfY29udGV4dDMudDEgPSBfY29udGV4dDNbImNhdGNoIl0oNCk7CiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcigiVW5hYmxlIHRvIGZldGNoIHByb3YgY2x1c3RlciAnIi5jb25jYXQocHJvdkNsdXN0ZXJJZCwgIic6ICIpLCBfY29udGV4dDMudDEpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICBpZiAoISgoX3Byb3ZDbHVzdGVyID0gcHJvdkNsdXN0ZXIpICE9PSBudWxsICYmIF9wcm92Q2x1c3RlciAhPT0gdm9pZCAwICYmIF9wcm92Q2x1c3Rlci5pc1JrZTIpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIzOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIGlzUmtlMiByZXR1cm5zIHRydWUgZm9yIGJvdGggUktFMiBhbmQgSzNzIGNsdXN0ZXJzLgogICAgICAgICAgICAgIGFnZW50Q29uZmlnID0gKF9wcm92Q2x1c3RlciRzcGVjID0gcHJvdkNsdXN0ZXIuc3BlYykgPT09IG51bGwgfHwgX3Byb3ZDbHVzdGVyJHNwZWMgPT09IHZvaWQgMCB8fCAoX3Byb3ZDbHVzdGVyJHNwZWMgPSBfcHJvdkNsdXN0ZXIkc3BlYy5ya2VDb25maWcpID09PSBudWxsIHx8IF9wcm92Q2x1c3RlciRzcGVjID09PSB2b2lkIDAgfHwgKF9wcm92Q2x1c3RlciRzcGVjID0gX3Byb3ZDbHVzdGVyJHNwZWMubWFjaGluZVNlbGVjdG9yQ29uZmlnKSA9PT0gbnVsbCB8fCBfcHJvdkNsdXN0ZXIkc3BlYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3Byb3ZDbHVzdGVyJHNwZWMuZmluZChmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgICAgcmV0dXJuICF4Lm1hY2hpbmVMYWJlbFNlbGVjdG9yOwogICAgICAgICAgICAgIH0pLmNvbmZpZzsgLy8gSWYgYSBjbHVzdGVyIHNjb3BlZCByZWdpc3RyeSBleGlzdHMsCiAgICAgICAgICAgICAgLy8gaXQgc2hvdWxkIGJlIHVzZWQgYnkgZGVmYXVsdC4KICAgICAgICAgICAgICBjbHVzdGVyUmVnaXN0cnkgPSAoYWdlbnRDb25maWcgPT09IG51bGwgfHwgYWdlbnRDb25maWcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGFnZW50Q29uZmlnWydzeXN0ZW0tZGVmYXVsdC1yZWdpc3RyeSddKSB8fCAnJzsKICAgICAgICAgICAgICBpZiAoIWNsdXN0ZXJSZWdpc3RyeSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgY2x1c3RlclJlZ2lzdHJ5KTsKICAgICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgICBpZiAoISgoX3Byb3ZDbHVzdGVyMiA9IHByb3ZDbHVzdGVyKSAhPT0gbnVsbCAmJiBfcHJvdkNsdXN0ZXIyICE9PSB2b2lkIDAgJiYgX3Byb3ZDbHVzdGVyMi5pc1JrZTEpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIEZvciBSS0UxIGNsdXN0ZXJzLCB0aGUgY2x1c3RlciBzY29wZWQgcHJpdmF0ZSByZWdpc3RyeSBpcyBvbiB0aGUgbWFuYWdlbWVudAogICAgICAgICAgICAgIC8vIGNsdXN0ZXIsIG5vdCB0aGUgcHJvdmlzaW9uaW5nIGNsdXN0ZXIuCiAgICAgICAgICAgICAgcmtlMVJlZ2lzdHJpZXMgPSBtZ21DbHVzdGVyID09PSBudWxsIHx8IG1nbUNsdXN0ZXIgPT09IHZvaWQgMCB8fCAoX21nbUNsdXN0ZXIkc3BlYyA9IG1nbUNsdXN0ZXIuc3BlYykgPT09IG51bGwgfHwgX21nbUNsdXN0ZXIkc3BlYyA9PT0gdm9pZCAwIHx8IChfbWdtQ2x1c3RlciRzcGVjID0gX21nbUNsdXN0ZXIkc3BlYy5yYW5jaGVyS3ViZXJuZXRlc0VuZ2luZUNvbmZpZykgPT09IG51bGwgfHwgX21nbUNsdXN0ZXIkc3BlYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX21nbUNsdXN0ZXIkc3BlYy5wcml2YXRlUmVnaXN0cmllczsKICAgICAgICAgICAgICBpZiAoISgocmtlMVJlZ2lzdHJpZXMgPT09IG51bGwgfHwgcmtlMVJlZ2lzdHJpZXMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJrZTFSZWdpc3RyaWVzLmxlbmd0aCkgPiAwKSkgewogICAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAyODsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBkZWZhdWx0UmVnaXN0cnkgPSBya2UxUmVnaXN0cmllcy5maW5kKGZ1bmN0aW9uIChyZWdpc3RyeSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHJlZ2lzdHJ5LmlzRGVmYXVsdDsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgZGVmYXVsdFJlZ2lzdHJ5LnVybCk7CiAgICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbNCwgMTVdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGdldEdsb2JhbFJlZ2lzdHJ5OiBmdW5jdGlvbiBnZXRHbG9iYWxSZWdpc3RyeSgpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU0KCkgewogICAgICAgIHZhciBnbG9iYWxSZWdpc3RyeTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ0LnByZXYgPSBfY29udGV4dDQubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ0Lm5leHQgPSAyOwogICAgICAgICAgICAgIHJldHVybiBfdGhpczYuJHN0b3JlLmRpc3BhdGNoKCdtYW5hZ2VtZW50L2ZpbmQnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBNQU5BR0VNRU5ULlNFVFRJTkcsCiAgICAgICAgICAgICAgICBpZDogJ3N5c3RlbS1kZWZhdWx0LXJlZ2lzdHJ5JwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgZ2xvYmFsUmVnaXN0cnkgPSBfY29udGV4dDQuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ0LmFicnVwdCgicmV0dXJuIiwgZ2xvYmFsUmVnaXN0cnkudmFsdWUpOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0NC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICB1cGRhdGVWYWx1ZTogZnVuY3Rpb24gdXBkYXRlVmFsdWUodmFsdWUpIHsKICAgICAgaWYgKHRoaXMuJHJlZnMueWFtbCkgewogICAgICAgIHRoaXMuJHJlZnMueWFtbC51cGRhdGVWYWx1ZSh2YWx1ZSk7CiAgICAgIH0KICAgIH0sCiAgICBsb2FkVmFsdWVzQ29tcG9uZW50OiBmdW5jdGlvbiBsb2FkVmFsdWVzQ29tcG9uZW50KCkgewogICAgICB2YXIgX3RoaXM3ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIF90aGlzNyR2ZXJzaW9uOwogICAgICAgIHZhciBjb21wb25lbnQsIGhhc0NoYXJ0Q29tcG9uZW50LCBfbG9hZGVkJGRlZmF1bHQsIGxvYWRlZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTUkKF9jb250ZXh0NSkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgLy8gVGhlIGNvbnN0IGNvbXBvbmVudCBpcyBhIHN0cmluZywgZm9yIGV4YW1wbGUsICdtb25pdG9yaW5nJy4KICAgICAgICAgICAgICBjb21wb25lbnQgPSAoX3RoaXM3JHZlcnNpb24gPSBfdGhpczcudmVyc2lvbikgPT09IG51bGwgfHwgX3RoaXM3JHZlcnNpb24gPT09IHZvaWQgMCB8fCAoX3RoaXM3JHZlcnNpb24gPSBfdGhpczckdmVyc2lvbi5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3RoaXM3JHZlcnNpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzNyR2ZXJzaW9uW0NBVEFMT0dfQU5OT1RBVElPTlMuQ09NUE9ORU5UXTsgLy8gTG9hZCBhIHZhbHVlcyBjb21wb25lbnQgZm9yIHRoZSBVSSBpZiBpdCBpcyBuYW1lZCBpbiB0aGUgSGVsbSBjaGFydC4KICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ1Lm5leHQgPSAxNzsKICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBoYXNDaGFydENvbXBvbmVudCA9IF90aGlzNy4kc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvaGFzQ3VzdG9tQ2hhcnQnXShjb21wb25lbnQpOwogICAgICAgICAgICAgIGlmICghaGFzQ2hhcnRDb21wb25lbnQpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX3RoaXM3LnZhbHVlc0NvbXBvbmVudCA9IF90aGlzNy4kc3RvcmUuZ2V0dGVyc1sndHlwZS1tYXAvaW1wb3J0Q2hhcnQnXShjb21wb25lbnQpOwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gNzsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM3LnZhbHVlc0NvbXBvbmVudCgpOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgbG9hZGVkID0gX2NvbnRleHQ1LnNlbnQ7CiAgICAgICAgICAgICAgX3RoaXM3LnNob3dWYWx1ZXNDb21wb25lbnQgPSB0cnVlOwogICAgICAgICAgICAgIF90aGlzNy5jb21wb25lbnRIYXNUYWJzID0gKGxvYWRlZCA9PT0gbnVsbCB8fCBsb2FkZWQgPT09IHZvaWQgMCB8fCAoX2xvYWRlZCRkZWZhdWx0ID0gbG9hZGVkLmRlZmF1bHQpID09PSBudWxsIHx8IF9sb2FkZWQkZGVmYXVsdCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2xvYWRlZCRkZWZhdWx0Lmhhc1RhYnMpIHx8IGZhbHNlOwogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgX3RoaXM3LnZhbHVlc0NvbXBvbmVudCA9IG51bGw7CiAgICAgICAgICAgICAgX3RoaXM3LmNvbXBvbmVudEhhc1RhYnMgPSBmYWxzZTsKICAgICAgICAgICAgICBfdGhpczcuc2hvd1ZhbHVlc0NvbXBvbmVudCA9IGZhbHNlOwogICAgICAgICAgICBjYXNlIDE1OgogICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIGNhc2UgMTc6CiAgICAgICAgICAgICAgX3RoaXM3LnZhbHVlc0NvbXBvbmVudCA9IG51bGw7CiAgICAgICAgICAgICAgX3RoaXM3LmNvbXBvbmVudEhhc1RhYnMgPSBmYWxzZTsKICAgICAgICAgICAgICBfdGhpczcuc2hvd1ZhbHVlc0NvbXBvbmVudCA9IGZhbHNlOwogICAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDUuc3RvcCgpOwogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAogICAgbG9hZENoYXJ0U3RlcHM6IGZ1bmN0aW9uIGxvYWRDaGFydFN0ZXBzKCkgewogICAgICB2YXIgX3RoaXM4ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTYoKSB7CiAgICAgICAgdmFyIF90aGlzOCR2ZXJzaW9uOwogICAgICAgIHZhciBjb21wb25lbnQsIHN0ZXBzOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNiQoX2NvbnRleHQ2KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDYucHJldiA9IF9jb250ZXh0Ni5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBjb21wb25lbnQgPSAoX3RoaXM4JHZlcnNpb24gPSBfdGhpczgudmVyc2lvbikgPT09IG51bGwgfHwgX3RoaXM4JHZlcnNpb24gPT09IHZvaWQgMCB8fCAoX3RoaXM4JHZlcnNpb24gPSBfdGhpczgkdmVyc2lvbi5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3RoaXM4JHZlcnNpb24gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzOCR2ZXJzaW9uW0NBVEFMT0dfQU5OT1RBVElPTlMuQ09NUE9ORU5UXTsKICAgICAgICAgICAgICBpZiAoIWNvbXBvbmVudCkgewogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSA4OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gNDsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM4LiRzdG9yZS5nZXR0ZXJzWydjYXRhbG9nL2NoYXJ0U3RlcHMnXShjb21wb25lbnQpOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgc3RlcHMgPSBfY29udGV4dDYuc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDYubmV4dCA9IDc7CiAgICAgICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKHN0ZXBzLm1hcChmdW5jdGlvbiAoY3MpIHsKICAgICAgICAgICAgICAgIHJldHVybiBfdGhpczgubG9hZENoYXJ0U3RlcChjcyk7CiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgX3RoaXM4LmN1c3RvbVN0ZXBzID0gX2NvbnRleHQ2LnNlbnQ7CiAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ2LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlNik7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGxvYWRDaGFydFN0ZXA6IGZ1bmN0aW9uIGxvYWRDaGFydFN0ZXAoY3VzdG9tU3RlcCkgewogICAgICB2YXIgX3RoaXM5ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTcoKSB7CiAgICAgICAgdmFyIF9sb2FkZWQkZGVmYXVsdDIsIF9sb2FkZWQkZGVmYXVsdDMsIF9sb2FkZWQkZGVmYXVsdDQ7CiAgICAgICAgdmFyIGxvYWRlZCwgd2l0aEZhbGxCYWNrOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlNyQoX2NvbnRleHQ3KSB7CiAgICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDI7CiAgICAgICAgICAgICAgcmV0dXJuIGN1c3RvbVN0ZXAuY29tcG9uZW50KCk7CiAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICBsb2FkZWQgPSBfY29udGV4dDcuc2VudDsKICAgICAgICAgICAgICB3aXRoRmFsbEJhY2sgPSBfdGhpczkuJHN0b3JlLmdldHRlcnNbJ2kxOG4vd2l0aEZhbGxiYWNrJ107CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5hYnJ1cHQoInJldHVybiIsIHsKICAgICAgICAgICAgICAgIG5hbWU6IGN1c3RvbVN0ZXAubmFtZSwKICAgICAgICAgICAgICAgIGxhYmVsOiB3aXRoRmFsbEJhY2sobG9hZGVkID09PSBudWxsIHx8IGxvYWRlZCA9PT0gdm9pZCAwIHx8IChfbG9hZGVkJGRlZmF1bHQyID0gbG9hZGVkLmRlZmF1bHQpID09PSBudWxsIHx8IF9sb2FkZWQkZGVmYXVsdDIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9sb2FkZWQkZGVmYXVsdDIubGFiZWwsIG51bGwsIGN1c3RvbVN0ZXAubmFtZSksCiAgICAgICAgICAgICAgICBzdWJ0ZXh0OiB3aXRoRmFsbEJhY2sobG9hZGVkID09PSBudWxsIHx8IGxvYWRlZCA9PT0gdm9pZCAwIHx8IChfbG9hZGVkJGRlZmF1bHQzID0gbG9hZGVkLmRlZmF1bHQpID09PSBudWxsIHx8IF9sb2FkZWQkZGVmYXVsdDMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9sb2FkZWQkZGVmYXVsdDMuc3VidGV4dCwgbnVsbCwgJycpLAogICAgICAgICAgICAgICAgd2VpZ2h0OiBsb2FkZWQgPT09IG51bGwgfHwgbG9hZGVkID09PSB2b2lkIDAgfHwgKF9sb2FkZWQkZGVmYXVsdDQgPSBsb2FkZWQuZGVmYXVsdCkgPT09IG51bGwgfHwgX2xvYWRlZCRkZWZhdWx0NCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2xvYWRlZCRkZWZhdWx0NC53ZWlnaHQsCiAgICAgICAgICAgICAgICByZWFkeTogZmFsc2UsCiAgICAgICAgICAgICAgICBoaWRkZW46IHRydWUsCiAgICAgICAgICAgICAgICBsb2FkaW5nOiB0cnVlLAogICAgICAgICAgICAgICAgY29tcG9uZW50OiBjdXN0b21TdGVwLmNvbXBvbmVudAogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0Ny5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTcpOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBzZWxlY3RDaGFydDogZnVuY3Rpb24gc2VsZWN0Q2hhcnQoY2hhcnQpIHsKICAgICAgaWYgKCFjaGFydCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0aGlzLiRyb3V0ZXIuYXBwbHlRdWVyeShfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoe30sIFJFUE8sIGNoYXJ0LnJlcG9OYW1lKSwgUkVQT19UWVBFLCBjaGFydC5yZXBvVHlwZSksIENIQVJULCBjaGFydC5jaGFydE5hbWUpLCBWRVJTSU9OLCBjaGFydC52ZXJzaW9uc1swXS52ZXJzaW9uKSk7CiAgICB9LAogICAgY2FuY2VsOiBmdW5jdGlvbiBjYW5jZWwoKSB7CiAgICAgIGlmICh0aGlzLmV4aXN0aW5nKSB7CiAgICAgICAgdGhpcy5kb25lKCk7CiAgICAgIH0gZWxzZSBpZiAodGhpcy4kcm91dGUucXVlcnlbRlJPTV9UT09MU10gPT09IF9GTEFHR0VEKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UodGhpcy5jbHVzdGVyVG9vbHNMb2NhdGlvbigpKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLiRyb3V0ZS5xdWVyeVtGUk9NX0NMVVNURVJdID09PSBfRkxBR0dFRCkgewogICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHRoaXMuY2x1c3RlcnNMb2NhdGlvbigpKTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh0aGlzLmNoYXJ0TG9jYXRpb24oZmFsc2UpKTsKICAgICAgfQogICAgfSwKICAgIGRvbmU6IGZ1bmN0aW9uIGRvbmUoKSB7CiAgICAgIGlmICh0aGlzLiRyb3V0ZS5xdWVyeVtGUk9NX1RPT0xTXSA9PT0gX0ZMQUdHRUQpIHsKICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh0aGlzLmNsdXN0ZXJUb29sc0xvY2F0aW9uKCkpOwogICAgICB9IGVsc2UgaWYgKHRoaXMuJHJvdXRlLnF1ZXJ5W0ZST01fQ0xVU1RFUl0gPT09IF9GTEFHR0VEKSB7CiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UodGhpcy5jbHVzdGVyc0xvY2F0aW9uKCkpOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIElmIHRoZSBjcmVhdGUgYXBwIHByb2Nlc3MgZmFpbHMgaGVsbSB2YWxpZGF0aW9uIHRoZW4gd2Ugc3RpbGwgZ2V0IGhlcmUuLi4gc28gdW50aWwgdGhpcyBpcyBmaXhlZCBuZXcgYXBwcyB3aWxsIGJlIHRha2VuIHRvIHRoZQogICAgICAgIC8vIGdlbmVyaWMgYXBwcyBsaXN0IChleGlzdGluZyBhcHBzIHdpbGwgYmUgdGFrZW4gdG8gdGhlaXIgZGV0YWlsIHBhZ2UpCiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2UodGhpcy5hcHBMb2NhdGlvbigpKTsKICAgICAgfQogICAgfSwKICAgIGZpbmlzaDogZnVuY3Rpb24gZmluaXNoKGJ0bkNiKSB7CiAgICAgIHZhciBfdGhpczEwID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIGlzVXBncmFkZSwgX3RoaXMxMCRhY3Rpb25JbnB1dCwgZXJyb3JzLCBpbnB1dCwgcmVzLCBvcGVyYXRpb25JZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTgkKF9jb250ZXh0OCkgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgX2NvbnRleHQ4LnByZXYgPSAwOwogICAgICAgICAgICAgIGlzVXBncmFkZSA9ICEhX3RoaXMxMC5leGlzdGluZzsKICAgICAgICAgICAgICBfdGhpczEwLmVycm9ycyA9IFtdOwogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5hcHBseUhvb2tzKEJFRk9SRV9TQVZFX0hPT0tTKTsKICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgIF90aGlzMTAkYWN0aW9uSW5wdXQgPSBfdGhpczEwLmFjdGlvbklucHV0KGlzVXBncmFkZSksIGVycm9ycyA9IF90aGlzMTAkYWN0aW9uSW5wdXQuZXJyb3JzLCBpbnB1dCA9IF90aGlzMTAkYWN0aW9uSW5wdXQuaW5wdXQ7CiAgICAgICAgICAgICAgaWYgKCEoZXJyb3JzICE9PSBudWxsICYmIGVycm9ycyAhPT0gdm9pZCAwICYmIGVycm9ycy5sZW5ndGgpKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF90aGlzMTAuZXJyb3JzID0gZXJyb3JzOwogICAgICAgICAgICAgIGJ0bkNiKGZhbHNlKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ4LmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxMjsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC5yZXBvLmRvQWN0aW9uKGlzVXBncmFkZSA/ICd1cGdyYWRlJyA6ICdpbnN0YWxsJywgaW5wdXQpOwogICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0OC5zZW50OwogICAgICAgICAgICAgIG9wZXJhdGlvbklkID0gIiIuY29uY2F0KHJlcy5vcGVyYXRpb25OYW1lc3BhY2UsICIvIikuY29uY2F0KHJlcy5vcGVyYXRpb25OYW1lKTsgLy8gTm9uLWFkbWlucyB3aXRob3V0IGEgY2x1c3RlciB3b24ndCBiZSBhYmxlIHRvIGZldGNoIG9wZXJhdGlvbnMgaW1tZWRpYXRlbHkKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDE2OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLnJlcG8ud2FpdEZvck9wZXJhdGlvbihvcGVyYXRpb25JZCk7CiAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxODsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXMxMC4kc3RvcmUuZGlzcGF0Y2goIiIuY29uY2F0KF90aGlzMTAuaW5TdG9yZSwgIi9maW5kIiksIHsKICAgICAgICAgICAgICAgIHR5cGU6IENBVEFMT0cuT1BFUkFUSU9OLAogICAgICAgICAgICAgICAgaWQ6IG9wZXJhdGlvbklkCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNhc2UgMTg6CiAgICAgICAgICAgICAgX3RoaXMxMC5vcGVyYXRpb24gPSBfY29udGV4dDguc2VudDsKICAgICAgICAgICAgICBfY29udGV4dDgucHJldiA9IDE5OwogICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjI7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzMTAub3BlcmF0aW9uLndhaXRGb3JMaW5rKCdsb2dzJyk7CiAgICAgICAgICAgIGNhc2UgMjI6CiAgICAgICAgICAgICAgX3RoaXMxMC5vcGVyYXRpb24ub3BlbkxvZ3MoKTsKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI3OwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICBjYXNlIDI1OgogICAgICAgICAgICAgIF9jb250ZXh0OC5wcmV2ID0gMjU7CiAgICAgICAgICAgICAgX2NvbnRleHQ4LnQwID0gX2NvbnRleHQ4WyJjYXRjaCJdKDE5KTsKICAgICAgICAgICAgY2FzZSAyNzoKICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDI5OwogICAgICAgICAgICAgIHJldHVybiBfdGhpczEwLmFwcGx5SG9va3MoQUZURVJfU0FWRV9IT09LUyk7CiAgICAgICAgICAgIGNhc2UgMjk6CiAgICAgICAgICAgICAgYnRuQ2IodHJ1ZSk7CiAgICAgICAgICAgICAgX3RoaXMxMC5kb25lKCk7CiAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAzNzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAzMzoKICAgICAgICAgICAgICBfY29udGV4dDgucHJldiA9IDMzOwogICAgICAgICAgICAgIF9jb250ZXh0OC50MSA9IF9jb250ZXh0OFsiY2F0Y2giXSgwKTsKICAgICAgICAgICAgICBfdGhpczEwLmVycm9ycyA9IGV4Y2VwdGlvblRvRXJyb3JzQXJyYXkoX2NvbnRleHQ4LnQxKTsKICAgICAgICAgICAgICBidG5DYihmYWxzZSk7CiAgICAgICAgICAgIGNhc2UgMzc6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5zdG9wKCk7CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgsIG51bGwsIFtbMCwgMzNdLCBbMTksIDI1XV0pOwogICAgICB9KSkoKTsKICAgIH0sCiAgICBhZGRHbG9iYWxWYWx1ZXNUbzogZnVuY3Rpb24gYWRkR2xvYmFsVmFsdWVzVG8odmFsdWVzKSB7CiAgICAgIHZhciBfcHJvamVjdHMkZmluZCwgX3RoaXMkc2VydmVyVXJsU2V0dGluLCBfY2x1c3RlciRzcGVjLCBfY2x1c3RlciRzcGVjMjsKICAgICAgdmFyIGdsb2JhbCA9IHZhbHVlcy5nbG9iYWw7CiAgICAgIGlmICghZ2xvYmFsKSB7CiAgICAgICAgZ2xvYmFsID0ge307CiAgICAgICAgc2V0KHZhbHVlcywgJ2dsb2JhbCcsIGdsb2JhbCk7CiAgICAgIH0KICAgICAgdmFyIGNhdHRsZSA9IGdsb2JhbC5jYXR0bGU7CiAgICAgIGlmICghY2F0dGxlKSB7CiAgICAgICAgY2F0dGxlID0ge307CiAgICAgICAgc2V0KHZhbHVlcy5nbG9iYWwsICdjYXR0bGUnLCBjYXR0bGUpOwogICAgICB9CiAgICAgIHZhciBjbHVzdGVyID0gdGhpcy5jdXJyZW50Q2x1c3RlcjsKICAgICAgdmFyIHByb2plY3RzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snbWFuYWdlbWVudC9hbGwnXShNQU5BR0VNRU5ULlBST0pFQ1QpOwogICAgICB2YXIgc3lzdGVtUHJvamVjdElkID0gKChfcHJvamVjdHMkZmluZCA9IHByb2plY3RzLmZpbmQoZnVuY3Rpb24gKHApIHsKICAgICAgICB2YXIgX3Akc3BlYzsKICAgICAgICByZXR1cm4gKChfcCRzcGVjID0gcC5zcGVjKSA9PT0gbnVsbCB8fCBfcCRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcCRzcGVjLmRpc3BsYXlOYW1lKSA9PT0gJ1N5c3RlbSc7CiAgICAgIH0pKSA9PT0gbnVsbCB8fCBfcHJvamVjdHMkZmluZCA9PT0gdm9pZCAwIHx8IChfcHJvamVjdHMkZmluZCA9IF9wcm9qZWN0cyRmaW5kLmlkKSA9PT0gbnVsbCB8fCBfcHJvamVjdHMkZmluZCA9PT0gdm9pZCAwIHx8IChfcHJvamVjdHMkZmluZCA9IF9wcm9qZWN0cyRmaW5kLnNwbGl0KCcvJykpID09PSBudWxsIHx8IF9wcm9qZWN0cyRmaW5kID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfcHJvamVjdHMkZmluZFsxXSkgfHwgJyc7CiAgICAgIHZhciBzZXJ2ZXJVcmwgPSAoKF90aGlzJHNlcnZlclVybFNldHRpbiA9IHRoaXMuc2VydmVyVXJsU2V0dGluZykgPT09IG51bGwgfHwgX3RoaXMkc2VydmVyVXJsU2V0dGluID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzZXJ2ZXJVcmxTZXR0aW4udmFsdWUpIHx8ICcnOwogICAgICB2YXIgaXNXaW5kb3dzID0gKChjbHVzdGVyID09PSBudWxsIHx8IGNsdXN0ZXIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGNsdXN0ZXIud29ya2VyT1NzKSB8fCBbXSkuaW5jbHVkZXMoV0lORE9XUyk7CiAgICAgIHZhciBwYXRoUHJlZml4ID0gKGNsdXN0ZXIgPT09IG51bGwgfHwgY2x1c3RlciA9PT0gdm9pZCAwIHx8IChfY2x1c3RlciRzcGVjID0gY2x1c3Rlci5zcGVjKSA9PT0gbnVsbCB8fCBfY2x1c3RlciRzcGVjID09PSB2b2lkIDAgfHwgKF9jbHVzdGVyJHNwZWMgPSBfY2x1c3RlciRzcGVjLnJhbmNoZXJLdWJlcm5ldGVzRW5naW5lQ29uZmlnKSA9PT0gbnVsbCB8fCBfY2x1c3RlciRzcGVjID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2x1c3RlciRzcGVjLnByZWZpeFBhdGgpIHx8ICcnOwogICAgICB2YXIgd2luZG93c1BhdGhQcmVmaXggPSAoY2x1c3RlciA9PT0gbnVsbCB8fCBjbHVzdGVyID09PSB2b2lkIDAgfHwgKF9jbHVzdGVyJHNwZWMyID0gY2x1c3Rlci5zcGVjKSA9PT0gbnVsbCB8fCBfY2x1c3RlciRzcGVjMiA9PT0gdm9pZCAwIHx8IChfY2x1c3RlciRzcGVjMiA9IF9jbHVzdGVyJHNwZWMyLnJhbmNoZXJLdWJlcm5ldGVzRW5naW5lQ29uZmlnKSA9PT0gbnVsbCB8fCBfY2x1c3RlciRzcGVjMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NsdXN0ZXIkc3BlYzIud2luUHJlZml4UGF0aCkgfHwgJyc7CiAgICAgIHNldElmTm90U2V0KGNhdHRsZSwgJ2NsdXN0ZXJJZCcsIGNsdXN0ZXIgPT09IG51bGwgfHwgY2x1c3RlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2x1c3Rlci5pZCk7CiAgICAgIHNldElmTm90U2V0KGNhdHRsZSwgJ2NsdXN0ZXJOYW1lJywgY2x1c3RlciA9PT0gbnVsbCB8fCBjbHVzdGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjbHVzdGVyLm5hbWVEaXNwbGF5KTsKICAgICAgaWYgKHRoaXMuc2hvd0N1c3RvbVJlZ2lzdHJ5KSB7CiAgICAgICAgc2V0KGNhdHRsZSwgJ3N5c3RlbURlZmF1bHRSZWdpc3RyeScsIHRoaXMuY3VzdG9tUmVnaXN0cnlTZXR0aW5nKTsKICAgICAgICBzZXQoZ2xvYmFsLCAnc3lzdGVtRGVmYXVsdFJlZ2lzdHJ5JywgdGhpcy5jdXN0b21SZWdpc3RyeVNldHRpbmcpOwogICAgICB9CiAgICAgIHNldElmTm90U2V0KGdsb2JhbCwgJ2NhdHRsZS5zeXN0ZW1Qcm9qZWN0SWQnLCBzeXN0ZW1Qcm9qZWN0SWQpOwogICAgICBzZXRJZk5vdFNldChjYXR0bGUsICd1cmwnLCBzZXJ2ZXJVcmwpOwogICAgICBzZXRJZk5vdFNldChjYXR0bGUsICdya2VQYXRoUHJlZml4JywgcGF0aFByZWZpeCk7CiAgICAgIHNldElmTm90U2V0KGNhdHRsZSwgJ3JrZVdpbmRvd3NQYXRoUHJlZml4Jywgd2luZG93c1BhdGhQcmVmaXgpOwogICAgICBpZiAoaXNXaW5kb3dzKSB7CiAgICAgICAgc2V0SWZOb3RTZXQoY2F0dGxlLCAnd2luZG93cy5lbmFibGVkJywgdHJ1ZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHZhbHVlczsKICAgICAgZnVuY3Rpb24gc2V0SWZOb3RTZXQob2JqLCBrZXksIHZhbCkgewogICAgICAgIGlmICh0eXBlb2YgZ2V0KG9iaiwga2V5KSA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIHNldChvYmosIGtleSwgdmFsKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICByZW1vdmVHbG9iYWxWYWx1ZXNGcm9tOiBmdW5jdGlvbiByZW1vdmVHbG9iYWxWYWx1ZXNGcm9tKHZhbHVlcykgewogICAgICB2YXIgX3RoaXMkc2VydmVyVXJsU2V0dGluMiwgX2NsdXN0ZXIkc3BlYzMsIF9jbHVzdGVyJHNwZWM0LCBfdmFsdWVzJGdsb2JhbCwgX3ZhbHVlcyRnbG9iYWwyLCBfdmFsdWVzJGdsb2JhbDM7CiAgICAgIGlmICghdmFsdWVzKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIHZhciBjbHVzdGVyID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudENsdXN0ZXInXTsKICAgICAgdmFyIHNlcnZlclVybCA9ICgoX3RoaXMkc2VydmVyVXJsU2V0dGluMiA9IHRoaXMuc2VydmVyVXJsU2V0dGluZykgPT09IG51bGwgfHwgX3RoaXMkc2VydmVyVXJsU2V0dGluMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc2VydmVyVXJsU2V0dGluMi52YWx1ZSkgfHwgJyc7CiAgICAgIHZhciBpc1dpbmRvd3MgPSAoKGNsdXN0ZXIgPT09IG51bGwgfHwgY2x1c3RlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2x1c3Rlci53b3JrZXJPU3MpIHx8IFtdKS5pbmNsdWRlcyhXSU5ET1dTKTsKICAgICAgdmFyIHBhdGhQcmVmaXggPSAoY2x1c3RlciA9PT0gbnVsbCB8fCBjbHVzdGVyID09PSB2b2lkIDAgfHwgKF9jbHVzdGVyJHNwZWMzID0gY2x1c3Rlci5zcGVjKSA9PT0gbnVsbCB8fCBfY2x1c3RlciRzcGVjMyA9PT0gdm9pZCAwIHx8IChfY2x1c3RlciRzcGVjMyA9IF9jbHVzdGVyJHNwZWMzLnJhbmNoZXJLdWJlcm5ldGVzRW5naW5lQ29uZmlnKSA9PT0gbnVsbCB8fCBfY2x1c3RlciRzcGVjMyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NsdXN0ZXIkc3BlYzMucHJlZml4UGF0aCkgfHwgJyc7CiAgICAgIHZhciB3aW5kb3dzUGF0aFByZWZpeCA9IChjbHVzdGVyID09PSBudWxsIHx8IGNsdXN0ZXIgPT09IHZvaWQgMCB8fCAoX2NsdXN0ZXIkc3BlYzQgPSBjbHVzdGVyLnNwZWMpID09PSBudWxsIHx8IF9jbHVzdGVyJHNwZWM0ID09PSB2b2lkIDAgfHwgKF9jbHVzdGVyJHNwZWM0ID0gX2NsdXN0ZXIkc3BlYzQucmFuY2hlckt1YmVybmV0ZXNFbmdpbmVDb25maWcpID09PSBudWxsIHx8IF9jbHVzdGVyJHNwZWM0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2x1c3RlciRzcGVjNC53aW5QcmVmaXhQYXRoKSB8fCAnJzsKICAgICAgaWYgKChfdmFsdWVzJGdsb2JhbCA9IHZhbHVlcy5nbG9iYWwpICE9PSBudWxsICYmIF92YWx1ZXMkZ2xvYmFsICE9PSB2b2lkIDAgJiYgX3ZhbHVlcyRnbG9iYWwuY2F0dGxlKSB7CiAgICAgICAgZGVsZXRlSWZFcXVhbCh2YWx1ZXMuZ2xvYmFsLmNhdHRsZSwgJ2NsdXN0ZXJJZCcsIGNsdXN0ZXIgPT09IG51bGwgfHwgY2x1c3RlciA9PT0gdm9pZCAwID8gdm9pZCAwIDogY2x1c3Rlci5pZCk7CiAgICAgICAgZGVsZXRlSWZFcXVhbCh2YWx1ZXMuZ2xvYmFsLmNhdHRsZSwgJ2NsdXN0ZXJOYW1lJywgY2x1c3RlciA9PT0gbnVsbCB8fCBjbHVzdGVyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBjbHVzdGVyLm5hbWVEaXNwbGF5KTsKICAgICAgICBkZWxldGVJZkVxdWFsKHZhbHVlcy5nbG9iYWwuY2F0dGxlLCAndXJsJywgc2VydmVyVXJsKTsKICAgICAgICBkZWxldGVJZkVxdWFsKHZhbHVlcy5nbG9iYWwuY2F0dGxlLCAncmtlUGF0aFByZWZpeCcsIHBhdGhQcmVmaXgpOwogICAgICAgIGRlbGV0ZUlmRXF1YWwodmFsdWVzLmdsb2JhbC5jYXR0bGUsICdya2VXaW5kb3dzUGF0aFByZWZpeCcsIHdpbmRvd3NQYXRoUHJlZml4KTsKICAgICAgICBpZiAoaXNXaW5kb3dzKSB7CiAgICAgICAgICBkZWxldGVJZkVxdWFsKHZhbHVlcy5nbG9iYWwuY2F0dGxlLndpbmRvd3MsICdlbmFibGVkJywgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9CiAgICAgIGlmICgoX3ZhbHVlcyRnbG9iYWwyID0gdmFsdWVzLmdsb2JhbCkgIT09IG51bGwgJiYgX3ZhbHVlcyRnbG9iYWwyICE9PSB2b2lkIDAgJiYgKF92YWx1ZXMkZ2xvYmFsMiA9IF92YWx1ZXMkZ2xvYmFsMi5jYXR0bGUpICE9PSBudWxsICYmIF92YWx1ZXMkZ2xvYmFsMiAhPT0gdm9pZCAwICYmIF92YWx1ZXMkZ2xvYmFsMi53aW5kb3dzICYmICFPYmplY3Qua2V5cyh2YWx1ZXMuZ2xvYmFsLmNhdHRsZS53aW5kb3dzKS5sZW5ndGgpIHsKICAgICAgICBkZWxldGUgdmFsdWVzLmdsb2JhbC5jYXR0bGUud2luZG93czsKICAgICAgfQogICAgICBpZiAoKF92YWx1ZXMkZ2xvYmFsMyA9IHZhbHVlcy5nbG9iYWwpICE9PSBudWxsICYmIF92YWx1ZXMkZ2xvYmFsMyAhPT0gdm9pZCAwICYmIF92YWx1ZXMkZ2xvYmFsMy5jYXR0bGUgJiYgIU9iamVjdC5rZXlzKHZhbHVlcy5nbG9iYWwuY2F0dGxlKS5sZW5ndGgpIHsKICAgICAgICBkZWxldGUgdmFsdWVzLmdsb2JhbC5jYXR0bGU7CiAgICAgIH0KICAgICAgaWYgKCFPYmplY3Qua2V5cyh2YWx1ZXMuZ2xvYmFsIHx8IHt9KS5sZW5ndGgpIHsKICAgICAgICBkZWxldGUgdmFsdWVzLmdsb2JhbDsKICAgICAgfQogICAgICByZXR1cm4gdmFsdWVzOwogICAgICBmdW5jdGlvbiBkZWxldGVJZkVxdWFsKG9iaiwga2V5LCB2YWwpIHsKICAgICAgICBpZiAoZ2V0KG9iaiwga2V5KSA9PT0gdmFsKSB7CiAgICAgICAgICBkZWxldGUgb2JqW2tleV07CiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgYXBwbHlZYW1sVG9WYWx1ZXM6IGZ1bmN0aW9uIGFwcGx5WWFtbFRvVmFsdWVzKCkgewogICAgICB0cnkgewogICAgICAgIHRoaXMuY2hhcnRWYWx1ZXMgPSBqc3lhbWwubG9hZCh0aGlzLnZhbHVlc1lhbWwpOwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgZXJyb3JzOiBleGNlcHRpb25Ub0Vycm9yc0FycmF5KGVycikKICAgICAgICB9OwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgZXJyb3JzOiBbXQogICAgICB9OwogICAgfSwKICAgIC8qCiAgICAgIGFjdGlvbklucHV0IGRldGVybWluZXMgd2hhdCB2YWx1ZXMgUmFuY2hlciBmaW5hbGx5IHNlbmRzCiAgICAgIHRvIHRoZSBiYWNrZW5kIHdoZW4gaW5zdGFsbGluZyBvciB1cGdyYWRpbmcgdGhlIGFwcC4gSXQKICAgICAgaW5qZWN0cyBSYW5jaGVyLXNwZWNpZmljIHZhbHVlcyBpbnRvIHRoZSBjaGFydCB2YWx1ZXMuCiAgICAqLwogICAgYWN0aW9uSW5wdXQ6IGZ1bmN0aW9uIGFjdGlvbklucHV0KGlzVXBncmFkZSkgewogICAgICB2YXIgX3RoaXMkdmVyc2lvbkluZm81LCBfdGhpcyR2ZXJzaW9uNCwgX3RoaXMkdmVyc2lvbjU7CiAgICAgIC8qIERlZmF1bHQgdmFsdWVzIGRlZmluZWQgaW4gdGhlIEhlbG0gY2hhcnQgaXRzZWxmICovCiAgICAgIHZhciBmcm9tQ2hhcnQgPSAoKF90aGlzJHZlcnNpb25JbmZvNSA9IHRoaXMudmVyc2lvbkluZm8pID09PSBudWxsIHx8IF90aGlzJHZlcnNpb25JbmZvNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmVyc2lvbkluZm81LnZhbHVlcykgfHwge307CiAgICAgIHZhciBlcnJvcnMgPSBbXTsKICAgICAgaWYgKHRoaXMuc2hvd2luZ1lhbWwgfHwgdGhpcy5zaG93aW5nWWFtbERpZmYpIHsKICAgICAgICB2YXIgX3RoaXMkYXBwbHlZYW1sVG9WYWx1ID0gdGhpcy5hcHBseVlhbWxUb1ZhbHVlcygpLAogICAgICAgICAgeWFtbEVycm9ycyA9IF90aGlzJGFwcGx5WWFtbFRvVmFsdS5lcnJvcnM7CiAgICAgICAgZXJyb3JzLnB1c2guYXBwbHkoZXJyb3JzLCBfdG9Db25zdW1hYmxlQXJyYXkoeWFtbEVycm9ycykpOwogICAgICB9CgogICAgICAvKgogICAgICAgIE9ubHkgc2F2ZSB0aGUgdmFsdWVzIHRoYXQgZGlmZmVyIGZyb20gdGhlIGNoYXJ0J3Mgc3RhbmRhcmQgdmFsdWVzLnlhbWwuCiAgICAgICAgY2hhcnRWYWx1ZXMgaXMgY3JlYXRlZCBieSBhcHBseWluZyB0aGUgdXNlcidzIGN1c3RvbWl6ZWQgb250bwogICAgICAgIHRoZSBkZWZhdWx0IGNoYXJ0IHZhbHVlcy4KICAgICAgKi8KICAgICAgdmFyIHZhbHVlcyA9IGRpZmYoZnJvbUNoYXJ0LCB0aGlzLmNoYXJ0VmFsdWVzKTsKCiAgICAgIC8qCiAgICAgICAgUmVmZXIgdG8gdGhlIGRldmVsb3BlciBkb2NzIGF0IGRvY3MvZGV2ZWxvcGVyL2hlbG0tY2hhcnQtYXBwcy5tZAogICAgICAgIGZvciBkZXRhaWxzIG9uIHdoYXQgdmFsdWVzIGFyZSBpbmplY3RlZCBhbmQgd2hlcmUgdGhleSBjb21lIGZyb20uCiAgICAgICovCgogICAgICB0aGlzLmFkZEdsb2JhbFZhbHVlc1RvKHZhbHVlcyk7CiAgICAgIHZhciBmb3JtID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh0aGlzLnZhbHVlKSk7CgogICAgICAvKgogICAgICAgIE1pZ3JhdGVkIGFubm90YXRpb25zIGFyZSByZXF1aXJlZCB0byBhbGxvdyBhIGRlcHJlY2F0ZWQgbGVnYWN5IGFwcCB0byBiZQogICAgICAgIHVwZ3JhZGVkLgogICAgICAqLwogICAgICB2YXIgbWlncmF0ZWRBbm5vdGF0aW9ucyA9IHRoaXMubWlncmF0ZWRBcHAgPyBfZGVmaW5lUHJvcGVydHkoe30sIENBVEFMT0dfQU5OT1RBVElPTlMuTUlHUkFURUQsICd0cnVlJykgOiB7fTsKICAgICAgdmFyIGNoYXJ0ID0gewogICAgICAgIGNoYXJ0TmFtZTogdGhpcy5jaGFydC5jaGFydE5hbWUsCiAgICAgICAgdmVyc2lvbjogKChfdGhpcyR2ZXJzaW9uNCA9IHRoaXMudmVyc2lvbikgPT09IG51bGwgfHwgX3RoaXMkdmVyc2lvbjQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZlcnNpb240LnZlcnNpb24pIHx8IHRoaXMucXVlcnkudmVyc2lvbk5hbWUsCiAgICAgICAgcmVsZWFzZU5hbWU6IGZvcm0ubWV0YWRhdGEubmFtZSwKICAgICAgICBkZXNjcmlwdGlvbjogdGhpcy5jdXN0b21DbWRPcHRzLmRlc2NyaXB0aW9uLAogICAgICAgIGFubm90YXRpb25zOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1pZ3JhdGVkQW5ub3RhdGlvbnMpLCB7fSwgX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eSh7fSwgQ0FUQUxPR19BTk5PVEFUSU9OUy5TT1VSQ0VfUkVQT19UWVBFLCB0aGlzLmNoYXJ0LnJlcG9UeXBlKSwgQ0FUQUxPR19BTk5PVEFUSU9OUy5TT1VSQ0VfUkVQT19OQU1FLCB0aGlzLmNoYXJ0LnJlcG9OYW1lKSksCiAgICAgICAgdmFsdWVzOiB2YWx1ZXMKICAgICAgfTsKICAgICAgaWYgKGlzVXBncmFkZSkgewogICAgICAgIGNoYXJ0LnJlc2V0VmFsdWVzID0gdGhpcy5jbWRPcHRpb25zLnJlc2V0VmFsdWVzOwogICAgICB9CgogICAgICAvKgogICAgICAgIENvbmZpZ3VyZSBIZWxtIENMSSBvcHRpb25zIGZvciBkb2luZyB0aGUgaW5zdGFsbCBvcgogICAgICAgIHVwZ3JhZGUgb3BlcmF0aW9uLgogICAgICAqLwogICAgICB2YXIgb3V0ID0gewogICAgICAgIGNoYXJ0czogW2NoYXJ0XSwKICAgICAgICBub0hvb2tzOiB0aGlzLmNtZE9wdGlvbnMuaG9va3MgPT09IGZhbHNlLAogICAgICAgIHRpbWVvdXQ6IHRoaXMuY21kT3B0aW9ucy50aW1lb3V0ID4gMCA/ICIiLmNvbmNhdCh0aGlzLmNtZE9wdGlvbnMudGltZW91dCwgInMiKSA6IG51bGwsCiAgICAgICAgd2FpdDogdGhpcy5jbWRPcHRpb25zLndhaXQgPT09IHRydWUsCiAgICAgICAgbmFtZXNwYWNlOiBmb3JtLm1ldGFkYXRhLm5hbWVzcGFjZSwKICAgICAgICBwcm9qZWN0SWQ6IHRoaXMucHJvamVjdAogICAgICB9OwoKICAgICAgLyoKICAgICAgICBDb25maWd1cmUgSGVsbSBDTEkgb3B0aW9ucyB0aGF0IGFyZSBzcGVjaWZpYyB0bwogICAgICAgIGluc3RhbGxzIG9yIHNwZWNpZmljIHRvIHVwZ3JhZGVzLgogICAgICAqLwogICAgICBpZiAoaXNVcGdyYWRlKSB7CiAgICAgICAgb3V0LmZvcmNlID0gdGhpcy5jbWRPcHRpb25zLmZvcmNlID09PSB0cnVlOwogICAgICAgIG91dC5oaXN0b3J5TWF4ID0gdGhpcy5jbWRPcHRpb25zLmhpc3RvcnlNYXg7CiAgICAgICAgb3V0LmNsZWFudXBPbkZhaWwgPSB0aGlzLmNtZE9wdGlvbnMuY2xlYW51cE9uRmFpbDsKICAgICAgfSBlbHNlIHsKICAgICAgICBvdXQuZGlzYWJsZU9wZW5BUElWYWxpZGF0aW9uID0gdGhpcy5jbWRPcHRpb25zLm9wZW5BcGkgPT09IGZhbHNlOwogICAgICAgIG91dC5za2lwQ1JEcyA9IHRoaXMuY21kT3B0aW9ucy5jcmRzID09PSBmYWxzZTsKICAgICAgfQogICAgICB2YXIgbW9yZSA9IFtdOwogICAgICB2YXIgYXV0byA9ICgoKF90aGlzJHZlcnNpb241ID0gdGhpcy52ZXJzaW9uKSA9PT0gbnVsbCB8fCBfdGhpcyR2ZXJzaW9uNSA9PT0gdm9pZCAwIHx8IChfdGhpcyR2ZXJzaW9uNSA9IF90aGlzJHZlcnNpb241LmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfdGhpcyR2ZXJzaW9uNSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmVyc2lvbjVbQ0FUQUxPR19BTk5PVEFUSU9OUy5BVVRPX0lOU1RBTExfR1ZLXSkgfHwgJycpLnNwbGl0KC9ccyosXHMqLykuZmlsdGVyKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuICEheDsKICAgICAgfSkucmV2ZXJzZSgpOwogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIoYXV0byksCiAgICAgICAgX3N0ZXA7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBndnIgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIHZhciBwcm92aWRlciA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2NhdGFsb2cvdmVyc2lvblByb3ZpZGluZyddKHsKICAgICAgICAgICAgZ3ZyOiBndnIsCiAgICAgICAgICAgIHJlcG9OYW1lOiB0aGlzLmNoYXJ0LnJlcG9OYW1lLAogICAgICAgICAgICByZXBvVHlwZTogdGhpcy5jaGFydC5yZXBvVHlwZQogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAocHJvdmlkZXIpIHsKICAgICAgICAgICAgbW9yZS5wdXNoKHByb3ZpZGVyKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGVycm9ycy5wdXNoKCJUaGlzIGNoYXJ0IHJlcXVpcmVzIGFub3RoZXIgY2hhcnQgdGhhdCBwcm92aWRlcyAiLmNvbmNhdChndnIsICIsIGJ1dCBub25lIHdhcyB3YXMgZm91bmQiKSk7CiAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKiBDaGFydCBjdXN0b20gVUkgY29tcG9uZW50cyBoYXZlIHRoZSBhYmlsaXR5IHRvIGVkaXQgQ1JEIGNoYXJ0IHZhbHVlcyBlZyBnYXRla2VlcGVyLWNyZCBoYXMgdmFsdWVzLmVuYWJsZVJ1bnRpbWVEZWZhdWx0U2VjY29tcFByb2ZpbGUKICAgICAgICAgIGxpa2UgdGhlIG1haW4gY2hhcnQsIG9ubHkgQ1JEIHZhbHVlcyB0aGF0IGRpZmZlciBmcm9tIGRlZmF1bHRzIHNob3VsZCBiZSBzZW50IG9uIGluc3RhbGwvdXBncmFkZQogICAgICAgICAgQ1JEcyBzaG91bGQgYmUgaW5zdGFsbGVkIHdpdGggdGhlIHNhbWUgZ2xvYmFsIHZhbHVlcyBhcyB0aGUgbWFpbiBjaGFydAogICAgICAgICovCiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQogICAgICB2YXIgX2l0ZXJhdG9yMiA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHRoaXMuYXV0b0luc3RhbGxJbmZvKSwKICAgICAgICBfc3RlcDI7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IyLnMoKTsgIShfc3RlcDIgPSBfaXRlcmF0b3IyLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciB2ZXJzaW9uSW5mbyA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgIC8vIGFsbFZhbHVlcyBhcmUgdGhlIHZhbHVlcyBwb3RlbnRpYWxseSBjaGFuZ2VkIGluIHRoZSBpbnN0YWxsYXRpb24gdWk6IGFueSBwcmV2aW91c2x5IGN1c3RvbWl6ZWQgdmFsdWVzICsgZGVmYXVsdHMKICAgICAgICAgIC8vIHZhbHVlcyBhcmUgZGVmYXVsdCB2YWx1ZXMgZnJvbSB0aGUgY2hhcnQKICAgICAgICAgIHZhciBhbGxWYWx1ZXMgPSB2ZXJzaW9uSW5mby5hbGxWYWx1ZXMsCiAgICAgICAgICAgIGNyZFZhbHVlcyA9IHZlcnNpb25JbmZvLnZhbHVlczsKCiAgICAgICAgICAvLyBvbmx5IHNhdmUgY3JkIHZhbHVlcyB0aGF0IGRpZmZlciBmcm9tIHRoZSBkZWZhdWx0cyBkZWZpbmVkIGluIGNoYXJ0IHZhbHVlcy55YW1sCiAgICAgICAgICB2YXIgY3VzdG9taXplZENyZFZhbHVlcyA9IGRpZmYoY3JkVmFsdWVzLCBhbGxWYWx1ZXMpOwoKICAgICAgICAgIC8vIENSRCBnbG9iYWxzIHNob3VsZCBiZSBvdmVyd3JpdHRlbiBieSBtYWluIGNoYXJ0IGdsb2JhbHMKICAgICAgICAgIC8vIHdlIHdhbnQgdG8gYXZvaWQgaW5jbHVkaW5nIGdsb2JhbHMgcHJlc2VudCBvbiBjcmQgdmFsdWVzIGFuZCBub3QgbWFpbiBjaGFydCB2YWx1ZXMKICAgICAgICAgIC8vIHRoYXQgY292ZXJzIHRoZSBzY2VuYXJpbyB3aGVyZSBhIGdsb2JhbCB2YWx1ZSB3YXMgY3VzdG9taXplZCBvbiBhIHByZXZpb3VzIGluc3RhbGwgKGFuZCBzbyBpcyBwcmVzZW50IGluIGNyZCBnbG9iYWwgdmFscykgYW5kIHRoZSB1c2VyIGhhcyByZXZlcnRlZCBpdCB0byBkZWZhdWx0IG9uIHRoaXMgdXBkYXRlIChubyBsb25nZXIgcHJlc2VudCBpbiBtYWluIGNoYXJ0IGdsb2JhbCB2YWxzKQogICAgICAgICAgdmFyIGNyZFZhbHVlc1RvSW5zdGFsbCA9IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgY3VzdG9taXplZENyZFZhbHVlcyksIHt9LCB7CiAgICAgICAgICAgIGdsb2JhbDogdmFsdWVzLmdsb2JhbAogICAgICAgICAgfSk7CiAgICAgICAgICBvdXQuY2hhcnRzLnVuc2hpZnQoewogICAgICAgICAgICBjaGFydE5hbWU6IHZlcnNpb25JbmZvLmNoYXJ0Lm5hbWUsCiAgICAgICAgICAgIHZlcnNpb246IHZlcnNpb25JbmZvLmNoYXJ0LnZlcnNpb24sCiAgICAgICAgICAgIHJlbGVhc2VOYW1lOiB2ZXJzaW9uSW5mby5jaGFydC5hbm5vdGF0aW9uc1tDQVRBTE9HX0FOTk9UQVRJT05TLlJFTEVBU0VfTkFNRV0gfHwgY2hhcnQubmFtZSwKICAgICAgICAgICAgcHJvamVjdElkOiB0aGlzLnByb2plY3QsCiAgICAgICAgICAgIHZhbHVlczogY3JkVmFsdWVzVG9JbnN0YWxsCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgLyoKICAgICAgICAgICdtb3JlJyBjb250YWlucyBhZGRpdGlvbmFsCiAgICAgICAgICBjaGFydHMgdGhhdCBtYXkgbm90IGJlIENSRCBjaGFydHMgYnV0IGFyZSBhbHNvIG1lYW50IHRvIGJlIGluc3RhbGxlZCBhdAogICAgICAgICAgdGhlIHNhbWUgdGltZS4KICAgICAgICAqLwogICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgfSBmaW5hbGx5IHsKICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgfQogICAgICBmb3IgKHZhciBfaSA9IDAsIF9tb3JlID0gbW9yZTsgX2kgPCBfbW9yZS5sZW5ndGg7IF9pKyspIHsKICAgICAgICB2YXIgZGVwZW5kZW5jeSA9IF9tb3JlW19pXTsKICAgICAgICBvdXQuY2hhcnRzLnVuc2hpZnQoewogICAgICAgICAgY2hhcnROYW1lOiBkZXBlbmRlbmN5Lm5hbWUsCiAgICAgICAgICB2ZXJzaW9uOiBkZXBlbmRlbmN5LnZlcnNpb24sCiAgICAgICAgICByZWxlYXNlTmFtZTogZGVwZW5kZW5jeS5hbm5vdGF0aW9uc1tDQVRBTE9HX0FOTk9UQVRJT05TLlJFTEVBU0VfTkFNRV0gfHwgZGVwZW5kZW5jeS5uYW1lLAogICAgICAgICAgcHJvamVjdElkOiB0aGlzLnByb2plY3QsCiAgICAgICAgICB2YWx1ZXM6IHRoaXMuYWRkR2xvYmFsVmFsdWVzVG8oewogICAgICAgICAgICBnbG9iYWw6IHZhbHVlcy5nbG9iYWwKICAgICAgICAgIH0pLAogICAgICAgICAgYW5ub3RhdGlvbnM6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWlncmF0ZWRBbm5vdGF0aW9ucyksIHt9LCBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KHt9LCBDQVRBTE9HX0FOTk9UQVRJT05TLlNPVVJDRV9SRVBPX1RZUEUsIGRlcGVuZGVuY3kucmVwb1R5cGUpLCBDQVRBTE9HX0FOTk9UQVRJT05TLlNPVVJDRV9SRVBPX05BTUUsIGRlcGVuZGVuY3kucmVwb05hbWUpKQogICAgICAgIH0pOwogICAgICB9CiAgICAgIHJldHVybiB7CiAgICAgICAgZXJyb3JzOiBlcnJvcnMsCiAgICAgICAgaW5wdXQ6IG91dAogICAgICB9OwogICAgfSwKICAgIHRhYkNoYW5nZWQ6IGZ1bmN0aW9uIHRhYkNoYW5nZWQoKSB7CiAgICAgIHdpbmRvdy5zY3JvbGxUb3AgPSAwOwogICAgfSwKICAgIHVwZGF0ZVN0ZXBPbmVSZWFkeTogZnVuY3Rpb24gdXBkYXRlU3RlcE9uZVJlYWR5KCkgewogICAgICB2YXIgb2tSZXF1aXJlcyA9ICF0aGlzLnJlcXVpcmVzLmxlbmd0aDsKICAgICAgdmFyIG9rQ2hhcnQgPSAhIXRoaXMuY2hhcnQ7CiAgICAgIHRoaXMuc3RlcHNbMF0ucmVhZHkgPSBva1JlcXVpcmVzICYmIG9rQ2hhcnQ7CiAgICB9LAogICAgdXBkYXRlU3RlcFR3b1JlYWR5OiBmdW5jdGlvbiB1cGRhdGVTdGVwVHdvUmVhZHkodXBkYXRlKSB7CiAgICAgIHRoaXMudXBkYXRlU3RlcCgnaGVsbVZhbHVlcycsIHsKICAgICAgICByZWFkeTogdXBkYXRlCiAgICAgIH0pOwogICAgfSwKICAgIGdldE9wdGlvbkxhYmVsOiBmdW5jdGlvbiBnZXRPcHRpb25MYWJlbChvcHQpIHsKICAgICAgcmV0dXJuIG9wdCA9PT0gbnVsbCB8fCBvcHQgPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9wdC5jaGFydE5hbWVEaXNwbGF5OwogICAgfSwKICAgIHNob3dSZWFkbWVXaW5kb3c6IGZ1bmN0aW9uIHNob3dSZWFkbWVXaW5kb3coKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCd3bS9vcGVuJywgewogICAgICAgIGlkOiB0aGlzLnJlYWRtZVdpbmRvd05hbWUsCiAgICAgICAgbGFiZWw6IHRoaXMucmVhZG1lV2luZG93TmFtZSwKICAgICAgICBpY29uOiAnZmlsZScsCiAgICAgICAgY29tcG9uZW50OiAnQ2hhcnRSZWFkbWUnLAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICB2ZXJzaW9uSW5mbzogdGhpcy52ZXJzaW9uSW5mbwogICAgICAgIH0KICAgICAgfSwgewogICAgICAgIHJvb3Q6IHRydWUKICAgICAgfSk7CiAgICAgIHRoaXMuc2hvd25SZWFkbWVXaW5kb3dzLnB1c2godGhpcy5yZWFkbWVXaW5kb3dOYW1lKTsKICAgIH0sCiAgICB1cGRhdGVTdGVwOiBmdW5jdGlvbiB1cGRhdGVTdGVwKHN0ZXBOYW1lLCB1cGRhdGUpIHsKICAgICAgdmFyIHN0ZXAgPSB0aGlzLnN0ZXBzLmZpbmQoZnVuY3Rpb24gKHN0ZXApIHsKICAgICAgICByZXR1cm4gc3RlcC5uYW1lID09PSBzdGVwTmFtZTsKICAgICAgfSk7CiAgICAgIGlmIChzdGVwKSB7CiAgICAgICAgZm9yICh2YXIgcHJvcCBpbiB1cGRhdGUpIHsKICAgICAgICAgIFZ1ZS5zZXQoc3RlcCwgcHJvcCwgdXBkYXRlW3Byb3BdKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["jsyaml","merge","isEqual","mapPref","DIFF","mapFeature","MULTI_CLUSTER","LEGACY","mapGetters","Banner","ButtonGroup","ChartReadme","Checkbox","LabeledSelect","LabeledInput","LabeledTooltip","LazyImage","Loading","NameNsDescription","ResourceCancelModal","Questions","Tabbed","UnitInput","YamlEditor","EDITOR_MODES","Wizard","TypeDescription","ChartMixin","ChildHook","BEFORE_SAVE_HOOKS","AFTER_SAVE_HOOKS","CATALOG","MANAGEMENT","DEFAULT_WORKSPACE","CAPI","CHART","FROM_CLUSTER","FROM_TOOLS","HIDE_SIDE_NAV","NAMESPACE","REPO","REPO_TYPE","VERSION","_FLAGGED","CATALOG_ANNOTATIONS","PROJECT","exceptionToErrorsArray","clone","diff","get","set","ignoreVariables","findBy","insertAt","Vue","saferDump","LINUX","WINDOWS","VALUES_STATE","FORM","YAML","isPlainLayout","query","Object","keys","includes","name","layout","context","components","mixins","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","_this$chart","_this$existing2","_this$existing","_this$chart2","ns","_ns$metadata$annotati","project","_this$versionInfo","_this$versionInfo2","_this$version","userValues","_this$existing$spec","_this$chartValues","_this$chartValues2","_this$chartValues3","_this$chartValues4","existingRegistry","wrap","_callee$","_context","prev","next","errors","fetchChart","t0","console","warn","fetchAutoInstallInfo","t1","showCustomRegistry","getClusterRegistry","clusterRegistry","sent","t2","getGlobalRegistry","globalRegistry","t3","defaultRegistrySetting","$store","dispatch","type","SETTING","id","serverUrlSetting","t4","error","existing","forceNamespace","metadata","namespace","nameDisabled","$route","chart","targetNamespace","appNamespace","deployedAsLegacy","t5","legacyApp","t6","deployedAsMultiCluster","t7","mcapp","t8","getters","spec","appName","value","t9","abrupt","targetName","description","customCmdOpts","annotations","replace","t10","versionName","version","process","client","loadValuesComponent","loadChartSteps","loadedVersion","key","showingYaml","applyYamlToValues","loadedVersionValues","chartValues","values","removeGlobalValuesFrom","versionInfo","global","systemDefaultRegistry","cattle","customRegistrySetting","showCustomRegistryInput","valuesYaml","originalYamlValues","updateStepOneReady","preFormYamlOption","valuesComponent","hasQuestions","migratedApp","MIGRATED","stop","data","defaultCmdOpts","cleanupOnFail","crds","hooks","force","resetValues","openApi","wait","timeout","historyMax","previousYamlValues","mode","_objectSpread","autoInstallInfo","formYamlOption","showDiff","showValuesComponent","showQuestions","showSlideIn","shownReadmeWindows","componentHasTabs","showCommandStep","isNamespaceNew","stepBasic","label","t","subtext","descriptionKey","ready","weight","stepClusterTplVersion","stepValues","stepCommands","customSteps","legacyDefs","legacy","mcm","computed","inStore","features","currentCluster","namespaceIsNew","_this$value","all","want","showProject","isRancher","projectOpts","cluster","projects","out","filter","x","clusterName","map","nameDisplay","unshift","concat","charts","_this$existing3","_this2","current","matchingChart","chartName","hidden","showHidden","deprecated","showDeprecated","last","i","length","repoName","kind","repoNameDisplay","disabled","showSelectVersionOrChart","showNameEditor","showVersions","_this$chart3","versions","_this$value2","editorMode","DIFF_CODE","EDIT_CODE","showingYamlDiff","formYamlOptions","options","push","labelKey","dump","yamlDiffModeOptions","stepperName","_this$existing4","_this$chart4","chartNameDisplay","stepperSubtext","currentVersion","targetVersion","readmeWindowName","_this$version2","showingReadmeWindow","diffMode","step1Description","steps","find","s","action","step2Description","step3Description","_this$version3","TYPE","_CLUSTER_TPL","_this$filteredVersion","filteredVersions","apply","_toConsumableArray","sort","a","b","cmdOptions","namespaceNewAllowed","legacyEnabled","legacyFeatureRoute","params","product","resource","legacyAppRoute","windowsIncompatible","_this$chart5","_this$versionInfo3","incompatibleVersion","PERMITTED_OS","_this$versionInfo4","_global$cattle","undefined","watch","$routeQuery","neu","old","$fetch","valueMetadataNamespace","_ns$metadata$annotati2","$refs","cancelModal","show","updateValue","requires","warnings","mounted","_this3","_callee2","_callee2$","_context2","window","scrollTop","beforeDestroy","_this4","forEach","root","methods","_this5","_callee3","hasPermissionToSeeProvCluster","_provCluster","_provCluster2","mgmCluster","provClusterId","provCluster","_provCluster$spec","agentConfig","_mgmCluster$spec","rke1Registries","defaultRegistry","_callee3$","_context3","RANCHER_CLUSTER","isRke2","rkeConfig","machineSelectorConfig","machineLabelSelector","config","isRke1","rancherKubernetesEngineConfig","privateRegistries","registry","isDefault","url","_this6","_callee4","_callee4$","_context4","yaml","_this7","_callee5","_this7$version","component","hasChartComponent","_loaded$default","loaded","_callee5$","_context5","COMPONENT","default","hasTabs","_this8","_callee6","_this8$version","_callee6$","_context6","Promise","cs","loadChartStep","customStep","_this9","_callee7","_loaded$default2","_loaded$default3","_loaded$default4","withFallBack","_callee7$","_context7","loading","selectChart","$router","applyQuery","_defineProperty","repoType","cancel","done","clusterToolsLocation","clustersLocation","chartLocation","appLocation","finish","btnCb","_this10","_callee8","isUpgrade","_this10$actionInput","input","res","operationId","_callee8$","_context8","applyHooks","actionInput","repo","doAction","operationNamespace","operationName","waitForOperation","OPERATION","operation","waitForLink","openLogs","addGlobalValuesTo","_projects$find","_this$serverUrlSettin","_cluster$spec","_cluster$spec2","systemProjectId","p","_p$spec","displayName","split","serverUrl","isWindows","workerOSs","pathPrefix","prefixPath","windowsPathPrefix","winPrefixPath","setIfNotSet","obj","val","_this$serverUrlSettin2","_cluster$spec3","_cluster$spec4","_values$global","_values$global2","_values$global3","deleteIfEqual","windows","load","err","_this$versionInfo5","_this$version4","_this$version5","fromChart","_this$applyYamlToValu","yamlErrors","form","JSON","parse","stringify","migratedAnnotations","releaseName","SOURCE_REPO_TYPE","SOURCE_REPO_NAME","noHooks","projectId","disableOpenAPIValidation","skipCRDs","more","auto","AUTO_INSTALL_GVK","reverse","_iterator","_createForOfIteratorHelper","_step","n","gvr","provider","e","f","_iterator2","_step2","allValues","crdValues","customizedCrdValues","crdValuesToInstall","RELEASE_NAME","_i","_more","dependency","tabChanged","okRequires","okChart","updateStepTwoReady","update","updateStep","getOptionLabel","opt","showReadmeWindow","icon","attrs","stepName","step","prop"],"sources":["node_modules/@rancher/shell/pages/c/_cluster/apps/charts/install.vue"],"sourcesContent":["<script>\nimport jsyaml from 'js-yaml';\nimport merge from 'lodash/merge';\nimport isEqual from 'lodash/isEqual';\nimport { mapPref, DIFF } from '@shell/store/prefs';\nimport { mapFeature, MULTI_CLUSTER, LEGACY } from '@shell/store/features';\nimport { mapGetters } from 'vuex';\nimport { Banner } from '@components/Banner';\nimport ButtonGroup from '@shell/components/ButtonGroup';\nimport ChartReadme from '@shell/components/ChartReadme';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { LabeledTooltip } from '@components/LabeledTooltip';\nimport LazyImage from '@shell/components/LazyImage';\nimport Loading from '@shell/components/Loading';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport ResourceCancelModal from '@shell/components/ResourceCancelModal';\nimport Questions from '@shell/components/Questions';\nimport Tabbed from '@shell/components/Tabbed';\nimport UnitInput from '@shell/components/form/UnitInput';\nimport YamlEditor, { EDITOR_MODES } from '@shell/components/YamlEditor';\nimport Wizard from '@shell/components/Wizard';\nimport TypeDescription from '@shell/components/TypeDescription';\nimport ChartMixin from '@shell/mixins/chart';\nimport ChildHook, { BEFORE_SAVE_HOOKS, AFTER_SAVE_HOOKS } from '@shell/mixins/child-hook';\nimport { CATALOG, MANAGEMENT, DEFAULT_WORKSPACE, CAPI } from '@shell/config/types';\nimport {\n  CHART, FROM_CLUSTER, FROM_TOOLS, HIDE_SIDE_NAV, NAMESPACE, REPO, REPO_TYPE, VERSION, _FLAGGED\n} from '@shell/config/query-params';\nimport { CATALOG as CATALOG_ANNOTATIONS, PROJECT } from '@shell/config/labels-annotations';\n\nimport { exceptionToErrorsArray } from '@shell/utils/error';\nimport { clone, diff, get, set } from '@shell/utils/object';\nimport { ignoreVariables } from './install.helpers';\nimport { findBy, insertAt } from '@shell/utils/array';\nimport Vue from 'vue';\nimport { saferDump } from '@shell/utils/create-yaml';\nimport { LINUX, WINDOWS } from '@shell/store/catalog';\n\nconst VALUES_STATE = {\n  FORM: 'FORM',\n  YAML: 'YAML',\n  DIFF: 'DIFF'\n};\n\nfunction isPlainLayout(query) {\n  return Object.keys(query).includes(HIDE_SIDE_NAV);\n}\n\nexport default {\n  name: 'Install',\n\n  layout(context) {\n    return isPlainLayout(context.query) ? 'plain' : '';\n  },\n\n  components: {\n    Banner,\n    ButtonGroup,\n    ChartReadme,\n    Checkbox,\n    LabeledInput,\n    LabeledSelect,\n    LabeledTooltip,\n    LazyImage,\n    Loading,\n    NameNsDescription,\n    ResourceCancelModal,\n    Questions,\n    Tabbed,\n    UnitInput,\n    YamlEditor,\n    Wizard,\n    TypeDescription\n  },\n\n  mixins: [\n    ChildHook,\n    ChartMixin\n  ],\n\n  async fetch() {\n    this.errors = [];\n    // IMPORTANT! Any exception thrown before this.value is set will result in an empty page\n\n    /*\n      fetchChart is defined in shell/mixins. It first checks the URL\n      query for an app name and namespace. It uses those values to check\n      for a catalog app resource. If found, it sets the form to edit\n      mode. If not, it sets the form to create mode.\n\n      If the app and app namespace are not provided in the query,\n      it checks for target name and namespace values defined in the\n      Helm chart itself.\n    */\n    try {\n      await this.fetchChart();\n    } catch (e) {\n      console.warn('Unable to fetch chart: ', e); // eslint-disable-line no-console\n    }\n\n    try {\n      await this.fetchAutoInstallInfo();\n    } catch (e) {\n      console.warn('Unable to determine if other charts require install: ', e); // eslint-disable-line no-console\n    }\n\n    // If the chart doesn't contain system `systemDefaultRegistry` properties there's no point applying them\n    if (this.showCustomRegistry) {\n      // Note: Cluster scoped registry is only supported for node driver clusters\n      try {\n        this.clusterRegistry = await this.getClusterRegistry();\n      } catch (e) {\n        console.warn('Unable to get cluster registry: ', e); // eslint-disable-line no-console\n      }\n\n      try {\n        this.globalRegistry = await this.getGlobalRegistry();\n      } catch (e) {\n        console.warn('Unable to get global registry: ', e); // eslint-disable-line no-console\n      }\n      this.defaultRegistrySetting = this.clusterRegistry || this.globalRegistry;\n    }\n\n    try {\n      this.serverUrlSetting = await this.$store.dispatch('management/find', {\n        type: MANAGEMENT.SETTING,\n        id:   'server-url'\n      });\n    } catch (e) {\n      console.error('Unable to fetch `server-url` setting: ', e); // eslint-disable-line no-console\n    }\n\n    /*\n      Figure out the namespace where the chart is\n      being installed or upgraded.\n    */\n    if ( this.existing ) {\n      /*\n      If the Helm chart is already installed,\n      use the existing namespace by default.\n    */\n\n      this.forceNamespace = this.existing.metadata.namespace;\n      this.nameDisabled = true;\n    } else if (this.$route.query[FROM_CLUSTER] === _FLAGGED) {\n      /* For Fleet, use the fleet-default namespace. */\n      this.forceNamespace = DEFAULT_WORKSPACE;\n    } else if ( this.chart?.targetNamespace ) {\n      /* If a target namespace is defined in the chart,\n      set the target namespace as default. */\n      this.forceNamespace = this.chart.targetNamespace;\n    } else if ( this.query.appNamespace ) {\n      /* If a namespace is defined in the URL query,\n       use that namespace as default. */\n      this.forceNamespace = this.query.appNamespace;\n    } else {\n      this.forceNamespace = null;\n    }\n\n    /* Check if the app is deprecated. */\n    try {\n      this.legacyApp = this.existing ? await this.existing.deployedAsLegacy() : false;\n    } catch (e) {\n      this.legacyApp = false;\n      console.warn('Unable to determine if existing install is a legacy app: ', e); // eslint-disable-line no-console\n    }\n\n    /* Check if the app is a multicluster deprecated app.\n    (Multicluster apps were replaced by Fleet.) */\n\n    try {\n      this.mcapp = this.existing ? await this.existing.deployedAsMultiCluster() : false;\n    } catch (e) {\n      this.mcapp = false;\n      console.warn('Unable to determine if existing install is a mc app: ', e); // eslint-disable-line no-console\n    }\n\n    /* The form state is intialized as a chartInstallAction resource. */\n    try {\n      this.value = await this.$store.dispatch('cluster/create', {\n        type:     'chartInstallAction',\n        metadata: {\n          namespace: this.forceNamespace || this.$store.getters['defaultNamespace'],\n          name:      this.existing?.spec?.name || this.query.appName || '',\n        }\n      });\n    } catch (e) {\n      console.error('Unable to create object of type `chartInstallAction`: ', e); // eslint-disable-line no-console\n\n      // Nothing's going to work without a `value`. See https://github.com/rancher/dashboard/issues/9452 to handle this and other catches.\n      return;\n    }\n\n    /* Logic for when the Helm chart is not already installed */\n    if ( !this.existing) {\n      /*\n        The target name is used for Git repos for Fleet.\n        The target name indicates the name of the cluster\n        group that the chart is meant to be installed in.\n      */\n      if ( this.chart?.targetName ) {\n        /*\n          Set the name of the chartInstallAction\n          to the name of the cluster group\n          where the chart should be installed.\n        */\n        this.value.metadata.name = this.chart.targetName;\n        this.nameDisabled = true;\n      } else if ( this.query.appName ) {\n        this.value.metadata.name = this.query.appName;\n      } else {\n        this.nameDisabled = false;\n      }\n\n      if ( this.query.description ) {\n        this.customCmdOpts.description = this.query.description;\n      }\n    } /* End of logic for when chart is already installed */\n\n    /*\n      Logic for what to do if the user is installing\n      the Helm chart for the first time and a default\n      namespace has been set.\n    */\n    if (this.forceNamespace && !this.existing) {\n      let ns;\n\n      /*\n        Before moving forward, check to make sure the\n        default namespace exists and the logged-in user\n        has permission to see it.\n      */\n      try {\n        ns = await this.$store.dispatch('cluster/find', { type: NAMESPACE, id: this.forceNamespace });\n        const project = ns.metadata.annotations?.[PROJECT];\n\n        if (project) {\n          this.project = project.replace(':', '/');\n        }\n      } catch {}\n    }\n\n    /* If no chart by the given app name and namespace\n     can be found, or if no version is found, do nothing. */\n    if ( !this.chart || !this.query.versionName) {\n      return;\n    }\n\n    if ( this.version && process.client ) {\n      /*\n        Check if the Helm chart has provided the name\n        of a Vue component to use for configuring\n        chart values. If so, load that component.\n\n        This will set this.valuesComponent,\n        this.componentHasTabs and this.showValuesComponent.\n      */\n      await this.loadValuesComponent();\n    }\n\n    /*\n      Check if the Helm chart has indicated\n      that the user should fill out the chart values\n      through a wizard-style workflow. If so, load\n      the chart steps.\n    */\n    await this.loadChartSteps();\n\n    /*\n      this.loadedVersion will only be true if you select a non-defalut\n      option from the \"Version\" dropdown menu in Apps & Marketplace\n      when updating a previously installed app.\n    */\n    if ( !this.loadedVersion || this.loadedVersion !== this.version.key ) {\n      let userValues;\n\n      /*\n        When you select a version, a new chart is loaded. Then\n        Rancher anticipates that you probably want to port all of your\n        previously customized, non-default values from the old chart\n        version to the new chart version, so it applies the previous\n        chart's customization to the new chart values before\n        you see the values form on the next page in the workflow.\n      */\n      if ( this.loadedVersion ) {\n        if ( this.showingYaml ) {\n          this.applyYamlToValues();\n        }\n        /*\n          this.loadedVersionValues is taken from versionInfo,\n          which contains everything there is to know about a specific\n          version of a Helm chart, including all chart values,\n          chart metadata, a short app README and a more\n          version-specific README called the chart README.\n\n          Here we assume that any difference between the values in\n          two different Helm chart versions is a \"user value,\" or\n          a user-selected customization.\n        */\n        userValues = diff(this.loadedVersionValues, this.chartValues);\n      } else if ( this.existing ) {\n        /* For an already installed app, use the values from the previous install. */\n        userValues = clone(this.existing.spec?.values || {});\n      } else {\n        /* For an new app, start empty. */\n        userValues = {};\n      }\n\n      /*\n        Remove global values if they are identical to\n        the currently available information about the cluster\n        and Rancher settings.\n\n        Immediately before the Helm chart is installed or\n        upgraded, the global values are re-added.\n      */\n      this.removeGlobalValuesFrom(userValues);\n\n      /*\n        The merge() method is used to merge two or more objects\n        starting with the left-most to the right-most to create a\n        parent mapping object. When two keys are the same, the\n        generated object will have value for the rightmost key.\n        In this case, any values in userValues override any\n        matching values in versionInfo.\n      */\n      this.chartValues = merge(merge({}, this.versionInfo?.values || {}), userValues);\n\n      if (this.showCustomRegistry) {\n        /**\n         * The input to configure the registry should never be\n         * shown for third-party charts, which don't have Rancher\n         * global values.\n         */\n        const existingRegistry = this.chartValues?.global?.systemDefaultRegistry || this.chartValues?.global?.cattle?.systemDefaultRegistry;\n\n        delete this.chartValues?.global?.systemDefaultRegistry;\n        delete this.chartValues?.global?.cattle?.systemDefaultRegistry;\n\n        this.customRegistrySetting = existingRegistry || this.defaultRegistrySetting;\n        this.showCustomRegistryInput = !!this.customRegistrySetting;\n      }\n\n      /* Serializes an object as a YAML document */\n      this.valuesYaml = saferDump(this.chartValues);\n\n      /* For YAML diff */\n      if ( !this.loadedVersion ) {\n        this.originalYamlValues = this.valuesYaml;\n      }\n\n      this.loadedVersionValues = this.versionInfo?.values || {};\n      this.loadedVersion = this.version?.key;\n    }\n\n    /* Check if chart exists and if required values exist */\n    this.updateStepOneReady();\n\n    this.preFormYamlOption = this.valuesComponent || this.hasQuestions ? VALUES_STATE.FORM : VALUES_STATE.YAML;\n\n    /* Look for annotation to say this app is a legacy migrated app (we look in either place for now) */\n    this.migratedApp = (this.existing?.spec?.chart?.metadata?.annotations?.[CATALOG_ANNOTATIONS.MIGRATED] === 'true');\n  },\n\n  data() {\n    /* Helm CLI options that are not persisted on the back end,\n    but are used for the final install/upgrade operation. */\n    const defaultCmdOpts = {\n      cleanupOnFail: false,\n      crds:          true,\n      hooks:         true,\n      force:         false,\n      resetValues:   false,\n      openApi:       true,\n      wait:          true,\n      timeout:       600,\n      historyMax:    5,\n    };\n\n    return {\n      defaultRegistrySetting: '',\n      customRegistrySetting:  '',\n      serverUrlSetting:       null,\n      chartValues:            null,\n      clusterRegistry:        '',\n      originalYamlValues:     null,\n      previousYamlValues:     null,\n      errors:                 null,\n      existing:               null,\n      globalRegistry:         '',\n      forceNamespace:         null,\n      loadedVersion:          null,\n      loadedVersionValues:    null,\n      legacyApp:              null,\n      mcapp:                  null,\n      mode:                   null,\n      value:                  null,\n      valuesComponent:        null,\n      valuesYaml:             '',\n      project:                null,\n      migratedApp:            false,\n      defaultCmdOpts,\n      customCmdOpts:          { ...defaultCmdOpts },\n      autoInstallInfo:        [],\n\n      nameDisabled: false,\n\n      preFormYamlOption:       VALUES_STATE.YAML,\n      formYamlOption:          VALUES_STATE.YAML,\n      showDiff:                false,\n      showValuesComponent:     true,\n      showQuestions:           true,\n      showSlideIn:             false,\n      shownReadmeWindows:      [],\n      componentHasTabs:        false,\n      showCommandStep:         false,\n      showCustomRegistryInput: false,\n      isNamespaceNew:          false,\n\n      stepBasic: {\n        name:           'basics',\n        label:          this.t('catalog.install.steps.basics.label'),\n        subtext:        this.t('catalog.install.steps.basics.subtext'),\n        descriptionKey: 'catalog.install.steps.basics.description',\n        ready:          true,\n        weight:         30\n      },\n      stepClusterTplVersion: {\n        name:           'clusterTplVersion',\n        label:          this.t('catalog.install.steps.clusterTplVersion.label'),\n        subtext:        this.t('catalog.install.steps.clusterTplVersion.subtext'),\n        descriptionKey: 'catalog.install.steps.helmValues.description',\n        ready:          true,\n        weight:         30\n      },\n      stepValues: {\n        name:           'helmValues',\n        label:          this.t('catalog.install.steps.helmValues.label'),\n        subtext:        this.t('catalog.install.steps.helmValues.subtext'),\n        descriptionKey: 'catalog.install.steps.helmValues.description',\n        ready:          true,\n        weight:         20\n      },\n      stepCommands: {\n        name:           'helmCli',\n        label:          this.t('catalog.install.steps.helmCli.label'),\n        subtext:        this.t('catalog.install.steps.helmCli.subtext'),\n        descriptionKey: 'catalog.install.steps.helmCli.description',\n        ready:          true,\n        weight:         10\n      },\n\n      customSteps: [\n\n      ],\n\n      isPlainLayout: isPlainLayout(this.$route.query),\n\n      legacyDefs: {\n        legacy: this.t('catalog.install.error.legacy.category.legacy'),\n        mcm:    this.t('catalog.install.error.legacy.category.mcm')\n      }\n    };\n  },\n\n  computed: {\n    ...mapGetters({ inStore: 'catalog/inStore', features: 'features/get' }),\n    mcm: mapFeature(MULTI_CLUSTER),\n\n    /**\n     * Return list of variables to filter chart questions\n     */\n    ignoreVariables() {\n      return ignoreVariables(this.currentCluster, this.versionInfo);\n    },\n\n    namespaceIsNew() {\n      const all = this.$store.getters['cluster/all'](NAMESPACE);\n      const want = this.value?.metadata?.namespace;\n\n      if ( !want ) {\n        return false;\n      }\n\n      return !findBy(all, 'id', want);\n    },\n\n    showProject() {\n      return this.isRancher && !this.existing && this.forceNamespace;\n    },\n\n    projectOpts() {\n      const cluster = this.currentCluster;\n      const projects = this.$store.getters['management/all'](MANAGEMENT.PROJECT);\n\n      const out = projects.filter((x) => x.spec.clusterName === cluster?.id).map((project) => {\n        return {\n          id:    project.id,\n          label: project.nameDisplay,\n          value: project.id\n        };\n      });\n\n      out.unshift({\n        id:    'none',\n        label: `(${ this.t('generic.none') })`,\n        value: '',\n      });\n\n      return out;\n    },\n\n    charts() {\n      const current = this.existing?.matchingChart(true);\n\n      const out = this.$store.getters['catalog/charts'].filter((x) => {\n        if ( x.key === current?.key || x.chartName === current?.chartName ) {\n          return true;\n        }\n\n        if ( x.hidden && !this.showHidden ) {\n          return false;\n        }\n\n        if ( x.deprecated && !this.showDeprecated ) {\n          return false;\n        }\n\n        return true;\n      });\n\n      let last = '';\n\n      for ( let i = 0 ; i < out.length ; i++ ) {\n        if ( out[i].repoName !== last ) {\n          last = out[i].repoName;\n          insertAt(out, i, {\n            kind:     'label',\n            label:    out[i].repoNameDisplay,\n            disabled: true\n          });\n          i++;\n        }\n      }\n\n      return out;\n    },\n\n    showSelectVersionOrChart() {\n      // Allow the user to choose a version if the app exists OR they've come from tools\n      return this.existing || (FROM_TOOLS in this.$route.query);\n    },\n\n    showNameEditor() {\n      return !this.nameDisabled || !this.forceNamespace;\n    },\n\n    showVersions() {\n      return this.chart?.versions.length > 1;\n    },\n\n    targetNamespace() {\n      if ( this.forceNamespace ) {\n        return this.forceNamespace;\n      } else if ( this.value?.metadata.namespace ) {\n        return this.value.metadata.namespace;\n      }\n\n      return 'default';\n    },\n\n    editorMode() {\n      if ( this.showDiff ) {\n        return EDITOR_MODES.DIFF_CODE;\n      }\n\n      return EDITOR_MODES.EDIT_CODE;\n    },\n\n    showingYaml() {\n      return this.formYamlOption === VALUES_STATE.YAML || ( !this.valuesComponent && !this.hasQuestions );\n    },\n\n    showingYamlDiff() {\n      return this.formYamlOption === VALUES_STATE.DIFF;\n    },\n\n    formYamlOptions() {\n      const options = [];\n\n      if (this.valuesComponent || this.hasQuestions) {\n        options.push({\n          labelKey: 'catalog.install.section.chartOptions',\n          value:    VALUES_STATE.FORM,\n        });\n      }\n      options.push({\n        labelKey: 'catalog.install.section.valuesYaml',\n        value:    VALUES_STATE.YAML,\n      }, {\n        labelKey: 'catalog.install.section.diff',\n        value:    VALUES_STATE.DIFF,\n        // === quite obviously shouldn't work, but has been and still does. When the magic breaks address with heavier stringify/jsyaml.dump\n        disabled: this.formYamlOption === VALUES_STATE.FORM ? this.originalYamlValues === jsyaml.dump(this.chartValues || {}) : this.originalYamlValues === this.valuesYaml,\n      });\n\n      return options;\n    },\n\n    yamlDiffModeOptions() {\n      return [{\n        labelKey: 'resourceYaml.buttons.unified',\n        value:    'unified',\n      }, {\n        labelKey: 'resourceYaml.buttons.split',\n        value:    'split',\n      }];\n    },\n\n    stepperName() {\n      return this.existing?.nameDisplay || this.chart?.chartNameDisplay;\n    },\n\n    stepperSubtext() {\n      return this.existing && this.currentVersion !== this.targetVersion ? `${ this.currentVersion } > ${ this.targetVersion }` : this.targetVersion;\n    },\n\n    readmeWindowName() {\n      // Version can change, so allow multiple WM tabs for different versions\n      return `${ this.stepperName }-${ this.version?.version }`;\n    },\n\n    showingReadmeWindow() {\n      return !!this.$store.getters['wm/byId'](this.readmeWindowName);\n    },\n\n    diffMode: mapPref(DIFF),\n\n    step1Description() {\n      const descriptionKey = this.steps.find((s) => s.name === 'basics').descriptionKey;\n\n      return this.$store.getters['i18n/withFallback'](descriptionKey, { action: this.action, existing: !!this.existing }, '');\n    },\n\n    step2Description() {\n      const descriptionKey = this.steps.find((s) => s.name === 'helmValues').descriptionKey;\n\n      return this.$store.getters['i18n/withFallback'](descriptionKey, { action: this.action, existing: !!this.existing }, '');\n    },\n\n    step3Description() {\n      const descriptionKey = this.steps.find((s) => s.name === 'helmCli').descriptionKey;\n\n      return this.$store.getters['i18n/withFallback'](descriptionKey, { action: this.action, existing: !!this.existing }, '');\n    },\n\n    steps() {\n      const steps = [];\n\n      const type = this.version?.annotations?.[CATALOG_ANNOTATIONS.TYPE];\n\n      if ( type === CATALOG_ANNOTATIONS._CLUSTER_TPL ) {\n        if (this.filteredVersions?.length > 1) {\n          steps.push(this.stepClusterTplVersion);\n        }\n        steps.push({\n          ...this.stepValues,\n          label:          this.t('catalog.install.steps.clusterTplValues.label'),\n          subtext:        this.t('catalog.install.steps.clusterTplValues.subtext'),\n          descriptionKey: 'catalog.install.steps.clusterTplValues.description',\n        });\n      } else {\n        steps.push(\n          this.stepBasic,\n          this.stepValues,\n          ...this.customSteps\n        );\n      }\n\n      if (this.showCommandStep) {\n        steps.push(this.stepCommands);\n      }\n\n      return steps.sort((a, b) => (b.weight || 0) - (a.weight || 0));\n    },\n\n    cmdOptions() {\n      return this.showCommandStep ? this.customCmdOpts : this.defaultCmdOpts;\n    },\n\n    namespaceNewAllowed() {\n      return !this.existing && !this.forceNamespace;\n    },\n\n    legacyEnabled() {\n      // Check for the legacy feature flag in the settings\n      return this.features(LEGACY);\n    },\n\n    legacyFeatureRoute() {\n      return {\n        name:   'c-cluster-product-resource',\n        params: { product: 'settings', resource: 'management.cattle.io.feature' }\n      };\n    },\n\n    legacyAppRoute() {\n      return { name: 'c-cluster-legacy-project' };\n    },\n\n    windowsIncompatible() {\n      if (this.chart?.windowsIncompatible) {\n        return this.t('catalog.charts.windowsIncompatible');\n      }\n      if (this.versionInfo) {\n        const incompatibleVersion = !(this.versionInfo?.chart?.annotations?.[CATALOG_ANNOTATIONS.PERMITTED_OS] || LINUX).includes('windows');\n\n        if (incompatibleVersion && !this.chart.windowsIncompatible) {\n          return this.t('catalog.charts.versionWindowsIncompatible');\n        }\n      }\n\n      return null;\n    },\n\n    /**\n     * Check if the chart contains `systemDefaultRegistry` properties.\n     * If not we shouldn't apply the setting, because if the option\n     * is exposed for third-party Helm charts, it confuses users because\n     * it shows a private registry setting that is never used\n     * by the chart they are installing. If not hidden, the setting\n     * does nothing, and if the user changes it, it will look like\n     * there is a bug in the UI when it doesn't work, because UI is\n     * exposing a feature that the chart does not have.\n     */\n    showCustomRegistry() {\n      const global = this.versionInfo?.values?.global || {};\n\n      return global.systemDefaultRegistry !== undefined || global.cattle?.systemDefaultRegistry !== undefined;\n    },\n\n  },\n\n  watch: {\n    '$route.query'(neu, old) {\n      if ( !isEqual(neu, old) ) {\n        this.$fetch();\n        this.showSlideIn = false;\n      }\n    },\n\n    'value.metadata.namespace'(neu, old) {\n      if (neu) {\n        const ns = this.$store.getters['cluster/byId'](NAMESPACE, this.value.metadata.namespace);\n\n        const project = ns?.metadata.annotations?.[PROJECT];\n\n        if (project) {\n          this.project = project.replace(':', '/');\n        }\n      }\n    },\n\n    preFormYamlOption(neu, old) {\n      if (neu === VALUES_STATE.FORM && this.valuesYaml !== this.previousYamlValues && !!this.$refs.cancelModal) {\n        this.$refs.cancelModal.show();\n      } else {\n        this.formYamlOption = neu;\n      }\n    },\n\n    formYamlOption(neu, old) {\n      switch (neu) {\n      case VALUES_STATE.FORM:\n        // Return to form, reset everything back to starting point\n        this.valuesYaml = this.previousYamlValues;\n\n        this.showValuesComponent = true;\n        this.showQuestions = true;\n\n        this.showDiff = false;\n        break;\n      case VALUES_STATE.YAML:\n        // Show the YAML preview\n        if (old === VALUES_STATE.FORM) {\n          this.valuesYaml = jsyaml.dump(this.chartValues || {});\n          this.previousYamlValues = this.valuesYaml;\n        }\n\n        this.showValuesComponent = false;\n        this.showQuestions = false;\n\n        this.showDiff = false;\n        break;\n      case VALUES_STATE.DIFF:\n        // Show the YAML diff\n        if (old === VALUES_STATE.FORM) {\n          this.valuesYaml = jsyaml.dump(this.chartValues || {});\n          this.previousYamlValues = this.valuesYaml;\n        }\n\n        this.showValuesComponent = false;\n        this.showQuestions = false;\n\n        this.updateValue(this.valuesYaml);\n        this.showDiff = true;\n        break;\n      }\n    },\n\n    requires() {\n      this.updateStepOneReady();\n    },\n\n    warnings() {\n      this.updateStepOneReady();\n    },\n\n  },\n\n  async mounted() {\n    // Load a Vue component named in the Helm chart\n    // for editing values\n    await this.loadValuesComponent();\n\n    // Load Helm chart info used for showing\n    // wizard steps\n    await this.loadChartSteps();\n\n    window.scrollTop = 0;\n\n    this.preFormYamlOption = this.valuesComponent || this.hasQuestions ? VALUES_STATE.FORM : VALUES_STATE.YAML;\n  },\n\n  beforeDestroy() {\n    this.shownReadmeWindows.forEach((name) => this.$store.dispatch('wm/close', name, { root: true }));\n  },\n\n  methods: {\n    async getClusterRegistry() {\n      const hasPermissionToSeeProvCluster = this.$store.getters[`management/schemaFor`](CAPI.RANCHER_CLUSTER);\n\n      if (hasPermissionToSeeProvCluster) {\n        const mgmCluster = this.$store.getters['currentCluster'];\n        const provClusterId = mgmCluster?.provClusterId;\n        let provCluster;\n\n        try {\n          provCluster = provClusterId ? await this.$store.dispatch('management/find', {\n            type: CAPI.RANCHER_CLUSTER,\n            id:   provClusterId\n          }) : {};\n        } catch (e) {\n          console.error(`Unable to fetch prov cluster '${ provClusterId }': `, e); // eslint-disable-line no-console\n        }\n\n        if (provCluster?.isRke2) { // isRke2 returns true for both RKE2 and K3s clusters.\n          const agentConfig = provCluster.spec?.rkeConfig?.machineSelectorConfig?.find((x) => !x.machineLabelSelector).config;\n\n          // If a cluster scoped registry exists,\n          // it should be used by default.\n          const clusterRegistry = agentConfig?.['system-default-registry'] || '';\n\n          if (clusterRegistry) {\n            return clusterRegistry;\n          }\n        }\n\n        if (provCluster?.isRke1) {\n          // For RKE1 clusters, the cluster scoped private registry is on the management\n          // cluster, not the provisioning cluster.\n          const rke1Registries = mgmCluster?.spec?.rancherKubernetesEngineConfig?.privateRegistries;\n\n          if (rke1Registries?.length > 0) {\n            const defaultRegistry = rke1Registries.find((registry) => {\n              return registry.isDefault;\n            });\n\n            return defaultRegistry.url;\n          }\n        }\n      }\n    },\n\n    async getGlobalRegistry() {\n      // Use the global registry as a fallback.\n      // If it is an empty string, the container\n      // runtime will pull images from docker.io.\n      const globalRegistry = await this.$store.dispatch('management/find', {\n        type: MANAGEMENT.SETTING,\n        id:   'system-default-registry'\n      });\n\n      return globalRegistry.value;\n    },\n\n    updateValue(value) {\n      if (this.$refs.yaml) {\n        this.$refs.yaml.updateValue(value);\n      }\n    },\n\n    async loadValuesComponent() {\n      // The const component is a string, for example, 'monitoring'.\n      const component = this.version?.annotations?.[CATALOG_ANNOTATIONS.COMPONENT];\n\n      // Load a values component for the UI if it is named in the Helm chart.\n      if ( component ) {\n        const hasChartComponent = this.$store.getters['type-map/hasCustomChart'](component);\n\n        if ( hasChartComponent ) {\n          this.valuesComponent = this.$store.getters['type-map/importChart'](component);\n          const loaded = await this.valuesComponent();\n\n          this.showValuesComponent = true;\n          this.componentHasTabs = loaded?.default?.hasTabs || false;\n        } else {\n          this.valuesComponent = null;\n          this.componentHasTabs = false;\n          this.showValuesComponent = false;\n        }\n      } else {\n        this.valuesComponent = null;\n        this.componentHasTabs = false;\n        this.showValuesComponent = false;\n      }\n    },\n\n    async loadChartSteps() {\n      const component = this.version?.annotations?.[CATALOG_ANNOTATIONS.COMPONENT];\n\n      if ( component ) {\n        const steps = await this.$store.getters['catalog/chartSteps'](component);\n\n        this.customSteps = await Promise.all( steps.map((cs) => this.loadChartStep(cs)));\n      }\n    },\n\n    async loadChartStep(customStep) {\n      const loaded = await customStep.component();\n      const withFallBack = this.$store.getters['i18n/withFallback'];\n\n      return {\n        name:      customStep.name,\n        label:     withFallBack(loaded?.default?.label, null, customStep.name),\n        subtext:   withFallBack(loaded?.default?.subtext, null, ''),\n        weight:    loaded?.default?.weight,\n        ready:     false,\n        hidden:    true,\n        loading:   true,\n        component: customStep.component,\n      };\n    },\n\n    selectChart(chart) {\n      if ( !chart ) {\n        return;\n      }\n\n      this.$router.applyQuery({\n        [REPO]:      chart.repoName,\n        [REPO_TYPE]: chart.repoType,\n        [CHART]:     chart.chartName,\n        [VERSION]:   chart.versions[0].version\n      });\n    },\n\n    cancel() {\n      if ( this.existing ) {\n        this.done();\n      } else if (this.$route.query[FROM_TOOLS] === _FLAGGED) {\n        this.$router.replace(this.clusterToolsLocation());\n      } else if (this.$route.query[FROM_CLUSTER] === _FLAGGED) {\n        this.$router.replace(this.clustersLocation());\n      } else {\n        this.$router.replace(this.chartLocation(false));\n      }\n    },\n\n    done() {\n      if ( this.$route.query[FROM_TOOLS] === _FLAGGED ) {\n        this.$router.replace(this.clusterToolsLocation());\n      } else if (this.$route.query[FROM_CLUSTER] === _FLAGGED) {\n        this.$router.replace(this.clustersLocation());\n      } else {\n        // If the create app process fails helm validation then we still get here... so until this is fixed new apps will be taken to the\n        // generic apps list (existing apps will be taken to their detail page)\n        this.$router.replace(this.appLocation());\n      }\n    },\n\n    async finish(btnCb) {\n      try {\n        const isUpgrade = !!this.existing;\n\n        this.errors = [];\n\n        await this.applyHooks(BEFORE_SAVE_HOOKS);\n\n        const { errors, input } = this.actionInput(isUpgrade);\n\n        if ( errors?.length ) {\n          this.errors = errors;\n          btnCb(false);\n\n          return;\n        }\n\n        const res = await this.repo.doAction((isUpgrade ? 'upgrade' : 'install'), input);\n        const operationId = `${ res.operationNamespace }/${ res.operationName }`;\n\n        // Non-admins without a cluster won't be able to fetch operations immediately\n        await this.repo.waitForOperation(operationId);\n\n        // Dynamically use store decided when loading catalog (covers standard user case when there's not cluster)\n        this.operation = await this.$store.dispatch(`${ this.inStore }/find`, {\n          type: CATALOG.OPERATION,\n          id:   operationId\n        });\n\n        try {\n          await this.operation.waitForLink('logs');\n          this.operation.openLogs();\n        } catch (e) {\n          // The wait times out eventually, move on...\n        }\n\n        await this.applyHooks(AFTER_SAVE_HOOKS);\n\n        btnCb(true);\n        this.done();\n      } catch (err) {\n        this.errors = exceptionToErrorsArray(err);\n        btnCb(false);\n      }\n    },\n\n    addGlobalValuesTo(values) {\n      let global = values.global;\n\n      if ( !global ) {\n        global = {};\n        set(values, 'global', global);\n      }\n\n      let cattle = global.cattle;\n\n      if ( !cattle ) {\n        cattle = {};\n        set(values.global, 'cattle', cattle);\n      }\n\n      const cluster = this.currentCluster;\n      const projects = this.$store.getters['management/all'](MANAGEMENT.PROJECT);\n      const systemProjectId = projects.find((p) => p.spec?.displayName === 'System')?.id?.split('/')?.[1] || '';\n\n      const serverUrl = this.serverUrlSetting?.value || '';\n      const isWindows = (cluster?.workerOSs || []).includes(WINDOWS);\n      const pathPrefix = cluster?.spec?.rancherKubernetesEngineConfig?.prefixPath || '';\n      const windowsPathPrefix = cluster?.spec?.rancherKubernetesEngineConfig?.winPrefixPath || '';\n\n      setIfNotSet(cattle, 'clusterId', cluster?.id);\n      setIfNotSet(cattle, 'clusterName', cluster?.nameDisplay);\n\n      if (this.showCustomRegistry) {\n        set(cattle, 'systemDefaultRegistry', this.customRegistrySetting);\n        set(global, 'systemDefaultRegistry', this.customRegistrySetting);\n      }\n\n      setIfNotSet(global, 'cattle.systemProjectId', systemProjectId);\n      setIfNotSet(cattle, 'url', serverUrl);\n      setIfNotSet(cattle, 'rkePathPrefix', pathPrefix);\n      setIfNotSet(cattle, 'rkeWindowsPathPrefix', windowsPathPrefix);\n\n      if ( isWindows ) {\n        setIfNotSet(cattle, 'windows.enabled', true);\n      }\n\n      return values;\n\n      function setIfNotSet(obj, key, val) {\n        if ( typeof get(obj, key) === 'undefined' ) {\n          set(obj, key, val);\n        }\n      }\n    },\n\n    removeGlobalValuesFrom(values) {\n      if ( !values ) {\n        return;\n      }\n\n      const cluster = this.$store.getters['currentCluster'];\n      const serverUrl = this.serverUrlSetting?.value || '';\n      const isWindows = (cluster?.workerOSs || []).includes(WINDOWS);\n      const pathPrefix = cluster?.spec?.rancherKubernetesEngineConfig?.prefixPath || '';\n      const windowsPathPrefix = cluster?.spec?.rancherKubernetesEngineConfig?.winPrefixPath || '';\n\n      if ( values.global?.cattle ) {\n        deleteIfEqual(values.global.cattle, 'clusterId', cluster?.id);\n        deleteIfEqual(values.global.cattle, 'clusterName', cluster?.nameDisplay);\n        deleteIfEqual(values.global.cattle, 'url', serverUrl);\n        deleteIfEqual(values.global.cattle, 'rkePathPrefix', pathPrefix);\n        deleteIfEqual(values.global.cattle, 'rkeWindowsPathPrefix', windowsPathPrefix);\n\n        if ( isWindows ) {\n          deleteIfEqual(values.global.cattle.windows, 'enabled', true);\n        }\n      }\n\n      if ( values.global?.cattle?.windows && !Object.keys(values.global.cattle.windows).length ) {\n        delete values.global.cattle.windows;\n      }\n\n      if ( values.global?.cattle && !Object.keys(values.global.cattle).length ) {\n        delete values.global.cattle;\n      }\n\n      if ( !Object.keys(values.global || {}).length ) {\n        delete values.global;\n      }\n\n      return values;\n\n      function deleteIfEqual(obj, key, val) {\n        if ( get(obj, key) === val ) {\n          delete obj[key];\n        }\n      }\n    },\n\n    applyYamlToValues() {\n      try {\n        this.chartValues = jsyaml.load(this.valuesYaml);\n      } catch (err) {\n        return { errors: exceptionToErrorsArray(err) };\n      }\n\n      return { errors: [] };\n    },\n\n    /*\n      actionInput determines what values Rancher finally sends\n      to the backend when installing or upgrading the app. It\n      injects Rancher-specific values into the chart values.\n    */\n    actionInput(isUpgrade) {\n      /* Default values defined in the Helm chart itself */\n      const fromChart = this.versionInfo?.values || {};\n\n      const errors = [];\n\n      if ( this.showingYaml || this.showingYamlDiff ) {\n        const { errors: yamlErrors } = this.applyYamlToValues();\n\n        errors.push(...yamlErrors);\n      }\n\n      /*\n        Only save the values that differ from the chart's standard values.yaml.\n        chartValues is created by applying the user's customized onto\n        the default chart values.\n      */\n      const values = diff(fromChart, this.chartValues);\n\n      /*\n        Refer to the developer docs at docs/developer/helm-chart-apps.md\n        for details on what values are injected and where they come from.\n      */\n\n      this.addGlobalValuesTo(values);\n\n      const form = JSON.parse(JSON.stringify(this.value));\n\n      /*\n        Migrated annotations are required to allow a deprecated legacy app to be\n        upgraded.\n      */\n      const migratedAnnotations = this.migratedApp ? { [CATALOG_ANNOTATIONS.MIGRATED]: 'true' } : {};\n\n      const chart = {\n        chartName:   this.chart.chartName,\n        version:     this.version?.version || this.query.versionName,\n        releaseName: form.metadata.name,\n        description: this.customCmdOpts.description,\n        annotations: {\n          ...migratedAnnotations,\n          [CATALOG_ANNOTATIONS.SOURCE_REPO_TYPE]: this.chart.repoType,\n          [CATALOG_ANNOTATIONS.SOURCE_REPO_NAME]: this.chart.repoName\n        },\n        values,\n      };\n\n      if ( isUpgrade ) {\n        chart.resetValues = this.cmdOptions.resetValues;\n      }\n\n      /*\n        Configure Helm CLI options for doing the install or\n        upgrade operation.\n      */\n      const out = {\n        charts:    [chart],\n        noHooks:   this.cmdOptions.hooks === false,\n        timeout:   this.cmdOptions.timeout > 0 ? `${ this.cmdOptions.timeout }s` : null,\n        wait:      this.cmdOptions.wait === true,\n        namespace: form.metadata.namespace,\n        projectId: this.project,\n      };\n\n      /*\n        Configure Helm CLI options that are specific to\n        installs or specific to upgrades.\n      */\n      if ( isUpgrade ) {\n        out.force = this.cmdOptions.force === true;\n        out.historyMax = this.cmdOptions.historyMax;\n        out.cleanupOnFail = this.cmdOptions.cleanupOnFail;\n      } else {\n        out.disableOpenAPIValidation = this.cmdOptions.openApi === false;\n        out.skipCRDs = this.cmdOptions.crds === false;\n      }\n\n      const more = [];\n\n      const auto = (this.version?.annotations?.[CATALOG_ANNOTATIONS.AUTO_INSTALL_GVK] || '').split(/\\s*,\\s*/).filter((x) => !!x).reverse();\n\n      for ( const gvr of auto ) {\n        const provider = this.$store.getters['catalog/versionProviding']({\n          gvr,\n          repoName: this.chart.repoName,\n          repoType: this.chart.repoType\n        });\n\n        if ( provider ) {\n          more.push(provider);\n        } else {\n          errors.push(`This chart requires another chart that provides ${ gvr }, but none was was found`);\n        }\n      }\n\n      /* Chart custom UI components have the ability to edit CRD chart values eg gatekeeper-crd has values.enableRuntimeDefaultSeccompProfile\n        like the main chart, only CRD values that differ from defaults should be sent on install/upgrade\n        CRDs should be installed with the same global values as the main chart\n      */\n      for (const versionInfo of this.autoInstallInfo) {\n        // allValues are the values potentially changed in the installation ui: any previously customized values + defaults\n        // values are default values from the chart\n        const { allValues, values: crdValues } = versionInfo;\n\n        // only save crd values that differ from the defaults defined in chart values.yaml\n        const customizedCrdValues = diff(crdValues, allValues);\n\n        // CRD globals should be overwritten by main chart globals\n        // we want to avoid including globals present on crd values and not main chart values\n        // that covers the scenario where a global value was customized on a previous install (and so is present in crd global vals) and the user has reverted it to default on this update (no longer present in main chart global vals)\n        const crdValuesToInstall = { ...customizedCrdValues, global: values.global };\n\n        out.charts.unshift({\n          chartName:   versionInfo.chart.name,\n          version:     versionInfo.chart.version,\n          releaseName: versionInfo.chart.annotations[CATALOG_ANNOTATIONS.RELEASE_NAME] || chart.name,\n          projectId:   this.project,\n          values:      crdValuesToInstall\n        });\n      }\n      /*\n        'more' contains additional\n        charts that may not be CRD charts but are also meant to be installed at\n        the same time.\n      */\n      for ( const dependency of more ) {\n        out.charts.unshift({\n          chartName:   dependency.name,\n          version:     dependency.version,\n          releaseName: dependency.annotations[CATALOG_ANNOTATIONS.RELEASE_NAME] || dependency.name,\n          projectId:   this.project,\n          values:      this.addGlobalValuesTo({ global: values.global }),\n          annotations: {\n            ...migratedAnnotations,\n            [CATALOG_ANNOTATIONS.SOURCE_REPO_TYPE]: dependency.repoType,\n            [CATALOG_ANNOTATIONS.SOURCE_REPO_NAME]: dependency.repoName\n          },\n        });\n      }\n\n      return { errors, input: out };\n    },\n\n    tabChanged() {\n      window.scrollTop = 0;\n    },\n\n    updateStepOneReady() {\n      const okRequires = !this.requires.length;\n      const okChart = !!this.chart;\n\n      this.steps[0].ready = okRequires && okChart;\n    },\n\n    updateStepTwoReady(update) {\n      this.updateStep('helmValues', { ready: update });\n    },\n\n    getOptionLabel(opt) {\n      return opt?.chartNameDisplay;\n    },\n\n    showReadmeWindow() {\n      this.$store.dispatch('wm/open', {\n        id:        this.readmeWindowName,\n        label:     this.readmeWindowName,\n        icon:      'file',\n        component: 'ChartReadme',\n        attrs:     { versionInfo: this.versionInfo }\n      }, { root: true });\n      this.shownReadmeWindows.push(this.readmeWindowName);\n    },\n\n    updateStep(stepName, update) {\n      const step = this.steps.find((step) => step.name === stepName);\n\n      if (step) {\n        for (const prop in update) {\n          Vue.set(step, prop, update[prop]);\n        }\n      }\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div\n    v-else-if=\"!legacyApp && !mcapp\"\n    class=\"install-steps pt-20\"\n    :class=\"{ 'isPlainLayout': isPlainLayout}\"\n  >\n    <TypeDescription resource=\"chart\" />\n    <Wizard\n      v-if=\"value\"\n      :steps=\"steps\"\n      :errors=\"errors\"\n      :edit-first-step=\"true\"\n      :banner-title=\"stepperName\"\n      :banner-title-subtext=\"stepperSubtext\"\n      :finish-mode=\"action\"\n      class=\"wizard\"\n      :class=\"{'windowsIncompatible': windowsIncompatible}\"\n      @cancel=\"cancel\"\n      @finish=\"finish\"\n    >\n      <template\n        v-for=\"customStep of customSteps\"\n        v-slot:[customStep.name]\n      >\n        <component\n          :is=\"customStep.component\"\n          :key=\"customStep.name\"\n          @update=\"updateStep(customStep.name, $event)\"\n          @errors=\"e=>errors.push(...e)\"\n        />\n      </template>\n      <template #bannerTitleImage>\n        <div>\n          <div class=\"logo-bg\">\n            <LazyImage\n              :src=\"chart ? chart.icon : ''\"\n              class=\"logo\"\n            />\n          </div>\n          <label\n            v-if=\"windowsIncompatible\"\n            class=\"os-label\"\n          >\n            {{ windowsIncompatible }}\n          </label>\n        </div>\n      </template>\n      <template #basics>\n        <div class=\"step__basic\">\n          <Banner\n            v-if=\"step1Description\"\n            color=\"info\"\n            class=\"description\"\n          >\n            <div>\n              <span>{{ step1Description }}</span>\n              <span\n                v-if=\"namespaceNewAllowed\"\n                class=\"mt-10\"\n              >\n                {{ t('catalog.install.steps.basics.nsCreationDescription', {}, true) }}\n              </span>\n            </div>\n          </Banner>\n          <div\n            v-if=\"requires.length || warnings.length\"\n            class=\"mb-15\"\n          >\n            <Banner\n              v-for=\"msg in requires\"\n              :key=\"msg\"\n              color=\"error\"\n            >\n              <span v-clean-html=\"msg\" />\n            </Banner>\n\n            <Banner\n              v-for=\"msg in warnings\"\n              :key=\"msg\"\n              color=\"warning\"\n            >\n              <span v-clean-html=\"msg\" />\n            </Banner>\n          </div>\n          <div\n            v-if=\"showSelectVersionOrChart\"\n            class=\"row mb-20\"\n          >\n            <div class=\"col span-4\">\n              <!-- We have a chart for the app, let the user select a new version -->\n              <LabeledSelect\n                v-if=\"chart\"\n                :label=\"t('catalog.install.version')\"\n                :value=\"query.versionName\"\n                :options=\"filteredVersions\"\n                :selectable=\"version => !version.disabled\"\n                @input=\"selectVersion\"\n              />\n              <!-- Can't find the chart for the app, let the user try to select one -->\n              <LabeledSelect\n                v-else\n                :label=\"t('catalog.install.chart')\"\n                :value=\"chart\"\n                :options=\"charts\"\n                :selectable=\"option => !option.disabled\"\n                :get-option-label=\"opt => getOptionLabel(opt)\"\n                option-key=\"key\"\n                @input=\"selectChart($event)\"\n              >\n                <template v-slot:option=\"opt\">\n                  <template v-if=\"opt.kind === 'divider'\">\n                    <hr>\n                  </template>\n                  <template v-else-if=\"opt.kind === 'label'\">\n                    <b style=\"position: relative; left: -2.5px;\">{{ opt.label }}</b>\n                  </template>\n                </template>\n              </LabeledSelect>\n            </div>\n          </div>\n          <NameNsDescription\n            v-model=\"value\"\n            :description-hidden=\"true\"\n            :mode=\"mode\"\n            :name-disabled=\"nameDisabled\"\n            :name-required=\"false\"\n            :name-ns-hidden=\"!showNameEditor\"\n            :force-namespace=\"forceNamespace\"\n            :namespace-new-allowed=\"namespaceNewAllowed\"\n            :extra-columns=\"showProject ? ['project'] : []\"\n            :show-spacer=\"false\"\n            :horizontal=\"false\"\n            @isNamespaceNew=\"isNamespaceNew = $event\"\n          >\n            <template\n              v-if=\"showProject\"\n              #project\n            >\n              <LabeledSelect\n                v-model=\"project\"\n                :disabled=\"!namespaceIsNew\"\n                :label=\"t('catalog.install.project')\"\n                option-key=\"id\"\n                :options=\"projectOpts\"\n                :tooltip=\"!namespaceIsNew ? t('catalog.install.namespaceIsInProject', {namespace: value.metadata.namespace}, true) : ''\"\n                :hover-tooltip=\"!namespaceIsNew\"\n                :status=\"'info'\"\n              />\n            </template>\n          </NameNsDescription>\n          <Checkbox\n            v-model=\"showCommandStep\"\n            class=\"mb-20\"\n            :label=\"t('catalog.install.steps.helmCli.checkbox', { action, existing: !!existing })\"\n          />\n\n          <Checkbox\n            v-if=\"showCustomRegistry\"\n            v-model=\"showCustomRegistryInput\"\n            class=\"mb-20\"\n            :label=\"t('catalog.chart.registry.custom.checkBoxLabel')\"\n            :tooltip=\"t('catalog.chart.registry.tooltip')\"\n          />\n          <div class=\"row\">\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-if=\"showCustomRegistryInput\"\n                v-model=\"customRegistrySetting\"\n                label-key=\"catalog.chart.registry.custom.inputLabel\"\n                placeholder-key=\"catalog.chart.registry.custom.placeholder\"\n                :min-height=\"30\"\n              />\n            </div>\n          </div>\n          <div\n            class=\"step__values__controls--spacer\"\n            style=\"flex:1\"\n          >\n&nbsp;\n          </div>\n          <Banner\n            v-if=\"isNamespaceNew && value.metadata.namespace.length\"\n            color=\"info\"\n          >\n            <div v-clean-html=\"t('catalog.install.steps.basics.createNamespace', {namespace: value.metadata.namespace}, true) \" />\n          </Banner>\n        </div>\n      </template>\n      <template #clusterTplVersion>\n        <Banner\n          color=\"info\"\n          class=\"description\"\n        >\n          {{ t('catalog.install.steps.clusterTplVersion.description') }}\n        </Banner>\n        <div class=\"row mb-20\">\n          <div class=\"col span-4\">\n            <LabeledSelect\n              v-if=\"chart\"\n              :label=\"t('catalog.install.version')\"\n              :value=\"query.versionName\"\n              :options=\"filteredVersions\"\n              :selectable=\"version => !version.disabled\"\n              @input=\"selectVersion\"\n            />\n          </div>\n          <div class=\"step__values__controls--spacer\">\n&nbsp;\n          </div>\n          <div class=\"btn-group\">\n            <button\n              type=\"button\"\n              class=\"btn bg-primary btn-sm\"\n              :disabled=\"!hasReadme || showingReadmeWindow\"\n              @click=\"showSlideIn = !showSlideIn\"\n            >\n              {{ t('catalog.install.steps.helmValues.chartInfo.button') }}\n            </button>\n          </div>\n        </div>\n      </template>\n      <template #helmValues>\n        <Banner\n          v-if=\"step2Description\"\n          color=\"info\"\n          class=\"description\"\n        >\n          {{ step2Description }}\n        </Banner>\n        <div class=\"step__values__controls\">\n          <ButtonGroup\n            v-model=\"preFormYamlOption\"\n            data-testid=\"btn-group-options-view\"\n            :options=\"formYamlOptions\"\n            inactive-class=\"bg-disabled btn-sm\"\n            active-class=\"bg-primary btn-sm\"\n            :disabled=\"preFormYamlOption != formYamlOption\"\n          />\n          <div class=\"step__values__controls--spacer\">\n&nbsp;\n          </div>\n          <ButtonGroup\n            v-if=\"showDiff\"\n            v-model=\"diffMode\"\n            :options=\"yamlDiffModeOptions\"\n            inactive-class=\"bg-disabled btn-sm\"\n            active-class=\"bg-primary btn-sm\"\n          />\n          <div\n            v-if=\"hasReadme && !showingReadmeWindow\"\n            class=\"btn-group\"\n          >\n            <button\n              type=\"button\"\n              class=\"btn bg-primary btn-sm\"\n              @click=\"showSlideIn = !showSlideIn\"\n            >\n              {{ t('catalog.install.steps.helmValues.chartInfo.button') }}\n            </button>\n          </div>\n        </div>\n\n        <div class=\"scroll__container\">\n          <div class=\"scroll__content\">\n            <!-- Values (as Custom Component in ./shell/charts/) -->\n            <template v-if=\"valuesComponent && showValuesComponent\">\n              <Tabbed\n                v-if=\"componentHasTabs\"\n                ref=\"tabs\"\n                :side-tabs=\"true\"\n                :class=\"{'with-name': showNameEditor}\"\n                class=\"step__values__content\"\n                @changed=\"tabChanged($event)\"\n              >\n                <component\n                  :is=\"valuesComponent\"\n                  v-model=\"chartValues\"\n                  :mode=\"mode\"\n                  :chart=\"chart\"\n                  class=\"step__values__content\"\n                  :existing=\"existing\"\n                  :version=\"version\"\n                  :version-info=\"versionInfo\"\n                  :auto-install-info=\"autoInstallInfo\"\n                  @warn=\"e=>errors.push(e)\"\n                  @register-before-hook=\"registerBeforeHook\"\n                  @register-after-hook=\"registerAfterHook\"\n                  @valid=\"updateStepTwoReady($event)\"\n                />\n              </Tabbed>\n              <template v-else>\n                <component\n                  :is=\"valuesComponent\"\n                  v-if=\"valuesComponent\"\n                  v-model=\"chartValues\"\n                  :mode=\"mode\"\n                  :chart=\"chart\"\n                  class=\"step__values__content\"\n                  :existing=\"existing\"\n                  :version=\"version\"\n                  :version-info=\"versionInfo\"\n                  :auto-install-info=\"autoInstallInfo\"\n                  @warn=\"e=>errors.push(e)\"\n                  @register-before-hook=\"registerBeforeHook\"\n                  @register-after-hook=\"registerAfterHook\"\n                />\n              </template>\n            </template>\n\n            <!-- Values (as Questions, abstracted component based on question.yaml configuration from repositories)  -->\n            <Tabbed\n              v-else-if=\"hasQuestions && showQuestions\"\n              ref=\"tabs\"\n              :side-tabs=\"true\"\n              :class=\"{'with-name': showNameEditor}\"\n              class=\"step__values__content\"\n              @changed=\"tabChanged($event)\"\n            >\n              <Questions\n                v-model=\"chartValues\"\n                :in-store=\"inStore\"\n                :mode=\"mode\"\n                :source=\"versionInfo\"\n                :ignore-variables=\"ignoreVariables\"\n                tabbed=\"multiple\"\n                :target-namespace=\"targetNamespace\"\n              />\n            </Tabbed>\n            <!-- Values (as YAML) -->\n            <template v-else>\n              <YamlEditor\n                ref=\"yaml\"\n                v-model=\"valuesYaml\"\n                class=\"step__values__content\"\n                :scrolling=\"true\"\n                :initial-yaml-values=\"originalYamlValues\"\n                :editor-mode=\"editorMode\"\n                :hide-preview-buttons=\"true\"\n              />\n            </template>\n          </div>\n        </div>\n\n        <!-- Confirm loss of changes on toggle from yaml/preview to form -->\n        <ResourceCancelModal\n          ref=\"cancelModal\"\n          :is-cancel-modal=\"false\"\n          :is-form=\"true\"\n          @cancel-cancel=\"preFormYamlOption=formYamlOption\"\n          @confirm-cancel=\"formYamlOption = preFormYamlOption;\"\n        />\n      </template>\n      <template #helmCli>\n        <Banner\n          v-if=\"step3Description\"\n          color=\"info\"\n          class=\"description\"\n        >\n          {{ step3Description }}\n        </Banner>\n        <div>\n          <Checkbox\n            v-if=\"existing\"\n            v-model=\"customCmdOpts.cleanupOnFail\"\n            :label=\"t('catalog.install.helm.cleanupOnFail')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-if=\"!existing\"\n            v-model=\"customCmdOpts.crds\"\n            :label=\"t('catalog.install.helm.crds')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-model=\"customCmdOpts.hooks\"\n            :label=\"t('catalog.install.helm.hooks')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-if=\"existing\"\n            v-model=\"customCmdOpts.force\"\n            :label=\"t('catalog.install.helm.force')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-if=\"existing\"\n            v-model=\"customCmdOpts.resetValues\"\n            :label=\"t('catalog.install.helm.resetValues')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-if=\"!existing\"\n            v-model=\"customCmdOpts.openApi\"\n            :label=\"t('catalog.install.helm.openapi')\"\n          />\n        </div>\n        <div>\n          <Checkbox\n            v-model=\"customCmdOpts.wait\"\n            :label=\"t('catalog.install.helm.wait')\"\n          />\n        </div>\n        <div\n          style=\"display: block; max-width: 400px;\"\n          class=\"mt-10\"\n        >\n          <UnitInput\n            v-model.number=\"customCmdOpts.timeout\"\n            :label=\"t('catalog.install.helm.timeout.label')\"\n            :suffix=\"t('catalog.install.helm.timeout.unit', {value: customCmdOpts.timeout})\"\n          />\n        </div>\n        <div\n          style=\"display: block; max-width: 400px;\"\n          class=\"mt-10\"\n        >\n          <UnitInput\n            v-if=\"existing\"\n            v-model.number=\"customCmdOpts.historyMax\"\n            :label=\"t('catalog.install.helm.historyMax.label')\"\n            :suffix=\"t('catalog.install.helm.historyMax.unit', {value: customCmdOpts.historyMax})\"\n          />\n        </div>\n        <div\n          style=\"display: block; max-width: 400px;\"\n          class=\"mt-10\"\n        >\n          <LabeledInput\n            v-model=\"customCmdOpts.description\"\n            label-key=\"catalog.install.helm.description.label\"\n            placeholder-key=\"catalog.install.helm.description.placeholder\"\n            :min-height=\"30\"\n          />\n        </div>\n      </template>\n    </Wizard>\n    <div\n      class=\"slideIn\"\n      :class=\"{'hide': false, 'slideIn__show': showSlideIn}\"\n    >\n      <h2 class=\"slideIn__header\">\n        {{ t('catalog.install.steps.helmValues.chartInfo.label') }}\n        <div class=\"slideIn__header__buttons\">\n          <div\n            v-clean-tooltip=\"t('catalog.install.slideIn.dock')\"\n            class=\"slideIn__header__button\"\n            @click=\"showSlideIn = false; showReadmeWindow()\"\n          >\n            <i class=\"icon icon-dock\" />\n          </div>\n          <div\n            class=\"slideIn__header__button\"\n            @click=\"showSlideIn = false\"\n          >\n            <i class=\"icon icon-close\" />\n          </div>\n        </div>\n      </h2>\n      <ChartReadme\n        v-if=\"hasReadme\"\n        :version-info=\"versionInfo\"\n        class=\"chart-content__tabs\"\n      />\n    </div>\n  </div>\n\n  <!-- App is deployed as a Legacy or MultiCluster app, don't let user update from here -->\n  <div\n    v-else\n    class=\"install-steps\"\n    :class=\"{ 'isPlainLayout': isPlainLayout}\"\n  >\n    <div class=\"outer-container\">\n      <div class=\"header mb-20\">\n        <div class=\"title\">\n          <div class=\"top choice-banner\">\n            <div class=\"title\">\n              <!-- Logo -->\n              <slot name=\"bannerTitleImage\">\n                <div class=\"round-image\">\n                  <LazyImage\n                    :src=\"chart ? chart.icon : ''\"\n                    class=\"logo\"\n                  />\n                </div>\n              </slot>\n              <!-- Title with subtext -->\n              <div class=\"subtitle\">\n                <h2 v-if=\"stepperName\">\n                  {{ stepperName }}\n                </h2>\n                <span\n                  v-if=\"stepperSubtext\"\n                  class=\"subtext\"\n                >{{ stepperSubtext }}</span>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <Banner\n        color=\"warning\"\n        class=\"description\"\n      >\n        <span v-if=\"!mcapp\">\n          {{ t('catalog.install.error.legacy.label', { legacyType: mcapp ? legacyDefs.mcm : legacyDefs.legacy }, true) }}\n        </span>\n        <template v-if=\"!legacyEnabled\">\n          <span v-clean-html=\"t('catalog.install.error.legacy.enableLegacy.prompt', true)\" />\n          <nuxt-link :to=\"legacyFeatureRoute\">\n            {{ t('catalog.install.error.legacy.enableLegacy.goto') }}\n          </nuxt-link>\n        </template>\n        <template v-else-if=\"mcapp\">\n          <span v-clean-html=\"t('catalog.install.error.legacy.mcmNotSupported')\" />\n        </template>\n        <template v-else>\n          <nuxt-link :to=\"legacyAppRoute\">\n            <span v-clean-html=\"t('catalog.install.error.legacy.navigate')\" />\n          </nuxt-link>\n        </template>\n      </Banner>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\" scoped>\n  $title-height: 50px;\n  $padding: 5px;\n  $slideout-width: 35%;\n\n  .install-steps {\n    padding-top: 0;\n    height: 0;\n    position: relative;\n    overflow: hidden;\n\n    &.isPlainLayout {\n      padding: 20px;\n    }\n\n    .description {\n      display: flex;\n      flex-direction: column;\n      margin-top: 0;\n    }\n  }\n\n  .wizard {\n    .logo-bg {\n      margin-right: 10px;\n      height: $title-height;\n      width: $title-height;\n      background-color: white;\n      border: $padding solid white;\n      border-radius: calc( 3 * var(--border-radius));\n      position: relative;\n    }\n\n    .logo {\n      max-height: $title-height - 2 * $padding;\n      max-width: $title-height - 2 * $padding;\n      position: absolute;\n      width: auto;\n      height: auto;\n      top: 0;\n      right: 0;\n      bottom: 0;\n      left: 0;\n      margin: auto;\n    }\n\n    // Hack - We're adding an absolute tag under the logo that we want to consume space without breaking vertical alignment of row.\n    // W  ith the slots available this isn't possible without adding tag specific styles to the root wizard classes\n    &.windowsIncompatible {\n      ::v-deep .header {\n        padding-bottom: 15px;\n      }\n    }\n\n    .os-label {\n      position: absolute;\n      background-color: var(--warning-banner-bg);\n      color:var(--warning);\n      margin-top: 5px;\n    }\n\n  }\n\n  .step {\n    &__basic {\n      display: flex;\n      flex-direction: column;\n      flex: 1;\n\n      .spacer {\n        line-height: 2;\n      }\n    }\n    &__values {\n      &__controls {\n        display: flex;\n        margin-bottom: 15px;\n\n        & > *:not(:last-of-type) {\n          margin-right: $padding * 2;\n        }\n\n        &--spacer {\n          flex: 1\n        }\n\n      }\n\n      &__content {\n        flex: 1;\n\n        ::v-deep .tab-container {\n          overflow: auto;\n        }\n      }\n\n    }\n  }\n\n  .slideIn {\n    $slideout-width: 35%;\n\n    border-left: var(--header-border-size) solid var(--header-border);\n    position: absolute;\n    top: 0;\n    right: -$slideout-width;\n    height: 100%;\n    background-color: var(--topmenu-bg);\n    width: $slideout-width;\n    z-index: 10;\n    display: flex;\n    flex-direction: column;\n\n    padding: 10px;\n\n    transition: right .5s ease;\n\n    &__header {\n      display: flex;\n      align-items: center;\n      justify-content: space-between;\n\n      &__buttons {\n        display: flex;\n      }\n\n      &__button {\n        cursor: pointer;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        padding: 2px;\n        > i {\n          font-size: 20px;\n          opacity: 0.5;\n        }\n        &:hover {\n          background-color: var(--wm-closer-hover-bg);\n        }\n      }\n    }\n\n    .chart-content__tabs {\n      display: flex;\n      flex-direction: column;\n      flex: 1;\n\n      height: 0;\n\n      padding-bottom: 10px;\n\n      ::v-deep .chart-readmes {\n        flex: 1;\n        overflow: auto;\n      }\n    }\n\n    &__show {\n      right: 0;\n    }\n\n  }\n\n  .scroll {\n    &__container {\n      $yaml-height: 200px;\n      min-height: $yaml-height;\n      margin-bottom: 60px;\n      overflow: auto;\n      display: flex;\n      flex: 1;\n    }\n    &__content {\n      display: flex;\n      flex: 1;\n      overflow: auto;\n    }\n  }\n\n  ::v-deep .yaml-editor {\n    flex: 1\n  }\n\n.outer-container {\n  display: flex;\n  flex-direction: column;\n  padding: 0;\n  overflow: auto;\n}\n\n.header {\n  display: flex;\n  align-content: space-between;\n  align-items: center;\n\n  border-bottom: var(--header-border-size) solid var(--header-border);\n\n  & > .title {\n    flex: 1;\n    min-height: 75px;\n  }\n\n  .choice-banner {\n\n    flex-basis: 40%;\n    display: flex;\n    align-items: center;\n\n    &.top {\n\n      H2 {\n        margin: 0px;\n      }\n\n      .title{\n        display: flex;\n        align-items: center;\n        justify-content: space-evenly;\n\n        & > .subtitle {\n          margin: 0 20px;\n        }\n      }\n\n      .subtitle{\n        display: flex;\n        flex-direction: column;\n        & .subtext {\n          color: var(--input-label);\n        }\n      }\n\n    }\n\n    &:not(.top){\n      box-shadow: 0px 0px 12px 3px var(--box-bg);\n      flex-direction: row;\n      align-items: center;\n      justify-content: start;\n      &:hover{\n        outline: var(--outline-width) solid var(--outline);\n        cursor: pointer;\n      }\n    }\n\n    & .round-image {\n      min-width: 50px;\n      height: 50px;\n      margin: 10px 10px 10px 0;\n      border-radius: 50%;\n      overflow: hidden;\n      .logo {\n        min-width: 50px;\n        height: 50px;\n      }\n    }\n  }\n}\n\n</style>\n"],"mappings":"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"}]}