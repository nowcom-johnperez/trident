{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--17-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/cloud-credential/__tests__/azure.test.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/cloud-credential/__tests__/azure.test.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0IHsgbW91bnQgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgQXp1cmVDbG91ZENyZWRzIGZyb20gJ0BzaGVsbC9jbG91ZC1jcmVkZW50aWFsL2F6dXJlLnZ1ZSc7CnZhciBtb2NrU3RvcmUgPSB7CiAgZ2V0dGVyczogewogICAgJ2kxOG4vdCc6IGplc3QuZm4oKQogIH0sCiAgZGlzcGF0Y2g6IGZ1bmN0aW9uIGRpc3BhdGNoKCkgewogICAgcmV0dXJuIGplc3QuZm4oKTsKICB9Cn07CmRlc2NyaWJlKCdjbG91ZCBjcmVkZW50aWFsczogQXp1cmUnLCBmdW5jdGlvbiAoKSB7CiAgdmFyIHdyYXBwZXIgPSBtb3VudChBenVyZUNsb3VkQ3JlZHMsIHsKICAgIHByb3BzRGF0YTogewogICAgICB2YWx1ZTogewogICAgICAgIGRlY29kZWREYXRhOiB7CiAgICAgICAgICBlbnZpcm9ubWVudDogJycsCiAgICAgICAgICBzdWJzY3JpcHRpb25JZDogJycsCiAgICAgICAgICBjbGllbnRJZDogJycsCiAgICAgICAgICBjbGllbnRTZWNyZXQ6ICcnCiAgICAgICAgfSwKICAgICAgICBzZXREYXRhOiBqZXN0LmZuKCkKICAgICAgfQogICAgfSwKICAgIG1vY2tzOiB7CiAgICAgICRzdG9yZTogbW9ja1N0b3JlCiAgICB9CiAgfSk7CiAgaXQoJ3Nob3VsZCBwYXNzIGFsbCB0aGUgY29ycmVjdCBmaWVsZHMgd2hlbiBjaGVja2luZyBpZiBjcmVkZW50aWFscyBhcmUgdmFsaWQnLCAvKiNfX1BVUkVfXyovX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgdmFyIHNweURpc3BhdGNoOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgc3B5RGlzcGF0Y2ggPSBqZXN0LnNweU9uKG1vY2tTdG9yZSwgJ2Rpc3BhdGNoJyk7CiAgICAgICAgICB3cmFwcGVyLnNldERhdGEoewogICAgICAgICAgICB2YWx1ZTogewogICAgICAgICAgICAgIGRlY29kZWREYXRhOiB7CiAgICAgICAgICAgICAgICBlbnZpcm9ubWVudDogJ215LWVudicsCiAgICAgICAgICAgICAgICBzdWJzY3JpcHRpb25JZDogJ215LXN1Yi1pZCcsCiAgICAgICAgICAgICAgICBjbGllbnRJZDogJ215LWMtaWQnLAogICAgICAgICAgICAgICAgY2xpZW50U2VjcmV0OiAnbXktYy1zZWNyZXQnCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9KTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA0OwogICAgICAgICAgcmV0dXJuIHdyYXBwZXIudm0udGVzdCgpOwogICAgICAgIGNhc2UgNDoKICAgICAgICAgIGV4cGVjdChzcHlEaXNwYXRjaCkudG9IYXZlQmVlbkNhbGxlZFdpdGgoJ21hbmFnZW1lbnQvcmVxdWVzdCcsIHsKICAgICAgICAgICAgZGF0YTogewogICAgICAgICAgICAgIGVudmlyb25tZW50OiAnbXktZW52JywKICAgICAgICAgICAgICBzdWJzY3JpcHRpb25JZDogJ215LXN1Yi1pZCcsCiAgICAgICAgICAgICAgY2xpZW50SWQ6ICdteS1jLWlkJywKICAgICAgICAgICAgICBjbGllbnRTZWNyZXQ6ICdteS1jLXNlY3JldCcKICAgICAgICAgICAgfSwKICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsCiAgICAgICAgICAgIHJlZGlyZWN0VW5hdXRob3JpemVkOiBmYWxzZSwKICAgICAgICAgICAgdXJsOiAnL21ldGEvYWtzQ2hlY2tDcmVkZW50aWFscycKICAgICAgICAgIH0pOwogICAgICAgIGNhc2UgNToKICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgfQogICAgfSwgX2NhbGxlZSk7CiAgfSkpKTsKfSk7"},{"version":3,"names":["mount","AzureCloudCreds","mockStore","getters","jest","fn","dispatch","describe","wrapper","propsData","value","decodedData","environment","subscriptionId","clientId","clientSecret","setData","mocks","$store","it","_asyncToGenerator","regeneratorRuntime","mark","_callee","spyDispatch","wrap","_callee$","_context","prev","next","spyOn","vm","test","expect","toHaveBeenCalledWith","data","method","redirectUnauthorized","url","stop"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/cloud-credential/__tests__/azure.test.ts"],"sourcesContent":["import { mount } from '@vue/test-utils';\nimport AzureCloudCreds from '@shell/cloud-credential/azure.vue';\n\nconst mockStore = {\n  getters:  { 'i18n/t': jest.fn() },\n  dispatch: () => jest.fn()\n};\n\ndescribe('cloud credentials: Azure', () => {\n  const wrapper = mount(AzureCloudCreds, {\n    propsData: {\n      value: {\n        decodedData: {\n          environment:    '',\n          subscriptionId: '',\n          clientId:       '',\n          clientSecret:   '',\n        },\n        setData: jest.fn()\n      }\n    },\n    mocks: { $store: mockStore }\n  });\n\n  it('should pass all the correct fields when checking if credentials are valid', async() => {\n    const spyDispatch = jest.spyOn(mockStore, 'dispatch');\n\n    wrapper.setData({\n      value: {\n        decodedData: {\n          environment:    'my-env',\n          subscriptionId: 'my-sub-id',\n          clientId:       'my-c-id',\n          clientSecret:   'my-c-secret',\n        }\n      }\n    });\n\n    await wrapper.vm.test();\n\n    expect(spyDispatch).toHaveBeenCalledWith('management/request', {\n      data: {\n        environment:    'my-env',\n        subscriptionId: 'my-sub-id',\n        clientId:       'my-c-id',\n        clientSecret:   'my-c-secret',\n      },\n      method:               'POST',\n      redirectUnauthorized: false,\n      url:                  '/meta/aksCheckCredentials'\n    });\n  });\n});\n"],"mappings":";;;AAAA,SAASA,KAAK,QAAQ,iBAAiB;AACvC,OAAOC,eAAe,MAAM,mCAAmC;AAE/D,IAAMC,SAAS,GAAG;EAChBC,OAAO,EAAG;IAAE,QAAQ,EAAEC,IAAI,CAACC,EAAE;EAAE,CAAE;EACjCC,QAAQ,EAAE,SAAAA,SAAA;IAAA,OAAMF,IAAI,CAACC,EAAE,EAAE;EAAA;CAC1B;AAEDE,QAAQ,CAAC,0BAA0B,EAAE,YAAK;EACxC,IAAMC,OAAO,GAAGR,KAAK,CAACC,eAAe,EAAE;IACrCQ,SAAS,EAAE;MACTC,KAAK,EAAE;QACLC,WAAW,EAAE;UACXC,WAAW,EAAK,EAAE;UAClBC,cAAc,EAAE,EAAE;UAClBC,QAAQ,EAAQ,EAAE;UAClBC,YAAY,EAAI;SACjB;QACDC,OAAO,EAAEZ,IAAI,CAACC,EAAE;;KAEnB;IACDY,KAAK,EAAE;MAAEC,MAAM,EAAEhB;IAAS;GAC3B,CAAC;EAEFiB,EAAE,CAAC,2EAA2E,eAAAC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,CAAE,SAAAC,QAAA;IAAA,IAAAC,WAAA;IAAA,OAAAH,kBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UACxEL,WAAW,GAAGpB,IAAI,CAAC0B,KAAK,CAAC5B,SAAS,EAAE,UAAU,CAAC;UAErDM,OAAO,CAACQ,OAAO,CAAC;YACdN,KAAK,EAAE;cACLC,WAAW,EAAE;gBACXC,WAAW,EAAK,QAAQ;gBACxBC,cAAc,EAAE,WAAW;gBAC3BC,QAAQ,EAAQ,SAAS;gBACzBC,YAAY,EAAI;;;WAGrB,CAAC;UAACY,QAAA,CAAAE,IAAA;UAAA,OAEGrB,OAAO,CAACuB,EAAE,CAACC,IAAI,EAAE;QAAA;UAEvBC,MAAM,CAACT,WAAW,CAAC,CAACU,oBAAoB,CAAC,oBAAoB,EAAE;YAC7DC,IAAI,EAAE;cACJvB,WAAW,EAAK,QAAQ;cACxBC,cAAc,EAAE,WAAW;cAC3BC,QAAQ,EAAQ,SAAS;cACzBC,YAAY,EAAI;aACjB;YACDqB,MAAM,EAAgB,MAAM;YAC5BC,oBAAoB,EAAE,KAAK;YAC3BC,GAAG,EAAmB;WACvB,CAAC;QAAC;QAAA;UAAA,OAAAX,QAAA,CAAAY,IAAA;MAAA;IAAA,GAAAhB,OAAA;EAAA,CACJ,GAAC;AACJ,CAAC,CAAC"}]}