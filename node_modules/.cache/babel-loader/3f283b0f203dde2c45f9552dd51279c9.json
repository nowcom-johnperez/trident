{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/config/product/gatekeeper.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/config/product/gatekeeper.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZsYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS51bnNjb3BhYmxlcy5mbGF0LmpzIjsKaW1wb3J0IHsgRFNMIH0gZnJvbSAnQHNoZWxsL3N0b3JlL3R5cGUtbWFwJzsKaW1wb3J0IHsgR0FURUtFRVBFUiwgT0JKRUNUX01FVEEgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgQUdFLCBOQU1FIGFzIE5BTUVfQ09MLCBTVEFURSB9IGZyb20gJ0BzaGVsbC9jb25maWcvdGFibGUtaGVhZGVycyc7CmltcG9ydCB7IGZpbmRBbGxDb25zdHJhaW50cyB9IGZyb20gJ0BzaGVsbC91dGlscy9nYXRla2VlcGVyL3V0aWwnOwpleHBvcnQgdmFyIE5BTUUgPSAnZ2F0ZWtlZXBlcic7CmV4cG9ydCB2YXIgQ0hBUlRfTkFNRSA9ICdyYW5jaGVyLWdhdGVrZWVwZXInOwpleHBvcnQgZnVuY3Rpb24gaW5pdChzdG9yZSkgewogIHZhciBfRFNMID0gRFNMKHN0b3JlLCBOQU1FKSwKICAgIHByb2R1Y3QgPSBfRFNMLnByb2R1Y3QsCiAgICBiYXNpY1R5cGUgPSBfRFNMLmJhc2ljVHlwZSwKICAgIGdyb3VwQnkgPSBfRFNMLmdyb3VwQnksCiAgICBoZWFkZXJzID0gX0RTTC5oZWFkZXJzLAogICAgbWFwR3JvdXAgPSBfRFNMLm1hcEdyb3VwLAogICAgbWFwVHlwZSA9IF9EU0wubWFwVHlwZSwKICAgIHNwb29mZWRUeXBlID0gX0RTTC5zcG9vZmVkVHlwZSwKICAgIHZpcnR1YWxUeXBlID0gX0RTTC52aXJ0dWFsVHlwZTsKICBwcm9kdWN0KHsKICAgIGlmSGF2ZUdyb3VwOiAvXiguKlwuKT9nYXRla2VlcGVyXC5zaCQvLAogICAgaWNvbjogJ2dhdGVrZWVwZXInCiAgfSk7CiAgbWFwR3JvdXAoL14oLipcLik/Z2F0ZWtlZXBlclwuc2gkLywgJ09QQSBHYXRla2VlcGVyJyk7CiAgbWFwVHlwZSgvXnRlbXBsYXRlc1wuZ2F0ZWtlZXBlclwuc2hcLmNvbnN0cmFpbnR0ZW1wbGF0ZSQvLCAnVGVtcGxhdGUnKTsKICBtYXBUeXBlKEdBVEVLRUVQRVIuU1BPT0ZFRC5DT05TVFJBSU5ULCAnQ29uc3RyYWludCcpOwogIGJhc2ljVHlwZShbJ2dhdGVrZWVwZXItb3ZlcnZpZXcnLCAnZ2F0ZWtlZXBlci1jb25zdHJhaW50JywgJ2dhdGVrZWVwZXItdGVtcGxhdGUnLCBHQVRFS0VFUEVSLlNQT09GRUQuQ09OU1RSQUlOVCwgR0FURUtFRVBFUi5DT05TVFJBSU5UX1RFTVBMQVRFXSk7CiAgc3Bvb2ZlZFR5cGUoewogICAgbGFiZWw6ICdDb25zdHJhaW50cycsCiAgICB0eXBlOiBHQVRFS0VFUEVSLlNQT09GRUQuQ09OU1RSQUlOVCwKICAgIGNvbGxlY3Rpb25NZXRob2RzOiBbJ1BPU1QnXSwKICAgIHNjaGVtYXM6IFt7CiAgICAgIGlkOiBHQVRFS0VFUEVSLlNQT09GRUQuQ09OU1RSQUlOVCwKICAgICAgdHlwZTogJ3NjaGVtYScsCiAgICAgIGNvbGxlY3Rpb25NZXRob2RzOiBbJ1BPU1QnXSwKICAgICAgcmVzb3VyY2VGaWVsZHM6IHsKICAgICAgICBtZXRhZGF0YTogewogICAgICAgICAgdHlwZTogT0JKRUNUX01FVEEKICAgICAgICB9LAogICAgICAgIHNwZWM6IHsKICAgICAgICAgIHR5cGU6ICdqc29uJwogICAgICAgIH0sCiAgICAgICAga2luZDogewogICAgICAgICAgdHlwZTogJ3N0cmluZycKICAgICAgICB9CiAgICAgIH0KICAgIH1dLAogICAgZ2V0SW5zdGFuY2VzOiBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBfZ2V0SW5zdGFuY2VzID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciByYXdDb25zdHJhaW50czsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICByZXR1cm4gZmluZEFsbENvbnN0cmFpbnRzKHN0b3JlKTsKICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgIHJhd0NvbnN0cmFpbnRzID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCByYXdDb25zdHJhaW50cy5mbGF0KCkubWFwKGZ1bmN0aW9uIChjb25zdHJhaW50KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgICBpZDogY29uc3RyYWludC5pZCwKICAgICAgICAgICAgICAgICAga2luZDogY29uc3RyYWludC5raW5kLAogICAgICAgICAgICAgICAgICB0eXBlOiBHQVRFS0VFUEVSLlNQT09GRUQuQ09OU1RSQUlOVCwKICAgICAgICAgICAgICAgICAgc3BlYzogY29uc3RyYWludC5zcGVjLAogICAgICAgICAgICAgICAgICBtZXRhZGF0YTogY29uc3RyYWludC5tZXRhZGF0YSwKICAgICAgICAgICAgICAgICAgc3RhdHVzOiBjb25zdHJhaW50LnN0YXR1cywKICAgICAgICAgICAgICAgICAgbGlua3M6IHsKICAgICAgICAgICAgICAgICAgICBzZWxmOiBjb25zdHJhaW50LmxpbmtzLnNlbGYsCiAgICAgICAgICAgICAgICAgICAgdmlldzogY29uc3RyYWludC5saW5rcy52aWV3CiAgICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgICAgICAgIGNvbnN0cmFpbnQ6IGNvbnN0cmFpbnQKICAgICAgICAgICAgICAgIH07CiAgICAgICAgICAgICAgfSkpOwogICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpOwogICAgICBmdW5jdGlvbiBnZXRJbnN0YW5jZXMoKSB7CiAgICAgICAgcmV0dXJuIF9nZXRJbnN0YW5jZXMuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgfQogICAgICByZXR1cm4gZ2V0SW5zdGFuY2VzOwogICAgfSgpCiAgfSk7CiAgdmlydHVhbFR5cGUoewogICAgbGFiZWw6ICdPdmVydmlldycsCiAgICBuYW1lc3BhY2VkOiBmYWxzZSwKICAgIG5hbWU6ICdnYXRla2VlcGVyLW92ZXJ2aWV3JywKICAgIHJvdXRlOiB7CiAgICAgIG5hbWU6ICdjLWNsdXN0ZXItZ2F0ZWtlZXBlcicKICAgIH0sCiAgICBleGFjdDogdHJ1ZSwKICAgIHdlaWdodDogMywKICAgIG92ZXJ2aWV3OiB0cnVlCiAgfSk7CiAgaGVhZGVycyhHQVRFS0VFUEVSLkNPTlNUUkFJTlRfVEVNUExBVEUsIFtTVEFURSwgTkFNRV9DT0wsIHsKICAgIG5hbWU6ICdLaW5kJywKICAgIGxhYmVsOiAnS2luZCcsCiAgICB2YWx1ZTogJ2tpbmQnLAogICAgc29ydDogJ2tpbmQnCiAgfSwgQUdFXSk7CiAgaGVhZGVycyhHQVRFS0VFUEVSLlNQT09GRUQuQ09OU1RSQUlOVCwgW1NUQVRFLCBOQU1FX0NPTCwgewogICAgbmFtZTogJ0Rlc2NyaXB0aW9uJywKICAgIGxhYmVsOiAnRGVzY3JpcHRpb24nLAogICAgdmFsdWU6ICJkZXNjcmlwdGlvbiIsCiAgICBzb3J0OiAiZGVzY3JpcHRpb24iCiAgfSwgewogICAgbmFtZTogJ1Zpb2xhdGlvbnMnLAogICAgbGFiZWw6ICdWaW9sYXRpb25zJywKICAgIHZhbHVlOiAnc3RhdHVzLnRvdGFsVmlvbGF0aW9ucycsCiAgICBzb3J0OiAnc3RhdHVzLnRvdGFsVmlvbGF0aW9ucycsCiAgICB3aWR0aDogMTIwCiAgfSwgQUdFXSk7CiAgZ3JvdXBCeShHQVRFS0VFUEVSLlNQT09GRUQuQ09OU1RSQUlOVCwgJ2tpbmQnKTsKfQ=="},{"version":3,"names":["DSL","GATEKEEPER","OBJECT_META","AGE","NAME","NAME_COL","STATE","findAllConstraints","CHART_NAME","init","store","_DSL","product","basicType","groupBy","headers","mapGroup","mapType","spoofedType","virtualType","ifHaveGroup","icon","SPOOFED","CONSTRAINT","CONSTRAINT_TEMPLATE","label","type","collectionMethods","schemas","id","resourceFields","metadata","spec","kind","getInstances","_getInstances","_asyncToGenerator","regeneratorRuntime","mark","_callee","rawConstraints","wrap","_callee$","_context","prev","next","sent","abrupt","flat","map","constraint","status","links","self","view","stop","apply","arguments","namespaced","name","route","exact","weight","overview","value","sort","width"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/config/product/gatekeeper.js"],"sourcesContent":["import { DSL } from '@shell/store/type-map';\nimport { GATEKEEPER, OBJECT_META } from '@shell/config/types';\nimport { AGE, NAME as NAME_COL, STATE } from '@shell/config/table-headers';\nimport { findAllConstraints } from '@shell/utils/gatekeeper/util';\n\nexport const NAME = 'gatekeeper';\nexport const CHART_NAME = 'rancher-gatekeeper';\n\nexport function init(store) {\n  const {\n    product,\n    basicType,\n    groupBy,\n    headers,\n    mapGroup,\n    mapType,\n    spoofedType,\n    virtualType\n  } = DSL(store, NAME);\n\n  product({\n    ifHaveGroup: /^(.*\\.)?gatekeeper\\.sh$/,\n    icon:        'gatekeeper',\n  });\n\n  mapGroup(/^(.*\\.)?gatekeeper\\.sh$/, 'OPA Gatekeeper');\n  mapType(/^templates\\.gatekeeper\\.sh\\.constrainttemplate$/, 'Template');\n  mapType(GATEKEEPER.SPOOFED.CONSTRAINT, 'Constraint');\n\n  basicType([\n    'gatekeeper-overview',\n    'gatekeeper-constraint',\n    'gatekeeper-template',\n    GATEKEEPER.SPOOFED.CONSTRAINT,\n    GATEKEEPER.CONSTRAINT_TEMPLATE\n  ]);\n\n  spoofedType({\n    label:             'Constraints',\n    type:              GATEKEEPER.SPOOFED.CONSTRAINT,\n    collectionMethods: ['POST'],\n    schemas:           [\n      {\n        id:                GATEKEEPER.SPOOFED.CONSTRAINT,\n        type:              'schema',\n        collectionMethods: ['POST'],\n        resourceFields:    {\n          metadata: { type: OBJECT_META },\n          spec:     { type: 'json' },\n          kind:     { type: 'string' }\n        }\n      }\n    ],\n    getInstances: async() => {\n      const rawConstraints = await findAllConstraints(store);\n\n      return rawConstraints\n        .flat()\n        .map((constraint) => {\n          return {\n            id:       constraint.id,\n            kind:     constraint.kind,\n            type:     GATEKEEPER.SPOOFED.CONSTRAINT,\n            spec:     constraint.spec,\n            metadata: constraint.metadata,\n            status:   constraint.status,\n            links:    {\n              self: constraint.links.self,\n              view: constraint.links.view\n            },\n            constraint\n          };\n        });\n    }\n  });\n\n  virtualType({\n    label:      'Overview',\n    namespaced: false,\n    name:       'gatekeeper-overview',\n    route:      { name: 'c-cluster-gatekeeper' },\n    exact:      true,\n    weight:     3,\n    overview:   true,\n  });\n\n  headers(GATEKEEPER.CONSTRAINT_TEMPLATE, [\n    STATE,\n    NAME_COL,\n    {\n      name:  'Kind',\n      label: 'Kind',\n      value: 'kind',\n      sort:  'kind'\n    },\n    AGE,\n  ]);\n\n  headers(GATEKEEPER.SPOOFED.CONSTRAINT, [\n    STATE,\n    NAME_COL,\n    {\n      name:  'Description',\n      label: 'Description',\n      value: `description`,\n      sort:  `description`\n    },\n    {\n      name:  'Violations',\n      label: 'Violations',\n      value: 'status.totalViolations',\n      sort:  'status.totalViolations',\n      width: 120\n    },\n    AGE,\n  ]);\n\n  groupBy(GATEKEEPER.SPOOFED.CONSTRAINT, 'kind');\n}\n"],"mappings":"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"}]}