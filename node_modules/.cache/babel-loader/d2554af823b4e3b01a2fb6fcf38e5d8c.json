{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--17-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/chart/__tests__/S3.test.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/chart/__tests__/S3.test.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKLyogZXNsaW50LWRpc2FibGUgamVzdC9uby1ob29rcyAqLwppbXBvcnQgeyBtb3VudCwgY3JlYXRlTG9jYWxWdWUgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgUzMgZnJvbSAnQHNoZWxsL2NoYXJ0L3JhbmNoZXItYmFja3VwL1MzJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CnZhciBsb2NhbFZ1ZSA9IGNyZWF0ZUxvY2FsVnVlKCk7CmxvY2FsVnVlLnVzZShWdWV4KTsKZGVzY3JpYmUoJ3JhbmNoZXItYmFja3VwOiBTMycsIGZ1bmN0aW9uICgpIHsKICB2YXIgbW9ja1N0b3JlID0gewogICAgZ2V0dGVyczogewogICAgICAnaTE4bi90JzogZnVuY3Rpb24gaTE4blQodGV4dCkgewogICAgICAgIHJldHVybiB0ZXh0OwogICAgICB9LAogICAgICB0OiBmdW5jdGlvbiB0KHRleHQpIHsKICAgICAgICByZXR1cm4gdGV4dDsKICAgICAgfQogICAgfQogIH07CiAgdmFyIHdyYXBwZXIgPSBtb3VudChTMywgewogICAgbW9ja3M6IHsKICAgICAgJHN0b3JlOiBtb2NrU3RvcmUKICAgIH0KICB9KTsKICBpdCgnc2hvdWxkIGVtaXQgaW52YWxpZCB3aGVuIGZvcm0gaXMgbm90IGZpbGxlZCcsIGZ1bmN0aW9uICgpIHsKICAgIGV4cGVjdCh3cmFwcGVyLmVtaXR0ZWQoJ3ZhbGlkJykpLnRvSGF2ZUxlbmd0aCgxKTsKICAgIGV4cGVjdCh3cmFwcGVyLmVtaXR0ZWQoJ3ZhbGlkJylbMF1bMF0pLnRvQmVGYWxzeSgpOwogIH0pOwogIGl0KCdzaG91bGQgZW1pdCB2YWxpZCB3aGVuIHJlcXVpcmVkIGZpZWxkcyBhcmUgZmlsbGVkJywgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgIHZhciBidWNrZXROYW1lLCBlbmRwb2ludCwgdGVzdENhc2VzLCBfaSwgX3Rlc3RDYXNlcywgdGVzdENhc2U7CiAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICBjYXNlIDA6CiAgICAgICAgICBidWNrZXROYW1lID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9IlMzLWJ1Y2tldE5hbWUiXScpLmZpbmQoJ2lucHV0Jyk7CiAgICAgICAgICBlbmRwb2ludCA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJTMy1lbmRwb2ludCJdJykuZmluZCgnaW5wdXQnKTsKICAgICAgICAgIHRlc3RDYXNlcyA9IFt7CiAgICAgICAgICAgIGJ1Y2tldE5hbWVJbnB1dDogJ3ZhbCcsCiAgICAgICAgICAgIGVuZHBvaW50SW5wdXQ6ICcnLAogICAgICAgICAgICByZXN1bHQ6IGZhbHNlCiAgICAgICAgICB9LCB7CiAgICAgICAgICAgIGJ1Y2tldE5hbWVJbnB1dDogJycsCiAgICAgICAgICAgIGVuZHBvaW50SW5wdXQ6ICd2YWwnLAogICAgICAgICAgICByZXN1bHQ6IGZhbHNlCiAgICAgICAgICB9XTsKICAgICAgICAgIF9pID0gMCwgX3Rlc3RDYXNlcyA9IHRlc3RDYXNlczsKICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBpZiAoIShfaSA8IF90ZXN0Q2FzZXMubGVuZ3RoKSkgewogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTU7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgfQogICAgICAgICAgdGVzdENhc2UgPSBfdGVzdENhc2VzW19pXTsKICAgICAgICAgIGJ1Y2tldE5hbWUuc2V0VmFsdWUodGVzdENhc2UuYnVja2V0TmFtZUlucHV0KTsKICAgICAgICAgIGVuZHBvaW50LnNldFZhbHVlKHRlc3RDYXNlLmVuZHBvaW50SW5wdXQpOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDEwOwogICAgICAgICAgcmV0dXJuIHdyYXBwZXIudm0uJG5leHRUaWNrKCk7CiAgICAgICAgY2FzZSAxMDoKICAgICAgICAgIGV4cGVjdCh3cmFwcGVyLmVtaXR0ZWQoJ3ZhbGlkJykpLnRvSGF2ZUxlbmd0aCgxKTsKICAgICAgICAgIGV4cGVjdCh3cmFwcGVyLmVtaXR0ZWQoJ3ZhbGlkJylbMF1bMF0pLnRvQmUoZmFsc2UpOwogICAgICAgIGNhc2UgMTI6CiAgICAgICAgICBfaSsrOwogICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlIDE1OgogICAgICAgICAgYnVja2V0TmFtZS5zZXRWYWx1ZSgndmFsMScpOwogICAgICAgICAgZW5kcG9pbnQuc2V0VmFsdWUoJ3ZhbDInKTsKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxOTsKICAgICAgICAgIHJldHVybiB3cmFwcGVyLnZtLiRuZXh0VGljaygpOwogICAgICAgIGNhc2UgMTk6CiAgICAgICAgICBleHBlY3Qod3JhcHBlci5lbWl0dGVkKCd2YWxpZCcpKS50b0hhdmVMZW5ndGgoMik7CiAgICAgICAgICBleHBlY3Qod3JhcHBlci5lbWl0dGVkKCd2YWxpZCcpWzFdWzBdKS50b0JlKHRydWUpOwogICAgICAgIGNhc2UgMjE6CiAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgIH0KICAgIH0sIF9jYWxsZWUpOwogIH0pKSk7Cn0pOw=="},{"version":3,"names":["mount","createLocalVue","S3","Vuex","localVue","use","describe","mockStore","getters","i18nT","text","t","wrapper","mocks","$store","it","expect","emitted","toHaveLength","toBeFalsy","_asyncToGenerator","regeneratorRuntime","mark","_callee","bucketName","endpoint","testCases","_i","_testCases","testCase","wrap","_callee$","_context","prev","next","find","bucketNameInput","endpointInput","result","length","setValue","vm","$nextTick","toBe","stop"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/chart/__tests__/S3.test.ts"],"sourcesContent":["/* eslint-disable jest/no-hooks */\nimport { mount, createLocalVue } from '@vue/test-utils';\n\nimport S3 from '@shell/chart/rancher-backup/S3';\nimport Vuex from 'vuex';\n\nconst localVue = createLocalVue();\n\nlocalVue.use(Vuex);\n\ndescribe('rancher-backup: S3', () => {\n  const mockStore = { getters: { 'i18n/t': (text: string) => text, t: (text: string) => text } };\n  const wrapper = mount(S3, { mocks: { $store: mockStore } });\n\n  it('should emit invalid when form is not filled', () => {\n    expect(wrapper.emitted('valid')).toHaveLength(1);\n    expect(wrapper.emitted('valid')![0][0]).toBeFalsy();\n  });\n\n  it('should emit valid when required fields are filled', async() => {\n    const bucketName = wrapper.find('[data-testid=\"S3-bucketName\"]').find('input');\n    const endpoint = wrapper.find('[data-testid=\"S3-endpoint\"]').find('input');\n    const testCases = [\n      {\n        bucketNameInput: 'val',\n        endpointInput:   '',\n        result:          false\n      },\n      {\n        bucketNameInput: '',\n        endpointInput:   'val',\n        result:          false\n      }\n    ];\n\n    for (const testCase of testCases) {\n      bucketName.setValue(testCase.bucketNameInput);\n      endpoint.setValue(testCase.endpointInput);\n      await wrapper.vm.$nextTick();\n      expect(wrapper.emitted('valid')).toHaveLength(1);\n      expect(wrapper.emitted('valid')![0][0]).toBe(false);\n    }\n\n    bucketName.setValue('val1');\n    endpoint.setValue('val2');\n    await wrapper.vm.$nextTick();\n    expect(wrapper.emitted('valid')).toHaveLength(2);\n    expect(wrapper.emitted('valid')![1][0]).toBe(true);\n  });\n});\n"],"mappings":"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"}]}