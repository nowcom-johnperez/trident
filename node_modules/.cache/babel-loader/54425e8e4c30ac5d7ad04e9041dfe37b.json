{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/detail/networking.k8s.io.ingress.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/detail/networking.k8s.io.ingress.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBhbGxIYXNoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3Byb21pc2UnOwppbXBvcnQgeyBTRUNSRVQsIFNFUlZJQ0UgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IENyZWF0ZUVkaXRWaWV3IGZyb20gJ0BzaGVsbC9taXhpbnMvY3JlYXRlLWVkaXQtdmlldyc7CmltcG9ydCBSdWxlcyBmcm9tICdAc2hlbGwvZWRpdC9uZXR3b3JraW5nLms4cy5pby5pbmdyZXNzL1J1bGVzJzsKaW1wb3J0IFJlc291cmNlVGFicyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL1Jlc291cmNlVGFicyc7CmltcG9ydCBUYWIgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvVGFiYmVkL1RhYic7CmltcG9ydCB7IFNFQ1JFVF9UWVBFUyBhcyBUWVBFUyB9IGZyb20gJ0BzaGVsbC9jb25maWcvc2VjcmV0JzsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICdDUlVJbmdyZXNzJywKICBjb21wb25lbnRzOiB7CiAgICBSZXNvdXJjZVRhYnM6IFJlc291cmNlVGFicywKICAgIFJ1bGVzOiBSdWxlcywKICAgIFRhYjogVGFiCiAgfSwKICBtaXhpbnM6IFtDcmVhdGVFZGl0Vmlld10sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciBoYXNoOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2goewogICAgICAgICAgICAgIHNlY3JldHM6IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogU0VDUkVUCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgc2VydmljZXM6IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogU0VSVklDRQogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBoYXNoID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgX3RoaXMuYWxsU2VydmljZXMgPSBoYXNoLnNlcnZpY2VzOwogICAgICAgICAgICBfdGhpcy5hbGxTZWNyZXRzID0gaGFzaC5zZWNyZXRzOwogICAgICAgICAgY2FzZSA1OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWxsU2VjcmV0czogW10sCiAgICAgIGFsbFNlcnZpY2VzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBzZXJ2aWNlVGFyZ2V0czogZnVuY3Rpb24gc2VydmljZVRhcmdldHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmZpbHRlckJ5Q3VycmVudFJlc291cmNlTmFtZXNwYWNlKHRoaXMuYWxsU2VydmljZXMpLm1hcChmdW5jdGlvbiAoc2VydmljZSkgewogICAgICAgIHZhciBfc2VydmljZSRzcGVjJHBvcnRzOwogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsYWJlbDogc2VydmljZS5tZXRhZGF0YS5uYW1lLAogICAgICAgICAgdmFsdWU6IHNlcnZpY2UubWV0YWRhdGEubmFtZSwKICAgICAgICAgIHBvcnRzOiAoX3NlcnZpY2Ukc3BlYyRwb3J0cyA9IHNlcnZpY2Uuc3BlYy5wb3J0cykgPT09IG51bGwgfHwgX3NlcnZpY2Ukc3BlYyRwb3J0cyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3NlcnZpY2Ukc3BlYyRwb3J0cy5tYXAoZnVuY3Rpb24gKHApIHsKICAgICAgICAgICAgcmV0dXJuIHAucG9ydDsKICAgICAgICAgIH0pCiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgZmlyc3RUYWJMYWJlbDogZnVuY3Rpb24gZmlyc3RUYWJMYWJlbCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXNWaWV3ID8gdGhpcy50KCdpbmdyZXNzLnJ1bGVzQW5kQ2VydGlmaWNhdGVzLnRpdGxlJykgOiB0aGlzLnQoJ2luZ3Jlc3MucnVsZXMudGl0bGUnKTsKICAgIH0sCiAgICBjZXJ0aWZpY2F0ZXM6IGZ1bmN0aW9uIGNlcnRpZmljYXRlcygpIHsKICAgICAgcmV0dXJuIHRoaXMuZmlsdGVyQnlDdXJyZW50UmVzb3VyY2VOYW1lc3BhY2UodGhpcy5hbGxTZWNyZXRzLmZpbHRlcihmdW5jdGlvbiAoc2VjcmV0KSB7CiAgICAgICAgcmV0dXJuIHNlY3JldC5fdHlwZSA9PT0gVFlQRVMuVExTOwogICAgICB9KSkubWFwKGZ1bmN0aW9uIChzZWNyZXQpIHsKICAgICAgICB2YXIgaWQgPSBzZWNyZXQuaWQ7CiAgICAgICAgcmV0dXJuIGlkLnNsaWNlKGlkLmluZGV4T2YoJy8nKSArIDEpOwogICAgICB9KTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGZpbHRlckJ5Q3VycmVudFJlc291cmNlTmFtZXNwYWNlOiBmdW5jdGlvbiBmaWx0ZXJCeUN1cnJlbnRSZXNvdXJjZU5hbWVzcGFjZShyZXNvdXJjZXMpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIHJldHVybiByZXNvdXJjZXMuZmlsdGVyKGZ1bmN0aW9uIChyZXNvdXJjZSkgewogICAgICAgIHJldHVybiByZXNvdXJjZS5tZXRhZGF0YS5uYW1lc3BhY2UgPT09IF90aGlzMi52YWx1ZS5tZXRhZGF0YS5uYW1lc3BhY2U7CiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"names":["allHash","SECRET","SERVICE","CreateEditView","Rules","ResourceTabs","Tab","SECRET_TYPES","TYPES","name","components","mixins","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","hash","wrap","_callee$","_context","prev","next","secrets","$store","dispatch","type","services","sent","allServices","allSecrets","stop","data","computed","serviceTargets","filterByCurrentResourceNamespace","map","service","_service$spec$ports","label","metadata","value","ports","spec","p","port","firstTabLabel","isView","t","certificates","filter","secret","_type","TLS","id","slice","indexOf","methods","resources","_this2","resource","namespace"],"sources":["node_modules/@rancher/shell/detail/networking.k8s.io.ingress.vue"],"sourcesContent":["<script>\r\nimport { allHash } from '@shell/utils/promise';\r\nimport { SECRET, SERVICE } from '@shell/config/types';\r\nimport CreateEditView from '@shell/mixins/create-edit-view';\r\nimport Rules from '@shell/edit/networking.k8s.io.ingress/Rules';\r\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\r\nimport Tab from '@shell/components/Tabbed/Tab';\r\nimport { SECRET_TYPES as TYPES } from '@shell/config/secret';\r\n\r\nexport default {\r\n  name:       'CRUIngress',\r\n  components: {\r\n    ResourceTabs,\r\n    Rules,\r\n    Tab\r\n  },\r\n  mixins: [CreateEditView],\r\n  async fetch() {\r\n    const hash = await allHash({\r\n      secrets:  this.$store.dispatch('cluster/findAll', { type: SECRET }),\r\n      services: this.$store.dispatch('cluster/findAll', { type: SERVICE }),\r\n    });\r\n\r\n    this.allServices = hash.services;\r\n    this.allSecrets = hash.secrets;\r\n  },\r\n  data() {\r\n    return { allSecrets: [], allServices: [] };\r\n  },\r\n  computed: {\r\n    serviceTargets() {\r\n      return this.filterByCurrentResourceNamespace(this.allServices)\r\n        .map((service) => ({\r\n          label: service.metadata.name,\r\n          value: service.metadata.name,\r\n          ports: service.spec.ports?.map((p) => p.port)\r\n        }));\r\n    },\r\n    firstTabLabel() {\r\n      return this.isView ? this.t('ingress.rulesAndCertificates.title') : this.t('ingress.rules.title');\r\n    },\r\n    certificates() {\r\n      return this.filterByCurrentResourceNamespace(this.allSecrets.filter((secret) => secret._type === TYPES.TLS)).map((secret) => {\r\n        const { id } = secret;\r\n\r\n        return id.slice(id.indexOf('/') + 1);\r\n      });\r\n    },\r\n  },\r\n  methods: {\r\n    filterByCurrentResourceNamespace(resources) {\r\n      return resources.filter((resource) => {\r\n        return resource.metadata.namespace === this.value.metadata.namespace;\r\n      });\r\n    }\r\n  }\r\n};\r\n</script>\r\n<template>\r\n  <ResourceTabs\n    v-model=\"value\"\n    mode=\"view\"\n    class=\"mt-20\"\n  >\r\n    <Tab\n      :label=\"t('ingress.rules.title')\"\n      name=\"rules\"\n      :weight=\"1\"\n    >\r\n      <Rules\n        v-model=\"value\"\n        :mode=\"mode\"\n        :service-targets=\"serviceTargets\"\n        :certificates=\"certificates\"\n      />\r\n    </Tab>\r\n  </ResourceTabs>\r\n</template>\r\n"],"mappings":";;;;;;;AACA,SAAAA,OAAA;AACA,SAAAC,MAAA,EAAAC,OAAA;AACA,OAAAC,cAAA;AACA,OAAAC,KAAA;AACA,OAAAC,YAAA;AACA,OAAAC,GAAA;AACA,SAAAC,YAAA,IAAAC,KAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IACAL,YAAA,EAAAA,YAAA;IACAD,KAAA,EAAAA,KAAA;IACAE,GAAA,EAAAA;EACA;EACAK,MAAA,GAAAR,cAAA;EACAS,KAAA,WAAAA,MAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAAC,QAAA;MAAA,IAAAC,IAAA;MAAA,OAAAH,kBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACAvB,OAAA;cACAwB,OAAA,EAAAX,KAAA,CAAAY,MAAA,CAAAC,QAAA;gBAAAC,IAAA,EAAA1B;cAAA;cACA2B,QAAA,EAAAf,KAAA,CAAAY,MAAA,CAAAC,QAAA;gBAAAC,IAAA,EAAAzB;cAAA;YACA;UAAA;YAHAgB,IAAA,GAAAG,QAAA,CAAAQ,IAAA;YAKAhB,KAAA,CAAAiB,WAAA,GAAAZ,IAAA,CAAAU,QAAA;YACAf,KAAA,CAAAkB,UAAA,GAAAb,IAAA,CAAAM,OAAA;UAAA;UAAA;YAAA,OAAAH,QAAA,CAAAW,IAAA;QAAA;MAAA,GAAAf,OAAA;IAAA;EACA;EACAgB,IAAA,WAAAA,KAAA;IACA;MAAAF,UAAA;MAAAD,WAAA;IAAA;EACA;EACAI,QAAA;IACAC,cAAA,WAAAA,eAAA;MACA,YAAAC,gCAAA,MAAAN,WAAA,EACAO,GAAA,WAAAC,OAAA;QAAA,IAAAC,mBAAA;QAAA;UACAC,KAAA,EAAAF,OAAA,CAAAG,QAAA,CAAAhC,IAAA;UACAiC,KAAA,EAAAJ,OAAA,CAAAG,QAAA,CAAAhC,IAAA;UACAkC,KAAA,GAAAJ,mBAAA,GAAAD,OAAA,CAAAM,IAAA,CAAAD,KAAA,cAAAJ,mBAAA,uBAAAA,mBAAA,CAAAF,GAAA,WAAAQ,CAAA;YAAA,OAAAA,CAAA,CAAAC,IAAA;UAAA;QACA;MAAA;IACA;IACAC,aAAA,WAAAA,cAAA;MACA,YAAAC,MAAA,QAAAC,CAAA,8CAAAA,CAAA;IACA;IACAC,YAAA,WAAAA,aAAA;MACA,YAAAd,gCAAA,MAAAL,UAAA,CAAAoB,MAAA,WAAAC,MAAA;QAAA,OAAAA,MAAA,CAAAC,KAAA,KAAA7C,KAAA,CAAA8C,GAAA;MAAA,IAAAjB,GAAA,WAAAe,MAAA;QACA,IAAAG,EAAA,GAAAH,MAAA,CAAAG,EAAA;QAEA,OAAAA,EAAA,CAAAC,KAAA,CAAAD,EAAA,CAAAE,OAAA;MACA;IACA;EACA;EACAC,OAAA;IACAtB,gCAAA,WAAAA,iCAAAuB,SAAA;MAAA,IAAAC,MAAA;MACA,OAAAD,SAAA,CAAAR,MAAA,WAAAU,QAAA;QACA,OAAAA,QAAA,CAAApB,QAAA,CAAAqB,SAAA,KAAAF,MAAA,CAAAlB,KAAA,CAAAD,QAAA,CAAAqB,SAAA;MACA;IACA;EACA;AACA"}]}