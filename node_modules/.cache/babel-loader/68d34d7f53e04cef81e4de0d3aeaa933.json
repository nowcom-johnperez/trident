{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/axios.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/axios.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bIkBAaXRlcmF0b3IiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5zbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCBodHRwcyBmcm9tICdodHRwcyc7CmltcG9ydCB7IENTUkYgfSBmcm9tICdAc2hlbGwvY29uZmlnL2Nvb2tpZXMnOwppbXBvcnQgeyBwYXJzZSBhcyBzZXRDb29raWVQYXJzZXIgfSBmcm9tICdzZXQtY29va2llLXBhcnNlcic7CmltcG9ydCBwa2cgZnJvbSAnLi4vcGFja2FnZS5qc29uJzsKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKF9yZWYpIHsKICB2YXIgJGF4aW9zID0gX3JlZi4kYXhpb3MsCiAgICAkY29va2llcyA9IF9yZWYuJGNvb2tpZXMsCiAgICBpc0RldiA9IF9yZWYuaXNEZXYsCiAgICByZXEgPSBfcmVmLnJlcTsKICAkYXhpb3MuZGVmYXVsdHMuaGVhZGVycy5jb21tb25bJ0FjY2VwdCddID0gJ2FwcGxpY2F0aW9uL2pzb24nOwogICRheGlvcy5kZWZhdWx0cy53aXRoQ3JlZGVudGlhbHMgPSB0cnVlOwogICRheGlvcy5vblJlcXVlc3QoZnVuY3Rpb24gKGNvbmZpZykgewogICAgdmFyIGNzcmYgPSAkY29va2llcy5nZXQoQ1NSRiwgewogICAgICBwYXJzZUpTT046IGZhbHNlCiAgICB9KTsKICAgIGlmIChjc3JmKSB7CiAgICAgIGNvbmZpZy5oZWFkZXJzWyd4LWFwaS1jc3JmJ10gPSBjc3JmOwogICAgfQogICAgaWYgKHByb2Nlc3Muc2VydmVyKSB7CiAgICAgIGNvbmZpZy5oZWFkZXJzLmNvbW1vblsnYWNjZXNzLWNvbnRyb2wtZXhwb3NlLWhlYWRlcnMnXSA9ICJzZXQtY29va2llIjsKICAgICAgY29uZmlnLmhlYWRlcnMuY29tbW9uWyd1c2VyLWFnZW50J10gPSAiRGFzaGJvYXJkIChNb3ppbGxhKSB2Ii5jb25jYXQocGtnLnZlcnNpb24pOwogICAgICBpZiAocmVxLmhlYWRlcnMuY29va2llKSB7CiAgICAgICAgY29uZmlnLmhlYWRlcnMuY29tbW9uWydjb29raWVzJ10gPSByZXEuaGVhZGVycy5jb29raWU7CiAgICAgIH0KICAgICAgaWYgKGNvbmZpZy51cmwuc3RhcnRzV2l0aCgnLycpKSB7CiAgICAgICAgY29uZmlnLmJhc2VVUkwgPSAiIi5jb25jYXQocmVxLnByb3RvY29sIHx8ICdodHRwcycsICI6Ly8iKS5jb25jYXQocmVxLmhlYWRlcnMuaG9zdCk7CiAgICAgIH0KICAgIH0KICB9KTsKICBpZiAocHJvY2Vzcy5zZXJ2ZXIpIHsKICAgICRheGlvcy5vblJlc3BvbnNlKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgdmFyIHBhcnNlZCA9IHNldENvb2tpZVBhcnNlcihyZXMuaGVhZGVyc1snc2V0LWNvb2tpZSddIHx8IFtdKTsKICAgICAgdmFyIF9pdGVyYXRvciA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHBhcnNlZCksCiAgICAgICAgX3N0ZXA7CiAgICAgIHRyeSB7CiAgICAgICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgICAgIHZhciBvcHQgPSBfc3RlcC52YWx1ZTsKICAgICAgICAgIHZhciBrZXkgPSBvcHQubmFtZTsKICAgICAgICAgIHZhciB2YWx1ZSA9IG9wdC52YWx1ZTsKICAgICAgICAgIGRlbGV0ZSBvcHQubmFtZTsKICAgICAgICAgIGRlbGV0ZSBvcHQudmFsdWU7CiAgICAgICAgICBvcHQuZW5jb2RlID0gZnVuY3Rpb24gKHgpIHsKICAgICAgICAgICAgcmV0dXJuIHg7CiAgICAgICAgICB9OwogICAgICAgICAgb3B0LnNhbWVTaXRlID0gdHJ1ZTsKICAgICAgICAgIG9wdC5wYXRoID0gJy8nOwogICAgICAgICAgb3B0LnNlY3VyZSA9IHRydWU7CiAgICAgICAgICAkY29va2llcy5zZXQoa2V5LCB2YWx1ZSwgb3B0KTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQogICAgfSk7CiAgfQogIGlmIChpc0RldikgewogICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL251eHQtY29tbXVuaXR5L2F4aW9zLW1vZHVsZS9ibG9iL2Rldi9saWIvbW9kdWxlLmpzI0w3OAogICAgLy8gZm9yY2VzIGxvY2FsaG9zdCB0byBodHRwLCBmb3Igbm8gb2J2aW91cyByZWFzb24uCiAgICAvLyBCdXQgd2UgbmV2ZXIgaGF2ZSBhbnkgcmVhc29uIHRvIHRhbGsgdG8gYW55dGhpbmcgcGxhaW50ZXh0LgogICAgaWYgKCRheGlvcy5kZWZhdWx0cy5iYXNlVVJMLnN0YXJ0c1dpdGgoJ2h0dHA6Ly8nKSkgewogICAgICAkYXhpb3MuZGVmYXVsdHMuYmFzZVVSTCA9ICRheGlvcy5kZWZhdWx0cy5iYXNlVVJMLnJlcGxhY2UoL15odHRwOi8sICdodHRwczonKTsKICAgIH0KICAgIHZhciBpbnNlY3VyZUFnZW50ID0gbmV3IGh0dHBzLkFnZW50KHsKICAgICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZQogICAgfSk7CiAgICAkYXhpb3MuZGVmYXVsdHMuaHR0cHNBZ2VudCA9IGluc2VjdXJlQWdlbnQ7CiAgICAkYXhpb3MuaHR0cHNBZ2VudCA9IGluc2VjdXJlQWdlbnQ7CiAgfQp9"},{"version":3,"names":["https","CSRF","parse","setCookieParser","pkg","_ref","$axios","$cookies","isDev","req","defaults","headers","common","withCredentials","onRequest","config","csrf","get","parseJSON","process","server","concat","version","cookie","url","startsWith","baseURL","protocol","host","onResponse","res","parsed","_iterator","_createForOfIteratorHelper","_step","s","n","done","opt","value","key","name","encode","x","sameSite","path","secure","set","err","e","f","replace","insecureAgent","Agent","rejectUnauthorized","httpsAgent"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/axios.js"],"sourcesContent":["import https from 'https';\nimport { CSRF } from '@shell/config/cookies';\nimport { parse as setCookieParser } from 'set-cookie-parser';\nimport pkg from '../package.json';\n\nexport default function({\n  $axios, $cookies, isDev, req\n}) {\n  $axios.defaults.headers.common['Accept'] = 'application/json';\n  $axios.defaults.withCredentials = true;\n\n  $axios.onRequest((config) => {\n    const csrf = $cookies.get(CSRF, { parseJSON: false });\n\n    if ( csrf ) {\n      config.headers['x-api-csrf'] = csrf;\n    }\n\n    if ( process.server ) {\n      config.headers.common['access-control-expose-headers'] = `set-cookie`;\n      config.headers.common['user-agent'] = `Dashboard (Mozilla) v${ pkg.version }`;\n\n      if ( req.headers.cookie ) {\n        config.headers.common['cookies'] = req.headers.cookie;\n      }\n\n      if ( config.url.startsWith('/') ) {\n        config.baseURL = `${ req.protocol || 'https' }://${ req.headers.host }`;\n      }\n    }\n  });\n\n  if ( process.server ) {\n    $axios.onResponse((res) => {\n      const parsed = setCookieParser(res.headers['set-cookie'] || []);\n\n      for ( const opt of parsed ) {\n        const key = opt.name;\n        const value = opt.value;\n\n        delete opt.name;\n        delete opt.value;\n\n        opt.encode = (x) => x;\n        opt.sameSite = true;\n        opt.path = '/';\n        opt.secure = true;\n\n        $cookies.set(key, value, opt);\n      }\n    });\n  }\n\n  if ( isDev ) {\n    // https://github.com/nuxt-community/axios-module/blob/dev/lib/module.js#L78\n    // forces localhost to http, for no obvious reason.\n    // But we never have any reason to talk to anything plaintext.\n    if ( $axios.defaults.baseURL.startsWith('http://') ) {\n      $axios.defaults.baseURL = $axios.defaults.baseURL.replace(/^http:/, 'https:');\n    }\n\n    const insecureAgent = new https.Agent({ rejectUnauthorized: false });\n\n    $axios.defaults.httpsAgent = insecureAgent;\n    $axios.httpsAgent = insecureAgent;\n  }\n}\n"],"mappings":"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"}]}