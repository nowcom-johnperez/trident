{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/NodeScheduling.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/NodeScheduling.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IFJhZGlvR3JvdXAgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL1JhZGlvJzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IE5vZGVBZmZpbml0eSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL05vZGVBZmZpbml0eSc7CmltcG9ydCB7IEhBUlZFU1RFUl9OQU1FIGFzIFZJUlRVQUwgfSBmcm9tICdAc2hlbGwvY29uZmlnL2ZlYXR1cmVzJzsKaW1wb3J0IHsgX1ZJRVcgfSBmcm9tICdAc2hlbGwvY29uZmlnL3F1ZXJ5LXBhcmFtcyc7CmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgSE9TVE5BTUUgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBSYWRpb0dyb3VwOiBSYWRpb0dyb3VwLAogICAgTGFiZWxlZFNlbGVjdDogTGFiZWxlZFNlbGVjdCwKICAgIE5vZGVBZmZpbml0eTogTm9kZUFmZmluaXR5CiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0sCiAgICBub2RlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjcmVhdGUnCiAgICB9LAogICAgbG9hZGluZzogewogICAgICBkZWZhdWx0OiBmYWxzZSwKICAgICAgdHlwZTogQm9vbGVhbgogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHZhciBfdGhpcyR2YWx1ZTI7CiAgICB2YXIgaXNIYXJ2ZXN0ZXIgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddLmluU3RvcmUgPT09IFZJUlRVQUw7CiAgICB2YXIgX3RoaXMkdmFsdWUkbm9kZU5hbWUgPSB0aGlzLnZhbHVlLm5vZGVOYW1lLAogICAgICBub2RlTmFtZSA9IF90aGlzJHZhbHVlJG5vZGVOYW1lID09PSB2b2lkIDAgPyAnJyA6IF90aGlzJHZhbHVlJG5vZGVOYW1lOwogICAgdmFyIF90aGlzJHZhbHVlID0gdGhpcy52YWx1ZSwKICAgICAgX3RoaXMkdmFsdWUkYWZmaW5pdHkgPSBfdGhpcyR2YWx1ZS5hZmZpbml0eSwKICAgICAgYWZmaW5pdHkgPSBfdGhpcyR2YWx1ZSRhZmZpbml0eSA9PT0gdm9pZCAwID8ge30gOiBfdGhpcyR2YWx1ZSRhZmZpbml0eSwKICAgICAgX3RoaXMkdmFsdWUkbm9kZVNlbGVjID0gX3RoaXMkdmFsdWUubm9kZVNlbGVjdG9yLAogICAgICBub2RlU2VsZWN0b3IgPSBfdGhpcyR2YWx1ZSRub2RlU2VsZWMgPT09IHZvaWQgMCA/IHt9IDogX3RoaXMkdmFsdWUkbm9kZVNlbGVjOwogICAgdmFyIF9hZmZpbml0eSRub2RlQWZmaW5pdCA9IGFmZmluaXR5Lm5vZGVBZmZpbml0eSwKICAgICAgbm9kZUFmZmluaXR5ID0gX2FmZmluaXR5JG5vZGVBZmZpbml0ID09PSB2b2lkIDAgPyB7fSA6IF9hZmZpbml0eSRub2RlQWZmaW5pdDsKICAgIHZhciBzZWxlY3ROb2RlID0gbnVsbDsKICAgIGlmICh0aGlzLnZhbHVlLm5vZGVOYW1lKSB7CiAgICAgIHNlbGVjdE5vZGUgPSAnbm9kZVNlbGVjdG9yJzsKICAgIH0gZWxzZSBpZiAoaXNIYXJ2ZXN0ZXIgJiYgKF90aGlzJHZhbHVlMiA9IHRoaXMudmFsdWUpICE9PSBudWxsICYmIF90aGlzJHZhbHVlMiAhPT0gdm9pZCAwICYmIChfdGhpcyR2YWx1ZTIgPSBfdGhpcyR2YWx1ZTIubm9kZVNlbGVjdG9yKSAhPT0gbnVsbCAmJiBfdGhpcyR2YWx1ZTIgIT09IHZvaWQgMCAmJiBfdGhpcyR2YWx1ZTJbSE9TVE5BTUVdKSB7CiAgICAgIHNlbGVjdE5vZGUgPSAnbm9kZVNlbGVjdG9yJzsKICAgICAgbm9kZU5hbWUgPSBub2RlU2VsZWN0b3JbSE9TVE5BTUVdOwogICAgfSBlbHNlIGlmICghaXNFbXB0eShub2RlQWZmaW5pdHkpKSB7CiAgICAgIHNlbGVjdE5vZGUgPSAnYWZmaW5pdHknOwogICAgfQogICAgaWYgKCFub2RlQWZmaW5pdHkucmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbikgewogICAgICB0aGlzLiRzZXQobm9kZUFmZmluaXR5LCAncmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbicsIHsKICAgICAgICBub2RlU2VsZWN0b3JUZXJtczogW10KICAgICAgfSk7CiAgICB9CiAgICBpZiAoIW5vZGVBZmZpbml0eS5wcmVmZXJyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbikgewogICAgICB0aGlzLiRzZXQobm9kZUFmZmluaXR5LCAncHJlZmVycmVkRHVyaW5nU2NoZWR1bGluZ0lnbm9yZWREdXJpbmdFeGVjdXRpb24nLCBbXSk7CiAgICB9CiAgICByZXR1cm4gewogICAgICBzZWxlY3ROb2RlOiBzZWxlY3ROb2RlLAogICAgICBub2RlTmFtZTogbm9kZU5hbWUsCiAgICAgIG5vZGVBZmZpbml0eTogbm9kZUFmZmluaXR5LAogICAgICBub2RlU2VsZWN0b3I6IG5vZGVTZWxlY3RvcgogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoewogICAgdDogJ2kxOG4vdCcKICB9KSksIHt9LCB7CiAgICBpc1ZpZXc6IGZ1bmN0aW9uIGlzVmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX1ZJRVc7CiAgICB9LAogICAgaXNIYXJ2ZXN0ZXI6IGZ1bmN0aW9uIGlzSGFydmVzdGVyKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuZ2V0dGVyc1snY3VycmVudFByb2R1Y3QnXS5pblN0b3JlID09PSBWSVJUVUFMOwogICAgfSwKICAgIHNlbGVjdE5vZGVPcHRpb25zOiBmdW5jdGlvbiBzZWxlY3ROb2RlT3B0aW9ucygpIHsKICAgICAgdmFyIHByZWZpeCA9IHRoaXMuaXNIYXJ2ZXN0ZXIgPyAnaGFydmVzdGVyLnZpcnR1YWxNYWNoaW5lJyA6ICd3b3JrbG9hZCc7CiAgICAgIHZhciBvdXQgPSBbewogICAgICAgIGxhYmVsOiB0aGlzLnQoIiIuY29uY2F0KHByZWZpeCwgIi5zY2hlZHVsaW5nLmFmZmluaXR5LmFueU5vZGUiKSksCiAgICAgICAgdmFsdWU6IG51bGwKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLnQoIiIuY29uY2F0KHByZWZpeCwgIi5zY2hlZHVsaW5nLmFmZmluaXR5LnNwZWNpZmljTm9kZSIpKSwKICAgICAgICB2YWx1ZTogJ25vZGVTZWxlY3RvcicKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLnQoIiIuY29uY2F0KHByZWZpeCwgIi5zY2hlZHVsaW5nLmFmZmluaXR5LnNjaGVkdWxpbmdSdWxlcyIpKSwKICAgICAgICB2YWx1ZTogJ2FmZmluaXR5JwogICAgICB9XTsKICAgICAgcmV0dXJuIG91dDsKICAgIH0KICB9KSwKICBtZXRob2RzOiB7CiAgICB1cGRhdGU6IGZ1bmN0aW9uIHVwZGF0ZSgpIHsKICAgICAgdmFyIF90aGlzJHZhbHVlMywgX3RoaXMkdmFsdWU0OwogICAgICB2YXIgbm9kZU5hbWUgPSB0aGlzLm5vZGVOYW1lLAogICAgICAgIG5vZGVTZWxlY3RvciA9IHRoaXMubm9kZVNlbGVjdG9yLAogICAgICAgIG5vZGVBZmZpbml0eSA9IHRoaXMubm9kZUFmZmluaXR5OwogICAgICBzd2l0Y2ggKHRoaXMuc2VsZWN0Tm9kZSkgewogICAgICAgIGNhc2UgJ25vZGVTZWxlY3Rvcic6CiAgICAgICAgICBpZiAodGhpcy5pc0hhcnZlc3RlcikgewogICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMudmFsdWUsIHsKICAgICAgICAgICAgICBub2RlU2VsZWN0b3I6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgSE9TVE5BTUUsIG5vZGVOYW1lKQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIE9iamVjdC5hc3NpZ24odGhpcy52YWx1ZSwgewogICAgICAgICAgICAgIG5vZGVTZWxlY3Rvcjogbm9kZVNlbGVjdG9yLAogICAgICAgICAgICAgIG5vZGVOYW1lOiBub2RlTmFtZQogICAgICAgICAgICB9KTsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgoX3RoaXMkdmFsdWUzID0gdGhpcy52YWx1ZSkgIT09IG51bGwgJiYgX3RoaXMkdmFsdWUzICE9PSB2b2lkIDAgJiYgKF90aGlzJHZhbHVlMyA9IF90aGlzJHZhbHVlMy5hZmZpbml0eSkgIT09IG51bGwgJiYgX3RoaXMkdmFsdWUzICE9PSB2b2lkIDAgJiYgX3RoaXMkdmFsdWUzLm5vZGVBZmZpbml0eSkgewogICAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5hZmZpbml0eS5ub2RlQWZmaW5pdHk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBjYXNlICdhZmZpbml0eSc6CiAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5ub2RlTmFtZTsKICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLm5vZGVTZWxlY3RvcjsKICAgICAgICAgIGlmICghdGhpcy52YWx1ZS5hZmZpbml0eSkgewogICAgICAgICAgICBPYmplY3QuYXNzaWduKHRoaXMudmFsdWUsIHsKICAgICAgICAgICAgICBhZmZpbml0eTogewogICAgICAgICAgICAgICAgbm9kZUFmZmluaXR5OiBub2RlQWZmaW5pdHkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnZhbHVlLmFmZmluaXR5LCB7CiAgICAgICAgICAgICAgbm9kZUFmZmluaXR5OiBub2RlQWZmaW5pdHkKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgICBicmVhazsKICAgICAgICBkZWZhdWx0OgogICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUubm9kZU5hbWU7CiAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5ub2RlU2VsZWN0b3I7CiAgICAgICAgICBpZiAoKF90aGlzJHZhbHVlNCA9IHRoaXMudmFsdWUpICE9PSBudWxsICYmIF90aGlzJHZhbHVlNCAhPT0gdm9pZCAwICYmIChfdGhpcyR2YWx1ZTQgPSBfdGhpcyR2YWx1ZTQuYWZmaW5pdHkpICE9PSBudWxsICYmIF90aGlzJHZhbHVlNCAhPT0gdm9pZCAwICYmIF90aGlzJHZhbHVlNC5ub2RlQWZmaW5pdHkpIHsKICAgICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUuYWZmaW5pdHkubm9kZUFmZmluaXR5OwogICAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgaXNFbXB0eTogaXNFbXB0eQogIH0sCiAgd2F0Y2g6IHsKICAgICd2YWx1ZS5ub2RlU2VsZWN0b3InOiB7CiAgICAgIGhhbmRsZXI6IGZ1bmN0aW9uIGhhbmRsZXIobm9kZVNlbGVjdG9yKSB7CiAgICAgICAgaWYgKHRoaXMuaXNIYXJ2ZXN0ZXIgJiYgbm9kZVNlbGVjdG9yICE9PSBudWxsICYmIG5vZGVTZWxlY3RvciAhPT0gdm9pZCAwICYmIG5vZGVTZWxlY3RvcltIT1NUTkFNRV0pIHsKICAgICAgICAgIHRoaXMuc2VsZWN0Tm9kZSA9ICdub2RlU2VsZWN0b3InOwogICAgICAgICAgdmFyIG5vZGVOYW1lID0gbm9kZVNlbGVjdG9yW0hPU1ROQU1FXTsKICAgICAgICAgIHRoaXMubm9kZU5hbWUgPSBub2RlTmFtZTsKICAgICAgICAgIHZhciBhcnJheSA9IHRoaXMubm9kZXMubWFwKGZ1bmN0aW9uIChuKSB7CiAgICAgICAgICAgIHJldHVybiBuLnZhbHVlOwogICAgICAgICAgfSk7CiAgICAgICAgICBpZiAobm9kZU5hbWUgJiYgIWFycmF5LmluY2x1ZGVzKG5vZGVOYW1lKSkgewogICAgICAgICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnZ3Jvd2wvZXJyb3InLCB7CiAgICAgICAgICAgICAgdGl0bGU6IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddKCdoYXJ2ZXN0ZXIudm1UZW1wbGF0ZS50aXBzLm5vdEV4aXN0Tm9kZS50aXRsZScsIHsKICAgICAgICAgICAgICAgIG5hbWU6IG5vZGVOYW1lCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgbWVzc2FnZTogdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi90J10oJ2hhcnZlc3Rlci52bVRlbXBsYXRlLnRpcHMubm90RXhpc3ROb2RlLm1lc3NhZ2UnKQogICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUubm9kZVNlbGVjdG9yOwogICAgICAgICAgICB0aGlzLiRzZXQodGhpcywgJ25vZGVOYW1lJywgJycpOwogICAgICAgICAgICB0aGlzLiRzZXQodGhpcywgJ3NlbGVjdE5vZGUnLCBudWxsKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["mapGetters","RadioGroup","LabeledSelect","NodeAffinity","HARVESTER_NAME","VIRTUAL","_VIEW","isEmpty","HOSTNAME","components","props","value","type","Object","default","_default","nodes","Array","mode","String","loading","Boolean","data","_this$value2","isHarvester","$store","getters","inStore","_this$value$nodeName","nodeName","_this$value","_this$value$affinity","affinity","_this$value$nodeSelec","nodeSelector","_affinity$nodeAffinit","nodeAffinity","selectNode","requiredDuringSchedulingIgnoredDuringExecution","$set","nodeSelectorTerms","preferredDuringSchedulingIgnoredDuringExecution","computed","_objectSpread","t","isView","selectNodeOptions","prefix","out","label","concat","methods","update","_this$value3","_this$value4","assign","_defineProperty","watch","handler","array","map","n","includes","dispatch","title","name","message","root"],"sources":["node_modules/@rancher/shell/components/form/NodeScheduling.vue"],"sourcesContent":["<script>\nimport { mapGetters } from 'vuex';\nimport { RadioGroup } from '@components/Form/Radio';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport NodeAffinity from '@shell/components/form/NodeAffinity';\nimport { HARVESTER_NAME as VIRTUAL } from '@shell/config/features';\nimport { _VIEW } from '@shell/config/query-params';\nimport { isEmpty } from '@shell/utils/object';\nimport { HOSTNAME } from '@shell/config/labels-annotations';\n\nexport default {\n  components: {\n    RadioGroup,\n    LabeledSelect,\n    NodeAffinity,\n  },\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    nodes: {\n      type:    Array,\n      default: () => []\n    },\n\n    mode: {\n      type:    String,\n      default: 'create'\n    },\n    loading: {\n      default: false,\n      type:    Boolean\n    },\n  },\n\n  data() {\n    const isHarvester = this.$store.getters['currentProduct'].inStore === VIRTUAL;\n\n    let { nodeName = '' } = this.value;\n    const { affinity = {}, nodeSelector = {} } = this.value;\n\n    const { nodeAffinity = {} } = affinity;\n\n    let selectNode = null;\n\n    if (this.value.nodeName) {\n      selectNode = 'nodeSelector';\n    } else if (isHarvester && this.value?.nodeSelector?.[HOSTNAME]) {\n      selectNode = 'nodeSelector';\n      nodeName = nodeSelector[HOSTNAME];\n    } else if (!isEmpty(nodeAffinity)) {\n      selectNode = 'affinity';\n    }\n\n    if (!nodeAffinity.requiredDuringSchedulingIgnoredDuringExecution) {\n      this.$set(nodeAffinity, 'requiredDuringSchedulingIgnoredDuringExecution', { nodeSelectorTerms: [] } );\n    }\n    if (!nodeAffinity.preferredDuringSchedulingIgnoredDuringExecution) {\n      this.$set(nodeAffinity, 'preferredDuringSchedulingIgnoredDuringExecution', []);\n    }\n\n    return {\n      selectNode, nodeName, nodeAffinity, nodeSelector\n    };\n  },\n\n  computed: {\n    ...mapGetters({ t: 'i18n/t' }),\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    isHarvester() {\n      return this.$store.getters['currentProduct'].inStore === VIRTUAL;\n    },\n\n    selectNodeOptions() {\n      const prefix = this.isHarvester ? 'harvester.virtualMachine' : 'workload';\n      const out = [{\n        label: this.t(`${ prefix }.scheduling.affinity.anyNode`),\n        value: null\n      },\n      {\n        label: this.t(`${ prefix }.scheduling.affinity.specificNode`),\n        value: 'nodeSelector'\n      },\n      {\n        label: this.t(`${ prefix }.scheduling.affinity.schedulingRules`),\n        value: 'affinity'\n      }];\n\n      return out;\n    },\n\n  },\n  methods: {\n    update() {\n      const { nodeName, nodeSelector, nodeAffinity } = this;\n\n      switch (this.selectNode) {\n      case 'nodeSelector':\n        if (this.isHarvester) {\n          Object.assign(this.value, { nodeSelector: { [HOSTNAME]: nodeName } });\n        } else {\n          Object.assign(this.value, { nodeSelector, nodeName });\n        }\n        if (this.value?.affinity?.nodeAffinity) {\n          delete this.value.affinity.nodeAffinity;\n        }\n        break;\n      case 'affinity':\n        delete this.value.nodeName;\n        delete this.value.nodeSelector;\n        if (!this.value.affinity) {\n          Object.assign(this.value, { affinity: { nodeAffinity } });\n        } else {\n          Object.assign(this.value.affinity, { nodeAffinity });\n        }\n        break;\n      default:\n        delete this.value.nodeName;\n        delete this.value.nodeSelector;\n        if (this.value?.affinity?.nodeAffinity) {\n          delete this.value.affinity.nodeAffinity;\n        }\n      }\n    },\n    isEmpty\n  },\n\n  watch: {\n    'value.nodeSelector': {\n      handler(nodeSelector) {\n        if (this.isHarvester && nodeSelector?.[HOSTNAME]) {\n          this.selectNode = 'nodeSelector';\n          const nodeName = nodeSelector[HOSTNAME];\n\n          this.nodeName = nodeName;\n\n          const array = this.nodes.map((n) => n.value);\n\n          if (nodeName && !array.includes(nodeName)) {\n            this.$store.dispatch('growl/error', {\n              title:   this.$store.getters['i18n/t']('harvester.vmTemplate.tips.notExistNode.title', { name: nodeName }),\n              message: this.$store.getters['i18n/t']('harvester.vmTemplate.tips.notExistNode.message')\n            }, { root: true });\n\n            delete this.value.nodeSelector;\n            this.$set(this, 'nodeName', '');\n            this.$set(this, 'selectNode', null);\n          }\n        }\n      },\n    },\n  },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row mb-20\">\n      <RadioGroup\n        v-model=\"selectNode\"\n        name=\"selectNode\"\n        :options=\"selectNodeOptions\"\n        :mode=\"mode\"\n        @input=\"update\"\n      />\n    </div>\n    <template v-if=\"selectNode === 'nodeSelector'\">\n      <div class=\"row\">\n        <div class=\"col span-6\">\n          <LabeledSelect\n            v-model=\"nodeName\"\n            :label=\"t('workload.scheduling.affinity.nodeName')\"\n            :options=\"nodes || []\"\n            :mode=\"mode\"\n            :multiple=\"false\"\n            :loading=\"loading\"\n            @input=\"update\"\n          />\n        </div>\n      </div>\n    </template>\n    <template v-else-if=\"selectNode === 'affinity'\">\n      <NodeAffinity\n        v-model=\"nodeAffinity\"\n        :mode=\"mode\"\n        @input=\"update\"\n      />\n    </template>\n  </div>\n</template>\n"],"mappings":"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"}]}