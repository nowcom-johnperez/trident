{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/resources.cattle.io.backup.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/resources.cattle.io.backup.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBDcnVSZXNvdXJjZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9DcnVSZXNvdXJjZSc7CmltcG9ydCBjcmVhdGVFZGl0VmlldyBmcm9tICdAc2hlbGwvbWl4aW5zL2NyZWF0ZS1lZGl0LXZpZXcnOwppbXBvcnQgZm9ybVZhbGlkYXRpb24gZnJvbSAnQHNoZWxsL21peGlucy9mb3JtLXZhbGlkYXRpb24nOwppbXBvcnQgeyBMYWJlbGVkSW5wdXQgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0xhYmVsZWRJbnB1dCc7CmltcG9ydCBVbml0SW5wdXQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9Vbml0SW5wdXQnOwppbXBvcnQgTGFiZWxlZFNlbGVjdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0xhYmVsZWRTZWxlY3QnOwppbXBvcnQgeyBCYW5uZXIgfSBmcm9tICdAY29tcG9uZW50cy9CYW5uZXInOwppbXBvcnQgeyBSYWRpb0dyb3VwIH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9SYWRpbyc7CmltcG9ydCBOYW1lTnNEZXNjcmlwdGlvbiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL05hbWVOc0Rlc2NyaXB0aW9uJzsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBTMyBmcm9tICdAc2hlbGwvY2hhcnQvcmFuY2hlci1iYWNrdXAvUzMnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IFNFQ1JFVCwgQkFDS1VQX1JFU1RPUkUsIENBVEFMT0cgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgYWxsSGFzaCB9IGZyb20gJ0BzaGVsbC91dGlscy9wcm9taXNlJzsKaW1wb3J0IHsgTkFNRVNQQUNFLCBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyBnZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgZm9ybWF0RW5jcnlwdGlvblNlY3JldE5hbWVzIH0gZnJvbSAnQHNoZWxsL3V0aWxzL2Zvcm1hdHRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBDcnVSZXNvdXJjZTogQ3J1UmVzb3VyY2UsCiAgICBVbml0SW5wdXQ6IFVuaXRJbnB1dCwKICAgIExhYmVsZWRJbnB1dDogTGFiZWxlZElucHV0LAogICAgTGFiZWxlZFNlbGVjdDogTGFiZWxlZFNlbGVjdCwKICAgIFJhZGlvR3JvdXA6IFJhZGlvR3JvdXAsCiAgICBOYW1lTnNEZXNjcmlwdGlvbjogTmFtZU5zRGVzY3JpcHRpb24sCiAgICBCYW5uZXI6IEJhbm5lciwKICAgIExvYWRpbmc6IExvYWRpbmcsCiAgICBTMzogUzMKICB9LAogIG1peGluczogW2NyZWF0ZUVkaXRWaWV3LCBmb3JtVmFsaWRhdGlvbl0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjcmVhdGUnCiAgICB9CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF90aGlzJHZhbHVlOwogICAgICB2YXIgaGFzaDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NhdGFsb2cvbG9hZCcpOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2goewogICAgICAgICAgICAgIHNlY3JldHM6IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogU0VDUkVUCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgcmVzb3VyY2VTZXQ6IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kJywgewogICAgICAgICAgICAgICAgdHlwZTogQkFDS1VQX1JFU1RPUkUuUkVTT1VSQ0VfU0VULAogICAgICAgICAgICAgICAgaWQ6ICgoX3RoaXMkdmFsdWUgPSBfdGhpcy52YWx1ZSkgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUgPT09IHZvaWQgMCB8fCAoX3RoaXMkdmFsdWUgPSBfdGhpcyR2YWx1ZS5zcGVjKSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmFsdWUucmVzb3VyY2VTZXROYW1lKSB8fCAncmFuY2hlci1yZXNvdXJjZS1zZXQnCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgYXBwczogX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdjbHVzdGVyL2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBDQVRBTE9HLkFQUAogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBoYXNoID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgX3RoaXMuYWxsU2VjcmV0cyA9IGhhc2guc2VjcmV0czsKICAgICAgICAgICAgX3RoaXMucmVzb3VyY2VTZXQgPSBoYXNoLnJlc291cmNlU2V0OwogICAgICAgICAgICBfdGhpcy5hcHBzID0gaGFzaC5hcHBzOwogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdmFyIF90aGlzJHZhbHVlMiwgX3RoaXMkdmFsdWUzOwogICAgaWYgKCF0aGlzLnZhbHVlLnNwZWMpIHsKICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUsICdzcGVjJywgewogICAgICAgIHJldGVudGlvbkNvdW50OiAxMAogICAgICB9KTsKICAgIH0KICAgIHZhciBzMyA9IHt9OwogICAgdmFyIHVzZUVuY3J5cHRpb24gPSBmYWxzZTsKICAgIHZhciBzZXRTY2hlZHVsZSA9IGZhbHNlOwogICAgdmFyIHN0b3JhZ2VTb3VyY2UgPSAndXNlRGVmYXVsdCc7CiAgICBpZiAodGhpcy52YWx1ZS5zcGVjLmVuY3J5cHRpb25Db25maWdTZWNyZXROYW1lKSB7CiAgICAgIHVzZUVuY3J5cHRpb24gPSB0cnVlOwogICAgfQogICAgaWYgKHRoaXMudmFsdWUuc3BlYy5zY2hlZHVsZSkgewogICAgICBzZXRTY2hlZHVsZSA9IHRydWU7CiAgICB9CiAgICBpZiAoKF90aGlzJHZhbHVlMiA9IHRoaXMudmFsdWUpICE9PSBudWxsICYmIF90aGlzJHZhbHVlMiAhPT0gdm9pZCAwICYmIChfdGhpcyR2YWx1ZTIgPSBfdGhpcyR2YWx1ZTIuc3BlYykgIT09IG51bGwgJiYgX3RoaXMkdmFsdWUyICE9PSB2b2lkIDAgJiYgKF90aGlzJHZhbHVlMiA9IF90aGlzJHZhbHVlMi5zdG9yYWdlTG9jYXRpb24pICE9PSBudWxsICYmIF90aGlzJHZhbHVlMiAhPT0gdm9pZCAwICYmIF90aGlzJHZhbHVlMi5zMykgewogICAgICBzdG9yYWdlU291cmNlID0gJ2NvbmZpZ3VyZVMzJzsKICAgICAgczMgPSB0aGlzLnZhbHVlLnNwZWMuc3RvcmFnZUxvY2F0aW9uLnMzOwogICAgfQogICAgcmV0dXJuIHsKICAgICAgYWxsU2VjcmV0czogW10sCiAgICAgIHJlc291cmNlU2V0OiBudWxsLAogICAgICBzMzogczMsCiAgICAgIHN0b3JhZ2VTb3VyY2U6IHN0b3JhZ2VTb3VyY2UsCiAgICAgIHVzZUVuY3J5cHRpb246IHVzZUVuY3J5cHRpb24sCiAgICAgIGFwcHM6IFtdLAogICAgICBzZXRTY2hlZHVsZTogc2V0U2NoZWR1bGUsCiAgICAgIG5hbWU6IChfdGhpcyR2YWx1ZTMgPSB0aGlzLnZhbHVlKSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZTMgPT09IHZvaWQgMCB8fCAoX3RoaXMkdmFsdWUzID0gX3RoaXMkdmFsdWUzLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZTMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHZhbHVlMy5uYW1lLAogICAgICBmdkZvcm1SdWxlU2V0czogW3sKICAgICAgICBwYXRoOiAnbWV0YWRhdGEubmFtZScsCiAgICAgICAgcnVsZXM6IFsnZG5zTGFiZWwnLCAnbm9VcHBlckNhc2UnXSwKICAgICAgICB0cmFuc2xhdGlvbktleTogJ25hbWVOc0Rlc2NyaXB0aW9uLm5hbWUubGFiZWwnCiAgICAgIH1dCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoewogICAgaXNWaWV3OiBmdW5jdGlvbiBpc1ZpZXcoKSB7CiAgICAgIHJldHVybiB0aGlzLm1vZGUgPT09IF9WSUVXOwogICAgfSwKICAgIGNoYXJ0TmFtZXNwYWNlOiBmdW5jdGlvbiBjaGFydE5hbWVzcGFjZSgpIHsKICAgICAgdmFyIEJST1JlbGVhc2UgPSB0aGlzLmFwcHMuZmlsdGVyKGZ1bmN0aW9uIChyZWxlYXNlKSB7CiAgICAgICAgcmV0dXJuIGdldChyZWxlYXNlLCAnc3BlYy5uYW1lJykgPT09ICdyYW5jaGVyLWJhY2t1cCc7CiAgICAgIH0pWzBdOwogICAgICByZXR1cm4gQlJPUmVsZWFzZSA/IEJST1JlbGVhc2Uuc3BlYy5uYW1lc3BhY2UgOiAnJzsKICAgIH0sCiAgICBlbmNyeXB0aW9uU2VjcmV0TmFtZXM6IGZ1bmN0aW9uIGVuY3J5cHRpb25TZWNyZXROYW1lcygpIHsKICAgICAgcmV0dXJuIGZvcm1hdEVuY3J5cHRpb25TZWNyZXROYW1lcyh0aGlzLmFsbFNlY3JldHMsIHRoaXMuY2hhcnROYW1lc3BhY2UpOwogICAgfSwKICAgIHN0b3JhZ2VPcHRpb25zOiBmdW5jdGlvbiBzdG9yYWdlT3B0aW9ucygpIHsKICAgICAgdmFyIG9wdGlvbnMgPSBbJ3VzZURlZmF1bHQnLCAnY29uZmlndXJlUzMnXTsKICAgICAgdmFyIGxhYmVscyA9IFt0aGlzLnQoJ2JhY2t1cFJlc3RvcmVPcGVyYXRvci5zdG9yYWdlU291cmNlLnVzZURlZmF1bHQnKSwgdGhpcy50KCdiYWNrdXBSZXN0b3JlT3BlcmF0b3Iuc3RvcmFnZVNvdXJjZS5jb25maWd1cmVTMycpXTsKICAgICAgcmV0dXJuIHsKICAgICAgICBvcHRpb25zOiBvcHRpb25zLAogICAgICAgIGxhYmVsczogbGFiZWxzCiAgICAgIH07CiAgICB9LAogICAgZW5jcnlwdGlvbk9wdGlvbnM6IGZ1bmN0aW9uIGVuY3J5cHRpb25PcHRpb25zKCkgewogICAgICB2YXIgb3B0aW9ucyA9IFtmYWxzZSwgdHJ1ZV07CiAgICAgIHZhciBsYWJlbHMgPSBbdGhpcy50KCdiYWNrdXBSZXN0b3JlT3BlcmF0b3IuZW5jcnlwdGlvbkNvbmZpZ05hbWUub3B0aW9ucy5ub25lJyksIHRoaXMudCgnYmFja3VwUmVzdG9yZU9wZXJhdG9yLmVuY3J5cHRpb25Db25maWdOYW1lLm9wdGlvbnMuc2VjcmV0Jywge30sIHRydWUpXTsKICAgICAgcmV0dXJuIHsKICAgICAgICBvcHRpb25zOiBvcHRpb25zLAogICAgICAgIGxhYmVsczogbGFiZWxzCiAgICAgIH07CiAgICB9LAogICAgbmFtZXNwYWNlczogZnVuY3Rpb24gbmFtZXNwYWNlcygpIHsKICAgICAgdmFyIGNob2ljZXMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydjbHVzdGVyL2FsbCddKE5BTUVTUEFDRSk7CiAgICAgIHZhciBvdXQgPSBzb3J0QnkoY2hvaWNlcy5tYXAoZnVuY3Rpb24gKG9iaikgewogICAgICAgIHJldHVybiB7CiAgICAgICAgICBsYWJlbDogb2JqLm5hbWVEaXNwbGF5LAogICAgICAgICAgdmFsdWU6IG9iai5pZAogICAgICAgIH07CiAgICAgIH0pLCAnbGFiZWwnKTsKICAgICAgcmV0dXJuIG91dDsKICAgIH0sCiAgICB2YWxpZGF0ZWQ6IGZ1bmN0aW9uIHZhbGlkYXRlZCgpIHsKICAgICAgdmFyIF90aGlzJHZhbHVlNDsKICAgICAgcmV0dXJuICEhdGhpcy5uYW1lICYmICghdGhpcy51c2VFbmNyeXB0aW9uIHx8ICEhKChfdGhpcyR2YWx1ZTQgPSB0aGlzLnZhbHVlKSAhPT0gbnVsbCAmJiBfdGhpcyR2YWx1ZTQgIT09IHZvaWQgMCAmJiAoX3RoaXMkdmFsdWU0ID0gX3RoaXMkdmFsdWU0LnNwZWMpICE9PSBudWxsICYmIF90aGlzJHZhbHVlNCAhPT0gdm9pZCAwICYmIF90aGlzJHZhbHVlNC5lbmNyeXB0aW9uQ29uZmlnU2VjcmV0TmFtZSkpICYmIHRoaXMuZnZGb3JtSXNWYWxpZDsKICAgIH0KICB9LCBtYXBHZXR0ZXJzKHsKICAgIHQ6ICdpMThuL3QnCiAgfSkpLAogIHdhdGNoOiB7CiAgICBzdG9yYWdlU291cmNlOiBmdW5jdGlvbiBzdG9yYWdlU291cmNlKG5ldSkgewogICAgICBpZiAobmV1ID09PSAndXNlRGVmYXVsdCcpIHsKICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5zcGVjLnN0b3JhZ2VMb2NhdGlvbjsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5zcGVjLCAnc3RvcmFnZUxvY2F0aW9uJywgewogICAgICAgICAgczM6IHRoaXMuczMKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHJlc291cmNlU2V0OiBmdW5jdGlvbiByZXNvdXJjZVNldChuZXUpIHsKICAgICAgdmFyIF9uZXUkbWV0YWRhdGE7CiAgICAgIGlmIChuZXUgIT09IG51bGwgJiYgbmV1ICE9PSB2b2lkIDAgJiYgKF9uZXUkbWV0YWRhdGEgPSBuZXUubWV0YWRhdGEpICE9PSBudWxsICYmIF9uZXUkbWV0YWRhdGEgIT09IHZvaWQgMCAmJiBfbmV1JG1ldGFkYXRhLm5hbWUpIHsKICAgICAgICB2YXIgX25ldSRtZXRhZGF0YTI7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuc3BlYywgJ3Jlc291cmNlU2V0TmFtZScsIG5ldSA9PT0gbnVsbCB8fCBuZXUgPT09IHZvaWQgMCB8fCAoX25ldSRtZXRhZGF0YTIgPSBuZXUubWV0YWRhdGEpID09PSBudWxsIHx8IF9uZXUkbWV0YWRhdGEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfbmV1JG1ldGFkYXRhMi5uYW1lKTsKICAgICAgfQogICAgfSwKICAgIHNldFNjaGVkdWxlOiBmdW5jdGlvbiBzZXRTY2hlZHVsZShuZXUpIHsKICAgICAgaWYgKCFuZXUpIHsKICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5zcGVjLnNjaGVkdWxlOwogICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLnNwZWMucmV0ZW50aW9uQ291bnQ7CiAgICAgIH0KICAgIH0sCiAgICB1c2VFbmNyeXB0aW9uOiBmdW5jdGlvbiB1c2VFbmNyeXB0aW9uKG5ldSkgewogICAgICBpZiAoIW5ldSkgewogICAgICAgIHRoaXMudmFsdWUuc3BlYy5lbmNyeXB0aW9uQ29uZmlnU2VjcmV0TmFtZSA9ICcnOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["CruResource","createEditView","formValidation","LabeledInput","UnitInput","LabeledSelect","Banner","RadioGroup","NameNsDescription","Loading","S3","mapGetters","SECRET","BACKUP_RESTORE","CATALOG","allHash","NAMESPACE","_VIEW","sortBy","get","formatEncryptionSecretNames","components","mixins","props","value","type","Object","default","_default","mode","String","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","_this$value","hash","wrap","_callee$","_context","prev","next","$store","dispatch","secrets","resourceSet","RESOURCE_SET","id","spec","resourceSetName","apps","APP","sent","allSecrets","stop","data","_this$value2","_this$value3","$set","retentionCount","s3","useEncryption","setSchedule","storageSource","encryptionConfigSecretName","schedule","storageLocation","name","metadata","fvFormRuleSets","path","rules","translationKey","computed","_objectSpread","isView","chartNamespace","BRORelease","filter","release","namespace","encryptionSecretNames","storageOptions","options","labels","t","encryptionOptions","namespaces","choices","getters","out","map","obj","label","nameDisplay","validated","_this$value4","fvFormIsValid","watch","neu","_neu$metadata","_neu$metadata2"],"sources":["node_modules/@rancher/shell/edit/resources.cattle.io.backup.vue"],"sourcesContent":["<script>\nimport CruResource from '@shell/components/CruResource';\nimport createEditView from '@shell/mixins/create-edit-view';\nimport formValidation from '@shell/mixins/form-validation';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport UnitInput from '@shell/components/form/UnitInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { Banner } from '@components/Banner';\nimport { RadioGroup } from '@components/Form/Radio';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport Loading from '@shell/components/Loading';\nimport S3 from '@shell/chart/rancher-backup/S3';\nimport { mapGetters } from 'vuex';\nimport { SECRET, BACKUP_RESTORE, CATALOG } from '@shell/config/types';\nimport { allHash } from '@shell/utils/promise';\nimport { NAMESPACE, _VIEW } from '@shell/config/query-params';\nimport { sortBy } from '@shell/utils/sort';\nimport { get } from '@shell/utils/object';\nimport { formatEncryptionSecretNames } from '@shell/utils/formatter';\n\nexport default {\n\n  components: {\n    CruResource,\n    UnitInput,\n    LabeledInput,\n    LabeledSelect,\n    RadioGroup,\n    NameNsDescription,\n    Banner,\n    Loading,\n    S3,\n  },\n  mixins: [createEditView, formValidation],\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n    mode: {\n      type:    String,\n      default: 'create'\n    }\n  },\n\n  async fetch() {\n    await this.$store.dispatch('catalog/load');\n\n    const hash = await allHash({\n      secrets:     this.$store.dispatch('cluster/findAll', { type: SECRET }),\n      resourceSet: this.$store.dispatch('cluster/find', { type: BACKUP_RESTORE.RESOURCE_SET, id: this.value?.spec?.resourceSetName || 'rancher-resource-set' }),\n      apps:        this.$store.dispatch('cluster/findAll', { type: CATALOG.APP })\n\n    });\n\n    this.allSecrets = hash.secrets;\n    this.resourceSet = hash.resourceSet;\n    this.apps = hash.apps;\n  },\n\n  data() {\n    if (!this.value.spec) {\n      this.$set(this.value, 'spec', { retentionCount: 10 });\n    }\n    let s3 = {};\n    let useEncryption = false;\n    let setSchedule = false;\n    let storageSource = 'useDefault';\n\n    if (this.value.spec.encryptionConfigSecretName) {\n      useEncryption = true;\n    }\n\n    if (this.value.spec.schedule) {\n      setSchedule = true;\n    }\n\n    if (this.value?.spec?.storageLocation?.s3) {\n      storageSource = 'configureS3';\n      s3 = this.value.spec.storageLocation.s3;\n    }\n\n    return {\n      allSecrets:     [],\n      resourceSet:    null,\n      s3,\n      storageSource,\n      useEncryption,\n      apps:           [],\n      setSchedule,\n      name:           this.value?.metadata?.name,\n      fvFormRuleSets: [{\n        path: 'metadata.name', rules: ['dnsLabel', 'noUpperCase'], translationKey: 'nameNsDescription.name.label'\n      }]\n    };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    chartNamespace() {\n      const BRORelease = this.apps.filter((release) => get(release, 'spec.name') === 'rancher-backup')[0];\n\n      return BRORelease ? BRORelease.spec.namespace : '';\n    },\n\n    encryptionSecretNames() {\n      return formatEncryptionSecretNames(this.allSecrets, this.chartNamespace);\n    },\n\n    storageOptions() {\n      const options = ['useDefault', 'configureS3'];\n      const labels = [this.t('backupRestoreOperator.storageSource.useDefault'), this.t('backupRestoreOperator.storageSource.configureS3')];\n\n      return { options, labels };\n    },\n\n    encryptionOptions() {\n      const options = [false, true];\n      const labels = [this.t('backupRestoreOperator.encryptionConfigName.options.none'), this.t('backupRestoreOperator.encryptionConfigName.options.secret', {}, true)];\n\n      return { options, labels };\n    },\n\n    namespaces() {\n      const choices = this.$store.getters['cluster/all'](NAMESPACE);\n      const out = sortBy(choices.map((obj) => {\n        return {\n          label: obj.nameDisplay,\n          value: obj.id,\n        };\n      }), 'label');\n\n      return out;\n    },\n\n    validated() {\n      return !!this.name && (!this.useEncryption || !!this.value?.spec?.encryptionConfigSecretName) && this.fvFormIsValid;\n    },\n\n    ...mapGetters({ t: 'i18n/t' })\n  },\n\n  watch: {\n    storageSource(neu) {\n      if (neu === 'useDefault') {\n        delete this.value.spec.storageLocation;\n      } else {\n        this.$set(this.value.spec, 'storageLocation', { s3: this.s3 });\n      }\n    },\n\n    resourceSet(neu) {\n      if (neu?.metadata?.name) {\n        this.$set(this.value.spec, 'resourceSetName', neu?.metadata?.name);\n      }\n    },\n\n    setSchedule(neu) {\n      if (!neu) {\n        delete this.value.spec.schedule;\n        delete this.value.spec.retentionCount;\n      }\n    },\n\n    useEncryption(neu) {\n      if (!neu) {\n        this.value.spec.encryptionConfigSecretName = '';\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <div v-else>\n    <CruResource\n      :validation-passed=\"validated\"\n      :done-route=\"doneRoute\"\n      :resource=\"value\"\n      :mode=\"mode\"\n      :errors=\"fvUnreportedValidationErrors\"\n      @finish=\"save\"\n    >\n      <template>\n        <NameNsDescription\n          :mode=\"mode\"\n          :value=\"value\"\n          :namespaced=\"false\"\n          :rules=\"{name: fvGetAndReportPathRules('metadata.name')}\"\n          @change=\"name=value.metadata.name\"\n        />\n        <template v-if=\"!!resourceSet\">\n          <div class=\"bordered-section\">\n            <RadioGroup\n              v-model=\"setSchedule\"\n              :mode=\"mode\"\n              :label=\"t('backupRestoreOperator.schedule.label')\"\n              name=\"setSchedule\"\n              :options=\"[false, true]\"\n              :labels=\"[t('backupRestoreOperator.schedule.options.disabled'), t('backupRestoreOperator.schedule.options.enabled')]\"\n            />\n            <div\n              v-if=\"setSchedule\"\n              class=\"row mt-10 mb-10\"\n            >\n              <div class=\"col span-6\">\n                <LabeledInput\n                  v-model=\"value.spec.schedule\"\n                  type=\"cron\"\n                  :mode=\"mode\"\n                  :label=\"t('backupRestoreOperator.schedule.label')\"\n                  :placeholder=\"t('backupRestoreOperator.schedule.placeholder')\"\n                />\n              </div>\n              <div class=\"col span-6\">\n                <UnitInput\n                  v-model=\"value.spec.retentionCount\"\n                  :suffix=\"t('backupRestoreOperator.retentionCount.units', {count: value.spec.retentionCount || 0})\"\n                  :mode=\"mode\"\n                  :label=\"t('backupRestoreOperator.retentionCount.label')\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"bordered-section\">\n            <div class=\"row\">\n              <div class=\"col span-12\">\n                <RadioGroup\n                  v-model=\"useEncryption\"\n                  name=\"useEncryption\"\n                  :label=\"t('backupRestoreOperator.encryption')\"\n                  :options=\"encryptionOptions.options\"\n                  :labels=\"encryptionOptions.labels\"\n                  :mode=\"mode\"\n                />\n              </div>\n            </div>\n            <div\n              v-if=\"useEncryption\"\n              :style=\"{'align-items':'center'}\"\n              class=\"row mt-10\"\n            >\n              <div class=\"col span-6\">\n                <LabeledSelect\n                  v-model=\"value.spec.encryptionConfigSecretName\"\n                  :tooltip=\"t('backupRestoreOperator.encryptionConfigName.backuptip', {}, true)\"\n                  :hover-tooltip=\"true\"\n                  :mode=\"mode\"\n                  :options=\"encryptionSecretNames\"\n                  :label=\"t('backupRestoreOperator.encryptionConfigName.label')\"\n                />\n              </div>\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col span-12\">\n              <span\n                v-if=\"isView\"\n                class=\"text-label\"\n              >{{ t('backupRestoreOperator.s3.titles.location') }}</span>\n              <RadioGroup\n                v-else\n                v-model=\"storageSource\"\n                name=\"storageSource\"\n                :label=\"t('backupRestoreOperator.s3.titles.location')\"\n                :options=\"storageOptions.options\"\n                :labels=\"storageOptions.labels\"\n                :mode=\"mode\"\n              />\n            </div>\n          </div>\n\n          <template v-if=\"storageSource !== 'useDefault'\">\n            <div class=\"row mt-10\">\n              <div class=\"col span-12\">\n                <S3\n                  :value=\"s3\"\n                  :secrets=\"allSecrets\"\n                  :mode=\"mode\"\n                />\n              </div>\n            </div>\n          </template>\n          <template v-else-if=\"isView\">\n            <span>{{ t('generic.default') }}</span>\n          </template>\n        </template>\n        <Banner\n          v-else\n          color=\"error\"\n        >\n          <span v-clean-html=\"t('backupRestoreOperator.noResourceSet')\" />\n        </Banner>\n      </template>\n    </CruResource>\n  </div>\n</template>\n"],"mappings":"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"}]}