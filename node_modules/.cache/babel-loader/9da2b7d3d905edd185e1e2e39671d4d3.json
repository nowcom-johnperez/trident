{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/Members/MembershipEditor.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/form/Members/MembershipEditor.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgeyBNQU5BR0VNRU5ULCBOT1JNQU4gfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IEFycmF5TGlzdCBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL0FycmF5TGlzdCc7CmltcG9ydCBMb2FkaW5nIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL0xvYWRpbmcnOwppbXBvcnQgeyBfQ1JFQVRFLCBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IHsgZ2V0LCBzZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKZnVuY3Rpb24gbm9ybWFsaXplSWQoaWQpIHsKICByZXR1cm4gKGlkID09PSBudWxsIHx8IGlkID09PSB2b2lkIDAgPyB2b2lkIDAgOiBpZC5yZXBsYWNlKCc6JywgJy8nKSkgfHwgaWQ7Cn0KZXhwb3J0IGZ1bmN0aW9uIGNhblZpZXdNZW1iZXJzaGlwRWRpdG9yKHN0b3JlKSB7CiAgdmFyIG5lZWRzUHJvamVjdCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZmFsc2U7CiAgcmV0dXJuICghIXN0b3JlLmdldHRlcnNbJ21hbmFnZW1lbnQvc2NoZW1hRm9yJ10oTUFOQUdFTUVOVC5QUk9KRUNUX1JPTEVfVEVNUExBVEVfQklORElORykgfHwgIW5lZWRzUHJvamVjdCkgJiYgISFzdG9yZS5nZXR0ZXJzWydtYW5hZ2VtZW50L3NjaGVtYUZvciddKE1BTkFHRU1FTlQuUk9MRV9URU1QTEFURSkgJiYgISFzdG9yZS5nZXR0ZXJzWydyYW5jaGVyL3NjaGVtYUZvciddKE5PUk1BTi5QUklOQ0lQQUwpOwp9CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBBcnJheUxpc3Q6IEFycmF5TGlzdCwKICAgIExvYWRpbmc6IExvYWRpbmcKICB9LAogIHByb3BzOiB7CiAgICBhZGRNZW1iZXJEaWFsb2dOYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBwYXJlbnRLZXk6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHBhcmVudElkOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHR5cGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIGRlZmF1bHRCaW5kaW5nSGFuZGxlcjogewogICAgICB0eXBlOiBGdW5jdGlvbiwKICAgICAgZGVmYXVsdDogbnVsbAogICAgfSwKICAgIG1vZGFsU3RpY2t5OiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIGRlZmF1bHQ6IGZhbHNlCiAgICB9CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIHJvbGVCaW5kaW5nUmVxdWVzdFBhcmFtcywgdXNlckh5ZHJhdGlvbiwgX3lpZWxkJFByb21pc2UkYWxsLCBfeWllbGQkUHJvbWlzZSRhbGwyLCBhbGxCaW5kaW5ncywgYmluZGluZ3MsIGRlZmF1bHRCaW5kaW5nOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICByb2xlQmluZGluZ1JlcXVlc3RQYXJhbXMgPSB7CiAgICAgICAgICAgICAgdHlwZTogX3RoaXMudHlwZSwKICAgICAgICAgICAgICBvcHQ6IHsKICAgICAgICAgICAgICAgIGZvcmNlOiB0cnVlCiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9OwogICAgICAgICAgICBpZiAoX3RoaXMudHlwZSA9PT0gTk9STUFOLlBST0pFQ1RfUk9MRV9URU1QTEFURV9CSU5ESU5HICYmIF90aGlzLnBhcmVudElkKSB7CiAgICAgICAgICAgICAgT2JqZWN0LmFzc2lnbihyb2xlQmluZGluZ1JlcXVlc3RQYXJhbXMsIHsKICAgICAgICAgICAgICAgIG9wdDogewogICAgICAgICAgICAgICAgICBmaWx0ZXI6IHsKICAgICAgICAgICAgICAgICAgICBwcm9qZWN0SWQ6IF90aGlzLnBhcmVudElkLnNwbGl0KCcvJykuam9pbignOicpCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICB1c2VySHlkcmF0aW9uID0gW190aGlzLnNjaGVtYSA/IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgicmFuY2hlci9maW5kQWxsIiwgcm9sZUJpbmRpbmdSZXF1ZXN0UGFyYW1zKSA6IFtdLCBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ3JhbmNoZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgICB0eXBlOiBOT1JNQU4uUFJJTkNJUEFMCiAgICAgICAgICAgIH0pLCBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goIm1hbmFnZW1lbnQvZmluZEFsbCIsIHsKICAgICAgICAgICAgICB0eXBlOiBNQU5BR0VNRU5ULlJPTEVfVEVNUExBVEUKICAgICAgICAgICAgfSksIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgibWFuYWdlbWVudC9maW5kQWxsIiwgewogICAgICAgICAgICAgIHR5cGU6IE1BTkFHRU1FTlQuVVNFUgogICAgICAgICAgICB9KV07CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA1OwogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwodXNlckh5ZHJhdGlvbik7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIF95aWVsZCRQcm9taXNlJGFsbCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF95aWVsZCRQcm9taXNlJGFsbDIgPSBfc2xpY2VkVG9BcnJheShfeWllbGQkUHJvbWlzZSRhbGwsIDEpOwogICAgICAgICAgICBhbGxCaW5kaW5ncyA9IF95aWVsZCRQcm9taXNlJGFsbDJbMF07CiAgICAgICAgICAgIGJpbmRpbmdzID0gYWxsQmluZGluZ3MuZmlsdGVyKGZ1bmN0aW9uIChiKSB7CiAgICAgICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZUlkKGdldChiLCBfdGhpcy5wYXJlbnRLZXkpKSA9PT0gbm9ybWFsaXplSWQoX3RoaXMucGFyZW50SWQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgX3RoaXMuJHNldChfdGhpcywgJ2xhc3RTYXZlZEJpbmRpbmdzJywgX3RvQ29uc3VtYWJsZUFycmF5KGJpbmRpbmdzKSk7CgogICAgICAgICAgICAvLyBBZGQgdGhlIGN1cnJlbnQgdXNlciBhcyB0aGUgcHJvamVjdCBvd25lci4gVGhpcyB3aWxsIGdldCBjcmVhdGVkIGJ5IGRlZmF1bHQKICAgICAgICAgICAgaWYgKCEoX3RoaXMubW9kZSA9PT0gX0NSRUFURSAmJiBiaW5kaW5ncy5sZW5ndGggPT09IDAgJiYgX3RoaXMuZGVmYXVsdEJpbmRpbmdIYW5kbGVyKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAxNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTM7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy5kZWZhdWx0QmluZGluZ0hhbmRsZXIoKTsKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIGRlZmF1bHRCaW5kaW5nID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgZGVmYXVsdEJpbmRpbmcuaXNEZWZhdWx0QmluZGluZyA9IHRydWU7CiAgICAgICAgICAgIGJpbmRpbmdzLnB1c2goZGVmYXVsdEJpbmRpbmcpOwogICAgICAgICAgY2FzZSAxNjoKICAgICAgICAgICAgX3RoaXMuJHNldChfdGhpcywgJ2JpbmRpbmdzJywgYmluZGluZ3MpOwogICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlKTsKICAgIH0pKSgpOwogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNjaGVtYTogdGhpcy4kc3RvcmUuZ2V0dGVyc1sicmFuY2hlci9zY2hlbWFGb3IiXSh0aGlzLnR5cGUpLAogICAgICBiaW5kaW5nczogW10sCiAgICAgIGxhc3RTYXZlZEJpbmRpbmdzOiBbXQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBuZXdCaW5kaW5nczogZnVuY3Rpb24gbmV3QmluZGluZ3MoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy5iaW5kaW5ncy5maWx0ZXIoZnVuY3Rpb24gKGJpbmRpbmcpIHsKICAgICAgICByZXR1cm4gIWJpbmRpbmcuaWQgJiYgIV90aGlzMi5sYXN0U2F2ZWRCaW5kaW5ncy5pbmNsdWRlcyhiaW5kaW5nKSAmJiAhYmluZGluZy5pc0RlZmF1bHRCaW5kaW5nOwogICAgICB9KTsKICAgIH0sCiAgICByZW1vdmVkQmluZGluZ3M6IGZ1bmN0aW9uIHJlbW92ZWRCaW5kaW5ncygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIHJldHVybiB0aGlzLmxhc3RTYXZlZEJpbmRpbmdzLmZpbHRlcihmdW5jdGlvbiAoYmluZGluZykgewogICAgICAgIHJldHVybiAhX3RoaXMzLmJpbmRpbmdzLmluY2x1ZGVzKGJpbmRpbmcpOwogICAgICB9KTsKICAgIH0sCiAgICBtZW1iZXJzaGlwVXBkYXRlOiBmdW5jdGlvbiBtZW1iZXJzaGlwVXBkYXRlKCkgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgdmFyIG5ld0JpbmRpbmdzID0gdGhpcy5uZXdCaW5kaW5nczsKICAgICAgdmFyIHJlbW92ZWRCaW5kaW5ncyA9IHRoaXMucmVtb3ZlZEJpbmRpbmdzOwogICAgICByZXR1cm4gewogICAgICAgIG5ld0JpbmRpbmdzOiB0aGlzLm5ld0JpbmRpbmdzLAogICAgICAgIHJlbW92ZWRCaW5kaW5nczogdGhpcy5yZW1vdmVkQmluZGluZ3MsCiAgICAgICAgc2F2ZTogZnVuY3Rpb24gc2F2ZShwYXJlbnRJZCkgewogICAgICAgICAgdmFyIHNhdmVkUHJvbWlzZXMgPSBuZXdCaW5kaW5ncy5tYXAoZnVuY3Rpb24gKGJpbmRpbmcpIHsKICAgICAgICAgICAgc2V0KGJpbmRpbmcsIF90aGlzNC5wYXJlbnRLZXksIHBhcmVudElkKTsKICAgICAgICAgICAgcmV0dXJuIGJpbmRpbmcuc2F2ZSgpOwogICAgICAgICAgfSk7CiAgICAgICAgICB2YXIgcmVtb3ZlZFByb21pc2VzID0gcmVtb3ZlZEJpbmRpbmdzLm1hcChmdW5jdGlvbiAoYmluZGluZykgewogICAgICAgICAgICByZXR1cm4gYmluZGluZy5yZW1vdmUoKTsKICAgICAgICAgIH0pOwogICAgICAgICAgcmV0dXJuIFByb21pc2UuYWxsKFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoc2F2ZWRQcm9taXNlcyksIF90b0NvbnN1bWFibGVBcnJheShyZW1vdmVkUHJvbWlzZXMpKSk7CiAgICAgICAgfQogICAgICB9OwogICAgfSwKICAgIGlzQ3JlYXRlOiBmdW5jdGlvbiBpc0NyZWF0ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX0NSRUFURTsKICAgIH0sCiAgICBpc1ZpZXc6IGZ1bmN0aW9uIGlzVmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX1ZJRVc7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgbWVtYmVyc2hpcFVwZGF0ZTogewogICAgICBkZWVwOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKCkgewogICAgICAgIHRoaXMuJGVtaXQoJ21lbWJlcnNoaXAtdXBkYXRlJywgdGhpcy5tZW1iZXJzaGlwVXBkYXRlKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYWRkTWVtYmVyOiBmdW5jdGlvbiBhZGRNZW1iZXIoKSB7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdjbHVzdGVyL3Byb21wdE1vZGFsJywgewogICAgICAgIGNvbXBvbmVudDogdGhpcy5hZGRNZW1iZXJEaWFsb2dOYW1lLAogICAgICAgIGNvbXBvbmVudFByb3BzOiB7CiAgICAgICAgICBvbkFkZDogdGhpcy5vbkFkZE1lbWJlcgogICAgICAgIH0sCiAgICAgICAgbW9kYWxTdGlja3k6IHRoaXMubW9kYWxTdGlja3kKICAgICAgfSk7CiAgICB9LAogICAgb25BZGRNZW1iZXI6IGZ1bmN0aW9uIG9uQWRkTWVtYmVyKGJpbmRpbmdzKSB7CiAgICAgIHRoaXMuJHNldCh0aGlzLCAnYmluZGluZ3MnLCBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KHRoaXMuYmluZGluZ3MpLCBfdG9Db25zdW1hYmxlQXJyYXkoYmluZGluZ3MpKSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["MANAGEMENT","NORMAN","ArrayList","Loading","_CREATE","_VIEW","get","set","normalizeId","id","replace","canViewMembershipEditor","store","needsProject","arguments","length","undefined","getters","PROJECT_ROLE_TEMPLATE_BINDING","ROLE_TEMPLATE","PRINCIPAL","components","props","addMemberDialogName","type","String","required","parentKey","parentId","default","mode","defaultBindingHandler","Function","modalSticky","Boolean","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","roleBindingRequestParams","userHydration","_yield$Promise$all","_yield$Promise$all2","allBindings","bindings","defaultBinding","wrap","_callee$","_context","prev","next","opt","force","Object","assign","filter","projectId","split","join","schema","$store","dispatch","USER","Promise","all","sent","_slicedToArray","b","$set","_toConsumableArray","isDefaultBinding","push","stop","data","lastSavedBindings","computed","newBindings","_this2","binding","includes","removedBindings","_this3","membershipUpdate","_this4","save","savedPromises","map","removedPromises","remove","concat","isCreate","isView","watch","deep","handler","$emit","methods","addMember","component","componentProps","onAdd","onAddMember"],"sources":["node_modules/@rancher/shell/components/form/Members/MembershipEditor.vue"],"sourcesContent":["<script>\r\nimport { MANAGEMENT, NORMAN } from '@shell/config/types';\r\nimport ArrayList from '@shell/components/form/ArrayList';\r\nimport Loading from '@shell/components/Loading';\r\nimport { _CREATE, _VIEW } from '@shell/config/query-params';\r\nimport { get, set } from '@shell/utils/object';\r\n\r\nfunction normalizeId(id) {\r\n  return id?.replace(':', '/') || id;\r\n}\r\n\r\nexport function canViewMembershipEditor(store, needsProject = false) {\r\n  return (!!store.getters['management/schemaFor'](MANAGEMENT.PROJECT_ROLE_TEMPLATE_BINDING) || !needsProject) &&\r\n    !!store.getters['management/schemaFor'](MANAGEMENT.ROLE_TEMPLATE) &&\r\n    !!store.getters['rancher/schemaFor'](NORMAN.PRINCIPAL);\r\n}\r\n\r\nexport default {\r\n  components: { ArrayList, Loading },\r\n\r\n  props: {\r\n    addMemberDialogName: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    parentKey: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    parentId: {\r\n      type:    String,\r\n      default: null\r\n    },\r\n\r\n    mode: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    type: {\r\n      type:     String,\r\n      required: true\r\n    },\r\n\r\n    defaultBindingHandler: {\r\n      type:    Function,\r\n      default: null,\r\n    },\r\n\r\n    modalSticky: {\r\n      type:    Boolean,\r\n      default: false,\r\n    }\r\n  },\r\n\r\n  async fetch() {\r\n    const roleBindingRequestParams = { type: this.type, opt: { force: true } };\r\n\r\n    if (this.type === NORMAN.PROJECT_ROLE_TEMPLATE_BINDING && this.parentId) {\r\n      Object.assign(roleBindingRequestParams, { opt: { filter: { projectId: this.parentId.split('/').join(':') } } });\r\n    }\r\n    const userHydration = [\r\n      this.schema ? this.$store.dispatch(`rancher/findAll`, roleBindingRequestParams) : [],\r\n      this.$store.dispatch('rancher/findAll', { type: NORMAN.PRINCIPAL }),\r\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.ROLE_TEMPLATE }),\r\n      this.$store.dispatch(`management/findAll`, { type: MANAGEMENT.USER })\r\n    ];\r\n    const [allBindings] = await Promise.all(userHydration);\r\n\r\n    const bindings = allBindings\r\n      .filter((b) => normalizeId(get(b, this.parentKey)) === normalizeId(this.parentId));\r\n\r\n    this.$set(this, 'lastSavedBindings', [...bindings]);\r\n\r\n    // Add the current user as the project owner. This will get created by default\r\n    if (this.mode === _CREATE && bindings.length === 0 && this.defaultBindingHandler) {\r\n      const defaultBinding = await this.defaultBindingHandler();\r\n\r\n      defaultBinding.isDefaultBinding = true;\r\n      bindings.push(defaultBinding);\r\n    }\r\n\r\n    this.$set(this, 'bindings', bindings);\r\n  },\r\n\r\n  data() {\r\n    return {\r\n      schema:            this.$store.getters[`rancher/schemaFor`](this.type),\r\n      bindings:          [],\r\n      lastSavedBindings: [],\r\n    };\r\n  },\r\n\r\n  computed: {\r\n    newBindings() {\r\n      return this.bindings\r\n        .filter((binding) => !binding.id && !this.lastSavedBindings.includes(binding) && !binding.isDefaultBinding);\r\n    },\r\n    removedBindings() {\r\n      return this.lastSavedBindings\r\n        .filter((binding) => !this.bindings.includes(binding));\r\n    },\r\n    membershipUpdate() {\r\n      const newBindings = this.newBindings;\r\n      const removedBindings = this.removedBindings;\r\n\r\n      return {\r\n        newBindings:     this.newBindings,\r\n        removedBindings: this.removedBindings,\r\n        save:            (parentId) => {\r\n          const savedPromises = newBindings.map((binding) => {\r\n            set(binding, this.parentKey, parentId);\r\n\r\n            return binding.save();\r\n          });\r\n\r\n          const removedPromises = removedBindings.map((binding) => binding.remove());\r\n\r\n          return Promise.all([...savedPromises, ...removedPromises]);\r\n        }\r\n      };\r\n    },\r\n\r\n    isCreate() {\r\n      return this.mode === _CREATE;\r\n    },\r\n\r\n    isView() {\r\n      return this.mode === _VIEW;\r\n    },\r\n  },\r\n  watch: {\r\n    membershipUpdate: {\r\n      deep: true,\r\n      handler() {\r\n        this.$emit('membership-update', this.membershipUpdate);\r\n      }\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    addMember() {\r\n      this.$store.dispatch('cluster/promptModal', {\r\n        component:      this.addMemberDialogName,\r\n        componentProps: { onAdd: this.onAddMember },\r\n        modalSticky:    this.modalSticky\r\n      });\r\n    },\r\n\r\n    onAddMember(bindings) {\r\n      this.$set(this, 'bindings', [...this.bindings, ...bindings]);\r\n    },\r\n  }\r\n};\r\n</script>\r\n<template>\r\n  <Loading v-if=\"$fetchState.pending\" />\r\n  <ArrayList\r\n    v-else\r\n    v-model=\"bindings\"\r\n    :mode=\"mode\"\r\n    :show-header=\"true\"\r\n  >\r\n    <template #column-headers>\r\n      <div class=\"box mb-0\">\r\n        <div class=\"column-headers row\">\r\n          <div class=\"col span-6\">\r\n            <label class=\"text-label\">{{ t('membershipEditor.user') }}</label>\r\n          </div>\r\n          <div class=\"col span-6\">\r\n            <label class=\"text-label\">{{ t('membershipEditor.role') }}</label>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template #columns=\"{row}\">\r\n      <div class=\"columns row\">\r\n        <div class=\"col span-6\">\r\n          <Principal\r\n            :key=\"row.value.principalId\"\r\n            :value=\"row.value.principalId\"\r\n          />\r\n        </div>\r\n        <div class=\"col span-6 role\">\r\n          {{ row.value.roleDisplay }}\r\n        </div>\r\n      </div>\r\n    </template>\r\n    <template #add>\r\n      <button\r\n        type=\"button\"\r\n        class=\"btn role-primary mt-10\"\r\n        @click=\"addMember\"\r\n      >\r\n        {{ t('generic.add') }}\r\n      </button>\r\n    </template>\r\n    <template #remove-button=\"{remove, i}\">\r\n      <span v-if=\"(isCreate && i === 0) || isView\" />\r\n      <button\r\n        v-else\r\n        type=\"button\"\r\n        :disabled=\"isView\"\r\n        class=\"btn role-link\"\r\n        @click=\"remove\"\r\n      >\r\n        {{ t('generic.remove') }}\r\n      </button>\r\n    </template>\r\n  </ArrayList>\r\n</template>\r\n\r\n<style lang=\"scss\" scoped>\r\n.role {\r\n  display: flex;\r\n  align-items: center;\r\n  flex-direction: row;\r\n}\r\n</style>\r\n"],"mappings":"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"}]}