{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/validators/pod-affinity.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/validators/pod-affinity.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuY29uc3RydWN0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCB7IGlzRW1wdHkgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKCi8vIHNwZWMgPSBwb2RTcGVjLmFmZmluaXR5CmV4cG9ydCBmdW5jdGlvbiBwb2RBZmZpbml0eShzcGVjLCBnZXR0ZXJzLCBlcnJvcnMpIHsKICBpZiAoIXNwZWMpIHsKICAgIHJldHVybjsKICB9CiAgdmFyIHBvZEFmZmluaXR5ID0gc3BlYy5wb2RBZmZpbml0eSwKICAgIHBvZEFudGlBZmZpbml0eSA9IHNwZWMucG9kQW50aUFmZmluaXR5OwoKICAvLyBwb2QgYWZmaW5pdHkKICBpZiAocG9kQWZmaW5pdHkgJiYgIWlzRW1wdHkocG9kQWZmaW5pdHkpKSB7CiAgICB2YXIgX3BvZEFmZmluaXR5JHByZWZlcnJlID0gcG9kQWZmaW5pdHkucHJlZmVycmVkRHVyaW5nU2NoZWR1bGluZ0lnbm9yZWREdXJpbmdFeGVjdXRpb24sCiAgICAgIHByZWZlcnJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uID0gX3BvZEFmZmluaXR5JHByZWZlcnJlID09PSB2b2lkIDAgPyBbXSA6IF9wb2RBZmZpbml0eSRwcmVmZXJyZSwKICAgICAgX3BvZEFmZmluaXR5JHJlcXVpcmVkID0gcG9kQWZmaW5pdHkucmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbiwKICAgICAgcmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbiA9IF9wb2RBZmZpbml0eSRyZXF1aXJlZCA9PT0gdm9pZCAwID8gW10gOiBfcG9kQWZmaW5pdHkkcmVxdWlyZWQ7CiAgICBwcmVmZXJyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbi5mb3JFYWNoKGZ1bmN0aW9uICh0ZXJtLCBpKSB7CiAgICAgIHZhciBlcnJvck9wdHMgPSB7CiAgICAgICAgaW5kZXg6IGksCiAgICAgICAgZ3JvdXA6IGdldHRlcnNbJ2kxOG4vdCddKCd2YWxpZGF0aW9uLnBvZEFmZmluaXR5LmFmZmluaXR5VGl0bGUnKSwKICAgICAgICBydWxlczogZ2V0dGVyc1snaTE4bi90J10oJ3ZhbGlkYXRpb24ucG9kQWZmaW5pdHkucHJlZmVycmVkRHVyaW5nU2NoZWR1bGluZ0lnbm9yZWREdXJpbmdFeGVjdXRpb24nKQogICAgICB9OwogICAgICB2YWxpZGF0ZVRlcm1XZWlnaHQodGVybSwgZXJyb3JPcHRzLCBnZXR0ZXJzLCBlcnJvcnMpOwogICAgICB2YXIgX3Rlcm0kcG9kQWZmaW5pdHlUZXJtID0gdGVybS5wb2RBZmZpbml0eVRlcm0sCiAgICAgICAgcG9kQWZmaW5pdHlUZXJtID0gX3Rlcm0kcG9kQWZmaW5pdHlUZXJtID09PSB2b2lkIDAgPyB7fSA6IF90ZXJtJHBvZEFmZmluaXR5VGVybTsKICAgICAgdmFsaWRhdGVUb3BvbG9neUtleShwb2RBZmZpbml0eVRlcm0sIGVycm9yT3B0cywgZ2V0dGVycywgZXJyb3JzKTsKICAgICAgdmFsaWRhdGVMYWJlbFNlbGVjdG9yKHBvZEFmZmluaXR5VGVybSwgZXJyb3JPcHRzLCBnZXR0ZXJzLCBlcnJvcnMpOwogICAgfSk7CiAgICByZXF1aXJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uLmZvckVhY2goZnVuY3Rpb24gKHRlcm0sIGkpIHsKICAgICAgdmFyIGVycm9yT3B0cyA9IHsKICAgICAgICBpbmRleDogaSwKICAgICAgICBncm91cDogZ2V0dGVyc1snaTE4bi90J10oJ3ZhbGlkYXRpb24ucG9kQWZmaW5pdHkuYWZmaW5pdHlUaXRsZScpLAogICAgICAgIHJ1bGVzOiBnZXR0ZXJzWydpMThuL3QnXSgndmFsaWRhdGlvbi5wb2RBZmZpbml0eS5yZXF1aXJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uJykKICAgICAgfTsKICAgICAgdmFsaWRhdGVUb3BvbG9neUtleSh0ZXJtLCBlcnJvck9wdHMsIGdldHRlcnMsIGVycm9ycyk7CiAgICAgIHZhbGlkYXRlTGFiZWxTZWxlY3Rvcih0ZXJtLCBlcnJvck9wdHMsIGdldHRlcnMsIGVycm9ycyk7CiAgICB9KTsKICB9CgogIC8vIHBvZCBhbnRpYWZmaW5pdHkKICBpZiAocG9kQW50aUFmZmluaXR5ICYmICFpc0VtcHR5KHBvZEFudGlBZmZpbml0eSkpIHsKICAgIHZhciBfcG9kQW50aUFmZmluaXR5JHByZWYgPSBwb2RBbnRpQWZmaW5pdHkucHJlZmVycmVkRHVyaW5nU2NoZWR1bGluZ0lnbm9yZWREdXJpbmdFeGVjdXRpb24sCiAgICAgIF9wcmVmZXJyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbiA9IF9wb2RBbnRpQWZmaW5pdHkkcHJlZiA9PT0gdm9pZCAwID8gW10gOiBfcG9kQW50aUFmZmluaXR5JHByZWYsCiAgICAgIF9wb2RBbnRpQWZmaW5pdHkkcmVxdSA9IHBvZEFudGlBZmZpbml0eS5yZXF1aXJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uLAogICAgICBfcmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbiA9IF9wb2RBbnRpQWZmaW5pdHkkcmVxdSA9PT0gdm9pZCAwID8gW10gOiBfcG9kQW50aUFmZmluaXR5JHJlcXU7CiAgICBfcHJlZmVycmVkRHVyaW5nU2NoZWR1bGluZ0lnbm9yZWREdXJpbmdFeGVjdXRpb24uZm9yRWFjaChmdW5jdGlvbiAodGVybSwgaSkgewogICAgICB2YXIgZXJyb3JPcHRzID0gewogICAgICAgIGluZGV4OiBpLAogICAgICAgIGdyb3VwOiBnZXR0ZXJzWydpMThuL3QnXSgndmFsaWRhdGlvbi5wb2RBZmZpbml0eS5hbnRpQWZmaW5pdHlUaXRsZScpLAogICAgICAgIHJ1bGVzOiBnZXR0ZXJzWydpMThuL3QnXSgndmFsaWRhdGlvbi5wb2RBZmZpbml0eS5wcmVmZXJyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbicpCiAgICAgIH07CiAgICAgIHZhbGlkYXRlVGVybVdlaWdodCh0ZXJtLCBlcnJvck9wdHMsIGdldHRlcnMsIGVycm9ycyk7CiAgICAgIHZhciBfdGVybSRwb2RBZmZpbml0eVRlcm0yID0gdGVybS5wb2RBZmZpbml0eVRlcm0sCiAgICAgICAgcG9kQWZmaW5pdHlUZXJtID0gX3Rlcm0kcG9kQWZmaW5pdHlUZXJtMiA9PT0gdm9pZCAwID8ge30gOiBfdGVybSRwb2RBZmZpbml0eVRlcm0yOwogICAgICB2YWxpZGF0ZVRvcG9sb2d5S2V5KHBvZEFmZmluaXR5VGVybSwgZXJyb3JPcHRzLCBnZXR0ZXJzLCBlcnJvcnMpOwogICAgICB2YWxpZGF0ZUxhYmVsU2VsZWN0b3IocG9kQWZmaW5pdHlUZXJtLCBlcnJvck9wdHMsIGdldHRlcnMsIGVycm9ycyk7CiAgICB9KTsKICAgIF9yZXF1aXJlZER1cmluZ1NjaGVkdWxpbmdJZ25vcmVkRHVyaW5nRXhlY3V0aW9uLmZvckVhY2goZnVuY3Rpb24gKHRlcm0sIGkpIHsKICAgICAgdmFyIGVycm9yT3B0cyA9IHsKICAgICAgICBpbmRleDogaSwKICAgICAgICBncm91cDogZ2V0dGVyc1snaTE4bi90J10oJ3ZhbGlkYXRpb24ucG9kQWZmaW5pdHkuYW50aUFmZmluaXR5VGl0bGUnKSwKICAgICAgICBydWxlczogZ2V0dGVyc1snaTE4bi90J10oJ3ZhbGlkYXRpb24ucG9kQWZmaW5pdHkucmVxdWlyZWREdXJpbmdTY2hlZHVsaW5nSWdub3JlZER1cmluZ0V4ZWN1dGlvbicpCiAgICAgIH07CiAgICAgIHZhbGlkYXRlVG9wb2xvZ3lLZXkodGVybSwgZXJyb3JPcHRzLCBnZXR0ZXJzLCBlcnJvcnMpOwogICAgICB2YWxpZGF0ZUxhYmVsU2VsZWN0b3IodGVybSwgZXJyb3JPcHRzLCBnZXR0ZXJzLCBlcnJvcnMpOwogICAgfSk7CiAgfQp9CgovLyB2ZXJpZnkgd2VpZ2h0IChpZiBwcmVzZW50KSBpcyBpbnRlZ2VyIDEtMTAwCmZ1bmN0aW9uIHZhbGlkYXRlVGVybVdlaWdodChhZmZpbml0eVRlcm0sIGVycm9yT3B0cywgZ2V0dGVycywgZXJyb3JzKSB7CiAgdmFyIF9hZmZpbml0eVRlcm0kd2VpZ2h0ID0gYWZmaW5pdHlUZXJtLndlaWdodCwKICAgIHdlaWdodCA9IF9hZmZpbml0eVRlcm0kd2VpZ2h0ID09PSB2b2lkIDAgPyAxIDogX2FmZmluaXR5VGVybSR3ZWlnaHQ7CiAgaWYgKHR5cGVvZiB3ZWlnaHQgIT09ICdudW1iZXInIHx8IHdlaWdodCA+IDEwMCB8fCB3ZWlnaHQgPCAxKSB7CiAgICBlcnJvcnMucHVzaChnZXR0ZXJzWydpMThuL3QnXSgndmFsaWRhdGlvbi5udW1iZXIuYmV0d2VlbicsIF9vYmplY3RTcHJlYWQoewogICAgICBrZXk6IGdldHRlcnNbJ2kxOG4vdCddKCd3b3JrbG9hZC5zY2hlZHVsaW5nLm1hdGNoRXhwcmVzc2lvbnMud2VpZ2h0JyksCiAgICAgIG1pbjogMSwKICAgICAgbWF4OiAxMDAKICAgIH0sIGVycm9yT3B0cykpKTsKICB9Cn0KCi8vIHZlcmlmeSB0b3BvbG9neSBrZXkgaXMgcHJlc2VudCBhbmQgbWF0Y2hlcyByZWdleHAgZm9yIGxhYmVscwpmdW5jdGlvbiB2YWxpZGF0ZVRvcG9sb2d5S2V5KGFmZmluaXR5VGVybSwgZXJyb3JPcHRzLCBnZXR0ZXJzLCBlcnJvcnMpIHsKICB2YXIgdG9wb2xvZ3lLZXkgPSBhZmZpbml0eVRlcm0udG9wb2xvZ3lLZXk7CiAgdmFyIHJlZ2V4cCA9IFJlZ0V4cCgnKFtBLVphLXowLTldWy1BLVphLXowLTlfLl0qKT9bQS1aYS16MC05XScpOwogIGlmICghdG9wb2xvZ3lLZXkgfHwgIXJlZ2V4cC50ZXN0KHRvcG9sb2d5S2V5KSkgewogICAgZXJyb3JzLnB1c2goZ2V0dGVyc1snaTE4bi90J10oJ3ZhbGlkYXRpb24ucG9kQWZmaW5pdHkudG9wb2xvZ3lLZXknLCBlcnJvck9wdHMpKTsKICB9Cn0KCi8qCiAgICB2ZXJpZnkgdGhhdCBlYWNoIG1hdGNoRXhwcmVzc2lvbiBpbiBsYWJlbFNlbGVjdG9yOgogICAgb3BlcmF0b3IgaXMgb25lIG9mIFsnSW4nLCAnTm90SW4nLCAnRXhpc3RzJywgJ0RvZXNOb3RFeGlzdCddCiAgICB2YWx1ZXMgaXMgZGVmaW5lZCBpZiBvcGVyYXRvciBpcyBJbiBvciBOb3RJbgogICAgdmFsdWVzIGlzIGVtcHR5IGlmIG9wZXJhdG9yIGlzIEV4aXN0cyBvciBEb2VzTm90RXhpc3QKICovCmZ1bmN0aW9uIHZhbGlkYXRlTGFiZWxTZWxlY3RvcihhZmZpbml0eVRlcm0sIGVycm9yT3B0cywgZ2V0dGVycywgZXJyb3JzKSB7CiAgdmFyIHZhbGlkT3BlcmF0b3JzID0gWydJbicsICdOb3RJbicsICdFeGlzdHMnLCAnRG9lc05vdEV4aXN0J107CiAgdmFyIGxhYmVsU2VsZWN0b3IgPSBhZmZpbml0eVRlcm0ubGFiZWxTZWxlY3RvcjsKICBpZiAobGFiZWxTZWxlY3RvciAmJiAhaXNFbXB0eShsYWJlbFNlbGVjdG9yKSkgewogICAgdmFyIF9sYWJlbFNlbGVjdG9yJG1hdGNoRSA9IGxhYmVsU2VsZWN0b3IubWF0Y2hFeHByZXNzaW9ucywKICAgICAgbWF0Y2hFeHByZXNzaW9ucyA9IF9sYWJlbFNlbGVjdG9yJG1hdGNoRSA9PT0gdm9pZCAwID8gW10gOiBfbGFiZWxTZWxlY3RvciRtYXRjaEU7CiAgICBtYXRjaEV4cHJlc3Npb25zLmZvckVhY2goZnVuY3Rpb24gKHJ1bGUsIGkpIHsKICAgICAgdmFyIG9wZXJhdG9yID0gcnVsZS5vcGVyYXRvciwKICAgICAgICB2YWx1ZXMgPSBydWxlLnZhbHVlczsKICAgICAgaWYgKCF2YWxpZE9wZXJhdG9ycy5pbmNsdWRlcyhvcGVyYXRvcikpIHsKICAgICAgICBlcnJvcnMucHVzaChnZXR0ZXJzWydpMThuL3QnXSgndmFsaWRhdGlvbi5wb2RBZmZpbml0eS5tYXRjaEV4cHJlc3Npb25zLm9wZXJhdG9yJywgZXJyb3JPcHRzKSk7CiAgICAgIH0KICAgICAgaWYgKG9wZXJhdG9yID09PSAnSW4nIHx8IG9wZXJhdG9yID09PSAnTm90SW4nKSB7CiAgICAgICAgaWYgKCF2YWx1ZXMgfHwgIXZhbHVlcy5sZW5ndGgpIHsKICAgICAgICAgIGVycm9ycy5wdXNoKGdldHRlcnNbJ2kxOG4vdCddKCd2YWxpZGF0aW9uLnBvZEFmZmluaXR5Lm1hdGNoRXhwcmVzc2lvbnMudmFsdWVzTXVzdEJlRGVmaW5lZCcsIGVycm9yT3B0cykpOwogICAgICAgIH0KICAgICAgfSBlbHNlIGlmICh2YWx1ZXMgJiYgdmFsdWVzLmxlbmd0aCkgewogICAgICAgIGVycm9ycy5wdXNoKGdldHRlcnNbJ2kxOG4vdCddKCd2YWxpZGF0aW9uLnBvZEFmZmluaXR5Lm1hdGNoRXhwcmVzc2lvbnMudmFsdWVNdXN0QmVFbXB0eScsIGVycm9yT3B0cykpOwogICAgICB9CiAgICB9KTsKICB9Cn0="},{"version":3,"names":["isEmpty","podAffinity","spec","getters","errors","podAntiAffinity","_podAffinity$preferre","preferredDuringSchedulingIgnoredDuringExecution","_podAffinity$required","requiredDuringSchedulingIgnoredDuringExecution","forEach","term","i","errorOpts","index","group","rules","validateTermWeight","_term$podAffinityTerm","podAffinityTerm","validateTopologyKey","validateLabelSelector","_podAntiAffinity$pref","_podAntiAffinity$requ","_term$podAffinityTerm2","affinityTerm","_affinityTerm$weight","weight","push","_objectSpread","key","min","max","topologyKey","regexp","RegExp","test","validOperators","labelSelector","_labelSelector$matchE","matchExpressions","rule","operator","values","includes","length"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/validators/pod-affinity.js"],"sourcesContent":["import { isEmpty } from '@shell/utils/object';\n\n// spec = podSpec.affinity\nexport function podAffinity(spec, getters, errors) {\n  if (!spec) {\n    return;\n  }\n  const { podAffinity, podAntiAffinity } = spec;\n\n  // pod affinity\n  if (podAffinity && !isEmpty(podAffinity)) {\n    const { preferredDuringSchedulingIgnoredDuringExecution = [], requiredDuringSchedulingIgnoredDuringExecution = [] } = podAffinity;\n\n    preferredDuringSchedulingIgnoredDuringExecution.forEach((term, i) => {\n      const errorOpts = {\n        index: i,\n        group: getters['i18n/t']('validation.podAffinity.affinityTitle'),\n        rules: getters['i18n/t']('validation.podAffinity.preferredDuringSchedulingIgnoredDuringExecution')\n      };\n\n      validateTermWeight(term, errorOpts, getters, errors);\n\n      const { podAffinityTerm = {} } = term;\n\n      validateTopologyKey(podAffinityTerm, errorOpts, getters, errors);\n      validateLabelSelector(podAffinityTerm, errorOpts, getters, errors);\n    });\n\n    requiredDuringSchedulingIgnoredDuringExecution.forEach((term, i) => {\n      const errorOpts = {\n        index: i,\n        group: getters['i18n/t']('validation.podAffinity.affinityTitle'),\n        rules: getters['i18n/t']('validation.podAffinity.requiredDuringSchedulingIgnoredDuringExecution')\n      };\n\n      validateTopologyKey(term, errorOpts, getters, errors);\n      validateLabelSelector(term, errorOpts, getters, errors);\n    });\n  }\n\n  // pod antiaffinity\n  if (podAntiAffinity && !isEmpty(podAntiAffinity)) {\n    const { preferredDuringSchedulingIgnoredDuringExecution = [], requiredDuringSchedulingIgnoredDuringExecution = [] } = podAntiAffinity;\n\n    preferredDuringSchedulingIgnoredDuringExecution.forEach((term, i) => {\n      const errorOpts = {\n        index: i,\n        group: getters['i18n/t']('validation.podAffinity.antiAffinityTitle'),\n        rules: getters['i18n/t']('validation.podAffinity.preferredDuringSchedulingIgnoredDuringExecution')\n      };\n\n      validateTermWeight(term, errorOpts, getters, errors);\n\n      const { podAffinityTerm = {} } = term;\n\n      validateTopologyKey(podAffinityTerm, errorOpts, getters, errors);\n\n      validateLabelSelector(podAffinityTerm, errorOpts, getters, errors);\n    });\n\n    requiredDuringSchedulingIgnoredDuringExecution.forEach((term, i) => {\n      const errorOpts = {\n        index: i,\n        group: getters['i18n/t']('validation.podAffinity.antiAffinityTitle'),\n        rules: getters['i18n/t']('validation.podAffinity.requiredDuringSchedulingIgnoredDuringExecution')\n      };\n\n      validateTopologyKey(term, errorOpts, getters, errors);\n\n      validateLabelSelector(term, errorOpts, getters, errors);\n    });\n  }\n}\n\n// verify weight (if present) is integer 1-100\nfunction validateTermWeight(affinityTerm, errorOpts, getters, errors) {\n  const { weight = 1 } = affinityTerm;\n\n  if (typeof weight !== 'number' || weight > 100 || weight < 1 ) {\n    errors.push(getters['i18n/t']('validation.number.between', {\n      key: getters['i18n/t']('workload.scheduling.matchExpressions.weight'),\n      min: 1,\n      max: 100,\n      ...errorOpts\n    }));\n  }\n}\n\n// verify topology key is present and matches regexp for labels\nfunction validateTopologyKey(affinityTerm, errorOpts, getters, errors) {\n  const { topologyKey } = affinityTerm;\n  const regexp = RegExp('([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9]');\n\n  if (!topologyKey || !regexp.test(topologyKey)) {\n    errors.push(getters['i18n/t']('validation.podAffinity.topologyKey', errorOpts));\n  }\n}\n\n/*\n    verify that each matchExpression in labelSelector:\n    operator is one of ['In', 'NotIn', 'Exists', 'DoesNotExist']\n    values is defined if operator is In or NotIn\n    values is empty if operator is Exists or DoesNotExist\n */\nfunction validateLabelSelector(affinityTerm, errorOpts, getters, errors) {\n  const validOperators = ['In', 'NotIn', 'Exists', 'DoesNotExist'];\n\n  const { labelSelector } = affinityTerm;\n\n  if (labelSelector && !isEmpty(labelSelector)) {\n    const { matchExpressions = [] } = labelSelector;\n\n    matchExpressions.forEach((rule, i) => {\n      const { operator, values } = rule;\n\n      if (!validOperators.includes(operator)) {\n        errors.push(getters['i18n/t']('validation.podAffinity.matchExpressions.operator', errorOpts));\n      }\n      if (operator === 'In' || operator === 'NotIn') {\n        if (!values || !values.length) {\n          errors.push(getters['i18n/t']('validation.podAffinity.matchExpressions.valuesMustBeDefined', errorOpts));\n        }\n      } else if (values && values.length) {\n        errors.push(getters['i18n/t']('validation.podAffinity.matchExpressions.valueMustBeEmpty', errorOpts));\n      }\n    });\n  }\n}\n"],"mappings":"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"}]}