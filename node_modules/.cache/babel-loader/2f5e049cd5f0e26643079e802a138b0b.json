{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/socket.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/socket.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVmbGVjdC5jb25zdHJ1Y3QuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfY2xhc3NDYWxsQ2hlY2sgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZUNsYXNzIjsKaW1wb3J0IF9pbmhlcml0cyBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9pbmhlcml0cyI7CmltcG9ydCBfcG9zc2libGVDb25zdHJ1Y3RvclJldHVybiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuIjsKaW1wb3J0IF9nZXRQcm90b3R5cGVPZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9nZXRQcm90b3R5cGVPZiI7CmZ1bmN0aW9uIG93bktleXMoZSwgcikgeyB2YXIgdCA9IE9iamVjdC5rZXlzKGUpOyBpZiAoT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scykgeyB2YXIgbyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMoZSk7IHIgJiYgKG8gPSBvLmZpbHRlcihmdW5jdGlvbiAocikgeyByZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLCByKS5lbnVtZXJhYmxlOyB9KSksIHQucHVzaC5hcHBseSh0LCBvKTsgfSByZXR1cm4gdDsgfQpmdW5jdGlvbiBfb2JqZWN0U3ByZWFkKGUpIHsgZm9yICh2YXIgciA9IDE7IHIgPCBhcmd1bWVudHMubGVuZ3RoOyByKyspIHsgdmFyIHQgPSBudWxsICE9IGFyZ3VtZW50c1tyXSA/IGFyZ3VtZW50c1tyXSA6IHt9OyByICUgMiA/IG93bktleXMoT2JqZWN0KHQpLCAhMCkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBfZGVmaW5lUHJvcGVydHkoZSwgciwgdFtyXSk7IH0pIDogT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnMgPyBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhlLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyh0KSkgOiBvd25LZXlzKE9iamVjdCh0KSkuZm9yRWFjaChmdW5jdGlvbiAocikgeyBPYmplY3QuZGVmaW5lUHJvcGVydHkoZSwgciwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcih0LCByKSk7IH0pOyB9IHJldHVybiBlOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZW50cmllcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5qb2luLmpzIjsKZnVuY3Rpb24gX2NyZWF0ZVN1cGVyKERlcml2ZWQpIHsgdmFyIGhhc05hdGl2ZVJlZmxlY3RDb25zdHJ1Y3QgPSBfaXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KCk7IHJldHVybiBmdW5jdGlvbiBfY3JlYXRlU3VwZXJJbnRlcm5hbCgpIHsgdmFyIFN1cGVyID0gX2dldFByb3RvdHlwZU9mKERlcml2ZWQpLCByZXN1bHQ7IGlmIChoYXNOYXRpdmVSZWZsZWN0Q29uc3RydWN0KSB7IHZhciBOZXdUYXJnZXQgPSBfZ2V0UHJvdG90eXBlT2YodGhpcykuY29uc3RydWN0b3I7IHJlc3VsdCA9IFJlZmxlY3QuY29uc3RydWN0KFN1cGVyLCBhcmd1bWVudHMsIE5ld1RhcmdldCk7IH0gZWxzZSB7IHJlc3VsdCA9IFN1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7IH0gcmV0dXJuIF9wb3NzaWJsZUNvbnN0cnVjdG9yUmV0dXJuKHRoaXMsIHJlc3VsdCk7IH07IH0KZnVuY3Rpb24gX2lzTmF0aXZlUmVmbGVjdENvbnN0cnVjdCgpIHsgaWYgKHR5cGVvZiBSZWZsZWN0ID09PSAidW5kZWZpbmVkIiB8fCAhUmVmbGVjdC5jb25zdHJ1Y3QpIHJldHVybiBmYWxzZTsgaWYgKFJlZmxlY3QuY29uc3RydWN0LnNoYW0pIHJldHVybiBmYWxzZTsgaWYgKHR5cGVvZiBQcm94eSA9PT0gImZ1bmN0aW9uIikgcmV0dXJuIHRydWU7IHRyeSB7IEJvb2xlYW4ucHJvdG90eXBlLnZhbHVlT2YuY2FsbChSZWZsZWN0LmNvbnN0cnVjdChCb29sZWFuLCBbXSwgZnVuY3Rpb24gKCkge30pKTsgcmV0dXJuIHRydWU7IH0gY2F0Y2ggKGUpIHsgcmV0dXJuIGZhbHNlOyB9IH0KaW1wb3J0IHsgRXZlbnRUYXJnZXQgfSBmcm9tICdldmVudC10YXJnZXQtc2hpbSc7CmltcG9ydCB7IGlzU2FmYXJpIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3BsYXRmb3JtJzsKaW1wb3J0IHsgYWRkUGFyYW0gfSBmcm9tICdAc2hlbGwvdXRpbHMvdXJsJzsKdmFyIHNvY2tJZCA9IDE7CnZhciB3YXJuaW5nU2hvd24gPSBmYWxzZTsKdmFyIHdhc0Nvbm5lY3RlZCA9IGZhbHNlOwp2YXIgSU5TRUNVUkUgPSAnd3M6Ly8nOwp2YXIgU0VDVVJFID0gJ3dzczovLyc7CnZhciBTVEFURV9ESVNDT05ORUNURUQgPSAnZGlzY29ubmVjdGVkJzsKZXhwb3J0IHZhciBhZGRFdmVudExpc3RlbmVyID0gRXZlbnRUYXJnZXQuYWRkRXZlbnRMaXN0ZW5lcjsKZXhwb3J0IHZhciBTVEFURV9DT05ORUNUSU5HID0gJ2Nvbm5lY3RpbmcnOwpleHBvcnQgdmFyIFNUQVRFX0NPTk5FQ1RFRCA9ICdjb25uZWN0ZWQnOwp2YXIgU1RBVEVfQ0xPU0lORyA9ICdjbG9zaW5nJzsKdmFyIFNUQVRFX1JFQ09OTkVDVElORyA9ICdyZWNvbm5lY3RpbmcnOwpleHBvcnQgdmFyIEVWRU5UX0NPTk5FQ1RJTkcgPSBTVEFURV9DT05ORUNUSU5HOwpleHBvcnQgdmFyIEVWRU5UX0NPTk5FQ1RFRCA9IFNUQVRFX0NPTk5FQ1RFRDsKZXhwb3J0IHZhciBFVkVOVF9ESVNDT05ORUNURUQgPSBTVEFURV9ESVNDT05ORUNURUQ7CmV4cG9ydCB2YXIgRVZFTlRfTUVTU0FHRSA9ICdtZXNzYWdlJzsKZXhwb3J0IHZhciBFVkVOVF9GUkFNRV9USU1FT1VUID0gJ2ZyYW1lX3RpbWVvdXQnOwpleHBvcnQgdmFyIEVWRU5UX0NPTk5FQ1RfRVJST1IgPSAnY29ubmVjdF9lcnJvcic7CmV4cG9ydCB2YXIgRVZFTlRfRElTQ09OTkVDVF9FUlJPUiA9ICdkaXNjb25uZWN0X2Vycm9yJzsKZXhwb3J0IHZhciBOT19XQVRDSCA9ICdOT19XQVRDSCc7CmV4cG9ydCB2YXIgTk9fU0NIRU1BID0gJ05PX1NDSEVNQSc7CmV4cG9ydCB2YXIgUkVWSVNJT05fVE9PX09MRCA9ICdUT09fT0xEJzsKdmFyIFNvY2tldCA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoX0V2ZW50VGFyZ2V0KSB7CiAgX2luaGVyaXRzKFNvY2tldCwgX0V2ZW50VGFyZ2V0KTsKICB2YXIgX3N1cGVyID0gX2NyZWF0ZVN1cGVyKFNvY2tldCk7CiAgZnVuY3Rpb24gU29ja2V0KHVybCkgewogICAgdmFyIF90aGlzOwogICAgdmFyIGF1dG9SZWNvbm5lY3QgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgICB2YXIgZnJhbWVUaW1lb3V0ID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiBudWxsOwogICAgdmFyIHByb3RvY29sID0gYXJndW1lbnRzLmxlbmd0aCA+IDMgJiYgYXJndW1lbnRzWzNdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbM10gOiBudWxsOwogICAgdmFyIG1heFRyaWVzID0gYXJndW1lbnRzLmxlbmd0aCA+IDQgJiYgYXJndW1lbnRzWzRdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbNF0gOiBudWxsOwogICAgdmFyIGlkQXNUaW1lc3RhbXAgPSBhcmd1bWVudHMubGVuZ3RoID4gNSAmJiBhcmd1bWVudHNbNV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1s1XSA6IGZhbHNlOwogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFNvY2tldCk7CiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMpOwogICAgX3RoaXMudXJsID0gdm9pZCAwOwogICAgX3RoaXMuYXV0b1JlY29ubmVjdCA9IHRydWU7CiAgICBfdGhpcy5mcmFtZVRpbWVvdXQgPSAzNTAwMDsKICAgIF90aGlzLm1ldGFkYXRhID0ge307CiAgICBfdGhpcy5oYXNCZWVuT3BlbiA9IGZhbHNlOwogICAgX3RoaXMuaGFzUmVjb25uZWN0ZWQgPSBmYWxzZTsKICAgIF90aGlzLnByb3RvY29sID0gbnVsbDsKICAgIF90aGlzLm1heFRyaWVzID0gbnVsbDsKICAgIF90aGlzLnRyaWVzID0gMDsKICAgIF90aGlzLmlkQXNUaW1lc3RhbXAgPSBmYWxzZTsKICAgIC8vICJQcml2YXRlIgogICAgX3RoaXMuc29ja2V0ID0gbnVsbDsKICAgIF90aGlzLnN0YXRlID0gU1RBVEVfRElTQ09OTkVDVEVEOwogICAgX3RoaXMuZnJhbWVzUmVjZWl2ZWQgPSAwOwogICAgX3RoaXMuZnJhbWVUaW1lciA9IHZvaWQgMDsKICAgIF90aGlzLnJlY29ubmVjdFRpbWVyID0gdm9pZCAwOwogICAgX3RoaXMuZGlzY29ubmVjdENhbGxCYWNrcyA9IFtdOwogICAgX3RoaXMuZGlzY29ubmVjdGVkQXQgPSAwOwogICAgX3RoaXMuY2xvc2luZ0lkID0gMDsKICAgIF90aGlzLmF1dG9SZWNvbm5lY3RVcmwgPSBudWxsOwogICAgX3RoaXMuc2V0VXJsKHVybCk7CiAgICBfdGhpcy5hdXRvUmVjb25uZWN0ID0gYXV0b1JlY29ubmVjdDsKICAgIF90aGlzLnByb3RvY29sID0gcHJvdG9jb2w7CiAgICAvLyBtYXhUcmllcyA9IG51bGwgPT09IG5ldmVyIHN0b3AgdHJ5aW5nIHRvIHJlY29ubmVjdAogICAgLy8gYWxsb3cgbWF4VHJpZXMgdG8gYmUgZGVmaW5lZCBvbiBpbmRpdmlkdWFsIHNvY2tldHMgYmMgbm90IGFsbCB3aWxsIGNsZWFybHkgd2FybiB0aGUgdXNlciB0aGF0IHdlJ3ZlIHN0b3BwZWQgdHJ5aW5nCiAgICBfdGhpcy5tYXhUcmllcyA9IG1heFRyaWVzOwogICAgX3RoaXMuaWRBc1RpbWVzdGFtcCA9IGlkQXNUaW1lc3RhbXA7CiAgICBpZiAoZnJhbWVUaW1lb3V0ICE9PSBudWxsKSB7CiAgICAgIF90aGlzLmZyYW1lVGltZW91dCA9IGZyYW1lVGltZW91dDsKICAgIH0KICAgIHJldHVybiBfdGhpczsKICB9CiAgX2NyZWF0ZUNsYXNzKFNvY2tldCwgW3sKICAgIGtleTogInNldFVybCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc2V0VXJsKHVybCkgewogICAgICBpZiAoIXVybC5tYXRjaCgvd3NzPzpcL1wvLykpIHsKICAgICAgICB1cmwgPSBzZWxmLmxvY2F0aW9uLm9yaWdpbi5yZXBsYWNlKC9eaHR0cC8sICd3cycpICsgdXJsOwogICAgICB9CiAgICAgIGlmIChzZWxmLmxvY2F0aW9uLnByb3RvY29sID09PSAnaHR0cHM6JyAmJiB1cmwuc3RhcnRzV2l0aChJTlNFQ1VSRSkpIHsKICAgICAgICB1cmwgPSBTRUNVUkUgKyB1cmwuc3Vic3RyKElOU0VDVVJFLmxlbmd0aCk7CiAgICAgIH0KICAgICAgdGhpcy51cmwgPSB1cmw7CiAgICB9CiAgfSwgewogICAga2V5OiAiY29ubmVjdCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gY29ubmVjdCgpIHsKICAgICAgdmFyIG1ldGFkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgaWYgKHRoaXMuc29ja2V0KSB7CiAgICAgICAgY29uc29sZS5lcnJvcignU29ja2V0IHJlZnVzaW5nIHRvIGNvbm5lY3Qgd2hpbGUgYW5vdGhlciBzb2NrZXQgZXhpc3RzJyk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQoKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHRoaXMuc3RhdGUgIT09IFNUQVRFX1JFQ09OTkVDVElORykgewogICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9DT05ORUNUSU5HOwogICAgICB9CiAgICAgIE9iamVjdC5hc3NpZ24odGhpcy5tZXRhZGF0YSwgbWV0YWRhdGEpOwogICAgICB2YXIgaWQgPSB0aGlzLmlkQXNUaW1lc3RhbXAgPyBuZXcgRGF0ZSgpLmdldFRpbWUoKSA6IHNvY2tJZCsrOwogICAgICB2YXIgdXJsID0gYWRkUGFyYW0odGhpcy51cmwsICdzb2NrSWQnLCBpZCk7CiAgICAgIHRoaXMuX2Jhc2VMb2coJ2Nvbm5lY3RpbmcnLCB7CiAgICAgICAgaWQ6IGlkLAogICAgICAgIHVybDogdXJsLnJlcGxhY2UoL1w/LiovLCAnJykKICAgICAgfSk7CiAgICAgIHZhciBzb2NrZXQ7CiAgICAgIHRoaXMudHJpZXMrKzsKICAgICAgaWYgKHRoaXMucHJvdG9jb2wpIHsKICAgICAgICBzb2NrZXQgPSBuZXcgV2ViU29ja2V0KHVybCwgdGhpcy5wcm90b2NvbCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgc29ja2V0ID0gbmV3IFdlYlNvY2tldCh1cmwpOwogICAgICB9CiAgICAgIHNvY2tldC5zb2NrSWQgPSBpZDsKICAgICAgc29ja2V0Lm1ldGFkYXRhID0gdGhpcy5tZXRhZGF0YTsKICAgICAgc29ja2V0Lm9ubWVzc2FnZSA9IHRoaXMuX29ubWVzc2FnZS5iaW5kKHRoaXMpOwogICAgICBzb2NrZXQub25vcGVuID0gdGhpcy5fb3BlbmVkLmJpbmQodGhpcyk7CiAgICAgIHNvY2tldC5vbmVycm9yID0gdGhpcy5fZXJyb3IuYmluZCh0aGlzKTsKICAgICAgc29ja2V0Lm9uY2xvc2UgPSB0aGlzLl9jbG9zZWQuYmluZCh0aGlzKTsKICAgICAgdGhpcy5zb2NrZXQgPSBzb2NrZXQ7CiAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9DT05ORUNUSU5HOwogICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5UX0NPTk5FQ1RJTkcpKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZW5kIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZW5kKGRhdGEpIHsKICAgICAgaWYgKHRoaXMuc29ja2V0ICYmIHRoaXMuc3RhdGUgPT09IFNUQVRFX0NPTk5FQ1RFRCkgewogICAgICAgIHRoaXMuc29ja2V0LnNlbmQoZGF0YSk7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogIH0sIHsKICAgIGtleTogImRpc2Nvbm5lY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGRpc2Nvbm5lY3QoY2FsbEJhY2spIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CiAgICAgIGlmIChjYWxsQmFjaykgewogICAgICAgIHRoaXMuZGlzY29ubmVjdENhbGxCYWNrcy5wdXNoKGNhbGxCYWNrKTsKICAgICAgfQogICAgICB2YXIgc2VsZiA9IHRoaXM7CiAgICAgIHZhciBwcm9taXNlID0gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUsIHJlamVjdCkgewogICAgICAgIGlmIChfdGhpczIuc3RhdGUgPT09IFNUQVRFX0RJU0NPTk5FQ1RFRCkgewogICAgICAgICAgcmVzb2x2ZSgpOwogICAgICAgIH0KICAgICAgICBmdW5jdGlvbiBvbkVycm9yKGUpIHsKICAgICAgICAgIHJlamVjdChlKTsKICAgICAgICAgIHNlbGYucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVF9DT05ORUNUX0VSUk9SLCBvbkVycm9yKTsKICAgICAgICB9CiAgICAgICAgX3RoaXMyLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlRfQ09OTkVDVF9FUlJPUiwgb25FcnJvcik7CiAgICAgICAgX3RoaXMyLmRpc2Nvbm5lY3RDYWxsQmFja3MucHVzaChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBfdGhpczIucmVtb3ZlRXZlbnRMaXN0ZW5lcihFVkVOVF9DT05ORUNUX0VSUk9SLCBvbkVycm9yKTsKICAgICAgICAgIHJlc29sdmUoKTsKICAgICAgICB9KTsKICAgICAgfSk7CiAgICAgIHRoaXMuYXV0b1JlY29ubmVjdCA9IGZhbHNlOwogICAgICB0aGlzLl9jbG9zZSgpOwogICAgICByZXR1cm4gcHJvbWlzZTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWNvbm5lY3QiLAogICAgdmFsdWU6IGZ1bmN0aW9uIHJlY29ubmVjdCgpIHsKICAgICAgdmFyIG1ldGFkYXRhID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLm1ldGFkYXRhLCBtZXRhZGF0YSk7CiAgICAgIGlmICh0aGlzLnN0YXRlID09PSBTVEFURV9DT05ORUNUSU5HKSB7CiAgICAgICAgdGhpcy5fbG9nKCdJZ25vcmluZyByZWNvbm5lY3QgZm9yIHNvY2tldCBpbiBjb25uZWN0aW5nJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmICh0aGlzLnNvY2tldCkgewogICAgICAgIHRoaXMuX2Nsb3NlKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5jb25uZWN0KG1ldGFkYXRhKTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldE1ldGFkYXRhIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRNZXRhZGF0YSgpIHsKICAgICAgaWYgKHRoaXMuc29ja2V0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc29ja2V0Lm1ldGFkYXRhOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImdldElkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBnZXRJZCgpIHsKICAgICAgaWYgKHRoaXMuc29ja2V0KSB7CiAgICAgICAgcmV0dXJuIHRoaXMuc29ja2V0LnNvY2tJZDsKICAgICAgfSBlbHNlIHsKICAgICAgICByZXR1cm4gMDsKICAgICAgfQogICAgfQogIH0sIHsKICAgIGtleTogImlzQ29ubmVjdGVkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBpc0Nvbm5lY3RlZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RhdGUgPT09IFNUQVRFX0NPTk5FQ1RFRDsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJzZXRBdXRvUmVjb25uZWN0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBdXRvUmVjb25uZWN0KGF1dG9SZWNvbm5lY3QpIHsKICAgICAgdGhpcy5hdXRvUmVjb25uZWN0ID0gYXV0b1JlY29ubmVjdDsKICAgIH0KCiAgICAvKioKICAgICAqIFN1cHBseSBhbiBhc3luYyBmbiB0aGF0IHdpbGwgcHJvdmlkZSBhIG5ldyB1cmwgdG8gcmVjb25uZWN0IHRvCiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJzZXRBdXRvUmVjb25uZWN0VXJsIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzZXRBdXRvUmVjb25uZWN0VXJsKGF1dG9SZWNvbm5lY3RVcmwpIHsKICAgICAgdGhpcy5hdXRvUmVjb25uZWN0VXJsID0gYXV0b1JlY29ubmVjdFVybDsKICAgIH0KCiAgICAvLyAiUHJpdmF0ZSIKICB9LCB7CiAgICBrZXk6ICJfY2xvc2UiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9jbG9zZSgpIHsKICAgICAgdmFyIHNvY2tldCA9IHRoaXMuc29ja2V0OwogICAgICBpZiAoIXNvY2tldCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICB0cnkgewogICAgICAgIHRoaXMuX2xvZygnY2xvc2luZycpOwogICAgICAgIHRoaXMuY2xvc2luZ0lkID0gc29ja2V0LnNvY2tJZDsKICAgICAgICBzb2NrZXQub25vcGVuID0gbnVsbDsKICAgICAgICBzb2NrZXQub25lcnJvciA9IG51bGw7CiAgICAgICAgc29ja2V0Lm9ubWVzc2FnZSA9IG51bGw7CiAgICAgICAgc29ja2V0LmNsb3NlKCk7CiAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICB0aGlzLl9sb2coJ2V4Y2VwdGlvbicsIHsKICAgICAgICAgIGU6IGUudG9TdHJpbmcoKQogICAgICAgIH0pOwogICAgICAgIC8vIENvbnRpbnVlIGFueXdheS4uLgogICAgICB9CiAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9DTE9TSU5HOwogICAgfQogIH0sIHsKICAgIGtleTogIl9vcGVuZWQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9vcGVuZWQoKSB7CiAgICAgIHRoaXMuX2xvZygnb3BlbmVkJyk7CiAgICAgIHZhciBub3cgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTsKICAgICAgdmFyIGF0VGltZSA9IHRoaXMuZGlzY29ubmVjdGVkQXQ7CiAgICAgIHZhciBhZnRlck1pbGxpc2Vjb25kcyA9IDA7CiAgICAgIGlmIChhdFRpbWUpIHsKICAgICAgICBhZnRlck1pbGxpc2Vjb25kcyA9IG5vdyAtIGF0VGltZTsKICAgICAgfQogICAgICBpZiAodGhpcy5oYXNCZWVuT3BlbikgewogICAgICAgIHRoaXMuaGFzUmVjb25uZWN0ZWQgPSB0cnVlOwogICAgICB9CiAgICAgIHRoaXMuaGFzQmVlbk9wZW4gPSB0cnVlOwogICAgICB0aGlzLnN0YXRlID0gU1RBVEVfQ09OTkVDVEVEOwogICAgICB0aGlzLmZyYW1lc1JlY2VpdmVkID0gMDsKICAgICAgdGhpcy5kaXNjb25uZWN0ZWRBdCA9IDA7CiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoRVZFTlRfQ09OTkVDVEVELCB7CiAgICAgICAgZGV0YWlsOiB7CiAgICAgICAgICB0cmllczogdGhpcy50cmllcywKICAgICAgICAgIGFmdGVyTWlsbGlzZWNvbmRzOiBhZnRlck1pbGxpc2Vjb25kcwogICAgICAgIH0KICAgICAgfSkpOwogICAgICB0aGlzLnRyaWVzID0gMDsKICAgICAgdGhpcy5fcmVzZXRXYXRjaGRvZygpOwogICAgICBjbGVhclRpbWVvdXQodGhpcy5yZWNvbm5lY3RUaW1lcik7CiAgICB9CiAgfSwgewogICAga2V5OiAiX29ubWVzc2FnZSIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX29ubWVzc2FnZShldmVudCkgewogICAgICB0aGlzLl9yZXNldFdhdGNoZG9nKCk7CiAgICAgIHRoaXMudHJpZXMgPSAwOwogICAgICB0aGlzLmZyYW1lc1JlY2VpdmVkKys7CiAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoRVZFTlRfTUVTU0FHRSwgewogICAgICAgIGRldGFpbDogZXZlbnQKICAgICAgfSkpOwogICAgfQogIH0sIHsKICAgIGtleTogIl9yZXNldFdhdGNoZG9nIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfcmVzZXRXYXRjaGRvZygpIHsKICAgICAgdmFyIF90aGlzMyA9IHRoaXM7CiAgICAgIGNsZWFyVGltZW91dCh0aGlzLmZyYW1lVGltZXIpOwogICAgICB2YXIgdGltZW91dCA9IHRoaXMuZnJhbWVUaW1lb3V0OwogICAgICBpZiAodGltZW91dCAmJiB0aGlzLnN0YXRlID09PSBTVEFURV9DT05ORUNURUQpIHsKICAgICAgICB0aGlzLmZyYW1lVGltZXIgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHsKICAgICAgICAgIF90aGlzMy5fbG9nKCJ3YXRjaGRvZyBleHBpcmVkIGFmdGVyIi5jb25jYXQodGltZW91dCwgIi4gQ2xvc2luZyIpKTsKICAgICAgICAgIF90aGlzMy5fY2xvc2UoKTsKICAgICAgICAgIF90aGlzMy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChFVkVOVF9GUkFNRV9USU1FT1VUKSk7CiAgICAgICAgfSwgdGltZW91dCk7CiAgICAgIH0KICAgIH0KICB9LCB7CiAgICBrZXk6ICJfZXJyb3IiLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9lcnJvcigpIHsKICAgICAgdGhpcy5jbG9zaW5nSWQgPSB0aGlzLnNvY2tldCA/IHRoaXMuc29ja2V0LnNvY2tJZCA6IDA7CiAgICAgIHRoaXMuX2xvZygnZXJyb3InKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJfY2xvc2VkIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBfY2xvc2VkKGV2ZW50KSB7CiAgICAgIHZhciBfdGhpcyRzb2NrZXQsCiAgICAgICAgX3RoaXM0ID0gdGhpczsKICAgICAgdmFyIGNvZGUgPSBldmVudC5jb2RlLAogICAgICAgIHJlYXNvbiA9IGV2ZW50LnJlYXNvbiwKICAgICAgICB3YXNDbGVhbiA9IGV2ZW50Lndhc0NsZWFuOwogICAgICB0aGlzLl9iYXNlTG9nKCdjbG9zZWQnLCB7CiAgICAgICAgaWQ6IHRoaXMuY2xvc2luZ0lkIHx8ICgoX3RoaXMkc29ja2V0ID0gdGhpcy5zb2NrZXQpID09PSBudWxsIHx8IF90aGlzJHNvY2tldCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkc29ja2V0LnNvY2tJZCkgfHwgJ3Vua25vd24nLAogICAgICAgIGNvZGU6IGNvZGUsCiAgICAgICAgcmVhc29uOiByZWFzb24sCiAgICAgICAgY2xlYW46IHdhc0NsZWFuCiAgICAgIH0pOwogICAgICB0aGlzLmNsb3NpbmdJZCA9IDA7CiAgICAgIHRoaXMuc29ja2V0ID0gbnVsbDsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMucmVjb25uZWN0VGltZXIpOwogICAgICBjbGVhclRpbWVvdXQodGhpcy5mcmFtZVRpbWVyKTsKICAgICAgdmFyIGNhbGxCYWNrcyA9IHRoaXMuZGlzY29ubmVjdENhbGxCYWNrczsKICAgICAgd2hpbGUgKGNhbGxCYWNrcy5sZW5ndGgpIHsKICAgICAgICB2YXIgZm4gPSBjYWxsQmFja3MucG9wKCk7CiAgICAgICAgaWYgKGZuKSB7CiAgICAgICAgICBmbi5hcHBseSh0aGlzKTsKICAgICAgICB9CiAgICAgIH0KICAgICAgaWYgKFtTVEFURV9DT05ORUNURUQsIFNUQVRFX0NMT1NJTkddLmluY2x1ZGVzKHRoaXMuc3RhdGUpKSB7CiAgICAgICAgd2FzQ29ubmVjdGVkID0gdHJ1ZTsKICAgICAgfQogICAgICBpZiAoIXRoaXMuZGlzY29ubmVjdGVkQXQpIHsKICAgICAgICB0aGlzLmRpc2Nvbm5lY3RlZEF0ID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7CiAgICAgIH0KICAgICAgaWYgKCF3YXJuaW5nU2hvd24gJiYgIXdhc0Nvbm5lY3RlZCkgewogICAgICAgIHRoaXMuYXV0b1JlY29ubmVjdCA9IGZhbHNlOwogICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9ESVNDT05ORUNURUQ7CiAgICAgICAgdmFyIGUgPSBuZXcgQ3VzdG9tRXZlbnQoRVZFTlRfQ09OTkVDVF9FUlJPUiwgewogICAgICAgICAgZGV0YWlsOiB7CiAgICAgICAgICAgIGlzU2FmYXJpOiBpc1NhZmFyaQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICAgIHRoaXMuZGlzcGF0Y2hFdmVudChlKTsKICAgICAgICB3YXJuaW5nU2hvd24gPSB0cnVlOwogICAgICB9IGVsc2UgaWYgKHRoaXMuYXV0b1JlY29ubmVjdCkgewogICAgICAgIHRoaXMuc3RhdGUgPSBTVEFURV9SRUNPTk5FQ1RJTkc7CiAgICAgICAgaWYgKHRoaXMubWF4VHJpZXMgJiYgdGhpcy50cmllcyA+IDEgJiYgdGhpcy50cmllcyA8PSB0aGlzLm1heFRyaWVzKSB7CiAgICAgICAgICAvLyBkaXNwYXRjaCBhbiBldmVudCB3aGljaCB3aWxsIHRyaWdnZXIgYSBncm93bCBmcm9tIHN0ZXZlLXBsdWdpbiBzb2NrZXRzIHdhcm5pbmcgdXNlcnMgdGhhdCB3ZSd2ZSBsb3N0IGNvbm5lY3Rpb24gYW5kIGFyZSBhdHRlbXB0aW5nIHRvIHJlY29ubmVjdAogICAgICAgICAgdmFyIF9lID0gbmV3IEN1c3RvbUV2ZW50KEVWRU5UX0NPTk5FQ1RfRVJST1IpOwogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KF9lKTsKICAgICAgICB9CiAgICAgICAgaWYgKHRoaXMubWF4VHJpZXMgJiYgdGhpcy50cmllcyA+IHRoaXMubWF4VHJpZXMpIHsKICAgICAgICAgIHRoaXMuX2xvZygnY2xvc2VkLiBXaWxsIG5vdCByZWNvbm5lY3QgKGhpdCBtYXggYXR0ZW1wdHMpJyk7CiAgICAgICAgICB0aGlzLnN0YXRlID0gU1RBVEVfRElTQ09OTkVDVEVEOwogICAgICAgICAgLy8gZGlzcGF0Y2ggYW4gZXZlbnQgd2hpY2ggd2lsbCB0cmlnZ2VyIGEgZ3Jvd2wgZnJvbSBzdGV2ZS1wbHVnaW4gc29ja2V0cyB3YXJuaW5nIHVzZXJzIHRoYXQgd2UndmUgZ2l2ZW4gdXAgdHJ5aW5nIHRvIHJlY29ubmVjdAogICAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChFVkVOVF9ESVNDT05ORUNUX0VSUk9SKSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHZhciByZWNvbm5lY3QgPSBmdW5jdGlvbiByZWNvbm5lY3QoKSB7CiAgICAgICAgICAgIF90aGlzNC5fbG9nKCdjbG9zZWQuIEF0dGVtcHRpbmcgdG8gcmVjb25uZWN0Jyk7CiAgICAgICAgICAgIHZhciBkZWxheSA9IE1hdGgubWF4KDEwMDAsIE1hdGgubWluKDEwMDAgKiBfdGhpczQudHJpZXMsIDMwMDAwKSk7CiAgICAgICAgICAgIF90aGlzNC5yZWNvbm5lY3RUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkgewogICAgICAgICAgICAgIF90aGlzNC5jb25uZWN0KCk7CiAgICAgICAgICAgIH0sIGRlbGF5KTsKICAgICAgICAgIH07CiAgICAgICAgICBpZiAodGhpcy5hdXRvUmVjb25uZWN0VXJsKSB7CiAgICAgICAgICAgIHRoaXMuYXV0b1JlY29ubmVjdFVybCgpLnRoZW4oZnVuY3Rpb24gKHVybCkgewogICAgICAgICAgICAgIF90aGlzNC5zZXRVcmwodXJsKTsKICAgICAgICAgICAgICByZWNvbm5lY3QoKTsKICAgICAgICAgICAgfSkuY2F0Y2goZnVuY3Rpb24gKGUpIHsKICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggc29ja2V0IGF1dG8gcmVjb25uZWN0IHVybCcsIGUpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICByZWNvbm5lY3QoKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5zdGF0ZSA9IFNUQVRFX0RJU0NPTk5FQ1RFRDsKICAgICAgfQogICAgICBpZiAodGhpcy5zdGF0ZSA9PT0gU1RBVEVfRElTQ09OTkVDVEVEKSB7CiAgICAgICAgdGhpcy5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChFVkVOVF9ESVNDT05ORUNURUQpKTsKICAgICAgfSBlbHNlIGlmICh0aGlzLnN0YXRlID09PSBTVEFURV9SRUNPTk5FQ1RJTkcpIHsKICAgICAgICB0aGlzLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KEVWRU5UX0NPTk5FQ1RJTkcpKTsKICAgICAgfQogICAgfQoKICAgIC8qKgogICAgICogYGNvbnNvbGUubG9nYCB0aGUgcHJvdmlkZWQgc3VtbWFyeSBzdGF0ZW1lbnQsIHdpdGggZGVmYXVsdCBpbmZvcm1hdGlvbiB0byBpZGVudGlmeSB0aGUgc29ja2V0IGFuZCB0aGUgcHJvdmlkZWQgcHJvcHMKICAgICAqLwogIH0sIHsKICAgIGtleTogIl9sb2ciLAogICAgdmFsdWU6IGZ1bmN0aW9uIF9sb2coc3VtbWFyeSwgcHJvcHMpIHsKICAgICAgdmFyIF90aGlzJHNvY2tldDI7CiAgICAgIHRoaXMuX2Jhc2VMb2coc3VtbWFyeSwgX29iamVjdFNwcmVhZCh7CiAgICAgICAgc3RhdGU6IHRoaXMuc3RhdGUsCiAgICAgICAgaWQ6ICgoX3RoaXMkc29ja2V0MiA9IHRoaXMuc29ja2V0KSA9PT0gbnVsbCB8fCBfdGhpcyRzb2NrZXQyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyRzb2NrZXQyLnNvY2tJZCkgfHwgMAogICAgICB9LCBwcm9wcykpOwogICAgfQoKICAgIC8qKgogICAgICogYGNvbnNvbGUubG9nYCB0aGUgcHJvdmlkZWQgc3VtbWFyeSBzdGF0ZW1lbnQgYW5kIHByb3BzCiAgICAgKgogICAgICogVGhpcyBkb2VzIG5vdCBjb250YWluIGluZm9ybWF0aW9uIHRvIGlkZW50aWZ5IHRoZSBzb2NrZXQgYW5kIGNhbiBiZSB1c2VkIGluIHNjZW5hcmlvcyB3aGVyZSBpdCdzIG5vdCBrbm93biBvciBkZWZhdWx0CiAgICAgKi8KICB9LCB7CiAgICBrZXk6ICJfYmFzZUxvZyIsCiAgICB2YWx1ZTogZnVuY3Rpb24gX2Jhc2VMb2coc3VtbWFyeSwgcHJvcHMpIHsKICAgICAgdmFyIG1lc3NhZ2UgPSBbc3VtbWFyeV07CiAgICAgIHZhciB2YWx1ZXMgPSBPYmplY3QuZW50cmllcyhwcm9wcyB8fCB7fSk7CiAgICAgIG1lc3NhZ2UudW5zaGlmdCgnU29ja2V0ICcpOwogICAgICBpZiAodmFsdWVzLmxlbmd0aCkgewogICAgICAgIG1lc3NhZ2UucHVzaCgnICgnKTsKICAgICAgICB2YWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAoX3JlZiwgaW5kZXgpIHsKICAgICAgICAgIHZhciBfcmVmMiA9IF9zbGljZWRUb0FycmF5KF9yZWYsIDIpLAogICAgICAgICAgICBrZXkgPSBfcmVmMlswXSwKICAgICAgICAgICAgdmFsdWUgPSBfcmVmMlsxXTsKICAgICAgICAgIGlmIChpbmRleCAhPT0gMCkgewogICAgICAgICAgICBtZXNzYWdlLnB1c2goIiwgIik7CiAgICAgICAgICB9CiAgICAgICAgICBtZXNzYWdlLnB1c2goIiIuY29uY2F0KGtleSwgIj0iKS5jb25jYXQodmFsdWUpKTsKICAgICAgICB9KTsKICAgICAgICBtZXNzYWdlLnB1c2goJyknKTsKICAgICAgfQogICAgICBjb25zb2xlLmxvZyhtZXNzYWdlLmpvaW4oJycpKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICB9CiAgfV0pOwogIHJldHVybiBTb2NrZXQ7Cn0oRXZlbnRUYXJnZXQpOwpleHBvcnQgeyBTb2NrZXQgYXMgZGVmYXVsdCB9Ow=="},{"version":3,"names":["EventTarget","isSafari","addParam","sockId","warningShown","wasConnected","INSECURE","SECURE","STATE_DISCONNECTED","addEventListener","STATE_CONNECTING","STATE_CONNECTED","STATE_CLOSING","STATE_RECONNECTING","EVENT_CONNECTING","EVENT_CONNECTED","EVENT_DISCONNECTED","EVENT_MESSAGE","EVENT_FRAME_TIMEOUT","EVENT_CONNECT_ERROR","EVENT_DISCONNECT_ERROR","NO_WATCH","NO_SCHEMA","REVISION_TOO_OLD","Socket","_EventTarget","_inherits","_super","_createSuper","url","_this","autoReconnect","arguments","length","undefined","frameTimeout","protocol","maxTries","idAsTimestamp","_classCallCheck","call","metadata","hasBeenOpen","hasReconnected","tries","socket","state","framesReceived","frameTimer","reconnectTimer","disconnectCallBacks","disconnectedAt","closingId","autoReconnectUrl","setUrl","_createClass","key","value","match","self","location","origin","replace","startsWith","substr","connect","console","error","Object","assign","id","Date","getTime","_baseLog","WebSocket","onmessage","_onmessage","bind","onopen","_opened","onerror","_error","onclose","_closed","dispatchEvent","CustomEvent","send","data","disconnect","callBack","_this2","push","promise","Promise","resolve","reject","onError","e","removeEventListener","_close","reconnect","_log","getMetadata","getId","isConnected","setAutoReconnect","setAutoReconnectUrl","close","toString","now","atTime","afterMilliseconds","detail","_resetWatchdog","clearTimeout","event","_this3","timeout","setTimeout","concat","_this$socket","_this4","code","reason","wasClean","clean","callBacks","fn","pop","apply","includes","delay","Math","max","min","then","catch","summary","props","_this$socket2","_objectSpread","message","values","entries","unshift","forEach","_ref","index","_ref2","_slicedToArray","log","join","default"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/socket.js"],"sourcesContent":["import { EventTarget } from 'event-target-shim';\nimport { isSafari } from '@shell/utils/platform';\nimport { addParam } from '@shell/utils/url';\n\nlet sockId = 1;\nlet warningShown = false;\nlet wasConnected = false;\n\nconst INSECURE = 'ws://';\nconst SECURE = 'wss://';\n\nconst STATE_DISCONNECTED = 'disconnected';\n\nexport const addEventListener = EventTarget.addEventListener;\nexport const STATE_CONNECTING = 'connecting';\nexport const STATE_CONNECTED = 'connected';\nconst STATE_CLOSING = 'closing';\nconst STATE_RECONNECTING = 'reconnecting';\n\nexport const EVENT_CONNECTING = STATE_CONNECTING;\nexport const EVENT_CONNECTED = STATE_CONNECTED;\nexport const EVENT_DISCONNECTED = STATE_DISCONNECTED;\nexport const EVENT_MESSAGE = 'message';\nexport const EVENT_FRAME_TIMEOUT = 'frame_timeout';\nexport const EVENT_CONNECT_ERROR = 'connect_error';\nexport const EVENT_DISCONNECT_ERROR = 'disconnect_error';\n\nexport const NO_WATCH = 'NO_WATCH';\nexport const NO_SCHEMA = 'NO_SCHEMA';\nexport const REVISION_TOO_OLD = 'TOO_OLD';\n\nexport default class Socket extends EventTarget {\n  url;\n  autoReconnect = true;\n  frameTimeout = 35000;\n  metadata = {};\n  hasBeenOpen = false;\n  hasReconnected = false;\n  protocol = null;\n  maxTries = null;\n  tries = 0;\n  idAsTimestamp = false;\n\n  // \"Private\"\n  socket = null;\n  state = STATE_DISCONNECTED;\n  framesReceived = 0;\n  frameTimer;\n  reconnectTimer;\n  disconnectCallBacks = [];\n  disconnectedAt = 0;\n  closingId = 0;\n  autoReconnectUrl = null;\n\n  constructor(url, autoReconnect = true, frameTimeout = null, protocol = null, maxTries = null, idAsTimestamp = false) {\n    super();\n\n    this.setUrl(url);\n    this.autoReconnect = autoReconnect;\n    this.protocol = protocol;\n    // maxTries = null === never stop trying to reconnect\n    // allow maxTries to be defined on individual sockets bc not all will clearly warn the user that we've stopped trying\n    this.maxTries = maxTries;\n    this.idAsTimestamp = idAsTimestamp;\n\n    if ( frameTimeout !== null ) {\n      this.frameTimeout = frameTimeout;\n    }\n  }\n\n  setUrl(url) {\n    if ( !url.match(/wss?:\\/\\//) ) {\n      url = self.location.origin.replace(/^http/, 'ws') + url;\n    }\n\n    if ( self.location.protocol === 'https:' && url.startsWith(INSECURE) ) {\n      url = SECURE + url.substr(INSECURE.length);\n    }\n\n    this.url = url;\n  }\n\n  connect(metadata = {}) {\n    if ( this.socket ) {\n      console.error('Socket refusing to connect while another socket exists'); // eslint-disable-line no-console\n\n      return;\n    }\n\n    if (this.state !== STATE_RECONNECTING) {\n      this.state = STATE_CONNECTING;\n    }\n\n    Object.assign(this.metadata, metadata);\n\n    const id = this.idAsTimestamp ? new Date().getTime() : sockId++;\n    const url = addParam(this.url, 'sockId', id);\n\n    this._baseLog('connecting', { id, url: url.replace(/\\?.*/, '') });\n\n    let socket;\n\n    this.tries++;\n\n    if ( this.protocol ) {\n      socket = new WebSocket(url, this.protocol);\n    } else {\n      socket = new WebSocket(url);\n    }\n\n    socket.sockId = id;\n    socket.metadata = this.metadata;\n    socket.onmessage = this._onmessage.bind(this);\n    socket.onopen = this._opened.bind(this);\n    socket.onerror = this._error.bind(this);\n    socket.onclose = this._closed.bind(this);\n\n    this.socket = socket;\n    this.state = STATE_CONNECTING;\n\n    this.dispatchEvent(new CustomEvent(EVENT_CONNECTING));\n  }\n\n  send(data) {\n    if ( this.socket && this.state === STATE_CONNECTED ) {\n      this.socket.send(data);\n\n      return true;\n    }\n\n    return false;\n  }\n\n  disconnect(callBack) {\n    if ( callBack ) {\n      this.disconnectCallBacks.push(callBack);\n    }\n\n    const self = this;\n    const promise = new Promise((resolve, reject) => {\n      if ( this.state === STATE_DISCONNECTED ) {\n        resolve();\n      }\n\n      function onError(e) {\n        reject(e);\n        self.removeEventListener(EVENT_CONNECT_ERROR, onError);\n      }\n\n      this.addEventListener(EVENT_CONNECT_ERROR, onError);\n\n      this.disconnectCallBacks.push(() => {\n        this.removeEventListener(EVENT_CONNECT_ERROR, onError);\n        resolve();\n      });\n    });\n\n    this.autoReconnect = false;\n    this._close();\n\n    return promise;\n  }\n\n  reconnect(metadata = {}) {\n    Object.assign(this.metadata, metadata);\n\n    if ( this.state === STATE_CONNECTING ) {\n      this._log('Ignoring reconnect for socket in connecting');\n\n      return;\n    }\n\n    if ( this.socket ) {\n      this._close();\n    } else {\n      this.connect(metadata);\n    }\n  }\n\n  getMetadata() {\n    if ( this.socket ) {\n      return this.socket.metadata;\n    } else {\n      return {};\n    }\n  }\n\n  getId() {\n    if ( this.socket ) {\n      return this.socket.sockId;\n    } else {\n      return 0;\n    }\n  }\n\n  isConnected() {\n    return this.state === STATE_CONNECTED;\n  }\n\n  setAutoReconnect(autoReconnect) {\n    this.autoReconnect = autoReconnect;\n  }\n\n  /**\n   * Supply an async fn that will provide a new url to reconnect to\n   */\n  setAutoReconnectUrl(autoReconnectUrl) {\n    this.autoReconnectUrl = autoReconnectUrl;\n  }\n\n  // \"Private\"\n  _close() {\n    const socket = this.socket;\n\n    if ( !socket ) {\n      return;\n    }\n\n    try {\n      this._log('closing');\n      this.closingId = socket.sockId;\n      socket.onopen = null;\n      socket.onerror = null;\n      socket.onmessage = null;\n      socket.close();\n    } catch (e) {\n      this._log('exception', { e: e.toString() });\n      // Continue anyway...\n    }\n\n    this.state = STATE_CLOSING;\n  }\n\n  _opened() {\n    this._log('opened');\n    const now = (new Date()).getTime();\n\n    const atTime = this.disconnectedAt;\n    let afterMilliseconds = 0;\n\n    if ( atTime ) {\n      afterMilliseconds = now - atTime;\n    }\n\n    if ( this.hasBeenOpen ) {\n      this.hasReconnected = true;\n    }\n\n    this.hasBeenOpen = true;\n    this.state = STATE_CONNECTED;\n    this.framesReceived = 0;\n    this.disconnectedAt = 0;\n\n    this.dispatchEvent(new CustomEvent(EVENT_CONNECTED, { detail: { tries: this.tries, afterMilliseconds } }));\n    this.tries = 0;\n    this._resetWatchdog();\n    clearTimeout(this.reconnectTimer);\n  }\n\n  _onmessage(event) {\n    this._resetWatchdog();\n    this.tries = 0;\n    this.framesReceived++;\n\n    this.dispatchEvent(new CustomEvent(EVENT_MESSAGE, { detail: event }));\n  }\n\n  _resetWatchdog() {\n    clearTimeout(this.frameTimer);\n\n    const timeout = this.frameTimeout;\n\n    if ( timeout && this.state === STATE_CONNECTED) {\n      this.frameTimer = setTimeout(() => {\n        this._log(`watchdog expired after${ timeout }. Closing`);\n        this._close();\n        this.dispatchEvent(new CustomEvent(EVENT_FRAME_TIMEOUT));\n      }, timeout);\n    }\n  }\n\n  _error() {\n    this.closingId = (this.socket ? this.socket.sockId : 0);\n    this._log('error');\n  }\n\n  _closed(event) {\n    const { code, reason, wasClean } = event;\n\n    this._baseLog('closed', {\n      id: this.closingId || this.socket?.sockId || 'unknown', code, reason, clean: wasClean\n    });\n\n    this.closingId = 0;\n    this.socket = null;\n    clearTimeout(this.reconnectTimer);\n    clearTimeout(this.frameTimer);\n\n    const callBacks = this.disconnectCallBacks;\n\n    while ( callBacks.length ) {\n      const fn = callBacks.pop();\n\n      if ( fn ) {\n        fn.apply(this);\n      }\n    }\n\n    if ( [STATE_CONNECTED, STATE_CLOSING].includes(this.state) ) {\n      wasConnected = true;\n    }\n\n    if ( !this.disconnectedAt ) {\n      this.disconnectedAt = (new Date()).getTime();\n    }\n\n    if ( !warningShown && !wasConnected ) {\n      this.autoReconnect = false;\n      this.state = STATE_DISCONNECTED;\n\n      const e = new CustomEvent(EVENT_CONNECT_ERROR, { detail: { isSafari } });\n\n      this.dispatchEvent(e);\n      warningShown = true;\n    } else if ( this.autoReconnect ) {\n      this.state = STATE_RECONNECTING;\n\n      if (this.maxTries && this.tries > 1 && this.tries <= this.maxTries) {\n        // dispatch an event which will trigger a growl from steve-plugin sockets warning users that we've lost connection and are attempting to reconnect\n        const e = new CustomEvent(EVENT_CONNECT_ERROR);\n\n        this.dispatchEvent(e);\n      }\n\n      if (this.maxTries && this.tries > this.maxTries) {\n        this._log('closed. Will not reconnect (hit max attempts)');\n        this.state = STATE_DISCONNECTED;\n        // dispatch an event which will trigger a growl from steve-plugin sockets warning users that we've given up trying to reconnect\n        this.dispatchEvent(new CustomEvent(EVENT_DISCONNECT_ERROR));\n      } else {\n        const reconnect = () => {\n          this._log('closed. Attempting to reconnect');\n          const delay = Math.max(1000, Math.min(1000 * this.tries, 30000));\n\n          this.reconnectTimer = setTimeout(() => {\n            this.connect();\n          }, delay);\n        };\n\n        if (this.autoReconnectUrl) {\n          this.autoReconnectUrl()\n            .then((url) => {\n              this.setUrl(url);\n\n              reconnect();\n            })\n            .catch((e) => {\n              console.error('Failed to fetch socket auto reconnect url', e); // eslint-disable-line no-console\n            });\n        } else {\n          reconnect();\n        }\n      }\n    } else {\n      this.state = STATE_DISCONNECTED;\n    }\n\n    if ( this.state === STATE_DISCONNECTED ) {\n      this.dispatchEvent(new CustomEvent(EVENT_DISCONNECTED));\n    } else if ( this.state === STATE_RECONNECTING ) {\n      this.dispatchEvent(new CustomEvent(EVENT_CONNECTING));\n    }\n  }\n\n  /**\n   * `console.log` the provided summary statement, with default information to identify the socket and the provided props\n   */\n  _log(summary, props) {\n    this._baseLog(summary, {\n      state: this.state, id: this.socket?.sockId || 0, ...props\n    });\n  }\n\n  /**\n   * `console.log` the provided summary statement and props\n   *\n   * This does not contain information to identify the socket and can be used in scenarios where it's not known or default\n   */\n  _baseLog(summary, props) {\n    const message = [summary];\n    const values = Object.entries(props || {});\n\n    message.unshift('Socket ');\n\n    if (values.length) {\n      message.push(' (');\n      values.forEach(([key, value], index) => {\n        if (index !== 0) {\n          message.push(`, `);\n        }\n        message.push(`${ key }=${ value }`);\n      });\n      message.push(')');\n    }\n\n    console.log(message.join('')); // eslint-disable-line no-console\n  }\n}\n"],"mappings":"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"}]}