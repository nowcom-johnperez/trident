{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/SelectCredential.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/SelectCredential.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0IExvYWRpbmcgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvTG9hZGluZyc7CmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7CmltcG9ydCB7IE5PUk1BTiwgREVGQVVMVF9XT1JLU1BBQ0UgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IENyZWF0ZUVkaXRWaWV3IGZyb20gJ0BzaGVsbC9taXhpbnMvY3JlYXRlLWVkaXQtdmlldyc7CmltcG9ydCBDcnVSZXNvdXJjZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9DcnVSZXNvdXJjZSc7CmltcG9ydCBOYW1lTnNEZXNjcmlwdGlvbiBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL05hbWVOc0Rlc2NyaXB0aW9uJzsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IHsgQ0FQSSB9IGZyb20gJ0BzaGVsbC9jb25maWcvbGFiZWxzLWFubm90YXRpb25zJzsKaW1wb3J0IHsgY2xlYXIgfSBmcm9tICdAc2hlbGwvdXRpbHMvYXJyYXknOwp2YXIgX05FVyA9ICdfTkVXJzsKdmFyIF9OT05FID0gJ19OT05FJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExvYWRpbmc6IExvYWRpbmcsCiAgICBMYWJlbGVkU2VsZWN0OiBMYWJlbGVkU2VsZWN0LAogICAgQ3J1UmVzb3VyY2U6IENydVJlc291cmNlLAogICAgTmFtZU5zRGVzY3JpcHRpb246IE5hbWVOc0Rlc2NyaXB0aW9uLAogICAgQmFubmVyOiBCYW5uZXIKICB9LAogIG1peGluczogW0NyZWF0ZUVkaXRWaWV3XSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgcHJvdmlkZXI6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgY2FuY2VsOiB7CiAgICAgIHR5cGU6IEZ1bmN0aW9uLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHNob3dpbmdGb3JtOiB7CiAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGZpZWxkOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgcmV0dXJuIF90aGlzLiRzdG9yZS5kaXNwYXRjaCgncmFuY2hlci9maW5kQWxsJywgewogICAgICAgICAgICAgIHR5cGU6IE5PUk1BTi5DTE9VRF9DUkVERU5USUFMCiAgICAgICAgICAgIH0pOwogICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICBfdGhpcy5hbGxDcmVkZW50aWFscyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIGZpZWxkID0gX3RoaXMuJHN0b3JlLmdldHRlcnNbJ3BsdWdpbnMvY3JlZGVudGlhbEZpZWxkRm9yRHJpdmVyJ10oX3RoaXMuZHJpdmVyTmFtZSk7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA2OwogICAgICAgICAgICByZXR1cm4gX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdyYW5jaGVyL2NyZWF0ZScsIF9kZWZpbmVQcm9wZXJ0eSh7CiAgICAgICAgICAgICAgdHlwZTogTk9STUFOLkNMT1VEX0NSRURFTlRJQUwsCiAgICAgICAgICAgICAgbWV0YWRhdGE6IHsKICAgICAgICAgICAgICAgIG5hbWVzcGFjZTogREVGQVVMVF9XT1JLU1BBQ0UsCiAgICAgICAgICAgICAgICBhbm5vdGF0aW9uczogX2RlZmluZVByb3BlcnR5KHt9LCBDQVBJLkNSRURFTlRJQUxfRFJJVkVSLCBfdGhpcy5kcml2ZXJOYW1lKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSwgIiIuY29uY2F0KGZpZWxkLCAiY3JlZGVudGlhbENvbmZpZyIpLCB7fSkpOwogICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICBfdGhpcy5uZXdDcmVkZW50aWFsID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgaWYgKF90aGlzLnZhbHVlKSB7CiAgICAgICAgICAgICAgX3RoaXMuY3JlZGVudGlhbElkID0gX3RoaXMudmFsdWU7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoX3RoaXMuZmlsdGVyZWRDcmVkZW50aWFscy5sZW5ndGggPT09IDEpIHsKICAgICAgICAgICAgICAvLyBBdXRvIHBpY2sgdGhlIGZpcnN0IGNyZWRlbnRpYWwgaWYgdGhlcmUncyBvbmx5IG9uZQogICAgICAgICAgICAgIF90aGlzLmNyZWRlbnRpYWxJZCA9IF90aGlzLmZpbHRlcmVkQ3JlZGVudGlhbHNbMF0uaWQ7CiAgICAgICAgICAgIH0gZWxzZSBpZiAoIV90aGlzLmZpbHRlcmVkQ3JlZGVudGlhbHMubGVuZ3RoKSB7CiAgICAgICAgICAgICAgX3RoaXMuY3JlZGVudGlhbElkID0gX05FVzsKICAgICAgICAgICAgfQogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgYWxsQ3JlZGVudGlhbHM6IFtdLAogICAgICBub2RlQ29tcG9uZW50OiBudWxsLAogICAgICBjcmVkZW50aWFsSWQ6IHRoaXMudmFsdWUgfHwgX05PTkUsCiAgICAgIG5ld0NyZWRlbnRpYWw6IG51bGwsCiAgICAgIGNyZWF0ZVZhbGlkYXRpb25QYXNzZWQ6IGZhbHNlLAogICAgICBvcmlnaW5hbElkOiB0aGlzLnZhbHVlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzTm9uZTogZnVuY3Rpb24gaXNOb25lKCkgewogICAgICByZXR1cm4gdGhpcy5jcmVkZW50aWFsSWQgPT09IG51bGwgfHwgdGhpcy5jcmVkZW50aWFsSWQgPT09IF9OT05FOwogICAgfSwKICAgIGlzTmV3OiBmdW5jdGlvbiBpc05ldygpIHsKICAgICAgcmV0dXJuIHRoaXMuY3JlZGVudGlhbElkID09PSBfTkVXOwogICAgfSwKICAgIGlzUGlja2VkOiBmdW5jdGlvbiBpc1BpY2tlZCgpIHsKICAgICAgcmV0dXJuICEhdGhpcy5jcmVkZW50aWFsSWQgJiYgIXRoaXMuaXNOb25lICYmICF0aGlzLmlzTmV3OwogICAgfSwKICAgIGRyaXZlck5hbWU6IGZ1bmN0aW9uIGRyaXZlck5hbWUoKSB7CiAgICAgIHZhciBkcml2ZXIgPSB0aGlzLnByb3ZpZGVyOwoKICAgICAgLy8gTWFwIHByb3ZpZGVycyB0aGF0IHNoYXJlIGEgY29tbW9uIGNyZWRlbnRpYWwgdG8gb25lIGRyaXZlcgogICAgICBkcml2ZXIgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydwbHVnaW5zL2NyZWRlbnRpYWxEcml2ZXJGb3InXShkcml2ZXIpOwogICAgICByZXR1cm4gZHJpdmVyOwogICAgfSwKICAgIGZpbHRlcmVkQ3JlZGVudGlhbHM6IGZ1bmN0aW9uIGZpbHRlcmVkQ3JlZGVudGlhbHMoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwogICAgICByZXR1cm4gdGhpcy5hbGxDcmVkZW50aWFscy5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4geC5wcm92aWRlciA9PT0gX3RoaXMyLmRyaXZlck5hbWU7CiAgICAgIH0pOwogICAgfSwKICAgIG9wdGlvbnM6IGZ1bmN0aW9uIG9wdGlvbnMoKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwogICAgICB2YXIgb3V0ID0gdGhpcy5maWx0ZXJlZENyZWRlbnRpYWxzLm1hcChmdW5jdGlvbiAob2JqKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgIGxhYmVsOiBvYmoubmFtZURpc3BsYXksCiAgICAgICAgICB2YWx1ZTogb2JqLmlkCiAgICAgICAgfTsKICAgICAgfSk7CiAgICAgIGlmICh0aGlzLm9yaWdpbmFsSWQgJiYgIW91dC5maW5kKGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHgudmFsdWUgPT09IF90aGlzMy5vcmlnaW5hbElkOwogICAgICB9KSkgewogICAgICAgIG91dC51bnNoaWZ0KHsKICAgICAgICAgIGxhYmVsOiAiIi5jb25jYXQodGhpcy5vcmlnaW5hbElkLnJlcGxhY2UoL15jYXR0bGUtZ2xvYmFsLWRhdGE6LywgJycpLCAiIChjdXJyZW50KSIpLAogICAgICAgICAgdmFsdWU6IHRoaXMub3JpZ2luYWxJZAogICAgICAgIH0pOwogICAgICB9CiAgICAgIG91dC51bnNoaWZ0KHsKICAgICAgICBsYWJlbDogdGhpcy50KCdjbHVzdGVyLmNyZWRlbnRpYWwuc2VsZWN0Lm9wdGlvbi5uZXcnKSwKICAgICAgICB2YWx1ZTogX05FVwogICAgICB9KTsKICAgICAgb3V0LnVuc2hpZnQoewogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2NsdXN0ZXIuY3JlZGVudGlhbC5zZWxlY3Qub3B0aW9uLm5vbmUnKSwKICAgICAgICB2YWx1ZTogX05PTkUsCiAgICAgICAgZGlzYWJsZWQ6IHRydWUKICAgICAgfSk7CiAgICAgIHJldHVybiBvdXQ7CiAgICB9LAogICAgY3JlYXRlQ29tcG9uZW50OiBmdW5jdGlvbiBjcmVhdGVDb21wb25lbnQoKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzWyd0eXBlLW1hcC9oYXNDdXN0b21DbG91ZENyZWRlbnRpYWxDb21wb25lbnQnXSh0aGlzLmRyaXZlck5hbWUpKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3R5cGUtbWFwL2ltcG9ydENsb3VkQ3JlZGVudGlhbCddKHRoaXMuZHJpdmVyTmFtZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLmdldHRlcnNbJ3R5cGUtbWFwL2ltcG9ydENsb3VkQ3JlZGVudGlhbCddKCdnZW5lcmljJyk7CiAgICB9LAogICAgdmFsaWRhdGlvblBhc3NlZDogZnVuY3Rpb24gdmFsaWRhdGlvblBhc3NlZCgpIHsKICAgICAgaWYgKHRoaXMuY3JlZGVudGlhbElkID09PSBfTk9ORSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5jcmVkZW50aWFsSWQgPT09IF9ORVcpIHsKICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVWYWxpZGF0aW9uUGFzc2VkOwogICAgICB9CiAgICAgIHJldHVybiAhIXRoaXMuY3JlZGVudGlhbElkOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGNyZWRlbnRpYWxJZDogZnVuY3Rpb24gY3JlZGVudGlhbElkKHZhbCkgewogICAgICBpZiAodmFsID09PSBfTkVXIHx8IHZhbCA9PT0gX05PTkUpIHsKICAgICAgICB0aGlzLiRlbWl0KCdpbnB1dCcsIG51bGwpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGVtaXQoJ2lucHV0JywgdmFsKTsKICAgICAgfQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgc2F2ZTogZnVuY3Rpb24gc2F2ZShidG5DYikgewogICAgICB2YXIgX3RoaXM0ID0gdGhpczsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIF90aGlzNCQkcmVmcyRjcmVhdGU7CiAgICAgICAgdmFyIHJlcywgX3JlczsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgaWYgKF90aGlzNC5lcnJvcnMpIHsKICAgICAgICAgICAgICAgIGNsZWFyKF90aGlzNC5lcnJvcnMpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoISh0eXBlb2YgKChfdGhpczQkJHJlZnMkY3JlYXRlID0gX3RoaXM0LiRyZWZzLmNyZWF0ZSkgPT09IG51bGwgfHwgX3RoaXM0JCRyZWZzJGNyZWF0ZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXM0JCRyZWZzJGNyZWF0ZS50ZXN0KSA9PT0gJ2Z1bmN0aW9uJykpIHsKICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgX2NvbnRleHQyLnByZXYgPSAyOwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgICByZXR1cm4gX3RoaXM0LiRyZWZzLmNyZWF0ZS50ZXN0KCk7CiAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICByZXMgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICBpZiAocmVzKSB7CiAgICAgICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDEwOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIF90aGlzNC5lcnJvcnMgPSBbJ0F1dGhlbnRpY2F0aW9uIHRlc3QgZmFpbGVkLCBwbGVhc2UgY2hlY2sgeW91ciBjcmVkZW50aWFscyddOwogICAgICAgICAgICAgIGJ0bkNiKGZhbHNlKTsKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICAgIGNhc2UgMTA6CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxNjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAxMjoKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDEyOwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MCA9IF9jb250ZXh0MlsiY2F0Y2giXSgyKTsKICAgICAgICAgICAgICBfdGhpczQuZXJyb3JzID0gW19jb250ZXh0Mi50MF07CiAgICAgICAgICAgICAgYnRuQ2IoZmFsc2UpOwogICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgIGlmIChfdGhpczQubmV3Q3JlZGVudGlhbC5tZXRhZGF0YS5uYW1lKSB7CiAgICAgICAgICAgICAgICBkZWxldGUgX3RoaXM0Lm5ld0NyZWRlbnRpYWwubWV0YWRhdGEuZ2VuZXJhdGVOYW1lOwogICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICBfdGhpczQubmV3Q3JlZGVudGlhbC5tZXRhZGF0YS5nZW5lcmF0ZU5hbWUgPSAnY2xvdWQtY3JlZGVudGlhbC0nOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDE3OwogICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgcmV0dXJuIF90aGlzNC5uZXdDcmVkZW50aWFsLnNhdmUoKTsKICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBfcmVzID0gX2NvbnRleHQyLnNlbnQ7CiAgICAgICAgICAgICAgX3RoaXM0LmNyZWRlbnRpYWxJZCA9IF9yZXMuaWQ7CiAgICAgICAgICAgICAgYnRuQ2IodHJ1ZSk7CiAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgY2FzZSAyNToKICAgICAgICAgICAgICBfY29udGV4dDIucHJldiA9IDI1OwogICAgICAgICAgICAgIF9jb250ZXh0Mi50MSA9IF9jb250ZXh0MlsiY2F0Y2giXSgxNyk7CiAgICAgICAgICAgICAgX3RoaXM0LmVycm9ycyA9IFtfY29udGV4dDIudDFdOwogICAgICAgICAgICAgIGJ0bkNiKGZhbHNlKTsKICAgICAgICAgICAgY2FzZSAyOToKICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMiwgbnVsbCwgW1syLCAxMl0sIFsxNywgMjVdXSk7CiAgICAgIH0pKSgpOwogICAgfSwKICAgIGNyZWF0ZVZhbGlkYXRpb25DaGFuZ2VkOiBmdW5jdGlvbiBjcmVhdGVWYWxpZGF0aW9uQ2hhbmdlZChwYXNzZWQpIHsKICAgICAgdGhpcy5jcmVhdGVWYWxpZGF0aW9uUGFzc2VkID0gcGFzc2VkOwogICAgfSwKICAgIGJhY2tUb0V4aXN0aW5nOiBmdW5jdGlvbiBiYWNrVG9FeGlzdGluZygpIHsKICAgICAgdGhpcy5jcmVkZW50aWFsSWQgPSBfTk9ORTsKICAgIH0KICB9Cn07"},{"version":3,"names":["Loading","LabeledSelect","NORMAN","DEFAULT_WORKSPACE","CreateEditView","CruResource","NameNsDescription","Banner","CAPI","clear","_NEW","_NONE","components","mixins","props","value","type","String","default","provider","cancel","Function","required","showingForm","Boolean","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","field","wrap","_callee$","_context","prev","next","$store","dispatch","CLOUD_CREDENTIAL","allCredentials","sent","getters","driverName","_defineProperty","metadata","namespace","annotations","CREDENTIAL_DRIVER","concat","newCredential","credentialId","filteredCredentials","length","id","stop","data","nodeComponent","createValidationPassed","originalId","computed","isNone","isNew","isPicked","driver","_this2","filter","x","options","_this3","out","map","obj","label","nameDisplay","find","unshift","replace","t","disabled","createComponent","validationPassed","watch","val","$emit","methods","save","btnCb","_this4","_callee2","_this4$$refs$create","res","_res","_callee2$","_context2","errors","$refs","create","test","abrupt","t0","name","generateName","t1","createValidationChanged","passed","backToExisting"],"sources":["node_modules/@rancher/shell/edit/provisioning.cattle.io.cluster/SelectCredential.vue"],"sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { NORMAN, DEFAULT_WORKSPACE } from '@shell/config/types';\nimport CreateEditView from '@shell/mixins/create-edit-view';\nimport CruResource from '@shell/components/CruResource';\nimport NameNsDescription from '@shell/components/form/NameNsDescription';\nimport { Banner } from '@components/Banner';\nimport { CAPI } from '@shell/config/labels-annotations';\nimport { clear } from '@shell/utils/array';\n\nconst _NEW = '_NEW';\nconst _NONE = '_NONE';\n\nexport default {\n  components: {\n    Loading, LabeledSelect, CruResource, NameNsDescription, Banner\n  },\n\n  mixins: [CreateEditView],\n\n  props: {\n    value: {\n      type:    String,\n      default: null,\n    },\n\n    provider: {\n      type:    String,\n      default: null,\n    },\n\n    cancel: {\n      type:     Function,\n      required: true,\n    },\n    showingForm: {\n      type:     Boolean,\n      required: true,\n    }\n  },\n\n  async fetch() {\n    this.allCredentials = await this.$store.dispatch('rancher/findAll', { type: NORMAN.CLOUD_CREDENTIAL });\n\n    const field = this.$store.getters['plugins/credentialFieldForDriver'](this.driverName);\n\n    this.newCredential = await this.$store.dispatch('rancher/create', {\n      type:     NORMAN.CLOUD_CREDENTIAL,\n      metadata: {\n        namespace:   DEFAULT_WORKSPACE,\n        annotations: { [CAPI.CREDENTIAL_DRIVER]: this.driverName }\n      },\n      [`${ field }credentialConfig`]: {}\n    });\n\n    if ( this.value ) {\n      this.credentialId = this.value;\n    } else if ( this.filteredCredentials.length === 1 ) {\n      // Auto pick the first credential if there's only one\n      this.credentialId = this.filteredCredentials[0].id;\n    } else if ( !this.filteredCredentials.length ) {\n      this.credentialId = _NEW;\n    }\n  },\n\n  data() {\n    return {\n      allCredentials:         [],\n      nodeComponent:          null,\n      credentialId:           this.value || _NONE,\n      newCredential:          null,\n      createValidationPassed: false,\n      originalId:             this.value\n    };\n  },\n\n  computed: {\n    isNone() {\n      return this.credentialId === null || this.credentialId === _NONE;\n    },\n\n    isNew() {\n      return this.credentialId === _NEW;\n    },\n\n    isPicked() {\n      return !!this.credentialId && !this.isNone && !this.isNew;\n    },\n\n    driverName() {\n      let driver = this.provider;\n\n      // Map providers that share a common credential to one driver\n      driver = this.$store.getters['plugins/credentialDriverFor'](driver);\n\n      return driver;\n    },\n\n    filteredCredentials() {\n      return this.allCredentials.filter((x) => x.provider === this.driverName);\n    },\n\n    options() {\n      const out = this.filteredCredentials.map((obj) => {\n        return {\n          label: obj.nameDisplay,\n          value: obj.id,\n        };\n      });\n\n      if ( this.originalId && !out.find((x) => x.value === this.originalId) ) {\n        out.unshift({\n          label: `${ this.originalId.replace(/^cattle-global-data:/, '') } (current)`,\n          value: this.originalId\n        });\n      }\n\n      out.unshift({\n        label: this.t('cluster.credential.select.option.new'),\n        value: _NEW,\n      });\n\n      out.unshift({\n        label:    this.t('cluster.credential.select.option.none'),\n        value:    _NONE,\n        disabled: true,\n      });\n\n      return out;\n    },\n\n    createComponent() {\n      if (this.$store.getters['type-map/hasCustomCloudCredentialComponent'](this.driverName)) {\n        return this.$store.getters['type-map/importCloudCredential'](this.driverName);\n      }\n\n      return this.$store.getters['type-map/importCloudCredential']('generic');\n    },\n\n    validationPassed() {\n      if ( this.credentialId === _NONE ) {\n        return false;\n      }\n\n      if ( this.credentialId === _NEW ) {\n        return this.createValidationPassed;\n      }\n\n      return !!this.credentialId;\n    },\n  },\n\n  watch: {\n    credentialId(val) {\n      if ( val === _NEW || val === _NONE ) {\n        this.$emit('input', null);\n      } else {\n        this.$emit('input', val);\n      }\n    },\n  },\n\n  methods: {\n    async save(btnCb) {\n      if ( this.errors ) {\n        clear(this.errors);\n      }\n\n      if ( typeof this.$refs.create?.test === 'function' ) {\n        try {\n          const res = await this.$refs.create.test();\n\n          if ( !res ) {\n            this.errors = ['Authentication test failed, please check your credentials'];\n            btnCb(false);\n\n            return;\n          }\n        } catch (e) {\n          this.errors = [e];\n          btnCb(false);\n        }\n      }\n\n      if ( this.newCredential.metadata.name ) {\n        delete this.newCredential.metadata.generateName;\n      } else {\n        this.newCredential.metadata.generateName = 'cloud-credential-';\n      }\n\n      try {\n        const res = await this.newCredential.save();\n\n        this.credentialId = res.id;\n        btnCb(true);\n      } catch (e) {\n        this.errors = [e];\n        btnCb(false);\n      }\n    },\n\n    createValidationChanged(passed) {\n      this.createValidationPassed = passed;\n    },\n\n    backToExisting() {\n      this.credentialId = _NONE;\n    }\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <CruResource\n    v-else\n    :mode=\"mode\"\n    :validation-passed=\"validationPassed\"\n    :resource=\"newCredential\"\n    :can-yaml=\"false\"\n    :cancel-event=\"true\"\n    :errors=\"errors\"\n    finish-button-mode=\"continue\"\n    class=\"select-credentials\"\n    :class=\"{'select-credentials__showingForm': showingForm}\"\n    @finish=\"save\"\n    @cancel=\"cancel\"\n    @error=\"e=>errors = e\"\n  >\n    <div v-if=\"isNew\">\n      <Banner\n        :label=\"t('cluster.credential.banner.createCredential', {length: options.length}, true)\"\n        color=\"info\"\n      />\n\n      <NameNsDescription\n        v-model=\"newCredential\"\n        :namespaced=\"false\"\n        :description-hidden=\"true\"\n        name-key=\"name\"\n        name-label=\"cluster.credential.name.label\"\n        name-placeholder=\"cluster.credential.name.placeholder\"\n        :name-required=\"false\"\n        mode=\"create\"\n      />\n\n      <component\n        :is=\"createComponent\"\n        ref=\"create\"\n        v-model=\"newCredential\"\n        mode=\"create\"\n        :driver-name=\"driverName\"\n        @validationChanged=\"createValidationChanged\"\n      />\n    </div>\n    <div v-else>\n      <Banner\n        v-if=\"!credentialId\"\n        label=\"First you need to pick or create the cloud credential that will be used to create the nodes for the cluster...\"\n        color=\"info\"\n      />\n\n      <LabeledSelect\n        v-model=\"credentialId\"\n        :label=\"t('cluster.credential.label')\"\n        :options=\"options\"\n        :mode=\"mode\"\n        :selectable=\"option => !option.disabled\"\n      />\n    </div>\n\n    <template\n      v-if=\"isNew && options.length\"\n      #footer-prefix\n    >\n      <button\n        class=\"btn role-secondary\"\n        @click=\"backToExisting()\"\n      >\n        {{ t('cluster.credential.selectExisting.label') }}\n      </button>\n    </template>\n\n    <template\n      v-if=\"isPicked\"\n      #form-footer\n    >\n      <div><!-- Hide the outer footer --></div>\n    </template>\n  </CruResource>\n</template>\n\n<style lang='scss' scoped>\n  .select-credentials {\n    flex-grow: 1; // Do grow when on own\n    &__showingForm {\n      flex-grow: 0; // Don't grow when in rke2 form\n    }\n  }\n</style>\n"],"mappings":"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"}]}