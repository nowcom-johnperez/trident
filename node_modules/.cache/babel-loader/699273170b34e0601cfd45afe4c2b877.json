{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/chart/monitoring/prometheus/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/chart/monitoring/prometheus/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvcnMuanMiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IGlzRW1wdHkgZnJvbSAnbG9kYXNoL2lzRW1wdHknOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCB7IEJhbm5lciB9IGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lcic7CmltcG9ydCB7IENoZWNrYm94IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9DaGVja2JveCc7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IE1hdGNoRXhwcmVzc2lvbnMgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9NYXRjaEV4cHJlc3Npb25zJzsKaW1wb3J0IFN0b3JhZ2VDbGFzc1NlbGVjdG9yIGZyb20gJ0BzaGVsbC9jaGFydC9tb25pdG9yaW5nL1N0b3JhZ2VDbGFzc1NlbGVjdG9yJzsKaW1wb3J0IHsgUmFkaW9Hcm91cCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vUmFkaW8nOwppbXBvcnQgeyBzZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IHsgc2ltcGxpZnksIGNvbnZlcnQgfSBmcm9tICdAc2hlbGwvdXRpbHMvc2VsZWN0b3InOwppbXBvcnQgeyBQT0QgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEJhbm5lcjogQmFubmVyLAogICAgQ2hlY2tib3g6IENoZWNrYm94LAogICAgTGFiZWxlZElucHV0OiBMYWJlbGVkSW5wdXQsCiAgICBMYWJlbGVkU2VsZWN0OiBMYWJlbGVkU2VsZWN0LAogICAgTWF0Y2hFeHByZXNzaW9uczogTWF0Y2hFeHByZXNzaW9ucywKICAgIFJhZGlvR3JvdXA6IFJhZGlvR3JvdXAsCiAgICBTdG9yYWdlQ2xhc3NTZWxlY3RvcjogU3RvcmFnZUNsYXNzU2VsZWN0b3IKICB9LAogIHByb3BzOiB7CiAgICBhY2Nlc3NNb2RlczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NyZWF0ZScKICAgIH0sCiAgICBwcm9tZXRoZXVzUG9kczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIFtdOwogICAgICB9CiAgICB9LAogICAgc3RvcmFnZUNsYXNzZXM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgd29ya2xvYWRzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX3RoaXMkdmFsdWU7CiAgICByZXR1cm4gewogICAgICBlbmFibGVQZXJzaXN0ZW50U3RvcmFnZTogISEoKF90aGlzJHZhbHVlID0gdGhpcy52YWx1ZSkgIT09IG51bGwgJiYgX3RoaXMkdmFsdWUgIT09IHZvaWQgMCAmJiAoX3RoaXMkdmFsdWUgPSBfdGhpcyR2YWx1ZS5wcm9tZXRoZXVzKSAhPT0gbnVsbCAmJiBfdGhpcyR2YWx1ZSAhPT0gdm9pZCAwICYmIChfdGhpcyR2YWx1ZSA9IF90aGlzJHZhbHVlLnByb21ldGhldXNTcGVjKSAhPT0gbnVsbCAmJiBfdGhpcyR2YWx1ZSAhPT0gdm9pZCAwICYmIChfdGhpcyR2YWx1ZSA9IF90aGlzJHZhbHVlLnN0b3JhZ2VTcGVjKSAhPT0gbnVsbCAmJiBfdGhpcyR2YWx1ZSAhPT0gdm9pZCAwICYmIChfdGhpcyR2YWx1ZSA9IF90aGlzJHZhbHVlLnZvbHVtZUNsYWltVGVtcGxhdGUpICE9PSBudWxsICYmIF90aGlzJHZhbHVlICE9PSB2b2lkIDAgJiYgX3RoaXMkdmFsdWUuc3BlYyksCiAgICAgIHdhcm5Vc2VyOiBmYWxzZQogICAgfTsKICB9LAogIGNvbXB1dGVkOiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1hcEdldHRlcnMoWydjdXJyZW50Q2x1c3RlciddKSksIHt9LCB7CiAgICBtYXRjaEV4cHJlc3Npb25zOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHZhciBfdGhpcyR2YWx1ZTI7CiAgICAgICAgdmFyIHNlbGVjdG9yID0gKF90aGlzJHZhbHVlMiA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlMiA9PT0gdm9pZCAwIHx8IChfdGhpcyR2YWx1ZTIgPSBfdGhpcyR2YWx1ZTIucHJvbWV0aGV1cykgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUyID09PSB2b2lkIDAgfHwgKF90aGlzJHZhbHVlMiA9IF90aGlzJHZhbHVlMi5wcm9tZXRoZXVzU3BlYykgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUyID09PSB2b2lkIDAgfHwgKF90aGlzJHZhbHVlMiA9IF90aGlzJHZhbHVlMi5zdG9yYWdlU3BlYykgPT09IG51bGwgfHwgX3RoaXMkdmFsdWUyID09PSB2b2lkIDAgfHwgKF90aGlzJHZhbHVlMiA9IF90aGlzJHZhbHVlMi52b2x1bWVDbGFpbVRlbXBsYXRlKSA9PT0gbnVsbCB8fCBfdGhpcyR2YWx1ZTIgPT09IHZvaWQgMCB8fCAoX3RoaXMkdmFsdWUyID0gX3RoaXMkdmFsdWUyLnNwZWMpID09PSBudWxsIHx8IF90aGlzJHZhbHVlMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkdmFsdWUyLnNlbGVjdG9yOwogICAgICAgIHZhciBtYXRjaEV4cHJlc3Npb25zOwogICAgICAgIGlmIChzZWxlY3RvciAmJiBzZWxlY3RvciAhPT0gbnVsbCAmJiBzZWxlY3RvciAhPT0gdm9pZCAwICYmIHNlbGVjdG9yLm1hdGNoRXhwcmVzc2lvbnMpIHsKICAgICAgICAgIG1hdGNoRXhwcmVzc2lvbnMgPSBjb252ZXJ0KChzZWxlY3RvciA9PT0gbnVsbCB8fCBzZWxlY3RvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0b3IubWF0Y2hMYWJlbHMpIHx8IHt9LCBzZWxlY3RvciA9PT0gbnVsbCB8fCBzZWxlY3RvciA9PT0gdm9pZCAwID8gdm9pZCAwIDogc2VsZWN0b3IubWF0Y2hFeHByZXNzaW9ucyk7CiAgICAgICAgICByZXR1cm4gbWF0Y2hFeHByZXNzaW9uczsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIFtdOwogICAgICAgIH0KICAgICAgfQogICAgfSwKICAgIGZpbHRlcmVkV29ya2xvYWRzOiBmdW5jdGlvbiBmaWx0ZXJlZFdvcmtsb2FkcygpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKICAgICAgdmFyIHdvcmtsb2FkcyA9IHRoaXMud29ya2xvYWRzOwogICAgICB2YXIgX3RoaXMkJGF0dHJzJGV4aXN0aW5nID0gdGhpcy4kYXR0cnMuZXhpc3RpbmcsCiAgICAgICAgZXhpc3RpbmcgPSBfdGhpcyQkYXR0cnMkZXhpc3RpbmcgPT09IHZvaWQgMCA/IGZhbHNlIDogX3RoaXMkJGF0dHJzJGV4aXN0aW5nOwogICAgICBpZiAoIWV4aXN0aW5nKSB7CiAgICAgICAgd29ya2xvYWRzID0gd29ya2xvYWRzLmZpbHRlcihmdW5jdGlvbiAod29ya2xvYWQpIHsKICAgICAgICAgIHZhciBfd29ya2xvYWQkc3BlYzsKICAgICAgICAgIGlmICghaXNFbXB0eSh3b3JrbG9hZCA9PT0gbnVsbCB8fCB3b3JrbG9hZCA9PT0gdm9pZCAwIHx8IChfd29ya2xvYWQkc3BlYyA9IHdvcmtsb2FkLnNwZWMpID09PSBudWxsIHx8IF93b3JrbG9hZCRzcGVjID09PSB2b2lkIDAgfHwgKF93b3JrbG9hZCRzcGVjID0gX3dvcmtsb2FkJHNwZWMudGVtcGxhdGUpID09PSBudWxsIHx8IF93b3JrbG9hZCRzcGVjID09PSB2b2lkIDAgfHwgKF93b3JrbG9hZCRzcGVjID0gX3dvcmtsb2FkJHNwZWMuc3BlYykgPT09IG51bGwgfHwgX3dvcmtsb2FkJHNwZWMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF93b3JrbG9hZCRzcGVjLmNvbnRhaW5lcnMpICYmIHdvcmtsb2FkLnNwZWMudGVtcGxhdGUuc3BlYy5jb250YWluZXJzLmZpbmQoZnVuY3Rpb24gKGMpIHsKICAgICAgICAgICAgcmV0dXJuIGMuaW1hZ2UuaW5jbHVkZXMoJ3F1YXkuaW8vY29yZW9zL3Byb21ldGhldXMtb3BlcmF0b3InKSB8fCBjLmltYWdlLmluY2x1ZGVzKCdyYW5jaGVyL2NvcmVvcy1wcm9tZXRoZXVzLW9wZXJhdG9yJyk7CiAgICAgICAgICB9KSkgewogICAgICAgICAgICBpZiAoIV90aGlzLndhcm5Vc2VyKSB7CiAgICAgICAgICAgICAgX3RoaXMud2FyblVzZXIgPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB3b3JrbG9hZDsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfQogICAgICByZXR1cm4gd29ya2xvYWRzLm1hcChmdW5jdGlvbiAod2wpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbGFiZWw6IHdsLmlkLAogICAgICAgICAgbGluazogewogICAgICAgICAgICBuYW1lOiAnYy1jbHVzdGVyLXByb2R1Y3QtcmVzb3VyY2UtbmFtZXNwYWNlLWlkJywKICAgICAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAgICAgY2x1c3RlcjogX3RoaXMuY3VycmVudENsdXN0ZXIuaWQsCiAgICAgICAgICAgICAgcHJvZHVjdDogJ2V4cGxvcmVyJywKICAgICAgICAgICAgICByZXNvdXJjZTogd2wudHlwZSwKICAgICAgICAgICAgICBuYW1lc3BhY2U6IHdsLm1ldGFkYXRhLm5hbWVzcGFjZSwKICAgICAgICAgICAgICBpZDogd2wubWV0YWRhdGEubmFtZQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfTsKICAgICAgfSk7CiAgICB9LAogICAgcG9kc0FuZE5hbWVzcGFjZXM6IGZ1bmN0aW9uIHBvZHNBbmROYW1lc3BhY2VzKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKICAgICAgdmFyIHByb21ldGhldXNQb2RzID0gdGhpcy5wcm9tZXRoZXVzUG9kczsKICAgICAgdmFyIHBvZHMgPSBbXTsKICAgICAgcHJvbWV0aGV1c1BvZHMuZm9yRWFjaChmdW5jdGlvbiAocG9kKSB7CiAgICAgICAgcG9kcy5wdXNoKHsKICAgICAgICAgIGxhYmVsOiBwb2QuaWQsCiAgICAgICAgICBsaW5rOiB7CiAgICAgICAgICAgIG5hbWU6ICdjLWNsdXN0ZXItcHJvZHVjdC1yZXNvdXJjZS1uYW1lc3BhY2UtaWQnLAogICAgICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICAgICBjbHVzdGVyOiBfdGhpczIuY3VycmVudENsdXN0ZXIuaWQsCiAgICAgICAgICAgICAgcHJvZHVjdDogJ2V4cGxvcmVyJywKICAgICAgICAgICAgICByZXNvdXJjZTogUE9ELAogICAgICAgICAgICAgIG5hbWVzcGFjZTogcG9kLm1ldGFkYXRhLm5hbWVzcGFjZSwKICAgICAgICAgICAgICBpZDogcG9kLm1ldGFkYXRhLm5hbWUKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9KTsKICAgICAgcmV0dXJuIHBvZHM7CiAgICB9LAogICAgc2hvd1N0b3JhZ2VDbGFzc2VzOiBmdW5jdGlvbiBzaG93U3RvcmFnZUNsYXNzZXMoKSB7CiAgICAgIHZhciBzdG9yYWdlQ2xhc3NlcyA9IHRoaXMuc3RvcmFnZUNsYXNzZXM7CiAgICAgIHJldHVybiAoc3RvcmFnZUNsYXNzZXMgfHwgW10pLmxlbmd0aCA+PSAxOwogICAgfQogIH0pLAogIHdhdGNoOiB7CiAgICBlbmFibGVQZXJzaXN0ZW50U3RvcmFnZTogZnVuY3Rpb24gZW5hYmxlUGVyc2lzdGVudFN0b3JhZ2UoZW5hYmxlZCkgewogICAgICBpZiAoISFlbmFibGVkKSB7CiAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUucHJvbWV0aGV1cy5wcm9tZXRoZXVzU3BlYy5zdG9yYWdlU3BlYywgJ3ZvbHVtZUNsYWltVGVtcGxhdGUnLCB7CiAgICAgICAgICBzcGVjOiB7CiAgICAgICAgICAgIGFjY2Vzc01vZGVzOiBbJ1JlYWRXcml0ZU9uY2UnXSwKICAgICAgICAgICAgcmVzb3VyY2VzOiB7CiAgICAgICAgICAgICAgcmVxdWVzdHM6IHsKICAgICAgICAgICAgICAgIHN0b3JhZ2U6ICc1MEdpJwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuJGRlbGV0ZSh0aGlzLnZhbHVlLnByb21ldGhldXMucHJvbWV0aGV1c1NwZWMuc3RvcmFnZVNwZWMsICd2b2x1bWVDbGFpbVRlbXBsYXRlJyk7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHNldDogc2V0LAogICAgbWF0Y2hDaGFuZ2VkOiBmdW5jdGlvbiBtYXRjaENoYW5nZWQoZXhwcmVzc2lvbnMpIHsKICAgICAgdmFyIF9zaW1wbGlmeSA9IHNpbXBsaWZ5KGV4cHJlc3Npb25zKSwKICAgICAgICBtYXRjaExhYmVscyA9IF9zaW1wbGlmeS5tYXRjaExhYmVscywKICAgICAgICBtYXRjaEV4cHJlc3Npb25zID0gX3NpbXBsaWZ5Lm1hdGNoRXhwcmVzc2lvbnM7CiAgICAgIHZhciBzdG9yYWdlU3BlYyA9IHRoaXMudmFsdWUucHJvbWV0aGV1cy5wcm9tZXRoZXVzU3BlYy5zdG9yYWdlU3BlYy52b2x1bWVDbGFpbVRlbXBsYXRlLnNwZWM7CiAgICAgIGlmICghKHN0b3JhZ2VTcGVjICE9PSBudWxsICYmIHN0b3JhZ2VTcGVjICE9PSB2b2lkIDAgJiYgc3RvcmFnZVNwZWMuc2VsZWN0b3IpKSB7CiAgICAgICAgc3RvcmFnZVNwZWNbJ3NlbGVjdG9yJ10gPSB7CiAgICAgICAgICBtYXRjaEV4cHJlc3Npb25zOiBbXSwKICAgICAgICAgIG1hdGNoTGFiZWxzOiB7fQogICAgICAgIH07CiAgICAgIH0KICAgICAgdGhpcy4kc2V0KHN0b3JhZ2VTcGVjLnNlbGVjdG9yLCAnbWF0Y2hMYWJlbHMnLCBtYXRjaExhYmVscyk7CiAgICAgIHRoaXMuJHNldChzdG9yYWdlU3BlYy5zZWxlY3RvciwgJ21hdGNoRXhwcmVzc2lvbnMnLCBtYXRjaEV4cHJlc3Npb25zKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["isEmpty","mapGetters","Banner","Checkbox","LabeledInput","LabeledSelect","MatchExpressions","StorageClassSelector","RadioGroup","set","simplify","convert","POD","components","props","accessModes","type","Array","required","mode","String","default","prometheusPods","_default","storageClasses","value","Object","workloads","data","_this$value","enablePersistentStorage","prometheus","prometheusSpec","storageSpec","volumeClaimTemplate","spec","warnUser","computed","_objectSpread","matchExpressions","get","_this$value2","selector","matchLabels","filteredWorkloads","_this","_this$$attrs$existing","$attrs","existing","filter","workload","_workload$spec","template","containers","find","c","image","includes","map","wl","label","id","link","name","params","cluster","currentCluster","product","resource","namespace","metadata","podsAndNamespaces","_this2","pods","forEach","pod","push","showStorageClasses","length","watch","enabled","$set","resources","requests","storage","$delete","methods","matchChanged","expressions","_simplify"],"sources":["node_modules/@rancher/shell/chart/monitoring/prometheus/index.vue"],"sourcesContent":["<script>\nimport isEmpty from 'lodash/isEmpty';\nimport { mapGetters } from 'vuex';\n\nimport { Banner } from '@components/Banner';\nimport { Checkbox } from '@components/Form/Checkbox';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport MatchExpressions from '@shell/components/form/MatchExpressions';\nimport StorageClassSelector from '@shell/chart/monitoring/StorageClassSelector';\nimport { RadioGroup } from '@components/Form/Radio';\n\nimport { set } from '@shell/utils/object';\nimport { simplify, convert } from '@shell/utils/selector';\nimport { POD } from '@shell/config/types';\n\nexport default {\n  components: {\n    Banner,\n    Checkbox,\n    LabeledInput,\n    LabeledSelect,\n    MatchExpressions,\n    RadioGroup,\n    StorageClassSelector,\n  },\n\n  props: {\n    accessModes: {\n      type:     Array,\n      required: true,\n    },\n\n    mode: {\n      type:    String,\n      default: 'create',\n    },\n\n    prometheusPods: {\n      type:    Array,\n      default: () => ([]),\n    },\n\n    storageClasses: {\n      type:    Array,\n      default: () => ([]),\n    },\n\n    value: {\n      type:    Object,\n      default: () => ({}),\n    },\n\n    workloads: {\n      type:    Array,\n      default: () => ([]),\n    },\n  },\n\n  data() {\n    return {\n      enablePersistentStorage: !!this.value?.prometheus?.prometheusSpec?.storageSpec?.volumeClaimTemplate?.spec,\n      warnUser:                false,\n    };\n  },\n\n  computed: {\n    ...mapGetters(['currentCluster']),\n    matchExpressions: {\n      get() {\n        const selector = this.value?.prometheus?.prometheusSpec?.storageSpec?.volumeClaimTemplate?.spec?.selector;\n        let matchExpressions;\n\n        if (selector && selector?.matchExpressions) {\n          matchExpressions = convert((selector?.matchLabels || {}), selector?.matchExpressions);\n\n          return matchExpressions;\n        } else {\n          return [];\n        }\n      }\n    },\n    filteredWorkloads() {\n      let { workloads } = this;\n      const { existing = false } = this.$attrs;\n\n      if (!existing) {\n        workloads = workloads.filter((workload) => {\n          if (\n            !isEmpty(workload?.spec?.template?.spec?.containers) &&\n            (workload.spec.template.spec.containers.find((c) => c.image.includes('quay.io/coreos/prometheus-operator') ||\n              c.image.includes('rancher/coreos-prometheus-operator'))\n            )\n          ) {\n            if (!this.warnUser) {\n              this.warnUser = true;\n            }\n\n            return workload;\n          }\n        });\n      }\n\n      return workloads.map((wl) => {\n        return {\n          label: wl.id,\n          link:  {\n            name:   'c-cluster-product-resource-namespace-id',\n            params: {\n              cluster:   this.currentCluster.id,\n              product:   'explorer',\n              resource:  wl.type,\n              namespace: wl.metadata.namespace,\n              id:        wl.metadata.name\n            },\n          }\n        };\n      });\n    },\n\n    podsAndNamespaces() {\n      const { prometheusPods } = this;\n      const pods = [];\n\n      prometheusPods.forEach((pod) => {\n        pods.push({\n          label: pod.id,\n          link:  {\n            name:   'c-cluster-product-resource-namespace-id',\n            params: {\n              cluster: this.currentCluster.id, product: 'explorer', resource: POD, namespace: pod.metadata.namespace, id: pod.metadata.name\n            },\n          }\n        });\n      });\n\n      return pods;\n    },\n\n    showStorageClasses() {\n      const { storageClasses } = this;\n\n      return (storageClasses || []).length >= 1;\n    },\n  },\n\n  watch: {\n    enablePersistentStorage(enabled) {\n      if (!!enabled) {\n        this.$set(\n          this.value.prometheus.prometheusSpec.storageSpec,\n          'volumeClaimTemplate',\n          {\n            spec: {\n              accessModes: ['ReadWriteOnce'],\n              resources:   { requests: { storage: '50Gi' } },\n            }\n          }\n        );\n      } else {\n        this.$delete(\n          this.value.prometheus.prometheusSpec.storageSpec,\n          'volumeClaimTemplate'\n        );\n      }\n    },\n  },\n\n  methods: {\n    set,\n\n    matchChanged(expressions) {\n      const { matchLabels, matchExpressions } = simplify(expressions);\n      const storageSpec = this.value.prometheus.prometheusSpec.storageSpec.volumeClaimTemplate.spec;\n\n      if (!storageSpec?.selector) {\n        storageSpec['selector'] = { matchExpressions: [], matchLabels: {} };\n      }\n\n      this.$set(storageSpec.selector, 'matchLabels', matchLabels);\n      this.$set(storageSpec.selector, 'matchExpressions', matchExpressions);\n    },\n  },\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"title\">\n      <h3>{{ t('monitoring.prometheus.title') }}</h3>\n    </div>\n    <Banner\n      v-if=\"filteredWorkloads && warnUser\"\n      color=\"warning\"\n    >\n      <template #default>\n        <t\n          k=\"monitoring.prometheus.warningInstalled\"\n          :raw=\"true\"\n        />\n        <div\n          v-for=\"wl in filteredWorkloads\"\n          :key=\"wl.id\"\n          class=\"mt-10\"\n        >\n          <nuxt-link\n            :to=\"wl.link\"\n            class=\"btn role-tertiary\"\n          >\n            {{ wl.label }}\n          </nuxt-link>\n        </div>\n      </template>\n    </Banner>\n    <div class=\"prometheus-config\">\n      <div class=\"row\">\n        <div class=\"col span-6 col-full-height\">\n          <Checkbox\n            v-model=\"value.prometheus.prometheusSpec.enableAdminAPI\"\n            :label=\"t('monitoring.prometheus.config.adminApi')\"\n          />\n        </div>\n        <div class=\"col span-6 col-full-height\">\n          <RadioGroup\n            v-model=\"value.prometheus.prometheusSpec.ignoreNamespaceSelectors\"\n            :mode=\"mode\"\n            name=\"ignoreNamespaceSelectors\"\n            label-key=\"monitoring.prometheus.config.ignoreNamespaceSelectors.label\"\n            :tooltip=\"t('monitoring.prometheus.config.ignoreNamespaceSelectors.help', {}, true)\"\n            :labels=\"[t('monitoring.prometheus.config.ignoreNamespaceSelectors.radio.enforced'),t('monitoring.prometheus.config.ignoreNamespaceSelectors.radio.ignored')]\"\n            :options=\"[false, true]\"\n          />\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.prometheus.prometheusSpec.scrapeInterval\"\n            :label=\"t('monitoring.prometheus.config.scrape')\"\n            :mode=\"mode\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.prometheus.prometheusSpec.evaluationInterval\"\n            :label=\"t('monitoring.prometheus.config.evaluation')\"\n            :mode=\"mode\"\n          />\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.prometheus.prometheusSpec.retention\"\n            :label=\"t('monitoring.prometheus.config.retention')\"\n            :mode=\"mode\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.prometheus.prometheusSpec.retentionSize\"\n            :label=\"t('monitoring.prometheus.config.retentionSize')\"\n            :mode=\"mode\"\n          />\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col span-12 mt-5\">\n          <h4 class=\"mb-0\">\n            {{ t('monitoring.prometheus.config.resourceLimits') }}\n          </h4>\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.prometheus.prometheusSpec.resources.requests.cpu\"\n            :label=\"t('monitoring.prometheus.config.requests.cpu')\"\n            :mode=\"mode\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.prometheus.prometheusSpec.resources.requests.memory\"\n            :label=\"t('monitoring.prometheus.config.requests.memory')\"\n            :mode=\"mode\"\n          />\n        </div>\n      </div>\n      <div class=\"row\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.prometheus.prometheusSpec.resources.limits.cpu\"\n            :label=\"t('monitoring.prometheus.config.limits.cpu')\"\n            :mode=\"mode\"\n          />\n        </div>\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.prometheus.prometheusSpec.resources.limits.memory\"\n            :label=\"t('monitoring.prometheus.config.limits.memory')\"\n            :mode=\"mode\"\n          />\n        </div>\n      </div>\n      <div\n        class=\"row row-full-height container-flex-center\"\n        style=\"min-height: 55px;\"\n      >\n        <div class=\"col span-6\">\n          <Checkbox\n            v-model=\"enablePersistentStorage\"\n            data-testid=\"checkbox-chart-enable-persistent-storage\"\n            :label=\"t('monitoring.prometheus.storage.label')\"\n          />\n        </div>\n      </div>\n      <template v-if=\"enablePersistentStorage\">\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <LabeledInput\n              v-model=\"value.prometheus.prometheusSpec.storageSpec.volumeClaimTemplate.spec.resources.requests.storage\"\n              :label=\"t('monitoring.prometheus.storage.size')\"\n              :mode=\"mode\"\n            />\n          </div>\n          <div class=\"col span-6\">\n            <div\n              v-if=\"showStorageClasses\"\n              data-testid=\"select-chart-prometheus-storage-class\"\n            >\n              <StorageClassSelector\n                :mode=\"mode\"\n                :options=\"storageClasses\"\n                :value=\"value.prometheus.prometheusSpec.storageSpec.volumeClaimTemplate.spec.storageClassName\"\n                :label=\"t('monitoring.prometheus.storage.className')\"\n                @updateName=\"(name) => $set(value.prometheus.prometheusSpec.storageSpec.volumeClaimTemplate.spec, 'storageClassName', name)\"\n              />\n            </div>\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col span-6\">\n            <LabeledSelect\n              v-model=\"value.prometheus.prometheusSpec.storageSpec.volumeClaimTemplate.spec.accessModes\"\n              :label=\"t('monitoring.prometheus.storage.mode')\"\n              :localized-label=\"true\"\n              :mode=\"mode\"\n              :multiple=\"true\"\n              :options=\"accessModes\"\n              :reduce=\"({id})=> id\"\n            />\n          </div>\n        </div>\n        <div class=\"row\">\n          <div class=\"col span-12\">\n            <div class=\"mb-5 mt-5\">\n              <h4 class=\" mb-10\">\n                {{ t('monitoring.prometheus.storage.selector') }}\n              </h4>\n            </div>\n            <Banner\n              color=\"warning\"\n              :label=\"t('monitoring.prometheus.storage.selectorWarning', {}, true)\"\n            />\n            <MatchExpressions\n              :initial-empty-row=\"false\"\n              :mode=\"mode\"\n              :value=\"matchExpressions\"\n              :show-remove=\"false\"\n              @input=\"matchChanged($event)\"\n            />\n          </div>\n        </div>\n      </template>\n    </div>\n  </div>\n</template>\n\n<style lang=\"scss\">\n.prometheus-config {\n  & > * {\n    margin-top: 10px;\n  }\n}\n</style>\n"],"mappings":"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"}]}