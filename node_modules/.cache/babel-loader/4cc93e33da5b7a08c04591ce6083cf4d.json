{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/chart/rancher-backup/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/chart/rancher-backup/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCBUYWIgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvVGFiYmVkL1RhYic7CmltcG9ydCBTMyBmcm9tICdAc2hlbGwvY2hhcnQvcmFuY2hlci1iYWNrdXAvUzMnOwppbXBvcnQgeyBSYWRpb0dyb3VwIH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9SYWRpbyc7CmltcG9ydCBMYWJlbGVkU2VsZWN0IGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vTGFiZWxlZFNlbGVjdCc7CmltcG9ydCB7IExhYmVsZWRJbnB1dCB9IGZyb20gJ0Bjb21wb25lbnRzL0Zvcm0vTGFiZWxlZElucHV0JzsKaW1wb3J0IHsgQmFubmVyIH0gZnJvbSAnQGNvbXBvbmVudHMvQmFubmVyJzsKaW1wb3J0IHsgZ2V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IGFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CmltcG9ydCB7IFNUT1JBR0VfQ0xBU1MsIFNFQ1JFVCwgUFYgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gJ3Z1ZXgnOwppbXBvcnQgeyBTVE9SQUdFIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgQ2hhcnRQc3AgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQ2hhcnRQc3AnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgVGFiOiBUYWIsCiAgICBSYWRpb0dyb3VwOiBSYWRpb0dyb3VwLAogICAgUzM6IFMzLAogICAgTGFiZWxlZElucHV0OiBMYWJlbGVkSW5wdXQsCiAgICBMYWJlbGVkU2VsZWN0OiBMYWJlbGVkU2VsZWN0LAogICAgQmFubmVyOiBCYW5uZXIsCiAgICBDaGFydFBzcDogQ2hhcnRQc3AKICB9LAogIGhhc1RhYnM6IHRydWUsCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9LAogICAgbW9kZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6ICdjcmVhdGUnCiAgICB9CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGhhc2g7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gYWxsSGFzaCh7CiAgICAgICAgICAgICAgc3RvcmFnZUNsYXNzZXM6IF90aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2x1c3Rlci9maW5kQWxsJywgewogICAgICAgICAgICAgICAgdHlwZTogU1RPUkFHRV9DTEFTUwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIHBlcnNpc3RlbnRWb2x1bWVzOiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvZmluZEFsbCcsIHsKICAgICAgICAgICAgICAgIHR5cGU6IFBWCiAgICAgICAgICAgICAgfSksCiAgICAgICAgICAgICAgc2VjcmV0czogX3RoaXMuJHN0b3JlLmRpc3BhdGNoKCdjbHVzdGVyL2ZpbmRBbGwnLCB7CiAgICAgICAgICAgICAgICB0eXBlOiBTRUNSRVQKICAgICAgICAgICAgICB9KQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgaGFzaCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF90aGlzLnNlY3JldHMgPSBoYXNoLnNlY3JldHM7CiAgICAgICAgICAgIF90aGlzLnN0b3JhZ2VDbGFzc2VzID0gaGFzaC5zdG9yYWdlQ2xhc3NlczsKICAgICAgICAgICAgX3RoaXMucGVyc2lzdGVudFZvbHVtZXMgPSBoYXNoLnBlcnNpc3RlbnRWb2x1bWVzOwogICAgICAgICAgICBfdGhpcy5zdG9yYWdlU291cmNlID0gX3RoaXMuZ2V0U3RvcmFnZVNvdXJjZShfdGhpcy52YWx1ZSkgfHwgJ25vbmUnOwogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VjcmV0czogW10sCiAgICAgIHN0b3JhZ2VDbGFzc2VzOiBbXSwKICAgICAgcGVyc2lzdGVudFZvbHVtZXM6IFtdLAogICAgICBzdG9yYWdlU291cmNlOiBudWxsLAogICAgICBzdG9yYWdlQ2xhc3M6ICcnLAogICAgICBwZXJzaXN0ZW50Vm9sdW1lOiAnJywKICAgICAgcmVjbGFpbVdhcm5pbmc6IGZhbHNlCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoewogICAgZGVmYXVsdFN0b3JhZ2VDbGFzczogZnVuY3Rpb24gZGVmYXVsdFN0b3JhZ2VDbGFzcygpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RvcmFnZUNsYXNzZXMuZmlsdGVyKGZ1bmN0aW9uIChzYykgewogICAgICAgIHJldHVybiBzYy5tZXRhZGF0YS5hbm5vdGF0aW9uc1tTVE9SQUdFLkRFRkFVTFRfU1RPUkFHRV9DTEFTU10gJiYgc2MubWV0YWRhdGEuYW5ub3RhdGlvbnNbU1RPUkFHRS5ERUZBVUxUX1NUT1JBR0VfQ0xBU1NdICE9PSAnZmFsc2UnOwogICAgICB9KVswXSB8fCAnJzsKICAgIH0sCiAgICBhdmFpbGFibGVQVnM6IGZ1bmN0aW9uIGF2YWlsYWJsZVBWcygpIHsKICAgICAgcmV0dXJuIHRoaXMucGVyc2lzdGVudFZvbHVtZXMuZmlsdGVyKGZ1bmN0aW9uIChwdikgewogICAgICAgIHJldHVybiBwdi5zdGF0dXMucGhhc2UudG9Mb3dlckNhc2UoKSAhPT0gJ2JvdW5kJzsKICAgICAgfSk7CiAgICB9LAogICAgcmFkaW9PcHRpb25zOiBmdW5jdGlvbiByYWRpb09wdGlvbnMoKSB7CiAgICAgIHZhciBvcHRpb25zID0gWydub25lJywgJ3MzJywgJ3BpY2tTQycsICdwaWNrUFYnXTsKICAgICAgdmFyIGxhYmVscyA9IFt0aGlzLnQoJ2JhY2t1cFJlc3RvcmVPcGVyYXRvci5kZXBsb3ltZW50LnN0b3JhZ2Uub3B0aW9ucy5ub25lJyksIHRoaXMudCgnYmFja3VwUmVzdG9yZU9wZXJhdG9yLmRlcGxveW1lbnQuc3RvcmFnZS5vcHRpb25zLnMzJyksIHRoaXMudCgnYmFja3VwUmVzdG9yZU9wZXJhdG9yLmRlcGxveW1lbnQuc3RvcmFnZS5vcHRpb25zLnBpY2tTQycpLCB0aGlzLnQoJ2JhY2t1cFJlc3RvcmVPcGVyYXRvci5kZXBsb3ltZW50LnN0b3JhZ2Uub3B0aW9ucy5waWNrUFYnKV07CiAgICAgIHJldHVybiB7CiAgICAgICAgb3B0aW9uczogb3B0aW9ucywKICAgICAgICBsYWJlbHM6IGxhYmVscwogICAgICB9OwogICAgfQogIH0sIG1hcEdldHRlcnMoWydjdXJyZW50Q2x1c3RlciddLCB7CiAgICB0OiAnaTE4bi90JwogIH0pKSwKICB3YXRjaDogewogICAgc3RvcmFnZVNvdXJjZTogZnVuY3Rpb24gc3RvcmFnZVNvdXJjZShuZXUpIHsKICAgICAgdmFyIF90aGlzJHN0b3JhZ2VDbGFzczsKICAgICAgc3dpdGNoIChuZXUpIHsKICAgICAgICBjYXNlICdwaWNrU0MnOgogICAgICAgICAgdGhpcy52YWx1ZS5wZXJzaXN0ZW5jZS5lbmFibGVkID0gdHJ1ZTsKICAgICAgICAgIHRoaXMudmFsdWUuczMuZW5hYmxlZCA9IGZhbHNlOwogICAgICAgICAgaWYgKHRoaXMuZGVmYXVsdFN0b3JhZ2VDbGFzcyAmJiAoIXRoaXMudmFsdWUucGVyc2lzdGVuY2Uuc3RvcmFnZUNsYXNzIHx8IHRoaXMudmFsdWUucGVyc2lzdGVuY2Uuc3RvcmFnZUNsYXNzID09PSAnLScpKSB7CiAgICAgICAgICAgIHRoaXMudmFsdWUucGVyc2lzdGVuY2Uuc3RvcmFnZUNsYXNzID0gdGhpcy5kZWZhdWx0U3RvcmFnZUNsYXNzLmlkOwogICAgICAgICAgICB0aGlzLnN0b3JhZ2VDbGFzcyA9IHRoaXMuZGVmYXVsdFN0b3JhZ2VDbGFzczsKICAgICAgICAgIH0KICAgICAgICAgIGlmICgoKF90aGlzJHN0b3JhZ2VDbGFzcyA9IHRoaXMuc3RvcmFnZUNsYXNzKSA9PT0gbnVsbCB8fCBfdGhpcyRzdG9yYWdlQ2xhc3MgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJHN0b3JhZ2VDbGFzcy5yZWNsYWltUG9saWN5KSA9PT0gJ0RlbGV0ZScpIHsKICAgICAgICAgICAgdGhpcy5yZWNsYWltV2FybmluZyA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5wZXJzaXN0ZW5jZS52b2x1bWVOYW1lOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAncGlja1BWJzoKICAgICAgICAgIHRoaXMudmFsdWUucGVyc2lzdGVuY2UuZW5hYmxlZCA9IHRydWU7CiAgICAgICAgICB0aGlzLnZhbHVlLnMzLmVuYWJsZWQgPSBmYWxzZTsKICAgICAgICAgIHRoaXMudmFsdWUucGVyc2lzdGVuY2Uuc3RvcmFnZUNsYXNzID0gJy0nOwogICAgICAgICAgdGhpcy5yZWNsYWltV2FybmluZyA9IGZhbHNlOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAnczMnOgogICAgICAgICAgdGhpcy52YWx1ZS5wZXJzaXN0ZW5jZS5lbmFibGVkID0gZmFsc2U7CiAgICAgICAgICB0aGlzLnZhbHVlLnMzLmVuYWJsZWQgPSB0cnVlOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHRoaXMudmFsdWUucGVyc2lzdGVuY2UuZW5hYmxlZCA9IGZhbHNlOwogICAgICAgICAgdGhpcy52YWx1ZS5zMy5lbmFibGVkID0gZmFsc2U7CiAgICAgICAgICBicmVhazsKICAgICAgfQogICAgfSwKICAgIHN0b3JhZ2VDbGFzczogZnVuY3Rpb24gc3RvcmFnZUNsYXNzKCkgewogICAgICB2YXIgbmV1ID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiB7fTsKICAgICAgdGhpcy52YWx1ZS5wZXJzaXN0ZW5jZS5zdG9yYWdlQ2xhc3MgPSBuZXUuaWQ7CiAgICAgIGlmIChuZXUucmVjbGFpbVBvbGljeSA9PT0gJ0RlbGV0ZScpIHsKICAgICAgICB0aGlzLnJlY2xhaW1XYXJuaW5nID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlY2xhaW1XYXJuaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0sCiAgICBwZXJzaXN0ZW50Vm9sdW1lOiBmdW5jdGlvbiBwZXJzaXN0ZW50Vm9sdW1lKG5ldSkgewogICAgICB2YXIgX25ldSRzcGVjOwogICAgICB0aGlzLnZhbHVlLnBlcnNpc3RlbmNlLnZvbHVtZU5hbWUgPSBuZXUubWV0YWRhdGEubmFtZTsKICAgICAgaWYgKCgoX25ldSRzcGVjID0gbmV1LnNwZWMpID09PSBudWxsIHx8IF9uZXUkc3BlYyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX25ldSRzcGVjLnBlcnNpc3RlbnRWb2x1bWVSZWNsYWltUG9saWN5KSA9PT0gJ0RlbGV0ZScpIHsKICAgICAgICB0aGlzLnJlY2xhaW1XYXJuaW5nID0gdHJ1ZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLnJlY2xhaW1XYXJuaW5nID0gZmFsc2U7CiAgICAgIH0KICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGdldFN0b3JhZ2VTb3VyY2U6IGZ1bmN0aW9uIGdldFN0b3JhZ2VTb3VyY2UoKSB7CiAgICAgIGlmIChnZXQodGhpcy52YWx1ZSwgJ3MzLmVuYWJsZWQnKSkgewogICAgICAgIHJldHVybiAnczMnOwogICAgICB9CiAgICAgIGlmIChnZXQodGhpcy52YWx1ZSwgJ3BlcnNpc3RlbmNlLmVuYWJsZWQnKSkgewogICAgICAgIGlmICh0aGlzLnZhbHVlLnBlcnNpc3RlbmNlLnN0b3JhZ2VDbGFzcykgewogICAgICAgICAgcmV0dXJuICdwaWNrU0MnOwogICAgICAgIH0KICAgICAgICBpZiAodGhpcy52YWx1ZS5wZXJzaXN0ZW5jZS52b2x1bWVOYW1lKSB7CiAgICAgICAgICByZXR1cm4gJ3BpY2tQVic7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiAnbm9uZSc7CiAgICB9LAogICAgdXBkYXRlUGFnZVZhbGlkOiBmdW5jdGlvbiB1cGRhdGVQYWdlVmFsaWQodXBkYXRlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3ZhbGlkJywgdXBkYXRlKTsKICAgIH0KICB9LAogIGdldDogZ2V0Cn07"},{"version":3,"names":["Tab","S3","RadioGroup","LabeledSelect","LabeledInput","Banner","get","allHash","STORAGE_CLASS","SECRET","PV","mapGetters","STORAGE","ChartPsp","components","hasTabs","props","value","type","Object","default","_default","mode","String","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","hash","wrap","_callee$","_context","prev","next","storageClasses","$store","dispatch","persistentVolumes","secrets","sent","storageSource","getStorageSource","stop","data","storageClass","persistentVolume","reclaimWarning","computed","_objectSpread","defaultStorageClass","filter","sc","metadata","annotations","DEFAULT_STORAGE_CLASS","availablePVs","pv","status","phase","toLowerCase","radioOptions","options","labels","t","watch","neu","_this$storageClass","persistence","enabled","s3","id","reclaimPolicy","volumeName","arguments","length","undefined","_neu$spec","name","spec","persistentVolumeReclaimPolicy","methods","updatePageValid","update","$emit"],"sources":["node_modules/@rancher/shell/chart/rancher-backup/index.vue"],"sourcesContent":["<script>\nimport Tab from '@shell/components/Tabbed/Tab';\nimport S3 from '@shell/chart/rancher-backup/S3';\nimport { RadioGroup } from '@components/Form/Radio';\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { Banner } from '@components/Banner';\nimport { get } from '@shell/utils/object';\nimport { allHash } from '@shell/utils/promise';\nimport { STORAGE_CLASS, SECRET, PV } from '@shell/config/types';\nimport { mapGetters } from 'vuex';\nimport { STORAGE } from '@shell/config/labels-annotations';\nimport ChartPsp from '@shell/components/ChartPsp';\n\nexport default {\n  components: {\n    Tab,\n    RadioGroup,\n    S3,\n    LabeledInput,\n    LabeledSelect,\n    Banner,\n    ChartPsp\n  },\n\n  hasTabs: true,\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n\n    mode: {\n      type:    String,\n      default: 'create'\n    }\n  },\n\n  async  fetch() {\n    const hash = await allHash({\n      storageClasses:    this.$store.dispatch('cluster/findAll', { type: STORAGE_CLASS }),\n      persistentVolumes: this.$store.dispatch('cluster/findAll', { type: PV }),\n      secrets:           this.$store.dispatch('cluster/findAll', { type: SECRET }),\n    });\n\n    this.secrets = hash.secrets;\n    this.storageClasses = hash.storageClasses;\n    this.persistentVolumes = hash.persistentVolumes;\n\n    this.storageSource = this.getStorageSource(this.value) || 'none';\n  },\n\n  data() {\n    return {\n      secrets:           [],\n      storageClasses:    [],\n      persistentVolumes: [],\n      storageSource:     null,\n      storageClass:      '',\n      persistentVolume:  '',\n      reclaimWarning:    false\n    };\n  },\n\n  computed: {\n    defaultStorageClass() {\n      return this.storageClasses.filter((sc) => sc.metadata.annotations[STORAGE.DEFAULT_STORAGE_CLASS] && sc.metadata.annotations[STORAGE.DEFAULT_STORAGE_CLASS] !== 'false' )[0] || '';\n    },\n\n    availablePVs() {\n      return this.persistentVolumes.filter((pv) => pv.status.phase.toLowerCase() !== 'bound');\n    },\n\n    radioOptions() {\n      const options = ['none', 's3', 'pickSC', 'pickPV'];\n      const labels = [\n        this.t('backupRestoreOperator.deployment.storage.options.none'),\n        this.t('backupRestoreOperator.deployment.storage.options.s3'),\n        this.t('backupRestoreOperator.deployment.storage.options.pickSC'),\n        this.t('backupRestoreOperator.deployment.storage.options.pickPV'),\n      ];\n\n      return { options, labels };\n    },\n\n    ...mapGetters(['currentCluster'], { t: 'i18n/t' }),\n  },\n\n  watch: {\n    storageSource(neu) {\n      switch (neu) {\n      case 'pickSC':\n        this.value.persistence.enabled = true;\n        this.value.s3.enabled = false;\n        if (this.defaultStorageClass && (!this.value.persistence.storageClass || this.value.persistence.storageClass === '-' )) {\n          this.value.persistence.storageClass = this.defaultStorageClass.id;\n          this.storageClass = this.defaultStorageClass;\n        }\n        if (this.storageClass?.reclaimPolicy === 'Delete') {\n          this.reclaimWarning = true;\n        }\n        delete this.value.persistence.volumeName;\n        break;\n      case 'pickPV':\n        this.value.persistence.enabled = true;\n        this.value.s3.enabled = false;\n        this.value.persistence.storageClass = '-';\n        this.reclaimWarning = false;\n        break;\n      case 's3':\n        this.value.persistence.enabled = false;\n        this.value.s3.enabled = true;\n        break;\n      default:\n        this.value.persistence.enabled = false;\n        this.value.s3.enabled = false;\n        break;\n      }\n    },\n\n    storageClass(neu = {}) {\n      this.value.persistence.storageClass = neu.id;\n      if (neu.reclaimPolicy === 'Delete') {\n        this.reclaimWarning = true;\n      } else {\n        this.reclaimWarning = false;\n      }\n    },\n\n    persistentVolume(neu) {\n      this.value.persistence.volumeName = neu.metadata.name;\n      if (neu.spec?.persistentVolumeReclaimPolicy === 'Delete') {\n        this.reclaimWarning = true;\n      } else {\n        this.reclaimWarning = false;\n      }\n    },\n  },\n\n  methods: {\n    getStorageSource() {\n      if (get(this.value, 's3.enabled')) {\n        return 's3';\n      } if (get(this.value, 'persistence.enabled')) {\n        if (this.value.persistence.storageClass) {\n          return 'pickSC';\n        }\n        if (this.value.persistence.volumeName) {\n          return 'pickPV';\n        }\n      }\n\n      return 'none';\n    },\n    updatePageValid(update) {\n      this.$emit('valid', update);\n    }\n  },\n  get\n};\n</script>\n\n<template>\n  <div>\n    <Tab\n      label=\"Chart Options\"\n      name=\"chartOptions\"\n    >\n      <!-- Conditionally display PSP checkbox -->\n      <ChartPsp\n        :value=\"value\"\n        :cluster=\"currentCluster\"\n      />\n\n      <Banner\n        color=\"info\"\n        :label=\"t('backupRestoreOperator.deployment.storage.tip')\"\n      />\n      <RadioGroup\n        v-model=\"storageSource\"\n        name=\"storageSource\"\n        :label=\"t('backupRestoreOperator.deployment.storage.label')\"\n        class=\"mb-10\"\n        :options=\"radioOptions.options\"\n        :labels=\"radioOptions.labels\"\n      />\n      <S3\n        v-if=\"storageSource==='s3'\"\n        :value=\"value.s3\"\n        :secrets=\"secrets\"\n        :mode=\"mode\"\n        @valid=\"updatePageValid($event)\"\n      />\n      <template v-else>\n        <div class=\"row\">\n          <template v-if=\"storageSource === 'pickSC'\">\n            <div class=\"col span-6\">\n              <LabeledSelect\n                :key=\"storageSource\"\n                v-model=\"storageClass\"\n                :get-option-label=\"opt => opt.id || opt\"\n                :label=\"t('backupRestoreOperator.deployment.storage.storageClass.label')\"\n                :tooltip=\"reclaimWarning ? t('backupRestoreOperator.deployment.storage.warning', {type: 'Storage Class'}) : null\"\n                :mode=\"mode\"\n                :status=\"reclaimWarning ? 'warning' : null\"\n                :options=\"storageClasses\"\n                :hover-tooltip=\"true\"\n              />\n            </div>\n            <div class=\"col span-6\">\n              <LabeledInput\n                v-model=\"value.persistence.size\"\n                :mode=\"mode\"\n                :label=\"t('backupRestoreOperator.deployment.size')\"\n              />\n            </div>\n          </template>\n          <div\n            v-else-if=\"storageSource === 'pickPV'\"\n            class=\"col span-6\"\n          >\n            <LabeledSelect\n              :key=\"storageSource\"\n              v-model=\"persistentVolume\"\n              :get-option-label=\"opt => opt.id || opt\"\n              :label=\"t('backupRestoreOperator.deployment.storage.persistentVolume.label')\"\n              :tooltip=\"reclaimWarning ? t('backupRestoreOperator.deployment.storage.warning', {type: 'Persistent Volume'}) : null\"\n              :mode=\"mode\"\n              :status=\"reclaimWarning ? 'warning' : null\"\n              :options=\"availablePVs\"\n              :hover-tooltip=\"true\"\n            />\n          </div>\n        </div>\n      </template>\n    </Tab>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n::v-deep .radio-group.label>SPAN {\n  font-size: 1em;\n}\n</style>\n"],"mappings":"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"}]}