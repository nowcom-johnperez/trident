{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/VolumeClaimTemplate.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/VolumeClaimTemplate.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLm1hdGNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0IE1vdW50IGZyb20gJ0BzaGVsbC9lZGl0L3dvcmtsb2FkL3N0b3JhZ2UvTW91bnQnOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCBQZXJzaXN0ZW50Vm9sdW1lQ2xhaW0gZnJvbSAnQHNoZWxsL2VkaXQvd29ya2xvYWQvc3RvcmFnZS9wZXJzaXN0ZW50Vm9sdW1lQ2xhaW0vcGVyc2lzdGVudHZvbHVtZWNsYWltLnZ1ZSc7CmltcG9ydCB7IFBWQyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBfVklFVyB9IGZyb20gJ0BzaGVsbC9jb25maWcvcXVlcnktcGFyYW1zJzsKaW1wb3J0IEFycmF5TGlzdEdyb3VwZWQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9BcnJheUxpc3RHcm91cGVkJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIEFycmF5TGlzdEdyb3VwZWQ6IEFycmF5TGlzdEdyb3VwZWQsCiAgICBNb3VudDogTW91bnQsCiAgICBQZXJzaXN0ZW50Vm9sdW1lQ2xhaW06IFBlcnNpc3RlbnRWb2x1bWVDbGFpbQogIH0sCiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnY3JlYXRlJwogICAgfSwKICAgIG5hbWVzcGFjZTogewogICAgICB0eXBlOiBTdHJpbmcsCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICB2YWx1ZTogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiB7fTsKICAgICAgfQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHRlbXBsYXRlczogdGhpcy52YWx1ZS52b2x1bWVDbGFpbVRlbXBsYXRlcywKICAgICAgbmFtZTogJycKICAgIH07CiAgfSwKICBjb21wdXRlZDogX29iamVjdFNwcmVhZCh7CiAgICBpc1ZpZXc6IGZ1bmN0aW9uIGlzVmlldygpIHsKICAgICAgcmV0dXJuIHRoaXMubW9kZSA9PT0gX1ZJRVc7CiAgICB9CiAgfSwgbWFwR2V0dGVycyh7CiAgICB0OiAnaTE4bi90JwogIH0pKSwKICB3YXRjaDogewogICAgbmFtZXNwYWNlOiBmdW5jdGlvbiBuYW1lc3BhY2UobmV1KSB7CiAgICAgIHRoaXMucHZjLm1ldGFkYXRhLm5hbWVzcGFjZSA9IG5ldTsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ3ZvbHVtZUNsYWltVGVtcGxhdGVzJywgdGhpcy50ZW1wbGF0ZXMpOwogICAgfSwKICAgIHVwZGF0ZVBWQzogZnVuY3Rpb24gdXBkYXRlUFZDKHB2YykgewogICAgICB2YXIgX3B2YyRzcGVjLCBfcHZjJG1ldGFkYXRhOwogICAgICB2YXIgc3RvcmFnZSA9IHB2YyA9PT0gbnVsbCB8fCBwdmMgPT09IHZvaWQgMCB8fCAoX3B2YyRzcGVjID0gcHZjLnNwZWMpID09PSBudWxsIHx8IF9wdmMkc3BlYyA9PT0gdm9pZCAwIHx8IChfcHZjJHNwZWMgPSBfcHZjJHNwZWMucmVzb3VyY2VzKSA9PT0gbnVsbCB8fCBfcHZjJHNwZWMgPT09IHZvaWQgMCB8fCAoX3B2YyRzcGVjID0gX3B2YyRzcGVjLnJlcXVlc3RzKSA9PT0gbnVsbCB8fCBfcHZjJHNwZWMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9wdmMkc3BlYy5zdG9yYWdlOwogICAgICBpZiAoc3RvcmFnZSkgewogICAgICAgIGlmICghc3RvcmFnZS50b1N0cmluZygpLm1hdGNoKC9bMC05XSpbYS16QS1aXSskLykpIHsKICAgICAgICAgIHB2Yy5zcGVjLnJlc291cmNlcy5yZXF1ZXN0cy5zdG9yYWdlICs9ICdHaSc7CiAgICAgICAgfQogICAgICB9CiAgICAgIHRoaXMubmFtZSA9IHB2YyA9PT0gbnVsbCB8fCBwdmMgPT09IHZvaWQgMCB8fCAoX3B2YyRtZXRhZGF0YSA9IHB2Yy5tZXRhZGF0YSkgPT09IG51bGwgfHwgX3B2YyRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3B2YyRtZXRhZGF0YS5uYW1lOwogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfSwKICAgIGFkZFBWQzogZnVuY3Rpb24gYWRkUFZDKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICBpZiAoIXRoaXMudmFsdWUudm9sdW1lQ2xhaW1UZW1wbGF0ZXMpIHsKICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZSwgJ3ZvbHVtZUNsYWltVGVtcGxhdGVzJywgW10pOwogICAgICB9CiAgICAgIHRoaXMudGVtcGxhdGVzID0gdGhpcy52YWx1ZS52b2x1bWVDbGFpbVRlbXBsYXRlczsKICAgICAgdmFyIG5hbWVzcGFjZSA9IHRoaXMubmFtZXNwYWNlIHx8IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2RlZmF1bHROYW1lc3BhY2UnXTsKICAgICAgdmFyIGRhdGEgPSB7CiAgICAgICAgdHlwZTogUFZDCiAgICAgIH07CiAgICAgIGRhdGEubWV0YWRhdGEgPSB7CiAgICAgICAgbmFtZXNwYWNlOiBuYW1lc3BhY2UKICAgICAgfTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2NsdXN0ZXIvY3JlYXRlJywgZGF0YSkudGhlbihmdW5jdGlvbiAocHZjKSB7CiAgICAgICAgcHZjLmFwcGx5RGVmYXVsdHMoKTsKICAgICAgICBfdGhpcy50ZW1wbGF0ZXMucHVzaChwdmMpOwogICAgICAgIF90aGlzLnVwZGF0ZSgpOwogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"names":["Mount","mapGetters","PersistentVolumeClaim","PVC","_VIEW","ArrayListGrouped","components","props","mode","type","String","default","namespace","value","Object","_default","data","templates","volumeClaimTemplates","name","computed","_objectSpread","isView","t","watch","neu","pvc","metadata","methods","update","$set","updatePVC","_pvc$spec","_pvc$metadata","storage","spec","resources","requests","toString","match","addPVC","_this","$store","getters","dispatch","then","applyDefaults","push"],"sources":["node_modules/@rancher/shell/edit/workload/VolumeClaimTemplate.vue"],"sourcesContent":["<script>\nimport Mount from '@shell/edit/workload/storage/Mount';\nimport { mapGetters } from 'vuex';\nimport PersistentVolumeClaim from '@shell/edit/workload/storage/persistentVolumeClaim/persistentvolumeclaim.vue';\nimport { PVC } from '@shell/config/types';\nimport { _VIEW } from '@shell/config/query-params';\nimport ArrayListGrouped from '@shell/components/form/ArrayListGrouped';\n\nexport default {\n  components: {\n    ArrayListGrouped,\n    Mount,\n    PersistentVolumeClaim\n  },\n\n  props: {\n    mode: {\n      type:    String,\n      default: 'create'\n    },\n\n    namespace: {\n      type:    String,\n      default: null\n    },\n\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    },\n  },\n\n  data() {\n    return { templates: this.value.volumeClaimTemplates, name: '' };\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    ...mapGetters({ t: 'i18n/t' })\n  },\n\n  watch: {\n    namespace(neu) {\n      this.pvc.metadata.namespace = neu;\n    },\n  },\n\n  methods: {\n    update() {\n      this.$set(this.value, 'volumeClaimTemplates', this.templates);\n    },\n\n    updatePVC(pvc) {\n      const storage = pvc?.spec?.resources?.requests?.storage;\n\n      if (storage) {\n        if (!storage.toString().match(/[0-9]*[a-zA-Z]+$/)) {\n          pvc.spec.resources.requests.storage += 'Gi';\n        }\n      }\n      this.name = pvc?.metadata?.name;\n      this.update();\n    },\n\n    addPVC() {\n      if (!this.value.volumeClaimTemplates) {\n        this.$set(this.value, 'volumeClaimTemplates', []);\n      }\n      this.templates = this.value.volumeClaimTemplates;\n\n      const namespace = this.namespace || this.$store.getters['defaultNamespace'];\n\n      const data = { type: PVC };\n\n      data.metadata = { namespace };\n\n      this.$store.dispatch('cluster/create', data).then((pvc) => {\n        pvc.applyDefaults();\n        this.templates.push(pvc);\n        this.update();\n      });\n    },\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div>\n      <ArrayListGrouped\n        v-model=\"templates\"\n        class=\"mb-20\"\n        @input=\"update()\"\n      >\n        <template #default=\"props\">\n          <div class=\"bordered-section\">\n            <PersistentVolumeClaim\n              v-if=\"props.row.value.metadata\"\n              :value=\"props.row.value\"\n              :mode=\"mode\"\n              @input=\"updatePVC(props.row.value)\"\n            />\n          </div>\n          <Mount\n            :name=\"props.row.value.metadata.name\"\n            :mode=\"mode\"\n            :container=\"value.template.spec.containers[0]\"\n          />\n        </template>\n        <template #add>\n          <button\n            v-if=\"!isView\"\n            type=\"button\"\n            class=\"btn role-tertiary add\"\n            @click=\"addPVC\"\n          >\n            {{ t('volumeClaimTemplate.add.label') }}\n          </button>\n        </template>\n      </ArrayListGrouped>\n    </div>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.remove-btn{\n  position: absolute;\n  top:0px;\n  right:0px;\n}\n</style>\n"],"mappings":";;;;;;;;;;;;;;AACA,OAAAA,KAAA;AACA,SAAAC,UAAA;AACA,OAAAC,qBAAA;AACA,SAAAC,GAAA;AACA,SAAAC,KAAA;AACA,OAAAC,gBAAA;AAEA;EACAC,UAAA;IACAD,gBAAA,EAAAA,gBAAA;IACAL,KAAA,EAAAA,KAAA;IACAE,qBAAA,EAAAA;EACA;EAEAK,KAAA;IACAC,IAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IAEAC,SAAA;MACAH,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IAEAE,KAAA;MACAJ,IAAA,EAAAK,MAAA;MACAH,OAAA,WAAAI,SAAA;QACA;MACA;IACA;EACA;EAEAC,IAAA,WAAAA,KAAA;IACA;MAAAC,SAAA,OAAAJ,KAAA,CAAAK,oBAAA;MAAAC,IAAA;IAAA;EACA;EAEAC,QAAA,EAAAC,aAAA;IACAC,MAAA,WAAAA,OAAA;MACA,YAAAd,IAAA,KAAAJ,KAAA;IACA;EAAA,GAEAH,UAAA;IAAAsB,CAAA;EAAA,GACA;EAEAC,KAAA;IACAZ,SAAA,WAAAA,UAAAa,GAAA;MACA,KAAAC,GAAA,CAAAC,QAAA,CAAAf,SAAA,GAAAa,GAAA;IACA;EACA;EAEAG,OAAA;IACAC,MAAA,WAAAA,OAAA;MACA,KAAAC,IAAA,MAAAjB,KAAA,+BAAAI,SAAA;IACA;IAEAc,SAAA,WAAAA,UAAAL,GAAA;MAAA,IAAAM,SAAA,EAAAC,aAAA;MACA,IAAAC,OAAA,GAAAR,GAAA,aAAAA,GAAA,gBAAAM,SAAA,GAAAN,GAAA,CAAAS,IAAA,cAAAH,SAAA,gBAAAA,SAAA,GAAAA,SAAA,CAAAI,SAAA,cAAAJ,SAAA,gBAAAA,SAAA,GAAAA,SAAA,CAAAK,QAAA,cAAAL,SAAA,uBAAAA,SAAA,CAAAE,OAAA;MAEA,IAAAA,OAAA;QACA,KAAAA,OAAA,CAAAI,QAAA,GAAAC,KAAA;UACAb,GAAA,CAAAS,IAAA,CAAAC,SAAA,CAAAC,QAAA,CAAAH,OAAA;QACA;MACA;MACA,KAAAf,IAAA,GAAAO,GAAA,aAAAA,GAAA,gBAAAO,aAAA,GAAAP,GAAA,CAAAC,QAAA,cAAAM,aAAA,uBAAAA,aAAA,CAAAd,IAAA;MACA,KAAAU,MAAA;IACA;IAEAW,MAAA,WAAAA,OAAA;MAAA,IAAAC,KAAA;MACA,UAAA5B,KAAA,CAAAK,oBAAA;QACA,KAAAY,IAAA,MAAAjB,KAAA;MACA;MACA,KAAAI,SAAA,QAAAJ,KAAA,CAAAK,oBAAA;MAEA,IAAAN,SAAA,QAAAA,SAAA,SAAA8B,MAAA,CAAAC,OAAA;MAEA,IAAA3B,IAAA;QAAAP,IAAA,EAAAN;MAAA;MAEAa,IAAA,CAAAW,QAAA;QAAAf,SAAA,EAAAA;MAAA;MAEA,KAAA8B,MAAA,CAAAE,QAAA,mBAAA5B,IAAA,EAAA6B,IAAA,WAAAnB,GAAA;QACAA,GAAA,CAAAoB,aAAA;QACAL,KAAA,CAAAxB,SAAA,CAAA8B,IAAA,CAAArB,GAAA;QACAe,KAAA,CAAAZ,MAAA;MACA;IACA;EACA;AACA"}]}