{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/detail/harvesterhci.io.management.cluster.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/detail/harvesterhci.io.management.cluster.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgTG9hZGluZyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Mb2FkaW5nJzsKaW1wb3J0IFJlc291cmNlVGFicyBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9mb3JtL1Jlc291cmNlVGFicyc7CmltcG9ydCBDb3B5Q29kZSBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Db3B5Q29kZSc7CmltcG9ydCBUYWIgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvVGFiYmVkL1RhYic7CmltcG9ydCB7IGFsbEhhc2ggfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMb2FkaW5nOiBMb2FkaW5nLAogICAgUmVzb3VyY2VUYWJzOiBSZXNvdXJjZVRhYnMsCiAgICBUYWI6IFRhYiwKICAgIENvcHlDb2RlOiBDb3B5Q29kZQogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoKSB7CiAgICAgICAgcmV0dXJuIHt9OwogICAgICB9CiAgICB9CiAgfSwKICBmZXRjaDogZnVuY3Rpb24gZmV0Y2goKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGhhc2gsIHJlczsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgIHJldHVybiBfdGhpcy52YWx1ZS53YWl0Rm9yUHJvdmlzaW9uZXIoKTsKICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgaGFzaCA9IHsKICAgICAgICAgICAgICBjbHVzdGVyVG9rZW46IF90aGlzLnZhbHVlLmdldE9yQ3JlYXRlVG9rZW4oKQogICAgICAgICAgICB9OwogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2goaGFzaCk7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF90aGlzLmFsbE5vZGVzID0gcmVzLmFsbE5vZGVzIHx8IFtdOwogICAgICAgICAgICBfdGhpcy5hbGxOb2RlUG9vbHMgPSByZXMuYWxsTm9kZVBvb2xzIHx8IFtdOwogICAgICAgICAgICBfdGhpcy5jbHVzdGVyVG9rZW4gPSByZXMuY2x1c3RlclRva2VuOwogICAgICAgICAgY2FzZSA5OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgY2x1c3RlclRva2VuOiBudWxsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGRlZmF1bHRUYWI6IGZ1bmN0aW9uIGRlZmF1bHRUYWIoKSB7CiAgICAgIHZhciBfdGhpcyRtYWNoaW5lczsKICAgICAgaWYgKHRoaXMuc2hvd1JlZ2lzdHJhdGlvbiAmJiAhKChfdGhpcyRtYWNoaW5lcyA9IHRoaXMubWFjaGluZXMpICE9PSBudWxsICYmIF90aGlzJG1hY2hpbmVzICE9PSB2b2lkIDAgJiYgX3RoaXMkbWFjaGluZXMubGVuZ3RoKSkgewogICAgICAgIHJldHVybiAncmVnaXN0cmF0aW9uJzsKICAgICAgfQogICAgICByZXR1cm4gJyc7CiAgICB9LAogICAgc2hvd1JlZ2lzdHJhdGlvbjogZnVuY3Rpb24gc2hvd1JlZ2lzdHJhdGlvbigpIHsKICAgICAgaWYgKCF0aGlzLmNsdXN0ZXJUb2tlbikgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy52YWx1ZS5pc0ltcG9ydGVkKSB7CiAgICAgICAgdmFyIF90aGlzJHZhbHVlJG1nbXQ7CiAgICAgICAgcmV0dXJuICEoKF90aGlzJHZhbHVlJG1nbXQgPSB0aGlzLnZhbHVlLm1nbXQpICE9PSBudWxsICYmIF90aGlzJHZhbHVlJG1nbXQgIT09IHZvaWQgMCAmJiBfdGhpcyR2YWx1ZSRtZ210LmlzUmVhZHkpOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0sCiAgICByZWdpc3RyYXRpb25VUkw6IGZ1bmN0aW9uIHJlZ2lzdHJhdGlvblVSTCgpIHsKICAgICAgdmFyIF90aGlzJGNsdXN0ZXJUb2tlbjsKICAgICAgcmV0dXJuICgoKF90aGlzJGNsdXN0ZXJUb2tlbiA9IHRoaXMuY2x1c3RlclRva2VuKSA9PT0gbnVsbCB8fCBfdGhpcyRjbHVzdGVyVG9rZW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF90aGlzJGNsdXN0ZXJUb2tlbi5jb21tYW5kKSB8fCAnJykucmVwbGFjZSgna3ViZWN0bCBhcHBseSAtZiAnLCAnJyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Loading","ResourceTabs","CopyCode","Tab","allHash","components","props","value","type","Object","default","_default","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","hash","res","wrap","_callee$","_context","prev","next","waitForProvisioner","clusterToken","getOrCreateToken","sent","allNodes","allNodePools","stop","data","computed","defaultTab","_this$machines","showRegistration","machines","length","isImported","_this$value$mgmt","mgmt","isReady","registrationURL","_this$clusterToken","command","replace"],"sources":["node_modules/@rancher/shell/detail/harvesterhci.io.management.cluster.vue"],"sourcesContent":["<script>\nimport Loading from '@shell/components/Loading';\nimport ResourceTabs from '@shell/components/form/ResourceTabs';\nimport CopyCode from '@shell/components/CopyCode';\nimport Tab from '@shell/components/Tabbed/Tab';\nimport { allHash } from '@shell/utils/promise';\n\nexport default {\n  components: {\n    Loading,\n    ResourceTabs,\n    Tab,\n    CopyCode,\n  },\n\n  props: {\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      }\n    }\n  },\n\n  async fetch() {\n    await this.value.waitForProvisioner();\n\n    const hash = { clusterToken: this.value.getOrCreateToken() };\n\n    const res = await allHash(hash);\n\n    this.allNodes = res.allNodes || [];\n    this.allNodePools = res.allNodePools || [];\n    this.clusterToken = res.clusterToken;\n  },\n\n  data() {\n    return { clusterToken: null };\n  },\n\n  computed: {\n    defaultTab() {\n      if (this.showRegistration && !this.machines?.length) {\n        return 'registration';\n      }\n\n      return '';\n    },\n\n    showRegistration() {\n      if ( !this.clusterToken ) {\n        return false;\n      }\n\n      if ( this.value.isImported ) {\n        return !this.value.mgmt?.isReady;\n      }\n\n      return false;\n    },\n\n    registrationURL() {\n      return (this.clusterToken?.command || '').replace('kubectl apply -f ', '');\n    },\n  },\n};\n</script>\n\n<template>\n  <Loading v-if=\"$fetchState.pending\" />\n  <ResourceTabs\n    v-else\n    v-model=\"value\"\n    :default-tab=\"defaultTab\"\n  >\n    <Tab\n      v-if=\"showRegistration\"\n      name=\"registration\"\n      :label=\"t('cluster.tabs.registration')\"\n      :weight=\"2\"\n      class=\"p-10\"\n    >\n      <h4\n        v-clean-html=\"t('cluster.harvester.registration.step1', null, true)\"\n      />\n\n      <h4\n        v-clean-html=\"t('cluster.harvester.registration.step2', null, true)\"\n        class=\"mt-10\"\n      />\n\n      <h4\n        v-clean-html=\"t('cluster.harvester.registration.step3', null, true)\"\n        class=\"mt-10\"\n      />\n      <CopyCode class=\"m-10 p-10\">\n        {{ registrationURL }}\n      </CopyCode>\n    </Tab>\n  </ResourceTabs>\n</template>\n"],"mappings":";;;;AACA,OAAAA,OAAA;AACA,OAAAC,YAAA;AACA,OAAAC,QAAA;AACA,OAAAC,GAAA;AACA,SAAAC,OAAA;AAEA;EACAC,UAAA;IACAL,OAAA,EAAAA,OAAA;IACAC,YAAA,EAAAA,YAAA;IACAE,GAAA,EAAAA,GAAA;IACAD,QAAA,EAAAA;EACA;EAEAI,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA,WAAAC,SAAA;QACA;MACA;IACA;EACA;EAEAC,KAAA,WAAAA,MAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAAC,QAAA;MAAA,IAAAC,IAAA,EAAAC,GAAA;MAAA,OAAAJ,kBAAA,CAAAK,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACAX,KAAA,CAAAN,KAAA,CAAAkB,kBAAA;UAAA;YAEAP,IAAA;cAAAQ,YAAA,EAAAb,KAAA,CAAAN,KAAA,CAAAoB,gBAAA;YAAA;YAAAL,QAAA,CAAAE,IAAA;YAAA,OAEApB,OAAA,CAAAc,IAAA;UAAA;YAAAC,GAAA,GAAAG,QAAA,CAAAM,IAAA;YAEAf,KAAA,CAAAgB,QAAA,GAAAV,GAAA,CAAAU,QAAA;YACAhB,KAAA,CAAAiB,YAAA,GAAAX,GAAA,CAAAW,YAAA;YACAjB,KAAA,CAAAa,YAAA,GAAAP,GAAA,CAAAO,YAAA;UAAA;UAAA;YAAA,OAAAJ,QAAA,CAAAS,IAAA;QAAA;MAAA,GAAAd,OAAA;IAAA;EACA;EAEAe,IAAA,WAAAA,KAAA;IACA;MAAAN,YAAA;IAAA;EACA;EAEAO,QAAA;IACAC,UAAA,WAAAA,WAAA;MAAA,IAAAC,cAAA;MACA,SAAAC,gBAAA,OAAAD,cAAA,QAAAE,QAAA,cAAAF,cAAA,eAAAA,cAAA,CAAAG,MAAA;QACA;MACA;MAEA;IACA;IAEAF,gBAAA,WAAAA,iBAAA;MACA,UAAAV,YAAA;QACA;MACA;MAEA,SAAAnB,KAAA,CAAAgC,UAAA;QAAA,IAAAC,gBAAA;QACA,UAAAA,gBAAA,QAAAjC,KAAA,CAAAkC,IAAA,cAAAD,gBAAA,eAAAA,gBAAA,CAAAE,OAAA;MACA;MAEA;IACA;IAEAC,eAAA,WAAAA,gBAAA;MAAA,IAAAC,kBAAA;MACA,UAAAA,kBAAA,QAAAlB,YAAA,cAAAkB,kBAAA,uBAAAA,kBAAA,CAAAC,OAAA,SAAAC,OAAA;IACA;EACA;AACA"}]}