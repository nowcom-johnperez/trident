{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/steve/worker/web-worker.advanced.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/steve/worker/web-worker.advanced.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0IF9zbGljZWRUb0FycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3NsaWNlZFRvQXJyYXkiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmVudHJpZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5mdW5jdGlvbi5uYW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKLyoqCiAqIEFkdmFuY2VkIFdvcmtlciBpcyBlbmFibGVkIGJ5IHBlcmZvcm1hbmNlIHNldHRpbmcKICogcmVsb2NhdGVzIGNsdXN0ZXIgcmVzb3VyY2Ugc29ja2V0cyBvZmYgdGhlIFVJIHRocmVhZCBhbmQgaW50byBhIHdlYndvcmtlcgogKi8KCmltcG9ydCB7IFNDSEVNQSwgQ09VTlQgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IFJlc291cmNlV2F0Y2hlciwgeyB3YXRjaEtleUZyb21NZXNzYWdlIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvc3RldmUvcmVzb3VyY2VXYXRjaGVyJzsKaW1wb3J0IFJlc291cmNlQ2FjaGUgZnJvbSAnQHNoZWxsL3BsdWdpbnMvc3RldmUvY2FjaGVzL3Jlc291cmNlQ2FjaGUnOwppbXBvcnQgeyBFVkVOVF9NRVNTQUdFLCBFVkVOVF9DT05ORUNUX0VSUk9SLCBFVkVOVF9ESVNDT05ORUNUX0VSUk9SIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvY2tldCc7CmltcG9ydCB7IG5vcm1hbGl6ZVR5cGUsIGtleUZpZWxkRm9yIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvZGFzaGJvYXJkLXN0b3JlL25vcm1hbGl6ZSc7CmltcG9ydCB7IGFkZFNjaGVtYUluZGV4RmllbGRzIH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvc3RldmUvc2NoZW1hLnV0aWxzJzsKdmFyIGNhY2hlcyA9IHt9Owp2YXIgc3RhdGUgPSB7CiAgd2F0Y2hlcjogdW5kZWZpbmVkLAogIHN0b3JlOiAnJywKICAvLyBTdG9yZSBuYW1lCiAgLyoqCiAgICogU3RvcmUgYHdhdGNoYC9gdW53YXRjaGAgZXZlbnRzIHRvIHByb2Nlc3Mgd2hlbiB0aGUgc29ja2V0IGlzIGNyZWF0ZWQKICAgKi8KICB3b3JrZXJRdWV1ZTogW10sCiAgYmF0Y2hDaGFuZ2VzOiB7fSwKICBkZWJ1Z1dvcmtlcjogZmFsc2UKfTsKdmFyIHRyYWNlID0gZnVuY3Rpb24gdHJhY2UoKSB7CiAgdmFyIF9jb25zb2xlOwogIGZvciAodmFyIF9sZW4gPSBhcmd1bWVudHMubGVuZ3RoLCBhcmdzID0gbmV3IEFycmF5KF9sZW4pLCBfa2V5ID0gMDsgX2tleSA8IF9sZW47IF9rZXkrKykgewogICAgYXJnc1tfa2V5XSA9IGFyZ3VtZW50c1tfa2V5XTsKICB9CiAgc3RhdGUuZGVidWdXb3JrZXIgJiYgKF9jb25zb2xlID0gY29uc29sZSkuaW5mby5hcHBseShfY29uc29sZSwgWydBZHZhbmNlZCBXb3JrZXI6J10uY29uY2F0KGFyZ3MpKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCn07CnRyYWNlKCdjcmVhdGVkJyk7CnZhciBtYWludGVuYW5jZUludGVydmFsID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkgewogIGlmIChPYmplY3Qua2V5cyhzdGF0ZS5iYXRjaENoYW5nZXMpLmxlbmd0aCkgewogICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgIGJhdGNoQ2hhbmdlczogc3RhdGUuYmF0Y2hDaGFuZ2VzCiAgICB9KTsKICAgIHN0YXRlLmJhdGNoQ2hhbmdlcyA9IHt9OwogIH0KfSwgNTAwMCk7IC8vIDUgc2Vjb25kcwoKdmFyIG1ha2VSZXNvdXJjZVByb3BzID0gZnVuY3Rpb24gbWFrZVJlc291cmNlUHJvcHMobXNnKSB7CiAgdmFyIHJlc291cmNlVHlwZSA9IG1zZy5yZXNvdXJjZVR5cGUsCiAgICB0eXBlID0gbXNnLmRhdGEudHlwZSwKICAgIGRhdGEgPSBtc2cuZGF0YTsKICB2YXIgcmF3VHlwZSA9IHJlc291cmNlVHlwZSB8fCB0eXBlOwogIHZhciBub3JtYWxpemVkVHlwZSA9IG5vcm1hbGl6ZVR5cGUocmF3VHlwZSA9PT0gJ2NvdW50cycgPyBDT1VOVCA6IHJhd1R5cGUpOwogIHZhciBrZXlGaWVsZCA9IGtleUZpZWxkRm9yKG5vcm1hbGl6ZWRUeXBlKTsKICBpZiAobm9ybWFsaXplZFR5cGUgPT09IFNDSEVNQSkgewogICAgYWRkU2NoZW1hSW5kZXhGaWVsZHMoZGF0YSk7CiAgfQogIHJldHVybiB7CiAgICB0eXBlOiBub3JtYWxpemVkVHlwZSwKICAgIGlkOiBkYXRhW2tleUZpZWxkXSwKICAgIGRhdGE6IGRhdGEKICB9Owp9OwoKLyoqCiAqIFBhc3MgdGhlIEVWRU5UX0NPTk5FQ1RfRVJST1IgLyBFVkVOVF9ESVNDT05ORUNUX0VSUk9SIGJhY2sgdG8gdGhlIFVJIHRocmVhZAogKi8KdmFyIGhhbmRsZUNvbm5lY3Rpb25FcnJvciA9IGZ1bmN0aW9uIGhhbmRsZUNvbm5lY3Rpb25FcnJvcihldmVudFR5cGUsIGV2ZW50LCB3YXRjaGVyKSB7CiAgdHJhY2UoJ2NyZWF0ZVdhdGNoZXInLCBldmVudFR5cGUsIGV2ZW50KTsKICBzZWxmLnBvc3RNZXNzYWdlKF9kZWZpbmVQcm9wZXJ0eSh7fSwgZXZlbnRUeXBlLCB7CiAgICB0eXBlOiBldmVudC50eXBlLAogICAgZGV0YWlsOiBldmVudC5kZXRhaWwsCiAgICBzcmNFbGVtZW50OiB7CiAgICAgIGRpc2Nvbm5lY3RlZEF0OiB3YXRjaGVyLmRpc2Nvbm5lY3RlZEF0LAogICAgICB1cmw6IHdhdGNoZXIudXJsCiAgICB9CiAgfSkpOwp9OwoKLyoqCiAqIFJlbW92ZSBhbnkgcGVuZGluZyBtZXNzYWdlcyByZWxhdGVkIHRvIHRoaXMgcmVzb3VyY2UgZnJvbSB0aGUgcXVldWUKICovCnZhciByZW1vdmVGcm9tV29ya2VyUXVldWUgPSBmdW5jdGlvbiByZW1vdmVGcm9tV29ya2VyUXVldWUod2F0Y2hLZXkpIHsKICBzdGF0ZS53b3JrZXJRdWV1ZSA9IHN0YXRlLndvcmtlclF1ZXVlLmZpbHRlcihmdW5jdGlvbiAod29ya2VyTWVzc2FnZSkgewogICAgdmFyIF9PYmplY3QkZW50cmllcyQgPSBfc2xpY2VkVG9BcnJheShPYmplY3QuZW50cmllcyh3b3JrZXJNZXNzYWdlKVswXSwgMiksCiAgICAgIG1zZyA9IF9PYmplY3QkZW50cmllcyRbMV07CiAgICB2YXIgd29ya2VyTWVzc2FnZVdhdGNoS2V5ID0gd2F0Y2hLZXlGcm9tTWVzc2FnZShtc2cpOwogICAgcmV0dXJuIHdhdGNoS2V5ICE9PSB3b3JrZXJNZXNzYWdlV2F0Y2hLZXk7CiAgfSk7Cn07CgovKioKICogVGhlc2UgYXJlIHRoaW5ncyB0aGF0IHdlIGRvIHdoZW4gd2UgZ2V0IGEgbWVzc2FnZSBmcm9tIHRoZSBVSSB0aHJlYWQKICovCnZhciB3b3JrZXJBY3Rpb25zID0gewogIC8vIFRvRG86IFNNIHdlJ2xsIG1ha2UgYSBnZW5lcmljIGxvYWRlciBmb3IgYWxsIHJlc291cmNlIHR5cGVzIHdoZW4gd2UgbmVlZCBpdCBidXQgaXQnbGwgYmUgcHJldHR5IHNpbWlsYXIgdG8gdGhpcwogIGxvYWRTY2hlbWFzOiBmdW5jdGlvbiBsb2FkU2NoZW1hcyhjb2xsZWN0aW9uKSB7CiAgICBpZiAoIWNhY2hlc1tTQ0hFTUFdKSB7CiAgICAgIGNhY2hlc1tTQ0hFTUFdID0gbmV3IFJlc291cmNlQ2FjaGUoU0NIRU1BKTsKICAgIH0KICAgIGNhY2hlc1tTQ0hFTUFdLmxvYWQoY29sbGVjdGlvbik7CiAgfSwKICBjcmVhdGVXYXRjaGVyOiBmdW5jdGlvbiBjcmVhdGVXYXRjaGVyKG9wdCkgewogICAgdHJhY2UoJ2NyZWF0ZVdhdGNoZXInLCBvcHQpOwogICAgdmFyIG1ldGFkYXRhID0gb3B0Lm1ldGFkYXRhLAogICAgICBtYXhUcmllcyA9IG9wdC5tYXhUcmllcywKICAgICAgdXJsID0gb3B0LnVybCwKICAgICAgY3NyZiA9IG9wdC5jc3JmOwogICAgaWYgKCFzdGF0ZS53YXRjaGVyKSB7CiAgICAgIHN0YXRlLndhdGNoZXIgPSBuZXcgUmVzb3VyY2VXYXRjaGVyKHVybCwgdHJ1ZSwgbnVsbCwgbnVsbCwgbWF4VHJpZXMsIGNzcmYpOwogICAgICBzdGF0ZS53YXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlRfTUVTU0FHRSwgZnVuY3Rpb24gKGUpIHsKICAgICAgICB2YXIgZXZlbnQgPSBlLmRldGFpbDsKICAgICAgICBpZiAoZXZlbnQuZGF0YSkgewogICAgICAgICAgdmFyIG1zZyA9IEpTT04ucGFyc2UoZXZlbnQuZGF0YSk7CiAgICAgICAgICBpZiAobXNnLm5hbWUpIHsKICAgICAgICAgICAgaWYgKHJlc291cmNlV2F0Y2hlckFjdGlvbnNbbXNnLm5hbWVdKSB7CiAgICAgICAgICAgICAgcmVzb3VyY2VXYXRjaGVyQWN0aW9uc1ttc2cubmFtZV0obXNnKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICByZXNvdXJjZVdhdGNoZXJBY3Rpb25zLmRpc3BhdGNoKG1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICBzdGF0ZS53YXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc3luYycsIGZ1bmN0aW9uIChlKSB7CiAgICAgICAgc2VsZi5wb3N0TWVzc2FnZSh7CiAgICAgICAgICByZWRpc3BhdGNoOiB7CiAgICAgICAgICAgIHJlc3luY1dhdGNoOiBlLmRldGFpbC5kYXRhCiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgICBzdGF0ZS53YXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlRfQ09OTkVDVF9FUlJPUiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBoYW5kbGVDb25uZWN0aW9uRXJyb3IoRVZFTlRfQ09OTkVDVF9FUlJPUiwgZSwgc3RhdGUud2F0Y2hlcik7CiAgICAgIH0pOwogICAgICBzdGF0ZS53YXRjaGVyLmFkZEV2ZW50TGlzdGVuZXIoRVZFTlRfRElTQ09OTkVDVF9FUlJPUiwgZnVuY3Rpb24gKGUpIHsKICAgICAgICBoYW5kbGVDb25uZWN0aW9uRXJyb3IoRVZFTlRfRElTQ09OTkVDVF9FUlJPUiwgZSwgc3RhdGUud2F0Y2hlcik7CiAgICAgIH0pOwogICAgICBzdGF0ZS53YXRjaGVyLnNldERlYnVnKHN0YXRlLmRlYnVnV29ya2VyKTsKICAgICAgc3RhdGUud2F0Y2hlci5jb25uZWN0KG1ldGFkYXRhKTsKCiAgICAgIC8vIEZsdXNoIHRoZSB3b3JrZXJRdWV1ZQogICAgICB3aGlsZSAoc3RhdGUud29ya2VyUXVldWUubGVuZ3RoID4gMCkgewogICAgICAgIHRyYWNlKCdjcmVhdGVXYXRjaGVyJywgJ2ZsdXNoaW5nIHdvcmtlclF1ZXVlJywgc3RhdGUud29ya2VyUXVldWUpOwogICAgICAgIHZhciB3b3JrZXJNZXNzYWdlID0gc3RhdGUud29ya2VyUXVldWUuc2hpZnQoKTsKICAgICAgICB2YXIgX09iamVjdCRlbnRyaWVzJDIgPSBfc2xpY2VkVG9BcnJheShPYmplY3QuZW50cmllcyh3b3JrZXJNZXNzYWdlKVswXSwgMiksCiAgICAgICAgICBhY3Rpb24gPSBfT2JqZWN0JGVudHJpZXMkMlswXSwKICAgICAgICAgIG1zZyA9IF9PYmplY3QkZW50cmllcyQyWzFdOwogICAgICAgIGlmICh3b3JrZXJBY3Rpb25zW2FjdGlvbl0pIHsKICAgICAgICAgIHdvcmtlckFjdGlvbnNbYWN0aW9uXShtc2cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBjb25zb2xlLndhcm4oJ25vIGFzc29jaWF0ZWQgYWN0aW9uIGZvcjonLCBhY3Rpb24pOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICAgICAgICB9CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiBmdW5jdGlvbiB3YXRjaChtc2cpIHsKICAgIHZhciBfc3RhdGUkd2F0Y2hlcjsKICAgIHRyYWNlKCd3YXRjaCcsIG1zZyk7CiAgICB2YXIgd2F0Y2hLZXkgPSB3YXRjaEtleUZyb21NZXNzYWdlKG1zZyk7CiAgICBpZiAobXNnLnN0b3ApIHsKICAgICAgd29ya2VyQWN0aW9ucy51bndhdGNoKHdhdGNoS2V5KTsKICAgICAgcmV0dXJuOwogICAgfQoKICAgIC8vIElmIHNvY2tldCBpcyBpbiBlcnJvciBkb24ndCB0cnkgdG8gd2F0Y2guLi4uIHVubGVzcyB3ZSBgZm9yY2VgIGl0CiAgICBpZiAoIW1zZy5mb3JjZSAmJiAhISgoX3N0YXRlJHdhdGNoZXIgPSBzdGF0ZS53YXRjaGVyKSAhPT0gbnVsbCAmJiBfc3RhdGUkd2F0Y2hlciAhPT0gdm9pZCAwICYmIChfc3RhdGUkd2F0Y2hlciA9IF9zdGF0ZSR3YXRjaGVyLndhdGNoZXNbd2F0Y2hLZXldKSAhPT0gbnVsbCAmJiBfc3RhdGUkd2F0Y2hlciAhPT0gdm9pZCAwICYmIF9zdGF0ZSR3YXRjaGVyLmVycm9yKSkgewogICAgICByZXR1cm47CiAgICB9CiAgICBpZiAoIXN0YXRlLndhdGNoZXIpIHsKICAgICAgc3RhdGUud29ya2VyUXVldWUucHVzaCh7CiAgICAgICAgd2F0Y2g6IG1zZwogICAgICB9KTsKICAgICAgcmV0dXJuOwogICAgfQogICAgdmFyIHJlc291cmNlVHlwZSA9IG1zZy5yZXNvdXJjZVR5cGUsCiAgICAgIG5hbWVzcGFjZSA9IG1zZy5uYW1lc3BhY2UsCiAgICAgIGlkID0gbXNnLmlkLAogICAgICBzZWxlY3RvciA9IG1zZy5zZWxlY3RvciwKICAgICAgcmVzb3VyY2VWZXJzaW9uID0gbXNnLnJlc291cmNlVmVyc2lvbjsKICAgIHZhciByZXNvdXJjZVZlcnNpb25UaW1lID0gcmVzb3VyY2VWZXJzaW9uID8gRGF0ZS5ub3coKSA6IHVuZGVmaW5lZDsKICAgIHZhciBza2lwUmVzb3VyY2VWZXJzaW9uID0gW1NDSEVNQSwgQ09VTlRdLmluY2x1ZGVzKHJlc291cmNlVHlwZSk7CiAgICB2YXIgd2F0Y2hPYmplY3QgPSB7CiAgICAgIHJlc291cmNlVHlwZTogcmVzb3VyY2VUeXBlLAogICAgICBpZDogaWQsCiAgICAgIG5hbWVzcGFjZTogbmFtZXNwYWNlLAogICAgICBzZWxlY3Rvcjogc2VsZWN0b3IsCiAgICAgIGZvcmNlOiBtc2cuZm9yY2UKICAgIH07CiAgICBzdGF0ZS53YXRjaGVyLndhdGNoKHdhdGNoS2V5LCByZXNvdXJjZVZlcnNpb24sIHJlc291cmNlVmVyc2lvblRpbWUsIHdhdGNoT2JqZWN0LCBza2lwUmVzb3VyY2VWZXJzaW9uKTsKICB9LAogIHVud2F0Y2g6IGZ1bmN0aW9uIHVud2F0Y2god2F0Y2hLZXkpIHsKICAgIHRyYWNlKCd1bndhdGNoJywgd2F0Y2hLZXkpOwogICAgcmVtb3ZlRnJvbVdvcmtlclF1ZXVlKHdhdGNoS2V5KTsKICAgIGlmICghc3RhdGUud2F0Y2hlcikgewogICAgICByZXR1cm47CiAgICB9CiAgICBzdGF0ZS53YXRjaGVyLnVud2F0Y2god2F0Y2hLZXkpOwogIH0sCiAgaW5pdFdvcmtlcjogZnVuY3Rpb24gaW5pdFdvcmtlcihfcmVmKSB7CiAgICB2YXIgc3RvcmVOYW1lID0gX3JlZi5zdG9yZU5hbWU7CiAgICB0cmFjZSgnaW5pdFdvcmtlcicsIHN0b3JlTmFtZSk7CiAgICBzdGF0ZS5zdG9yZSA9IHN0b3JlTmFtZTsKICB9LAogIGRlc3Ryb3lXb3JrZXI6IGZ1bmN0aW9uIGRlc3Ryb3lXb3JrZXIoKSB7CiAgICB0cmFjZSgnZGVzdHJveVdvcmtlcicpOwogICAgY2xlYXJJbnRlcnZhbChtYWludGVuYW5jZUludGVydmFsKTsKICAgIGZ1bmN0aW9uIGRlc3Ryb3lXb3JrZXJDb21wbGV0ZSgpIHsKICAgICAgZGVsZXRlIHNlbGYub25tZXNzYWdlOwogICAgICBzZWxmLnBvc3RNZXNzYWdlKHsKICAgICAgICBkZXN0cm95V29ya2VyOiB0cnVlCiAgICAgIH0pOyAvLyB3ZSdyZSBvbmx5IHBhc3NpbmcgdGhlIGJvb2xlYW4gaGVyZSBiZWNhdXNlIHRoZSBrZXkgbmVlZHMgdG8gYmUgc29tZXRoaW5nIHRydXRoeSB0byBlbnN1cmUgaXQncyBwYXNzZWQgb24gdGhlIG9iamVjdC4KICAgIH0KCiAgICAvLyBkaXNjb25uZWN0IHRha2VzIGEgY2FsbGJhY2sgd2hpY2ggd2UnbGwgdXNlIHRvIGNsb3NlIHRoZSB3ZWJ3b3JrZXIKICAgIGlmIChzdGF0ZS53YXRjaGVyKSB7CiAgICAgIHZhciBfc3RhdGUkd2F0Y2hlcjI7CiAgICAgIChfc3RhdGUkd2F0Y2hlcjIgPSBzdGF0ZS53YXRjaGVyKSA9PT0gbnVsbCB8fCBfc3RhdGUkd2F0Y2hlcjIgPT09IHZvaWQgMCB8fCBfc3RhdGUkd2F0Y2hlcjIuZGlzY29ubmVjdCgpLnRoZW4oZGVzdHJveVdvcmtlckNvbXBsZXRlKTsKICAgIH0gZWxzZSB7CiAgICAgIGRlc3Ryb3lXb3JrZXJDb21wbGV0ZSgpOwogICAgfQogIH0sCiAgdG9nZ2xlRGVidWc6IGZ1bmN0aW9uIHRvZ2dsZURlYnVnKF9yZWYyKSB7CiAgICB2YXIgb24gPSBfcmVmMi5vbjsKICAgIHN0YXRlLmRlYnVnV29ya2VyID0gISFvbjsKICAgIHN0YXRlLndhdGNoZXIuc2V0RGVidWcoISFvbik7CiAgfSwKICB1cGRhdGVCYXRjaDogZnVuY3Rpb24gdXBkYXRlQmF0Y2godHlwZSwgaWQsIGNoYW5nZSkgewogICAgaWYgKCFzdGF0ZS5iYXRjaENoYW5nZXNbdHlwZV0pIHsKICAgICAgc3RhdGUuYmF0Y2hDaGFuZ2VzW3R5cGVdID0ge307CiAgICB9CiAgICBzdGF0ZS5iYXRjaENoYW5nZXNbdHlwZV1baWRdID0gY2hhbmdlOwogIH0KfTsKCi8qKgogKiBUaGVzZSBhcmUgdGhpbmdzIHRoYXQgd2UgZG8gd2hlbiB3ZSBnZXQgYSBtZXNzYWdlIGZyb20gdGhlIHJlc291cmNlV2F0Y2hlcgogKi8KdmFyIHJlc291cmNlV2F0Y2hlckFjdGlvbnMgPSB7CiAgJ3Jlc291cmNlLmNoYW5nZSc6IGZ1bmN0aW9uIHJlc291cmNlQ2hhbmdlKG1zZykgewogICAgdmFyIF9tYWtlUmVzb3VyY2VQcm9wcyA9IG1ha2VSZXNvdXJjZVByb3BzKG1zZyksCiAgICAgIHR5cGUgPSBfbWFrZVJlc291cmNlUHJvcHMudHlwZSwKICAgICAgaWQgPSBfbWFrZVJlc291cmNlUHJvcHMuaWQsCiAgICAgIGRhdGEgPSBfbWFrZVJlc291cmNlUHJvcHMuZGF0YTsKICAgIGlmIChjYWNoZXNbdHlwZV0pIHsKICAgICAgY2FjaGVzW3R5cGVdLmNoYW5nZShkYXRhLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHdvcmtlckFjdGlvbnMudXBkYXRlQmF0Y2godHlwZSwgaWQsIGRhdGEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHdvcmtlckFjdGlvbnMudXBkYXRlQmF0Y2godHlwZSwgaWQsIGRhdGEpOwogICAgfQogIH0sCiAgLy8gVG9EbzogU00gY3JlYXRlIGlzIGZ1bmN0aW9uYWxseSBpZGVudGljYWwgdG8gY2hhbmdlIGluIHRoZSBjYWNoZSBidXQgdGhlIHdvcmtlciBpc24ndCBzdXBwb3NlZCB0byBrbm93IHRoYXQgaGVuY2UgdGhlIG5lYXItZHVwbGljYXRlIGNvZGUKICAncmVzb3VyY2UuY3JlYXRlJzogZnVuY3Rpb24gcmVzb3VyY2VDcmVhdGUobXNnKSB7CiAgICB2YXIgX21ha2VSZXNvdXJjZVByb3BzMiA9IG1ha2VSZXNvdXJjZVByb3BzKG1zZyksCiAgICAgIHR5cGUgPSBfbWFrZVJlc291cmNlUHJvcHMyLnR5cGUsCiAgICAgIGlkID0gX21ha2VSZXNvdXJjZVByb3BzMi5pZCwKICAgICAgZGF0YSA9IF9tYWtlUmVzb3VyY2VQcm9wczIuZGF0YTsKICAgIGlmIChjYWNoZXNbdHlwZV0pIHsKICAgICAgY2FjaGVzW3R5cGVdLmNyZWF0ZShkYXRhLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgcmV0dXJuIHdvcmtlckFjdGlvbnMudXBkYXRlQmF0Y2godHlwZSwgaWQsIGRhdGEpOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHdvcmtlckFjdGlvbnMudXBkYXRlQmF0Y2godHlwZSwgaWQsIGRhdGEpOwogICAgfQogIH0sCiAgJ3Jlc291cmNlLnN0YXJ0JzogZnVuY3Rpb24gcmVzb3VyY2VTdGFydChtc2cpIHsKICAgIC8vIFN0YXRlIGlzIGhhbmRsZWQgaW4gdGhlIHJlc291cmNlV2F0Y2hlciwgbm8gbmVlZCB0byBidWJibGUgb3V0IHRvIFVJIHRocmVhZAogIH0sCiAgJ3Jlc291cmNlLnJlbW92ZSc6IGZ1bmN0aW9uIHJlc291cmNlUmVtb3ZlKG1zZykgewogICAgdmFyIF9tYWtlUmVzb3VyY2VQcm9wczMgPSBtYWtlUmVzb3VyY2VQcm9wcyhtc2cpLAogICAgICB0eXBlID0gX21ha2VSZXNvdXJjZVByb3BzMy50eXBlLAogICAgICBpZCA9IF9tYWtlUmVzb3VyY2VQcm9wczMuaWQ7CiAgICBpZiAoY2FjaGVzW3R5cGVdKSB7CiAgICAgIGNhY2hlc1t0eXBlXS5yZW1vdmUoaWQsIGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gd29ya2VyQWN0aW9ucy51cGRhdGVCYXRjaCh0eXBlLCBpZCwge30pOwogICAgICB9KTsKICAgIH0gZWxzZSB7CiAgICAgIHdvcmtlckFjdGlvbnMudXBkYXRlQmF0Y2godHlwZSwgaWQsIHt9KTsKICAgIH0KICB9LAogICdyZXNvdXJjZS5zdG9wJzogZnVuY3Rpb24gcmVzb3VyY2VTdG9wKG1zZykgewogICAgdmFyIF9zdGF0ZSR3YXRjaGVyMzsKICAgIHRyYWNlKCdyZXNvdXJjZS5zdG9wJywgbXNnKTsKCiAgICAvLyBTdGF0ZSBpcyBoYW5kbGVkIGluIHRoZSByZXNvdXJjZVdhdGNoZXIuLi4uCiAgICB2YXIgd2F0Y2hLZXkgPSB3YXRjaEtleUZyb21NZXNzYWdlKG1zZyk7CiAgICByZW1vdmVGcm9tV29ya2VyUXVldWUod2F0Y2hLZXkpOwoKICAgIC8vIC4uLiBob3dldmVyIHdlIHN0aWxsIHdhbnQgdG8gYnViYmxlIG91dCB0byBVSSB0aHJlYWQKICAgIC8vIFdlJ2xsIHNhdmUgc29tZSBoYXNzbGUgYW5kIGlnbm9yZSBhbnkgcmVzb3VyY2Uuc3RvcCBidWJibGUgaWYgd2UncmUgaW4gZXJyb3IuIHRoZSBvbmx5IHRoaW5nIHRoYXQgd2lsbCBjbGVhciB0aGF0IGlzIGEgcmVzeW5jCiAgICBpZiAoISgoX3N0YXRlJHdhdGNoZXIzID0gc3RhdGUud2F0Y2hlcikgIT09IG51bGwgJiYgX3N0YXRlJHdhdGNoZXIzICE9PSB2b2lkIDAgJiYgKF9zdGF0ZSR3YXRjaGVyMyA9IF9zdGF0ZSR3YXRjaGVyMy53YXRjaGVzW3dhdGNoS2V5XSkgIT09IG51bGwgJiYgX3N0YXRlJHdhdGNoZXIzICE9PSB2b2lkIDAgJiYgX3N0YXRlJHdhdGNoZXIzLmVycm9yKSkgewogICAgICAvLyBTZWUgY29tbWVudCBpbiByZXNvdXJjZVdhdGNoZXIgJ3Jlc291cmNlLnN0b3AnIGhhbmRsZXIsIHVudGlsIHdlIGNhbiByZXNvbHZlIHRoZSByZXNvdXJjZVZlcnNpb24gd2l0aGluIHRoZSByZXNvdXJjZVdhdGNoZXIKICAgICAgLy8gaW50ZXJuYWxseSwgd2UnbGwgd2FudCB0byBidWJibGUgdGhpcyBvdXQgdG8gdGhlIFVJIHRocmVhZC4gV2hlbiB0aGF0J3MgcmVzb2x2ZWQgdGhpcyB3b24ndCBiZSBuZWVkZWQKICAgICAgcmVzb3VyY2VXYXRjaGVyQWN0aW9ucy5kaXNwYXRjaChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIG1zZyksIHt9LCB7CiAgICAgICAgYWR2YW5jZWRXb3JrZXI6IHRydWUKICAgICAgfSkpOwogICAgfQogIH0sCiAgJ3Jlc291cmNlLmVycm9yJzogZnVuY3Rpb24gcmVzb3VyY2VFcnJvcihtc2cpIHsKICAgIC8vIFN0YXRlIGlzIGhhbmRsZWQgaW4gdGhlIHJlc291cmNlV2F0Y2hlciwgbm8gbmVlZCB0byBidWJibGUgb3V0IHRvIFVJIHRocmVhZAogICAgY29uc29sZS53YXJuKCJSZXNvdXJjZSBlcnJvciBbIi5jb25jYXQoc3RhdGUuc3RvcmUsICJdIiksIG1zZy5yZXNvdXJjZVR5cGUsICc6JywgbXNnLmRhdGEuZXJyb3IpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKICB9LAogIGRpc3BhdGNoOiBmdW5jdGlvbiBkaXNwYXRjaChtc2cpIHsKICAgIHNlbGYucG9zdE1lc3NhZ2UoewogICAgICBkaXNwYXRjaDogbXNnCiAgICB9KTsKICB9Cn07CgovKioKICogQ292ZXJzIG1lc3NhZ2UgZnJvbSBVSSBUaHJlYWQgdG8gV29ya2VyCiAqLwpzZWxmLm9ubWVzc2FnZSA9IGZ1bmN0aW9uIChlKSB7CiAgLyogb24gdGhlIG9mZiBjaGFuY2UgdGhlcmUncyBtb3JlIHRoYW4ga2V5IGluIHRoZSBtZXNzYWdlLCB3ZSBoYW5kbGUgdGhlbSBpbiB0aGUgb3JkZXIgdGhhdCB0aGV5ICJrZXlzIiBtZXRob2QgcHJvdmlkZXMgd2hpY2ggaXMKICAvLyBnb29kIGVub3VnaCBmb3Igbm93IGNvbnNpZGVyaW5nIHRoYXQgd2UgbmV2ZXIgc2VuZCBtb3JlIHRoYW4gb25lIG1lc3NhZ2UgYWN0aW9uIGF0IGEgdGltZSByaWdodCBub3cgKi8KICB2YXIgbWVzc2FnZUFjdGlvbnMgPSBPYmplY3Qua2V5cyhlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUuZGF0YSk7CiAgbWVzc2FnZUFjdGlvbnMuZm9yRWFjaChmdW5jdGlvbiAoYWN0aW9uKSB7CiAgICBpZiAod29ya2VyQWN0aW9uc1thY3Rpb25dKSB7CiAgICAgIHdvcmtlckFjdGlvbnNbYWN0aW9uXShlID09PSBudWxsIHx8IGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IGUuZGF0YVthY3Rpb25dKTsKICAgIH0gZWxzZSB7CiAgICAgIGNvbnNvbGUud2Fybignbm8gYXNzb2NpYXRlZCBhY3Rpb24gZm9yOicsIGFjdGlvbik7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgfQogIH0pOwp9OyAvLyBiaW5kIGV2ZXJ5dGhpbmcgdG8gdGhlIHdvcmtlcidzIG9ubWVzc2FnZSBoYW5kbGVyIHZpYSB0aGUgd29ya2VyQWN0aW9ucw=="},{"version":3,"names":["SCHEMA","COUNT","ResourceWatcher","watchKeyFromMessage","ResourceCache","EVENT_MESSAGE","EVENT_CONNECT_ERROR","EVENT_DISCONNECT_ERROR","normalizeType","keyFieldFor","addSchemaIndexFields","caches","state","watcher","undefined","store","workerQueue","batchChanges","debugWorker","trace","_console","_len","arguments","length","args","Array","_key","console","info","apply","concat","maintenanceInterval","setInterval","Object","keys","self","postMessage","makeResourceProps","msg","resourceType","type","data","rawType","normalizedType","keyField","id","handleConnectionError","eventType","event","_defineProperty","detail","srcElement","disconnectedAt","url","removeFromWorkerQueue","watchKey","filter","workerMessage","_Object$entries$","_slicedToArray","entries","workerMessageWatchKey","workerActions","loadSchemas","collection","load","createWatcher","opt","metadata","maxTries","csrf","addEventListener","e","JSON","parse","name","resourceWatcherActions","dispatch","redispatch","resyncWatch","setDebug","connect","shift","_Object$entries$2","action","warn","watch","_state$watcher","stop","unwatch","force","watches","error","push","namespace","selector","resourceVersion","resourceVersionTime","Date","now","skipResourceVersion","includes","watchObject","initWorker","_ref","storeName","destroyWorker","clearInterval","destroyWorkerComplete","onmessage","_state$watcher2","disconnect","then","toggleDebug","_ref2","on","updateBatch","change","resourceChange","_makeResourceProps","resourceCreate","_makeResourceProps2","create","resourceStart","resourceRemove","_makeResourceProps3","remove","resourceStop","_state$watcher3","_objectSpread","advancedWorker","resourceError","messageActions","forEach"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/plugins/steve/worker/web-worker.advanced.js"],"sourcesContent":["/**\n * Advanced Worker is enabled by performance setting\n * relocates cluster resource sockets off the UI thread and into a webworker\n */\n\nimport { SCHEMA, COUNT } from '@shell/config/types';\nimport ResourceWatcher, { watchKeyFromMessage } from '@shell/plugins/steve/resourceWatcher';\nimport ResourceCache from '@shell/plugins/steve/caches/resourceCache';\nimport { EVENT_MESSAGE, EVENT_CONNECT_ERROR, EVENT_DISCONNECT_ERROR } from '@shell/utils/socket';\nimport { normalizeType, keyFieldFor } from '@shell/plugins/dashboard-store/normalize';\nimport { addSchemaIndexFields } from '@shell/plugins/steve/schema.utils';\n\nconst caches = {};\n\nconst state = {\n  watcher:      undefined,\n  store:        '', // Store name\n  /**\n   * Store `watch`/`unwatch` events to process when the socket is created\n   */\n  workerQueue:  [],\n  batchChanges: {},\n  debugWorker:  false\n};\n\nconst trace = (...args) => {\n  state.debugWorker && console.info('Advanced Worker:', ...args); // eslint-disable-line no-console\n};\n\ntrace('created');\n\nconst maintenanceInterval = setInterval(() => {\n  if (Object.keys(state.batchChanges).length) {\n    self.postMessage({ batchChanges: state.batchChanges });\n    state.batchChanges = {};\n  }\n}, 5000); // 5 seconds\n\nconst makeResourceProps = (msg) => {\n  const { resourceType, data: { type }, data } = msg;\n  const rawType = resourceType || type;\n  const normalizedType = normalizeType(rawType === 'counts' ? COUNT : rawType);\n  const keyField = keyFieldFor(normalizedType);\n\n  if ( normalizedType === SCHEMA ) {\n    addSchemaIndexFields(data);\n  }\n\n  return {\n    type: normalizedType,\n    id:   data[keyField],\n    data\n  };\n};\n\n/**\n * Pass the EVENT_CONNECT_ERROR / EVENT_DISCONNECT_ERROR back to the UI thread\n */\nconst handleConnectionError = (eventType, event, watcher) => {\n  trace('createWatcher', eventType, event);\n  self.postMessage({\n    [eventType]: {\n      type:       event.type,\n      detail:     event.detail,\n      srcElement: {\n        disconnectedAt: watcher.disconnectedAt,\n        url:            watcher.url,\n      }\n    }\n  });\n};\n\n/**\n * Remove any pending messages related to this resource from the queue\n */\nconst removeFromWorkerQueue = (watchKey) => {\n  state.workerQueue = state.workerQueue.filter((workerMessage) => {\n    const [, msg] = Object.entries(workerMessage)[0];\n    const workerMessageWatchKey = watchKeyFromMessage(msg);\n\n    return watchKey !== workerMessageWatchKey;\n  });\n};\n\n/**\n * These are things that we do when we get a message from the UI thread\n */\nconst workerActions = {\n  // ToDo: SM we'll make a generic loader for all resource types when we need it but it'll be pretty similar to this\n  loadSchemas: (collection) => {\n    if (!caches[SCHEMA]) {\n      caches[SCHEMA] = new ResourceCache(SCHEMA);\n    }\n    caches[SCHEMA].load(collection);\n  },\n  createWatcher: (opt) => {\n    trace('createWatcher', opt);\n\n    const {\n      metadata, maxTries, url, csrf\n    } = opt;\n\n    if (!state.watcher) {\n      state.watcher = new ResourceWatcher(url, true, null, null, maxTries, csrf);\n\n      state.watcher.addEventListener(EVENT_MESSAGE, (e) => {\n        const event = e.detail;\n\n        if (event.data) {\n          const msg = JSON.parse(event.data);\n\n          if (msg.name) {\n            if (resourceWatcherActions[msg.name]) {\n              resourceWatcherActions[msg.name](msg);\n            } else {\n              resourceWatcherActions.dispatch(msg);\n            }\n          }\n        }\n      });\n\n      state.watcher.addEventListener('resync', (e) => {\n        self.postMessage({ redispatch: { resyncWatch: e.detail.data } });\n      });\n\n      state.watcher.addEventListener(EVENT_CONNECT_ERROR, (e) => {\n        handleConnectionError(EVENT_CONNECT_ERROR, e, state.watcher);\n      });\n\n      state.watcher.addEventListener(EVENT_DISCONNECT_ERROR, (e) => {\n        handleConnectionError(EVENT_DISCONNECT_ERROR, e, state.watcher);\n      });\n\n      state.watcher.setDebug(state.debugWorker);\n\n      state.watcher.connect(metadata);\n\n      // Flush the workerQueue\n      while (state.workerQueue.length > 0) {\n        trace('createWatcher', 'flushing workerQueue', state.workerQueue);\n\n        const workerMessage = state.workerQueue.shift();\n        const [action, msg] = Object.entries(workerMessage)[0];\n\n        if (workerActions[action]) {\n          workerActions[action](msg);\n        } else {\n          console.warn('no associated action for:', action); // eslint-disable-line no-console\n        }\n      }\n    }\n  },\n  watch: (msg) => {\n    trace('watch', msg);\n\n    const watchKey = watchKeyFromMessage(msg);\n\n    if (msg.stop) {\n      workerActions.unwatch(watchKey);\n\n      return;\n    }\n\n    // If socket is in error don't try to watch.... unless we `force` it\n    if (!msg.force && !!state.watcher?.watches[watchKey]?.error) {\n      return;\n    }\n\n    if (!state.watcher) {\n      state.workerQueue.push({ watch: msg });\n\n      return;\n    }\n\n    const {\n      resourceType,\n      namespace,\n      id,\n      selector,\n      resourceVersion\n    } = msg;\n\n    const resourceVersionTime = resourceVersion ? Date.now() : undefined;\n    const skipResourceVersion = [SCHEMA, COUNT].includes(resourceType);\n\n    const watchObject = {\n      resourceType,\n      id,\n      namespace,\n      selector,\n      force: msg.force,\n    };\n\n    state.watcher.watch(watchKey, resourceVersion, resourceVersionTime, watchObject, skipResourceVersion);\n  },\n  unwatch: (watchKey) => {\n    trace('unwatch', watchKey);\n\n    removeFromWorkerQueue(watchKey);\n\n    if (!state.watcher) {\n      return;\n    }\n\n    state.watcher.unwatch(watchKey);\n  },\n  initWorker: ({ storeName }) => {\n    trace('initWorker', storeName);\n\n    state.store = storeName;\n  },\n  destroyWorker: () => {\n    trace('destroyWorker');\n\n    clearInterval(maintenanceInterval);\n\n    function destroyWorkerComplete() {\n      delete self.onmessage;\n      self.postMessage({ destroyWorker: true }); // we're only passing the boolean here because the key needs to be something truthy to ensure it's passed on the object.\n    }\n\n    // disconnect takes a callback which we'll use to close the webworker\n    if (state.watcher) {\n      state.watcher?.disconnect().then(destroyWorkerComplete);\n    } else {\n      destroyWorkerComplete();\n    }\n  },\n\n  toggleDebug: ({ on }) => {\n    state.debugWorker = !!on;\n    state.watcher.setDebug(!!on);\n  },\n  updateBatch(type, id, change) {\n    if (!state.batchChanges[type]) {\n      state.batchChanges[type] = {};\n    }\n    state.batchChanges[type][id] = change;\n  }\n};\n\n/**\n * These are things that we do when we get a message from the resourceWatcher\n */\nconst resourceWatcherActions = {\n  'resource.change': (msg) => {\n    const { type, id, data } = makeResourceProps(msg);\n\n    if (caches[type]) {\n      caches[type].change(data, () => workerActions.updateBatch(type, id, data));\n    } else {\n      workerActions.updateBatch(type, id, data);\n    }\n  },\n  // ToDo: SM create is functionally identical to change in the cache but the worker isn't supposed to know that hence the near-duplicate code\n  'resource.create': (msg) => {\n    const { type, id, data } = makeResourceProps(msg);\n\n    if (caches[type]) {\n      caches[type].create(data, () => workerActions.updateBatch(type, id, data));\n    } else {\n      workerActions.updateBatch(type, id, data);\n    }\n  },\n  'resource.start': (msg) => {\n    // State is handled in the resourceWatcher, no need to bubble out to UI thread\n  },\n  'resource.remove': (msg) => {\n    const { type, id } = makeResourceProps(msg);\n\n    if (caches[type]) {\n      caches[type].remove(id, () => workerActions.updateBatch(type, id, {}));\n    } else {\n      workerActions.updateBatch(type, id, {});\n    }\n  },\n  'resource.stop': (msg) => {\n    trace('resource.stop', msg);\n\n    // State is handled in the resourceWatcher....\n    const watchKey = watchKeyFromMessage(msg);\n\n    removeFromWorkerQueue(watchKey);\n\n    // ... however we still want to bubble out to UI thread\n    // We'll save some hassle and ignore any resource.stop bubble if we're in error. the only thing that will clear that is a resync\n    if (!state.watcher?.watches[watchKey]?.error) {\n      // See comment in resourceWatcher 'resource.stop' handler, until we can resolve the resourceVersion within the resourceWatcher\n      // internally, we'll want to bubble this out to the UI thread. When that's resolved this won't be needed\n      resourceWatcherActions.dispatch({\n        ...msg,\n        advancedWorker: true,\n      });\n    }\n  },\n  'resource.error': (msg) => {\n    // State is handled in the resourceWatcher, no need to bubble out to UI thread\n    console.warn(`Resource error [${ state.store }]`, msg.resourceType, ':', msg.data.error); // eslint-disable-line no-console\n  },\n  dispatch: (msg) => {\n    self.postMessage({ dispatch: msg });\n  }\n};\n\n/**\n * Covers message from UI Thread to Worker\n */\nself.onmessage = (e) => {\n  /* on the off chance there's more than key in the message, we handle them in the order that they \"keys\" method provides which is\n  // good enough for now considering that we never send more than one message action at a time right now */\n  const messageActions = Object.keys(e?.data);\n\n  messageActions.forEach((action) => {\n    if (workerActions[action]) {\n      workerActions[action](e?.data[action]);\n    } else {\n      console.warn('no associated action for:', action); // eslint-disable-line no-console\n    }\n  });\n}; // bind everything to the worker's onmessage handler via the workerActions\n"],"mappings":"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"}]}