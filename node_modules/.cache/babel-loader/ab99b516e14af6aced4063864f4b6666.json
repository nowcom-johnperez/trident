{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/index.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/index.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfdG9Db25zdW1hYmxlQXJyYXkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdG9Db25zdW1hYmxlQXJyYXkiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcucmVwbGFjZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmluY2x1ZGVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgQnV0dG9uRHJvcGRvd24gZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvQnV0dG9uRHJvcGRvd24nOwppbXBvcnQgTW91bnQgZnJvbSAnQHNoZWxsL2VkaXQvd29ya2xvYWQvc3RvcmFnZS9Nb3VudCc7CmltcG9ydCB7IF9WSUVXIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9xdWVyeS1wYXJhbXMnOwppbXBvcnQgQ29kZU1pcnJvciBmcm9tICdAc2hlbGwvY29tcG9uZW50cy9Db2RlTWlycm9yJzsKaW1wb3J0IGpzeWFtbCBmcm9tICdqcy15YW1sJzsKaW1wb3J0IEFycmF5TGlzdEdyb3VwZWQgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9BcnJheUxpc3RHcm91cGVkJzsKaW1wb3J0IHsgcmFuZG9tU3RyIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnU3RvcmFnZScsCiAgY29tcG9uZW50czogewogICAgQXJyYXlMaXN0R3JvdXBlZDogQXJyYXlMaXN0R3JvdXBlZCwKICAgIEJ1dHRvbkRyb3Bkb3duOiBCdXR0b25Ecm9wZG93biwKICAgIE1vdW50OiBNb3VudCwKICAgIENvZGVNaXJyb3I6IENvZGVNaXJyb3IKICB9LAogIHByb3BzOiB7CiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJ2NyZWF0ZScKICAgIH0sCiAgICAvLyBwb2Qgc3BlYwogICAgdmFsdWU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4ge307CiAgICAgIH0KICAgIH0sCiAgICBuYW1lc3BhY2U6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiBudWxsCiAgICB9LAogICAgc2F2ZVB2Y0hvb2tOYW1lOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICAvLyBuYW1lc3BhY2VkIGNvbmZpZ21hcHMgYW5kIHNlY3JldHMKICAgIGNvbmZpZ01hcHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIHNlY3JldHM6IHsKICAgICAgdHlwZTogQXJyYXksCiAgICAgIGRlZmF1bHQ6IGZ1bmN0aW9uIF9kZWZhdWx0KCkgewogICAgICAgIHJldHVybiBbXTsKICAgICAgfQogICAgfSwKICAgIG5hbWVzcGFjZWRQdmNzOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHsKICAgICAgICByZXR1cm4gW107CiAgICAgIH0KICAgIH0sCiAgICByZWdpc3RlckJlZm9yZUhvb2s6IHsKICAgICAgdHlwZTogRnVuY3Rpb24sCiAgICAgIGRlZmF1bHQ6IG51bGwKICAgIH0sCiAgICBsb2FkaW5nOiB7CiAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICB0eXBlOiBCb29sZWFuCiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgdGhpcy5pbml0aWFsaXplU3RvcmFnZSgpOwogICAgcmV0dXJuIHt9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGlzVmlldzogZnVuY3Rpb24gaXNWaWV3KCkgewogICAgICByZXR1cm4gdGhpcy5tb2RlID09PSBfVklFVzsKICAgIH0sCiAgICAvKioKICAgICAqIEdlbmVyYXRlZCBsaXN0IG9mIHZvbHVtZXMKICAgICAqLwogICAgdm9sdW1lVHlwZU9wdGlvbnM6IGZ1bmN0aW9uIHZvbHVtZVR5cGVPcHRpb25zKCkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwogICAgICB2YXIgZXhjbHVkZWRGaWxlcyA9IFsnaW5kZXgnLCAnTW91bnQnLCAnUFZDJywgJ0NvbnRhaW5lck1vdW50UGF0aHMnXTsKICAgICAgdmFyIGRlZmF1bHRWb2x1bWVUeXBlcyA9IFsnY3NpJywgJ2NvbmZpZ01hcCcsICdjcmVhdGVQVkMnLCAncGVyc2lzdGVudFZvbHVtZUNsYWltJ107CiAgICAgIC8vIEdldCBhbGwgdGhlIGN1c3RvbSB2b2x1bWUgdHlwZXMgZnJvbSB0aGUgZmlsZSBuYW1lcyBvZiB0aGlzIGZvbGRlcgogICAgICB2YXIgY3VzdG9tVm9sdW1lVHlwZXMgPSByZXF1aXJlLmNvbnRleHQoJ0BzaGVsbC9lZGl0L3dvcmtsb2FkL3N0b3JhZ2UnLCBmYWxzZSwgL14uKlwudnVlJC8pLmtleXMoKS5tYXAoZnVuY3Rpb24gKHBhdGgpIHsKICAgICAgICByZXR1cm4gcGF0aC5yZXBsYWNlKC8oXC5cLyl8KC52dWUpL2csICcnKTsKICAgICAgfSkuZmlsdGVyKGZ1bmN0aW9uIChmaWxlKSB7CiAgICAgICAgcmV0dXJuICFleGNsdWRlZEZpbGVzLmluY2x1ZGVzKGZpbGUpOwogICAgICB9KTsKICAgICAgcmV0dXJuIFtdLmNvbmNhdChfdG9Db25zdW1hYmxlQXJyYXkoY3VzdG9tVm9sdW1lVHlwZXMpLCBkZWZhdWx0Vm9sdW1lVHlwZXMpLnNvcnQoKS5tYXAoZnVuY3Rpb24gKHZvbHVtZVR5cGUpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgbGFiZWw6IF90aGlzLnQoIndvcmtsb2FkLnN0b3JhZ2Uuc3VidHlwZXMuIi5jb25jYXQodm9sdW1lVHlwZSkpLAogICAgICAgICAgYWN0aW9uOiBfdGhpcy5hZGRWb2x1bWUsCiAgICAgICAgICB2YWx1ZTogdm9sdW1lVHlwZQogICAgICAgIH07CiAgICAgIH0pOwogICAgfSwKICAgIHB2Y05hbWVzOiBmdW5jdGlvbiBwdmNOYW1lcygpIHsKICAgICAgcmV0dXJuIHRoaXMubmFtZXNwYWNlZFB2Y3MubWFwKGZ1bmN0aW9uIChwdmMpIHsKICAgICAgICByZXR1cm4gcHZjLm1ldGFkYXRhLm5hbWU7CiAgICAgIH0pOwogICAgfQogIH0sCiAgLy8gd2F0Y2g6IHsKICAvLyAgIHN0b3JhZ2VWb2x1bWVzKG5ldSwgb2xkKSB7CiAgLy8gICAgIHJlbW92ZU9iamVjdHModGhpcy52YWx1ZS52b2x1bWVzLCBvbGQpOwogIC8vICAgICBhZGRPYmplY3RzKHRoaXMudmFsdWUudm9sdW1lcywgbmV1KTsKICAvLyAgICAgY29uc3QgbmFtZXMgPSBuZXUucmVkdWNlKChhbGwsIGVhY2gpID0+IHsKICAvLyAgICAgICBhbGwucHVzaChlYWNoLm5hbWUpOwoKICAvLyAgICAgICByZXR1cm4gYWxsOwogIC8vICAgICB9LCBbXSk7CgogIC8vICAgICB0aGlzLmNvbnRhaW5lci52b2x1bWVNb3VudHMgPSB0aGlzLmNvbnRhaW5lci52b2x1bWVNb3VudHMuZmlsdGVyKG1vdW50ID0+IG5hbWVzLmluY2x1ZGVzKG1vdW50Lm5hbWUpKTsKICAvLyAgIH0KICAvLyB9LAoKICBtZXRob2RzOiB7CiAgICAvKioKICAgICAqIEluaXRpYWxpemUgbWlzc2luZyB2YWx1ZXMgZm9yIHRoZSBjb250YWluZXIKICAgICAqLwogICAgaW5pdGlhbGl6ZVN0b3JhZ2U6IGZ1bmN0aW9uIGluaXRpYWxpemVTdG9yYWdlKCkgewogICAgICBpZiAoIXRoaXMudmFsdWUudm9sdW1lcykgewogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAndm9sdW1lcycsIFtdKTsKICAgICAgfQogICAgfSwKICAgIC8qKgogICAgICogUmVtb3ZlIGFsbCBtb3VudHMgZm9yIGdpdmVuIHN0b3JhZ2Ugdm9sdW1lCiAgICAgKi8KICAgIHJlbW92ZVZvbHVtZTogZnVuY3Rpb24gcmVtb3ZlVm9sdW1lKHZvbHVtZSkgewogICAgICB2YXIgcmVtb3ZlTmFtZSA9IHZvbHVtZS5yb3cudmFsdWUubmFtZTsKICAgICAgdGhpcy52YWx1ZS52b2x1bWVzID0gdGhpcy52YWx1ZS52b2x1bWVzLmZpbHRlcihmdW5jdGlvbiAoX3JlZikgewogICAgICAgIHZhciBuYW1lID0gX3JlZi5uYW1lOwogICAgICAgIHJldHVybiBuYW1lICE9PSByZW1vdmVOYW1lOwogICAgICB9KTsKICAgIH0sCiAgICBhZGRWb2x1bWU6IGZ1bmN0aW9uIGFkZFZvbHVtZSh0eXBlKSB7CiAgICAgIHZhciBuYW1lID0gInZvbC0iLmNvbmNhdChyYW5kb21TdHIoNSkudG9Mb3dlckNhc2UoKSk7CiAgICAgIGlmICh0eXBlID09PSAnY3JlYXRlUFZDJykgewogICAgICAgIHRoaXMudmFsdWUudm9sdW1lcy5wdXNoKHsKICAgICAgICAgIF90eXBlOiAnY3JlYXRlUFZDJywKICAgICAgICAgIHBlcnNpc3RlbnRWb2x1bWVDbGFpbToge30sCiAgICAgICAgICBuYW1lOiBuYW1lCiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ2NzaScpIHsKICAgICAgICB0aGlzLnZhbHVlLnZvbHVtZXMucHVzaCh7CiAgICAgICAgICBfdHlwZTogdHlwZSwKICAgICAgICAgIGNzaTogewogICAgICAgICAgICB2b2x1bWVBdHRyaWJ1dGVzOiB7fQogICAgICAgICAgfSwKICAgICAgICAgIG5hbWU6IG5hbWUKICAgICAgICB9KTsKICAgICAgfSBlbHNlIGlmICh0eXBlID09PSAnZW1wdHlEaXInKSB7CiAgICAgICAgdGhpcy52YWx1ZS52b2x1bWVzLnB1c2goewogICAgICAgICAgX3R5cGU6IHR5cGUsCiAgICAgICAgICBlbXB0eURpcjogewogICAgICAgICAgICBtZWRpdW06ICcnCiAgICAgICAgICB9LAogICAgICAgICAgbmFtZTogbmFtZQogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMudmFsdWUudm9sdW1lcy5wdXNoKF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoewogICAgICAgICAgX3R5cGU6IHR5cGUKICAgICAgICB9LCB0eXBlLCB7fSksICJuYW1lIiwgbmFtZSkpOwogICAgICB9CgogICAgICAvLyB0aGlzLmNvbnRhaW5lci52b2x1bWVNb3VudHMucHVzaCh7IG5hbWUgfSk7CiAgICB9LAogICAgdm9sdW1lVHlwZTogZnVuY3Rpb24gdm9sdW1lVHlwZSh2b2wpIHsKICAgICAgdmFyIHR5cGUgPSBPYmplY3Qua2V5cyh2b2wpLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgcmV0dXJuIF90eXBlb2Yodm9sW2tleV0pID09PSAnb2JqZWN0JzsKICAgICAgfSlbMF07CiAgICAgIHJldHVybiB0eXBlOwogICAgfSwKICAgIC8vIGltcG9ydCBjb21wb25lbnQgZm9yIHZvbHVtZSB0eXBlCiAgICBnZXRDb21wb25lbnQ6IGZ1bmN0aW9uIGdldENvbXBvbmVudCh0eXBlKSB7CiAgICAgIHN3aXRjaCAodHlwZSkgewogICAgICAgIGNhc2UgJ2NvbmZpZ01hcCc6CiAgICAgICAgICByZXR1cm4gcmVxdWlyZSgiQHNoZWxsL2VkaXQvd29ya2xvYWQvc3RvcmFnZS9zZWNyZXQudnVlIikuZGVmYXVsdDsKICAgICAgICBjYXNlICdjcmVhdGVQVkMnOgogICAgICAgIGNhc2UgJ3BlcnNpc3RlbnRWb2x1bWVDbGFpbSc6CiAgICAgICAgICByZXR1cm4gcmVxdWlyZSgiQHNoZWxsL2VkaXQvd29ya2xvYWQvc3RvcmFnZS9wZXJzaXN0ZW50Vm9sdW1lQ2xhaW0vaW5kZXgudnVlIikuZGVmYXVsdDsKICAgICAgICBjYXNlICdjc2knOgogICAgICAgICAgcmV0dXJuIHJlcXVpcmUoIkBzaGVsbC9lZGl0L3dvcmtsb2FkL3N0b3JhZ2UvY3NpL2luZGV4LnZ1ZSIpLmRlZmF1bHQ7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIHsKICAgICAgICAgICAgdmFyIGNvbXBvbmVudDsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICBjb21wb25lbnQgPSByZXF1aXJlKCJAc2hlbGwvZWRpdC93b3JrbG9hZC9zdG9yYWdlLyIuY29uY2F0KHR5cGUsICIudnVlIikpLmRlZmF1bHQ7CiAgICAgICAgICAgIH0gY2F0Y2ggKF91bnVzZWQpIHt9CiAgICAgICAgICAgIHJldHVybiBjb21wb25lbnQ7CiAgICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBoZWFkZXJGb3I6IGZ1bmN0aW9uIGhlYWRlckZvcih0eXBlKSB7CiAgICAgIGlmICh0aGlzLiRzdG9yZS5nZXR0ZXJzWydpMThuL2V4aXN0cyddKCJ3b3JrbG9hZC5zdG9yYWdlLnN1YnR5cGVzLiIuY29uY2F0KHR5cGUpKSkgewogICAgICAgIHJldHVybiB0aGlzLnQoIndvcmtsb2FkLnN0b3JhZ2Uuc3VidHlwZXMuIi5jb25jYXQodHlwZSkpOwogICAgICB9IGVsc2UgewogICAgICAgIHJldHVybiB0eXBlOwogICAgICB9CiAgICB9LAogICAgeWFtbERpc3BsYXk6IGZ1bmN0aW9uIHlhbWxEaXNwbGF5KHZvbHVtZSkgewogICAgICB0cnkgewogICAgICAgIHJldHVybiBqc3lhbWwuZHVtcCh2b2x1bWUpOwogICAgICB9IGNhdGNoIChfdW51c2VkMikgewogICAgICAgIHJldHVybiB2b2x1bWU7CiAgICAgIH0KICAgIH0sCiAgICBvcGVuUG9wb3ZlcjogZnVuY3Rpb24gb3BlblBvcG92ZXIoKSB7CiAgICAgIHZhciBidXR0b24gPSB0aGlzLiRyZWZzLmJ1dHRvbkRyb3Bkb3duOwogICAgICB0cnkgewogICAgICAgIGJ1dHRvbi50b2dnbGVQb3BvdmVyKCk7CiAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICB9LAogICAgLy8gY29kZW1pcnJvciBuZWVkcyB0byByZWZyZXNoIGlmIGl0IGlzIGluIGEgdGFiIHRoYXQgd2Fzbid0IHZpc2libGUgb24gcGFnZSBsb2FkCiAgICByZWZyZXNoOiBmdW5jdGlvbiByZWZyZXNoKCkgewogICAgICBpZiAodGhpcy4kcmVmcy5jbSkgewogICAgICAgIHRoaXMuJHJlZnMuY20uZm9yRWFjaChmdW5jdGlvbiAoY29tcG9uZW50KSB7CiAgICAgICAgICByZXR1cm4gY29tcG9uZW50LnJlZnJlc2goKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKICAgIHJlbW92ZVB2Y0Zvcm06IGZ1bmN0aW9uIHJlbW92ZVB2Y0Zvcm0oaG9va05hbWUpIHsKICAgICAgdGhpcy4kZW1pdCgncmVtb3ZlUHZjRm9ybScsIGhvb2tOYW1lKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["ButtonDropdown","Mount","_VIEW","CodeMirror","jsyaml","ArrayListGrouped","randomStr","name","components","props","mode","type","String","default","value","Object","_default","namespace","savePvcHookName","required","configMaps","Array","secrets","namespacedPvcs","registerBeforeHook","Function","loading","Boolean","data","initializeStorage","computed","isView","volumeTypeOptions","_this","excludedFiles","defaultVolumeTypes","customVolumeTypes","require","context","keys","map","path","replace","filter","file","includes","concat","_toConsumableArray","sort","volumeType","label","t","action","addVolume","pvcNames","pvc","metadata","methods","volumes","$set","removeVolume","volume","removeName","row","_ref","toLowerCase","push","_type","persistentVolumeClaim","csi","volumeAttributes","emptyDir","medium","_defineProperty","vol","key","_typeof","getComponent","component","_unused","headerFor","$store","getters","yamlDisplay","dump","_unused2","openPopover","button","$refs","buttonDropdown","togglePopover","e","refresh","cm","forEach","removePvcForm","hookName","$emit"],"sources":["node_modules/@rancher/shell/edit/workload/storage/index.vue"],"sourcesContent":["<script>\nimport ButtonDropdown from '@shell/components/ButtonDropdown';\nimport Mount from '@shell/edit/workload/storage/Mount';\nimport { _VIEW } from '@shell/config/query-params';\nimport CodeMirror from '@shell/components/CodeMirror';\nimport jsyaml from 'js-yaml';\nimport ArrayListGrouped from '@shell/components/form/ArrayListGrouped';\nimport { randomStr } from '@shell/utils/string';\n\nexport default {\n  name: 'Storage',\n\n  components: {\n    ArrayListGrouped, ButtonDropdown, Mount, CodeMirror\n  },\n\n  props: {\n    mode: {\n      type:    String,\n      default: 'create',\n    },\n\n    // pod spec\n    value: {\n      type:    Object,\n      default: () => {\n        return {};\n      },\n    },\n\n    namespace: {\n      type:    String,\n      default: null,\n    },\n\n    savePvcHookName: {\n      type:     String,\n      required: true,\n    },\n\n    // namespaced configmaps and secrets\n    configMaps: {\n      type:    Array,\n      default: () => [],\n    },\n\n    secrets: {\n      type:    Array,\n      default: () => [],\n    },\n    namespacedPvcs: {\n      type:    Array,\n      default: () => [],\n    },\n\n    registerBeforeHook: {\n      type:    Function,\n      default: null,\n    },\n    loading: {\n      default: false,\n      type:    Boolean\n    },\n  },\n\n  data() {\n    this.initializeStorage();\n\n    return {};\n  },\n\n  computed: {\n    isView() {\n      return this.mode === _VIEW;\n    },\n\n    /**\n     * Generated list of volumes\n     */\n    volumeTypeOptions() {\n      const excludedFiles = ['index', 'Mount', 'PVC', 'ContainerMountPaths'];\n      const defaultVolumeTypes = [\n        'csi',\n        'configMap',\n        'createPVC',\n        'persistentVolumeClaim'\n      ];\n      // Get all the custom volume types from the file names of this folder\n      const customVolumeTypes = require\n        .context('@shell/edit/workload/storage', false, /^.*\\.vue$/)\n        .keys()\n        .map((path) => path.replace(/(\\.\\/)|(.vue)/g, ''))\n        .filter((file) => !excludedFiles.includes(file));\n\n      return [\n        ...customVolumeTypes,\n        ...defaultVolumeTypes\n      ]\n        .sort()\n        .map((volumeType) => ({\n          label:  this.t(`workload.storage.subtypes.${ volumeType }`),\n          action: this.addVolume,\n          value:  volumeType,\n        }));\n    },\n\n    pvcNames() {\n      return this.namespacedPvcs.map((pvc) => pvc.metadata.name);\n    },\n  },\n\n  // watch: {\n  //   storageVolumes(neu, old) {\n  //     removeObjects(this.value.volumes, old);\n  //     addObjects(this.value.volumes, neu);\n  //     const names = neu.reduce((all, each) => {\n  //       all.push(each.name);\n\n  //       return all;\n  //     }, []);\n\n  //     this.container.volumeMounts = this.container.volumeMounts.filter(mount => names.includes(mount.name));\n  //   }\n  // },\n\n  methods: {\n    /**\n     * Initialize missing values for the container\n     */\n    initializeStorage() {\n      if (!this.value.volumes) {\n        this.$set(this.value, 'volumes', []);\n      }\n    },\n\n    /**\n     * Remove all mounts for given storage volume\n     */\n    removeVolume(volume) {\n      const removeName = volume.row.value.name;\n\n      this.value.volumes = this.value.volumes.filter(({ name }) => name !== removeName);\n    },\n\n    addVolume(type) {\n      const name = `vol-${ randomStr(5).toLowerCase() }`;\n\n      if (type === 'createPVC') {\n        this.value.volumes.push({\n          _type:                 'createPVC',\n          persistentVolumeClaim: {},\n          name,\n        });\n      } else if (type === 'csi') {\n        this.value.volumes.push({\n          _type: type,\n          csi:   { volumeAttributes: {} },\n          name,\n        });\n      } else if (type === 'emptyDir') {\n        this.value.volumes.push({\n          _type:    type,\n          emptyDir: { medium: '' },\n          name,\n        });\n      } else {\n        this.value.volumes.push({\n          _type:  type,\n          [type]: {},\n          name,\n        });\n      }\n\n      // this.container.volumeMounts.push({ name });\n    },\n\n    volumeType(vol) {\n      const type = Object.keys(vol).filter(\n        (key) => typeof vol[key] === 'object'\n      )[0];\n\n      return type;\n    },\n\n    // import component for volume type\n    getComponent(type) {\n      switch (type) {\n      case 'configMap':\n        return require(`@shell/edit/workload/storage/secret.vue`).default;\n      case 'createPVC':\n      case 'persistentVolumeClaim':\n        return require(`@shell/edit/workload/storage/persistentVolumeClaim/index.vue`)\n          .default;\n      case 'csi':\n        return require(`@shell/edit/workload/storage/csi/index.vue`).default;\n\n      default: {\n        let component;\n\n        try {\n          component = require(`@shell/edit/workload/storage/${ type }.vue`).default;\n        } catch {}\n\n        return component;\n      }\n      }\n    },\n\n    headerFor(type) {\n      if (\n        this.$store.getters['i18n/exists'](`workload.storage.subtypes.${ type }`)\n      ) {\n        return this.t(`workload.storage.subtypes.${ type }`);\n      } else {\n        return type;\n      }\n    },\n\n    yamlDisplay(volume) {\n      try {\n        return jsyaml.dump(volume);\n      } catch {\n        return volume;\n      }\n    },\n\n    openPopover() {\n      const button = this.$refs.buttonDropdown;\n\n      try {\n        button.togglePopover();\n      } catch (e) {}\n    },\n\n    // codemirror needs to refresh if it is in a tab that wasn't visible on page load\n    refresh() {\n      if (this.$refs.cm) {\n        this.$refs.cm.forEach((component) => component.refresh());\n      }\n    },\n\n    removePvcForm(hookName) {\n      this.$emit('removePvcForm', hookName);\n    }\n  },\n};\n</script>\n\n<template>\n  <div>\n    <!-- Storage Volumes -->\n    <ArrayListGrouped\n      :key=\"value.volumes.length\"\n      v-model=\"value.volumes\"\n      :mode=\"mode\"\n      @remove=\"removeVolume\"\n    >\n      <!-- Custom/default storage volume form -->\n      <template #default=\"props\">\n        <h3>{{ headerFor(volumeType(props.row.value)) }}</h3>\n        <div class=\"bordered-section\">\n          <component\n            :is=\"getComponent(volumeType(props.row.value))\"\n            v-if=\"getComponent(volumeType(props.row.value))\"\n            :value=\"props.row.value\"\n            :pod-spec=\"value\"\n            :mode=\"mode\"\n            :namespace=\"namespace\"\n            :secrets=\"secrets\"\n            :config-maps=\"configMaps\"\n            :pvcs=\"pvcNames\"\n            :register-before-hook=\"registerBeforeHook\"\n            :save-pvc-hook-name=\"savePvcHookName\"\n            :loading=\"loading\"\n            @removePvcForm=\"removePvcForm\"\n          />\n          <div v-else-if=\"isView\">\n            <CodeMirror\n              ref=\"cm\"\n              :value=\"yamlDisplay(props.row.value)\"\n              :options=\"{ readOnly: true, cursorBlinkRate: -1 }\"\n            />\n          </div>\n        </div>\n\n        <!-- Mount point list to be mapped to volume\n        <Mount\n          :container=\"container\"\n          :name=\"props.row.value.name\"\n          :mode=\"mode\"\n        /> -->\n      </template>\n\n      <!-- Add Storage Volume -->\n      <template #add>\n        <ButtonDropdown\n          v-if=\"!isView\"\n          id=\"select-volume\"\n          :button-label=\"t('workload.storage.addVolume')\"\n          :dropdown-options=\"volumeTypeOptions\"\n          size=\"sm\"\n          @click-action=\"e=>addVolume(e.value)\"\n        />\n      </template>\n    </ArrayListGrouped>\n  </div>\n</template>\n\n<style lang='scss' scoped>\n.volume-source {\n  padding: 20px;\n  margin: 20px 0px 20px 0px;\n  position: relative;\n\n  ::v-deep .code-mirror {\n    .CodeMirror {\n      background-color: var(--yaml-editor-bg);\n      & .CodeMirror-gutters {\n        background-color: var(--yaml-editor-bg);\n      }\n    }\n  }\n}\n\n.remove-vol {\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  padding: 0px;\n}\n\n.add-vol:focus {\n  outline: none;\n  box-shadow: none;\n}\n</style>\n"],"mappings":"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"}]}