{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--17-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/array.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/array.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90b0NvbnN1bWFibGVBcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90b0NvbnN1bWFibGVBcnJheSI7CmltcG9ydCBfdHlwZW9mIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3R5cGVvZiI7CmZ1bmN0aW9uIF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKG8sIGFsbG93QXJyYXlMaWtlKSB7IHZhciBpdCA9IHR5cGVvZiBTeW1ib2wgIT09ICJ1bmRlZmluZWQiICYmIG9bU3ltYm9sLml0ZXJhdG9yXSB8fCBvWyJAQGl0ZXJhdG9yIl07IGlmICghaXQpIHsgaWYgKEFycmF5LmlzQXJyYXkobykgfHwgKGl0ID0gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8pKSB8fCBhbGxvd0FycmF5TGlrZSAmJiBvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHsgaWYgKGl0KSBvID0gaXQ7IHZhciBpID0gMDsgdmFyIEYgPSBmdW5jdGlvbiBGKCkge307IHJldHVybiB7IHM6IEYsIG46IGZ1bmN0aW9uIG4oKSB7IGlmIChpID49IG8ubGVuZ3RoKSByZXR1cm4geyBkb25lOiB0cnVlIH07IHJldHVybiB7IGRvbmU6IGZhbHNlLCB2YWx1ZTogb1tpKytdIH07IH0sIGU6IGZ1bmN0aW9uIGUoX2UpIHsgdGhyb3cgX2U7IH0sIGY6IEYgfTsgfSB0aHJvdyBuZXcgVHlwZUVycm9yKCJJbnZhbGlkIGF0dGVtcHQgdG8gaXRlcmF0ZSBub24taXRlcmFibGUgaW5zdGFuY2UuXG5JbiBvcmRlciB0byBiZSBpdGVyYWJsZSwgbm9uLWFycmF5IG9iamVjdHMgbXVzdCBoYXZlIGEgW1N5bWJvbC5pdGVyYXRvcl0oKSBtZXRob2QuIik7IH0gdmFyIG5vcm1hbENvbXBsZXRpb24gPSB0cnVlLCBkaWRFcnIgPSBmYWxzZSwgZXJyOyByZXR1cm4geyBzOiBmdW5jdGlvbiBzKCkgeyBpdCA9IGl0LmNhbGwobyk7IH0sIG46IGZ1bmN0aW9uIG4oKSB7IHZhciBzdGVwID0gaXQubmV4dCgpOyBub3JtYWxDb21wbGV0aW9uID0gc3RlcC5kb25lOyByZXR1cm4gc3RlcDsgfSwgZTogZnVuY3Rpb24gZShfZTIpIHsgZGlkRXJyID0gdHJ1ZTsgZXJyID0gX2UyOyB9LCBmOiBmdW5jdGlvbiBmKCkgeyB0cnkgeyBpZiAoIW5vcm1hbENvbXBsZXRpb24gJiYgaXQucmV0dXJuICE9IG51bGwpIGl0LnJldHVybigpOyB9IGZpbmFsbHkgeyBpZiAoZGlkRXJyKSB0aHJvdyBlcnI7IH0gfSB9OyB9CmZ1bmN0aW9uIF91bnN1cHBvcnRlZEl0ZXJhYmxlVG9BcnJheShvLCBtaW5MZW4pIHsgaWYgKCFvKSByZXR1cm47IGlmICh0eXBlb2YgbyA9PT0gInN0cmluZyIpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB2YXIgbiA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvKS5zbGljZSg4LCAtMSk7IGlmIChuID09PSAiT2JqZWN0IiAmJiBvLmNvbnN0cnVjdG9yKSBuID0gby5jb25zdHJ1Y3Rvci5uYW1lOyBpZiAobiA9PT0gIk1hcCIgfHwgbiA9PT0gIlNldCIpIHJldHVybiBBcnJheS5mcm9tKG8pOyBpZiAobiA9PT0gIkFyZ3VtZW50cyIgfHwgL14oPzpVaXxJKW50KD86OHwxNnwzMikoPzpDbGFtcGVkKT9BcnJheSQvLnRlc3QobikpIHJldHVybiBfYXJyYXlMaWtlVG9BcnJheShvLCBtaW5MZW4pOyB9CmZ1bmN0aW9uIF9hcnJheUxpa2VUb0FycmF5KGFyciwgbGVuKSB7IGlmIChsZW4gPT0gbnVsbCB8fCBsZW4gPiBhcnIubGVuZ3RoKSBsZW4gPSBhcnIubGVuZ3RoOyBmb3IgKHZhciBpID0gMCwgYXJyMiA9IG5ldyBBcnJheShsZW4pOyBpIDwgbGVuOyBpKyspIGFycjJbaV0gPSBhcnJbaV07IHJldHVybiBhcnIyOyB9CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNsaWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mcm9tLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuZGVzY3JpcHRpb24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgeG9yIGZyb20gJ2xvZGFzaC94b3InOwppbXBvcnQgeyBnZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZU9iamVjdChhcnksIG9iaikgewogIHZhciBpZHggPSBhcnkuaW5kZXhPZihvYmopOwogIGlmIChpZHggPj0gMCkgewogICAgYXJ5LnNwbGljZShpZHgsIDEpOwogIH0KICByZXR1cm4gYXJ5Owp9CmV4cG9ydCBmdW5jdGlvbiByZW1vdmVPYmplY3RzKGFyeSwgb2JqcykgewogIHZhciBpOwogIHZhciBpbmRleGVzID0gW107CiAgZm9yIChpID0gMDsgaSA8IG9ianMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBpZHggPSBhcnkuaW5kZXhPZihvYmpzW2ldKTsKICAgIC8vIEZpbmQgbXVsdGlwbGUgY29waWVzIG9mIHRoZSBzYW1lIHZhbHVlCiAgICB3aGlsZSAoaWR4ICE9PSAtMSkgewogICAgICBpbmRleGVzLnB1c2goaWR4KTsKICAgICAgaWR4ID0gYXJ5LmluZGV4T2Yob2Jqc1tpXSwgaWR4ICsgMSk7CiAgICB9CiAgfQogIGlmICghaW5kZXhlcy5sZW5ndGgpIHsKICAgIC8vIFRoYXQgd2FzIGVhc3kuLi4KICAgIHJldHVybiBhcnk7CiAgfQogIGluZGV4ZXMgPSBpbmRleGVzLnNvcnQoZnVuY3Rpb24gKGEsIGIpIHsKICAgIHJldHVybiBhIC0gYjsKICB9KTsKICB2YXIgcmFuZ2VzID0gW107CiAgdmFyIGZpcnN0OwogIHZhciBsYXN0OwogIC8vIEdyb3VwIGFsbCB0aGUgaW5kZXhlcyBpbnRvIGNvbnRpZ3VvdXMgcmFuZ2VzCiAgd2hpbGUgKGluZGV4ZXMubGVuZ3RoKSB7CiAgICBmaXJzdCA9IGluZGV4ZXMuc2hpZnQoKTsKICAgIGxhc3QgPSBmaXJzdDsKICAgIHdoaWxlIChpbmRleGVzLmxlbmd0aCAmJiBpbmRleGVzWzBdID09PSBsYXN0ICsgMSkgewogICAgICBsYXN0ID0gaW5kZXhlcy5zaGlmdCgpOwogICAgfQogICAgcmFuZ2VzLnB1c2goewogICAgICBzdGFydDogZmlyc3QsCiAgICAgIGVuZDogbGFzdAogICAgfSk7CiAgfQogIC8vIFJlbW92ZSB0aGUgaXRlbXMgYnkgcmFuZ2UKICBmb3IgKGkgPSByYW5nZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHsKICAgIHZhciBfcmFuZ2VzJGkgPSByYW5nZXNbaV0sCiAgICAgIHN0YXJ0ID0gX3JhbmdlcyRpLnN0YXJ0LAogICAgICBlbmQgPSBfcmFuZ2VzJGkuZW5kOwogICAgYXJ5LnNwbGljZShzdGFydCwgZW5kIC0gc3RhcnQgKyAxKTsKICB9CiAgcmV0dXJuIGFyeTsKfQpleHBvcnQgZnVuY3Rpb24gYWRkT2JqZWN0KGFyeSwgb2JqKSB7CiAgdmFyIGlkeCA9IGFyeS5pbmRleE9mKG9iaik7CiAgaWYgKGlkeCA9PT0gLTEpIHsKICAgIGFyeS5wdXNoKG9iaik7CiAgfQp9CmV4cG9ydCBmdW5jdGlvbiBhZGRPYmplY3RzKGFyeSwgb2JqcykgewogIHZhciB1bmlxdWUgPSBbXTsKICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIob2JqcyksCiAgICBfc3RlcDsKICB0cnkgewogICAgZm9yIChfaXRlcmF0b3IucygpOyAhKF9zdGVwID0gX2l0ZXJhdG9yLm4oKSkuZG9uZTspIHsKICAgICAgdmFyIG9iaiA9IF9zdGVwLnZhbHVlOwogICAgICBpZiAoIWFyeS5pbmNsdWRlcyhvYmopICYmICF1bmlxdWUuaW5jbHVkZXMob2JqKSkgewogICAgICAgIHVuaXF1ZS5wdXNoKG9iaik7CiAgICAgIH0KICAgIH0KICB9IGNhdGNoIChlcnIpIHsKICAgIF9pdGVyYXRvci5lKGVycik7CiAgfSBmaW5hbGx5IHsKICAgIF9pdGVyYXRvci5mKCk7CiAgfQogIGFyeS5wdXNoLmFwcGx5KGFyeSwgdW5pcXVlKTsKfQpleHBvcnQgZnVuY3Rpb24gaW5zZXJ0QXQoYXJ5LCBpZHgpIHsKICBmb3IgKHZhciBfbGVuID0gYXJndW1lbnRzLmxlbmd0aCwgb2JqcyA9IG5ldyBBcnJheShfbGVuID4gMiA/IF9sZW4gLSAyIDogMCksIF9rZXkgPSAyOyBfa2V5IDwgX2xlbjsgX2tleSsrKSB7CiAgICBvYmpzW19rZXkgLSAyXSA9IGFyZ3VtZW50c1tfa2V5XTsKICB9CiAgYXJ5LnNwbGljZS5hcHBseShhcnksIFtpZHgsIDBdLmNvbmNhdChvYmpzKSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGlzQXJyYXkodGhpbmcpIHsKICByZXR1cm4gQXJyYXkuaXNBcnJheSh0aGluZyk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHJlbW92ZUF0KGFyeSwgaWR4KSB7CiAgdmFyIGxlbmd0aCA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogMTsKICBpZiAoaWR4IDwgMCkgewogICAgdGhyb3cgbmV3IEVycm9yKCdJbmRleCB0b28gbG93Jyk7CiAgfQogIGlmIChpZHggKyBsZW5ndGggPiBhcnkubGVuZ3RoKSB7CiAgICB0aHJvdyBuZXcgRXJyb3IoJ0luZGV4ICsgbGVuZ3RoIHRvbyBoaWdoJyk7CiAgfQogIGFyeS5zcGxpY2UoaWR4LCBsZW5ndGgpOwogIHJldHVybiBhcnk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGNsZWFyKGFyeSkgewogIGFyeS5zcGxpY2UoMCwgYXJ5Lmxlbmd0aCk7Cn0KZXhwb3J0IGZ1bmN0aW9uIHJlcGxhY2VXaXRoKGFyeSkgewogIGZvciAodmFyIF9sZW4yID0gYXJndW1lbnRzLmxlbmd0aCwgdmFsdWVzID0gbmV3IEFycmF5KF9sZW4yID4gMSA/IF9sZW4yIC0gMSA6IDApLCBfa2V5MiA9IDE7IF9rZXkyIDwgX2xlbjI7IF9rZXkyKyspIHsKICAgIHZhbHVlc1tfa2V5MiAtIDFdID0gYXJndW1lbnRzW19rZXkyXTsKICB9CiAgYXJ5LnNwbGljZS5hcHBseShhcnksIFswLCBhcnkubGVuZ3RoXS5jb25jYXQodmFsdWVzKSk7Cn0KZnVuY3Rpb24gZmluZE9yRmlsdGVyQnkobWV0aG9kLCBhcnksIGtleU9yT2JqLCB2YWwpIHsKICBhcnkgPSBhcnkgfHwgW107CiAgaWYgKF90eXBlb2Yoa2V5T3JPYmopID09PSAnb2JqZWN0JykgewogICAgcmV0dXJuIGFyeVttZXRob2RdKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIGZvciAodmFyIHBhdGggaW4ga2V5T3JPYmopIHsKICAgICAgICB2YXIgd2FudCA9IGtleU9yT2JqW3BhdGhdOwogICAgICAgIHZhciBoYXZlID0gZ2V0KGl0ZW0sIHBhdGgpOwogICAgICAgIGlmICh0eXBlb2Ygd2FudCA9PT0gJ3VuZGVmaW5lZCcpIHsKICAgICAgICAgIGlmICghaGF2ZSkgewogICAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIGlmIChoYXZlICE9PSB3YW50KSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfSk7CiAgfSBlbHNlIGlmICh2YWwgPT09IHVuZGVmaW5lZCkgewogICAgcmV0dXJuIGFyeVttZXRob2RdKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiAhIWdldChpdGVtLCBrZXlPck9iaik7CiAgICB9KTsKICB9IGVsc2UgewogICAgcmV0dXJuIGFyeVttZXRob2RdKGZ1bmN0aW9uIChpdGVtKSB7CiAgICAgIHJldHVybiBnZXQoaXRlbSwga2V5T3JPYmopID09PSB2YWw7CiAgICB9KTsKICB9Cn0KZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckJ5KGFyeSwga2V5T3JPYmosIHZhbCkgewogIHJldHVybiBmaW5kT3JGaWx0ZXJCeSgnZmlsdGVyJywgYXJ5LCBrZXlPck9iaiwgdmFsKTsKfQpleHBvcnQgZnVuY3Rpb24gZmluZEJ5KGFyeSwga2V5T3JPYmosIHZhbCkgewogIHJldHVybiBmaW5kT3JGaWx0ZXJCeSgnZmluZCcsIGFyeSwga2V5T3JPYmosIHZhbCk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGZpbmRTdHJpbmdJbmRleChpdGVtcywgaXRlbSkgewogIHZhciB0cmltID0gYXJndW1lbnRzLmxlbmd0aCA+IDIgJiYgYXJndW1lbnRzWzJdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMl0gOiB0cnVlOwogIHJldHVybiBpdGVtcy5pbmRleE9mKHRyaW0gPyBpdGVtID09PSBudWxsIHx8IGl0ZW0gPT09IHZvaWQgMCA/IHZvaWQgMCA6IGl0ZW0udHJpbSgpIDogaXRlbSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGhhc0R1cGxpY2F0ZWRTdHJpbmdzKGl0ZW1zKSB7CiAgdmFyIGNhc2VTZW5zaXRpdmUgPSBhcmd1bWVudHMubGVuZ3RoID4gMSAmJiBhcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1sxXSA6IHRydWU7CiAgdmFyIG5vcm1hbGl6ZWRJdGVtcyA9IGl0ZW1zLm1hcChmdW5jdGlvbiAoaSkgewogICAgcmV0dXJuIChjYXNlU2Vuc2l0aXZlID8gaSA6IGkudG9Mb3dlckNhc2UoKSkudHJpbSgpOwogIH0pOwogIGZvciAodmFyIGkgPSAwOyBpIDwgaXRlbXMubGVuZ3RoOyBpKyspIHsKICAgIHZhciBpbmRleCA9IGZpbmRTdHJpbmdJbmRleChub3JtYWxpemVkSXRlbXMsIGNhc2VTZW5zaXRpdmUgPyBpdGVtc1tpXSA6IGl0ZW1zW2ldLnRvTG93ZXJDYXNlKCkpOwogICAgaWYgKGkgIT09IGluZGV4KSB7CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0KICByZXR1cm4gZmFsc2U7Cn0KZXhwb3J0IGZ1bmN0aW9uIHNhbWVDb250ZW50cyhhcnlBLCBhcnlCKSB7CiAgcmV0dXJuIHhvcihhcnlBLCBhcnlCKS5sZW5ndGggPT09IDA7Cn0KZXhwb3J0IGZ1bmN0aW9uIHVuaXEoYXJ5KSB7CiAgdmFyIG91dCA9IFtdOwogIGFkZE9iamVjdHMob3V0LCBhcnkpOwogIHJldHVybiBvdXQ7Cn0KZXhwb3J0IGZ1bmN0aW9uIGNvbmNhdFN0cmluZ3MoYSwgYikgewogIHJldHVybiBfdG9Db25zdW1hYmxlQXJyYXkoYS5tYXAoZnVuY3Rpb24gKGFhKSB7CiAgICByZXR1cm4gYi5tYXAoZnVuY3Rpb24gKGJiKSB7CiAgICAgIHJldHVybiBhYS5jb25jYXQoYmIpOwogICAgfSk7CiAgfSkpLnJlZHVjZShmdW5jdGlvbiAoYWNjLCBhcnIpIHsKICAgIHJldHVybiBbXS5jb25jYXQoX3RvQ29uc3VtYWJsZUFycmF5KGFyciksIF90b0NvbnN1bWFibGVBcnJheShhY2MpKTsKICB9LCBbXSk7Cn0KZXhwb3J0IGZ1bmN0aW9uIGdldFVuaXF1ZUxhYmVsS2V5cyhhcnlSZXNvdXJjZXMpIHsKICB2YXIgdW5pcXVlT2JqID0gYXJ5UmVzb3VyY2VzLnJlZHVjZShmdW5jdGlvbiAocmVzLCByKSB7CiAgICBPYmplY3Qua2V5cyhyLm1ldGFkYXRhLmxhYmVscykuZm9yRWFjaChmdW5jdGlvbiAobCkgewogICAgICByZXR1cm4gcmVzW2xdID0gdHJ1ZTsKICAgIH0pOwogICAgcmV0dXJuIHJlczsKICB9LCB7fSk7CiAgcmV0dXJuIE9iamVjdC5rZXlzKHVuaXF1ZU9iaikuc29ydCgpOwp9"},{"version":3,"names":["xor","get","removeObject","ary","obj","idx","indexOf","splice","removeObjects","objs","i","indexes","length","push","sort","a","b","ranges","first","last","shift","start","end","_ranges$i","addObject","addObjects","unique","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","includes","err","e","f","apply","insertAt","_len","arguments","Array","_key","concat","isArray","thing","removeAt","undefined","Error","clear","replaceWith","_len2","values","_key2","findOrFilterBy","method","keyOrObj","val","_typeof","item","path","want","have","filterBy","findBy","findStringIndex","items","trim","hasDuplicatedStrings","caseSensitive","normalizedItems","map","toLowerCase","index","sameContents","aryA","aryB","uniq","out","concatStrings","_toConsumableArray","aa","bb","reduce","acc","arr","getUniqueLabelKeys","aryResources","uniqueObj","res","r","Object","keys","metadata","labels","forEach","l"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/array.ts"],"sourcesContent":["import xor from 'lodash/xor';\nimport { get } from '@shell/utils/object';\n\nexport function removeObject<T>(ary: T[], obj: T): T[] {\n  const idx = ary.indexOf(obj);\n\n  if ( idx >= 0 ) {\n    ary.splice(idx, 1);\n  }\n\n  return ary;\n}\n\nexport function removeObjects<T>(ary: T[], objs: T[]): T[] {\n  let i;\n  let indexes = [];\n\n  for ( i = 0 ; i < objs.length ; i++ ) {\n    let idx = ary.indexOf(objs[i]);\n\n    // Find multiple copies of the same value\n    while ( idx !== -1 ) {\n      indexes.push(idx);\n      idx = ary.indexOf(objs[i], idx + 1);\n    }\n  }\n\n  if ( !indexes.length ) {\n    // That was easy...\n    return ary;\n  }\n\n  indexes = indexes.sort((a, b) => a - b);\n\n  const ranges = [];\n  let first: number;\n  let last: number;\n\n  // Group all the indexes into contiguous ranges\n  while ( indexes.length ) {\n    first = indexes.shift() as number;\n    last = first;\n\n    while ( indexes.length && indexes[0] === last + 1 ) {\n      last = indexes.shift() as number;\n    }\n\n    ranges.push({ start: first, end: last });\n  }\n\n  // Remove the items by range\n  for ( i = ranges.length - 1 ; i >= 0 ; i--) {\n    const { start, end } = ranges[i];\n\n    ary.splice(start, end - start + 1);\n  }\n\n  return ary;\n}\n\nexport function addObject<T>(ary: T[], obj: T): void {\n  const idx = ary.indexOf(obj);\n\n  if ( idx === -1 ) {\n    ary.push(obj);\n  }\n}\n\nexport function addObjects<T>(ary: T[], objs: T[]): void {\n  const unique: T[] = [];\n\n  for ( const obj of objs ) {\n    if ( !ary.includes(obj) && !unique.includes(obj) ) {\n      unique.push(obj);\n    }\n  }\n\n  ary.push(...unique);\n}\n\nexport function insertAt<T>(ary: T[], idx: number, ...objs: T[]): void {\n  ary.splice(idx, 0, ...objs);\n}\n\nexport function isArray<T>(thing: T[] | unknown): boolean {\n  return Array.isArray(thing);\n}\n\nexport function removeAt<T>(ary: T[], idx: number, length = 1): T[] {\n  if ( idx < 0 ) {\n    throw new Error('Index too low');\n  }\n\n  if ( idx + length > ary.length ) {\n    throw new Error('Index + length too high');\n  }\n\n  ary.splice(idx, length);\n\n  return ary;\n}\n\nexport function clear<T>(ary: T[]): void {\n  ary.splice(0, ary.length);\n}\n\nexport function replaceWith<T>(ary: T[], ...values: T[]): void {\n  ary.splice(0, ary.length, ...values);\n}\n\nfunction findOrFilterBy<T, K, V>(\n  method: 'filter', ary: T[] | null, keyOrObj: string | K, val?: V\n): T[];\nfunction findOrFilterBy<T, K, V>(\n  method: 'find', ary: T[] | null, keyOrObj: string | K, val?: V\n): T;\nfunction findOrFilterBy<T, K, V>(\n  method: keyof T[], ary: T[] | null, keyOrObj: string | K, val?: V\n): T[] {\n  ary = ary || [];\n\n  if ( typeof keyOrObj === 'object' ) {\n    return (ary[method] as Function)((item: T) => {\n      for ( const path in keyOrObj ) {\n        const want = keyOrObj[path];\n        const have = get(item, path);\n\n        if ( typeof want === 'undefined' ) {\n          if ( !have ) {\n            return false;\n          }\n        } else if ( have !== want ) {\n          return false;\n        }\n      }\n\n      return true;\n    });\n  } else if ( val === undefined ) {\n    return (ary[method] as Function)((item: T) => !!get(item, keyOrObj));\n  } else {\n    return (ary[method] as Function)((item: T) => get(item, keyOrObj) === val);\n  }\n}\n\nexport function filterBy<T, K, V>(\n  ary: T[] | null, keyOrObj: string | K, val?: V\n): T[] {\n  return findOrFilterBy('filter', ary, keyOrObj, val);\n}\n\nexport function findBy<T, K, V>(\n  ary: T[] | null, keyOrObj: string | K, val?: V\n): T {\n  return findOrFilterBy('find', ary, keyOrObj, val);\n}\n\nexport function findStringIndex(items: string[], item: string, trim = true): number {\n  return items.indexOf(trim ? item?.trim() : item);\n}\n\nexport function hasDuplicatedStrings(items: string[], caseSensitive = true): boolean {\n  const normalizedItems = items.map((i) => (caseSensitive ? i : i.toLowerCase()).trim());\n\n  for (let i = 0; i < items.length; i++) {\n    const index = findStringIndex(\n      normalizedItems,\n      (caseSensitive ? items[i] : items[i].toLowerCase()),\n    );\n\n    if (i !== index) {\n      return true;\n    }\n  }\n\n  return false;\n}\n\nexport function sameContents<T>(aryA: T[], aryB: T[]): boolean {\n  return xor(aryA, aryB).length === 0;\n}\n\nexport function uniq<T>(ary: T[]): T[] {\n  const out: T[] = [];\n\n  addObjects(out, ary);\n\n  return out;\n}\n\nexport function concatStrings(a: string[], b: string[]): string[] {\n  return [...a.map((aa) => b.map((bb) => aa.concat(bb)))].reduce((acc, arr) => [...arr, ...acc], []);\n}\n\ninterface KubeResource { metadata: { labels: { [name: string]: string} } } // Migrate to central kube types resource when those are brought in\nexport function getUniqueLabelKeys<T extends KubeResource>(aryResources: T[]): string[] {\n  const uniqueObj = aryResources.reduce((res, r) => {\n    Object.keys(r.metadata.labels).forEach((l) => (res[l] = true));\n\n    return res;\n  }, {} as {[label: string]: boolean});\n\n  return Object.keys(uniqueObj).sort();\n}\n"],"mappings":"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"}]}