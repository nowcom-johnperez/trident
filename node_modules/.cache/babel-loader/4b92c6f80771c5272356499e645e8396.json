{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/store/i18n.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/store/i18n.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZyb20uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5kZXNjcmlwdGlvbi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3R5cGVvZiBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS90eXBlb2YiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5jb25jYXQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC1pbmRleC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bIkBAaXRlcmF0b3IiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH0KaW1wb3J0IG1lcmdlIGZyb20gJ2xvZGFzaC9tZXJnZSc7CmltcG9ydCBJbnRsTWVzc2FnZUZvcm1hdCBmcm9tICdpbnRsLW1lc3NhZ2Vmb3JtYXQnOwppbXBvcnQgeyBnZXQgfSBmcm9tICdAc2hlbGwvdXRpbHMvb2JqZWN0JzsKaW1wb3J0IGVuIGZyb20gJ0BzaGVsbC9hc3NldHMvdHJhbnNsYXRpb25zL2VuLXVzLnlhbWwnOwppbXBvcnQgeyBnZXRQcm9kdWN0LCBnZXRWZW5kb3IsIERPQ1NfQkFTRSB9IGZyb20gJ0BzaGVsbC9jb25maWcvcHJpdmF0ZS1sYWJlbCc7CmltcG9ydCB7IGxvYWRUcmFuc2xhdGlvbiB9IGZyb20gJ0BzaGVsbC91dGlscy9keW5hbWljLWltcG9ydGVyJzsKdmFyIE5PTkUgPSAnbm9uZSc7CnZhciBERUZBVUxUX0xPQ0FMRSA9ICdlbi11cyc7CgovLyBGb3JtYXR0ZXJzIGNhbid0IGJlIHNlcmlhbGl6ZWQgaW50byBzdGF0ZQp2YXIgaW50bENhY2hlID0ge307CnZhciBsYXN0TG9hZGVkID0gMDsKZXhwb3J0IHZhciBzdGF0ZSA9IGZ1bmN0aW9uIHN0YXRlKCkgewogIC8vIGNvbnN0IHRyYW5zbGF0aW9uQ29udGV4dCA9IHJlcXVpcmUuY29udGV4dCgnQHNoZWxsL2Fzc2V0cy90cmFuc2xhdGlvbnMnLCB0cnVlLCAvLiovKTsKICAvLyBjb25zdCBhdmFpbGFibGUgPSB0cmFuc2xhdGlvbkNvbnRleHQua2V5cygpLm1hcChwYXRoID0+IHBhdGgucmVwbGFjZSgvXi4qXC8oW15cL10rKVwuW14uXSskLywgJyQxJykpOwogIC8vIFVzaW5nIHJlcXVpcmUuY29udGV4dCgpIGZvcmNlcyB0aGVtIHRvIGFsbCBiZSBpbiB0aGUgc2FtZSB3ZWJwYWNrIGNodW5rIG5hbWUuLi4ganVzdCBoYXJkY29kZSB0aGUgbGlzdCBmb3Igbm93IHNvIHpoLWhhbnMKICAvLyBnZXRzIGdlbmVyYXRlZCBhcyBpdCdzIG93biBjaHVuayBpbnN0ZWFkIG9mIGJlaW5nIGxvYWRlZCBhbGwgdGhlIHRpbWUuCiAgdmFyIGF2YWlsYWJsZSA9IFtERUZBVUxUX0xPQ0FMRSwgJ3poLWhhbnMnXTsKICB2YXIgb3V0ID0gewogICAgZGVmYXVsdDogREVGQVVMVF9MT0NBTEUsCiAgICBzZWxlY3RlZDogbnVsbCwKICAgIHByZXZpb3VzOiBudWxsLAogICAgYXZhaWxhYmxlOiBhdmFpbGFibGUsCiAgICB0cmFuc2xhdGlvbnM6IF9kZWZpbmVQcm9wZXJ0eSh7fSwgREVGQVVMVF9MT0NBTEUsIGVuKQogIH07CiAgcmV0dXJuIG91dDsKfTsKZXhwb3J0IHZhciBnZXR0ZXJzID0gewogIHNlbGVjdGVkTG9jYWxlTGFiZWw6IGZ1bmN0aW9uIHNlbGVjdGVkTG9jYWxlTGFiZWwoc3RhdGUpIHsKICAgIHZhciBrZXkgPSAibG9jYWxlLiIuY29uY2F0KHN0YXRlLnNlbGVjdGVkKTsKICAgIGlmIChzdGF0ZS5zZWxlY3RlZCA9PT0gTk9ORSkgewogICAgICByZXR1cm4gIiUiLmNvbmNhdChrZXksICIlIik7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gZ2V0KHN0YXRlLnRyYW5zbGF0aW9uc1tzdGF0ZS5kZWZhdWx0XSwga2V5KTsKICAgIH0KICB9LAogIGF2YWlsYWJsZUxvY2FsZXM6IGZ1bmN0aW9uIGF2YWlsYWJsZUxvY2FsZXMoc3RhdGUsIGdldHRlcnMpIHsKICAgIHZhciBvdXQgPSB7fTsKICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihzdGF0ZS5hdmFpbGFibGUpLAogICAgICBfc3RlcDsKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIGxvY2FsZSA9IF9zdGVwLnZhbHVlOwogICAgICAgIHZhciBrZXkgPSAibG9jYWxlLiIuY29uY2F0KGxvY2FsZSk7CiAgICAgICAgaWYgKHN0YXRlLnNlbGVjdGVkID09PSBOT05FKSB7CiAgICAgICAgICBvdXRbbG9jYWxlXSA9ICIlIi5jb25jYXQoa2V5LCAiJSIpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBvdXRbbG9jYWxlXSA9IGdldChzdGF0ZS50cmFuc2xhdGlvbnNbc3RhdGUuZGVmYXVsdF0sIGtleSk7CiAgICAgICAgfQogICAgICB9CiAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgX2l0ZXJhdG9yLmUoZXJyKTsKICAgIH0gZmluYWxseSB7CiAgICAgIF9pdGVyYXRvci5mKCk7CiAgICB9CiAgICByZXR1cm4gb3V0OwogIH0sCiAgdDogZnVuY3Rpb24gdChzdGF0ZSkgewogICAgcmV0dXJuIGZ1bmN0aW9uIChrZXksIGFyZ3MsIGxhbmd1YWdlKSB7CiAgICAgIGlmIChzdGF0ZS5zZWxlY3RlZCA9PT0gTk9ORSAmJiAhbGFuZ3VhZ2UpIHsKICAgICAgICByZXR1cm4gIiUiLmNvbmNhdChrZXksICIlIik7CiAgICAgIH0KICAgICAgdmFyIGxvY2FsZSA9IGxhbmd1YWdlIHx8IHN0YXRlLnNlbGVjdGVkOwogICAgICB2YXIgY2FjaGVLZXkgPSAiIi5jb25jYXQobG9jYWxlLCAiLyIpLmNvbmNhdChrZXkpOwogICAgICB2YXIgZm9ybWF0dGVyID0gaW50bENhY2hlW2NhY2hlS2V5XTsKICAgICAgaWYgKCFmb3JtYXR0ZXIpIHsKICAgICAgICB2YXIgX21zZzsKICAgICAgICB2YXIgbXNnID0gZ2V0KHN0YXRlLnRyYW5zbGF0aW9uc1tsb2NhbGVdLCBrZXkpOwogICAgICAgIGlmICghbXNnKSB7CiAgICAgICAgICBtc2cgPSBnZXQoc3RhdGUudHJhbnNsYXRpb25zW3N0YXRlLmRlZmF1bHRdLCBrZXkpOwogICAgICAgIH0KICAgICAgICBpZiAobXNnID09PSB1bmRlZmluZWQpIHsKICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICAgICAgfQogICAgICAgIGlmIChfdHlwZW9mKG1zZykgPT09ICdvYmplY3QnKSB7CiAgICAgICAgICBjb25zb2xlLmVycm9yKCdUcmFuc2xhdGlvbiBmb3InLCBjYWNoZUtleSwgJ2lzIGFuIG9iamVjdCcpOyAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLWNvbnNvbGUKCiAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgICBpZiAoKF9tc2cgPSBtc2cpICE9PSBudWxsICYmIF9tc2cgIT09IHZvaWQgMCAmJiBfbXNnLmluY2x1ZGVzKCd7JykpIHsKICAgICAgICAgIGZvcm1hdHRlciA9IG5ldyBJbnRsTWVzc2FnZUZvcm1hdChtc2csIGxvY2FsZSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGZvcm1hdHRlciA9IG1zZzsKICAgICAgICB9CiAgICAgICAgaW50bENhY2hlW2NhY2hlS2V5XSA9IGZvcm1hdHRlcjsKICAgICAgfQogICAgICBpZiAodHlwZW9mIGZvcm1hdHRlciA9PT0gJ3N0cmluZycpIHsKICAgICAgICByZXR1cm4gZm9ybWF0dGVyOwogICAgICB9IGVsc2UgaWYgKGZvcm1hdHRlciAmJiBmb3JtYXR0ZXIuZm9ybWF0KSB7CiAgICAgICAgLy8gSW5qZWN0IHRoaW5ncyBsaWtlIGFwcE5hbWUgc28gdGhleSdyZSBhbHdheXMgYXZhaWxhYmxlIGluIGFueSB0cmFuc2xhdGlvbgogICAgICAgIHZhciBtb3JlQXJncyA9IF9vYmplY3RTcHJlYWQoewogICAgICAgICAgdmVuZG9yOiBnZXRWZW5kb3IoKSwKICAgICAgICAgIGFwcE5hbWU6IGdldFByb2R1Y3QoKSwKICAgICAgICAgIGRvY3NCYXNlOiBET0NTX0JBU0UKICAgICAgICB9LCBhcmdzKTsKICAgICAgICByZXR1cm4gZm9ybWF0dGVyLmZvcm1hdChtb3JlQXJncyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuICc/JzsKICAgICAgfQogICAgfTsKICB9LAogIGV4aXN0czogZnVuY3Rpb24gZXhpc3RzKHN0YXRlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKGtleSwgbGFuZ3VhZ2UpIHsKICAgICAgdmFyIGxvY2FsZSA9IGxhbmd1YWdlIHx8IHN0YXRlLnNlbGVjdGVkOwogICAgICB2YXIgY2FjaGVLZXkgPSAiIi5jb25jYXQobG9jYWxlLCAiLyIpLmNvbmNhdChrZXkpOwogICAgICBpZiAoaW50bENhY2hlW2NhY2hlS2V5XSkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHZhciBtc2cgPSBnZXQoc3RhdGUudHJhbnNsYXRpb25zW3N0YXRlLmRlZmF1bHRdLCBrZXkpOwogICAgICBpZiAoIW1zZyAmJiBsb2NhbGUgJiYgbG9jYWxlICE9PSBOT05FKSB7CiAgICAgICAgbXNnID0gZ2V0KHN0YXRlLnRyYW5zbGF0aW9uc1tsb2NhbGVdLCBrZXkpOwogICAgICB9CiAgICAgIGlmIChtc2cgIT09IHVuZGVmaW5lZCkgewogICAgICAgIHJldHVybiB0cnVlOwogICAgICB9CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH07CiAgfSwKICBjdXJyZW50OiBmdW5jdGlvbiBjdXJyZW50KHN0YXRlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKCkgewogICAgICByZXR1cm4gc3RhdGUuc2VsZWN0ZWQ7CiAgICB9OwogIH0sCiAgZGVmYXVsdDogZnVuY3Rpb24gX2RlZmF1bHQoc3RhdGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoKSB7CiAgICAgIHJldHVybiBzdGF0ZS5kZWZhdWx0OwogICAgfTsKICB9LAogIG11bHRpV2l0aEZhbGxiYWNrOiBmdW5jdGlvbiBtdWx0aVdpdGhGYWxsYmFjayhzdGF0ZSwgZ2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChpdGVtcykgewogICAgICB2YXIga2V5ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiAna2V5JzsKICAgICAgcmV0dXJuIGl0ZW1zLm1hcChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIGl0ZW1ba2V5XSA9IGdldHRlcnMud2l0aEZhbGxiYWNrKGl0ZW1ba2V5XSwgbnVsbCwgaXRlbVtrZXldKTsKICAgICAgICByZXR1cm4gaXRlbTsKICAgICAgfSk7CiAgICB9OwogIH0sCiAgd2l0aEZhbGxiYWNrOiBmdW5jdGlvbiB3aXRoRmFsbGJhY2soc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoa2V5LCBhcmdzLCBmYWxsYmFjaykgewogICAgICB2YXIgZmFsbGJhY2tJc0tleSA9IGFyZ3VtZW50cy5sZW5ndGggPiAzICYmIGFyZ3VtZW50c1szXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzNdIDogZmFsc2U7CiAgICAgIC8vIFN1cHBvcnQgd2l0aEZhbGxiYWNrKGtleSxmYWxsYmFjaykgd2hlbiBubyBhcmdzCiAgICAgIGlmICghZmFsbGJhY2sgJiYgdHlwZW9mIGFyZ3MgPT09ICdzdHJpbmcnKSB7CiAgICAgICAgZmFsbGJhY2sgPSBhcmdzOwogICAgICAgIGFyZ3MgPSB7fTsKICAgICAgfQogICAgICBpZiAoZ2V0dGVycy5leGlzdHMoa2V5KSkgewogICAgICAgIHJldHVybiBnZXR0ZXJzLnQoa2V5LCBhcmdzKTsKICAgICAgfSBlbHNlIGlmIChmYWxsYmFja0lzS2V5KSB7CiAgICAgICAgcmV0dXJuIGdldHRlcnMudChmYWxsYmFjaywgYXJncyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIGZhbGxiYWNrOwogICAgICB9CiAgICB9OwogIH0KfTsKZXhwb3J0IHZhciBtdXRhdGlvbnMgPSB7CiAgbG9hZFRyYW5zbGF0aW9uczogZnVuY3Rpb24gbG9hZFRyYW5zbGF0aW9ucyhzdGF0ZSwgX3JlZikgewogICAgdmFyIGxvY2FsZSA9IF9yZWYubG9jYWxlLAogICAgICB0cmFuc2xhdGlvbnMgPSBfcmVmLnRyYW5zbGF0aW9uczsKICAgIHN0YXRlLnRyYW5zbGF0aW9uc1tsb2NhbGVdID0gdHJhbnNsYXRpb25zOwogIH0sCiAgbWVyZ2VMb2FkVHJhbnNsYXRpb25zOiBmdW5jdGlvbiBtZXJnZUxvYWRUcmFuc2xhdGlvbnMoc3RhdGUsIF9yZWYyKSB7CiAgICB2YXIgbG9jYWxlID0gX3JlZjIubG9jYWxlLAogICAgICB0cmFuc2xhdGlvbnMgPSBfcmVmMi50cmFuc2xhdGlvbnM7CiAgICBpZiAoIXN0YXRlLnRyYW5zbGF0aW9uc1tsb2NhbGVdKSB7CiAgICAgIHN0YXRlLnRyYW5zbGF0aW9uc1tsb2NhbGVdID0gdHJhbnNsYXRpb25zOwogICAgfSBlbHNlIHsKICAgICAgbWVyZ2Uoc3RhdGUudHJhbnNsYXRpb25zW2xvY2FsZV0sIHRyYW5zbGF0aW9ucyk7CiAgICB9CiAgfSwKICBzZXRTZWxlY3RlZDogZnVuY3Rpb24gc2V0U2VsZWN0ZWQoc3RhdGUsIGxvY2FsZSkgewogICAgLy8gdGhpcyB3aWxsIHNldCB0aGUgbGFuZyBwYXJhbSBvbiBIVE1MIChiZXN0IHBsYWNlIHRvIGFkZCB0aGlzIGFjdGlvbiBzaW5jZSBhbGwgbG9jYWxlIGNoYW5nZXMgZ28gdGhyb3VnaCB0aGlzIG11dGF0aW9uKQogICAgaWYgKGxvY2FsZSA9PT0gTk9ORSkgewogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykucmVtb3ZlQXR0cmlidXRlKCdsYW5nJyk7CiAgICB9IGVsc2UgewogICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdodG1sJykuc2V0QXR0cmlidXRlKCdsYW5nJywgbG9jYWxlKTsKICAgIH0KICAgIHN0YXRlLnNlbGVjdGVkID0gbG9jYWxlOwogIH0sCiAgLy8gQWRkIGEgbG9jYWxlIHRvIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBsb2NhbGVzCiAgYWRkTG9jYWxlOiBmdW5jdGlvbiBhZGRMb2NhbGUoc3RhdGUsIF9yZWYzKSB7CiAgICB2YXIgbG9jYWxlID0gX3JlZjMubG9jYWxlLAogICAgICBsYWJlbCA9IF9yZWYzLmxhYmVsOwogICAgdmFyIGhhc0xvY2FsZSA9IHN0YXRlLmF2YWlsYWJsZS5maW5kKGZ1bmN0aW9uIChsKSB7CiAgICAgIHJldHVybiBsID09PSBsb2NhbGU7CiAgICB9KTsKICAgIGlmICghaGFzTG9jYWxlKSB7CiAgICAgIHZhciBfc3RhdGUkdHJhbnNsYXRpb25zJHM7CiAgICAgIHN0YXRlLmF2YWlsYWJsZS5wdXNoKGxvY2FsZSk7CiAgICAgIGlmICghKChfc3RhdGUkdHJhbnNsYXRpb25zJHMgPSBzdGF0ZS50cmFuc2xhdGlvbnNbc3RhdGUuZGVmYXVsdF0pICE9PSBudWxsICYmIF9zdGF0ZSR0cmFuc2xhdGlvbnMkcyAhPT0gdm9pZCAwICYmIChfc3RhdGUkdHJhbnNsYXRpb25zJHMgPSBfc3RhdGUkdHJhbnNsYXRpb25zJHMubG9jYWxlKSAhPT0gbnVsbCAmJiBfc3RhdGUkdHJhbnNsYXRpb25zJHMgIT09IHZvaWQgMCAmJiBfc3RhdGUkdHJhbnNsYXRpb25zJHNbbG9jYWxlXSkpIHsKICAgICAgICBzdGF0ZS50cmFuc2xhdGlvbnNbc3RhdGUuZGVmYXVsdF0ubG9jYWxlW2xvY2FsZV0gPSBsYWJlbDsKICAgICAgfQogICAgfQogIH0sCiAgLy8gUmVtb3ZlIGxvY2FsZQogIHJlbW92ZUxvY2FsZTogZnVuY3Rpb24gcmVtb3ZlTG9jYWxlKHN0YXRlLCBsb2NhbGUpIHsKICAgIHZhciBpbmRleCA9IHN0YXRlLmF2YWlsYWJsZS5maW5kSW5kZXgoZnVuY3Rpb24gKGwpIHsKICAgICAgcmV0dXJuIGwgPT09IGxvY2FsZTsKICAgIH0pOwogICAgaWYgKGluZGV4ICE9PSAtMSkgewogICAgICBzdGF0ZS5hdmFpbGFibGUuc3BsaWNlKGluZGV4LCAxKTsKICAgICAgaWYgKHN0YXRlLnRyYW5zbGF0aW9uc1tsb2NhbGVdKSB7CiAgICAgICAgZGVsZXRlIHN0YXRlLnRyYW5zbGF0aW9uc1tsb2NhbGVdOwogICAgICB9CiAgICB9CiAgfQp9OwpleHBvcnQgdmFyIGFjdGlvbnMgPSB7CiAgaW5pdDogZnVuY3Rpb24gaW5pdChfcmVmNCkgewogICAgdmFyIHN0YXRlID0gX3JlZjQuc3RhdGUsCiAgICAgIGNvbW1pdCA9IF9yZWY0LmNvbW1pdCwKICAgICAgZGlzcGF0Y2ggPSBfcmVmNC5kaXNwYXRjaCwKICAgICAgcm9vdEdldHRlcnMgPSBfcmVmNC5yb290R2V0dGVyczsKICAgIHZhciBzZWxlY3RlZCA9IHJvb3RHZXR0ZXJzWydwcmVmcy9nZXQnXSgnbG9jYWxlJyk7CgogICAgLy8gV2UgbWlnaHQgYmUgdXNpbmcgYSBsb2NhbGUgdGhhdCBpcyBsb2FkZWQgYnkgYSBwbHVnaW4gdGhhdCBpcyBubyBsb25nZXIgbG9hZGVkCiAgICB2YXIgZXhpc3RzID0gISFzdGF0ZS5hdmFpbGFibGUuZmluZChmdW5jdGlvbiAobG9jKSB7CiAgICAgIHJldHVybiBsb2MgPT09IHNlbGVjdGVkOwogICAgfSk7CiAgICBpZiAoIXNlbGVjdGVkIHx8ICFleGlzdHMpIHsKICAgICAgc2VsZWN0ZWQgPSBzdGF0ZS5kZWZhdWx0OwogICAgfQogICAgcmV0dXJuIGRpc3BhdGNoKCdzd2l0Y2hUbycsIHNlbGVjdGVkKTsKICB9LAogIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoX3JlZjUsIGxvY2FsZSkgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIGNvbW1pdCwgdHJhbnNsYXRpb25zTW9kdWxlLCB0cmFuc2xhdGlvbnM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIGNvbW1pdCA9IF9yZWY1LmNvbW1pdDsKICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDM7CiAgICAgICAgICAgIHJldHVybiBsb2FkVHJhbnNsYXRpb24obG9jYWxlKTsKICAgICAgICAgIGNhc2UgMzoKICAgICAgICAgICAgdHJhbnNsYXRpb25zTW9kdWxlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgdHJhbnNsYXRpb25zID0gdHJhbnNsYXRpb25zTW9kdWxlLmRlZmF1bHQgfHwgdHJhbnNsYXRpb25zTW9kdWxlOwogICAgICAgICAgICBjb21taXQoJ2xvYWRUcmFuc2xhdGlvbnMnLCB7CiAgICAgICAgICAgICAgbG9jYWxlOiBsb2NhbGUsCiAgICAgICAgICAgICAgdHJhbnNsYXRpb25zOiB0cmFuc2xhdGlvbnMKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5hYnJ1cHQoInJldHVybiIsIHRydWUpOwogICAgICAgICAgY2FzZSA3OgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUpOwogICAgfSkpKCk7CiAgfSwKICBtZXJnZUxvYWQ6IGZ1bmN0aW9uIG1lcmdlTG9hZChfcmVmNiwgX3JlZjcpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKCkgewogICAgICB2YXIgY29tbWl0LCBsb2NhbGUsIG1vZHVsZSwgcHJvbWlzZSwgdHJhbnNsYXRpb25zTW9kdWxlLCB0cmFuc2xhdGlvbnM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQyLnByZXYgPSBfY29udGV4dDIubmV4dCkgewogICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICBjb21taXQgPSBfcmVmNi5jb21taXQ7CiAgICAgICAgICAgIGxvY2FsZSA9IF9yZWY3LmxvY2FsZSwgbW9kdWxlID0gX3JlZjcubW9kdWxlOwogICAgICAgICAgICBwcm9taXNlID0gdHlwZW9mIG1vZHVsZSA9PT0gJ2Z1bmN0aW9uJyA/IG1vZHVsZSgpIDogUHJvbWlzZS5yZXNvbHZlKG1vZHVsZSk7CiAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gNTsKICAgICAgICAgICAgcmV0dXJuIHByb21pc2U7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIHRyYW5zbGF0aW9uc01vZHVsZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICB0cmFuc2xhdGlvbnMgPSB0cmFuc2xhdGlvbnNNb2R1bGUuZGVmYXVsdCB8fCB0cmFuc2xhdGlvbnNNb2R1bGU7CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuYWJydXB0KCJyZXR1cm4iLCBjb21taXQoJ21lcmdlTG9hZFRyYW5zbGF0aW9ucycsIHsKICAgICAgICAgICAgICBsb2NhbGU6IGxvY2FsZSwKICAgICAgICAgICAgICB0cmFuc2xhdGlvbnM6IHRyYW5zbGF0aW9ucwogICAgICAgICAgICB9KSk7CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICB9CiAgICAgIH0sIF9jYWxsZWUyKTsKICAgIH0pKSgpOwogIH0sCiAgLy8gQWRkIGEgbG9jYWxlIHRvIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBsb2NhbGVzCiAgYWRkTG9jYWxlOiBmdW5jdGlvbiBhZGRMb2NhbGUoX3JlZjgsIF9yZWY5KSB7CiAgICB2YXIgY29tbWl0ID0gX3JlZjguY29tbWl0OwogICAgdmFyIGxvY2FsZSA9IF9yZWY5LmxvY2FsZSwKICAgICAgbGFiZWwgPSBfcmVmOS5sYWJlbDsKICAgIGNvbW1pdCgnYWRkTG9jYWxlJywgewogICAgICBsb2NhbGU6IGxvY2FsZSwKICAgICAgbGFiZWw6IGxhYmVsCiAgICB9KTsKICB9LAogIC8vIFJlbW92ZSBhIGxvY2FsZSBmcm9tIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBsb2NhbGVzCiAgcmVtb3ZlTG9jYWxlOiBmdW5jdGlvbiByZW1vdmVMb2NhbGUoX3JlZjEwLCBfcmVmMTEpIHsKICAgIHZhciBjb21taXQgPSBfcmVmMTAuY29tbWl0LAogICAgICBnZXR0ZXJzID0gX3JlZjEwLmdldHRlcnMsCiAgICAgIGRpc3BhdGNoID0gX3JlZjEwLmRpc3BhdGNoOwogICAgdmFyIGxvY2FsZSA9IF9yZWYxMS5sb2NhbGU7CiAgICB2YXIgY3VycmVudCA9IGdldHRlcnNbJ2N1cnJlbnQnXSgpOwoKICAgIC8vIElmIHdlIGFyZSByZW1vdmluZyB0aGUgY3VycmVudCBsb2NhbGUsIHN3aXRjaCBiYWNrIHRvIHRoZSBkZWZhdWx0IGxvY2FsZQogICAgaWYgKGN1cnJlbnQgPT09IGxvY2FsZSkgewogICAgICBkaXNwYXRjaCgnc3dpdGNoVG8nLCBERUZBVUxUX0xPQ0FMRSk7CiAgICB9CiAgICBjb21taXQoJ3JlbW92ZUxvY2FsZScsIGxvY2FsZSk7CiAgfSwKICBzd2l0Y2hUbzogZnVuY3Rpb24gc3dpdGNoVG8oX3JlZjEyLCBsb2NhbGUpIHsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICB2YXIgX3Jvb3RTdGF0ZSQkcGx1Z2luLCBfcm9vdFN0YXRlJCRwbHVnaW4yOwogICAgICB2YXIgc3RhdGUsIHJvb3RTdGF0ZSwgY29tbWl0LCBkaXNwYXRjaCwgZ2V0dGVycywgY3VycmVudExvY2FsZSwgbGFzdExvYWQsIGkxOG5FeHQsIHJlbG9hZCwgcDsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHN0YXRlID0gX3JlZjEyLnN0YXRlLCByb290U3RhdGUgPSBfcmVmMTIucm9vdFN0YXRlLCBjb21taXQgPSBfcmVmMTIuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYxMi5kaXNwYXRjaCwgZ2V0dGVycyA9IF9yZWYxMi5nZXR0ZXJzOwogICAgICAgICAgICBjdXJyZW50TG9jYWxlID0gZ2V0dGVyc1snY3VycmVudCddKCk7CiAgICAgICAgICAgIGlmICghKGxvY2FsZSA9PT0gTk9ORSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDU7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY29tbWl0KCdzZXRTZWxlY3RlZCcsIGxvY2FsZSk7CgogICAgICAgICAgICAvLyBEb24ndCByZW1lbWJlciBpbnRvIGNvb2tpZQogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgIGxhc3RMb2FkID0gKF9yb290U3RhdGUkJHBsdWdpbiA9IHJvb3RTdGF0ZS4kcGx1Z2luKSA9PT0gbnVsbCB8fCBfcm9vdFN0YXRlJCRwbHVnaW4gPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yb290U3RhdGUkJHBsdWdpbi5sYXN0TG9hZDsKICAgICAgICAgICAgaTE4bkV4dCA9IChfcm9vdFN0YXRlJCRwbHVnaW4yID0gcm9vdFN0YXRlLiRwbHVnaW4pID09PSBudWxsIHx8IF9yb290U3RhdGUkJHBsdWdpbjIgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yb290U3RhdGUkJHBsdWdpbjIuZ2V0RHluYW1pYygnbDEwbicsIGxvY2FsZSk7CiAgICAgICAgICAgIHJlbG9hZCA9IGxhc3RMb2FkZWQgPCBsYXN0TG9hZDsKICAgICAgICAgICAgbGFzdExvYWRlZCA9IGxhc3RMb2FkOwogICAgICAgICAgICBpZiAoISghc3RhdGUudHJhbnNsYXRpb25zW2xvY2FsZV0gfHwgcmVsb2FkKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxMDsKICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMzsKICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdsb2FkJywgbG9jYWxlKTsKICAgICAgICAgIGNhc2UgMTM6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMjA7CiAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgY2FzZSAxNToKICAgICAgICAgICAgX2NvbnRleHQzLnByZXYgPSAxNTsKICAgICAgICAgICAgX2NvbnRleHQzLnQwID0gX2NvbnRleHQzWyJjYXRjaCJdKDEwKTsKICAgICAgICAgICAgaWYgKCEoIWkxOG5FeHQgJiYgbG9jYWxlICE9PSBERUZBVUxUX0xPQ0FMRSkpIHsKICAgICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDIwOwogICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIFRyeSB0byBzaG93IHNvbWV0aGluZy4uLiB3ZSBjb3VsZCBub3QgbG9hZCB0aGUgbG9jYWxlIGZyb20gdGhlIGJ1aWx0LWluIHRyYW5zbGF0aW9ucwogICAgICAgICAgICAvLyBhbmQgdGhlcmUgYXJlIG5vIHBsdWdpbnMgcHJvdmlkaW5nIHRyYW5zbGF0aW9ucwogICAgICAgICAgICBjb21taXQoJ3NldFNlbGVjdGVkJywgREVGQVVMVF9MT0NBTEUpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICBjYXNlIDIwOgogICAgICAgICAgICBpZiAoIShpMThuRXh0ICYmIGkxOG5FeHQubGVuZ3RoKSkgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMzM7CiAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgcCA9IFtdOwogICAgICAgICAgICBpMThuRXh0LmZvckVhY2goZnVuY3Rpb24gKGZuKSB7CiAgICAgICAgICAgICAgcC5wdXNoKGRpc3BhdGNoKCdtZXJnZUxvYWQnLCB7CiAgICAgICAgICAgICAgICBsb2NhbGU6IGxvY2FsZSwKICAgICAgICAgICAgICAgIG1vZHVsZTogZm4KICAgICAgICAgICAgICB9KSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBfY29udGV4dDMucHJldiA9IDIzOwogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDI2OwogICAgICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocCk7CiAgICAgICAgICBjYXNlIDI2OgogICAgICAgICAgICBfY29udGV4dDMubmV4dCA9IDMzOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIGNhc2UgMjg6CiAgICAgICAgICAgIF9jb250ZXh0My5wcmV2ID0gMjg7CiAgICAgICAgICAgIF9jb250ZXh0My50MSA9IF9jb250ZXh0M1siY2F0Y2giXSgyMyk7CiAgICAgICAgICAgIGlmICghKGxvY2FsZSAhPT0gREVGQVVMVF9MT0NBTEUpKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAzMzsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb21taXQoJ3NldFNlbGVjdGVkJywgREVGQVVMVF9MT0NBTEUpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIik7CiAgICAgICAgICBjYXNlIDMzOgogICAgICAgICAgICBjb21taXQoJ3NldFNlbGVjdGVkJywgbG9jYWxlKTsKCiAgICAgICAgICAgIC8vIE9ueSB1cGRhdGUgdGhlIHByZWZlcmVuY2UgaWYgdGhlIGxvY2FsZSBjaGFuZ2VkCiAgICAgICAgICAgIGlmIChjdXJyZW50TG9jYWxlICE9PSBsb2NhbGUpIHsKICAgICAgICAgICAgICBkaXNwYXRjaCgncHJlZnMvc2V0JywgewogICAgICAgICAgICAgICAga2V5OiAnbG9jYWxlJywKICAgICAgICAgICAgICAgIHZhbHVlOiBzdGF0ZS5zZWxlY3RlZAogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgY2FzZSAzNToKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDMuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTMsIG51bGwsIFtbMTAsIDE1XSwgWzIzLCAyOF1dKTsKICAgIH0pKSgpOwogIH0sCiAgdG9nZ2xlTm9uZTogZnVuY3Rpb24gdG9nZ2xlTm9uZShfcmVmMTMpIHsKICAgIHZhciBzdGF0ZSA9IF9yZWYxMy5zdGF0ZSwKICAgICAgZGlzcGF0Y2ggPSBfcmVmMTMuZGlzcGF0Y2g7CiAgICBpZiAoc3RhdGUuc2VsZWN0ZWQgPT09IE5PTkUpIHsKICAgICAgcmV0dXJuIGRpc3BhdGNoKCdzd2l0Y2hUbycsIHN0YXRlLnByZXZpb3VzIHx8IHN0YXRlLmRlZmF1bHQpOwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuIGRpc3BhdGNoKCdzd2l0Y2hUbycsIE5PTkUpOwogICAgfQogIH0KfTs="},{"version":3,"names":["merge","IntlMessageFormat","get","en","getProduct","getVendor","DOCS_BASE","loadTranslation","NONE","DEFAULT_LOCALE","intlCache","lastLoaded","state","available","out","default","selected","previous","translations","_defineProperty","getters","selectedLocaleLabel","key","concat","availableLocales","_iterator","_createForOfIteratorHelper","_step","s","n","done","locale","value","err","e","f","t","args","language","cacheKey","formatter","_msg","msg","undefined","_typeof","console","error","includes","format","moreArgs","_objectSpread","vendor","appName","docsBase","exists","current","_default","multiWithFallback","items","arguments","length","map","item","withFallback","fallback","fallbackIsKey","mutations","loadTranslations","_ref","mergeLoadTranslations","_ref2","setSelected","document","querySelector","removeAttribute","setAttribute","addLocale","_ref3","label","hasLocale","find","l","_state$translations$s","push","removeLocale","index","findIndex","splice","actions","init","_ref4","commit","dispatch","rootGetters","loc","load","_ref5","_asyncToGenerator","regeneratorRuntime","mark","_callee","translationsModule","wrap","_callee$","_context","prev","next","sent","abrupt","stop","mergeLoad","_ref6","_ref7","_callee2","module","promise","_callee2$","_context2","Promise","resolve","_ref8","_ref9","_ref10","_ref11","switchTo","_ref12","_callee3","_rootState$$plugin","_rootState$$plugin2","rootState","currentLocale","lastLoad","i18nExt","reload","p","_callee3$","_context3","$plugin","getDynamic","t0","forEach","fn","all","t1","root","toggleNone","_ref13"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/store/i18n.js"],"sourcesContent":["import merge from 'lodash/merge';\nimport IntlMessageFormat from 'intl-messageformat';\nimport { get } from '@shell/utils/object';\nimport en from '@shell/assets/translations/en-us.yaml';\nimport { getProduct, getVendor, DOCS_BASE } from '@shell/config/private-label';\nimport { loadTranslation } from '@shell/utils/dynamic-importer';\n\nconst NONE = 'none';\nconst DEFAULT_LOCALE = 'en-us';\n\n// Formatters can't be serialized into state\nconst intlCache = {};\n\nlet lastLoaded = 0;\n\nexport const state = function() {\n  // const translationContext = require.context('@shell/assets/translations', true, /.*/);\n  // const available = translationContext.keys().map(path => path.replace(/^.*\\/([^\\/]+)\\.[^.]+$/, '$1'));\n  // Using require.context() forces them to all be in the same webpack chunk name... just hardcode the list for now so zh-hans\n  // gets generated as it's own chunk instead of being loaded all the time.\n  const available = [DEFAULT_LOCALE, 'zh-hans'];\n\n  const out = {\n    default:      DEFAULT_LOCALE,\n    selected:     null,\n    previous:     null,\n    available,\n    translations: { [DEFAULT_LOCALE]: en },\n  };\n\n  return out;\n};\n\nexport const getters = {\n  selectedLocaleLabel(state) {\n    const key = `locale.${ state.selected }`;\n\n    if ( state.selected === NONE ) {\n      return `%${ key }%`;\n    } else {\n      return get(state.translations[state.default], key);\n    }\n  },\n\n  availableLocales(state, getters) {\n    const out = {};\n\n    for ( const locale of state.available ) {\n      const key = `locale.${ locale }`;\n\n      if ( state.selected === NONE ) {\n        out[locale] = `%${ key }%`;\n      } else {\n        out[locale] = get(state.translations[state.default], key);\n      }\n    }\n\n    return out;\n  },\n\n  t: (state) => (key, args, language) => {\n    if (state.selected === NONE && !language) {\n      return `%${ key }%`;\n    }\n\n    const locale = language || state.selected;\n    const cacheKey = `${ locale }/${ key }`;\n    let formatter = intlCache[cacheKey];\n\n    if ( !formatter ) {\n      let msg = get(state.translations[locale], key);\n\n      if ( !msg ) {\n        msg = get(state.translations[state.default], key);\n      }\n\n      if ( msg === undefined ) {\n        return undefined;\n      }\n\n      if ( typeof msg === 'object' ) {\n        console.error('Translation for', cacheKey, 'is an object'); // eslint-disable-line no-console\n\n        return undefined;\n      }\n\n      if ( msg?.includes('{')) {\n        formatter = new IntlMessageFormat(msg, locale);\n      } else {\n        formatter = msg;\n      }\n\n      intlCache[cacheKey] = formatter;\n    }\n\n    if ( typeof formatter === 'string' ) {\n      return formatter;\n    } else if ( formatter && formatter.format ) {\n      // Inject things like appName so they're always available in any translation\n      const moreArgs = {\n        vendor:   getVendor(),\n        appName:  getProduct(),\n        docsBase: DOCS_BASE,\n        ...args\n      };\n\n      return formatter.format(moreArgs);\n    } else {\n      return '?';\n    }\n  },\n\n  exists: (state) => (key, language) => {\n    const locale = language || state.selected;\n    const cacheKey = `${ locale }/${ key }`;\n\n    if ( intlCache[cacheKey] ) {\n      return true;\n    }\n\n    let msg = get(state.translations[state.default], key);\n\n    if ( !msg && locale && locale !== NONE ) {\n      msg = get(state.translations[locale], key);\n    }\n\n    if ( msg !== undefined ) {\n      return true;\n    }\n\n    return false;\n  },\n\n  current: (state) => () => {\n    return state.selected;\n  },\n\n  default: (state) => () => {\n    return state.default;\n  },\n\n  multiWithFallback: (state, getters) => (items, key = 'key') => {\n    return items.map((item) => {\n      item[key] = getters.withFallback(item[key], null, item[key]);\n\n      return item;\n    });\n  },\n\n  withFallback: (state, getters) => (key, args, fallback, fallbackIsKey = false) => {\n    // Support withFallback(key,fallback) when no args\n    if ( !fallback && typeof args === 'string' ) {\n      fallback = args;\n      args = {};\n    }\n\n    if ( getters.exists(key) ) {\n      return getters.t(key, args);\n    } else if ( fallbackIsKey ) {\n      return getters.t(fallback, args);\n    } else {\n      return fallback;\n    }\n  },\n\n};\n\nexport const mutations = {\n  loadTranslations(state, { locale, translations }) {\n    state.translations[locale] = translations;\n  },\n\n  mergeLoadTranslations(state, { locale, translations }) {\n    if (!state.translations[locale]) {\n      state.translations[locale] = translations;\n    } else {\n      merge(state.translations[locale], translations);\n    }\n  },\n\n  setSelected(state, locale) {\n    // this will set the lang param on HTML (best place to add this action since all locale changes go through this mutation)\n    if (locale === NONE) {\n      document.querySelector('html').removeAttribute('lang');\n    } else {\n      document.querySelector('html').setAttribute('lang', locale);\n    }\n\n    state.selected = locale;\n  },\n\n  // Add a locale to the list of available locales\n  addLocale(state, { locale, label }) {\n    const hasLocale = state.available.find((l) => l === locale);\n\n    if (!hasLocale) {\n      state.available.push(locale);\n      if (!state.translations[state.default]?.locale?.[locale]) {\n        state.translations[state.default].locale[locale] = label;\n      }\n    }\n  },\n\n  // Remove locale\n  removeLocale(state, locale) {\n    const index = state.available.findIndex((l) => l === locale);\n\n    if (index !== -1) {\n      state.available.splice(index, 1);\n\n      if (state.translations[locale]) {\n        delete state.translations[locale];\n      }\n    }\n  }\n};\n\nexport const actions = {\n  init({\n    state, commit, dispatch, rootGetters\n  }) {\n    let selected = rootGetters['prefs/get']('locale');\n\n    // We might be using a locale that is loaded by a plugin that is no longer loaded\n    const exists = !!state.available.find((loc) => loc === selected);\n\n    if ( !selected || !exists) {\n      selected = state.default;\n    }\n\n    return dispatch('switchTo', selected);\n  },\n\n  async load({ commit }, locale) {\n    const translationsModule = await loadTranslation(locale);\n    const translations = translationsModule.default || translationsModule;\n\n    commit('loadTranslations', { locale, translations });\n\n    return true;\n  },\n\n  async mergeLoad({ commit }, { locale, module }) {\n    const promise = typeof (module) === 'function' ? module() : Promise.resolve(module);\n    const translationsModule = await promise;\n    const translations = translationsModule.default || translationsModule;\n\n    return commit('mergeLoadTranslations', { locale, translations });\n  },\n\n  // Add a locale to the list of available locales\n  addLocale({ commit }, { locale, label }) {\n    commit('addLocale', { locale, label });\n  },\n\n  // Remove a locale from the list of available locales\n  removeLocale({ commit, getters, dispatch }, { locale }) {\n    const current = getters['current']();\n\n    // If we are removing the current locale, switch back to the default locale\n    if (current === locale) {\n      dispatch('switchTo', DEFAULT_LOCALE);\n    }\n\n    commit('removeLocale', locale );\n  },\n\n  async switchTo({\n    state,\n    rootState,\n    commit,\n    dispatch,\n    getters\n  }, locale) {\n    const currentLocale = getters['current']();\n\n    if ( locale === NONE ) {\n      commit('setSelected', locale);\n\n      // Don't remember into cookie\n      return;\n    }\n\n    const lastLoad = rootState.$plugin?.lastLoad;\n    const i18nExt = rootState.$plugin?.getDynamic('l10n', locale);\n    const reload = lastLoaded < lastLoad;\n\n    lastLoaded = lastLoad;\n\n    if ( !state.translations[locale] || reload) {\n      try {\n        await dispatch('load', locale);\n      } catch (e) {\n        if (!i18nExt && locale !== DEFAULT_LOCALE) {\n          // Try to show something... we could not load the locale from the built-in translations\n          // and there are no plugins providing translations\n          commit('setSelected', DEFAULT_LOCALE);\n\n          return;\n        }\n      }\n\n      // Load all of the locales from the plugins\n      if (i18nExt && i18nExt.length) {\n        const p = [];\n\n        i18nExt.forEach((fn) => {\n          p.push(dispatch('mergeLoad', { locale, module: fn }));\n        });\n\n        try {\n          await Promise.all(p);\n        } catch (e) {\n          if (locale !== DEFAULT_LOCALE) {\n            commit('setSelected', DEFAULT_LOCALE);\n\n            return;\n          }\n        }\n      }\n    }\n\n    commit('setSelected', locale);\n\n    // Ony update the preference if the locale changed\n    if (currentLocale !== locale) {\n      dispatch('prefs/set', {\n        key:   'locale',\n        value: state.selected\n      }, { root: true });\n    }\n  },\n\n  toggleNone({ state, dispatch }) {\n    if ( state.selected === NONE ) {\n      return dispatch('switchTo', state.previous || state.default);\n    } else {\n      return dispatch('switchTo', NONE);\n    }\n  }\n};\n"],"mappings":"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"}]}