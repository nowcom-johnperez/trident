{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/secret/registry.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/secret/registry.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5rZXlzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuaW5jbHVkZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaW5jbHVkZXMuanMiOwppbXBvcnQgeyBMYWJlbGVkSW5wdXQgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL0xhYmVsZWRJbnB1dCc7CmltcG9ydCB7IFJhZGlvR3JvdXAgfSBmcm9tICdAY29tcG9uZW50cy9Gb3JtL1JhZGlvJzsKZXhwb3J0IGRlZmF1bHQgewogIGNvbXBvbmVudHM6IHsKICAgIExhYmVsZWRJbnB1dDogTGFiZWxlZElucHV0LAogICAgUmFkaW9Hcm91cDogUmFkaW9Hcm91cAogIH0sCiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0sCiAgICBtb2RlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgX2F1dGhzJHJlZ2lzdHJ5VXJsLCBfYXV0aHMkcmVnaXN0cnlVcmwyOwogICAgdmFyIHJlZ2lzdHJ5UHJvdmlkZXIgPSAnQ3VzdG9tJzsKICAgIHZhciBhdXRoczsKICAgIHRyeSB7CiAgICAgIHZhciBwYXJzZWQgPSBKU09OLnBhcnNlKHRoaXMudmFsdWUuZGVjb2RlZERhdGFbJy5kb2NrZXJjb25maWdqc29uJ10pOwogICAgICBhdXRocyA9IHBhcnNlZC5hdXRoczsKICAgIH0gY2F0Y2ggKGUpIHt9CiAgICBhdXRocyA9IGF1dGhzIHx8IHt9OwogICAgdmFyIHJlZ2lzdHJ5VXJsID0gT2JqZWN0LmtleXMoYXV0aHMpWzBdIHx8ICcnOwogICAgaWYgKHJlZ2lzdHJ5VXJsID09PSAnaW5kZXguZG9ja2VyLmlvL3YxLycpIHsKICAgICAgcmVnaXN0cnlQcm92aWRlciA9ICdEb2NrZXJIdWInOwogICAgfSBlbHNlIGlmIChyZWdpc3RyeVVybCA9PT0gJ3F1YXkuaW8nKSB7CiAgICAgIHJlZ2lzdHJ5UHJvdmlkZXIgPSAnUXVheS5pbyc7CiAgICB9IGVsc2UgaWYgKHJlZ2lzdHJ5VXJsLmluY2x1ZGVzKCdhcnRpZmFjdG9yeScpKSB7CiAgICAgIHJlZ2lzdHJ5UHJvdmlkZXIgPSAnQXJ0aWZhY3RvcnknOwogICAgfQogICAgdmFyIHVzZXJuYW1lID0gKChfYXV0aHMkcmVnaXN0cnlVcmwgPSBhdXRoc1tyZWdpc3RyeVVybF0pID09PSBudWxsIHx8IF9hdXRocyRyZWdpc3RyeVVybCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2F1dGhzJHJlZ2lzdHJ5VXJsLnVzZXJuYW1lKSB8fCAnJzsKICAgIHZhciBwYXNzd29yZCA9ICgoX2F1dGhzJHJlZ2lzdHJ5VXJsMiA9IGF1dGhzW3JlZ2lzdHJ5VXJsXSkgPT09IG51bGwgfHwgX2F1dGhzJHJlZ2lzdHJ5VXJsMiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2F1dGhzJHJlZ2lzdHJ5VXJsMi5wYXNzd29yZCkgfHwgJyc7CiAgICByZXR1cm4gewogICAgICByZWdpc3RyeVByb3ZpZGVyOiByZWdpc3RyeVByb3ZpZGVyLAogICAgICB1c2VybmFtZTogdXNlcm5hbWUsCiAgICAgIHBhc3N3b3JkOiBwYXNzd29yZCwKICAgICAgcmVnaXN0cnlVcmw6IHJlZ2lzdHJ5VXJsCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIHJlZ2lzdHJ5QWRkcmVzc2VzOiBmdW5jdGlvbiByZWdpc3RyeUFkZHJlc3NlcygpIHsKICAgICAgcmV0dXJuIFsnQ3VzdG9tJywgJ0RvY2tlckh1YicsICdRdWF5LmlvJywgJ0FydGlmYWN0b3J5J107CiAgICB9LAogICAgbmVlZHNEb2NrZXJTZXJ2ZXI6IGZ1bmN0aW9uIG5lZWRzRG9ja2VyU2VydmVyKCkgewogICAgICByZXR1cm4gdGhpcy5yZWdpc3RyeVByb3ZpZGVyID09PSAnQXJ0aWZhY3RvcnknIHx8IHRoaXMucmVnaXN0cnlQcm92aWRlciA9PT0gJ0N1c3RvbSc7CiAgICB9LAogICAgZG9ja2VyY29uZmlnanNvbjogZnVuY3Rpb24gZG9ja2VyY29uZmlnanNvbigpIHsKICAgICAgdmFyIGRvY2tlclNlcnZlciA9IHRoaXMucmVnaXN0cnlQcm92aWRlciA9PT0gJ0RvY2tlckh1YicgPyAnaW5kZXguZG9ja2VyLmlvL3YxLycgOiAncXVheS5pbyc7CiAgICAgIGlmICh0aGlzLm5lZWRzRG9ja2VyU2VydmVyKSB7CiAgICAgICAgZG9ja2VyU2VydmVyID0gdGhpcy5yZWdpc3RyeVVybDsKICAgICAgfQogICAgICBpZiAoZG9ja2VyU2VydmVyKSB7CiAgICAgICAgdmFyIGNvbmZpZyA9IHsKICAgICAgICAgIGF1dGhzOiBfZGVmaW5lUHJvcGVydHkoe30sIGRvY2tlclNlcnZlciwgewogICAgICAgICAgICB1c2VybmFtZTogdGhpcy51c2VybmFtZSwKICAgICAgICAgICAgcGFzc3dvcmQ6IHRoaXMucGFzc3dvcmQKICAgICAgICAgIH0pCiAgICAgICAgfTsKICAgICAgICB2YXIganNvbiA9IEpTT04uc3RyaW5naWZ5KGNvbmZpZyk7CiAgICAgICAgcmV0dXJuIGpzb247CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICByZWdpc3RyeVByb3ZpZGVyOiAndXBkYXRlJywKICAgIHJlZ2lzdHJ5VXJsOiAndXBkYXRlJywKICAgIHVzZXJuYW1lOiAndXBkYXRlJywKICAgIHBhc3N3b3JkOiAndXBkYXRlJwogIH0sCiAgbWV0aG9kczogewogICAgdXBkYXRlOiBmdW5jdGlvbiB1cGRhdGUoKSB7CiAgICAgIHRoaXMudmFsdWUuc2V0RGF0YSgnLmRvY2tlcmNvbmZpZ2pzb24nLCB0aGlzLmRvY2tlcmNvbmZpZ2pzb24pOwogICAgfQogIH0KfTs="},{"version":3,"names":["LabeledInput","RadioGroup","components","props","value","type","Object","required","mode","String","data","_auths$registryUrl","_auths$registryUrl2","registryProvider","auths","parsed","JSON","parse","decodedData","e","registryUrl","keys","includes","username","password","computed","registryAddresses","needsDockerServer","dockerconfigjson","dockerServer","config","_defineProperty","json","stringify","watch","methods","update","setData"],"sources":["node_modules/@rancher/shell/edit/secret/registry.vue"],"sourcesContent":["<script>\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { RadioGroup } from '@components/Form/Radio';\n\nexport default {\n  components: { LabeledInput, RadioGroup },\n\n  props: {\n    value: {\n      type:     Object,\n      required: true,\n    },\n\n    mode: {\n      type:     String,\n      required: true,\n    }\n  },\n\n  data() {\n    let registryProvider = 'Custom';\n\n    let auths;\n\n    try {\n      const parsed = JSON.parse(this.value.decodedData['.dockerconfigjson']);\n\n      auths = parsed.auths;\n    } catch (e) {}\n\n    auths = auths || {};\n\n    const registryUrl = Object.keys(auths)[0] || '';\n\n    if (registryUrl === 'index.docker.io/v1/') {\n      registryProvider = 'DockerHub';\n    } else if (registryUrl === 'quay.io') {\n      registryProvider = 'Quay.io';\n    } else if (registryUrl.includes('artifactory')) {\n      registryProvider = 'Artifactory';\n    }\n\n    const username = auths[registryUrl]?.username || '';\n    const password = auths[registryUrl]?.password || '';\n\n    return {\n      registryProvider,\n      username,\n      password,\n      registryUrl,\n    };\n  },\n\n  computed: {\n    registryAddresses() {\n      return ['Custom', 'DockerHub', 'Quay.io', 'Artifactory'];\n    },\n\n    needsDockerServer() {\n      return this.registryProvider === 'Artifactory' || this.registryProvider === 'Custom';\n    },\n\n    dockerconfigjson() {\n      let dockerServer = this.registryProvider === 'DockerHub' ? 'index.docker.io/v1/' : 'quay.io';\n\n      if (this.needsDockerServer) {\n        dockerServer = this.registryUrl;\n      }\n\n      if (dockerServer) {\n        const config = {\n          auths: {\n            [dockerServer]: {\n              username: this.username,\n              password: this.password,\n            }\n          }\n        };\n        const json = JSON.stringify(config);\n\n        return json;\n      } else {\n        return null;\n      }\n    },\n  },\n\n  watch: {\n    registryProvider: 'update',\n    registryUrl:      'update',\n    username:         'update',\n    password:         'update',\n  },\n\n  methods: {\n    update() {\n      this.value.setData('.dockerconfigjson', this.dockerconfigjson);\n    },\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row mb-10\">\n      <div class=\"col span-12\">\n        <RadioGroup\n          v-model=\"registryProvider\"\n          name=\"registryProvider\"\n          :mode=\"mode\"\n          :options=\"registryAddresses\"\n        />\n      </div>\n    </div>\n    <div\n      v-if=\"needsDockerServer\"\n      class=\"row mb-20\"\n    >\n      <LabeledInput\n        v-model=\"registryUrl\"\n        required\n        :label=\"t('secret.registry.domainName')\"\n        placeholder=\"e.g. index.docker.io\"\n        :mode=\"mode\"\n      />\n    </div>\n    <div class=\"row mb-20\">\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"username\"\n          :label=\"t('secret.registry.username')\"\n          :mode=\"mode\"\n        />\n      </div>\n      <div class=\"col span-6\">\n        <LabeledInput\n          v-model=\"password\"\n          :label=\"t('secret.registry.password')\"\n          :mode=\"mode\"\n          type=\"password\"\n        />\n      </div>\n    </div>\n  </div>\n</template>\n"],"mappings":";;;;AACA,SAAAA,YAAA;AACA,SAAAC,UAAA;AAEA;EACAC,UAAA;IAAAF,YAAA,EAAAA,YAAA;IAAAC,UAAA,EAAAA;EAAA;EAEAE,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IAEAC,IAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,QAAA;IACA;EACA;EAEAG,IAAA,WAAAA,KAAA;IAAA,IAAAC,kBAAA,EAAAC,mBAAA;IACA,IAAAC,gBAAA;IAEA,IAAAC,KAAA;IAEA;MACA,IAAAC,MAAA,GAAAC,IAAA,CAAAC,KAAA,MAAAb,KAAA,CAAAc,WAAA;MAEAJ,KAAA,GAAAC,MAAA,CAAAD,KAAA;IACA,SAAAK,CAAA;IAEAL,KAAA,GAAAA,KAAA;IAEA,IAAAM,WAAA,GAAAd,MAAA,CAAAe,IAAA,CAAAP,KAAA;IAEA,IAAAM,WAAA;MACAP,gBAAA;IACA,WAAAO,WAAA;MACAP,gBAAA;IACA,WAAAO,WAAA,CAAAE,QAAA;MACAT,gBAAA;IACA;IAEA,IAAAU,QAAA,KAAAZ,kBAAA,GAAAG,KAAA,CAAAM,WAAA,eAAAT,kBAAA,uBAAAA,kBAAA,CAAAY,QAAA;IACA,IAAAC,QAAA,KAAAZ,mBAAA,GAAAE,KAAA,CAAAM,WAAA,eAAAR,mBAAA,uBAAAA,mBAAA,CAAAY,QAAA;IAEA;MACAX,gBAAA,EAAAA,gBAAA;MACAU,QAAA,EAAAA,QAAA;MACAC,QAAA,EAAAA,QAAA;MACAJ,WAAA,EAAAA;IACA;EACA;EAEAK,QAAA;IACAC,iBAAA,WAAAA,kBAAA;MACA;IACA;IAEAC,iBAAA,WAAAA,kBAAA;MACA,YAAAd,gBAAA,2BAAAA,gBAAA;IACA;IAEAe,gBAAA,WAAAA,iBAAA;MACA,IAAAC,YAAA,QAAAhB,gBAAA;MAEA,SAAAc,iBAAA;QACAE,YAAA,QAAAT,WAAA;MACA;MAEA,IAAAS,YAAA;QACA,IAAAC,MAAA;UACAhB,KAAA,EAAAiB,eAAA,KACAF,YAAA;YACAN,QAAA,OAAAA,QAAA;YACAC,QAAA,OAAAA;UACA;QAEA;QACA,IAAAQ,IAAA,GAAAhB,IAAA,CAAAiB,SAAA,CAAAH,MAAA;QAEA,OAAAE,IAAA;MACA;QACA;MACA;IACA;EACA;EAEAE,KAAA;IACArB,gBAAA;IACAO,WAAA;IACAG,QAAA;IACAC,QAAA;EACA;EAEAW,OAAA;IACAC,MAAA,WAAAA,OAAA;MACA,KAAAhC,KAAA,CAAAiC,OAAA,2BAAAT,gBAAA;IACA;EACA;AACA"}]}