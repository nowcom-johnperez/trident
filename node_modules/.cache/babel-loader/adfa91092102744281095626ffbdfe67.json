{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/LiveExpiryDate.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/formatter/LiveExpiryDate.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGRheSBmcm9tICdkYXlqcyc7CmltcG9ydCB7IHNhZmVTZXRUaW1lb3V0IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3RpbWUnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIHZhbHVlOiB7CiAgICAgIHR5cGU6IFN0cmluZywKICAgICAgZGVmYXVsdDogJycKICAgIH0sCiAgICByb3c6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc3RhdGU6IHRoaXMudXBkYXRlKCkKICAgIH07CiAgfSwKICBjb21wdXRlZDogewogICAgc3RhdGVWYWx1ZTogZnVuY3Rpb24gc3RhdGVWYWx1ZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuc3RhdGU7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdmFsdWU6IGZ1bmN0aW9uIHZhbHVlKCkgewogICAgICB0aGlzLnVwZGF0ZSgpOwogICAgfQogIH0sCiAgYmVmb3JlRGVzdHJveTogZnVuY3Rpb24gYmVmb3JlRGVzdHJveSgpIHsKICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHVwZGF0ZTogZnVuY3Rpb24gdXBkYXRlKCkgewogICAgICB2YXIgc3RhdGUgPSB0aGlzLnJvdy5zdGF0ZTsKICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpOwogICAgICBpZiAoc3RhdGUgIT09ICdleHBpcmVkJyAmJiB0aGlzLnZhbHVlKSB7CiAgICAgICAgLy8gTm90IGV4cGlyZWQgYW5kIGhhcyBhbiBleHBpcnkgZGF0ZSwgc28gc2V0IGEgdGltZXIgdG8gdXBkYXRlIHRoZSBzdGF0ZSBvbmNlIGl0cyBleHBpcmVkCiAgICAgICAgdmFyIGV4cGlyeSA9IGRheSh0aGlzLnZhbHVlKTsKICAgICAgICB2YXIgbm93ID0gZGF5KCk7CiAgICAgICAgdmFyIHRpbWVUb0V4cGlyZSA9IGV4cGlyeS5kaWZmKG5vdyk7CiAgICAgICAgdGhpcy50aW1lciA9IHNhZmVTZXRUaW1lb3V0KHRpbWVUb0V4cGlyZSwgdGhpcy51cGRhdGUsIHRoaXMpOwogICAgICB9CiAgICAgIHZhciBvdXQgPSB7fTsKICAgICAgb3V0LmV4cGlyZXNBdCA9IHRoaXMudmFsdWU7CiAgICAgIG91dC5pc0V4cGlyZWQgPSBzdGF0ZSA9PT0gJ2V4cGlyZWQnOwogICAgICB0aGlzLnN0YXRlID0gb3V0OwogICAgICByZXR1cm4gb3V0OwogICAgfQogIH0KfTs="},{"version":3,"names":["day","safeSetTimeout","props","value","type","String","default","row","Object","_default","data","state","update","computed","stateValue","watch","beforeDestroy","clearTimeout","timer","methods","expiry","now","timeToExpire","diff","out","expiresAt","isExpired"],"sources":["node_modules/@rancher/shell/components/formatter/LiveExpiryDate.vue"],"sourcesContent":["<script>\nimport day from 'dayjs';\nimport { safeSetTimeout } from '@shell/utils/time';\n\nexport default {\n  props: {\n    value: {\n      type:    String,\n      default: '',\n    },\n    row: {\n      type:    Object,\n      default: () => {}\n    },\n  },\n\n  data() {\n    return { state: this.update() };\n  },\n\n  computed: {\n    stateValue() {\n      return this.state;\n    }\n  },\n\n  watch: {\n    value() {\n      this.update();\n    }\n  },\n\n  beforeDestroy() {\n    clearTimeout(this.timer);\n  },\n\n  methods: {\n    update() {\n      const state = this.row.state;\n\n      clearTimeout(this.timer);\n      if (state !== 'expired' && this.value) {\n        // Not expired and has an expiry date, so set a timer to update the state once its expired\n        const expiry = day(this.value);\n        const now = day();\n        const timeToExpire = expiry.diff(now);\n\n        this.timer = safeSetTimeout(timeToExpire, this.update, this);\n      }\n\n      const out = {};\n\n      out.expiresAt = this.value;\n      out.isExpired = state === 'expired';\n      this.state = out;\n\n      return out;\n    }\n  }\n};\n</script>\n\n<template>\n  <span\n    v-if=\"stateValue.isExpired\"\n    class=\"text-error\"\n  >\n    <LiveDate\n      :value=\"stateValue.expiresAt\"\n      :add-suffix=\"true\"\n    />\n  </span>\n  <LiveDate\n    v-else-if=\"stateValue.expiresAt\"\n    :value=\"stateValue.expiresAt\"\n    :add-suffix=\"false\"\n  />\n  <span\n    v-else\n    v-t=\"'generic.never'\"\n    class=\"text-muted\"\n  />\n</template>\n"],"mappings":"AACA,OAAAA,GAAA;AACA,SAAAC,cAAA;AAEA;EACAC,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IACAC,GAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA,WAAAG,SAAA;IACA;EACA;EAEAC,IAAA,WAAAA,KAAA;IACA;MAAAC,KAAA,OAAAC,MAAA;IAAA;EACA;EAEAC,QAAA;IACAC,UAAA,WAAAA,WAAA;MACA,YAAAH,KAAA;IACA;EACA;EAEAI,KAAA;IACAZ,KAAA,WAAAA,MAAA;MACA,KAAAS,MAAA;IACA;EACA;EAEAI,aAAA,WAAAA,cAAA;IACAC,YAAA,MAAAC,KAAA;EACA;EAEAC,OAAA;IACAP,MAAA,WAAAA,OAAA;MACA,IAAAD,KAAA,QAAAJ,GAAA,CAAAI,KAAA;MAEAM,YAAA,MAAAC,KAAA;MACA,IAAAP,KAAA,uBAAAR,KAAA;QACA;QACA,IAAAiB,MAAA,GAAApB,GAAA,MAAAG,KAAA;QACA,IAAAkB,GAAA,GAAArB,GAAA;QACA,IAAAsB,YAAA,GAAAF,MAAA,CAAAG,IAAA,CAAAF,GAAA;QAEA,KAAAH,KAAA,GAAAjB,cAAA,CAAAqB,YAAA,OAAAV,MAAA;MACA;MAEA,IAAAY,GAAA;MAEAA,GAAA,CAAAC,SAAA,QAAAtB,KAAA;MACAqB,GAAA,CAAAE,SAAA,GAAAf,KAAA;MACA,KAAAA,KAAA,GAAAa,GAAA;MAEA,OAAAA,GAAA;IACA;EACA;AACA"}]}