{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/networking.istio.io.destinationrule/LoadBalancer.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/networking.istio.io.destinationrule/LoadBalancer.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IExhYmVsZWRTZWxlY3QgZnJvbSAnQHNoZWxsL2NvbXBvbmVudHMvZm9ybS9MYWJlbGVkU2VsZWN0JzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgeyBSYWRpb0dyb3VwIH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9SYWRpbyc7CmltcG9ydCB7IGdldCB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwpleHBvcnQgZGVmYXVsdCB7CiAgY29tcG9uZW50czogewogICAgUmFkaW9Hcm91cDogUmFkaW9Hcm91cCwKICAgIExhYmVsZWRTZWxlY3Q6IExhYmVsZWRTZWxlY3QsCiAgICBMYWJlbGVkSW5wdXQ6IExhYmVsZWRJbnB1dAogIH0sCiAgcHJvcHM6IHsKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICBkZWZhdWx0OiAnZWRpdCcKICAgIH0sCiAgICAvLyBkZXN0aW5hdGlvbnJ1bGUuc3BlYy50cmFmZmljUG9saWN5LmxvYWRCYWxhbmNlcgogICAgdmFsdWU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiBmdW5jdGlvbiBfZGVmYXVsdCgpIHt9CiAgICB9CiAgfSwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgLy8gYXR0ZW1wdCB0byBpbml0aWFsaXplIHVzZVNpbXBsZSBhbmQgaGFzaE1vZGUgb2ZmIGV4aXN0aW5nIHByb3BlcnRpZXMgc28gdGhlIHJpZ2h0IHJhZGlvIG9wdHMgYXJlIHNlbGVjdGVkIHdoZW4gbW9kZT1lZGl0CiAgICB2YXIgdXNlU2ltcGxlID0gISF0aGlzLnZhbHVlLnNpbXBsZTsKICAgIHZhciBoYXNoTW9kZTsKICAgIGlmICghIWdldCh0aGlzLnZhbHVlLCAnY29uc2lzdGVudEhhc2guaHR0cEhlYWRlck5hbWUnKSkgewogICAgICBoYXNoTW9kZSA9ICd1c2VIZWFkZXInOwogICAgfSBlbHNlIGlmICghIWdldCh0aGlzLnZhbHVlLCAnY29uc2lzdGVudEhhc2guaHR0cENvb2tpZScpKSB7CiAgICAgIGhhc2hNb2RlID0gJ3VzZUNvb2tpZSc7CiAgICB9IGVsc2UgaWYgKCEhZ2V0KHRoaXMudmFsdWUsICdjb25zaXN0ZW50SGFzaC51c2VTb3VyY2VJcCcpKSB7CiAgICAgIGhhc2hNb2RlID0gJ3VzZUlQJzsKICAgIH0KICAgIHJldHVybiB7CiAgICAgIHVzZVNpbXBsZTogdXNlU2ltcGxlLAogICAgICBoYXNoTW9kZTogaGFzaE1vZGUsCiAgICAgIHNpbXBsZU9wdGlvbnM6IFsnUk9VTkRfUk9CSU4nLCAnTEVBU1RfQ09OTicsICdSQU5ET00nLCAnUEFTU1RIUk9VR0gnXSwKICAgICAgbW9kZU9wdGlvbnM6IFt7CiAgICAgICAgbGFiZWw6IHRoaXMudCgnaXN0aW8uZGVzdGluYXRpb25SdWxlLmxvYWRCYWxhbmNlci5zaW1wbGUubGFiZWwnKSwKICAgICAgICB2YWx1ZTogdHJ1ZQogICAgICB9LCB7CiAgICAgICAgbGFiZWw6IHRoaXMudCgnaXN0aW8uZGVzdGluYXRpb25SdWxlLmxvYWRCYWxhbmNlci5jb25zaXN0ZW50SGFzaC5sYWJlbCcpLAogICAgICAgIHZhbHVlOiBmYWxzZQogICAgICB9XSwKICAgICAgaGFzaE1vZGVPcHRpb25zOiBbewogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2lzdGlvLmRlc3RpbmF0aW9uUnVsZS5sb2FkQmFsYW5jZXIuY29uc2lzdGVudEhhc2gubW9kZS5oZWFkZXIubGFiZWwnKSwKICAgICAgICB2YWx1ZTogJ3VzZUhlYWRlcicKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2lzdGlvLmRlc3RpbmF0aW9uUnVsZS5sb2FkQmFsYW5jZXIuY29uc2lzdGVudEhhc2gubW9kZS5jb29raWUubGFiZWwnKSwKICAgICAgICB2YWx1ZTogJ3VzZUNvb2tpZScKICAgICAgfSwgewogICAgICAgIGxhYmVsOiB0aGlzLnQoJ2lzdGlvLmRlc3RpbmF0aW9uUnVsZS5sb2FkQmFsYW5jZXIuY29uc2lzdGVudEhhc2gubW9kZS5zb3VyY2VJcC5sYWJlbCcpLAogICAgICAgIHZhbHVlOiAndXNlSXAnCiAgICAgIH1dCiAgICB9OwogIH0sCiAgd2F0Y2g6IHsKICAgIHVzZVNpbXBsZTogZnVuY3Rpb24gdXNlU2ltcGxlKG5ldSkgewogICAgICBpZiAobmV1KSB7CiAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUuY29uc2lzdGVudEhhc2g7CiAgICAgICAgdGhpcy52YWx1ZS5zaW1wbGUgPSB0aGlzLnNpbXBsZU9wdGlvbnNbMF07CiAgICAgIH0gZWxzZSB7CiAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUuc2ltcGxlOwogICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLCAnY29uc2lzdGVudEhhc2gnLCB7CiAgICAgICAgICBtaW5pbXVtUmluZ1NpemU6IDEwMjQKICAgICAgICB9KTsKICAgICAgICAvLyBzZXQgaGFzaE1vZGUgaGVyZSB0byB0cmlnZ2VyIHdhdGNoZXIgYW5kIGluaXRpYWxpemUgcmVsZXZhbnQgb2JqZWN0IHByb3BzCiAgICAgICAgdGhpcy5oYXNoTW9kZSA9ICd1c2VIZWFkZXInOwogICAgICB9CiAgICB9LAogICAgaGFzaE1vZGU6IGZ1bmN0aW9uIGhhc2hNb2RlKG5ldSkgewogICAgICBzd2l0Y2ggKG5ldSkgewogICAgICAgIGNhc2UgJ3VzZUhlYWRlcic6CiAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5jb25zaXN0ZW50SGFzaC5odHRwQ29va2llOwogICAgICAgICAgZGVsZXRlIHRoaXMudmFsdWUuY29uc2lzdGVudEhhc2gudXNlU291cmNlSXA7CiAgICAgICAgICB0aGlzLiRzZXQodGhpcy52YWx1ZS5jb25zaXN0ZW50SGFzaCwgJ2h0dHBIZWFkZXJOYW1lJywgJycpOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgY2FzZSAndXNlQ29va2llJzoKICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLmNvbnNpc3RlbnRIYXNoLmh0dHBIZWFkZXJOYW1lOwogICAgICAgICAgdGhpcy4kc2V0KHRoaXMudmFsdWUuY29uc2lzdGVudEhhc2gsICdodHRwQ29va2llJywge30pOwogICAgICAgICAgYnJlYWs7CiAgICAgICAgZGVmYXVsdDoKICAgICAgICAgIGRlbGV0ZSB0aGlzLnZhbHVlLmNvbnNpc3RlbnRIYXNoLmh0dHBDb29raWU7CiAgICAgICAgICBkZWxldGUgdGhpcy52YWx1ZS5jb25zaXN0ZW50SGFzaC5odHRwSGVhZGVyTmFtZTsKICAgICAgICAgIHRoaXMuJHNldCh0aGlzLnZhbHVlLmNvbnNpc3RlbnRIYXNoLCAndXNlU291cmNlSXAnLCB0cnVlKTsKICAgICAgICAgIGJyZWFrOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["LabeledSelect","LabeledInput","RadioGroup","get","components","props","mode","type","String","default","value","Object","_default","data","useSimple","simple","hashMode","simpleOptions","modeOptions","label","t","hashModeOptions","watch","neu","consistentHash","$set","minimumRingSize","httpCookie","useSourceIp","httpHeaderName"],"sources":["node_modules/@rancher/shell/edit/networking.istio.io.destinationrule/LoadBalancer.vue"],"sourcesContent":["<script>\nimport LabeledSelect from '@shell/components/form/LabeledSelect';\nimport { LabeledInput } from '@components/Form/LabeledInput';\nimport { RadioGroup } from '@components/Form/Radio';\nimport { get } from '@shell/utils/object';\n\nexport default {\n\n  components: {\n    RadioGroup,\n    LabeledSelect,\n    LabeledInput\n  },\n\n  props: {\n    mode: {\n      type:    String,\n      default: 'edit'\n    },\n\n    // destinationrule.spec.trafficPolicy.loadBalancer\n    value: {\n      type:    Object,\n      default: () => {}\n    }\n  },\n\n  data() {\n    // attempt to initialize useSimple and hashMode off existing properties so the right radio opts are selected when mode=edit\n    const useSimple = !!this.value.simple;\n    let hashMode;\n\n    if (!!get(this.value, 'consistentHash.httpHeaderName')) {\n      hashMode = 'useHeader';\n    } else if (!!get(this.value, 'consistentHash.httpCookie')) {\n      hashMode = 'useCookie';\n    } else if (!!get(this.value, 'consistentHash.useSourceIp')) {\n      hashMode = 'useIP';\n    }\n\n    return {\n      useSimple,\n      hashMode,\n\n      simpleOptions: ['ROUND_ROBIN', 'LEAST_CONN', 'RANDOM', 'PASSTHROUGH'],\n      modeOptions:   [\n        {\n          label: this.t('istio.destinationRule.loadBalancer.simple.label'),\n          value: true\n        }, {\n          label: this.t('istio.destinationRule.loadBalancer.consistentHash.label'),\n          value: false\n        },\n      ],\n      hashModeOptions: [\n        {\n          label: this.t('istio.destinationRule.loadBalancer.consistentHash.mode.header.label'),\n          value: 'useHeader'\n        },\n        {\n          label: this.t('istio.destinationRule.loadBalancer.consistentHash.mode.cookie.label'),\n          value: 'useCookie'\n        },\n        {\n          label: this.t('istio.destinationRule.loadBalancer.consistentHash.mode.sourceIp.label'),\n          value: 'useIp'\n        }\n      ],\n    };\n  },\n\n  watch: {\n    useSimple(neu) {\n      if (neu) {\n        delete this.value.consistentHash;\n        this.value.simple = this.simpleOptions[0];\n      } else {\n        delete this.value.simple;\n        this.$set(this.value, 'consistentHash', { minimumRingSize: 1024 });\n        // set hashMode here to trigger watcher and initialize relevant object props\n        this.hashMode = 'useHeader';\n      }\n    },\n\n    hashMode(neu) {\n      switch (neu) {\n      case 'useHeader':\n        delete this.value.consistentHash.httpCookie;\n        delete this.value.consistentHash.useSourceIp;\n        this.$set(this.value.consistentHash, 'httpHeaderName', '');\n        break;\n      case 'useCookie':\n        delete this.value.consistentHash.httpHeaderName;\n        this.$set(this.value.consistentHash, 'httpCookie', {});\n        break;\n      default:\n        delete this.value.consistentHash.httpCookie;\n        delete this.value.consistentHash.httpHeaderName;\n        this.$set(this.value.consistentHash, 'useSourceIp', true);\n        break;\n      }\n    }\n  }\n};\n</script>\n\n<template>\n  <div>\n    <div class=\"row\">\n      <RadioGroup\n        v-model=\"useSimple\"\n        name=\"loadBalancer\"\n        :mode=\"mode\"\n        :options=\"modeOptions\"\n      />\n    </div>\n    <div\n      v-if=\"useSimple\"\n      class=\"row\"\n    >\n      <div class=\"col span-6\">\n        <LabeledSelect\n          v-model=\"value.simple\"\n          :options=\"simpleOptions\"\n          :label=\"t('istio.destinationRule.loadBalancer.label')\"\n          :mode=\"mode\"\n        />\n      </div>\n    </div>\n    <template v-else>\n      <div class=\"row mt-20\">\n        <div class=\"col span-6\">\n          <RadioGroup\n            v-model=\"hashMode\"\n            name=\"HashOptions\"\n            :mode=\"mode\"\n            :options=\"hashModeOptions\"\n            :label=\"t('istio.destinationRule.loadBalancer.consistentHash.mode.label')\"\n          />\n        </div>\n      </div>\n      <div class=\"row mb-20\">\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.consistentHash.minimumRingSize\"\n            :label=\"t('istio.destinationRule.loadBalancer.consistentHash.minimumRingSize.label')\"\n            type=\"number\"\n          />\n        </div>\n      </div>\n      <div\n        v-if=\"hashMode === 'useHeader'\"\n        class=\"row\"\n      >\n        <div class=\"col span-6\">\n          <LabeledInput\n            v-model=\"value.consistentHash.httpHeaderName\"\n            :label=\"t('istio.destinationRule.loadBalancer.consistentHash.httpHeaderName.label')\"\n            :placeholder=\"t('istio.destinationRule.loadBalancer.consistentHash.httpHeaderName.placeholder')\"\n          />\n        </div>\n      </div>\n\n      <div\n        v-if=\"hashMode === 'useCookie'\"\n        class=\"row\"\n      >\n        <div class=\"col span-4\">\n          <LabeledInput\n            v-model=\"value.consistentHash.httpCookie.name\"\n            :label=\"t('istio.destinationRule.loadBalancer.consistentHash.httpCookie.name.label')\"\n            :placeholder=\"t('istio.destinationRule.loadBalancer.consistentHash.httpCookie.name.placeholder')\"\n            required\n          />\n        </div>\n        <div class=\"col span-4\">\n          <LabeledInput\n            v-model=\"value.consistentHash.httpCookie.path\"\n            :label=\"t('istio.destinationRule.loadBalancer.consistentHash.httpCookie.path.label')\"\n            :placeholder=\"t('istio.destinationRule.loadBalancer.consistentHash.httpCookie.path.placeholder')\"\n          />\n        </div>\n        <div class=\"col span-4\">\n          <LabeledInput\n            v-model=\"value.consistentHash.httpCookie.ttl\"\n            :label=\"t('istio.destinationRule.loadBalancer.consistentHash.httpCookie.ttl.label')\"\n            :placeholder=\"t('istio.destinationRule.loadBalancer.consistentHash.httpCookie.ttl.placeholder')\"\n            required\n          />\n        </div>\n      </div>\n    </template>\n  </div>\n</template>\n"],"mappings":"AACA,OAAAA,aAAA;AACA,SAAAC,YAAA;AACA,SAAAC,UAAA;AACA,SAAAC,GAAA;AAEA;EAEAC,UAAA;IACAF,UAAA,EAAAA,UAAA;IACAF,aAAA,EAAAA,aAAA;IACAC,YAAA,EAAAA;EACA;EAEAI,KAAA;IACAC,IAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,OAAA;IACA;IAEA;IACAC,KAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,OAAA,WAAAG,SAAA;IACA;EACA;EAEAC,IAAA,WAAAA,KAAA;IACA;IACA,IAAAC,SAAA,UAAAJ,KAAA,CAAAK,MAAA;IACA,IAAAC,QAAA;IAEA,MAAAb,GAAA,MAAAO,KAAA;MACAM,QAAA;IACA,aAAAb,GAAA,MAAAO,KAAA;MACAM,QAAA;IACA,aAAAb,GAAA,MAAAO,KAAA;MACAM,QAAA;IACA;IAEA;MACAF,SAAA,EAAAA,SAAA;MACAE,QAAA,EAAAA,QAAA;MAEAC,aAAA;MACAC,WAAA,GACA;QACAC,KAAA,OAAAC,CAAA;QACAV,KAAA;MACA;QACAS,KAAA,OAAAC,CAAA;QACAV,KAAA;MACA,EACA;MACAW,eAAA,GACA;QACAF,KAAA,OAAAC,CAAA;QACAV,KAAA;MACA,GACA;QACAS,KAAA,OAAAC,CAAA;QACAV,KAAA;MACA,GACA;QACAS,KAAA,OAAAC,CAAA;QACAV,KAAA;MACA;IAEA;EACA;EAEAY,KAAA;IACAR,SAAA,WAAAA,UAAAS,GAAA;MACA,IAAAA,GAAA;QACA,YAAAb,KAAA,CAAAc,cAAA;QACA,KAAAd,KAAA,CAAAK,MAAA,QAAAE,aAAA;MACA;QACA,YAAAP,KAAA,CAAAK,MAAA;QACA,KAAAU,IAAA,MAAAf,KAAA;UAAAgB,eAAA;QAAA;QACA;QACA,KAAAV,QAAA;MACA;IACA;IAEAA,QAAA,WAAAA,SAAAO,GAAA;MACA,QAAAA,GAAA;QACA;UACA,YAAAb,KAAA,CAAAc,cAAA,CAAAG,UAAA;UACA,YAAAjB,KAAA,CAAAc,cAAA,CAAAI,WAAA;UACA,KAAAH,IAAA,MAAAf,KAAA,CAAAc,cAAA;UACA;QACA;UACA,YAAAd,KAAA,CAAAc,cAAA,CAAAK,cAAA;UACA,KAAAJ,IAAA,MAAAf,KAAA,CAAAc,cAAA;UACA;QACA;UACA,YAAAd,KAAA,CAAAc,cAAA,CAAAG,UAAA;UACA,YAAAjB,KAAA,CAAAc,cAAA,CAAAK,cAAA;UACA,KAAAJ,IAAA,MAAAf,KAAA,CAAAc,cAAA;UACA;MACA;IACA;EACA;AACA"}]}