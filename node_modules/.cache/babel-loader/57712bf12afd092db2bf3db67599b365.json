{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--17-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/pod-security-admission.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/pod-security-admission.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmdldC1vd24tcHJvcGVydHktZGVzY3JpcHRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9ycy5qcyI7CmltcG9ydCBfZGVmaW5lUHJvcGVydHkgZnJvbSAiQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vZGVmaW5lUHJvcGVydHkiOwpmdW5jdGlvbiBvd25LZXlzKGUsIHIpIHsgdmFyIHQgPSBPYmplY3Qua2V5cyhlKTsgaWYgKE9iamVjdC5nZXRPd25Qcm9wZXJ0eVN5bWJvbHMpIHsgdmFyIG8gPSBPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKGUpOyByICYmIChvID0gby5maWx0ZXIoZnVuY3Rpb24gKHIpIHsgcmV0dXJuIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSwgcikuZW51bWVyYWJsZTsgfSkpLCB0LnB1c2guYXBwbHkodCwgbyk7IH0gcmV0dXJuIHQ7IH0KZnVuY3Rpb24gX29iamVjdFNwcmVhZChlKSB7IGZvciAodmFyIHIgPSAxOyByIDwgYXJndW1lbnRzLmxlbmd0aDsgcisrKSB7IHZhciB0ID0gbnVsbCAhPSBhcmd1bWVudHNbcl0gPyBhcmd1bWVudHNbcl0gOiB7fTsgciAlIDIgPyBvd25LZXlzKE9iamVjdCh0KSwgITApLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgX2RlZmluZVByb3BlcnR5KGUsIHIsIHRbcl0pOyB9KSA6IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzID8gT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoZSwgT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcnModCkpIDogb3duS2V5cyhPYmplY3QodCkpLmZvckVhY2goZnVuY3Rpb24gKHIpIHsgT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsIHIsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IodCwgcikpOyB9KTsgfSByZXR1cm4gZTsgfQppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UuanMiOwppbXBvcnQgeyByZWR1Y2UsIGZpbHRlciwga2V5cyB9IGZyb20gJ2xvZGFzaCc7CmltcG9ydCB7IFBTQUxhYmVsUHJlZml4LCBQU0FMYWJlbHNOYW1lc3BhY2VzIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9wb2Qtc2VjdXJpdHktYWRtaXNzaW9uJzsKaW1wb3J0IHsgY2FtZWxUb1RpdGxlIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3N0cmluZyc7Ci8qKgogKiBSZXR1cm4gUFNBIGxhYmVscyBwcmVzZW50IGluIHRoZSByZXNvdXJjZQogKiBAcmV0dXJucyBzdHJpbmdbXQogKi8KZXhwb3J0IHZhciBnZXRQU0FMYWJlbHMgPSBmdW5jdGlvbiBnZXRQU0FMYWJlbHMocmVzb3VyY2UpIHsKICB2YXIgX2E7CiAgcmV0dXJuIGZpbHRlcihrZXlzKChfYSA9IHJlc291cmNlID09PSBudWxsIHx8IHJlc291cmNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNvdXJjZS5tZXRhZGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxhYmVscyksIGZ1bmN0aW9uIChrZXkpIHsKICAgIHJldHVybiBQU0FMYWJlbHNOYW1lc3BhY2VzLmluY2x1ZGVzKGtleSk7CiAgfSk7Cn07Ci8qKgogKiBSZXR1cm4gYm9vbGVhbiB2YWx1ZSBpZiB0aGUgbGFiZWwgaXMgYSBQU0EgbGFiZWwKICogQHJldHVybnMgQm9vbGVhbgogKi8KZXhwb3J0IHZhciBoYXNQU0FMYWJlbHMgPSBmdW5jdGlvbiBoYXNQU0FMYWJlbHMocmVzb3VyY2UpIHsKICByZXR1cm4gZ2V0UFNBTGFiZWxzKHJlc291cmNlKS5sZW5ndGggPiAwOwp9OwovKioKICogR2VuZXJhdGUgdG9vbHRpcHMgZGljdGlvbmFyeSBmcm9tIGEgZ2l2ZW4gUFNBIG5hbWVzcGFjZWQgbGFiZWwgcGFpciBvZiBrZXkgYW5kIHZhbHVlcwogKi8KZXhwb3J0IHZhciBnZXRQU0FUb29sdGlwc0Rlc2NyaXB0aW9uID0gZnVuY3Rpb24gZ2V0UFNBVG9vbHRpcHNEZXNjcmlwdGlvbihyZXNvdXJjZSkgewogIHZhciBfYTsKICByZXR1cm4gcmVkdWNlKChfYSA9IHJlc291cmNlID09PSBudWxsIHx8IHJlc291cmNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNvdXJjZS5tZXRhZGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxhYmVscywgZnVuY3Rpb24gKGFjYywgdmFsdWUsIGtleSkgewogICAgdmFyIF9hOwogICAgdmFyIGlzUFNBID0gUFNBTGFiZWxzTmFtZXNwYWNlcy5pbmNsdWRlcyhrZXkpOwogICAgLy8gUmV0cmlldmUgdmVyc2lvbiBmcm9tIHBhaXJlZCBsYWJlbCBlbmRpbmcgd2l0aCBgLXZlcnNpb25gCiAgICB2YXIgc3VmZml4ID0gJy12ZXJzaW9uJzsKICAgIHZhciBpc1ZlcnNpb25MYWJlbCA9IGtleS5pbmNsdWRlcyhzdWZmaXgpOwogICAgdmFyIHZlcnNpb25MYWJlbCA9IChfYSA9IHJlc291cmNlID09PSBudWxsIHx8IHJlc291cmNlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByZXNvdXJjZS5tZXRhZGF0YSkgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxhYmVsc1siIi5jb25jYXQoa2V5KS5jb25jYXQoc3VmZml4KV07CiAgICB2YXIgdmVyc2lvbiA9IHZlcnNpb25MYWJlbCB8fCAnbGF0ZXN0JzsKICAgIC8vIEFkZCBTUEEgbGFiZWxzIGFuZCBkaXNjYXJkIHBhaXJlZCB2ZXJzaW9uIGxhYmVsCiAgICByZXR1cm4gaXNQU0EgJiYgIWlzVmVyc2lvbkxhYmVsID8gX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKHt9LCBhY2MpLCB7fSwgX2RlZmluZVByb3BlcnR5KHt9LCBrZXksICIiLmNvbmNhdChjYW1lbFRvVGl0bGUoa2V5LnJlcGxhY2UoUFNBTGFiZWxQcmVmaXgsICcnKSksICIgIikuY29uY2F0KGNhbWVsVG9UaXRsZSh2YWx1ZSksICIgKCIpLmNvbmNhdCh2ZXJzaW9uLCAiKSIpKSkgOiBhY2M7CiAgfSwge30pOwp9Ow=="},{"version":3,"names":["reduce","filter","keys","PSALabelPrefix","PSALabelsNamespaces","camelToTitle","getPSALabels","resource","_a","metadata","labels","key","includes","hasPSALabels","length","getPSATooltipsDescription","acc","value","isPSA","suffix","isVersionLabel","versionLabel","concat","version","_objectSpread","_defineProperty","replace"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/pod-security-admission.ts"],"sourcesContent":["import { reduce, filter, keys } from 'lodash';\nimport { PSALabelPrefix, PSALabelsNamespaces } from '@shell/config/pod-security-admission';\nimport { camelToTitle } from '@shell/utils/string';\nimport { PSA } from '@shell/types/pod-security-admission';\n\n/**\n * Return PSA labels present in the resource\n * @returns string[]\n */\nexport const getPSALabels = (resource: PSA): string[] => filter(keys(resource?.metadata?.labels), (key) => PSALabelsNamespaces.includes(key));\n\n/**\n * Return boolean value if the label is a PSA label\n * @returns Boolean\n */\nexport const hasPSALabels = (resource: PSA): boolean => getPSALabels(resource).length > 0;\n\n/**\n * Generate tooltips dictionary from a given PSA namespaced label pair of key and values\n */\nexport const getPSATooltipsDescription = (resource: PSA): Record<string, string> => reduce(\n  resource?.metadata?.labels,\n  (acc, value, key) => {\n    const isPSA = PSALabelsNamespaces.includes(key);\n\n    // Retrieve version from paired label ending with `-version`\n    const suffix = '-version';\n    const isVersionLabel = key.includes(suffix);\n    const versionLabel = resource?.metadata?.labels[`${ key }${ suffix }`];\n    const version = versionLabel || 'latest';\n\n    // Add SPA labels and discard paired version label\n    return isPSA && !isVersionLabel ? {\n      ...acc,\n      [key]: `${ camelToTitle(key.replace(PSALabelPrefix, '')) } ${ camelToTitle(value) } (${ version })`\n    } : acc;\n  },\n  { }\n);\n"],"mappings":";;;;;;;;;;;;;;;AAAA,SAASA,MAAM,EAAEC,MAAM,EAAEC,IAAI,QAAQ,QAAQ;AAC7C,SAASC,cAAc,EAAEC,mBAAmB,QAAQ,sCAAsC;AAC1F,SAASC,YAAY,QAAQ,qBAAqB;AAGlD;;;;AAIA,OAAO,IAAMC,YAAY,GAAG,SAAfA,YAAYA,CAAIC,QAAa,EAAc;EAAA,IAAAC,EAAA;EAAC,OAAAP,MAAM,CAACC,IAAI,EAAAM,EAAA,GAACD,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,QAAQ,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,MAAM,CAAC,EAAE,UAACC,GAAG;IAAA,OAAKP,mBAAmB,CAACQ,QAAQ,CAACD,GAAG,CAAC;EAAA,EAAC;AAAA;AAE7I;;;;AAIA,OAAO,IAAME,YAAY,GAAG,SAAfA,YAAYA,CAAIN,QAAa;EAAA,OAAcD,YAAY,CAACC,QAAQ,CAAC,CAACO,MAAM,GAAG,CAAC;AAAA;AAEzF;;;AAGA,OAAO,IAAMC,yBAAyB,GAAG,SAA5BA,yBAAyBA,CAAIR,QAAa,EAA4B;;EAAC,OAAAP,MAAM,EAAAQ,EAAA,GACxFD,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,QAAQ,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,MAAM,EAC1B,UAACM,GAAG,EAAEC,KAAK,EAAEN,GAAG,EAAI;;IAClB,IAAMO,KAAK,GAAGd,mBAAmB,CAACQ,QAAQ,CAACD,GAAG,CAAC;IAE/C;IACA,IAAMQ,MAAM,GAAG,UAAU;IACzB,IAAMC,cAAc,GAAGT,GAAG,CAACC,QAAQ,CAACO,MAAM,CAAC;IAC3C,IAAME,YAAY,IAAAb,EAAA,GAAGD,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEE,QAAQ,cAAAD,EAAA,uBAAAA,EAAA,CAAEE,MAAM,IAAAY,MAAA,CAAKX,GAAI,EAAAW,MAAA,CAAIH,MAAO,EAAG;IACtE,IAAMI,OAAO,GAAGF,YAAY,IAAI,QAAQ;IAExC;IACA,OAAOH,KAAK,IAAI,CAACE,cAAc,GAAAI,aAAA,CAAAA,aAAA,KAC1BR,GAAG,OAAAS,eAAA,KACLd,GAAG,KAAAW,MAAA,CAAOjB,YAAY,CAACM,GAAG,CAACe,OAAO,CAACvB,cAAc,EAAE,EAAE,CAAC,CAAE,OAAAmB,MAAA,CAAKjB,YAAY,CAACY,KAAK,CAAE,QAAAK,MAAA,CAAMC,OAAQ,WAC9FP,GAAG;EACT,CAAC,EACD,EAAG,CACJ;CAAA"}]}