{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--17-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/__tests__/Storage.test.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/__tests__/Storage.test.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX2RlZmluZVByb3BlcnR5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2RlZmluZVByb3BlcnR5IjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maW5kLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUuanMiOwppbXBvcnQgeyBtb3VudCB9IGZyb20gJ0B2dWUvdGVzdC11dGlscyc7CmltcG9ydCBTdG9yYWdlIGZyb20gJ0BzaGVsbC9lZGl0Ly93b3JrbG9hZC9zdG9yYWdlL2luZGV4LnZ1ZSc7CmRlc2NyaWJlKCdjb21wb25lbnQ6IFN0b3JhZ2UnLCBmdW5jdGlvbiAoKSB7CiAgZGVzY3JpYmUuZWFjaChbJ2F3c0VsYXN0aWNCbG9ja1N0b3JlJywgJ2F6dXJlRGlzaycsICdhenVyZUZpbGUnLCAnY29uZmlnTWFwJywKICAvLyAnY3JlYXRlUFZDJywKICAnY3NpJywgJ2VtcHR5RGlyJywgJ2djZVBlcnNpc3RlbnREaXNrJywgJ2djZVBlcnNpc3RlbnREaXNrJywgJ2hvc3RQYXRoJywgJ3NlY3JldCcsICd2c3BoZXJlVm9sdW1lJ10pKCdnaXZlbiB2b2x1bWUgdHlwZSAlcCcsIGZ1bmN0aW9uICh2b2x1bWVUeXBlKSB7CiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgdGhlIHZvbHVtZSBuYW1lIGFzIGZpcnN0IGlucHV0IG9mIHRoZSBmb3JtIGFycmF5JywgZnVuY3Rpb24gKCkgewogICAgICB2YXIgbmFtZSA9ICd3aGF0ZXZlcic7CiAgICAgIHZhciB3cmFwcGVyID0gbW91bnQoU3RvcmFnZSwgewogICAgICAgIHByb3BzRGF0YTogewogICAgICAgICAgc2F2ZVB2Y0hvb2tOYW1lOiAnJywKICAgICAgICAgIHZhbHVlOiB7CiAgICAgICAgICAgIHZvbHVtZXM6IFtfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KHsKICAgICAgICAgICAgICBfdHlwZTogdm9sdW1lVHlwZQogICAgICAgICAgICB9LCB2b2x1bWVUeXBlLCB7fSksICJuYW1lIiwgbmFtZSldCiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBtb2NrczogewogICAgICAgICAgdDogZnVuY3Rpb24gdCh0ZXh0KSB7CiAgICAgICAgICAgIHJldHVybiB0ZXh0OwogICAgICAgICAgfSwKICAgICAgICAgICRzdG9yZTogewogICAgICAgICAgICBnZXR0ZXJzOiB7CiAgICAgICAgICAgICAgJ2kxOG4vdCc6IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGtleTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICAnaTE4bi9leGlzdHMnOiBqZXN0LmZuKCkKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHZhciBpbnB1dCA9IHdyYXBwZXIuZmluZCgnaW5wdXQnKS5lbGVtZW50OwogICAgICBleHBlY3QoaW5wdXQudmFsdWUpLnRvU3RyaWN0RXF1YWwobmFtZSk7CiAgICB9KTsKICAgIGl0KCdzaG91bGQgZWRpdCB0aGUgdm9sdW1lIG5hbWUnLCBmdW5jdGlvbiAoKSB7CiAgICAgIHZhciBuYW1lID0gJ3doYXRldmVyJzsKICAgICAgdmFyIG5ld05hbWUgPSAnbmV3IHdoYXRldmVyJzsKICAgICAgdmFyIHdyYXBwZXIgPSBtb3VudChTdG9yYWdlLCB7CiAgICAgICAgcHJvcHNEYXRhOiB7CiAgICAgICAgICBzYXZlUHZjSG9va05hbWU6ICcnLAogICAgICAgICAgdmFsdWU6IHsKICAgICAgICAgICAgdm9sdW1lczogW19kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoewogICAgICAgICAgICAgIF90eXBlOiB2b2x1bWVUeXBlCiAgICAgICAgICAgIH0sIHZvbHVtZVR5cGUsIHt9KSwgIm5hbWUiLCBuYW1lKV0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIG1vY2tzOiB7CiAgICAgICAgICB0OiBmdW5jdGlvbiB0KHRleHQpIHsKICAgICAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgICAgICB9LAogICAgICAgICAgJHN0b3JlOiB7CiAgICAgICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgICAgICAnaTE4bi90JzogamVzdC5mbigpLm1vY2tJbXBsZW1lbnRhdGlvbihmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICByZXR1cm4ga2V5OwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgICdpMThuL2V4aXN0cyc6IGplc3QuZm4oKQogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9KTsKICAgICAgd3JhcHBlci5maW5kKCdpbnB1dCcpLnNldFZhbHVlKG5ld05hbWUpOwogICAgICBleHBlY3Qod3JhcHBlci52bS52YWx1ZS52b2x1bWVzWzBdLm5hbWUpLnRvU3RyaWN0RXF1YWwobmV3TmFtZSk7CiAgICB9KTsKICB9KTsKICAvLyBUT0RPOiBmaW5kIGhvdyB0byBpbnRlcmFjdCB3aXRoIHRoZSB0b29sdGlwIHNlbGVjdGlvbiBvdXRzaWRlIG9mIHRoZSBjb21wb25lbnQKICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgamVzdC9uby1kaXNhYmxlZC10ZXN0cwogIGl0LnNraXAoJ3Nob3VsZCBhbGxvdyB0byBhZGQgYSBuZXcgdm9sdW1lJywgLyojX19QVVJFX18qL19hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgIHZhciB3cmFwcGVyOwogICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgY2FzZSAwOgogICAgICAgICAgd3JhcHBlciA9IG1vdW50KFN0b3JhZ2UsIHsKICAgICAgICAgICAgcHJvcHNEYXRhOiB7CiAgICAgICAgICAgICAgc2F2ZVB2Y0hvb2tOYW1lOiAnJwogICAgICAgICAgICB9LAogICAgICAgICAgICBtb2NrczogewogICAgICAgICAgICAgIHQ6IGZ1bmN0aW9uIHQodGV4dCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHRleHQ7CiAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAkc3RvcmU6IHsKICAgICAgICAgICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgICAgICAgICAgJ2kxOG4vdCc6IGplc3QuZm4oKQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgIHJldHVybiB3cmFwcGVyLmZpbmQoJyNzZWxlY3Qtdm9sdW1lJykudHJpZ2dlcignY2xpY2snKTsKICAgICAgICBjYXNlIDM6CiAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgIHJldHVybiB3cmFwcGVyLnRyaWdnZXIoJ2tleWRvd24uZG93bicpOwogICAgICAgIGNhc2UgNToKICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSA3OwogICAgICAgICAgcmV0dXJuIHdyYXBwZXIudHJpZ2dlcigna2V5ZG93bi5lbnRlcicpOwogICAgICAgIGNhc2UgNzoKICAgICAgICAgIGV4cGVjdCh3cmFwcGVyLnZtLnZhbHVlLnZvbHVtZXNbMF0pLnRvU3RyaWN0RXF1YWwoewogICAgICAgICAgICBfdHlwZTogJ2F3c0VsYXN0aWNCbG9ja1N0b3JlJywKICAgICAgICAgICAgYXdzRWxhc3RpY0Jsb2NrU3RvcmU6IHt9LAogICAgICAgICAgICBuYW1lOiAnJwogICAgICAgICAgfSk7CiAgICAgICAgY2FzZSA4OgogICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICB9CiAgICB9LCBfY2FsbGVlKTsKICB9KSkpOwp9KTs="},{"version":3,"names":["mount","Storage","describe","each","volumeType","it","name","wrapper","propsData","savePvcHookName","value","volumes","_defineProperty","_type","mocks","t","text","$store","getters","jest","fn","mockImplementation","key","input","find","element","expect","toStrictEqual","newName","setValue","vm","skip","_asyncToGenerator","regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","trigger","awsElasticBlockStore","stop"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/__tests__/Storage.test.ts"],"sourcesContent":["import { mount } from '@vue/test-utils';\nimport Storage from '@shell/edit//workload/storage/index.vue';\n\ndescribe('component: Storage', () => {\n  describe.each([\n    'awsElasticBlockStore',\n    'azureDisk',\n    'azureFile',\n    'configMap',\n    // 'createPVC',\n    'csi',\n    'emptyDir',\n    'gcePersistentDisk',\n    'gcePersistentDisk',\n    'hostPath',\n    'secret',\n    'vsphereVolume'\n  ])('given volume type %p', (volumeType) => {\n    it('should display the volume name as first input of the form array', () => {\n      const name = 'whatever';\n      const wrapper = mount(Storage, {\n        propsData: {\n          savePvcHookName: '',\n          value:           {\n            volumes: [{\n              _type:        volumeType,\n              [volumeType]: {},\n              name\n            }]\n          },\n        },\n        mocks: {\n          t:      (text: string) => text, // Mock i18n global function used as alternative to the getter\n          $store: {\n            getters: {\n              'i18n/t':      jest.fn().mockImplementation((key: string) => key),\n              'i18n/exists': jest.fn()\n            }\n          }\n        },\n      });\n\n      const input = wrapper.find('input').element as HTMLInputElement;\n\n      expect(input.value).toStrictEqual(name);\n    });\n\n    it('should edit the volume name', () => {\n      const name = 'whatever';\n      const newName = 'new whatever';\n      const wrapper = mount(Storage, {\n        propsData: {\n          savePvcHookName: '',\n          value:           {\n            volumes: [{\n              _type:        volumeType,\n              [volumeType]: {},\n              name\n            }]\n          },\n        },\n        mocks: {\n          t:      (text: string) => text, // Mock i18n global function used as alternative to the getter\n          $store: {\n            getters: {\n              'i18n/t':      jest.fn().mockImplementation((key: string) => key),\n              'i18n/exists': jest.fn()\n            }\n          }\n        },\n      });\n\n      wrapper.find('input').setValue(newName);\n\n      expect(wrapper.vm.value.volumes[0].name).toStrictEqual(newName);\n    });\n  });\n\n  // TODO: find how to interact with the tooltip selection outside of the component\n  // eslint-disable-next-line jest/no-disabled-tests\n  it.skip('should allow to add a new volume', async() => {\n    const wrapper = mount(Storage, {\n      propsData: { savePvcHookName: '' },\n      mocks:     {\n        t:      (text: string) => text, // Mock i18n global function used as alternative to the getter\n        $store: { getters: { 'i18n/t': jest.fn() } }\n      },\n    });\n\n    await wrapper.find('#select-volume').trigger('click');\n    await wrapper.trigger('keydown.down');\n    await wrapper.trigger('keydown.enter');\n\n    expect(wrapper.vm.value.volumes[0]).toStrictEqual({\n      _type:                'awsElasticBlockStore',\n      awsElasticBlockStore: {},\n      name:                 ''\n    });\n  });\n});\n"],"mappings":";;;;;;AAAA,SAASA,KAAK,QAAQ,iBAAiB;AACvC,OAAOC,OAAO,MAAM,yCAAyC;AAE7DC,QAAQ,CAAC,oBAAoB,EAAE,YAAK;EAClCA,QAAQ,CAACC,IAAI,CAAC,CACZ,sBAAsB,EACtB,WAAW,EACX,WAAW,EACX,WAAW;EACX;EACA,KAAK,EACL,UAAU,EACV,mBAAmB,EACnB,mBAAmB,EACnB,UAAU,EACV,QAAQ,EACR,eAAe,CAChB,CAAC,CAAC,sBAAsB,EAAE,UAACC,UAAU,EAAI;IACxCC,EAAE,CAAC,iEAAiE,EAAE,YAAK;MACzE,IAAMC,IAAI,GAAG,UAAU;MACvB,IAAMC,OAAO,GAAGP,KAAK,CAACC,OAAO,EAAE;QAC7BO,SAAS,EAAE;UACTC,eAAe,EAAE,EAAE;UACnBC,KAAK,EAAY;YACfC,OAAO,EAAE,CAAAC,eAAA,CAAAA,eAAA;cACPC,KAAK,EAAST;YAAU,GACvBA,UAAU,EAAG,EAAE,WAChBE,IAAI;;SAGT;QACDQ,KAAK,EAAE;UACLC,CAAC,EAAO,SAAAA,EAACC,IAAY;YAAA,OAAKA,IAAI;UAAA;UAC9BC,MAAM,EAAE;YACNC,OAAO,EAAE;cACP,QAAQ,EAAOC,IAAI,CAACC,EAAE,EAAE,CAACC,kBAAkB,CAAC,UAACC,GAAW;gBAAA,OAAKA,GAAG;cAAA,EAAC;cACjE,aAAa,EAAEH,IAAI,CAACC,EAAE;;;;OAI7B,CAAC;MAEF,IAAMG,KAAK,GAAGhB,OAAO,CAACiB,IAAI,CAAC,OAAO,CAAC,CAACC,OAA2B;MAE/DC,MAAM,CAACH,KAAK,CAACb,KAAK,CAAC,CAACiB,aAAa,CAACrB,IAAI,CAAC;IACzC,CAAC,CAAC;IAEFD,EAAE,CAAC,6BAA6B,EAAE,YAAK;MACrC,IAAMC,IAAI,GAAG,UAAU;MACvB,IAAMsB,OAAO,GAAG,cAAc;MAC9B,IAAMrB,OAAO,GAAGP,KAAK,CAACC,OAAO,EAAE;QAC7BO,SAAS,EAAE;UACTC,eAAe,EAAE,EAAE;UACnBC,KAAK,EAAY;YACfC,OAAO,EAAE,CAAAC,eAAA,CAAAA,eAAA;cACPC,KAAK,EAAST;YAAU,GACvBA,UAAU,EAAG,EAAE,WAChBE,IAAI;;SAGT;QACDQ,KAAK,EAAE;UACLC,CAAC,EAAO,SAAAA,EAACC,IAAY;YAAA,OAAKA,IAAI;UAAA;UAC9BC,MAAM,EAAE;YACNC,OAAO,EAAE;cACP,QAAQ,EAAOC,IAAI,CAACC,EAAE,EAAE,CAACC,kBAAkB,CAAC,UAACC,GAAW;gBAAA,OAAKA,GAAG;cAAA,EAAC;cACjE,aAAa,EAAEH,IAAI,CAACC,EAAE;;;;OAI7B,CAAC;MAEFb,OAAO,CAACiB,IAAI,CAAC,OAAO,CAAC,CAACK,QAAQ,CAACD,OAAO,CAAC;MAEvCF,MAAM,CAACnB,OAAO,CAACuB,EAAE,CAACpB,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,CAACL,IAAI,CAAC,CAACqB,aAAa,CAACC,OAAO,CAAC;IACjE,CAAC,CAAC;EACJ,CAAC,CAAC;EAEF;EACA;EACAvB,EAAE,CAAC0B,IAAI,CAAC,kCAAkC,eAAAC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,CAAE,SAAAC,QAAA;IAAA,IAAA5B,OAAA;IAAA,OAAA0B,kBAAA,CAAAG,IAAA,UAAAC,SAAAC,QAAA;MAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;QAAA;UACpCjC,OAAO,GAAGP,KAAK,CAACC,OAAO,EAAE;YAC7BO,SAAS,EAAE;cAAEC,eAAe,EAAE;YAAE,CAAE;YAClCK,KAAK,EAAM;cACTC,CAAC,EAAO,SAAAA,EAACC,IAAY;gBAAA,OAAKA,IAAI;cAAA;cAC9BC,MAAM,EAAE;gBAAEC,OAAO,EAAE;kBAAE,QAAQ,EAAEC,IAAI,CAACC,EAAE;gBAAE;cAAE;;WAE7C,CAAC;UAAAkB,QAAA,CAAAE,IAAA;UAAA,OAEIjC,OAAO,CAACiB,IAAI,CAAC,gBAAgB,CAAC,CAACiB,OAAO,CAAC,OAAO,CAAC;QAAA;UAAAH,QAAA,CAAAE,IAAA;UAAA,OAC/CjC,OAAO,CAACkC,OAAO,CAAC,cAAc,CAAC;QAAA;UAAAH,QAAA,CAAAE,IAAA;UAAA,OAC/BjC,OAAO,CAACkC,OAAO,CAAC,eAAe,CAAC;QAAA;UAEtCf,MAAM,CAACnB,OAAO,CAACuB,EAAE,CAACpB,KAAK,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC,CAACgB,aAAa,CAAC;YAChDd,KAAK,EAAiB,sBAAsB;YAC5C6B,oBAAoB,EAAE,EAAE;YACxBpC,IAAI,EAAkB;WACvB,CAAC;QAAC;QAAA;UAAA,OAAAgC,QAAA,CAAAK,IAAA;MAAA;IAAA,GAAAR,OAAA;EAAA,CACJ,GAAC;AACJ,CAAC,CAAC"}]}