{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/provisioners/driver.harvesterhci.io.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/provisioners/driver.harvesterhci.io.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LmtleXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zeW1ib2wuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5maWx0ZXIuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuZ2V0LW93bi1wcm9wZXJ0eS1kZXNjcmlwdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5nZXQtb3duLXByb3BlcnR5LWRlc2NyaXB0b3JzLmpzIjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnN0YXJ0cy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuZW5kcy13aXRoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5tYXAuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QuYXNzaWduLmpzIjsKZnVuY3Rpb24gb3duS2V5cyhlLCByKSB7IHZhciB0ID0gT2JqZWN0LmtleXMoZSk7IGlmIChPYmplY3QuZ2V0T3duUHJvcGVydHlTeW1ib2xzKSB7IHZhciBvID0gT2JqZWN0LmdldE93blByb3BlcnR5U3ltYm9scyhlKTsgciAmJiAobyA9IG8uZmlsdGVyKGZ1bmN0aW9uIChyKSB7IHJldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsIHIpLmVudW1lcmFibGU7IH0pKSwgdC5wdXNoLmFwcGx5KHQsIG8pOyB9IHJldHVybiB0OyB9CmZ1bmN0aW9uIF9vYmplY3RTcHJlYWQoZSkgeyBmb3IgKHZhciByID0gMTsgciA8IGFyZ3VtZW50cy5sZW5ndGg7IHIrKykgeyB2YXIgdCA9IG51bGwgIT0gYXJndW1lbnRzW3JdID8gYXJndW1lbnRzW3JdIDoge307IHIgJSAyID8gb3duS2V5cyhPYmplY3QodCksICEwKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IF9kZWZpbmVQcm9wZXJ0eShlLCByLCB0W3JdKTsgfSkgOiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9ycyA/IE9iamVjdC5kZWZpbmVQcm9wZXJ0aWVzKGUsIE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3JzKHQpKSA6IG93bktleXMoT2JqZWN0KHQpKS5mb3JFYWNoKGZ1bmN0aW9uIChyKSB7IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLCByLCBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKHQsIHIpKTsgfSk7IH0gcmV0dXJuIGU7IH0KaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAndnVleCc7CmltcG9ydCBzZW12ZXIgZnJvbSAnc2VtdmVyJzsKaW1wb3J0IHsgTGFiZWxlZElucHV0IH0gZnJvbSAnQGNvbXBvbmVudHMvRm9ybS9MYWJlbGVkSW5wdXQnOwppbXBvcnQgQmFubmVyIGZyb20gJ0Bjb21wb25lbnRzL0Jhbm5lci9CYW5uZXIudnVlJzsKaW1wb3J0IEtleVZhbHVlIGZyb20gJ0BzaGVsbC9jb21wb25lbnRzL2Zvcm0vS2V5VmFsdWUnOwppbXBvcnQgeyBjbG9uZSB9IGZyb20gJ0BzaGVsbC91dGlscy9vYmplY3QnOwppbXBvcnQgeyBhbGxIYXNoIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3Byb21pc2UnOwp2YXIgREVGQVVMVF9QQVJBTUVURVJTID0gWydob3N0U3RvcmFnZUNsYXNzJ107CmV4cG9ydCBkZWZhdWx0IHsKICBjb21wb25lbnRzOiB7CiAgICBMYWJlbGVkSW5wdXQ6IExhYmVsZWRJbnB1dCwKICAgIEJhbm5lcjogQmFubmVyLAogICAgS2V5VmFsdWU6IEtleVZhbHVlCiAgfSwKICBwcm9wczogewogICAgdmFsdWU6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIG1vZGU6IHsKICAgICAgdHlwZTogU3RyaW5nLAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZmV0Y2g6IGZ1bmN0aW9uIGZldGNoKCkgewogICAgdmFyIF90aGlzID0gdGhpczsKICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgIHZhciByZXM7CiAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICByZXR1cm4gYWxsSGFzaCh7CiAgICAgICAgICAgICAgcmtlMlZlcnNpb25zOiBfdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ21hbmFnZW1lbnQvcmVxdWVzdCcsIHsKICAgICAgICAgICAgICAgIHVybDogJy92MS1ya2UyLXJlbGVhc2UvcmVsZWFzZXMnCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgIHJlcyA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgIF90aGlzLnJrZTJWZXJzaW9ucyA9IHJlcy5ya2UyVmVyc2lvbnM7CiAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBya2UyVmVyc2lvbnM6IHt9CiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IF9vYmplY3RTcHJlYWQoX29iamVjdFNwcmVhZCh7fSwgbWFwR2V0dGVycyhbJ2N1cnJlbnRDbHVzdGVyJ10pKSwge30sIHsKICAgIGlzU2F0aXNmaWVzVmVyc2lvbjogZnVuY3Rpb24gaXNTYXRpc2ZpZXNWZXJzaW9uKCkgewogICAgICB2YXIga3ViZXJuZXRlc1ZlcnNpb24gPSB0aGlzLmN1cnJlbnRDbHVzdGVyLmt1YmVybmV0ZXNWZXJzaW9uIHx8ICcnOwogICAgICB2YXIga3ViZXJuZXRlc1ZlcnNpb25FeHRlbnNpb24gPSB0aGlzLmN1cnJlbnRDbHVzdGVyLmt1YmVybmV0ZXNWZXJzaW9uRXh0ZW5zaW9uOwogICAgICBpZiAoa3ViZXJuZXRlc1ZlcnNpb25FeHRlbnNpb24uc3RhcnRzV2l0aCgnK3JrZTInKSkgewogICAgICAgIHZhciBfdGhpcyRya2UyVmVyc2lvbnMsIF9jaGFydHMkaGFydmVzdGVyQ3NpOwogICAgICAgIHZhciBjaGFydHMgPSAoKCgoX3RoaXMkcmtlMlZlcnNpb25zID0gdGhpcy5ya2UyVmVyc2lvbnMpID09PSBudWxsIHx8IF90aGlzJHJrZTJWZXJzaW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3RoaXMkcmtlMlZlcnNpb25zLmRhdGEpIHx8IFtdKS5maW5kKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gdi5pZCA9PT0ga3ViZXJuZXRlc1ZlcnNpb247CiAgICAgICAgfSkgfHwge30pLmNoYXJ0czsKICAgICAgICB2YXIgY3NpVmVyc2lvbiA9IChjaGFydHMgPT09IG51bGwgfHwgY2hhcnRzID09PSB2b2lkIDAgfHwgKF9jaGFydHMkaGFydmVzdGVyQ3NpID0gY2hhcnRzWydoYXJ2ZXN0ZXItY3NpLWRyaXZlciddKSA9PT0gbnVsbCB8fCBfY2hhcnRzJGhhcnZlc3RlckNzaSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NoYXJ0cyRoYXJ2ZXN0ZXJDc2kudmVyc2lvbikgfHwgJyc7CiAgICAgICAgaWYgKGNzaVZlcnNpb24uZW5kc1dpdGgoJzAwJykpIHsKICAgICAgICAgIGNzaVZlcnNpb24gPSBjc2lWZXJzaW9uLnNsaWNlKDAsIC0yKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHNlbXZlci5zYXRpc2ZpZXMoY3NpVmVyc2lvbiwgJz49MC4xLjE1Jyk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgcmV0dXJuIHRydWU7CiAgICAgIH0KICAgIH0sCiAgICBwYXJhbWV0ZXJzOiB7CiAgICAgIGdldDogZnVuY3Rpb24gZ2V0KCkgewogICAgICAgIHZhciBfdGhpcyR2YWx1ZTsKICAgICAgICB2YXIgcGFyYW1ldGVycyA9IGNsb25lKChfdGhpcyR2YWx1ZSA9IHRoaXMudmFsdWUpID09PSBudWxsIHx8IF90aGlzJHZhbHVlID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdGhpcyR2YWx1ZS5wYXJhbWV0ZXJzKSB8fCB7fTsKICAgICAgICBERUZBVUxUX1BBUkFNRVRFUlMubWFwKGZ1bmN0aW9uIChrZXkpIHsKICAgICAgICAgIGRlbGV0ZSBwYXJhbWV0ZXJzW2tleV07CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIHBhcmFtZXRlcnM7CiAgICAgIH0sCiAgICAgIHNldDogZnVuY3Rpb24gc2V0KHZhbHVlKSB7CiAgICAgICAgT2JqZWN0LmFzc2lnbih0aGlzLnZhbHVlLnBhcmFtZXRlcnMsIHZhbHVlKTsKICAgICAgfQogICAgfQogIH0pCn07"},{"version":3,"names":["mapGetters","semver","LabeledInput","Banner","KeyValue","clone","allHash","DEFAULT_PARAMETERS","components","props","value","type","Object","required","mode","String","fetch","_this","_asyncToGenerator","regeneratorRuntime","mark","_callee","res","wrap","_callee$","_context","prev","next","rke2Versions","$store","dispatch","url","sent","stop","data","computed","_objectSpread","isSatisfiesVersion","kubernetesVersion","currentCluster","kubernetesVersionExtension","startsWith","_this$rke2Versions","_charts$harvesterCsi","charts","find","v","id","csiVersion","version","endsWith","slice","satisfies","parameters","get","_this$value","map","key","set","assign"],"sources":["node_modules/@rancher/shell/edit/storage.k8s.io.storageclass/provisioners/driver.harvesterhci.io.vue"],"sourcesContent":["<script>\r\nimport { mapGetters } from 'vuex';\r\nimport semver from 'semver';\r\n\r\nimport { LabeledInput } from '@components/Form/LabeledInput';\r\nimport Banner from '@components/Banner/Banner.vue';\r\nimport KeyValue from '@shell/components/form/KeyValue';\r\n\r\nimport { clone } from '@shell/utils/object';\r\nimport { allHash } from '@shell/utils/promise';\r\n\r\nconst DEFAULT_PARAMETERS = [\r\n  'hostStorageClass',\r\n];\r\n\r\nexport default {\r\n  components: {\r\n    LabeledInput,\r\n    Banner,\r\n    KeyValue,\r\n  },\r\n\r\n  props: {\r\n    value: {\r\n      type:     Object,\r\n      required: true\r\n    },\r\n    mode: {\r\n      type:     String,\r\n      required: true\r\n    }\r\n  },\r\n\r\n  async fetch() {\r\n    const res = await allHash({ rke2Versions: this.$store.dispatch('management/request', { url: '/v1-rke2-release/releases' }) });\r\n\r\n    this.rke2Versions = res.rke2Versions;\r\n  },\r\n\r\n  data() {\r\n    return { rke2Versions: {} };\r\n  },\r\n\r\n  computed: {\r\n    ...mapGetters(['currentCluster']),\r\n\r\n    isSatisfiesVersion() {\r\n      const kubernetesVersion = this.currentCluster.kubernetesVersion || '';\r\n      const kubernetesVersionExtension = this.currentCluster.kubernetesVersionExtension;\r\n\r\n      if (kubernetesVersionExtension.startsWith('+rke2')) {\r\n        const charts = ((this.rke2Versions?.data || []).find((v) => v.id === kubernetesVersion) || {}).charts;\r\n        let csiVersion = charts?.['harvester-csi-driver']?.version || '';\r\n\r\n        if (csiVersion.endsWith('00')) {\r\n          csiVersion = csiVersion.slice(0, -2);\r\n        }\r\n\r\n        return semver.satisfies(csiVersion, '>=0.1.15');\r\n      } else {\r\n        return true;\r\n      }\r\n    },\r\n\r\n    parameters: {\r\n      get() {\r\n        const parameters = clone(this.value?.parameters) || {};\r\n\r\n        DEFAULT_PARAMETERS.map((key) => {\r\n          delete parameters[key];\r\n        });\r\n\r\n        return parameters;\r\n      },\r\n\r\n      set(value) {\r\n        Object.assign(this.value.parameters, value);\r\n      }\r\n    },\r\n  },\r\n};\r\n</script>\r\n\r\n<template>\r\n  <div>\r\n    <Banner\r\n      v-if=\"!isSatisfiesVersion\"\r\n      color=\"warning\"\r\n    >\r\n      {{ t('storageClass.harvesterhci.warning.unSatisfiesVersion', null, true) }}\r\n    </Banner>\r\n    <div v-else>\r\n      <div\r\n        class=\"row mb-10\"\r\n      >\r\n        <div class=\"col span-6\">\r\n          <LabeledInput\r\n            v-model=\"value.parameters.hostStorageClass\"\r\n            :label=\"t('storageClass.harvesterhci.hostStorageClass.label')\"\r\n            :placeholder=\"t('storageClass.harvesterhci.hostStorageClass.placeholder')\"\r\n            :mode=\"mode\"\r\n            :tooltip=\"t('storageClass.harvesterhci.hostStorageClass.tooltip')\"\r\n          />\r\n        </div>\r\n      </div>\r\n      <KeyValue\r\n        v-model=\"parameters\"\r\n        :add-label=\"t('storageClass.longhorn.addLabel')\"\r\n        :read-allowed=\"false\"\r\n        :mode=\"mode\"\r\n      />\r\n    </div>\r\n  </div>\r\n</template>\r\n"],"mappings":";;;;;;;;;;;;;;;;;;AACA,SAAAA,UAAA;AACA,OAAAC,MAAA;AAEA,SAAAC,YAAA;AACA,OAAAC,MAAA;AACA,OAAAC,QAAA;AAEA,SAAAC,KAAA;AACA,SAAAC,OAAA;AAEA,IAAAC,kBAAA,IACA,mBACA;AAEA;EACAC,UAAA;IACAN,YAAA,EAAAA,YAAA;IACAC,MAAA,EAAAA,MAAA;IACAC,QAAA,EAAAA;EACA;EAEAK,KAAA;IACAC,KAAA;MACAC,IAAA,EAAAC,MAAA;MACAC,QAAA;IACA;IACAC,IAAA;MACAH,IAAA,EAAAI,MAAA;MACAF,QAAA;IACA;EACA;EAEAG,KAAA,WAAAA,MAAA;IAAA,IAAAC,KAAA;IAAA,OAAAC,iBAAA,eAAAC,kBAAA,CAAAC,IAAA,UAAAC,QAAA;MAAA,IAAAC,GAAA;MAAA,OAAAH,kBAAA,CAAAI,IAAA,UAAAC,SAAAC,QAAA;QAAA,kBAAAA,QAAA,CAAAC,IAAA,GAAAD,QAAA,CAAAE,IAAA;UAAA;YAAAF,QAAA,CAAAE,IAAA;YAAA,OACArB,OAAA;cAAAsB,YAAA,EAAAX,KAAA,CAAAY,MAAA,CAAAC,QAAA;gBAAAC,GAAA;cAAA;YAAA;UAAA;YAAAT,GAAA,GAAAG,QAAA,CAAAO,IAAA;YAEAf,KAAA,CAAAW,YAAA,GAAAN,GAAA,CAAAM,YAAA;UAAA;UAAA;YAAA,OAAAH,QAAA,CAAAQ,IAAA;QAAA;MAAA,GAAAZ,OAAA;IAAA;EACA;EAEAa,IAAA,WAAAA,KAAA;IACA;MAAAN,YAAA;IAAA;EACA;EAEAO,QAAA,EAAAC,aAAA,CAAAA,aAAA,KACApC,UAAA;IAEAqC,kBAAA,WAAAA,mBAAA;MACA,IAAAC,iBAAA,QAAAC,cAAA,CAAAD,iBAAA;MACA,IAAAE,0BAAA,QAAAD,cAAA,CAAAC,0BAAA;MAEA,IAAAA,0BAAA,CAAAC,UAAA;QAAA,IAAAC,kBAAA,EAAAC,oBAAA;QACA,IAAAC,MAAA,OAAAF,kBAAA,QAAAd,YAAA,cAAAc,kBAAA,uBAAAA,kBAAA,CAAAR,IAAA,SAAAW,IAAA,WAAAC,CAAA;UAAA,OAAAA,CAAA,CAAAC,EAAA,KAAAT,iBAAA;QAAA,UAAAM,MAAA;QACA,IAAAI,UAAA,IAAAJ,MAAA,aAAAA,MAAA,gBAAAD,oBAAA,GAAAC,MAAA,sCAAAD,oBAAA,uBAAAA,oBAAA,CAAAM,OAAA;QAEA,IAAAD,UAAA,CAAAE,QAAA;UACAF,UAAA,GAAAA,UAAA,CAAAG,KAAA;QACA;QAEA,OAAAlD,MAAA,CAAAmD,SAAA,CAAAJ,UAAA;MACA;QACA;MACA;IACA;IAEAK,UAAA;MACAC,GAAA,WAAAA,IAAA;QAAA,IAAAC,WAAA;QACA,IAAAF,UAAA,GAAAhD,KAAA,EAAAkD,WAAA,QAAA7C,KAAA,cAAA6C,WAAA,uBAAAA,WAAA,CAAAF,UAAA;QAEA9C,kBAAA,CAAAiD,GAAA,WAAAC,GAAA;UACA,OAAAJ,UAAA,CAAAI,GAAA;QACA;QAEA,OAAAJ,UAAA;MACA;MAEAK,GAAA,WAAAA,IAAAhD,KAAA;QACAE,MAAA,CAAA+C,MAAA,MAAAjD,KAAA,CAAA2C,UAAA,EAAA3C,KAAA;MACA;IACA;EAAA;AAEA"}]}