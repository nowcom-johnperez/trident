{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js??ref--16-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/store/catalog.js","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/store/catalog.js","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/babel.config.js","mtime":1716430386710},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc2xpY2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAudG8tc3RyaW5nLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZnJvbS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN5bWJvbC5pdGVyYXRvci5qcyI7CmltcG9ydCBfc2xpY2VkVG9BcnJheSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9zbGljZWRUb0FycmF5IjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgX3RvQ29uc3VtYWJsZUFycmF5IGZyb20gIkBiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL3RvQ29uc3VtYWJsZUFycmF5IjsKaW1wb3J0IF9kZWZpbmVQcm9wZXJ0eSBmcm9tICJAYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9kZWZpbmVQcm9wZXJ0eSI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKZnVuY3Rpb24gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIobywgYWxsb3dBcnJheUxpa2UpIHsgdmFyIGl0ID0gdHlwZW9mIFN5bWJvbCAhPT0gInVuZGVmaW5lZCIgJiYgb1tTeW1ib2wuaXRlcmF0b3JdIHx8IG9bIkBAaXRlcmF0b3IiXTsgaWYgKCFpdCkgeyBpZiAoQXJyYXkuaXNBcnJheShvKSB8fCAoaXQgPSBfdW5zdXBwb3J0ZWRJdGVyYWJsZVRvQXJyYXkobykpIHx8IGFsbG93QXJyYXlMaWtlICYmIG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgeyBpZiAoaXQpIG8gPSBpdDsgdmFyIGkgPSAwOyB2YXIgRiA9IGZ1bmN0aW9uIEYoKSB7fTsgcmV0dXJuIHsgczogRiwgbjogZnVuY3Rpb24gbigpIHsgaWYgKGkgPj0gby5sZW5ndGgpIHJldHVybiB7IGRvbmU6IHRydWUgfTsgcmV0dXJuIHsgZG9uZTogZmFsc2UsIHZhbHVlOiBvW2krK10gfTsgfSwgZTogZnVuY3Rpb24gZShfZSkgeyB0aHJvdyBfZTsgfSwgZjogRiB9OyB9IHRocm93IG5ldyBUeXBlRXJyb3IoIkludmFsaWQgYXR0ZW1wdCB0byBpdGVyYXRlIG5vbi1pdGVyYWJsZSBpbnN0YW5jZS5cbkluIG9yZGVyIHRvIGJlIGl0ZXJhYmxlLCBub24tYXJyYXkgb2JqZWN0cyBtdXN0IGhhdmUgYSBbU3ltYm9sLml0ZXJhdG9yXSgpIG1ldGhvZC4iKTsgfSB2YXIgbm9ybWFsQ29tcGxldGlvbiA9IHRydWUsIGRpZEVyciA9IGZhbHNlLCBlcnI7IHJldHVybiB7IHM6IGZ1bmN0aW9uIHMoKSB7IGl0ID0gaXQuY2FsbChvKTsgfSwgbjogZnVuY3Rpb24gbigpIHsgdmFyIHN0ZXAgPSBpdC5uZXh0KCk7IG5vcm1hbENvbXBsZXRpb24gPSBzdGVwLmRvbmU7IHJldHVybiBzdGVwOyB9LCBlOiBmdW5jdGlvbiBlKF9lMikgeyBkaWRFcnIgPSB0cnVlOyBlcnIgPSBfZTI7IH0sIGY6IGZ1bmN0aW9uIGYoKSB7IHRyeSB7IGlmICghbm9ybWFsQ29tcGxldGlvbiAmJiBpdC5yZXR1cm4gIT0gbnVsbCkgaXQucmV0dXJuKCk7IH0gZmluYWxseSB7IGlmIChkaWRFcnIpIHRocm93IGVycjsgfSB9IH07IH0KZnVuY3Rpb24gX3Vuc3VwcG9ydGVkSXRlcmFibGVUb0FycmF5KG8sIG1pbkxlbikgeyBpZiAoIW8pIHJldHVybjsgaWYgKHR5cGVvZiBvID09PSAic3RyaW5nIikgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IHZhciBuID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG8pLnNsaWNlKDgsIC0xKTsgaWYgKG4gPT09ICJPYmplY3QiICYmIG8uY29uc3RydWN0b3IpIG4gPSBvLmNvbnN0cnVjdG9yLm5hbWU7IGlmIChuID09PSAiTWFwIiB8fCBuID09PSAiU2V0IikgcmV0dXJuIEFycmF5LmZyb20obyk7IGlmIChuID09PSAiQXJndW1lbnRzIiB8fCAvXig/OlVpfEkpbnQoPzo4fDE2fDMyKSg/OkNsYW1wZWQpP0FycmF5JC8udGVzdChuKSkgcmV0dXJuIF9hcnJheUxpa2VUb0FycmF5KG8sIG1pbkxlbik7IH0KZnVuY3Rpb24gX2FycmF5TGlrZVRvQXJyYXkoYXJyLCBsZW4pIHsgaWYgKGxlbiA9PSBudWxsIHx8IGxlbiA+IGFyci5sZW5ndGgpIGxlbiA9IGFyci5sZW5ndGg7IGZvciAodmFyIGkgPSAwLCBhcnIyID0gbmV3IEFycmF5KGxlbik7IGkgPCBsZW47IGkrKykgYXJyMltpXSA9IGFycltpXTsgcmV0dXJuIGFycjI7IH0KaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC52YWx1ZXMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pbmNsdWRlcy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy50cmltLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuZm9yLWVhY2guanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3RhcnRzLXdpdGguanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5yZXBsYWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5hc3NpZ24uanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3Qua2V5cy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnByb21pc2UuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lc25leHQucHJvbWlzZS5hbGwtc2V0dGxlZC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC5lbnRyaWVzLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3ltYm9sLmRlc2NyaXB0aW9uLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zcGxpdC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5tYXRjaC5qcyI7CmltcG9ydCB7IENBVEFMT0cgfSBmcm9tICdAc2hlbGwvY29uZmlnL3R5cGVzJzsKaW1wb3J0IHsgQ0FUQUxPRyBhcyBDQVRBTE9HX0FOTk9UQVRJT05TIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9sYWJlbHMtYW5ub3RhdGlvbnMnOwppbXBvcnQgeyBhZGRQYXJhbXMgfSBmcm9tICdAc2hlbGwvdXRpbHMvdXJsJzsKaW1wb3J0IHsgYWxsSGFzaCwgYWxsSGFzaFNldHRsZWQgfSBmcm9tICdAc2hlbGwvdXRpbHMvcHJvbWlzZSc7CmltcG9ydCB7IGNsb25lIH0gZnJvbSAnQHNoZWxsL3V0aWxzL29iamVjdCc7CmltcG9ydCB7IGZpbmRCeSwgYWRkT2JqZWN0LCBmaWx0ZXJCeSwgaXNBcnJheSB9IGZyb20gJ0BzaGVsbC91dGlscy9hcnJheSc7CmltcG9ydCB7IHN0cmluZ2lmeSB9IGZyb20gJ0BzaGVsbC91dGlscy9lcnJvcic7CmltcG9ydCB7IGNsYXNzaWZ5IH0gZnJvbSAnQHNoZWxsL3BsdWdpbnMvZGFzaGJvYXJkLXN0b3JlL2NsYXNzaWZ5JzsKaW1wb3J0IHsgc29ydEJ5IH0gZnJvbSAnQHNoZWxsL3V0aWxzL3NvcnQnOwppbXBvcnQgeyBpbXBvcnRDaGFydCB9IGZyb20gJ0BzaGVsbC91dGlscy9keW5hbWljLWltcG9ydGVyJzsKaW1wb3J0IHsgZW5zdXJlUmVnZXggfSBmcm9tICdAc2hlbGwvdXRpbHMvc3RyaW5nJzsKaW1wb3J0IHsgaXNQcmVyZWxlYXNlIH0gZnJvbSAnQHNoZWxsL3V0aWxzL3ZlcnNpb24nOwppbXBvcnQgZGlmZmVyZW5jZSBmcm9tICdsb2Rhc2gvZGlmZmVyZW5jZSc7CmltcG9ydCB7IGxvb2t1cCB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZS9tb2RlbC1sb2FkZXInOwp2YXIgQUxMT1dFRF9DQVRFR09SSUVTID0gWydTdG9yYWdlJywgJ01vbml0b3JpbmcnLCAnRGF0YWJhc2UnLCAnUmVwb3NpdG9yeScsICdTZWN1cml0eScsICdOZXR3b3JraW5nJywgJ1BhYVMnLCAnSW5mcmFzdHJ1Y3R1cmUnLCAnQXBwbGljYXRpb25zJ107CnZhciBDRVJUSUZJRURfU09SVFMgPSBfZGVmaW5lUHJvcGVydHkoX2RlZmluZVByb3BlcnR5KF9kZWZpbmVQcm9wZXJ0eShfZGVmaW5lUHJvcGVydHkoe30sIENBVEFMT0dfQU5OT1RBVElPTlMuX1JBTkNIRVIsIDEpLCBDQVRBTE9HX0FOTk9UQVRJT05TLl9FWFBFUklNRU5UQUwsIDEpLCBDQVRBTE9HX0FOTk9UQVRJT05TLl9QQVJUTkVSLCAyKSwgIm90aGVyIiwgMyk7CmV4cG9ydCB2YXIgV0lORE9XUyA9ICd3aW5kb3dzJzsKZXhwb3J0IHZhciBMSU5VWCA9ICdsaW51eCc7CmV4cG9ydCB2YXIgc3RhdGUgPSBmdW5jdGlvbiBzdGF0ZSgpIHsKICByZXR1cm4gewogICAgbG9hZGVkOiB7fSwKICAgIGNsdXN0ZXJSZXBvczogW10sCiAgICBuYW1lc3BhY2VkUmVwb3M6IFtdLAogICAgY2hhcnRzOiB7fSwKICAgIHZlcnNpb25JbmZvczoge30sCiAgICBjb25maWc6IHsKICAgICAgbmFtZXNwYWNlOiAnY2F0YWxvZycKICAgIH0sCiAgICBpblN0b3JlOiB1bmRlZmluZWQKICB9Owp9OwpleHBvcnQgdmFyIGdldHRlcnMgPSB7CiAgaXNMb2FkZWQ6IGZ1bmN0aW9uIGlzTG9hZGVkKHN0YXRlKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKHJlcG8pIHsKICAgICAgcmV0dXJuICEhc3RhdGUubG9hZGVkW3JlcG8uX2tleV07CiAgICB9OwogIH0sCiAgcmVwb3M6IGZ1bmN0aW9uIHJlcG9zKHN0YXRlKSB7CiAgICB2YXIgY2x1c3RlcmVkID0gc3RhdGUuY2x1c3RlclJlcG9zIHx8IFtdOwogICAgdmFyIG5hbWVzcGFjZWQgPSBzdGF0ZS5uYW1lc3BhY2VkUmVwb3MgfHwgW107CiAgICByZXR1cm4gW10uY29uY2F0KF90b0NvbnN1bWFibGVBcnJheShjbHVzdGVyZWQpLCBfdG9Db25zdW1hYmxlQXJyYXkobmFtZXNwYWNlZCkpOwogIH0sCiAgLy8gUmF3IGNoYXJ0cwogIHJhd0NoYXJ0czogZnVuY3Rpb24gcmF3Q2hhcnRzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuY2hhcnRzOwogIH0sCiAgcmVwbzogZnVuY3Rpb24gcmVwbyhzdGF0ZSwgZ2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmKSB7CiAgICAgIHZhciByZXBvVHlwZSA9IF9yZWYucmVwb1R5cGUsCiAgICAgICAgcmVwb05hbWUgPSBfcmVmLnJlcG9OYW1lOwogICAgICB2YXIgYXJ5ID0gcmVwb1R5cGUgPT09ICdjbHVzdGVyJyA/IHN0YXRlLmNsdXN0ZXJSZXBvcyA6IHN0YXRlLm5hbWVzcGFjZWRSZXBvczsKICAgICAgcmV0dXJuIGZpbmRCeShhcnksICdtZXRhZGF0YS5uYW1lJywgcmVwb05hbWUpOwogICAgfTsKICB9LAogIGNoYXJ0czogZnVuY3Rpb24gY2hhcnRzKHN0YXRlLCBnZXR0ZXJzLCByb290U3RhdGUsIHJvb3RHZXR0ZXJzKSB7CiAgICB2YXIgX3Jvb3RHZXR0ZXJzJGN1cnJlbnRQOwogICAgdmFyIHJlcG9LZXlzID0gZ2V0dGVycy5yZXBvcy5tYXAoZnVuY3Rpb24gKHgpIHsKICAgICAgcmV0dXJuIHguX2tleTsKICAgIH0pOwogICAgdmFyIGNsdXN0ZXIgPSByb290R2V0dGVyc1snY3VycmVudENsdXN0ZXInXTsKICAgIGlmICgoKF9yb290R2V0dGVycyRjdXJyZW50UCA9IHJvb3RHZXR0ZXJzWydjdXJyZW50UHJvZHVjdCddKSA9PT0gbnVsbCB8fCBfcm9vdEdldHRlcnMkY3VycmVudFAgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9yb290R2V0dGVycyRjdXJyZW50UC5pblN0b3JlKSA9PT0gJ21hbmFnZW1lbnQnKSB7CiAgICAgIGNsdXN0ZXIgPSBudWxsOwogICAgfQoKICAgIC8vIEZpbHRlciBvdXQgY2hhcnRzIGZvciByZXBvcyB0aGF0IGFyZSBubyBsb25nZXIgaW4gdGhlIHN0b3JlLCByYXRoZXIKICAgIC8vIHRoYW4gdHJ5aW5nIHRvIGNsZWFyIHRoZW0gd2hlbiBhIHJlcG8gaXMgcmVtb3ZlZC4KICAgIC8vIEFuZCBvbmVzIHRoYXQgYXJlIGZvciB0aGUgd3Jvbmcga2luZCBvZiBjbHVzdGVyCiAgICB2YXIgb3V0ID0gT2JqZWN0LnZhbHVlcyhzdGF0ZS5jaGFydHMpLmZpbHRlcihmdW5jdGlvbiAoY2hhcnQpIHsKICAgICAgaWYgKCFyZXBvS2V5cy5pbmNsdWRlcyhjaGFydC5yZXBvS2V5KSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAoY2x1c3RlciAmJiBjaGFydC5zY29wZSAmJiBjaGFydC5zY29wZSAhPT0gY2x1c3Rlci5zY29wZSkgewogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0pOwogICAgcmV0dXJuIHNvcnRCeShvdXQsIFsnY2VydGlmaWVkU29ydCcsICdyZXBvTmFtZScsICdjaGFydE5hbWUnXSk7CiAgfSwKICBjaGFydDogZnVuY3Rpb24gY2hhcnQoc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoX3JlZjIpIHsKICAgICAgdmFyIGtleSA9IF9yZWYyLmtleSwKICAgICAgICByZXBvVHlwZSA9IF9yZWYyLnJlcG9UeXBlLAogICAgICAgIHJlcG9OYW1lID0gX3JlZjIucmVwb05hbWUsCiAgICAgICAgY2hhcnROYW1lID0gX3JlZjIuY2hhcnROYW1lLAogICAgICAgIHByZWZlclJlcG9UeXBlID0gX3JlZjIucHJlZmVyUmVwb1R5cGUsCiAgICAgICAgcHJlZmVyUmVwb05hbWUgPSBfcmVmMi5wcmVmZXJSZXBvTmFtZSwKICAgICAgICBpbmNsdWRlSGlkZGVuID0gX3JlZjIuaW5jbHVkZUhpZGRlbjsKICAgICAgaWYgKGtleSAmJiAhcmVwb1R5cGUgJiYgIXJlcG9OYW1lICYmICFjaGFydE5hbWUpIHsKICAgICAgICB2YXIgcGFyc2VkID0gcGFyc2VLZXkoa2V5KTsKICAgICAgICByZXBvVHlwZSA9IHBhcnNlZC5yZXBvVHlwZTsKICAgICAgICByZXBvTmFtZSA9IHBhcnNlZC5yZXBvTmFtZTsKICAgICAgICBjaGFydE5hbWUgPSBwYXJzZWQuY2hhcnROYW1lOwogICAgICB9CiAgICAgIHZhciBtYXRjaGluZyA9IGZpbHRlckJ5KGdldHRlcnMuY2hhcnRzLCB7CiAgICAgICAgcmVwb1R5cGU6IHJlcG9UeXBlLAogICAgICAgIHJlcG9OYW1lOiByZXBvTmFtZSwKICAgICAgICBjaGFydE5hbWU6IGNoYXJ0TmFtZSwKICAgICAgICBkZXByZWNhdGVkOiBmYWxzZQogICAgICB9KTsKICAgICAgaWYgKGluY2x1ZGVIaWRkZW4gPT09IGZhbHNlKSB7CiAgICAgICAgbWF0Y2hpbmcgPSBtYXRjaGluZy5maWx0ZXIoZnVuY3Rpb24gKHgpIHsKICAgICAgICAgIHJldHVybiAheC5oaWRkZW47CiAgICAgICAgfSk7CiAgICAgIH0KICAgICAgaWYgKCFtYXRjaGluZy5sZW5ndGgpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgaWYgKHByZWZlclJlcG9UeXBlICYmIHByZWZlclJlcG9OYW1lKSB7CiAgICAgICAgcHJlZmVyU2FtZVJlcG8obWF0Y2hpbmcsIHByZWZlclJlcG9UeXBlLCBwcmVmZXJSZXBvTmFtZSk7CiAgICAgIH0KICAgICAgcmV0dXJuIG1hdGNoaW5nWzBdOwogICAgfTsKICB9LAogIGlzSW5zdGFsbGVkOiBmdW5jdGlvbiBpc0luc3RhbGxlZChzdGF0ZSwgZ2V0dGVycywgcm9vdFN0YXRlLCByb290R2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmMykgewogICAgICB2YXIgZ3ZyID0gX3JlZjMuZ3ZyOwogICAgICB2YXIgbmFtZSwgdmVyc2lvbjsKICAgICAgdmFyIGlkeCA9IGd2ci5pbmRleE9mKCcvJyk7CiAgICAgIGlmIChpZHggPiAwKSB7CiAgICAgICAgbmFtZSA9IGd2ci5zdWJzdHIoMCwgaWR4KTsKICAgICAgICB2ZXJzaW9uID0gZ3ZyLnN1YnN0cihpZHggKyAxKTsKICAgICAgfSBlbHNlIHsKICAgICAgICBuYW1lID0gZ3ZyOwogICAgICB9CiAgICAgIHZhciBpblN0b3JlID0gcm9vdEdldHRlcnNbJ2N1cnJlbnRQcm9kdWN0J10uaW5TdG9yZTsKICAgICAgdmFyIHNjaGVtYSA9IHJvb3RHZXR0ZXJzWyIiLmNvbmNhdChpblN0b3JlLCAiL3NjaGVtYUZvciIpXShuYW1lKTsKICAgICAgaWYgKHNjaGVtYSAmJiAoIXZlcnNpb24gfHwgc2NoZW1hLmF0dHJpYnV0ZXMudmVyc2lvbiA9PT0gdmVyc2lvbikpIHsKICAgICAgICByZXR1cm4gdHJ1ZTsKICAgICAgfQogICAgICByZXR1cm4gZmFsc2U7CiAgICB9OwogIH0sCiAgdmVyc2lvblNhdGlzZnlpbmc6IGZ1bmN0aW9uIHZlcnNpb25TYXRpc2Z5aW5nKHN0YXRlLCBnZXR0ZXJzKSB7CiAgICByZXR1cm4gZnVuY3Rpb24gKF9yZWY0KSB7CiAgICAgIHZhciByZXBvVHlwZSA9IF9yZWY0LnJlcG9UeXBlLAogICAgICAgIHJlcG9OYW1lID0gX3JlZjQucmVwb05hbWUsCiAgICAgICAgY29uc3RyYWludCA9IF9yZWY0LmNvbnN0cmFpbnQsCiAgICAgICAgY2hhcnRWZXJzaW9uID0gX3JlZjQuY2hhcnRWZXJzaW9uOwogICAgICB2YXIgbmFtZSwgd2FudFZlcnNpb247CiAgICAgIHZhciBpZHggPSBjb25zdHJhaW50LmluZGV4T2YoJz0nKTsKICAgICAgaWYgKGlkeCA+IDApIHsKICAgICAgICBuYW1lID0gY29uc3RyYWludC5zdWJzdHIoMCwgaWR4KTsKICAgICAgICB3YW50VmVyc2lvbiA9IG5vcm1hbGl6ZVZlcnNpb24oY29uc3RyYWludC5zdWJzdHIoaWR4ICsgMSkpOwogICAgICB9IGVsc2UgewogICAgICAgIG5hbWUgPSBjb25zdHJhaW50OwogICAgICAgIHdhbnRWZXJzaW9uID0gJ2xhdGVzdCc7CiAgICAgIH0KICAgICAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKS50cmltKCk7CiAgICAgIGNoYXJ0VmVyc2lvbiA9IG5vcm1hbGl6ZVZlcnNpb24oY2hhcnRWZXJzaW9uKTsKICAgICAgdmFyIG1hdGNoaW5nID0gZ2V0dGVycy5jaGFydHMuZmlsdGVyKGZ1bmN0aW9uIChjaGFydCkgewogICAgICAgIHJldHVybiBjaGFydC5jaGFydE5hbWUudG9Mb3dlckNhc2UoKS50cmltKCkgPT09IG5hbWU7CiAgICAgIH0pOwogICAgICBpZiAoIW1hdGNoaW5nLmxlbmd0aCkgewogICAgICAgIHJldHVybjsKICAgICAgfQogICAgICBpZiAocmVwb1R5cGUgJiYgcmVwb05hbWUpIHsKICAgICAgICBwcmVmZXJTYW1lUmVwbyhtYXRjaGluZywgcmVwb1R5cGUsIHJlcG9OYW1lKTsKICAgICAgfQogICAgICB2YXIgY2hhcnQgPSBtYXRjaGluZ1swXTsKICAgICAgdmFyIHZlcnNpb247CiAgICAgIGlmICh3YW50VmVyc2lvbiA9PT0gJ2xhdGVzdCcpIHsKICAgICAgICB2ZXJzaW9uID0gY2hhcnQudmVyc2lvbnNbMF07CiAgICAgIH0gZWxzZSBpZiAod2FudFZlcnNpb24gPT09ICdtYXRjaCcgfHwgd2FudFZlcnNpb24gPT09ICdtYXRjaGluZycpIHsKICAgICAgICB2ZXJzaW9uID0gY2hhcnQudmVyc2lvbnMuZmluZChmdW5jdGlvbiAodikgewogICAgICAgICAgcmV0dXJuIG5vcm1hbGl6ZVZlcnNpb24odi52ZXJzaW9uKSA9PT0gY2hhcnRWZXJzaW9uOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIHZlcnNpb24gPSBjaGFydC52ZXJzaW9ucy5maW5kKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICByZXR1cm4gbm9ybWFsaXplVmVyc2lvbih2LnZlcnNpb24pID09PSB3YW50VmVyc2lvbjsKICAgICAgICB9KTsKICAgICAgfQogICAgICBpZiAodmVyc2lvbikgewogICAgICAgIHJldHVybiBjbG9uZSh2ZXJzaW9uKTsKICAgICAgfQogICAgfTsKICB9LAogIHZlcnNpb25Qcm92aWRpbmc6IGZ1bmN0aW9uIHZlcnNpb25Qcm92aWRpbmcoc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAoX3JlZjUpIHsKICAgICAgdmFyIHJlcG9UeXBlID0gX3JlZjUucmVwb1R5cGUsCiAgICAgICAgcmVwb05hbWUgPSBfcmVmNS5yZXBvTmFtZSwKICAgICAgICBndnIgPSBfcmVmNS5ndnI7CiAgICAgIHZhciBtYXRjaGluZyA9IGdldHRlcnMuY2hhcnRzLmZpbHRlcihmdW5jdGlvbiAoY2hhcnQpIHsKICAgICAgICByZXR1cm4gY2hhcnQucHJvdmlkZXMuaW5jbHVkZXMoZ3ZyKTsKICAgICAgfSk7CiAgICAgIGlmICghbWF0Y2hpbmcubGVuZ3RoKSB7CiAgICAgICAgcmV0dXJuOwogICAgICB9CiAgICAgIGlmIChyZXBvVHlwZSAmJiByZXBvTmFtZSkgewogICAgICAgIHByZWZlclNhbWVSZXBvKG1hdGNoaW5nLCByZXBvVHlwZSwgcmVwb05hbWUpOwogICAgICB9CiAgICAgIHZhciB2ZXJzaW9uID0gbWF0Y2hpbmdbMF0udmVyc2lvbnMuZmluZChmdW5jdGlvbiAodmVyc2lvbikgewogICAgICAgIHZhciBfdmVyc2lvbiRhbm5vdGF0aW9uczsKICAgICAgICByZXR1cm4gKChfdmVyc2lvbiRhbm5vdGF0aW9ucyA9IHZlcnNpb24uYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF92ZXJzaW9uJGFubm90YXRpb25zID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfdmVyc2lvbiRhbm5vdGF0aW9uc1tDQVRBTE9HX0FOTk9UQVRJT05TLlBST1ZJREVTXSkgPT09IGd2cjsKICAgICAgfSk7CiAgICAgIGlmICh2ZXJzaW9uKSB7CiAgICAgICAgcmV0dXJuIGNsb25lKHZlcnNpb24pOwogICAgICB9CiAgICB9OwogIH0sCiAgdmVyc2lvbjogZnVuY3Rpb24gdmVyc2lvbihzdGF0ZSwgZ2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChfcmVmNikgewogICAgICB2YXIgcmVwb1R5cGUgPSBfcmVmNi5yZXBvVHlwZSwKICAgICAgICByZXBvTmFtZSA9IF9yZWY2LnJlcG9OYW1lLAogICAgICAgIGNoYXJ0TmFtZSA9IF9yZWY2LmNoYXJ0TmFtZSwKICAgICAgICB2ZXJzaW9uTmFtZSA9IF9yZWY2LnZlcnNpb25OYW1lOwogICAgICB2YXIgY2hhcnQgPSBnZXR0ZXJzWydjaGFydCddKHsKICAgICAgICByZXBvVHlwZTogcmVwb1R5cGUsCiAgICAgICAgcmVwb05hbWU6IHJlcG9OYW1lLAogICAgICAgIGNoYXJ0TmFtZTogY2hhcnROYW1lCiAgICAgIH0pOwogICAgICBpZiAoIWNoYXJ0KSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KICAgICAgdmFyIHZlcnNpb247CiAgICAgIGlmICh2ZXJzaW9uTmFtZSkgewogICAgICAgIHZlcnNpb24gPSBmaW5kQnkoY2hhcnQudmVyc2lvbnMsICd2ZXJzaW9uJywgdmVyc2lvbk5hbWUpOwogICAgICB9IGVsc2UgewogICAgICAgIHZlcnNpb24gPSBjaGFydC52ZXJzaW9uc1swXTsKICAgICAgfQogICAgICBpZiAodmVyc2lvbikgewogICAgICAgIHJldHVybiBjbG9uZSh2ZXJzaW9uKTsKICAgICAgfQogICAgfTsKICB9LAogIGVycm9yczogZnVuY3Rpb24gZXJyb3JzKHN0YXRlKSB7CiAgICByZXR1cm4gc3RhdGUuZXJyb3JzIHx8IFtdOwogIH0sCiAgaGF2ZUNvbXBvbmVudDogZnVuY3Rpb24gaGF2ZUNvbXBvbmVudCgpIHsKICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkgewogICAgICByZXR1cm4gZ2V0dGVyc1sndHlwZS1tYXAvaGFzQ3VzdG9tQ2hhcnQnXShuYW1lKTsKICAgIH07CiAgfSwKICBpbXBvcnRDb21wb25lbnQ6IGZ1bmN0aW9uIGltcG9ydENvbXBvbmVudChzdGF0ZSwgZ2V0dGVycykgewogICAgcmV0dXJuIGZ1bmN0aW9uIChuYW1lKSB7CiAgICAgIHJldHVybiBnZXR0ZXJzWyd0eXBlLW1hcC9pbXBvcnRDaGFydCddKG5hbWUpOwogICAgfTsKICB9LAogIGNoYXJ0U3RlcHM6IGZ1bmN0aW9uIGNoYXJ0U3RlcHMoc3RhdGUsIGdldHRlcnMpIHsKICAgIHJldHVybiBmdW5jdGlvbiAobmFtZSkgewogICAgICB2YXIgc3RlcHMgPSBbXTsKICAgICAgdmFyIHN0ZXBzUGF0aCA9ICIuLyIuY29uY2F0KG5hbWUsICIvc3RlcHMvIik7CiAgICAgIC8vIHJlcXVpcmUuY29udGV4dCBvbmx5IHRha2VzIGxpdGVyYWxzLCBzbyBmaW5kIGFsbCBjYW5kaWRhdGUgc3RlcCBmaWxlcyBhbmQgZmlsdGVyIG91dAogICAgICB2YXIgYWxsUGF0aHMgPSByZXF1aXJlLmNvbnRleHQoJ0BzaGVsbC9jaGFydCcsIHRydWUsIC9cLnZ1ZSQvKS5rZXlzKCk7CiAgICAgIGFsbFBhdGhzLmZpbHRlcihmdW5jdGlvbiAocGF0aCkgewogICAgICAgIHJldHVybiBwYXRoLnN0YXJ0c1dpdGgoc3RlcHNQYXRoKTsKICAgICAgfSkuZm9yRWFjaChmdW5jdGlvbiAocGF0aCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICBzdGVwcy5wdXNoKHsKICAgICAgICAgICAgbmFtZTogcGF0aC5yZXBsYWNlKHN0ZXBzUGF0aCwgJycpLAogICAgICAgICAgICBjb21wb25lbnQ6IGltcG9ydENoYXJ0KHBhdGguc3Vic3RyKDIsIHBhdGgubGVuZ3RoKSkKICAgICAgICAgIH0pOwogICAgICAgIH0gY2F0Y2ggKGUpIHsKICAgICAgICAgIGNvbnNvbGUud2FybigiRmFpbGVkIHRvIGxvYWQgc3RlcCBjb21wb25lbnQgIi5jb25jYXQocGF0aCwgIiBmb3IgY2hhcnQgIikuY29uY2F0KG5hbWUpLCBlKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgfQogICAgICB9KTsKICAgICAgcmV0dXJuIHN0ZXBzOwogICAgfTsKICB9LAogIGluU3RvcmU6IGZ1bmN0aW9uIGluU3RvcmUoc3RhdGUpIHsKICAgIHJldHVybiBzdGF0ZS5pblN0b3JlOwogIH0sCiAgY2xhc3NpZnk6IGZ1bmN0aW9uIGNsYXNzaWZ5KHN0YXRlLCBnZXR0ZXJzLCByb290U3RhdGUpIHsKICAgIHJldHVybiBmdW5jdGlvbiAob2JqKSB7CiAgICAgIHZhciBfb2JqJG1ldGFkYXRhOwogICAgICByZXR1cm4gbG9va3VwKHN0YXRlLmNvbmZpZy5uYW1lc3BhY2UsIG9iaiA9PT0gbnVsbCB8fCBvYmogPT09IHZvaWQgMCA/IHZvaWQgMCA6IG9iai50eXBlLCBvYmogPT09IG51bGwgfHwgb2JqID09PSB2b2lkIDAgfHwgKF9vYmokbWV0YWRhdGEgPSBvYmoubWV0YWRhdGEpID09PSBudWxsIHx8IF9vYmokbWV0YWRhdGEgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9vYmokbWV0YWRhdGEubmFtZSwgcm9vdFN0YXRlKTsKICAgIH07CiAgfQp9OwpleHBvcnQgdmFyIG11dGF0aW9ucyA9IHsKICByZXNldDogZnVuY3Rpb24gcmVzZXQoY3VycmVudFN0YXRlKSB7CiAgICB2YXIgbmV3U3RhdGUgPSBzdGF0ZSgpOwogICAgT2JqZWN0LmFzc2lnbihjdXJyZW50U3RhdGUsIG5ld1N0YXRlKTsKICB9LAogIHNldEluU3RvcmU6IGZ1bmN0aW9uIHNldEluU3RvcmUoc3RhdGUsIGluU3RvcmUpIHsKICAgIHN0YXRlLmluU3RvcmUgPSBpblN0b3JlOwogIH0sCiAgc2V0UmVwb3M6IGZ1bmN0aW9uIHNldFJlcG9zKHN0YXRlLCBfcmVmNykgewogICAgdmFyIGNsdXN0ZXIgPSBfcmVmNy5jbHVzdGVyLAogICAgICBuYW1lc3BhY2VkID0gX3JlZjcubmFtZXNwYWNlZDsKICAgIHN0YXRlLmNsdXN0ZXJSZXBvcyA9IGNsdXN0ZXI7CiAgICBzdGF0ZS5uYW1lc3BhY2VkUmVwb3MgPSBuYW1lc3BhY2VkOwogIH0sCiAgc2V0Q2hhcnRzOiBmdW5jdGlvbiBzZXRDaGFydHMoc3RhdGUsIF9yZWY4KSB7CiAgICB2YXIgY2hhcnRzID0gX3JlZjguY2hhcnRzLAogICAgICBfcmVmOCRlcnJvcnMgPSBfcmVmOC5lcnJvcnMsCiAgICAgIGVycm9ycyA9IF9yZWY4JGVycm9ycyA9PT0gdm9pZCAwID8gW10gOiBfcmVmOCRlcnJvcnMsCiAgICAgIF9yZWY4JGxvYWRlZCA9IF9yZWY4LmxvYWRlZCwKICAgICAgbG9hZGVkID0gX3JlZjgkbG9hZGVkID09PSB2b2lkIDAgPyBbXSA6IF9yZWY4JGxvYWRlZDsKICAgIHN0YXRlLmNoYXJ0cyA9IGNoYXJ0czsKICAgIHN0YXRlLmVycm9ycyA9IGVycm9yczsKICAgIHZhciBfaXRlcmF0b3IgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihsb2FkZWQpLAogICAgICBfc3RlcDsKICAgIHRyeSB7CiAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgdmFyIHJlcG8gPSBfc3RlcC52YWx1ZTsKICAgICAgICBzdGF0ZS5sb2FkZWRbcmVwby5fa2V5XSA9IHRydWU7CiAgICAgIH0KICAgIH0gY2F0Y2ggKGVycikgewogICAgICBfaXRlcmF0b3IuZShlcnIpOwogICAgfSBmaW5hbGx5IHsKICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgIH0KICB9LAogIGNhY2hlVmVyc2lvbjogZnVuY3Rpb24gY2FjaGVWZXJzaW9uKHN0YXRlLCBfcmVmOSkgewogICAgdmFyIGtleSA9IF9yZWY5LmtleSwKICAgICAgaW5mbyA9IF9yZWY5LmluZm87CiAgICBzdGF0ZS52ZXJzaW9uSW5mb3Nba2V5XSA9IGluZm87CiAgfQp9OwpleHBvcnQgdmFyIGFjdGlvbnMgPSB7CiAgbG9hZDogZnVuY3Rpb24gbG9hZChjdHgpIHsKICAgIHZhciBfYXJndW1lbnRzID0gYXJndW1lbnRzOwogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgdmFyIF9yZWYxMCwgZm9yY2UsIHJlc2V0LCBzdGF0ZSwgZ2V0dGVycywgcm9vdEdldHRlcnMsIGNvbW1pdCwgZGlzcGF0Y2gsIHByb21pc2VzLCBpblN0b3JlLCBoYXNoLCByZXBvcywgbG9hZGVkLCBfaXRlcmF0b3IyLCBfc3RlcDIsIF9yZXBvLCByZXMsIGNoYXJ0cywgZXJyb3JzLCBfaSwgX09iamVjdCRrZXlzLCBrZXksIG9iaiwgcmVwbywgaywgX2l0ZXJhdG9yMywgX3N0ZXAzLCBlbnRyeTsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgd2hpbGUgKDEpIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgX3JlZjEwID0gX2FyZ3VtZW50cy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHNbMV0gIT09IHVuZGVmaW5lZCA/IF9hcmd1bWVudHNbMV0gOiB7fSwgZm9yY2UgPSBfcmVmMTAuZm9yY2UsIHJlc2V0ID0gX3JlZjEwLnJlc2V0OwogICAgICAgICAgICBzdGF0ZSA9IGN0eC5zdGF0ZSwgZ2V0dGVycyA9IGN0eC5nZXR0ZXJzLCByb290R2V0dGVycyA9IGN0eC5yb290R2V0dGVycywgY29tbWl0ID0gY3R4LmNvbW1pdCwgZGlzcGF0Y2ggPSBjdHguZGlzcGF0Y2g7CiAgICAgICAgICAgIHByb21pc2VzID0ge307IC8vIEluc3RhbGxpbmcgYW4gYXBwPyBUaGlzIGlzIGZpbmUgKGluIGNsdXN0ZXIgc3RvcmUpCiAgICAgICAgICAgIC8vIEZldGNoaW5nIGxpc3Qgb2YgY2x1c3RlciB0ZW1wbGF0ZXM/IFRoaXMgaXMgZmluZSAoaW4gbWFuYWdlbWVudCBzdG9yZSkKICAgICAgICAgICAgLy8gSW5zdGFsbGluZyBhIGNsdXN0ZXIgdGVtcGxhdGU/IFRoaXMgaXNuJ3QgZmluZSAoaW4gY2x1c3RlciBzdG9yZSBhcyBwZXIgaW5zdGFsbGluZyBhcHAsIGJ1dCBpZiB0aGVyZSBpcyBubyBjbHVzdGVyIHdlIG5lZWQgdG8gZGVmYXVsdCB0byBtYW5hZ2VtZW50KQogICAgICAgICAgICBpblN0b3JlID0gcm9vdEdldHRlcnNbJ2N1cnJlbnRDbHVzdGVyJ10gPyByb290R2V0dGVyc1snY3VycmVudFByb2R1Y3QnXS5pblN0b3JlIDogJ21hbmFnZW1lbnQnOwogICAgICAgICAgICBpZiAocm9vdEdldHRlcnNbIiIuY29uY2F0KGluU3RvcmUsICIvc2NoZW1hRm9yIildKENBVEFMT0cuQ0xVU1RFUl9SRVBPKSkgewogICAgICAgICAgICAgIHByb21pc2VzLmNsdXN0ZXIgPSBkaXNwYXRjaCgiIi5jb25jYXQoaW5TdG9yZSwgIi9maW5kQWxsIiksIHsKICAgICAgICAgICAgICAgIHR5cGU6IENBVEFMT0cuQ0xVU1RFUl9SRVBPCiAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmIChyb290R2V0dGVyc1siIi5jb25jYXQoaW5TdG9yZSwgIi9zY2hlbWFGb3IiKV0oQ0FUQUxPRy5SRVBPKSkgewogICAgICAgICAgICAgIHByb21pc2VzLm5hbWVzcGFjZWQgPSBkaXNwYXRjaCgiIi5jb25jYXQoaW5TdG9yZSwgIi9maW5kQWxsIiksIHsKICAgICAgICAgICAgICAgIHR5cGU6IENBVEFMT0cuUkVQTwogICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gODsKICAgICAgICAgICAgcmV0dXJuIGFsbEhhc2gocHJvbWlzZXMpOwogICAgICAgICAgY2FzZSA4OgogICAgICAgICAgICBoYXNoID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgLy8gQXMgcGVyIGNvbW1lbnQgYWJvdmUsIHdoZW4gdGhlcmUgYXJlIG5vIGNsdXN0ZXJzIHRoaXMgd2lsbCBiZSBtYW5hZ2VtZW50LiBTdG9yZSBpdCBzdWNoIHRoYXQgaXQgY2FuIGJlIHVzZWQgZm9yIHRob3NlIGNhc2VzCiAgICAgICAgICAgIGNvbW1pdCgnc2V0SW5TdG9yZScsIGluU3RvcmUpOwogICAgICAgICAgICBoYXNoLmNsdXN0ZXIgPSBoYXNoLmNsdXN0ZXIuZmlsdGVyKGZ1bmN0aW9uIChyZXBvKSB7CiAgICAgICAgICAgICAgdmFyIF9yZXBvJG1ldGFkYXRhOwogICAgICAgICAgICAgIHJldHVybiAhKChyZXBvID09PSBudWxsIHx8IHJlcG8gPT09IHZvaWQgMCB8fCAoX3JlcG8kbWV0YWRhdGEgPSByZXBvLm1ldGFkYXRhKSA9PT0gbnVsbCB8fCBfcmVwbyRtZXRhZGF0YSA9PT0gdm9pZCAwIHx8IChfcmVwbyRtZXRhZGF0YSA9IF9yZXBvJG1ldGFkYXRhLmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfcmVwbyRtZXRhZGF0YSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3JlcG8kbWV0YWRhdGFbQ0FUQUxPR19BTk5PVEFUSU9OUy5ISURERU5fUkVQT10pID09PSAndHJ1ZScpOwogICAgICAgICAgICB9KTsKICAgICAgICAgICAgY29tbWl0KCdzZXRSZXBvcycsIGhhc2gpOwogICAgICAgICAgICByZXBvcyA9IGdldHRlcnNbJ3JlcG9zJ107CiAgICAgICAgICAgIGxvYWRlZCA9IFtdOwogICAgICAgICAgICBwcm9taXNlcyA9IHt9OwogICAgICAgICAgICBfaXRlcmF0b3IyID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocmVwb3MpOwogICAgICAgICAgICB0cnkgewogICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMi5zKCk7ICEoX3N0ZXAyID0gX2l0ZXJhdG9yMi5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICBfcmVwbyA9IF9zdGVwMi52YWx1ZTsKICAgICAgICAgICAgICAgIGlmICgoZm9yY2UgPT09IHRydWUgfHwgIWdldHRlcnMuaXNMb2FkZWQoX3JlcG8pKSAmJiBfcmVwby5jYW5Mb2FkKSB7CiAgICAgICAgICAgICAgICAgIGNvbnNvbGUuaW5mbygnTG9hZGluZyBpbmRleCBmb3IgcmVwbycsIF9yZXBvLm5hbWUsICIoIi5jb25jYXQoX3JlcG8uX2tleSwgIikiKSk7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tY29uc29sZQogICAgICAgICAgICAgICAgICBwcm9taXNlc1tfcmVwby5fa2V5XSA9IF9yZXBvLmZvbGxvd0xpbmsoJ2luZGV4Jyk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9IGNhdGNoIChlcnIpIHsKICAgICAgICAgICAgICBfaXRlcmF0b3IyLmUoZXJyKTsKICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICBfaXRlcmF0b3IyLmYoKTsKICAgICAgICAgICAgfQogICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMTk7CiAgICAgICAgICAgIHJldHVybiBhbGxIYXNoU2V0dGxlZChwcm9taXNlcyk7CiAgICAgICAgICBjYXNlIDE5OgogICAgICAgICAgICByZXMgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICBjaGFydHMgPSByZXNldCA/IHt9IDogc3RhdGUuY2hhcnRzOwogICAgICAgICAgICBlcnJvcnMgPSBbXTsKICAgICAgICAgICAgX2kgPSAwLCBfT2JqZWN0JGtleXMgPSBPYmplY3Qua2V5cyhyZXMpOwogICAgICAgICAgY2FzZSAyMzoKICAgICAgICAgICAgaWYgKCEoX2kgPCBfT2JqZWN0JGtleXMubGVuZ3RoKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzNTsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBrZXkgPSBfT2JqZWN0JGtleXNbX2ldOwogICAgICAgICAgICBvYmogPSByZXNba2V5XTsKICAgICAgICAgICAgcmVwbyA9IGZpbmRCeShyZXBvcywgJ19rZXknLCBrZXkpOwogICAgICAgICAgICBpZiAoIShvYmouc3RhdHVzID09PSAncmVqZWN0ZWQnKSkgewogICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAzMDsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBlcnJvcnMucHVzaChzdHJpbmdpZnkob2JqLnJlYXNvbikpOwogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJjb250aW51ZSIsIDMyKTsKICAgICAgICAgIGNhc2UgMzA6CiAgICAgICAgICAgIGZvciAoayBpbiBvYmoudmFsdWUuZW50cmllcykgewogICAgICAgICAgICAgIF9pdGVyYXRvcjMgPSBfY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlcihvYmoudmFsdWUuZW50cmllc1trXSk7CiAgICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIGZvciAoX2l0ZXJhdG9yMy5zKCk7ICEoX3N0ZXAzID0gX2l0ZXJhdG9yMy5uKCkpLmRvbmU7KSB7CiAgICAgICAgICAgICAgICAgIGVudHJ5ID0gX3N0ZXAzLnZhbHVlOwogICAgICAgICAgICAgICAgICBhZGRDaGFydChjdHgsIGNoYXJ0cywgZW50cnksIHJlcG8pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgICAgICAgICAgX2l0ZXJhdG9yMy5lKGVycik7CiAgICAgICAgICAgICAgfSBmaW5hbGx5IHsKICAgICAgICAgICAgICAgIF9pdGVyYXRvcjMuZigpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICBsb2FkZWQucHVzaChyZXBvKTsKICAgICAgICAgIGNhc2UgMzI6CiAgICAgICAgICAgIF9pKys7CiAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyMzsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICBjYXNlIDM1OgogICAgICAgICAgICBjb21taXQoJ3NldENoYXJ0cycsIHsKICAgICAgICAgICAgICBjaGFydHM6IGNoYXJ0cywKICAgICAgICAgICAgICBlcnJvcnM6IGVycm9ycywKICAgICAgICAgICAgICBsb2FkZWQ6IGxvYWRlZAogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgMzY6CiAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZSk7CiAgICB9KSkoKTsKICB9LAogIHJlZnJlc2g6IGZ1bmN0aW9uIHJlZnJlc2goX3JlZjExKSB7CiAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMigpIHsKICAgICAgdmFyIGdldHRlcnMsIGNvbW1pdCwgZGlzcGF0Y2gsIHByb21pc2VzOwogICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgIHdoaWxlICgxKSBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgZ2V0dGVycyA9IF9yZWYxMS5nZXR0ZXJzLCBjb21taXQgPSBfcmVmMTEuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYxMS5kaXNwYXRjaDsKICAgICAgICAgICAgcHJvbWlzZXMgPSBnZXR0ZXJzLnJlcG9zLm1hcChmdW5jdGlvbiAoeCkgewogICAgICAgICAgICAgIHJldHVybiB4LnJlZnJlc2goKTsKICAgICAgICAgICAgfSk7IC8vIEBUT0RPIHdhaXQgZm9yIHJlcG8gc3RhdGUgdG8gaW5kaWNhdGUgdGhleSdyZSBkb25lIG9uY2UgdGhlIEFQSSBoYXMgdGhhdAogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDQ7CiAgICAgICAgICAgIHJldHVybiBQcm9taXNlLmFsbFNldHRsZWQocHJvbWlzZXMpOwogICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICBfY29udGV4dDIubmV4dCA9IDY7CiAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnbG9hZCcsIHsKICAgICAgICAgICAgICBmb3JjZTogdHJ1ZSwKICAgICAgICAgICAgICByZXNldDogdHJ1ZQogICAgICAgICAgICB9KTsKICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgIH0KICAgICAgfSwgX2NhbGxlZTIpOwogICAgfSkpKCk7CiAgfSwKICAvKgogICAgRmV0Y2ggZnVsbCBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljIHZlcnNpb24gb2YgYSBIZWxtIGNoYXJ0LAogICAgaW5jbHVkaW5nIHRoZSBzdGFuZGFyZCB2YWx1ZXMgYW5kIFJFQURNRS4KICAqLwogIGdldFZlcnNpb25JbmZvOiBmdW5jdGlvbiBnZXRWZXJzaW9uSW5mbyhfcmVmMTIsIF9yZWYxMykgewogICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTMoKSB7CiAgICAgIHZhciBzdGF0ZSwgZ2V0dGVycywgY29tbWl0LCByZXBvVHlwZSwgcmVwb05hbWUsIGNoYXJ0TmFtZSwgdmVyc2lvbk5hbWUsIGtleSwgaW5mbywgcmVwbzsKICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUzJChfY29udGV4dDMpIHsKICAgICAgICB3aGlsZSAoMSkgc3dpdGNoIChfY29udGV4dDMucHJldiA9IF9jb250ZXh0My5uZXh0KSB7CiAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgIHN0YXRlID0gX3JlZjEyLnN0YXRlLCBnZXR0ZXJzID0gX3JlZjEyLmdldHRlcnMsIGNvbW1pdCA9IF9yZWYxMi5jb21taXQ7CiAgICAgICAgICAgIHJlcG9UeXBlID0gX3JlZjEzLnJlcG9UeXBlLCByZXBvTmFtZSA9IF9yZWYxMy5yZXBvTmFtZSwgY2hhcnROYW1lID0gX3JlZjEzLmNoYXJ0TmFtZSwgdmVyc2lvbk5hbWUgPSBfcmVmMTMudmVyc2lvbk5hbWU7CiAgICAgICAgICAgIGtleSA9ICIiLmNvbmNhdChyZXBvVHlwZSwgIi8iKS5jb25jYXQocmVwb05hbWUsICIvIikuY29uY2F0KGNoYXJ0TmFtZSwgIi8iKS5jb25jYXQodmVyc2lvbk5hbWUpOwogICAgICAgICAgICBpbmZvID0gc3RhdGUudmVyc2lvbkluZm9zW2tleV07CiAgICAgICAgICAgIGlmIChpbmZvKSB7CiAgICAgICAgICAgICAgX2NvbnRleHQzLm5leHQgPSAxMjsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXBvID0gZ2V0dGVyc1sncmVwbyddKHsKICAgICAgICAgICAgICByZXBvVHlwZTogcmVwb1R5cGUsCiAgICAgICAgICAgICAgcmVwb05hbWU6IHJlcG9OYW1lCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICBpZiAocmVwbykgewogICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gODsKICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcG8gbm90IGZvdW5kJyk7CiAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gMTA7CiAgICAgICAgICAgIHJldHVybiByZXBvLmZvbGxvd0xpbmsoJ2luZm8nLCB7CiAgICAgICAgICAgICAgdXJsOiBhZGRQYXJhbXMocmVwby5saW5rcy5pbmZvLCB7CiAgICAgICAgICAgICAgICBjaGFydE5hbWU6IGNoYXJ0TmFtZSwKICAgICAgICAgICAgICAgIHZlcnNpb246IHZlcnNpb25OYW1lCiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICBpbmZvID0gX2NvbnRleHQzLnNlbnQ7CiAgICAgICAgICAgIGNvbW1pdCgnY2FjaGVWZXJzaW9uJywgewogICAgICAgICAgICAgIGtleToga2V5LAogICAgICAgICAgICAgIGluZm86IGluZm8KICAgICAgICAgICAgfSk7CiAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICByZXR1cm4gX2NvbnRleHQzLmFicnVwdCgicmV0dXJuIiwgaW5mbyk7CiAgICAgICAgICBjYXNlIDEzOgogICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgfQogICAgICB9LCBfY2FsbGVlMyk7CiAgICB9KSkoKTsKICB9LAogIHJlaHlkcmF0ZTogZnVuY3Rpb24gcmVoeWRyYXRlKGN0eCkgewogICAgdmFyIHN0YXRlID0gY3R4LnN0YXRlLAogICAgICBjb21taXQgPSBjdHguY29tbWl0OwogICAgdmFyIGNoYXJ0cyA9IHN0YXRlLmNoYXJ0cyB8fCB7fTsKICAgIE9iamVjdC5lbnRyaWVzKHN0YXRlLmNoYXJ0cykuZm9yRWFjaChmdW5jdGlvbiAoX3JlZjE0KSB7CiAgICAgIHZhciBfcmVmMTUgPSBfc2xpY2VkVG9BcnJheShfcmVmMTQsIDIpLAogICAgICAgIGtleSA9IF9yZWYxNVswXSwKICAgICAgICBjaGFydCA9IF9yZWYxNVsxXTsKICAgICAgaWYgKGNoYXJ0Ll9fcmVoeWRyYXRlKSB7CiAgICAgICAgY2hhcnRzW2tleV0gPSBjbGFzc2lmeShjdHgsIGNoYXJ0KTsKICAgICAgfQogICAgfSk7CiAgICBjb21taXQoJ3NldENoYXJ0cycsIHsKICAgICAgY2hhcnRzOiBjaGFydHMsCiAgICAgIGVycm9yczogc3RhdGUuZXJyb3JzCiAgICB9KTsKICB9Cn07CmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUtleShyZXBvVHlwZSwgcmVwb05hbWUsIGNoYXJ0TmFtZSkgewogIHJldHVybiAiIi5jb25jYXQocmVwb1R5cGUsICIvIikuY29uY2F0KHJlcG9OYW1lLCAiLyIpLmNvbmNhdChjaGFydE5hbWUpOwp9CmV4cG9ydCBmdW5jdGlvbiBwYXJzZUtleShrZXkpIHsKICB2YXIgcGFydHMgPSBrZXkuc3BsaXQoJy8nKTsKICByZXR1cm4gewogICAgcmVwb1R5cGU6IHBhcnRzWzBdLAogICAgcmVwb05hbWU6IHBhcnRzWzFdLAogICAgY2hhcnROYW1lOiBwYXJ0c1syXQogIH07Cn0KZnVuY3Rpb24gYWRkQ2hhcnQoY3R4LCBtYXAsIGNoYXJ0LCByZXBvKSB7CiAgdmFyIF9jaGFydCRhbm5vdGF0aW9ucywgX2NoYXJ0JGFubm90YXRpb25zMiwgX2NoYXJ0JGFubm90YXRpb25zMTI7CiAgdmFyIHJlcG9UeXBlID0gcmVwby50eXBlID09PSBDQVRBTE9HLkNMVVNURVJfUkVQTyA/ICdjbHVzdGVyJyA6ICduYW1lc3BhY2UnOwogIHZhciByZXBvTmFtZSA9IHJlcG8ubWV0YWRhdGEubmFtZTsKICB2YXIga2V5ID0gZ2VuZXJhdGVLZXkocmVwb1R5cGUsIHJlcG9OYW1lLCBjaGFydC5uYW1lKTsKICB2YXIgb2JqID0gbWFwW2tleV07CiAgdmFyIGNlcnRpZmllZEFubm90YXRpb24gPSAoX2NoYXJ0JGFubm90YXRpb25zID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NoYXJ0JGFubm90YXRpb25zW0NBVEFMT0dfQU5OT1RBVElPTlMuQ0VSVElGSUVEXTsKICB2YXIgY2VydGlmaWVkID0gbnVsbDsKICB2YXIgc2lkZUxhYmVsID0gbnVsbDsKICBpZiAocmVwby5pc1JhbmNoZXIpIHsKICAgIGNlcnRpZmllZCA9IENBVEFMT0dfQU5OT1RBVElPTlMuX1JBTkNIRVI7CiAgfSBlbHNlIGlmIChyZXBvLmlzUGFydG5lcikgewogICAgY2VydGlmaWVkID0gQ0FUQUxPR19BTk5PVEFUSU9OUy5fUEFSVE5FUjsKICB9IGVsc2UgewogICAgY2VydGlmaWVkID0gQ0FUQUxPR19BTk5PVEFUSU9OUy5fT1RIRVI7CiAgfQogIGlmICgoX2NoYXJ0JGFubm90YXRpb25zMiA9IGNoYXJ0LmFubm90YXRpb25zKSAhPT0gbnVsbCAmJiBfY2hhcnQkYW5ub3RhdGlvbnMyICE9PSB2b2lkIDAgJiYgX2NoYXJ0JGFubm90YXRpb25zMltDQVRBTE9HX0FOTk9UQVRJT05TLkVYUEVSSU1FTlRBTF0pIHsKICAgIHNpZGVMYWJlbCA9ICdFeHBlcmltZW50YWwnOwogIH0gZWxzZSBpZiAoIXJlcG8uaXNSYW5jaGVyU291cmNlICYmIGNlcnRpZmllZEFubm90YXRpb24gJiYgY2VydGlmaWVkQW5ub3RhdGlvbiAhPT0gQ0FUQUxPR19BTk5PVEFUSU9OUy5fUkFOQ0hFUiAmJiBjZXJ0aWZpZWQgPT09IENBVEFMT0dfQU5OT1RBVElPTlMuX09USEVSKSB7CiAgICAvLyBCdXQgYW55Ym9keSBjYW4gc2V0IHRoZSBzaWRlIGxhYmVsCiAgICBzaWRlTGFiZWwgPSBjZXJ0aWZpZWRBbm5vdGF0aW9uOwogIH0KICBpZiAoIW9iaikgewogICAgdmFyIF9jaGFydCRhbm5vdGF0aW9uczMsIF9jaGFydCRhbm5vdGF0aW9uczQsIF9jaGFydCRhbm5vdGF0aW9uczUsIF9jaGFydCRhbm5vdGF0aW9uczYsIF9jaGFydCRhbm5vdGF0aW9uczcsIF9jaGFydCRhbm5vdGF0aW9uczgsIF9jaGFydCRhbm5vdGF0aW9uczksIF9jaGFydCRhbm5vdGF0aW9uczEwLCBfY2hhcnQkYW5ub3RhdGlvbnMxMTsKICAgIGlmIChjdHgpIHt9CiAgICBvYmogPSBjbGFzc2lmeShjdHgsIHsKICAgICAga2V5OiBrZXksCiAgICAgIHR5cGU6ICdjaGFydCcsCiAgICAgIGlkOiBrZXksCiAgICAgIGNlcnRpZmllZDogY2VydGlmaWVkLAogICAgICBzaWRlTGFiZWw6IHNpZGVMYWJlbCwKICAgICAgcmVwb1R5cGU6IHJlcG9UeXBlLAogICAgICByZXBvTmFtZTogcmVwb05hbWUsCiAgICAgIHJlcG9OYW1lRGlzcGxheTogY3R4LnJvb3RHZXR0ZXJzWydpMThuL3dpdGhGYWxsYmFjayddKCJjYXRhbG9nLnJlcG8ubmFtZS5cIiIuY29uY2F0KHJlcG9OYW1lLCAiXCIiKSwgbnVsbCwgcmVwb05hbWUpLAogICAgICBjZXJ0aWZpZWRTb3J0OiBDRVJUSUZJRURfU09SVFNbY2VydGlmaWVkXSB8fCA5OSwKICAgICAgaWNvbjogY2hhcnQuaWNvbiwKICAgICAgY29sb3I6IHJlcG8uY29sb3IsCiAgICAgIGNoYXJ0VHlwZTogKChfY2hhcnQkYW5ub3RhdGlvbnMzID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczMgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczNbQ0FUQUxPR19BTk5PVEFUSU9OUy5UWVBFXSkgfHwgQ0FUQUxPR19BTk5PVEFUSU9OUy5fQVBQLAogICAgICBjaGFydE5hbWU6IGNoYXJ0Lm5hbWUsCiAgICAgIGNoYXJ0TmFtZURpc3BsYXk6ICgoX2NoYXJ0JGFubm90YXRpb25zNCA9IGNoYXJ0LmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfY2hhcnQkYW5ub3RhdGlvbnM0ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnM0W0NBVEFMT0dfQU5OT1RBVElPTlMuRElTUExBWV9OQU1FXSkgfHwgY2hhcnQubmFtZSwKICAgICAgY2hhcnREZXNjcmlwdGlvbjogY2hhcnQuZGVzY3JpcHRpb24sCiAgICAgIGZlYXR1cmVkOiAoX2NoYXJ0JGFubm90YXRpb25zNSA9IGNoYXJ0LmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfY2hhcnQkYW5ub3RhdGlvbnM1ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnM1W0NBVEFMT0dfQU5OT1RBVElPTlMuRkVBVFVSRURdLAogICAgICByZXBvS2V5OiByZXBvLl9rZXksCiAgICAgIHZlcnNpb25zOiBbXSwKICAgICAgY2F0ZWdvcmllczogZmlsdGVyQ2F0ZWdvcmllcyhjaGFydC5rZXl3b3JkcyksCiAgICAgIGRlcHJlY2F0ZWQ6ICEhY2hhcnQuZGVwcmVjYXRlZCwKICAgICAgaGlkZGVuOiAhISgoX2NoYXJ0JGFubm90YXRpb25zNiA9IGNoYXJ0LmFubm90YXRpb25zKSAhPT0gbnVsbCAmJiBfY2hhcnQkYW5ub3RhdGlvbnM2ICE9PSB2b2lkIDAgJiYgX2NoYXJ0JGFubm90YXRpb25zNltDQVRBTE9HX0FOTk9UQVRJT05TLkhJRERFTl0pLAogICAgICB0YXJnZXROYW1lc3BhY2U6IChfY2hhcnQkYW5ub3RhdGlvbnM3ID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczcgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczdbQ0FUQUxPR19BTk5PVEFUSU9OUy5OQU1FU1BBQ0VdLAogICAgICB0YXJnZXROYW1lOiAoX2NoYXJ0JGFubm90YXRpb25zOCA9IGNoYXJ0LmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfY2hhcnQkYW5ub3RhdGlvbnM4ID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnM4W0NBVEFMT0dfQU5OT1RBVElPTlMuUkVMRUFTRV9OQU1FXSwKICAgICAgc2NvcGU6IChfY2hhcnQkYW5ub3RhdGlvbnM5ID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczkgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9jaGFydCRhbm5vdGF0aW9uczlbQ0FUQUxPR19BTk5PVEFUSU9OUy5TQ09QRV0sCiAgICAgIHByb3ZpZGVzOiBbXSwKICAgICAgd2luZG93c0luY29tcGF0aWJsZTogISgoKF9jaGFydCRhbm5vdGF0aW9uczEwID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczEwID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnMxMFtDQVRBTE9HX0FOTk9UQVRJT05TLlBFUk1JVFRFRF9PU10pIHx8ICcnKS5pbmNsdWRlcygnd2luZG93cycpLAogICAgICBkZXBsb3lzT25XaW5kb3dzOiAoKChfY2hhcnQkYW5ub3RhdGlvbnMxMSA9IGNoYXJ0LmFubm90YXRpb25zKSA9PT0gbnVsbCB8fCBfY2hhcnQkYW5ub3RhdGlvbnMxMSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2NoYXJ0JGFubm90YXRpb25zMTFbQ0FUQUxPR19BTk5PVEFUSU9OUy5ERVBMT1lFRF9PU10pIHx8ICcnKS5pbmNsdWRlcygnd2luZG93cycpCiAgICB9KTsKICAgIG1hcFtrZXldID0gb2JqOwogIH0KICBjaGFydC5rZXkgPSAiIi5jb25jYXQoa2V5LCAiLyIpLmNvbmNhdChjaGFydC52ZXJzaW9uKTsKICBjaGFydC5yZXBvVHlwZSA9IHJlcG9UeXBlOwogIGNoYXJ0LnJlcG9OYW1lID0gcmVwb05hbWU7CiAgdmFyIHByb3ZpZGVzID0gKF9jaGFydCRhbm5vdGF0aW9uczEyID0gY2hhcnQuYW5ub3RhdGlvbnMpID09PSBudWxsIHx8IF9jaGFydCRhbm5vdGF0aW9uczEyID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfY2hhcnQkYW5ub3RhdGlvbnMxMltDQVRBTE9HX0FOTk9UQVRJT05TLlBST1ZJREVTXTsKICBpZiAocHJvdmlkZXMpIHsKICAgIGFkZE9iamVjdChvYmoucHJvdmlkZXMsIHByb3ZpZGVzKTsKICB9CiAgb2JqLnZlcnNpb25zLnB1c2goY2hhcnQpOwp9CmZ1bmN0aW9uIHByZWZlclNhbWVSZXBvKG1hdGNoaW5nLCByZXBvVHlwZSwgcmVwb05hbWUpIHsKICBtYXRjaGluZy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7CiAgICB2YXIgYVNhbWVSZXBvID0gYS5yZXBvVHlwZSA9PT0gcmVwb1R5cGUgJiYgYS5yZXBvTmFtZSA9PT0gcmVwb05hbWUgPyAxIDogMDsKICAgIHZhciBiU2FtZVJlcG8gPSBiLnJlcG9UeXBlID09PSByZXBvVHlwZSAmJiBiLnJlcG9OYW1lID09PSByZXBvTmFtZSA/IDEgOiAwOwogICAgaWYgKGFTYW1lUmVwbyAmJiAhYlNhbWVSZXBvKSB7CiAgICAgIHJldHVybiAtMTsKICAgIH0gZWxzZSBpZiAoIWFTYW1lUmVwbyAmJiBiU2FtZVJlcG8pIHsKICAgICAgcmV0dXJuIDE7CiAgICB9CiAgICByZXR1cm4gMDsKICB9KTsKfQpmdW5jdGlvbiBub3JtYWxpemVWZXJzaW9uKHYpIHsKICByZXR1cm4gdi5yZXBsYWNlKC9edi9pLCAnJykudG9Mb3dlckNhc2UoKS50cmltKCk7Cn0KZnVuY3Rpb24gZmlsdGVyQ2F0ZWdvcmllcyhjYXRlZ29yaWVzKSB7CiAgY2F0ZWdvcmllcyA9IChjYXRlZ29yaWVzIHx8IFtdKS5tYXAoZnVuY3Rpb24gKHgpIHsKICAgIHJldHVybiBub3JtYWxpemVDYXRlZ29yeSh4KTsKICB9KTsKICB2YXIgb3V0ID0gW107CiAgZm9yICh2YXIgX2kyID0gMCwgX0FMTE9XRURfQ0FURUdPUklFUyA9IEFMTE9XRURfQ0FURUdPUklFUzsgX2kyIDwgX0FMTE9XRURfQ0FURUdPUklFUy5sZW5ndGg7IF9pMisrKSB7CiAgICB2YXIgYyA9IF9BTExPV0VEX0NBVEVHT1JJRVNbX2kyXTsKICAgIGlmIChjYXRlZ29yaWVzLmluY2x1ZGVzKG5vcm1hbGl6ZUNhdGVnb3J5KGMpKSkgewogICAgICBhZGRPYmplY3Qob3V0LCBjKTsKICAgIH0KICB9CiAgcmV0dXJuIG91dDsKfQpmdW5jdGlvbiBub3JtYWxpemVDYXRlZ29yeShjKSB7CiAgcmV0dXJuIGMucmVwbGFjZSgvXHMrL2csICcnKS50b0xvd2VyQ2FzZSgpOwp9CgovKgpjYXRhbG9nLmNhdHRsZS5pby9kZXBseXMtb24tb3M6IE9TIC0+IHJlcXVpcmVzIGdsb2JhbC5jYXR0bGUuT1MuZW5hYmxlZDogdHJ1ZQogIGRlZmF1bHQ6IG5vdGhpbmcKY2F0YWxvZy5jYXR0bGUuaW8vcGVybWl0cy1vczogT1MgLT4gd2lsbCBicmVhayBvbiBjbHVzdGVycyBjb250YWluaW5nIG5vZGVzIHRoYXQgYXJlIG5vdCBPUwogIGRlZmF1bHQgaWYgbm90IGZvdW5kOiBjYXRhbG9nLmNhdHRsZS5pby9wZXJtaXRzLW9zOiBsaW51eAoqLwpleHBvcnQgZnVuY3Rpb24gY29tcGF0aWJsZVZlcnNpb25zRm9yKGNoYXJ0LCBvcykgewogIHZhciBpbmNsdWRlUHJlcmVsZWFzZSA9IGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzJdIDogdHJ1ZTsKICB2YXIgdmVyc2lvbnMgPSBjaGFydC52ZXJzaW9uczsKICBpZiAob3MgJiYgIWlzQXJyYXkob3MpKSB7CiAgICBvcyA9IFtvc107CiAgfQogIHJldHVybiB2ZXJzaW9ucy5maWx0ZXIoZnVuY3Rpb24gKHZlcikgewogICAgdmFyIF92ZXIkYW5ub3RhdGlvbnM7CiAgICB2YXIgb3NQZXJtaXR0ZWQgPSAoKHZlciA9PT0gbnVsbCB8fCB2ZXIgPT09IHZvaWQgMCB8fCAoX3ZlciRhbm5vdGF0aW9ucyA9IHZlci5hbm5vdGF0aW9ucykgPT09IG51bGwgfHwgX3ZlciRhbm5vdGF0aW9ucyA9PT0gdm9pZCAwID8gdm9pZCAwIDogX3ZlciRhbm5vdGF0aW9uc1tDQVRBTE9HX0FOTk9UQVRJT05TLlBFUk1JVFRFRF9PU10pIHx8IExJTlVYKS5zcGxpdCgnLCcpOwogICAgaWYgKCFpbmNsdWRlUHJlcmVsZWFzZSAmJiBpc1ByZXJlbGVhc2UodmVyLnZlcnNpb24pKSB7CiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmICghb3MgfHwgZGlmZmVyZW5jZShvcywgb3NQZXJtaXR0ZWQpLmxlbmd0aCA9PT0gMCkgewogICAgICByZXR1cm4gdHJ1ZTsKICAgIH0KICAgIHJldHVybiBmYWxzZTsKICB9KTsKfQpleHBvcnQgZnVuY3Rpb24gZmlsdGVyQW5kQXJyYW5nZUNoYXJ0cyhjaGFydHMpIHsKICB2YXIgX3JlZjE2ID0gYXJndW1lbnRzLmxlbmd0aCA+IDEgJiYgYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMV0gOiB7fSwKICAgIF9yZWYxNiRjbHVzdGVyUHJvdmlkZSA9IF9yZWYxNi5jbHVzdGVyUHJvdmlkZXIsCiAgICBjbHVzdGVyUHJvdmlkZXIgPSBfcmVmMTYkY2x1c3RlclByb3ZpZGUgPT09IHZvaWQgMCA/ICcnIDogX3JlZjE2JGNsdXN0ZXJQcm92aWRlLAogICAgb3BlcmF0aW5nU3lzdGVtcyA9IF9yZWYxNi5vcGVyYXRpbmdTeXN0ZW1zLAogICAgY2F0ZWdvcnkgPSBfcmVmMTYuY2F0ZWdvcnksCiAgICBzZWFyY2hRdWVyeSA9IF9yZWYxNi5zZWFyY2hRdWVyeSwKICAgIF9yZWYxNiRzaG93RGVwcmVjYXRlZCA9IF9yZWYxNi5zaG93RGVwcmVjYXRlZCwKICAgIHNob3dEZXByZWNhdGVkID0gX3JlZjE2JHNob3dEZXByZWNhdGVkID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYxNiRzaG93RGVwcmVjYXRlZCwKICAgIF9yZWYxNiRzaG93SGlkZGVuID0gX3JlZjE2LnNob3dIaWRkZW4sCiAgICBzaG93SGlkZGVuID0gX3JlZjE2JHNob3dIaWRkZW4gPT09IHZvaWQgMCA/IGZhbHNlIDogX3JlZjE2JHNob3dIaWRkZW4sCiAgICBfcmVmMTYkc2hvd1ByZXJlbGVhc2UgPSBfcmVmMTYuc2hvd1ByZXJlbGVhc2UsCiAgICBzaG93UHJlcmVsZWFzZSA9IF9yZWYxNiRzaG93UHJlcmVsZWFzZSA9PT0gdm9pZCAwID8gdHJ1ZSA6IF9yZWYxNiRzaG93UHJlcmVsZWFzZSwKICAgIF9yZWYxNiRoaWRlUmVwb3MgPSBfcmVmMTYuaGlkZVJlcG9zLAogICAgaGlkZVJlcG9zID0gX3JlZjE2JGhpZGVSZXBvcyA9PT0gdm9pZCAwID8gW10gOiBfcmVmMTYkaGlkZVJlcG9zLAogICAgX3JlZjE2JHNob3dSZXBvcyA9IF9yZWYxNi5zaG93UmVwb3MsCiAgICBzaG93UmVwb3MgPSBfcmVmMTYkc2hvd1JlcG9zID09PSB2b2lkIDAgPyBbXSA6IF9yZWYxNiRzaG93UmVwb3MsCiAgICBfcmVmMTYkc2hvd1R5cGVzID0gX3JlZjE2LnNob3dUeXBlcywKICAgIHNob3dUeXBlcyA9IF9yZWYxNiRzaG93VHlwZXMgPT09IHZvaWQgMCA/IFtdIDogX3JlZjE2JHNob3dUeXBlcywKICAgIF9yZWYxNiRoaWRlVHlwZXMgPSBfcmVmMTYuaGlkZVR5cGVzLAogICAgaGlkZVR5cGVzID0gX3JlZjE2JGhpZGVUeXBlcyA9PT0gdm9pZCAwID8gW10gOiBfcmVmMTYkaGlkZVR5cGVzOwogIHZhciBvdXQgPSBjaGFydHMuZmlsdGVyKGZ1bmN0aW9uIChjKSB7CiAgICBpZiAoYy5kZXByZWNhdGVkICYmICFzaG93RGVwcmVjYXRlZCB8fCBjLmhpZGRlbiAmJiAhc2hvd0hpZGRlbiB8fCBoaWRlUmVwb3MgIT09IG51bGwgJiYgaGlkZVJlcG9zICE9PSB2b2lkIDAgJiYgaGlkZVJlcG9zLmxlbmd0aCAmJiBoaWRlUmVwb3MuaW5jbHVkZXMoYy5yZXBvS2V5KSB8fCBzaG93UmVwb3MgIT09IG51bGwgJiYgc2hvd1JlcG9zICE9PSB2b2lkIDAgJiYgc2hvd1JlcG9zLmxlbmd0aCAmJiAhc2hvd1JlcG9zLmluY2x1ZGVzKGMucmVwb0tleSkgfHwgaGlkZVR5cGVzICE9PSBudWxsICYmIGhpZGVUeXBlcyAhPT0gdm9pZCAwICYmIGhpZGVUeXBlcy5sZW5ndGggJiYgaGlkZVR5cGVzLmluY2x1ZGVzKGMuY2hhcnRUeXBlKSB8fCBzaG93VHlwZXMgIT09IG51bGwgJiYgc2hvd1R5cGVzICE9PSB2b2lkIDAgJiYgc2hvd1R5cGVzLmxlbmd0aCAmJiAhc2hvd1R5cGVzLmluY2x1ZGVzKGMuY2hhcnRUeXBlKSB8fCBjLmNoYXJ0TmFtZSA9PT0gJ3JhbmNoZXItd2lucy11cGdyYWRlcicgJiYgY2x1c3RlclByb3ZpZGVyID09PSAncmtlMicpIHsKICAgICAgcmV0dXJuIGZhbHNlOwogICAgfQogICAgaWYgKGNvbXBhdGlibGVWZXJzaW9uc0ZvcihjLCBvcGVyYXRpbmdTeXN0ZW1zLCBzaG93UHJlcmVsZWFzZSkubGVuZ3RoIDw9IDApIHsKICAgICAgLy8gVGhlcmUncyBubyB2ZXJzaW9ucyBjb21wYXRpYmxlIHdpdGggdGhlIHNwZWNpZmllZCBvcwogICAgICByZXR1cm4gZmFsc2U7CiAgICB9CiAgICBpZiAoY2F0ZWdvcnkgJiYgIWMuY2F0ZWdvcmllcy5pbmNsdWRlcyhjYXRlZ29yeSkpIHsKICAgICAgLy8gVGhlIGNhdGVnb3J5IGZpbHRlciBkb2Vzbid0IG1hdGNoCiAgICAgIHJldHVybiBmYWxzZTsKICAgIH0KICAgIGlmIChzZWFyY2hRdWVyeSkgewogICAgICAvLyBUaGUgc2VhcmNoIGZpbHRlciBkb2Vzbid0IG1hdGNoCiAgICAgIHZhciBzZWFyY2hUb2tlbnMgPSBzZWFyY2hRdWVyeS5zcGxpdCgvXHMqWywgXVxzKi8pLm1hcChmdW5jdGlvbiAoeCkgewogICAgICAgIHJldHVybiBlbnN1cmVSZWdleCh4LCBmYWxzZSk7CiAgICAgIH0pOwogICAgICB2YXIgX2l0ZXJhdG9yNCA9IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyKHNlYXJjaFRva2VucyksCiAgICAgICAgX3N0ZXA0OwogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yNC5zKCk7ICEoX3N0ZXA0ID0gX2l0ZXJhdG9yNC5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIgdG9rZW4gPSBfc3RlcDQudmFsdWU7CiAgICAgICAgICB2YXIgY2hhcnREZXNjcmlwdGlvbiA9IGMuY2hhcnREZXNjcmlwdGlvbiB8fCAnJzsKICAgICAgICAgIGlmICghYy5jaGFydE5hbWVEaXNwbGF5Lm1hdGNoKHRva2VuKSAmJiAhY2hhcnREZXNjcmlwdGlvbi5tYXRjaCh0b2tlbikpIHsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0KICAgICAgfSBjYXRjaCAoZXJyKSB7CiAgICAgICAgX2l0ZXJhdG9yNC5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yNC5mKCk7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiB0cnVlOwogIH0pOwogIHJldHVybiBzb3J0Qnkob3V0LCBbJ2NlcnRpZmllZFNvcnQnLCAncmVwb05hbWUnLCAnY2hhcnROYW1lRGlzcGxheSddKTsKfQ=="},{"version":3,"names":["CATALOG","CATALOG_ANNOTATIONS","addParams","allHash","allHashSettled","clone","findBy","addObject","filterBy","isArray","stringify","classify","sortBy","importChart","ensureRegex","isPrerelease","difference","lookup","ALLOWED_CATEGORIES","CERTIFIED_SORTS","_defineProperty","_RANCHER","_EXPERIMENTAL","_PARTNER","WINDOWS","LINUX","state","loaded","clusterRepos","namespacedRepos","charts","versionInfos","config","namespace","inStore","undefined","getters","isLoaded","repo","_key","repos","clustered","namespaced","concat","_toConsumableArray","rawCharts","_ref","repoType","repoName","ary","rootState","rootGetters","_rootGetters$currentP","repoKeys","map","x","cluster","out","Object","values","filter","chart","includes","repoKey","scope","_ref2","key","chartName","preferRepoType","preferRepoName","includeHidden","parsed","parseKey","matching","deprecated","hidden","length","preferSameRepo","isInstalled","_ref3","gvr","name","version","idx","indexOf","substr","schema","attributes","versionSatisfying","_ref4","constraint","chartVersion","wantVersion","normalizeVersion","toLowerCase","trim","versions","find","v","versionProviding","_ref5","provides","_version$annotations","annotations","PROVIDES","_ref6","versionName","errors","haveComponent","importComponent","chartSteps","steps","stepsPath","allPaths","require","context","keys","path","startsWith","forEach","push","replace","component","e","console","warn","obj","_obj$metadata","type","metadata","mutations","reset","currentState","newState","assign","setInStore","setRepos","_ref7","setCharts","_ref8","_ref8$errors","_ref8$loaded","_iterator","_createForOfIteratorHelper","_step","s","n","done","value","err","f","cacheVersion","_ref9","info","actions","load","ctx","_arguments","arguments","_asyncToGenerator","regeneratorRuntime","mark","_callee","_ref10","force","commit","dispatch","promises","hash","_iterator2","_step2","_repo","res","_i","_Object$keys","k","_iterator3","_step3","entry","wrap","_callee$","_context","prev","next","CLUSTER_REPO","root","REPO","sent","_repo$metadata","HIDDEN_REPO","canLoad","followLink","status","reason","abrupt","entries","addChart","stop","refresh","_ref11","_callee2","_callee2$","_context2","Promise","allSettled","getVersionInfo","_ref12","_ref13","_callee3","_callee3$","_context3","Error","url","links","rehydrate","_ref14","_ref15","_slicedToArray","__rehydrate","generateKey","parts","split","_chart$annotations","_chart$annotations2","_chart$annotations12","certifiedAnnotation","CERTIFIED","certified","sideLabel","isRancher","isPartner","_OTHER","EXPERIMENTAL","isRancherSource","_chart$annotations3","_chart$annotations4","_chart$annotations5","_chart$annotations6","_chart$annotations7","_chart$annotations8","_chart$annotations9","_chart$annotations10","_chart$annotations11","id","repoNameDisplay","certifiedSort","icon","color","chartType","TYPE","_APP","chartNameDisplay","DISPLAY_NAME","chartDescription","description","featured","FEATURED","categories","filterCategories","keywords","HIDDEN","targetNamespace","NAMESPACE","targetName","RELEASE_NAME","SCOPE","windowsIncompatible","PERMITTED_OS","deploysOnWindows","DEPLOYED_OS","sort","a","b","aSameRepo","bSameRepo","normalizeCategory","_i2","_ALLOWED_CATEGORIES","c","compatibleVersionsFor","os","includePrerelease","ver","_ver$annotations","osPermitted","filterAndArrangeCharts","_ref16","_ref16$clusterProvide","clusterProvider","operatingSystems","category","searchQuery","_ref16$showDeprecated","showDeprecated","_ref16$showHidden","showHidden","_ref16$showPrerelease","showPrerelease","_ref16$hideRepos","hideRepos","_ref16$showRepos","showRepos","_ref16$showTypes","showTypes","_ref16$hideTypes","hideTypes","searchTokens","_iterator4","_step4","token","match"],"sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/store/catalog.js"],"sourcesContent":["import { CATALOG } from '@shell/config/types';\nimport { CATALOG as CATALOG_ANNOTATIONS } from '@shell/config/labels-annotations';\nimport { addParams } from '@shell/utils/url';\nimport { allHash, allHashSettled } from '@shell/utils/promise';\nimport { clone } from '@shell/utils/object';\nimport { findBy, addObject, filterBy, isArray } from '@shell/utils/array';\nimport { stringify } from '@shell/utils/error';\nimport { classify } from '@shell/plugins/dashboard-store/classify';\nimport { sortBy } from '@shell/utils/sort';\nimport { importChart } from '@shell/utils/dynamic-importer';\nimport { ensureRegex } from '@shell/utils/string';\nimport { isPrerelease } from '@shell/utils/version';\nimport difference from 'lodash/difference';\nimport { lookup } from '@shell/plugins/dashboard-store/model-loader';\n\nconst ALLOWED_CATEGORIES = [\n  'Storage',\n  'Monitoring',\n  'Database',\n  'Repository',\n  'Security',\n  'Networking',\n  'PaaS',\n  'Infrastructure',\n  'Applications',\n];\n\nconst CERTIFIED_SORTS = {\n  [CATALOG_ANNOTATIONS._RANCHER]:      1,\n  [CATALOG_ANNOTATIONS._EXPERIMENTAL]: 1,\n  [CATALOG_ANNOTATIONS._PARTNER]:      2,\n  other:                               3,\n};\n\nexport const WINDOWS = 'windows';\nexport const LINUX = 'linux';\n\nexport const state = function() {\n  return {\n    loaded:          {},\n    clusterRepos:    [],\n    namespacedRepos: [],\n    charts:          {},\n    versionInfos:    {},\n    config:          { namespace: 'catalog' },\n    inStore:         undefined,\n  };\n};\n\nexport const getters = {\n  isLoaded(state) {\n    return (repo) => {\n      return !!state.loaded[repo._key];\n    };\n  },\n\n  repos(state) {\n    const clustered = state.clusterRepos || [];\n    const namespaced = state.namespacedRepos || [];\n\n    return [...clustered, ...namespaced];\n  },\n\n  // Raw charts\n  rawCharts(state) {\n    return state.charts;\n  },\n\n  repo(state, getters) {\n    return ({ repoType, repoName }) => {\n      const ary = (repoType === 'cluster' ? state.clusterRepos : state.namespacedRepos);\n\n      return findBy(ary, 'metadata.name', repoName);\n    };\n  },\n\n  charts(state, getters, rootState, rootGetters) {\n    const repoKeys = getters.repos.map((x) => x._key);\n    let cluster = rootGetters['currentCluster'];\n\n    if ( rootGetters['currentProduct']?.inStore === 'management' ) {\n      cluster = null;\n    }\n\n    // Filter out charts for repos that are no longer in the store, rather\n    // than trying to clear them when a repo is removed.\n    // And ones that are for the wrong kind of cluster\n    const out = Object.values(state.charts).filter((chart) => {\n      if ( !repoKeys.includes(chart.repoKey) ) {\n        return false;\n      }\n\n      if ( cluster && chart.scope && chart.scope !== cluster.scope ) {\n        return false;\n      }\n\n      return true;\n    });\n\n    return sortBy(out, ['certifiedSort', 'repoName', 'chartName']);\n  },\n\n  chart(state, getters) {\n    return ({\n      key, repoType, repoName, chartName, preferRepoType, preferRepoName, includeHidden\n    }) => {\n      if ( key && !repoType && !repoName && !chartName) {\n        const parsed = parseKey(key);\n\n        repoType = parsed.repoType;\n        repoName = parsed.repoName;\n        chartName = parsed.chartName;\n      }\n\n      let matching = filterBy(getters.charts, {\n        repoType,\n        repoName,\n        chartName,\n        deprecated: false,\n      });\n\n      if ( includeHidden === false ) {\n        matching = matching.filter((x) => !x.hidden);\n      }\n\n      if ( !matching.length ) {\n        return;\n      }\n\n      if ( preferRepoType && preferRepoName ) {\n        preferSameRepo(matching, preferRepoType, preferRepoName);\n      }\n\n      return matching[0];\n    };\n  },\n\n  isInstalled(state, getters, rootState, rootGetters) {\n    return ({ gvr }) => {\n      let name, version;\n      const idx = gvr.indexOf('/');\n\n      if ( idx > 0 ) {\n        name = gvr.substr(0, idx);\n        version = gvr.substr(idx + 1);\n      } else {\n        name = gvr;\n      }\n\n      const inStore = rootGetters['currentProduct'].inStore;\n      const schema = rootGetters[`${ inStore }/schemaFor`](name);\n\n      if ( schema && (!version || schema.attributes.version === version) ) {\n        return true;\n      }\n\n      return false;\n    };\n  },\n\n  versionSatisfying(state, getters) {\n    return ({\n      repoType, repoName, constraint, chartVersion\n    }) => {\n      let name, wantVersion;\n      const idx = constraint.indexOf('=');\n\n      if ( idx > 0 ) {\n        name = constraint.substr(0, idx);\n        wantVersion = normalizeVersion(constraint.substr(idx + 1));\n      } else {\n        name = constraint;\n        wantVersion = 'latest';\n      }\n\n      name = name.toLowerCase().trim();\n      chartVersion = normalizeVersion(chartVersion);\n\n      const matching = getters.charts.filter((chart) => chart.chartName.toLowerCase().trim() === name);\n\n      if ( !matching.length ) {\n        return;\n      }\n\n      if ( repoType && repoName ) {\n        preferSameRepo(matching, repoType, repoName);\n      }\n\n      const chart = matching[0];\n      let version;\n\n      if ( wantVersion === 'latest' ) {\n        version = chart.versions[0];\n      } else if ( wantVersion === 'match' || wantVersion === 'matching' ) {\n        version = chart.versions.find((v) => normalizeVersion(v.version) === chartVersion);\n      } else {\n        version = chart.versions.find((v) => normalizeVersion(v.version) === wantVersion);\n      }\n\n      if ( version ) {\n        return clone(version);\n      }\n    };\n  },\n\n  versionProviding(state, getters) {\n    return ({ repoType, repoName, gvr }) => {\n      const matching = getters.charts.filter((chart) => chart.provides.includes(gvr) );\n\n      if ( !matching.length ) {\n        return;\n      }\n\n      if ( repoType && repoName ) {\n        preferSameRepo(matching, repoType, repoName);\n      }\n\n      const version = matching[0].versions.find((version) => version.annotations?.[CATALOG_ANNOTATIONS.PROVIDES] === gvr);\n\n      if ( version ) {\n        return clone(version);\n      }\n    };\n  },\n\n  version(state, getters) {\n    return ({\n      repoType, repoName, chartName, versionName\n    }) => {\n      const chart = getters['chart']({\n        repoType, repoName, chartName\n      });\n\n      if ( !chart ) {\n        return null;\n      }\n\n      let version;\n\n      if ( versionName ) {\n        version = findBy(chart.versions, 'version', versionName);\n      } else {\n        version = chart.versions[0];\n      }\n\n      if ( version ) {\n        return clone(version);\n      }\n    };\n  },\n\n  errors(state) {\n    return state.errors || [];\n  },\n\n  haveComponent() {\n    return (name) => {\n      return getters['type-map/hasCustomChart'](name);\n    };\n  },\n\n  importComponent(state, getters) {\n    return (name) => {\n      return getters['type-map/importChart'](name);\n    };\n  },\n\n  chartSteps(state, getters) {\n    return (name) => {\n      const steps = [];\n\n      const stepsPath = `./${ name }/steps/`;\n      // require.context only takes literals, so find all candidate step files and filter out\n      const allPaths = require.context('@shell/chart', true, /\\.vue$/).keys();\n\n      allPaths\n        .filter((path) => path.startsWith(stepsPath))\n        .forEach((path) => {\n          try {\n            steps.push({\n              name:      path.replace(stepsPath, ''),\n              component: importChart(path.substr(2, path.length)),\n            });\n          } catch (e) {\n            console.warn(`Failed to load step component ${ path } for chart ${ name }`, e); // eslint-disable-line no-console\n          }\n        });\n\n      return steps;\n    };\n  },\n\n  inStore(state) {\n    return state.inStore;\n  },\n\n  classify: (state, getters, rootState) => (obj) => {\n    return lookup(state.config.namespace, obj?.type, obj?.metadata?.name, rootState);\n  },\n};\n\nexport const mutations = {\n  reset(currentState) {\n    const newState = state();\n\n    Object.assign(currentState, newState);\n  },\n\n  setInStore(state, inStore) {\n    state.inStore = inStore;\n  },\n\n  setRepos(state, { cluster, namespaced }) {\n    state.clusterRepos = cluster;\n    state.namespacedRepos = namespaced;\n  },\n\n  setCharts(state, { charts, errors = [], loaded = [] }) {\n    state.charts = charts;\n    state.errors = errors;\n\n    for ( const repo of loaded ) {\n      state.loaded[repo._key] = true;\n    }\n  },\n\n  cacheVersion(state, { key, info }) {\n    state.versionInfos[key] = info;\n  }\n};\n\nexport const actions = {\n  async load(ctx, { force, reset } = {}) {\n    const {\n      state, getters, rootGetters, commit, dispatch\n    } = ctx;\n\n    let promises = {};\n    // Installing an app? This is fine (in cluster store)\n    // Fetching list of cluster templates? This is fine (in management store)\n    // Installing a cluster template? This isn't fine (in cluster store as per installing app, but if there is no cluster we need to default to management)\n\n    const inStore = rootGetters['currentCluster'] ? rootGetters['currentProduct'].inStore : 'management';\n\n    if ( rootGetters[`${ inStore }/schemaFor`](CATALOG.CLUSTER_REPO) ) {\n      promises.cluster = dispatch(`${ inStore }/findAll`, { type: CATALOG.CLUSTER_REPO }, { root: true });\n    }\n\n    if ( rootGetters[`${ inStore }/schemaFor`](CATALOG.REPO) ) {\n      promises.namespaced = dispatch(`${ inStore }/findAll`, { type: CATALOG.REPO }, { root: true });\n    }\n\n    const hash = await allHash(promises);\n\n    // As per comment above, when there are no clusters this will be management. Store it such that it can be used for those cases\n    commit('setInStore', inStore);\n    hash.cluster = hash.cluster.filter((repo) => !(repo?.metadata?.annotations?.[CATALOG_ANNOTATIONS.HIDDEN_REPO] === 'true'));\n\n    commit('setRepos', hash);\n\n    const repos = getters['repos'];\n    const loaded = [];\n\n    promises = {};\n\n    for ( const repo of repos ) {\n      if ( (force === true || !getters.isLoaded(repo)) && repo.canLoad ) {\n        console.info('Loading index for repo', repo.name, `(${ repo._key })`); // eslint-disable-line no-console\n        promises[repo._key] = repo.followLink('index');\n      }\n    }\n\n    const res = await allHashSettled(promises);\n    const charts = reset ? {} : state.charts;\n    const errors = [];\n\n    for ( const key of Object.keys(res) ) {\n      const obj = res[key];\n      const repo = findBy(repos, '_key', key);\n\n      if ( obj.status === 'rejected' ) {\n        errors.push(stringify(obj.reason));\n        continue;\n      }\n\n      for ( const k in obj.value.entries ) {\n        for ( const entry of obj.value.entries[k] ) {\n          addChart(ctx, charts, entry, repo);\n        }\n      }\n\n      loaded.push(repo);\n    }\n\n    commit('setCharts', {\n      charts,\n      errors,\n      loaded,\n    });\n  },\n\n  async refresh({ getters, commit, dispatch }) {\n    const promises = getters.repos.map((x) => x.refresh());\n\n    // @TODO wait for repo state to indicate they're done once the API has that\n\n    await Promise.allSettled(promises);\n\n    await dispatch('load', { force: true, reset: true });\n  },\n\n  /*\n    Fetch full information about a specific version of a Helm chart,\n    including the standard values and README.\n  */\n  async getVersionInfo({ state, getters, commit }, {\n    repoType, repoName, chartName, versionName\n  }) {\n    const key = `${ repoType }/${ repoName }/${ chartName }/${ versionName }`;\n    let info = state.versionInfos[key];\n\n    if ( !info ) {\n      const repo = getters['repo']({ repoType, repoName });\n\n      if ( !repo ) {\n        throw new Error('Repo not found');\n      }\n\n      info = await repo.followLink('info', {\n        url: addParams(repo.links.info, {\n          chartName,\n          version: versionName\n        })\n      });\n\n      commit('cacheVersion', { key, info });\n    }\n\n    return info;\n  },\n\n  rehydrate(ctx) {\n    const { state, commit } = ctx;\n    const charts = state.charts || {};\n\n    Object.entries(state.charts).forEach(([key, chart]) => {\n      if (chart.__rehydrate) {\n        charts[key] = classify(ctx, chart);\n      }\n    });\n    commit('setCharts', {\n      charts,\n      errors: state.errors,\n    });\n  }\n};\n\nexport function generateKey(repoType, repoName, chartName) {\n  return `${ repoType }/${ repoName }/${ chartName }`;\n}\n\nexport function parseKey(key) {\n  const parts = key.split('/');\n\n  return {\n    repoType:  parts[0],\n    repoName:  parts[1],\n    chartName: parts[2],\n  };\n}\n\nfunction addChart(ctx, map, chart, repo) {\n  const repoType = (repo.type === CATALOG.CLUSTER_REPO ? 'cluster' : 'namespace');\n  const repoName = repo.metadata.name;\n  const key = generateKey(repoType, repoName, chart.name);\n  let obj = map[key];\n\n  const certifiedAnnotation = chart.annotations?.[CATALOG_ANNOTATIONS.CERTIFIED];\n\n  let certified = null;\n  let sideLabel = null;\n\n  if ( repo.isRancher ) {\n    certified = CATALOG_ANNOTATIONS._RANCHER;\n  } else if ( repo.isPartner ) {\n    certified = CATALOG_ANNOTATIONS._PARTNER;\n  } else {\n    certified = CATALOG_ANNOTATIONS._OTHER;\n  }\n\n  if ( chart.annotations?.[CATALOG_ANNOTATIONS.EXPERIMENTAL] ) {\n    sideLabel = 'Experimental';\n  } else if (\n    !repo.isRancherSource &&\n    certifiedAnnotation &&\n    certifiedAnnotation !== CATALOG_ANNOTATIONS._RANCHER &&\n    certified === CATALOG_ANNOTATIONS._OTHER\n  ) {\n    // But anybody can set the side label\n    sideLabel = certifiedAnnotation;\n  }\n\n  if ( !obj ) {\n    if ( ctx ) { }\n    obj = classify(ctx, {\n      key,\n      type:                'chart',\n      id:                  key,\n      certified,\n      sideLabel,\n      repoType,\n      repoName,\n      repoNameDisplay:     ctx.rootGetters['i18n/withFallback'](`catalog.repo.name.\"${ repoName }\"`, null, repoName),\n      certifiedSort:       CERTIFIED_SORTS[certified] || 99,\n      icon:                chart.icon,\n      color:               repo.color,\n      chartType:           chart.annotations?.[CATALOG_ANNOTATIONS.TYPE] || CATALOG_ANNOTATIONS._APP,\n      chartName:           chart.name,\n      chartNameDisplay:    chart.annotations?.[CATALOG_ANNOTATIONS.DISPLAY_NAME] || chart.name,\n      chartDescription:    chart.description,\n      featured:            chart.annotations?.[CATALOG_ANNOTATIONS.FEATURED],\n      repoKey:             repo._key,\n      versions:            [],\n      categories:          filterCategories(chart.keywords),\n      deprecated:          !!chart.deprecated,\n      hidden:              !!chart.annotations?.[CATALOG_ANNOTATIONS.HIDDEN],\n      targetNamespace:     chart.annotations?.[CATALOG_ANNOTATIONS.NAMESPACE],\n      targetName:          chart.annotations?.[CATALOG_ANNOTATIONS.RELEASE_NAME],\n      scope:               chart.annotations?.[CATALOG_ANNOTATIONS.SCOPE],\n      provides:            [],\n      windowsIncompatible: !(chart.annotations?.[CATALOG_ANNOTATIONS.PERMITTED_OS] || '').includes('windows'),\n      deploysOnWindows:    (chart.annotations?.[CATALOG_ANNOTATIONS.DEPLOYED_OS] || '').includes('windows')\n    });\n\n    map[key] = obj;\n  }\n\n  chart.key = `${ key }/${ chart.version }`;\n  chart.repoType = repoType;\n  chart.repoName = repoName;\n\n  const provides = chart.annotations?.[CATALOG_ANNOTATIONS.PROVIDES];\n\n  if ( provides ) {\n    addObject(obj.provides, provides);\n  }\n\n  obj.versions.push(chart);\n}\n\nfunction preferSameRepo(matching, repoType, repoName) {\n  matching.sort((a, b) => {\n    const aSameRepo = a.repoType === repoType && a.repoName === repoName ? 1 : 0;\n    const bSameRepo = b.repoType === repoType && b.repoName === repoName ? 1 : 0;\n\n    if ( aSameRepo && !bSameRepo ) {\n      return -1;\n    } else if ( !aSameRepo && bSameRepo ) {\n      return 1;\n    }\n\n    return 0;\n  });\n}\n\nfunction normalizeVersion(v) {\n  return v.replace(/^v/i, '').toLowerCase().trim();\n}\n\nfunction filterCategories(categories) {\n  categories = (categories || []).map((x) => normalizeCategory(x));\n\n  const out = [];\n\n  for ( const c of ALLOWED_CATEGORIES ) {\n    if ( categories.includes(normalizeCategory(c)) ) {\n      addObject(out, c);\n    }\n  }\n\n  return out;\n}\n\nfunction normalizeCategory(c) {\n  return c.replace(/\\s+/g, '').toLowerCase();\n}\n\n/*\ncatalog.cattle.io/deplys-on-os: OS -> requires global.cattle.OS.enabled: true\n  default: nothing\ncatalog.cattle.io/permits-os: OS -> will break on clusters containing nodes that are not OS\n  default if not found: catalog.cattle.io/permits-os: linux\n*/\nexport function compatibleVersionsFor(chart, os, includePrerelease = true) {\n  const versions = chart.versions;\n\n  if (os && !isArray(os)) {\n    os = [os];\n  }\n\n  return versions.filter((ver) => {\n    const osPermitted = (ver?.annotations?.[CATALOG_ANNOTATIONS.PERMITTED_OS] || LINUX).split(',');\n\n    if ( !includePrerelease && isPrerelease(ver.version) ) {\n      return false;\n    }\n\n    if ( !os || difference(os, osPermitted).length === 0) {\n      return true;\n    }\n\n    return false;\n  });\n}\n\nexport function filterAndArrangeCharts(charts, {\n  clusterProvider = '',\n  operatingSystems,\n  category,\n  searchQuery,\n  showDeprecated = false,\n  showHidden = false,\n  showPrerelease = true,\n  hideRepos = [],\n  showRepos = [],\n  showTypes = [],\n  hideTypes = [],\n} = {}) {\n  const out = charts.filter((c) => {\n    if (\n      ( c.deprecated && !showDeprecated ) ||\n      ( c.hidden && !showHidden ) ||\n      ( hideRepos?.length && hideRepos.includes(c.repoKey) ) ||\n      ( showRepos?.length && !showRepos.includes(c.repoKey) ) ||\n      ( hideTypes?.length && hideTypes.includes(c.chartType) ) ||\n      ( showTypes?.length && !showTypes.includes(c.chartType) ) ||\n      (c.chartName === 'rancher-wins-upgrader' && clusterProvider === 'rke2')\n    ) {\n      return false;\n    }\n\n    if (compatibleVersionsFor(c, operatingSystems, showPrerelease).length <= 0) {\n      // There's no versions compatible with the specified os\n      return false;\n    }\n\n    if ( category && !c.categories.includes(category) ) {\n      // The category filter doesn't match\n      return false;\n    }\n\n    if ( searchQuery ) {\n      // The search filter doesn't match\n      const searchTokens = searchQuery.split(/\\s*[, ]\\s*/).map((x) => ensureRegex(x, false));\n\n      for ( const token of searchTokens ) {\n        const chartDescription = c.chartDescription || '';\n\n        if ( !c.chartNameDisplay.match(token) && !chartDescription.match(token) ) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  });\n\n  return sortBy(out, ['certifiedSort', 'repoName', 'chartNameDisplay']);\n}\n"],"mappings":"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"}]}