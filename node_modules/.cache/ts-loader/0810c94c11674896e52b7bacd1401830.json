{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/__tests__/management.cattle.io.setting.test.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/__tests__/management.cattle.io.setting.test.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbW91bnQgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgU2V0dGluZ3MgZnJvbSAnQHNoZWxsL2VkaXQvbWFuYWdlbWVudC5jYXR0bGUuaW8uc2V0dGluZy52dWUnOwppbXBvcnQgeyBTRVRUSU5HIH0gZnJvbSAnQHNoZWxsL2NvbmZpZy9zZXR0aW5ncyc7CmRlc2NyaWJlKCd2aWV3OiBtYW5hZ2VtZW50LmNhdHRsZS5pby5zZXR0aW5nIHNob3VsZCcsICgpID0+IHsKICAgIGNvbnN0IHJlcXVpcmVkU2V0dXAgPSAoKSA9PiAoewogICAgICAgIC8vIFJlbW92ZSBhbGwgdGhlc2UgbW9ja3MgYWZ0ZXIgbWlncmF0aW9uIHRvIFZ1ZSAyLjcvMyBkdWUgbWl4aW4gbG9naWMKICAgICAgICBtb2NrczogewogICAgICAgICAgICAkc3RvcmU6IHsKICAgICAgICAgICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RvcmU6ICgpID0+ICdjdXJyZW50X3N0b3JlJywKICAgICAgICAgICAgICAgICAgICAnY3VycmVudF9zdG9yZS9zY2hlbWFGb3InOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgJ2N1cnJlbnRfc3RvcmUvYWxsJzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgICAgICdpMThuL3QnOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgJ2kxOG4vZXhpc3RzJzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9LAogICAgICAgICAgICAkcm91dGU6IHsgcXVlcnk6IHsgQVM6ICcnIH0gfSwKICAgICAgICAgICAgJHJvdXRlcjogeyBhcHBseVF1ZXJ5OiBqZXN0LmZuKCkgfSwKICAgICAgICB9CiAgICB9KTsKICAgIGl0KCdhbGxvd2luZyB0byBzYXZlIGlmIG5vIHJ1bGVzIGluIHNldHRpbmdzJywgKCkgPT4gewogICAgICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChTZXR0aW5ncywgewogICAgICAgICAgICBwcm9wc0RhdGE6IHsgdmFsdWU6IHsgdmFsdWU6ICdhbnl0aGluZycgfSB9LAogICAgICAgICAgICBkYXRhOiAoKSA9PiAoeyBzZXR0aW5nOiB7fSB9KSwKICAgICAgICAgICAgLi4ucmVxdWlyZWRTZXR1cCgpCiAgICAgICAgfSk7CiAgICAgICAgY29uc3Qgc2F2ZUJ1dHRvbiA9IHdyYXBwZXIuZmluZCgnW2RhdGEtdGVzdGlkPSJmb3JtLXNhdmUiXScpLmVsZW1lbnQ7CiAgICAgICAgZXhwZWN0KHNhdmVCdXR0b24uZGlzYWJsZWQpLnRvQmUoZmFsc2UpOwogICAgfSk7CiAgICBkZXNjcmliZSgndXNpbmcgcHJlZGVmaW5lZCBnZW5lcmljIHJ1bGUnLCAoKSA9PiB7CiAgICAgICAgY29uc3QgaWQgPSBTRVRUSU5HLlBBU1NXT1JEX01JTl9MRU5HVEg7CiAgICAgICAgZGVzY3JpYmUoJ3ZhbGlkYXRlIGlucHV0IHdpdGggcHJvdmlkZWQgc2V0dGluZ3MnLCAoKSA9PiB7CiAgICAgICAgICAgIGl0KCdhbGxvd2luZyB0byBzYXZlIGlmIHBhc3MnLCAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoU2V0dGluZ3MsIHsKICAgICAgICAgICAgICAgICAgICBwcm9wc0RhdGE6IHsgdmFsdWU6IHsgaWQsIHZhbHVlOiAnMycgfSB9LAogICAgICAgICAgICAgICAgICAgIC4uLnJlcXVpcmVkU2V0dXAoKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9ImZvcm0tc2F2ZSJdJykuZWxlbWVudDsKICAgICAgICAgICAgICAgIGV4cGVjdChzYXZlQnV0dG9uLmRpc2FibGVkKS50b0JlKGZhbHNlKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIC8vIFRPRE86IFRlc3QgcmVzdWx0cyBpbmNvcnJlY3RseSBmYWxzZSwgYnV0IGl0J3Mgbm90IHBvc3NpYmxlIHRvIGlkZW50aWZ5IHRoZSByZWFzb24gYW5kIHJlcXVpcmVkIHByZW1pc2VzCiAgICAgICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBqZXN0L25vLWRpc2FibGVkLXRlc3RzCiAgICAgICAgICAgIGl0LnNraXAoJ3ByZXZlbnRpbmcgdG8gc2F2ZSBpZiBhbnkgZXJyb3InLCAoKSA9PiB7CiAgICAgICAgICAgICAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoU2V0dGluZ3MsIHsKICAgICAgICAgICAgICAgICAgICBwcm9wc0RhdGE6IHsgdmFsdWU6IHsgaWQsIHZhbHVlOiAnMScgfSB9LAogICAgICAgICAgICAgICAgICAgIC4uLnJlcXVpcmVkU2V0dXAoKQogICAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgICAgICBjb25zdCBzYXZlQnV0dG9uID0gd3JhcHBlci5maW5kKCdbZGF0YS10ZXN0aWQ9ImZvcm0tc2F2ZSJdJykuZWxlbWVudDsKICAgICAgICAgICAgICAgIGV4cGVjdChzYXZlQnV0dG9uLmRpc2FibGVkKS50b0JlKHRydWUpOwogICAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgICBpdCgncmV0cmlldmUgY29ycmVjdCBydWxlcyBiYXNlZCBvbiBzZXR0aW5ncycsICgpID0+IHsKICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFNldHRpbmdzLCB7CiAgICAgICAgICAgICAgICBwcm9wc0RhdGE6IHsgdmFsdWU6IHsgaWQsIHZhbHVlOiAnJyB9IH0sCiAgICAgICAgICAgICAgICAuLi5yZXF1aXJlZFNldHVwKCkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGF0aW9uID0gW3sKICAgICAgICAgICAgICAgICAgICBwYXRoOiAndmFsdWUnLAogICAgICAgICAgICAgICAgICAgIHJ1bGVzOiBbJ2JldHdlZW5WYWx1ZXMnLCAnaXNJbnRlZ2VyJywgJ2lzUG9zaXRpdmUnLCAnaXNPY3RhbCddCiAgICAgICAgICAgICAgICB9XTsKICAgICAgICAgICAgZXhwZWN0KHdyYXBwZXIudm0uJGRhdGFbJ2Z2Rm9ybVJ1bGVTZXRzJ10pLnRvU3RyaWN0RXF1YWwoZXhwZWN0YXRpb24pOwogICAgICAgIH0pOwogICAgICAgIGl0KCdnZW5lcmF0ZSBleHRyYSBydWxlcyBiYXNlZCBvbiBzZXR0aW5ncycsICgpID0+IHsKICAgICAgICAgICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KFNldHRpbmdzLCB7CiAgICAgICAgICAgICAgICBwcm9wc0RhdGE6IHsgdmFsdWU6IHsgaWQsIHZhbHVlOiAnJyB9IH0sCiAgICAgICAgICAgICAgICAuLi5yZXF1aXJlZFNldHVwKCkKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIGNvbnN0IGV4cGVjdGF0aW9uID0gWydiZXR3ZWVuVmFsdWVzJywgJ2lzSW50ZWdlcicsICdpc1Bvc2l0aXZlJywgJ2lzT2N0YWwnXTsKICAgICAgICAgICAgLy8gQXZvaWQgaW50ZWdyYXRpb24gdGVzdHMgd2l0aCBtaXhpbiBhcyBpdCByZXR1cm5zIHRoZSB3aG9sZSBmdW5jdGlvbgogICAgICAgICAgICBjb25zdCBydWxlcyA9IE9iamVjdC5rZXlzKHdyYXBwZXIudm1bJ2Z2RXh0cmFSdWxlcyddKTsKICAgICAgICAgICAgZXhwZWN0KHJ1bGVzKS50b1N0cmljdEVxdWFsKGV4cGVjdGF0aW9uKTsKICAgICAgICB9KTsKICAgIH0pOwp9KTsK"},{"version":3,"file":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/__tests__/management.cattle.io.setting.test.ts","sourceRoot":"","sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/__tests__/management.cattle.io.setting.test.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,KAAK,EAAE,MAAM,iBAAiB,CAAC;AACxC,OAAO,QAAQ,MAAM,8CAA8C,CAAC;AACpE,OAAO,EAAE,OAAO,EAAE,MAAM,wBAAwB,CAAC;AAEjD,QAAQ,CAAC,2CAA2C,EAAE,GAAG,EAAE;IACzD,MAAM,aAAa,GAAG,GAAG,EAAE,CAAC,CAAC;QAC3B,sEAAsE;QACtE,KAAK,EAAE;YACL,MAAM,EAAE;gBACN,OAAO,EAAE;oBACP,YAAY,EAAe,GAAG,EAAE,CAAC,eAAe;oBAChD,yBAAyB,EAAE,IAAI,CAAC,EAAE,EAAE;oBACpC,mBAAmB,EAAQ,IAAI,CAAC,EAAE,EAAE;oBACpC,QAAQ,EAAmB,IAAI,CAAC,EAAE,EAAE;oBACpC,aAAa,EAAc,IAAI,CAAC,EAAE,EAAE;iBACrC;aACF;YACD,MAAM,EAAG,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE;YAC9B,OAAO,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,EAAE,EAAE,EAAE;SACnC;KACF,CAAC,CAAC;IAEH,EAAE,CAAC,0CAA0C,EAAE,GAAG,EAAE;QAClD,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE;YAC9B,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK,EAAE,UAAU,EAAE,EAAE;YAC3C,IAAI,EAAO,GAAG,EAAE,CAAC,CAAC,EAAE,OAAO,EAAE,EAAG,EAAE,CAAC;YACnC,GAAG,aAAa,EAAE;SACnB,CAAC,CAAC;QACH,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC,OAA2B,CAAC;QAEzF,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;IAC1C,CAAC,CAAC,CAAC;IAEH,QAAQ,CAAC,+BAA+B,EAAE,GAAG,EAAE;QAC7C,MAAM,EAAE,GAAG,OAAO,CAAC,mBAAmB,CAAC;QAEvC,QAAQ,CAAC,uCAAuC,EAAE,GAAG,EAAE;YACrD,EAAE,CAAC,0BAA0B,EAAE,GAAG,EAAE;gBAClC,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE;oBAC9B,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE;oBACxC,GAAG,aAAa,EAAE;iBACnB,CAAC,CAAC;gBACH,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC,OAA2B,CAAC;gBAEzF,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;YAC1C,CAAC,CAAC,CAAC;YAEH,2GAA2G;YAC3G,kDAAkD;YAClD,EAAE,CAAC,IAAI,CAAC,iCAAiC,EAAE,GAAG,EAAE;gBAC9C,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE;oBAC9B,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,GAAG,EAAE,EAAE;oBACxC,GAAG,aAAa,EAAE;iBACnB,CAAC,CAAC;gBACH,MAAM,UAAU,GAAG,OAAO,CAAC,IAAI,CAAC,2BAA2B,CAAC,CAAC,OAA2B,CAAC;gBAEzF,MAAM,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;YACzC,CAAC,CAAC,CAAC;QACL,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,0CAA0C,EAAE,GAAG,EAAE;YAClD,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE;gBAC9B,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE;gBACvC,GAAG,aAAa,EAAE;aACnB,CAAC,CAAC;YACH,MAAM,WAAW,GAAG,CAAC;oBACnB,IAAI,EAAG,OAAO;oBACd,KAAK,EAAE,CAAC,eAAe,EAAE,WAAW,EAAE,YAAY,EAAE,SAAS,CAAC;iBAC/D,CAAC,CAAC;YAEH,MAAM,CAAC,OAAO,CAAC,EAAE,CAAC,KAAK,CAAC,gBAAgB,CAAC,CAAC,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QACxE,CAAC,CAAC,CAAC;QAEH,EAAE,CAAC,wCAAwC,EAAE,GAAG,EAAE;YAChD,MAAM,OAAO,GAAG,KAAK,CAAC,QAAQ,EAAE;gBAC9B,SAAS,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,EAAE,EAAE;gBACvC,GAAG,aAAa,EAAE;aACnB,CAAC,CAAC;YACH,MAAM,WAAW,GAAG,CAAC,eAAe,EAAE,WAAW,EAAE,YAAY,EAAE,SAAS,CAAC,CAAC;YAE5E,sEAAsE;YACtE,MAAM,KAAK,GAAG,MAAM,CAAC,IAAI,CAAE,OAAO,CAAC,EAAU,CAAC,cAAc,CAAC,CAAC,CAAC;YAE/D,MAAM,CAAC,KAAK,CAAC,CAAC,aAAa,CAAC,WAAW,CAAC,CAAC;QAC3C,CAAC,CAAC,CAAC;IACL,CAAC,CAAC,CAAC;AACL,CAAC,CAAC,CAAC","sourcesContent":["import { mount } from '@vue/test-utils';\nimport Settings from '@shell/edit/management.cattle.io.setting.vue';\nimport { SETTING } from '@shell/config/settings';\n\ndescribe('view: management.cattle.io.setting should', () => {\n  const requiredSetup = () => ({\n    // Remove all these mocks after migration to Vue 2.7/3 due mixin logic\n    mocks: {\n      $store: {\n        getters: {\n          currentStore:              () => 'current_store',\n          'current_store/schemaFor': jest.fn(),\n          'current_store/all':       jest.fn(),\n          'i18n/t':                  jest.fn(),\n          'i18n/exists':             jest.fn(),\n        }\n      },\n      $route:  { query: { AS: '' } },\n      $router: { applyQuery: jest.fn() },\n    }\n  });\n\n  it('allowing to save if no rules in settings', () => {\n    const wrapper = mount(Settings, {\n      propsData: { value: { value: 'anything' } },\n      data:      () => ({ setting: { } }),\n      ...requiredSetup()\n    });\n    const saveButton = wrapper.find('[data-testid=\"form-save\"]').element as HTMLInputElement;\n\n    expect(saveButton.disabled).toBe(false);\n  });\n\n  describe('using predefined generic rule', () => {\n    const id = SETTING.PASSWORD_MIN_LENGTH;\n\n    describe('validate input with provided settings', () => {\n      it('allowing to save if pass', () => {\n        const wrapper = mount(Settings, {\n          propsData: { value: { id, value: '3' } },\n          ...requiredSetup()\n        });\n        const saveButton = wrapper.find('[data-testid=\"form-save\"]').element as HTMLInputElement;\n\n        expect(saveButton.disabled).toBe(false);\n      });\n\n      // TODO: Test results incorrectly false, but it's not possible to identify the reason and required premises\n      // eslint-disable-next-line jest/no-disabled-tests\n      it.skip('preventing to save if any error', () => {\n        const wrapper = mount(Settings, {\n          propsData: { value: { id, value: '1' } },\n          ...requiredSetup()\n        });\n        const saveButton = wrapper.find('[data-testid=\"form-save\"]').element as HTMLInputElement;\n\n        expect(saveButton.disabled).toBe(true);\n      });\n    });\n\n    it('retrieve correct rules based on settings', () => {\n      const wrapper = mount(Settings, {\n        propsData: { value: { id, value: '' } },\n        ...requiredSetup()\n      });\n      const expectation = [{\n        path:  'value',\n        rules: ['betweenValues', 'isInteger', 'isPositive', 'isOctal']\n      }];\n\n      expect(wrapper.vm.$data['fvFormRuleSets']).toStrictEqual(expectation);\n    });\n\n    it('generate extra rules based on settings', () => {\n      const wrapper = mount(Settings, {\n        propsData: { value: { id, value: '' } },\n        ...requiredSetup()\n      });\n      const expectation = ['betweenValues', 'isInteger', 'isPositive', 'isOctal'];\n\n      // Avoid integration tests with mixin as it returns the whole function\n      const rules = Object.keys((wrapper.vm as any)['fvExtraRules']);\n\n      expect(rules).toStrictEqual(expectation);\n    });\n  });\n});\n"]}]}