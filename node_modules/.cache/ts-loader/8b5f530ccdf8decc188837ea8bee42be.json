{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/__tests__/Mount.test.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/__tests__/Mount.test.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbW91bnQgfSBmcm9tICdAdnVlL3Rlc3QtdXRpbHMnOwppbXBvcnQgTW91bnQgZnJvbSAnQHNoZWxsL2VkaXQvL3dvcmtsb2FkL3N0b3JhZ2UvTW91bnQudnVlJzsKZGVzY3JpYmUoJ2NvbXBvbmVudDogTW91bnQnLCAoKSA9PiB7CiAgICBpdCgnc2hvdWxkIGRpc3BsYXkgYWx3YXkgYXQgbGVhc3QgMSBtb3VudCBwb2ludCBpbnB1dCcsICgpID0+IHsKICAgICAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoTW91bnQsIHsKICAgICAgICAgICAgcHJvcHNEYXRhOiB7IGNvbnRhaW5lcjoge30gfSwKICAgICAgICAgICAgbW9ja3M6IHsgJHN0b3JlOiB7IGdldHRlcnM6IHsgJ2kxOG4vdCc6IGplc3QuZm4oKSB9IH0gfSwKICAgICAgICB9KTsKICAgICAgICBjb25zdCBpbnB1dEVsZW1lbnQgPSB3cmFwcGVyLmZpbmQoJ2lucHV0JykuZWxlbWVudDsKICAgICAgICBleHBlY3QoaW5wdXRFbGVtZW50LnZhbHVlKS50b0JlKCcnKTsKICAgIH0pOwogICAgaXQoJ3Nob3VsZCBkaXNwbGF5IG9ubHkgdmFsdWVzIGZvciB0aGUgY3VycmVudCBuYW1lJywgKCkgPT4gewogICAgICAgIGNvbnN0IG5hbWUgPSAndGVzdCc7CiAgICAgICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KE1vdW50LCB7CiAgICAgICAgICAgIHByb3BzRGF0YTogewogICAgICAgICAgICAgICAgbmFtZSwKICAgICAgICAgICAgICAgIGNvbnRhaW5lcjogewogICAgICAgICAgICAgICAgICAgIHZvbHVtZU1vdW50czogWwogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgbW91bnRQYXRoOiAnJwogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuYW1lOiAnYW5vdGhlciBuYW1lJywKICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1vdW50UGF0aDogJycKICAgICAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgICAgICBdCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1vY2tzOiB7ICRzdG9yZTogeyBnZXR0ZXJzOiB7ICdpMThuL3QnOiBqZXN0LmZuKCkgfSB9IH0sCiAgICAgICAgfSk7CiAgICAgICAgY29uc3QgaW5wdXRzID0gd3JhcHBlci5maW5kQWxsKCdbaWRePSJtb3VudC1wYXRoLSJdJyk7CiAgICAgICAgZXhwZWN0KGlucHV0cykudG9IYXZlTGVuZ3RoKDEpOwogICAgfSk7CiAgICBpdCgnc2hvdWxkIGFkZCB0aGUgbmV3IG1vdW50IHBvaW50JywgYXN5bmMgKCkgPT4gewogICAgICAgIGNvbnN0IG5hbWUgPSAndGVzdCc7CiAgICAgICAgY29uc3Qgd3JhcHBlciA9IG1vdW50KE1vdW50LCB7CiAgICAgICAgICAgIHByb3BzRGF0YTogeyBuYW1lLCBjb250YWluZXI6IHt9IH0sCiAgICAgICAgICAgIG1vY2tzOiB7ICRzdG9yZTogeyBnZXR0ZXJzOiB7ICdpMThuL3QnOiBqZXN0LmZuKCkgfSB9IH0sCiAgICAgICAgfSk7CiAgICAgICAgYXdhaXQgd3JhcHBlci5maW5kKCcjYWRkLW1vdW50JykudHJpZ2dlcignY2xpY2snKTsKICAgICAgICBjb25zdCBpbnB1dHMgPSB3cmFwcGVyLmZpbmRBbGwoJ1tpZF49Im1vdW50LXBhdGgtIl0nKTsKICAgICAgICBleHBlY3QoaW5wdXRzKS50b0hhdmVMZW5ndGgoMik7CiAgICB9KTsKICAgIGl0KCdzaG91bGQgcmVtb3ZlIHRoZSBtb3VudCBwb2ludCcsIGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCBuYW1lID0gJ3Rlc3QnOwogICAgICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChNb3VudCwgewogICAgICAgICAgICBwcm9wc0RhdGE6IHsgbmFtZSwgY29udGFpbmVyOiB7fSB9LAogICAgICAgICAgICBtb2NrczogeyAkc3RvcmU6IHsgZ2V0dGVyczogeyAnaTE4bi90JzogamVzdC5mbigpIH0gfSB9LAogICAgICAgIH0pOwogICAgICAgIGF3YWl0IHdyYXBwZXIuZmluZCgnI3JlbW92ZS1tb3VudCcpLnRyaWdnZXIoJ2NsaWNrJyk7CiAgICAgICAgY29uc3QgaW5wdXRzID0gd3JhcHBlci5maW5kQWxsKCdbaWRePSJtb3VudC1wYXRoLSJdJyk7CiAgICAgICAgZXhwZWN0KGlucHV0cykudG9IYXZlTGVuZ3RoKDApOwogICAgfSk7CiAgICBpdCgnc2hvdWxkIG1hcCB0aGUgbW91bnQgcG9pbnQgd2l0aCB0aGUgbmV3IG5hbWUnLCBhc3luYyAoKSA9PiB7CiAgICAgICAgY29uc3QgbmFtZSA9ICd0ZXN0JzsKICAgICAgICBjb25zdCBtb3VudFBhdGggPSAnLi8nOwogICAgICAgIGNvbnN0IHdyYXBwZXIgPSBtb3VudChNb3VudCwgewogICAgICAgICAgICBwcm9wc0RhdGE6IHsgbmFtZSwgY29udGFpbmVyOiB7fSB9LAogICAgICAgICAgICBtb2NrczogeyAkc3RvcmU6IHsgZ2V0dGVyczogeyAnaTE4bi90JzogamVzdC5mbigpIH0gfSB9LAogICAgICAgIH0pOwogICAgICAgIGF3YWl0IHdyYXBwZXIuZmluZCgnW2lkXj0ibW91bnQtcGF0aC0iXScpLnNldFZhbHVlKG1vdW50UGF0aCk7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gd3JhcHBlci5wcm9wcygnY29udGFpbmVyJyk7CiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9TdHJpY3RFcXVhbCh7IHZvbHVtZU1vdW50czogW3sgbmFtZSwgbW91bnRQYXRoIH1dIH0pOwogICAgfSk7CiAgICBpdCgnc2hvdWxkIG5vdCB3aXBlIG91dCBtb3VudGVkIHBvaW50cyBvbiBuYW1lIGNoYW5nZScsIGFzeW5jICgpID0+IHsKICAgICAgICBjb25zdCBuYW1lID0gJ3Rlc3QnOwogICAgICAgIGNvbnN0IG5ld05hbWUgPSAndGVzdCc7CiAgICAgICAgY29uc3QgbW91bnRQYXRoID0gJy4vJzsKICAgICAgICBjb25zdCB3cmFwcGVyID0gbW91bnQoTW91bnQsIHsKICAgICAgICAgICAgcHJvcHNEYXRhOiB7IG5hbWUsIGNvbnRhaW5lcjogeyB2b2x1bWVNb3VudHM6IFt7IG5hbWUsIG1vdW50UGF0aCB9XSB9IH0sCiAgICAgICAgICAgIG1vY2tzOiB7ICRzdG9yZTogeyBnZXR0ZXJzOiB7ICdpMThuL3QnOiBqZXN0LmZuKCkgfSB9IH0sCiAgICAgICAgfSk7CiAgICAgICAgYXdhaXQgd3JhcHBlci5zZXRQcm9wcyh7IG5hbWU6IG5ld05hbWUgfSk7CiAgICAgICAgY29uc3QgcmVzdWx0ID0gd3JhcHBlci5wcm9wcygnY29udGFpbmVyJyk7CiAgICAgICAgY29uc3QgaW5wdXRFbGVtZW50ID0gd3JhcHBlci5maW5kKCdpbnB1dCcpLmVsZW1lbnQ7CiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9TdHJpY3RFcXVhbCh7IHZvbHVtZU1vdW50czogW3sgbmFtZTogbmV3TmFtZSwgbW91bnRQYXRoIH1dIH0pOwogICAgICAgIGV4cGVjdChpbnB1dEVsZW1lbnQudmFsdWUpLnRvQmUobW91bnRQYXRoKTsKICAgIH0pOwp9KTsK"},{"version":3,"file":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/__tests__/Mount.test.ts","sourceRoot":"","sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/storage/__tests__/Mount.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { mount } from '@vue/test-utils';\nimport Mount from '@shell/edit//workload/storage/Mount.vue';\n\ndescribe('component: Mount', () => {\n  it('should display alway at least 1 mount point input', () => {\n    const wrapper = mount(Mount, {\n      propsData: { container: {} },\n      mocks:     { $store: { getters: { 'i18n/t': jest.fn() } } },\n    });\n    const inputElement = wrapper.find('input').element as HTMLInputElement;\n\n    expect(inputElement.value).toBe('');\n  });\n\n  it('should display only values for the current name', () => {\n    const name = 'test';\n    const wrapper = mount(Mount, {\n      propsData: {\n        name,\n        container: {\n          volumeMounts: [\n            {\n              name,\n              mountPath: ''\n            },\n            {\n              name:      'another name',\n              mountPath: ''\n            },\n          ]\n        }\n      },\n      mocks: { $store: { getters: { 'i18n/t': jest.fn() } } },\n    });\n\n    const inputs = wrapper.findAll('[id^=\"mount-path-\"]');\n\n    expect(inputs).toHaveLength(1);\n  });\n\n  it('should add the new mount point', async() => {\n    const name = 'test';\n    const wrapper = mount(Mount, {\n      propsData: { name, container: {} },\n      mocks:     { $store: { getters: { 'i18n/t': jest.fn() } } },\n    });\n\n    await wrapper.find('#add-mount').trigger('click');\n\n    const inputs = wrapper.findAll('[id^=\"mount-path-\"]');\n\n    expect(inputs).toHaveLength(2);\n  });\n\n  it('should remove the mount point', async() => {\n    const name = 'test';\n    const wrapper = mount(Mount, {\n      propsData: { name, container: {} },\n      mocks:     { $store: { getters: { 'i18n/t': jest.fn() } } },\n    });\n\n    await wrapper.find('#remove-mount').trigger('click');\n    const inputs = wrapper.findAll('[id^=\"mount-path-\"]');\n\n    expect(inputs).toHaveLength(0);\n  });\n\n  it('should map the mount point with the new name', async() => {\n    const name = 'test';\n    const mountPath = './';\n    const wrapper = mount(Mount, {\n      propsData: { name, container: {} },\n      mocks:     { $store: { getters: { 'i18n/t': jest.fn() } } },\n    });\n\n    await wrapper.find('[id^=\"mount-path-\"]').setValue(mountPath);\n    const result = wrapper.props('container');\n\n    expect(result).toStrictEqual({ volumeMounts: [{ name, mountPath }] });\n  });\n\n  it('should not wipe out mounted points on name change', async() => {\n    const name = 'test';\n    const newName = 'test';\n    const mountPath = './';\n    const wrapper = mount(Mount, {\n      propsData: { name, container: { volumeMounts: [{ name, mountPath }] } },\n      mocks:     { $store: { getters: { 'i18n/t': jest.fn() } } },\n    });\n\n    await wrapper.setProps({ name: newName });\n    const result = wrapper.props('container');\n    const inputElement = wrapper.find('input').element as HTMLInputElement;\n\n    expect(result).toStrictEqual({ volumeMounts: [{ name: newName, mountPath }] });\n    expect(inputElement.value).toBe(mountPath);\n  });\n});\n"]}]}