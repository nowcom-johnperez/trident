{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/__tests__/index.test.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/__tests__/index.test.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgY3JlYXRlTG9jYWxWdWUsIHNoYWxsb3dNb3VudCB9IGZyb20gJ0B2dWUvdGVzdC11dGlscyc7CmltcG9ydCBXb3JrbG9hZCBmcm9tICdAc2hlbGwvZWRpdC93b3JrbG9hZC9pbmRleC52dWUnOwpqZXN0Lm1vY2soJ0BzaGVsbC9tb2RlbHMvc2VjcmV0JywgKCkgPT4gKHsgb25tZXNzYWdlOiBqZXN0LmZuKCkgfSkpOwpkZXNjcmliZSgnY29tcG9uZW50OiBXb3JrbG9hZCcsICgpID0+IHsKICAgIGl0LmVhY2goWwogICAgICAgIFsKICAgICAgICAgICAgYHBvZHMgXCJ0ZXN0XCIgaXMgZm9yYmlkZGVuOiB2aW9sYXRlcyBQb2RTZWN1cml0eSBcInJlc3RyaWN0ZWQ6bGF0ZXN0XCI6IGFsbG93UHJpdmlsZWdlRXNjYWxhdGlvbiAhPSBmYWxzZSAoY29udGFpbmVyIFwiY29udGFpbmVyLTBcIiBtdXN0IHNldCBzZWN1cml0eUNvbnRleHQuYWxsb3dQcml2aWxlZ2VFc2NhbGF0aW9uPWZhbHNlKSwgdW5yZXN0cmljdGVkIGNhcGFiaWxpdGllcyAoY29udGFpbmVyIFwiY29udGFpbmVyLTBcIiBtdXN0IHNldCBzZWN1cml0eUNvbnRleHQuY2FwYWJpbGl0aWVzLmRyb3A9W1wiQUxMXCJdKSwgcnVuQXNOb25Sb290ICE9IHRydWUgKGNvbnRhaW5lciBcImNvbnRhaW5lci0wXCIgbXVzdCBub3Qgc2V0IHNlY3VyaXR5Q29udGV4dC5ydW5Bc05vblJvb3Q9ZmFsc2UpLCBzZWNjb21wUHJvZmlsZSAocG9kIG9yIGNvbnRhaW5lciBcImNvbnRhaW5lci0wXCIgbXVzdCBzZXQgc2VjdXJpdHlDb250ZXh0LnNlY2NvbXBQcm9maWxlLnR5cGUgdG8gXCJSdW50aW1lRGVmYXVsdFwiIG9yIFwiTG9jYWxob3N0XCIpYCwKICAgICAgICAgICAgYFBvZCAidGVzdCIgU2VjdXJpdHkgUG9saWN5IFZpb2xhdGlvbiAicmVzdHJpY3RlZDpsYXRlc3QiYAogICAgICAgIF0KICAgIF0pKCdzaG91bGQgbWFwIGVycm9yIG1lc3NhZ2UgaW50byBvYmplY3QnLCAob2xkTWVzc2FnZSwgbmV3TWVzc2FnZSkgPT4gewogICAgICAgIGNvbnN0IG1vY2tlZFZhbGlkYXRpb25NaXhpbiA9IHsKICAgICAgICAgICAgbWV0aG9kczogewogICAgICAgICAgICAgICAgZnZGb3JtSXNWYWxpZDogamVzdC5mbigpLAogICAgICAgICAgICAgICAgdHlwZTogamVzdC5mbigpLAogICAgICAgICAgICAgICAgZnZVbnJlcG9ydGVkVmFsaWRhdGlvbkVycm9yczogamVzdC5mbigpLAogICAgICAgICAgICAgICAgZnZHZXRBbmRSZXBvcnRQYXRoUnVsZXM6IGplc3QuZm4oKSwKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgY29uc3QgbW9ja2VkQ1JFTWl4aW4gPSB7fTsKICAgICAgICBjb25zdCBtb2NrZWRXb3JrbG9hZE1peGluID0gewogICAgICAgICAgICBtZXRob2RzOiB7CiAgICAgICAgICAgICAgICBkb25lUm91dGU6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIHdvcmtsb2FkU3ViVHlwZXM6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIGFwcGx5SG9va3M6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIHNhdmU6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIHNlbGVjdFR5cGU6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIGlzQ3JvbkpvYjogamVzdC5mbigpLAogICAgICAgICAgICAgICAgc3BlYzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgaXNSZXBsaWNhYmxlOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICBpc1N0YXRlZnVsU2V0OiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICBoZWFkbGVzc1NlcnZpY2VzOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICBkZWZhdWx0VGFiOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICBhbGxDb250YWluZXJzOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICBpc1BvZDogamVzdC5mbigpLAogICAgICAgICAgICAgICAgdGFiV2VpZ2h0TWFwOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICBwb2RMYWJlbHM6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIHBvZFRlbXBsYXRlU3BlYzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgaXNMb2FkaW5nU2Vjb25kYXJ5UmVzb3VyY2VzOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICBhbGxOb2RlczogamVzdC5mbigpLAogICAgICAgICAgICAgICAgYWxsTm9kZU9iamVjdHM6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIGNsZWFyUHZjRm9ybVN0YXRlOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICBzYXZlUHZjSG9va05hbWU6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIG5hbWVzcGFjZWRDb25maWdNYXBzOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICBwb2RBbm5vdGF0aW9uczogamVzdC5mbigpLAogICAgICAgICAgICAgICAgaXNKb2I6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIHBvZEZzR3JvdXA6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIG5hbWVzcGFjZWRTZWNyZXRzOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICByZWdpc3RlckJlZm9yZUhvb2s6IGplc3QuZm4oKSwKICAgICAgICAgICAgICAgIHB2Y3M6IGplc3QuZm4oKSwKICAgICAgICAgICAgfQogICAgICAgIH07CiAgICAgICAgY29uc3QgbG9jYWxWdWUgPSBjcmVhdGVMb2NhbFZ1ZSgpOwogICAgICAgIGNvbnN0IE1vY2tlZFdvcmtsb2FkID0geyAuLi5Xb3JrbG9hZCwgbWl4aW5zOiBbbW9ja2VkVmFsaWRhdGlvbk1peGluLCBtb2NrZWRDUkVNaXhpbiwgbW9ja2VkV29ya2xvYWRNaXhpbl0gfTsKICAgICAgICBjb25zdCB3cmFwcGVyID0gc2hhbGxvd01vdW50KE1vY2tlZFdvcmtsb2FkLCB7CiAgICAgICAgICAgIGxvY2FsVnVlLAogICAgICAgICAgICBwcm9wc0RhdGE6IHsKICAgICAgICAgICAgICAgIHZhbHVlOiB7IG1ldGFkYXRhOiB7fSwgc3BlYzogeyB0ZW1wbGF0ZToge30gfSB9LAogICAgICAgICAgICAgICAgcGFyYW1zOiB7fSwKICAgICAgICAgICAgICAgIGZ2Rm9ybUlzVmFsaWQ6IHt9CiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG1vY2tzOiB7CiAgICAgICAgICAgICAgICAkcm91dGU6IHsgcGFyYW1zOiB7fSwgcXVlcnk6IHt9IH0sCiAgICAgICAgICAgICAgICAkcm91dGVyOiB7IGFwcGx5UXVlcnk6IGplc3QuZm4oKSB9LAogICAgICAgICAgICAgICAgJGZldGNoU3RhdGU6IHsgcGVuZGluZzogZmFsc2UgfSwKICAgICAgICAgICAgICAgICRzdG9yZTogewogICAgICAgICAgICAgICAgICAgIGdldHRlcnM6IHsKICAgICAgICAgICAgICAgICAgICAgICAgJ2NsdXN0ZXIvc2NoZW1hRm9yJzogamVzdC5mbigpLAogICAgICAgICAgICAgICAgICAgICAgICAndHlwZS1tYXAvbGFiZWxGb3InOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgICAgICdpMThuL3QnOiBqZXN0LmZuKCksCiAgICAgICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIH0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHN0dWJzOiB7CiAgICAgICAgICAgICAgICBUYWI6IHRydWUsCiAgICAgICAgICAgICAgICBMYWJlbGVkSW5wdXQ6IHRydWUsCiAgICAgICAgICAgICAgICBWb2x1bWVDbGFpbVRlbXBsYXRlOiB0cnVlLAogICAgICAgICAgICAgICAgTmV0d29ya2luZzogdHJ1ZSwKICAgICAgICAgICAgICAgIEpvYjogdHJ1ZSwKICAgICAgICAgICAgICAgIE5vZGVTY2hlZHVsaW5nOiB0cnVlLAogICAgICAgICAgICAgICAgUG9kQWZmaW5pdHk6IHRydWUsCiAgICAgICAgICAgICAgICBUb2xlcmF0aW9uczogdHJ1ZSwKICAgICAgICAgICAgICAgIFN0b3JhZ2U6IHRydWUsCiAgICAgICAgICAgICAgICBUYWJiZWQ6IHRydWUsCiAgICAgICAgICAgICAgICBMYWJlbGVkU2VsZWN0OiB0cnVlLAogICAgICAgICAgICAgICAgTmFtZU5zRGVzY3JpcHRpb246IHRydWUsCiAgICAgICAgICAgICAgICBDcnVSZXNvdXJjZTogdHJ1ZSwKICAgICAgICAgICAgICAgIEtleVZhbHVlOiB0cnVlCiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBjb25zdCByZXN1bHQgPSB3cmFwcGVyLnZtLm1hcEVycm9yKG9sZE1lc3NhZ2UpLm1lc3NhZ2U7CiAgICAgICAgZXhwZWN0KHJlc3VsdCkudG9TdHJpY3RFcXVhbChuZXdNZXNzYWdlKTsKICAgIH0pOwp9KTsK"},{"version":3,"file":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/__tests__/index.test.ts","sourceRoot":"","sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/edit/workload/__tests__/index.test.ts"],"names":[],"mappings":"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","sourcesContent":["import { createLocalVue, shallowMount } from '@vue/test-utils';\nimport Workload from '@shell/edit/workload/index.vue';\n\njest.mock('@shell/models/secret', () => ({ onmessage: jest.fn() }));\n\ndescribe('component: Workload', () => {\n  it.each([\n    [\n      `pods \\\"test\\\" is forbidden: violates PodSecurity \\\"restricted:latest\\\": allowPrivilegeEscalation != false (container \\\"container-0\\\" must set securityContext.allowPrivilegeEscalation=false), unrestricted capabilities (container \\\"container-0\\\" must set securityContext.capabilities.drop=[\\\"ALL\\\"]), runAsNonRoot != true (container \\\"container-0\\\" must not set securityContext.runAsNonRoot=false), seccompProfile (pod or container \\\"container-0\\\" must set securityContext.seccompProfile.type to \\\"RuntimeDefault\\\" or \\\"Localhost\\\")`,\n      `Pod \"test\" Security Policy Violation \"restricted:latest\"`\n    ]\n  ])('should map error message into object', (oldMessage, newMessage) => {\n    const mockedValidationMixin = {\n      methods: {\n        fvFormIsValid:                jest.fn(),\n        type:                         jest.fn(),\n        fvUnreportedValidationErrors: jest.fn(),\n        fvGetAndReportPathRules:      jest.fn(),\n      }\n    };\n    const mockedCREMixin = {};\n    const mockedWorkloadMixin = {\n      methods: {\n        doneRoute:                   jest.fn(),\n        workloadSubTypes:            jest.fn(),\n        applyHooks:                  jest.fn(),\n        save:                        jest.fn(),\n        selectType:                  jest.fn(),\n        isCronJob:                   jest.fn(),\n        spec:                        jest.fn(),\n        isReplicable:                jest.fn(),\n        isStatefulSet:               jest.fn(),\n        headlessServices:            jest.fn(),\n        defaultTab:                  jest.fn(),\n        allContainers:               jest.fn(),\n        isPod:                       jest.fn(),\n        tabWeightMap:                jest.fn(),\n        podLabels:                   jest.fn(),\n        podTemplateSpec:             jest.fn(),\n        isLoadingSecondaryResources: jest.fn(),\n        allNodes:                    jest.fn(),\n        allNodeObjects:              jest.fn(),\n        clearPvcFormState:           jest.fn(),\n        savePvcHookName:             jest.fn(),\n        namespacedConfigMaps:        jest.fn(),\n        podAnnotations:              jest.fn(),\n        isJob:                       jest.fn(),\n        podFsGroup:                  jest.fn(),\n        namespacedSecrets:           jest.fn(),\n        registerBeforeHook:          jest.fn(),\n        pvcs:                        jest.fn(),\n        // tabWeightMap:     jest.fn(),\n      }\n    };\n    const localVue = createLocalVue();\n    const MockedWorkload = { ...Workload, mixins: [mockedValidationMixin, mockedCREMixin, mockedWorkloadMixin] };\n    const wrapper = shallowMount(MockedWorkload, {\n      localVue,\n      propsData: {\n        value:         { metadata: {}, spec: { template: {} } },\n        params:        {},\n        fvFormIsValid: {}\n      },\n      mocks: {\n        $route:      { params: {}, query: {} },\n        $router:     { applyQuery: jest.fn() },\n        $fetchState: { pending: false },\n        $store:      {\n          getters: {\n            'cluster/schemaFor': jest.fn(),\n            'type-map/labelFor': jest.fn(),\n            'i18n/t':            jest.fn(),\n          },\n        },\n      },\n      stubs: {\n        Tab:                 true,\n        LabeledInput:        true,\n        VolumeClaimTemplate: true,\n        Networking:          true,\n        Job:                 true,\n        NodeScheduling:      true,\n        PodAffinity:         true,\n        Tolerations:         true,\n        Storage:             true,\n        Tabbed:              true,\n        LabeledSelect:       true,\n        NameNsDescription:   true,\n        CruResource:         true,\n        KeyValue:            true\n      }\n    });\n\n    const result = (wrapper.vm as any).mapError(oldMessage).message;\n\n    expect(result).toStrictEqual(newMessage);\n  });\n});\n"]}]}