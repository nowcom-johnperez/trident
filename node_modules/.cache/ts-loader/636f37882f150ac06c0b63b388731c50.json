{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/core/plugin.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/core/plugin.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgRFNMIGFzIFNUT1JFX0RTTCB9IGZyb20gJ0BzaGVsbC9zdG9yZS90eXBlLW1hcCc7CmltcG9ydCB7IEV4dGVuc2lvblBvaW50IH0gZnJvbSAnLi90eXBlcyc7CmltcG9ydCBjb3JlU3RvcmUsIHsgY29yZVN0b3JlTW9kdWxlLCBjb3JlU3RvcmVTdGF0ZSB9IGZyb20gJ0BzaGVsbC9wbHVnaW5zL2Rhc2hib2FyZC1zdG9yZSc7CmltcG9ydCB7IHJlZ2lzdGVyTGF5b3V0IH0gZnJvbSAnQHNoZWxsL2luaXRpYWxpemUvbGF5b3V0cyc7CmV4cG9ydCBjbGFzcyBQbHVnaW4gewogICAgY29uc3RydWN0b3IoaWQpIHsKICAgICAgICB0aGlzLnR5cGVzID0ge307CiAgICAgICAgdGhpcy5sMTBuID0ge307CiAgICAgICAgdGhpcy5sb2NhbGVzID0gW107CiAgICAgICAgdGhpcy5wcm9kdWN0cyA9IFtdOwogICAgICAgIHRoaXMucHJvZHVjdE5hbWVzID0gW107CiAgICAgICAgdGhpcy5yb3V0ZXMgPSBbXTsKICAgICAgICB0aGlzLnN0b3JlcyA9IFtdOwogICAgICAgIHRoaXMub25FbnRlciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgIHRoaXMub25MZWF2ZSA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpOwogICAgICAgIHRoaXMuX29uTG9nT3V0ID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgICAgdGhpcy51aUNvbmZpZyA9IHt9OwogICAgICAgIC8vIFBsdWdpbiBtZXRhZGF0YSAocGx1Z2luIHBhY2thZ2UuanNvbikKICAgICAgICB0aGlzLl9tZXRhZGF0YSA9IHt9OwogICAgICAgIHRoaXMuX3ZhbGlkYXRvcnMgPSB7fTsKICAgICAgICAvLyBJcyB0aGlzIGEgYnVpbHQtaW4gcGx1Z2luIChidW5kbGVkIHdpdGggdGhlIGFwcGxpY2F0aW9uKQogICAgICAgIHRoaXMuYnVpbHRpbiA9IGZhbHNlOwogICAgICAgIC8vIFVuaW5zdGFsbCBob29rcwogICAgICAgIHRoaXMudW5pbnN0YWxsSG9va3MgPSBbXTsKICAgICAgICB0aGlzLmlkID0gaWQ7CiAgICAgICAgdGhpcy5uYW1lID0gaWQ7CiAgICAgICAgLy8gSW5pdGlhbGl6ZSB1aUNvbmZpZyBmb3IgYWxsIG9mIHRoZSBwb3NzaWJsZSBlbnVtIHZhbHVlcwogICAgICAgIE9iamVjdC52YWx1ZXMoRXh0ZW5zaW9uUG9pbnQpLmZvckVhY2goKHYpID0+IHsKICAgICAgICAgICAgdGhpcy51aUNvbmZpZ1t2XSA9IHt9OwogICAgICAgIH0pOwogICAgfQogICAgZ2V0IG1ldGFkYXRhKCkgewogICAgICAgIHJldHVybiB0aGlzLl9tZXRhZGF0YTsKICAgIH0KICAgIHNldCBtZXRhZGF0YSh2YWx1ZSkgewogICAgICAgIHRoaXMuX21ldGFkYXRhID0gdmFsdWU7CiAgICAgICAgdGhpcy5uYW1lID0gdGhpcy5fbWV0YWRhdGEubmFtZSB8fCB0aGlzLmlkOwogICAgfQogICAgZ2V0IHZlcnNpb24oKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuX21ldGFkYXRhLnZlcnNpb247CiAgICB9CiAgICBnZXQgdmFsaWRhdG9ycygpIHsKICAgICAgICByZXR1cm4gdGhpcy5fdmFsaWRhdG9yczsKICAgIH0KICAgIHNldCB2YWxpZGF0b3JzKHZhbHMpIHsKICAgICAgICB0aGlzLl92YWxpZGF0b3JzID0gdmFsczsKICAgIH0KICAgIC8vIFRyYWNrIHdoaWNoIHByb2R1Y3RzIHRoZSBwbHVnaW4gY3JlYXRlcwogICAgRFNMKHN0b3JlLCBwcm9kdWN0TmFtZSkgewogICAgICAgIGNvbnN0IHN0b3JlRFNMID0gU1RPUkVfRFNMKHN0b3JlLCBwcm9kdWN0TmFtZSk7CiAgICAgICAgdGhpcy5wcm9kdWN0TmFtZXMucHVzaChwcm9kdWN0TmFtZSk7CiAgICAgICAgcmV0dXJuIHN0b3JlRFNMOwogICAgfQogICAgYWRkUHJvZHVjdChwcm9kdWN0KSB7CiAgICAgICAgdGhpcy5wcm9kdWN0cy5wdXNoKHByb2R1Y3QpOwogICAgfQogICAgYWRkTG9jYWxlKGxvY2FsZSwgbGFiZWwpIHsKICAgICAgICB0aGlzLmxvY2FsZXMucHVzaCh7IGxvY2FsZSwgbGFiZWwgfSk7CiAgICB9CiAgICBhZGRMMTBuKGxvY2FsZSwgZm4pIHsKICAgICAgICB0aGlzLnJlZ2lzdGVyKCdsMTBuJywgbG9jYWxlLCBmbik7CiAgICB9CiAgICBhZGRSb3V0ZXMocm91dGVzKSB7CiAgICAgICAgcm91dGVzLmZvckVhY2goKHIpID0+IHsKICAgICAgICAgICAgaWYgKE9iamVjdC5rZXlzKHIpLmluY2x1ZGVzKCdwYXJlbnQnKSkgewogICAgICAgICAgICAgICAgY29uc3QgcENvbmZpZyA9IHI7CiAgICAgICAgICAgICAgICBpZiAocENvbmZpZy5wYXJlbnQpIHsKICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZFJvdXRlKHBDb25maWcucGFyZW50LCBwQ29uZmlnLnJvdXRlKTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgICAgIHRoaXMuYWRkUm91dGUocENvbmZpZy5yb3V0ZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLmFkZFJvdXRlKHIpOwogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICB9CiAgICBhZGRSb3V0ZShwYXJlbnRPclJvdXRlLCBvcHRpb25hbFJvdXRlKSB7CiAgICAgICAgLy8gQWx3YXlzIGFkZCB0aGUgcGtnIG5hbWUgdG8gdGhlIHJvdXRlIG1ldGFkYXRhCiAgICAgICAgY29uc3QgaGFzUGFyZW50ID0gdHlwZW9mIChwYXJlbnRPclJvdXRlKSA9PT0gJ3N0cmluZyc7CiAgICAgICAgY29uc3QgcGFyZW50ID0gaGFzUGFyZW50ID8gcGFyZW50T3JSb3V0ZSA6IHVuZGVmaW5lZDsKICAgICAgICBjb25zdCByb3V0ZSA9IGhhc1BhcmVudCA/IG9wdGlvbmFsUm91dGUgOiBwYXJlbnRPclJvdXRlOwogICAgICAgIHJvdXRlLm1ldGEgPSB7CiAgICAgICAgICAgIC4uLnJvdXRlID09PSBudWxsIHx8IHJvdXRlID09PSB2b2lkIDAgPyB2b2lkIDAgOiByb3V0ZS5tZXRhLAogICAgICAgICAgICBwa2c6IHRoaXMubmFtZSwKICAgICAgICB9OwogICAgICAgIHRoaXMucm91dGVzLnB1c2goeyBwYXJlbnQsIHJvdXRlIH0pOwogICAgfQogICAgX2FkZFVJQ29uZmlnKHR5cGUsIHdoZXJlLCB3aGVuLCBjb25maWcpIHsKICAgICAgICAvLyBGb3IgY29udmVuaWVuY2UgJ3doZW4nIGNhbiBiZSBhIHN0cmluZyB0byBpbmRpY2F0ZSBhIHJlc291cmNlLCBzbyBjb252ZXJ0IGl0IHRvIHRoZSBMb2NhdGlvbkNvbmZpZyBmb3JtYXQKICAgICAgICBjb25zdCBsb2NhdGlvbkNvbmZpZyA9ICh0eXBlb2Ygd2hlbiA9PT0gJ3N0cmluZycpID8geyByZXNvdXJjZTogd2hlbiB9IDogd2hlbjsKICAgICAgICB0aGlzLnVpQ29uZmlnW3R5cGVdW3doZXJlXSA9IHRoaXMudWlDb25maWdbdHlwZV1bd2hlcmVdIHx8IFtdOwogICAgICAgIHRoaXMudWlDb25maWdbdHlwZV1bd2hlcmVdLnB1c2goeyAuLi5jb25maWcsIGxvY2F0aW9uQ29uZmlnIH0pOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIGFuIGFjdGlvbi9idXR0b24gdG8gdGhlIFVJCiAgICAgKi8KICAgIGFkZEFjdGlvbih3aGVyZSwgd2hlbiwgYWN0aW9uKSB7CiAgICAgICAgdGhpcy5fYWRkVUlDb25maWcoRXh0ZW5zaW9uUG9pbnQuQUNUSU9OLCB3aGVyZSwgd2hlbiwgYWN0aW9uKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkcyBhIHRhYiB0byB0aGUgVUkKICAgICAqLwogICAgYWRkVGFiKHdoZXJlLCB3aGVuLCB0YWIpIHsKICAgICAgICB0aGlzLl9hZGRVSUNvbmZpZyhFeHRlbnNpb25Qb2ludC5UQUIsIHdoZXJlLCB3aGVuLCB0YWIpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIGEgcGFuZWwvY29tcG9uZW50IHRvIHRoZSBVSQogICAgICovCiAgICBhZGRQYW5lbCh3aGVyZSwgd2hlbiwgcGFuZWwpIHsKICAgICAgICB0aGlzLl9hZGRVSUNvbmZpZyhFeHRlbnNpb25Qb2ludC5QQU5FTCwgd2hlcmUsIHdoZW4sIHBhbmVsKTsKICAgIH0KICAgIC8qKgogICAgICogQWRkcyBhIGNhcmQgdG8gdGhlIHRvIHRoZSBVSQogICAgICovCiAgICBhZGRDYXJkKHdoZXJlLCB3aGVuLCBjYXJkKSB7CiAgICAgICAgdGhpcy5fYWRkVUlDb25maWcoRXh0ZW5zaW9uUG9pbnQuQ0FSRCwgd2hlcmUsIHdoZW4sIGNhcmQpOwogICAgfQogICAgLyoqCiAgICAgKiBBZGRzIGEgbmV3IGNvbHVtbiB0byBhIHRhYmxlIG9uIHRoZSBVSQogICAgICovCiAgICBhZGRUYWJsZUNvbHVtbih3aGVyZSwgd2hlbiwgY29sdW1uKSB7CiAgICAgICAgdGhpcy5fYWRkVUlDb25maWcoRXh0ZW5zaW9uUG9pbnQuVEFCTEVfQ09MLCB3aGVyZSwgd2hlbiwgY29sdW1uKTsKICAgIH0KICAgIHNldEhvbWVQYWdlKGNvbXBvbmVudCkgewogICAgICAgIHRoaXMuYWRkUm91dGUoewogICAgICAgICAgICBuYW1lOiAnaG9tZScsCiAgICAgICAgICAgIHBhdGg6ICcvaG9tZScsCiAgICAgICAgICAgIGNvbXBvbmVudAogICAgICAgIH0pOwogICAgfQogICAgYWRkVW5pbnN0YWxsSG9vayhob29rKSB7CiAgICAgICAgdGhpcy51bmluc3RhbGxIb29rcy5wdXNoKGhvb2spOwogICAgfQogICAgYWRkU3RvcmUoc3RvcmVOYW1lLCByZWdpc3RlciwgdW5yZWdpc3RlcikgewogICAgICAgIHRoaXMuc3RvcmVzLnB1c2goewogICAgICAgICAgICBzdG9yZU5hbWUsIHJlZ2lzdGVyLCB1bnJlZ2lzdGVyCiAgICAgICAgfSk7CiAgICB9CiAgICBhZGREYXNoYm9hcmRTdG9yZShzdG9yZU5hbWUsIHN0b3JlU3BlY2lmaWNzLCBjb25maWcsIGluaXQpIHsKICAgICAgICB0aGlzLnN0b3Jlcy5wdXNoKHsKICAgICAgICAgICAgc3RvcmVOYW1lLAogICAgICAgICAgICByZWdpc3RlcjogKCkgPT4gewogICAgICAgICAgICAgICAgcmV0dXJuIGNvcmVTdG9yZSh0aGlzLnN0b3JlRmFjdG9yeShzdG9yZVNwZWNpZmljcywgY29uZmlnKSwgY29uZmlnLCBpbml0KTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgdW5yZWdpc3RlcjogKHN0b3JlKSA9PiB7CiAgICAgICAgICAgICAgICBzdG9yZS51bnJlZ2lzdGVyTW9kdWxlKHN0b3JlTmFtZSk7CiAgICAgICAgICAgIH0KICAgICAgICB9KTsKICAgIH0KICAgIHN0b3JlRmFjdG9yeShzdG9yZVNwZWNpZmljcywgY29uZmlnKSB7CiAgICAgICAgcmV0dXJuIHsKICAgICAgICAgICAgLi4uY29yZVN0b3JlTW9kdWxlLAogICAgICAgICAgICBzdGF0ZSgpIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgLi4uY29yZVN0b3JlU3RhdGUoY29uZmlnLm5hbWVzcGFjZSwgY29uZmlnLmJhc2VVcmwsIGNvbmZpZy5pc0NsdXN0ZXJTdG9yZSksCiAgICAgICAgICAgICAgICAgICAgLi4uc3RvcmVTcGVjaWZpY3Muc3RhdGUoKQogICAgICAgICAgICAgICAgfTsKICAgICAgICAgICAgfSwKICAgICAgICAgICAgZ2V0dGVyczogewogICAgICAgICAgICAgICAgLi4uY29yZVN0b3JlTW9kdWxlLmdldHRlcnMsCiAgICAgICAgICAgICAgICAuLi5zdG9yZVNwZWNpZmljcy5nZXR0ZXJzCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIG11dGF0aW9uczogewogICAgICAgICAgICAgICAgLi4uY29yZVN0b3JlTW9kdWxlLm11dGF0aW9ucywKICAgICAgICAgICAgICAgIC4uLnN0b3JlU3BlY2lmaWNzLm11dGF0aW9ucwogICAgICAgICAgICB9LAogICAgICAgICAgICBhY3Rpb25zOiB7CiAgICAgICAgICAgICAgICAuLi5jb3JlU3RvcmVNb2R1bGUuYWN0aW9ucywKICAgICAgICAgICAgICAgIC4uLnN0b3JlU3BlY2lmaWNzLmFjdGlvbnMKICAgICAgICAgICAgfSwKICAgICAgICB9OwogICAgfQogICAgYWRkTmF2SG9va3Mob25FbnRlciA9ICgpID0+IFByb21pc2UucmVzb2x2ZSgpLCBvbkxlYXZlID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCksIG9uTG9nT3V0ID0gKCkgPT4gUHJvbWlzZS5yZXNvbHZlKCkpIHsKICAgICAgICB0aGlzLm9uRW50ZXIgPSBvbkVudGVyOwogICAgICAgIHRoaXMub25MZWF2ZSA9IG9uTGVhdmU7CiAgICAgICAgdGhpcy5fb25Mb2dPdXQgPSBvbkxvZ091dDsKICAgIH0KICAgIGFzeW5jIG9uTG9nT3V0KHN0b3JlKSB7CiAgICAgICAgYXdhaXQgUHJvbWlzZS5hbGwodGhpcy5zdG9yZXMubWFwKChzKSA9PiBzdG9yZS5kaXNwYXRjaChgJHtzLnN0b3JlTmFtZX0vb25Mb2dvdXRgKSkpOwogICAgICAgIGF3YWl0IHRoaXMuX29uTG9nT3V0KHN0b3JlKTsKICAgIH0KICAgIHJlZ2lzdGVyKHR5cGUsIG5hbWUsIGZuKSB7CiAgICAgICAgY29uc3QgbnBhcnRzID0gbmFtZS5zcGxpdCgnLycpOwogICAgICAgIC8vIFN1cHBvcnQgY29tcG9uZW50cyBpbiBhIHN1Yi1mb2xkZXIgLSBjb21wb25lbnRfbmFtZS9pbmRleC52dWUgKGFuZCBpZ25vcmUgb3RoZXIgY29tcG9ubmV0cyBpbiB0aGF0IGZvbGRlcikKICAgICAgICAvLyBBbGxvdyBzdG9yZS1zY29wZWQgbW9kZWxzIHZpYSBzdWItZm9sZGVyIC0gcGtnbmFtZS9tb2RlbHMvc3RvcmVuYW1lL3R5cGUgd2lsbCBiZSByZWdpc3RlcmVkIGFzIHN0b3JlbmFtZS90eXBlIHRvIGF2b2lkIG92ZXJ3cml0aW5nIHNoZWxsL21vZGVscy90eXBlCiAgICAgICAgaWYgKG5wYXJ0cy5sZW5ndGggPT09IDIgJiYgdHlwZSAhPT0gJ21vZGVscycpIHsKICAgICAgICAgICAgaWYgKG5wYXJ0c1sxXSAhPT0gJ2luZGV4JykgewogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CiAgICAgICAgICAgIG5hbWUgPSBucGFydHNbMF07CiAgICAgICAgfQogICAgICAgIC8vIEFjY3VtdWxhdGUgbDEwbiByZXNvdXJjZXMgcmF0aGVyIHRoYW4gcmVwbGFjZQogICAgICAgIGlmICh0eXBlID09PSAnbDEwbicpIHsKICAgICAgICAgICAgaWYgKCF0aGlzLmwxMG5bbmFtZV0pIHsKICAgICAgICAgICAgICAgIHRoaXMubDEwbltuYW1lXSA9IFtdOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHRoaXMubDEwbltuYW1lXS5wdXNoKGZuKTsKICAgICAgICB9CiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gJ2xheW91dHMnKSB7CiAgICAgICAgICAgIGZuKCkudGhlbigoY29tcG9uZW50KSA9PiB7CiAgICAgICAgICAgICAgICBpZiAoY29tcG9uZW50LmRlZmF1bHQpIHsKICAgICAgICAgICAgICAgICAgICByZWdpc3RlckxheW91dChuYW1lLCBjb21wb25lbnQuZGVmYXVsdCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gbG9hZCBsYXlvdXQgJHtuYW1lfSBiZWNhdXNlIHRoZSBmaWxlIGRpZG4ndCBleHBvcnQgYSBkZWZhdWx0IGNvbXBvbmVudC5gKTsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBuby1jb25zb2xlCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICBlbHNlIHsKICAgICAgICAgICAgaWYgKCF0aGlzLnR5cGVzW3R5cGVdKSB7CiAgICAgICAgICAgICAgICB0aGlzLnR5cGVzW3R5cGVdID0ge307CiAgICAgICAgICAgIH0KICAgICAgICAgICAgdGhpcy50eXBlc1t0eXBlXVtuYW1lXSA9IGZuOwogICAgICAgIH0KICAgIH0KfQo="},{"version":3,"file":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/core/plugin.ts","sourceRoot":"","sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/core/plugin.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { RouteConfig } from 'vue-router';\nimport { DSL as STORE_DSL } from '@shell/store/type-map';\nimport {\n  CoreStoreInit,\n  Action,\n  Tab,\n  Card,\n  Panel,\n  TableColumn,\n  IPlugin,\n  LocationConfig,\n  ExtensionPoint,\n\n  PluginRouteConfig, RegisterStore, UnregisterStore, CoreStoreSpecifics, CoreStoreConfig, OnNavToPackage, OnNavAwayFromPackage, OnLogOut\n} from './types';\nimport coreStore, { coreStoreModule, coreStoreState } from '@shell/plugins/dashboard-store';\nimport { registerLayout } from '@shell/initialize/layouts';\n\nexport type ProductFunction = (plugin: IPlugin, store: any) => void;\n\nexport class Plugin implements IPlugin {\n  public id: string;\n  public name: string;\n  public types: any = {};\n  public l10n: { [key: string]: Function[] } = {};\n  public locales: { locale: string, label: string}[] = [];\n  public products: ProductFunction[] = [];\n  public productNames: string[] = [];\n  public routes: { parent?: string, route: RouteConfig }[] = [];\n  public stores: { storeName: string, register: RegisterStore, unregister: UnregisterStore }[] = [];\n  public onEnter: OnNavToPackage = () => Promise.resolve();\n  public onLeave: OnNavAwayFromPackage = () => Promise.resolve();\n  public _onLogOut: OnLogOut = () => Promise.resolve();\n\n  public uiConfig: { [key: string]: any } = {};\n\n  // Plugin metadata (plugin package.json)\n  public _metadata: any = {};\n\n  public _validators: {[key:string]: Function } = {}\n\n  // Is this a built-in plugin (bundled with the application)\n  public builtin = false;\n\n  // Uninstall hooks\n  public uninstallHooks: Function[] = [];\n\n  constructor(id: string) {\n    this.id = id;\n    this.name = id;\n\n    // Initialize uiConfig for all of the possible enum values\n    Object.values(ExtensionPoint).forEach((v) => {\n      this.uiConfig[v] = {};\n    });\n  }\n\n  get metadata() {\n    return this._metadata;\n  }\n\n  set metadata(value) {\n    this._metadata = value;\n    this.name = this._metadata.name || this.id;\n  }\n\n  get version() {\n    return this._metadata.version;\n  }\n\n  get validators() {\n    return this._validators;\n  }\n\n  set validators(vals: {[key:string]: Function }) {\n    this._validators = vals;\n  }\n\n  // Track which products the plugin creates\n  DSL(store: any, productName: string) {\n    const storeDSL = STORE_DSL(store, productName);\n\n    this.productNames.push(productName);\n\n    return storeDSL;\n  }\n\n  addProduct(product: ProductFunction): void {\n    this.products.push(product);\n  }\n\n  addLocale(locale: string, label: string): void {\n    this.locales.push({ locale, label });\n  }\n\n  addL10n(locale: string, fn: Function) {\n    this.register('l10n', locale, fn);\n  }\n\n  addRoutes(routes: PluginRouteConfig[] | RouteConfig[]) {\n    routes.forEach((r: PluginRouteConfig | RouteConfig) => {\n      if (Object.keys(r).includes('parent')) {\n        const pConfig = r as PluginRouteConfig;\n\n        if (pConfig.parent) {\n          this.addRoute(pConfig.parent, pConfig.route);\n        } else {\n          this.addRoute(pConfig.route);\n        }\n      } else {\n        this.addRoute(r as RouteConfig);\n      }\n    });\n  }\n\n  addRoute(parentOrRoute: RouteConfig | string, optionalRoute?: RouteConfig): void {\n    // Always add the pkg name to the route metadata\n    const hasParent = typeof (parentOrRoute) === 'string';\n    const parent: string | undefined = hasParent ? parentOrRoute as string : undefined;\n    const route: RouteConfig = hasParent ? optionalRoute as RouteConfig : parentOrRoute as RouteConfig;\n\n    route.meta = {\n      ...route?.meta,\n      pkg: this.name,\n    };\n\n    this.routes.push({ parent, route });\n  }\n\n  private _addUIConfig(type: string, where: string, when: LocationConfig | string, config: any) {\n    // For convenience 'when' can be a string to indicate a resource, so convert it to the LocationConfig format\n    const locationConfig = (typeof when === 'string') ? { resource: when } : when;\n\n    this.uiConfig[type][where] = this.uiConfig[type][where] || [];\n    this.uiConfig[type][where].push({ ...config, locationConfig });\n  }\n\n  /**\n   * Adds an action/button to the UI\n   */\n  addAction(where: string, when: LocationConfig | string, action: Action): void {\n    this._addUIConfig(ExtensionPoint.ACTION, where, when, action);\n  }\n\n  /**\n   * Adds a tab to the UI\n   */\n  addTab(where: string, when: LocationConfig | string, tab: Tab): void {\n    this._addUIConfig(ExtensionPoint.TAB, where, when, tab);\n  }\n\n  /**\n   * Adds a panel/component to the UI\n   */\n  addPanel(where: string, when: LocationConfig | string, panel: Panel): void {\n    this._addUIConfig(ExtensionPoint.PANEL, where, when, panel);\n  }\n\n  /**\n   * Adds a card to the to the UI\n   */\n  addCard( where: string, when: LocationConfig | string, card: Card): void {\n    this._addUIConfig(ExtensionPoint.CARD, where, when, card);\n  }\n\n  /**\n   * Adds a new column to a table on the UI\n   */\n  addTableColumn(where: string, when: LocationConfig | string, column: TableColumn): void {\n    this._addUIConfig(ExtensionPoint.TABLE_COL, where, when, column);\n  }\n\n  setHomePage(component: any) {\n    this.addRoute({\n      name: 'home',\n      path: '/home',\n      component\n    });\n  }\n\n  addUninstallHook(hook: Function) {\n    this.uninstallHooks.push(hook);\n  }\n\n  addStore(storeName: string, register: RegisterStore, unregister: UnregisterStore) {\n    this.stores.push({\n      storeName, register, unregister\n    });\n  }\n\n  addDashboardStore(storeName: string, storeSpecifics: CoreStoreSpecifics, config: CoreStoreConfig, init?: CoreStoreInit) {\n    this.stores.push({\n      storeName,\n      register: () => {\n        return coreStore(\n          this.storeFactory(storeSpecifics, config),\n          config,\n          init,\n        );\n      },\n      unregister: (store: any) => {\n        store.unregisterModule(storeName);\n      }\n    });\n  }\n\n  private storeFactory(storeSpecifics: CoreStoreSpecifics, config: CoreStoreConfig) {\n    return {\n      ...coreStoreModule,\n\n      state() {\n        return {\n          ...coreStoreState(config.namespace, config.baseUrl, config.isClusterStore),\n          ...storeSpecifics.state()\n        };\n      },\n\n      getters: {\n        ...coreStoreModule.getters,\n        ...storeSpecifics.getters\n      },\n\n      mutations: {\n        ...coreStoreModule.mutations,\n        ...storeSpecifics.mutations\n      },\n\n      actions: {\n        ...coreStoreModule.actions,\n        ...storeSpecifics.actions\n      },\n    };\n  }\n\n  public addNavHooks(\n    onEnter: OnNavToPackage = () => Promise.resolve(),\n    onLeave: OnNavAwayFromPackage = () => Promise.resolve(),\n    onLogOut: OnLogOut = () => Promise.resolve(),\n  ): void {\n    this.onEnter = onEnter;\n    this.onLeave = onLeave;\n    this._onLogOut = onLogOut;\n  }\n\n  public async onLogOut(store: any) {\n    await Promise.all(this.stores.map((s: any) => store.dispatch(`${ s.storeName }/onLogout`)));\n\n    await this._onLogOut(store);\n  }\n\n  public register(type: string, name: string, fn: Function) {\n    const nparts = name.split('/');\n\n    // Support components in a sub-folder - component_name/index.vue (and ignore other componnets in that folder)\n    // Allow store-scoped models via sub-folder - pkgname/models/storename/type will be registered as storename/type to avoid overwriting shell/models/type\n    if (nparts.length === 2 && type !== 'models') {\n      if (nparts[1] !== 'index') {\n        return;\n      }\n      name = nparts[0];\n    }\n\n    // Accumulate l10n resources rather than replace\n    if (type === 'l10n') {\n      if (!this.l10n[name]) {\n        this.l10n[name] = [];\n      }\n\n      this.l10n[name].push(fn);\n    } else if (type === 'layouts') {\n      fn().then((component: any) => {\n        if (component.default) {\n          registerLayout(name, component.default);\n        } else {\n          console.error(`Failed to load layout ${ name } because the file didn't export a default component.`); // eslint-disable-line no-console\n        }\n      });\n    } else {\n      if (!this.types[type]) {\n        this.types[type] = {};\n      }\n      this.types[type][name] = fn;\n    }\n  }\n}\n"]}]}