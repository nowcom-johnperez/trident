{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/validators/formRules/index.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/validators/formRules/index.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgUkJBQyB9IGZyb20gJ0BzaGVsbC9jb25maWcvdHlwZXMnOwppbXBvcnQgeyBIQ0kgfSBmcm9tICdAc2hlbGwvY29uZmlnL2xhYmVscy1hbm5vdGF0aW9ucyc7CmltcG9ydCBpc0VtcHR5IGZyb20gJ2xvZGFzaC9pc0VtcHR5JzsKaW1wb3J0IGhhcyBmcm9tICdsb2Rhc2gvaGFzJzsKLy8gaW1wb3J0IHVuaXEgZnJvbSAnbG9kYXNoL3VuaXEnOwppbXBvcnQgY3JvbnN0cnVlIGZyb20gJ2Nyb25zdHJ1ZSc7CmV4cG9ydCBjbGFzcyBQb3J0IHsKICAgIGNvbnN0cnVjdG9yKHBvcnQpIHsKICAgICAgICB0aGlzLnN0cmluZyA9IFN0cmluZyhwb3J0KTsKICAgICAgICB0aGlzLmludCA9IHBhcnNlSW50KHRoaXMuc3RyaW5nLCAxMCk7CiAgICAgICAgdGhpcy5lbXB0eSA9ICghcG9ydCAmJiB0aGlzLmludCAhPT0gMCk7CiAgICAgICAgdGhpcy5pc051bWJlciA9ICFpc05hTih0aGlzLmludCkgJiYgIXRoaXMuc3RyaW5nLmluY2x1ZGVzKCdlJyk7IC8vIGxlYXZpbmcgb3V0IHRoZSBleHBvbmVudCBlZGdlIGNhc2UgdG8ga2VlcCB0aGUgbG9naWMgc2ltcGxlIGFuZCBiZWNhdXNlIHBvcnQgbnVtYmVycyBhcmVuJ3QgdGhhdCBiaWcuLi4KICAgICAgICB0aGlzLmlzSW50ID0gdGhpcy5pc051bWJlciAmJiAhdGhpcy5zdHJpbmcuaW5jbHVkZXMoJy4nKTsKICAgIH0KfQpjb25zdCBodHRwc0tleXMgPSBbCiAgICAnc2VydmVyLXVybCcKXTsKY29uc3QgcnVuVmFsaWRhdG9ycyA9ICh2YWwsIHZhbGlkYXRvcnMpID0+IHsKICAgIGZvciAoY29uc3QgdmFsaWRhdG9yIG9mIHZhbGlkYXRvcnMpIHsKICAgICAgICBjb25zdCBtZXNzYWdlID0gdmFsaWRhdG9yKHZhbCk7CiAgICAgICAgaWYgKG1lc3NhZ2UpIHsKICAgICAgICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICAgICAgfQogICAgfQp9OwovLyAidCIgaXMgdGhlIGZ1bmN0aW9uIG5hbWUgd2UgdXNlIGZvciBnZXR0aW5nIGEgdHJhbnNsYXRlZCBzdHJpbmcKZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gKHQsIHsga2V5ID0gJ1ZhbHVlJyB9KSB7CiAgICAvLyB1dGlsaXR5IHZhbGlkYXRvcnMgdGhlc2UgdmFsaWRhdG9ycyBvbmx5IGdldCB1c2VkIGJ5IG90aGVyIHZhbGlkYXRvcnMKICAgIGNvbnN0IHN0YXJ0RG90ID0gKGxhYmVsKSA9PiAodmFsKSA9PiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnNsaWNlKDAsIDEpKSA9PT0gJy4nID8gdChgdmFsaWRhdGlvbi5kbnMuJHtsYWJlbH0uc3RhcnREb3RgLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGVuZERvdCA9IChsYWJlbCkgPT4gKHZhbCkgPT4gKHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5zbGljZSgtMSkpID09PSAnLicgPyB0KGB2YWxpZGF0aW9uLmRucy4ke2xhYmVsfS5lbmREb3RgLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IHN0YXJ0TnVtYmVyID0gKGxhYmVsKSA9PiAodmFsKSA9PiB7IHZhciBfYTsgcmV0dXJuICgoX2EgPSB2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc2xpY2UoMCwgMSkpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXRjaCgvWzAtOV0vKSkgPyB0KGB2YWxpZGF0aW9uLmRucy4ke2xhYmVsfS5zdGFydE51bWJlcmAsIHsga2V5IH0pIDogdW5kZWZpbmVkOyB9OwogICAgY29uc3Qgc3RhcnRIeXBoZW4gPSAobGFiZWwpID0+ICh2YWwpID0+ICh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc2xpY2UoMCwgMSkpID09PSAnLScgPyB0KGB2YWxpZGF0aW9uLmRucy4ke2xhYmVsfS5zdGFydEh5cGhlbmAsIHsga2V5IH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgZW5kSHlwaGVuID0gKGxhYmVsKSA9PiAodmFsKSA9PiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnNsaWNlKC0xKSkgPT09ICctJyA/IHQoYHZhbGlkYXRpb24uZG5zLiR7bGFiZWx9LmVuZEh5cGhlbmAsIHsga2V5IH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgbWluVmFsdWUgPSAobWluKSA9PiAodmFsKSA9PiBOdW1iZXIodmFsKSA8IE51bWJlcihtaW4pID8gdCgndmFsaWRhdGlvbi5taW5WYWx1ZScsIHsga2V5LCBtaW4gfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBtYXhWYWx1ZSA9IChtYXgpID0+ICh2YWwpID0+IE51bWJlcih2YWwpID4gTnVtYmVyKG1heCkgPyB0KCd2YWxpZGF0aW9uLm1heFZhbHVlJywgeyBrZXksIG1heCB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGJldHdlZW5WYWx1ZXMgPSAoW21pbiwgbWF4XSkgPT4gKHZhbCkgPT4gbWluVmFsdWUobWluKSh2YWwpIHx8IG1heFZhbHVlKG1heCkodmFsKSA/IHQoJ3ZhbGlkYXRpb24uYmV0d2VlblZhbHVlcycsIHsKICAgICAgICBrZXksIG1pbiwgbWF4CiAgICB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IG1pbkxlbmd0aCA9IChtaW4pID0+ICh2YWwpID0+IHZhbC5sZW5ndGggPCBOdW1iZXIobWluKSA/IHQoJ3ZhbGlkYXRpb24ubWluTGVuZ3RoJywgeyBrZXksIG1pbiB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IG1heExlbmd0aCA9IChtYXgpID0+ICh2YWwpID0+IHZhbC5sZW5ndGggPiBOdW1iZXIobWF4KSA/IHQoJ3ZhbGlkYXRpb24ubWF4TGVuZ3RoJywgeyBrZXksIG1heCB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGJldHdlZW5MZW5ndGhzID0gKFttaW4sIG1heF0pID0+ICh2YWwpID0+IG1pbkxlbmd0aChtaW4pKHZhbCkgfHwgbWF4TGVuZ3RoKG1heCkodmFsKSA/IHQoJ3ZhbGlkYXRpb24uYmV0d2Vlbkxlbmd0aHMnLCB7CiAgICAgICAga2V5LCBtaW4sIG1heAogICAgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCByZXF1aXJlZEludCA9ICh2YWwpID0+IGlzTmFOKHBhcnNlSW50KHZhbCwgMTApKSA/IHQoJ3ZhbGlkYXRpb24ubnVtYmVyLnJlcXVpcmVkSW50JywgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBpc0ludGVnZXIgPSAodmFsKSA9PiAhTnVtYmVyLmlzSW50ZWdlcigrdmFsKSB8fCBgJHt2YWx9YC5tYXRjaCgvXC4rL2cpID8gdCgndmFsaWRhdGlvbi5udW1iZXIucmVxdWlyZWRJbnQnLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGlzUG9zaXRpdmUgPSAodmFsKSA9PiArdmFsIDwgMCA/IHQoJ3ZhbGlkYXRpb24ubnVtYmVyLmlzUG9zaXRpdmUnLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGlzT2N0YWwgPSAodmFsKSA9PiB7CiAgICAgICAgY29uc3QgdmFsdWVTdHJpbmcgPSBgJHt2YWx9YDsKICAgICAgICBjb25zdCBpc1ZhbGlkID0gdmFsdWVTdHJpbmcubWF0Y2goLyheMCspKC4rKS8pOwogICAgICAgIHJldHVybiBpc1ZhbGlkID8gdCgndmFsaWRhdGlvbi5udW1iZXIuaXNPY3RhbCcsIHsga2V5IH0pIDogdW5kZWZpbmVkOwogICAgfTsKICAgIGNvbnN0IHBvcnROdW1iZXIgPSAodmFsKSA9PiBwYXJzZUludCh2YWwsIDEwKSA8IDEgfHwgcGFyc2VJbnQodmFsLCAxMCkgPiA2NTUzNSA/IHQoJ3ZhbGlkYXRpb24ubnVtYmVyLmJldHdlZW4nLCB7CiAgICAgICAga2V5LCBtaW46ICcxJywgbWF4OiAnNjU1MzUnCiAgICB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGRuc0NoYXJzID0gKHZhbCkgPT4gewogICAgICAgIGNvbnN0IG1hdGNoZWRDaGFycyA9IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5tYXRjaCgvW14keydBLVphLXowLTktJ31dL2cpOwogICAgICAgIGlmIChtYXRjaGVkQ2hhcnMpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uY2hhcnMnLCB7CiAgICAgICAgICAgICAgICBrZXksIGNvdW50OiBtYXRjaGVkQ2hhcnMubGVuZ3RoLCBjaGFyczogbWF0Y2hlZENoYXJzLm1hcCgoY2hhcikgPT4gY2hhciA9PT0gJyAnID8gJ1NwYWNlJyA6IGAiJHtjaGFyfSJgKS5qb2luKCcsICcpCiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfTsKICAgIC8vIHRoZSB3ZWlyZCBlZGdlIGNhc2UgaGVyZSBkZWFscyB3aXRoIGludGVybmF0aW9uYWxpemVkIGRvbWFpbiBuYW1lcyB3aGljaCBhcmUgcHJlcGVuZGVkIHdpdGggJ3huLS0nCiAgICAvLyBodHRwczovL2RhdGF0cmFja2VyLmlldGYub3JnL2RvYy9odG1sL3JmYzU4OTEjc2VjdGlvbi00LjIuMy4xCiAgICBjb25zdCBkbnNEb3VibGVEYXNoID0gKHZhbCkgPT4gKCh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc3Vic3RyKDIsIDIpKSA9PT0gJy0tJyAmJiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnN1YnN0cigwLCAyKSkgIT09ICd4bicpID8gdChgdmFsaWRhdGlvbi5kbnMuZG91YmxlSHlwaGVuYCwgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBkbnNJYW5hU2VydmljZU5hbWVEb3VibGVEYXNoID0gKHZhbCkgPT4gKCh2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuc3Vic3RyKDIsIDIpKSA9PT0gJy0tJyAmJiAodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLnN1YnN0cigwLCAyKSkgIT09ICd4bicpID8gdChgdmFsaWRhdGlvbi5kbnMuZG91YmxlSHlwaGVuYCwgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBkbnNFbXB0eSA9IChsYWJlbCkgPT4gKHZhbCA9ICcnKSA9PiB2YWwubGVuZ3RoID09PSAwID8gdChgdmFsaWRhdGlvbi5kbnMuJHtsYWJlbH0uZW1wdHlMYWJlbGAsIHsga2V5LCBtaW46IDEgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBkbnNUb29Mb25nID0gKGxhYmVsLCBsZW5ndGggPSA2MykgPT4gKHZhbCA9ICcnKSA9PiB2YWwubGVuZ3RoID4gbGVuZ3RoID8gdChgdmFsaWRhdGlvbi5kbnMuJHtsYWJlbH0udG9vTG9uZ0xhYmVsYCwgeyBrZXksIG1heDogbGVuZ3RoIH0pIDogdW5kZWZpbmVkOwogICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLXVudXNlZC12YXJzCiAgICBjb25zdCBob3N0bmFtZUVtcHR5ID0gKHZhbCA9ICcnKSA9PiB2YWwubGVuZ3RoID09PSAwID8gdCgndmFsaWRhdGlvbi5kbnMuaG9zdG5hbWUuZW1wdHknLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IGhvc3RuYW1lVG9vTG9uZyA9ICh2YWwgPSAnJykgPT4gdmFsLmxlbmd0aCA+IDI1MyA/IHQoJ3ZhbGlkYXRpb24uZG5zLmhvc3RuYW1lLnRvb0xvbmcnLCB7IGtleSwgbWF4OiAyNTMgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBhYnNvbHV0ZVBhdGggPSAodmFsID0gJycpID0+IHZhbFswXSAhPT0gJy8nICYmIHZhbC5sZW5ndGggPiAwID8gdCgndmFsaWRhdGlvbi5wYXRoJywgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCByZXF1aXJlZCA9ICh2YWwpID0+ICF2YWwgJiYgdmFsICE9PSBmYWxzZSA/IHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7IGtleSB9KSA6IHVuZGVmaW5lZDsKICAgIGNvbnN0IG5vVXBwZXJDYXNlID0gKHZhbCA9ICcnKSA9PiB2YWwudG9Mb3dlckNhc2UoKSAhPT0gdmFsID8gdCgndmFsaWRhdGlvbi5ub1VwcGVyQ2FzZScsIHsga2V5IH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgY3JvblNjaGVkdWxlID0gKHZhbCkgPT4gewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGNyb25zdHJ1ZS50b1N0cmluZyh2YWwpOwogICAgICAgIH0KICAgICAgICBjYXRjaCAoZSkgewogICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5pbnZhbGlkQ3JvbicpOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCBpc0h0dHBzID0gKGtleSkgPT4gewogICAgICAgIGNvbnN0IGlzSHR0cHMgPSAodmFsKSA9PiBodHRwc0tleXMuaW5jbHVkZXMoa2V5KSAmJiAhdmFsLnRvTG93ZXJDYXNlKCkuc3RhcnRzV2l0aCgnaHR0cHM6Ly8nKSA/IHQoJ3ZhbGlkYXRpb24uc2V0dGluZy5zZXJ2ZXJVcmwuaHR0cHMnKSA6IHVuZGVmaW5lZDsKICAgICAgICByZXR1cm4gaXNIdHRwczsKICAgIH07CiAgICBjb25zdCBpbnRlcnZhbCA9ICh2YWwpID0+ICEvXlxkK1tobXNdJC8udGVzdCh2YWwpID8gdCgndmFsaWRhdGlvbi5tb25pdG9yaW5nLnJvdXRlLmludGVydmFsJywgeyBrZXkgfSkgOiB1bmRlZmluZWQ7CiAgICBjb25zdCBjb250YWluZXJJbWFnZSA9ICh2YWwpID0+ICEodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLmltYWdlKSA/IHQoJ3dvcmtsb2FkLnZhbGlkYXRpb24uY29udGFpbmVySW1hZ2UnLCB7IG5hbWU6IHZhbC5uYW1lIH0pIDogdW5kZWZpbmVkOwogICAgY29uc3QgY29udGFpbmVySW1hZ2VzID0gKHZhbCkgPT4gewogICAgICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mOwogICAgICAgIGNvbnN0IGNvbnRhaW5lcnMgPSB2YWwuam9iVGVtcGxhdGUgPyAoX2QgPSAoX2MgPSAoX2IgPSAoX2EgPSB2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwuam9iVGVtcGxhdGUpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5zcGVjKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IudGVtcGxhdGUpID09PSBudWxsIHx8IF9jID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYy5zcGVjKSA9PT0gbnVsbCB8fCBfZCA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2QuY29udGFpbmVycyA6IChfZiA9IChfZSA9IHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC50ZW1wbGF0ZSkgPT09IG51bGwgfHwgX2UgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9lLnNwZWMpID09PSBudWxsIHx8IF9mID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfZi5jb250YWluZXJzOwogICAgICAgIGlmICghY29udGFpbmVycyB8fCAhY29udGFpbmVycy5sZW5ndGgpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7IGtleTogdCgnd29ya2xvYWQuY29udGFpbmVyLnRpdGxlcy5jb250YWluZXJzJykgfSk7CiAgICAgICAgfQogICAgICAgIC8vIG1ha2luZyBzdXJlIGVhY2ggY29udGFpbmVyIGhhcyBhbiBpbWFnZSBuYW1lCiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcnMubWFwKChjb250YWluZXIpID0+IGNvbnRhaW5lckltYWdlKGNvbnRhaW5lcikpLmZpbmQoKGNvbnRhaW5lckVycm9yKSA9PiBjb250YWluZXJFcnJvcik7CiAgICB9OwogICAgY29uc3QgZG5zTGFiZWwgPSAodmFsKSA9PiB7CiAgICAgICAgY29uc3QgdmFsaWRhdG9ycyA9IFsKICAgICAgICAgICAgZG5zQ2hhcnMsCiAgICAgICAgICAgIHN0YXJ0SHlwaGVuKCdsYWJlbCcpLAogICAgICAgICAgICBlbmRIeXBoZW4oJ2xhYmVsJyksCiAgICAgICAgICAgIGRuc0RvdWJsZURhc2gsCiAgICAgICAgICAgIC8vIGRuc0VtcHR5KCdsYWJlbCcpLCAvLyBxdWVzdGlvbmFibGUgYXMgdG8gaWYgdGhpcyBpcyBuZWVkZWQgaWYgdGhlIGZpZWxkIGlzIGFsc28gcmVxdWlyZWQuLi4KICAgICAgICAgICAgZG5zVG9vTG9uZygnbGFiZWwnKQogICAgICAgIF07CiAgICAgICAgcmV0dXJuIHJ1blZhbGlkYXRvcnModmFsLCB2YWxpZGF0b3JzKTsKICAgIH07CiAgICBjb25zdCBkbnNMYWJlbElhbmFTZXJ2aWNlTmFtZSA9ICh2YWwpID0+IHsKICAgICAgICBjb25zdCB2YWxpZGF0b3JzID0gWwogICAgICAgICAgICBkbnNDaGFycywKICAgICAgICAgICAgc3RhcnRIeXBoZW4oJ2xhYmVsJyksCiAgICAgICAgICAgIGVuZEh5cGhlbignbGFiZWwnKSwKICAgICAgICAgICAgZG5zSWFuYVNlcnZpY2VOYW1lRG91YmxlRGFzaCwKICAgICAgICAgICAgZG5zRW1wdHkoJ2xhYmVsJyksCiAgICAgICAgICAgIGRuc1Rvb0xvbmcoJ2xhYmVsJywgMTUpCiAgICAgICAgXTsKICAgICAgICByZXR1cm4gcnVuVmFsaWRhdG9ycyh2YWwsIHZhbGlkYXRvcnMpOwogICAgfTsKICAgIGNvbnN0IGRuc0xhYmVsUmVzdHJpY3RlZCA9ICh2YWwpID0+IHsKICAgICAgICBjb25zdCB2YWxpZGF0b3JzID0gWwogICAgICAgICAgICBkbnNDaGFycywKICAgICAgICAgICAgc3RhcnROdW1iZXIoJ2xhYmVsJyksCiAgICAgICAgICAgIHN0YXJ0SHlwaGVuKCdsYWJlbCcpLAogICAgICAgICAgICBlbmRIeXBoZW4oJ2xhYmVsJyksCiAgICAgICAgICAgIGRuc0RvdWJsZURhc2gsCiAgICAgICAgICAgIGRuc0VtcHR5KCdsYWJlbCcpLAogICAgICAgICAgICBkbnNUb29Mb25nKCdsYWJlbCcpCiAgICAgICAgXTsKICAgICAgICByZXR1cm4gcnVuVmFsaWRhdG9ycyh2YWwsIHZhbGlkYXRvcnMpOwogICAgfTsKICAgIGNvbnN0IGhvc3RuYW1lID0gKHZhbCkgPT4gewogICAgICAgIGlmICh2YWwpIHsKICAgICAgICAgICAgY29uc3QgdmFsaWRhdG9ycyA9IFsKICAgICAgICAgICAgICAgIHN0YXJ0RG90KCdob3N0bmFtZScpLAogICAgICAgICAgICAgICAgaG9zdG5hbWVUb29Mb25nLAogICAgICAgICAgICAgICAgZW5kRG90KCdob3N0bmFtZScpCiAgICAgICAgICAgIF07CiAgICAgICAgICAgIGNvbnN0IGhvc3ROYW1lTWVzc2FnZSA9IHJ1blZhbGlkYXRvcnModmFsLCB2YWxpZGF0b3JzKTsKICAgICAgICAgICAgaWYgKGhvc3ROYW1lTWVzc2FnZSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGhvc3ROYW1lTWVzc2FnZTsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBsYWJlbHMgPSB2YWwuc3BsaXQoJy4nKTsKICAgICAgICAgICAgY29uc3QgbGFiZWxWYWxpZGF0b3JzID0gWwogICAgICAgICAgICAgICAgZG5zQ2hhcnMsCiAgICAgICAgICAgICAgICBzdGFydEh5cGhlbignaG9zdG5hbWUnKSwKICAgICAgICAgICAgICAgIGVuZEh5cGhlbignaG9zdG5hbWUnKSwKICAgICAgICAgICAgICAgIGRuc0RvdWJsZURhc2gsCiAgICAgICAgICAgICAgICBkbnNFbXB0eSgnaG9zdG5hbWUnKSwKICAgICAgICAgICAgICAgIGRuc1Rvb0xvbmcoJ2hvc3RuYW1lJykKICAgICAgICAgICAgXTsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsYWJlbHMubGVuZ3RoOyBpKyspIHsKICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsTWVzc2FnZSA9IHJ1blZhbGlkYXRvcnMobGFiZWxzW2ldLCBsYWJlbFZhbGlkYXRvcnMpOwogICAgICAgICAgICAgICAgaWYgKGxhYmVsTWVzc2FnZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBsYWJlbE1lc3NhZ2U7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9OwogICAgY29uc3Qgd2lsZGNhcmRIb3N0bmFtZSA9ICh2YWwpID0+IHsKICAgICAgICAvLyBhbGxvdyB3aWxkY2FyZCBpbiBmaXJzdCBwYXJ0IG9mIGhvc3RuYW1lCiAgICAgICAgdmFsID0gdmFsID8gdmFsLnJlcGxhY2UoL15cKlwuLywgJycpIDogdmFsOwogICAgICAgIHJldHVybiBob3N0bmFtZSh2YWwpOwogICAgfTsKICAgIGNvbnN0IGV4dGVybmFsTmFtZSA9ICh2YWwpID0+IHsKICAgICAgICBpZiAoaXNFbXB0eSh2YWwpKSB7CiAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UuZXh0ZXJuYWxOYW1lLm5vbmUnKTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiBob3N0bmFtZSh2YWwpOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCB0ZXN0UnVsZSA9ICh2YWwpID0+IHsKICAgICAgICByZXR1cm4gJ1RoaXMgaXMgYW4gZXJyb3IgcmV0dXJuZWQgYnkgdGhlIHRlc3RSdWxlIHZhbGlkYXRvcic7CiAgICB9OwogICAgY29uc3QgcnVsZUdyb3VwcyA9ICh2YWwpID0+IGlzRW1wdHkodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLmdyb3VwcykgPyB0KCd2YWxpZGF0aW9uLnByb21ldGhldXNSdWxlLmdyb3Vwcy5yZXF1aXJlZCcpIDogdW5kZWZpbmVkOwogICAgY29uc3QgY2x1c3Rlck5hbWUgPSAoaXNSa2UyKSA9PiAodmFsKSA9PiB7IHZhciBfYTsgcmV0dXJuIGlzUmtlMiAmJiAoKF9hID0gKHZhbCB8fCAnJykpID09PSBudWxsIHx8IF9hID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfYS5tYXRjaCgvXihjLS57NX18bG9jYWwpJC9pKSkgPyB0KCd2YWxpZGF0aW9uLmNsdXN0ZXIubmFtZScpIDogdW5kZWZpbmVkOyB9OwogICAgY29uc3Qgc2VydmljZVBvcnQgPSAodmFsKSA9PiB7CiAgICAgICAgdmFyIF9hOwogICAgICAgIGNvbnN0IHsgbmFtZSwgaWR4IH0gPSB2YWw7CiAgICAgICAgY29uc3Qgbm9kZVBvcnQgPSBuZXcgUG9ydCh2YWwubm9kZVBvcnQpOwogICAgICAgIGNvbnN0IGxpc3RlbmluZ1BvcnQgPSBuZXcgUG9ydCh2YWwucG9ydCk7CiAgICAgICAgY29uc3QgdGFyZ2V0UG9ydCA9IG5ldyBQb3J0KHZhbC50YXJnZXRQb3J0KTsKICAgICAgICBpZiAoaXNFbXB0eShuYW1lKSkgewogICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLnBvcnRzLm5hbWUucmVxdWlyZWQnLCB7IHBvc2l0aW9uOiBpZHggKyAxIH0pOwogICAgICAgIH0KICAgICAgICBpZiAoIW5vZGVQb3J0LmVtcHR5KSB7CiAgICAgICAgICAgIGlmICghbm9kZVBvcnQuaXNJbnQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMubm9kZVBvcnQucmVxdWlyZWRJbnQnLCB7IHBvc2l0aW9uOiBpZHggKyAxIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKG5vZGVQb3J0LmludCA8IDEgfHwgbm9kZVBvcnQuaW50ID4gNjU1MzUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMubm9kZVBvcnQuYmV0d2VlbicsIHsgcG9zaXRpb246IGlkeCArIDEgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgaWYgKCFsaXN0ZW5pbmdQb3J0LmVtcHR5KSB7CiAgICAgICAgICAgIGlmICghbGlzdGVuaW5nUG9ydC5pc0ludCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5wb3J0cy5wb3J0LnJlcXVpcmVkSW50JywgeyBwb3NpdGlvbjogaWR4ICsgMSB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIGlmIChsaXN0ZW5pbmdQb3J0LmludCA8IDEgfHwgbGlzdGVuaW5nUG9ydC5pbnQgPiA2NTUzNSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uc2VydmljZS5wb3J0cy5wb3J0LmJldHdlZW4nLCB7IHBvc2l0aW9uOiBpZHggKyAxIH0pOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKChfYSA9IGxpc3RlbmluZ1BvcnQuc3RyaW5nKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EuaW5jbHVkZXMoJy4nKSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGxpc3RlbmluZ1BvcnQ7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMucG9ydC5yZXF1aXJlZCcsIHsgcG9zaXRpb246IGlkeCArIDEgfSk7CiAgICAgICAgfQogICAgICAgIGlmICghdGFyZ2V0UG9ydC5lbXB0eSkgewogICAgICAgICAgICBpZiAoIXRhcmdldFBvcnQuaXNJbnQpIHsKICAgICAgICAgICAgICAgIGNvbnN0IGlhbmFTZXJ2aWNlTmFtZUVycm9ycyA9IGRuc0xhYmVsSWFuYVNlcnZpY2VOYW1lKHRhcmdldFBvcnQuc3RyaW5nKTsKICAgICAgICAgICAgICAgIGlmIChpYW5hU2VydmljZU5hbWVFcnJvcnMpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gaWFuYVNlcnZpY2VOYW1lRXJyb3JzOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgaWYgKHRhcmdldFBvcnQuaW50IDwgMSB8fCB0YXJnZXRQb3J0LmludCA+IDY1NTM1KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5zZXJ2aWNlLnBvcnRzLnRhcmdldFBvcnQuYmV0d2VlbicsIHsgcG9zaXRpb246IGlkeCArIDEgfSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnNlcnZpY2UucG9ydHMudGFyZ2V0UG9ydC5yZXF1aXJlZCcsIHsgcG9zaXRpb246IGlkeCArIDEgfSk7CiAgICAgICAgfQogICAgICAgIHJldHVybiB1bmRlZmluZWQ7CiAgICB9OwogICAgY29uc3QgZ3JvdXBJc1ZhbGlkID0gKHZhbCwgcmVhZGFibGVJbmRleCkgPT4gewogICAgICAgIGxldCByZXR1cm5NZXNzYWdlOwogICAgICAgIGlmIChpc0VtcHR5KHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbC5uYW1lKSkgewogICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5wcm9tZXRoZXVzUnVsZS5ncm91cHMudmFsaWQubmFtZScsIHsgaW5kZXg6IHJlYWRhYmxlSW5kZXggfSk7CiAgICAgICAgfQogICAgICAgIGlmIChpc0VtcHR5KHZhbC5ydWxlcykpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnZhbGlkLnNpbmdsZUVudHJ5JywgeyBpbmRleDogcmVhZGFibGVJbmRleCB9KTsKICAgICAgICB9CiAgICAgICAgZWxzZSB7CiAgICAgICAgICAgIHZhbC5ydWxlcy5mb3JFYWNoKChydWxlLCBpZHgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IHJlYWRhYmxlUnVsZUluZGV4ID0gaWR4ICsgMTsKICAgICAgICAgICAgICAgIGlmIChoYXMocnVsZSwgJ2FsZXJ0JykgJiYgaXNFbXB0eShydWxlID09PSBudWxsIHx8IHJ1bGUgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHJ1bGUuYWxlcnQpICYmICFyZXR1cm5NZXNzYWdlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuTWVzc2FnZSA9IHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnZhbGlkLnJ1bGUuYWxlcnROYW1lJywgeyBncm91cEluZGV4OiByZWFkYWJsZUluZGV4LCBydWxlSW5kZXg6IHJlYWRhYmxlUnVsZUluZGV4IH0pOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgZWxzZSBpZiAoaGFzKHJ1bGUsICdyZWNvcmQnKSAmJiBpc0VtcHR5KHJ1bGUgPT09IG51bGwgfHwgcnVsZSA9PT0gdm9pZCAwID8gdm9pZCAwIDogcnVsZS5yZWNvcmQpKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuTWVzc2FnZSA9IHQoJ3ZhbGlkYXRpb24ucHJvbWV0aGV1c1J1bGUuZ3JvdXBzLnZhbGlkLnJ1bGUucmVjb3JkTmFtZScsIHsgZ3JvdXBJbmRleDogcmVhZGFibGVJbmRleCwgcnVsZUluZGV4OiByZWFkYWJsZVJ1bGVJbmRleCB9KTsKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIGlmICgoaGFzKHJ1bGUsICdleHByJykgJiYgaXNFbXB0eShydWxlLmV4cHIpICYmICFyZXR1cm5NZXNzYWdlKSB8fCAoIWhhcyhydWxlLCAnZXhwcicpICYmICFyZXR1cm5NZXNzYWdlKSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybk1lc3NhZ2UgPSB0KCd2YWxpZGF0aW9uLnByb21ldGhldXNSdWxlLmdyb3Vwcy52YWxpZC5ydWxlLmV4cHInLCB7IGdyb3VwSW5kZXg6IHJlYWRhYmxlSW5kZXgsIHJ1bGVJbmRleDogcmVhZGFibGVSdWxlSW5kZXggfSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICBpZiAoaGFzKHJ1bGUsICdhbGVydCcpKSB7CiAgICAgICAgICAgICAgICAgICAgaWYgKChoYXMocnVsZSwgJ2xhYmVscycpICYmIGlzRW1wdHkocnVsZS5sYWJlbHMpICYmICFyZXR1cm5NZXNzYWdlKSB8fAogICAgICAgICAgICAgICAgICAgICAgICAoIWhhcyhydWxlLCAnbGFiZWxzJykgJiYgIXJldHVybk1lc3NhZ2UpKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybk1lc3NhZ2UgPSB0KCd2YWxpZGF0aW9uLnByb21ldGhldXNSdWxlLmdyb3Vwcy52YWxpZC5ydWxlLmxhYmVscycsIHsgZ3JvdXBJbmRleDogcmVhZGFibGVJbmRleCwgcnVsZUluZGV4OiByZWFkYWJsZVJ1bGVJbmRleCB9KTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICByZXR1cm4gcmV0dXJuTWVzc2FnZTsKICAgIH07CiAgICBjb25zdCBncm91cHNBcmVWYWxpZCA9ICh2YWwpID0+IHsKICAgICAgICBjb25zdCBncm91cHMgPSBbLi4udmFsXTsgLy8gbWFraW5nIGEgbmV3IGFycmF5IGluIHRoZSBmdW5jdGlvbiBiZWNhdXNlIEknbSBnb25uYSBtdXRhdGUgaXQgbGF0ZXIuLi4KICAgICAgICBsZXQgbWVzc2FnZTsKICAgICAgICBncm91cHMuZm9yRWFjaCgoZ3JvdXAsIGlkeCwgYXJyKSA9PiB7CiAgICAgICAgICAgIG1lc3NhZ2UgPSBncm91cElzVmFsaWQoZ3JvdXAsIGlkeCArIDEpOwogICAgICAgICAgICBpZiAoISFtZXNzYWdlKSB7CiAgICAgICAgICAgICAgICBhcnIubGVuZ3RoID0gaWR4ICsgMTsgLy8gdGhpcyBpcyBhIHRyaWNrc3kgd2F5IG9mIGJyZWFraW5nIGEgZm9yRWFjaCBsb29wIHNpbmNlIHdlIGp1c3Qgd2FudCB0aGUgZmlyc3QgbWVzc2FnZQogICAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIG1lc3NhZ2U7CiAgICB9OwogICAgY29uc3QgbWF0Y2hpbmcgPSAodmFsKSA9PiB7CiAgICAgICAgaWYgKGlzRW1wdHkodmFsID09PSBudWxsIHx8IHZhbCA9PT0gdm9pZCAwID8gdm9pZCAwIDogdmFsLm1hdGNoKSAmJiBpc0VtcHR5KHZhbCA9PT0gbnVsbCB8fCB2YWwgPT09IHZvaWQgMCA/IHZvaWQgMCA6IHZhbFsnbWF0Y2hfcmUnXSkpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ubW9uaXRvcmluZy5yb3V0ZS5tYXRjaCcpOwogICAgICAgIH0KICAgIH07CiAgICBjb25zdCByb2xlVGVtcGxhdGVSdWxlcyA9ICh0eXBlKSA9PiAodmFsID0gW10pID0+IHsKICAgICAgICBpZiAodmFsLnNvbWUoKHJ1bGUpID0+IGlzRW1wdHkocnVsZS52ZXJicykpKSB7CiAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJvbGVUZW1wbGF0ZS5yb2xlVGVtcGxhdGVSdWxlcy5taXNzaW5nVmVyYicpOwogICAgICAgIH0KICAgICAgICBpZiAodmFsLnNvbWUoKHJ1bGUpID0+IHsgdmFyIF9hLCBfYjsgcmV0dXJuICgoX2EgPSBydWxlLnJlc291cmNlcykgPT09IG51bGwgfHwgX2EgPT09IHZvaWQgMCA/IHZvaWQgMCA6IF9hLmxlbmd0aCkgJiYgKChfYiA9IHJ1bGUubm9uUmVzb3VyY2VVUkxzKSA9PT0gbnVsbCB8fCBfYiA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2IubGVuZ3RoKTsgfSkpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucm9sZVRlbXBsYXRlLnJvbGVUZW1wbGF0ZVJ1bGVzLm5vUmVzb3VyY2VBbmROb25SZXNvdXJjZScpOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZSA9PT0gUkJBQy5ST0xFKSB7CiAgICAgICAgICAgIGlmICh2YWwuc29tZSgocnVsZSkgPT4gaXNFbXB0eShydWxlLnJlc291cmNlcykpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdCgndmFsaWRhdGlvbi5yb2xlVGVtcGxhdGUucm9sZVRlbXBsYXRlUnVsZXMubWlzc2luZ1Jlc291cmNlJyk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKHZhbC5zb21lKChydWxlKSA9PiBpc0VtcHR5KHJ1bGUuYXBpR3JvdXBzKSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJvbGVUZW1wbGF0ZS5yb2xlVGVtcGxhdGVSdWxlcy5taXNzaW5nQXBpR3JvdXAnKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBlbHNlIGlmICh2YWwuc29tZSgocnVsZSkgPT4gaXNFbXB0eShydWxlLnJlc291cmNlcykgJiYgaXNFbXB0eShydWxlLm5vblJlc291cmNlVVJMcykgJiYgaXNFbXB0eShydWxlLmFwaUdyb3VwcykpKSB7CiAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJvbGVUZW1wbGF0ZS5yb2xlVGVtcGxhdGVSdWxlcy5taXNzaW5nT25lUmVzb3VyY2UnKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH07CiAgICAvLyBUaGUgZXhpc3RpbmcgdmFsaWRhdG9yIGZvciBjbHVzdGVySXAgbmV2ZXIgYWN0dWFsbHkgcmV0dXJucyBhbiBlcnJvcgogICAgY29uc3QgY2x1c3RlcklwID0gKHZhbCkgPT4gdW5kZWZpbmVkOwogICAgY29uc3QgYmFja3VwVGFyZ2V0ID0gKHZhbCkgPT4gewogICAgICAgIGNvbnN0IHBhcnNlVmFsdWUgPSBKU09OLnBhcnNlKHZhbCk7CiAgICAgICAgY29uc3QgdHlwZSA9IHBhcnNlVmFsdWUudHlwZTsKICAgICAgICBpZiAoIXR5cGUpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7IGtleTogJ1R5cGUnIH0pOwogICAgICAgIH0KICAgICAgICBpZiAodHlwZSA9PT0gJ3MzJykgewogICAgICAgICAgICBpZiAoIXBhcnNlVmFsdWUuYWNjZXNzS2V5SWQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgeyBrZXk6ICdhY2Nlc3NLZXlJZCcgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFwYXJzZVZhbHVlLnNlY3JldEFjY2Vzc0tleSkgewogICAgICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7IGtleTogJ3NlY3JldEFjY2Vzc0tleScgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFwYXJzZVZhbHVlLmJ1Y2tldFJlZ2lvbikgewogICAgICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7IGtleTogJ2J1Y2tldFJlZ2lvbicgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYgKCFwYXJzZVZhbHVlLmJ1Y2tldE5hbWUpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KCd2YWxpZGF0aW9uLnJlcXVpcmVkJywgeyBrZXk6ICdidWNrZXROYW1lJyB9KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgfTsKICAgIGNvbnN0IGltYWdlVXJsID0gKHZhbCkgPT4gewogICAgICAgIGNvbnN0IFZNX0lNQUdFX0ZJTEVfRk9STUFUID0gWydxY293JywgJ3Fjb3cyJywgJ3JhdycsICdpbWcnLCAnaXNvJ107CiAgICAgICAgaWYgKCF2YWwgfHwgdmFsID09PSAnJykgewogICAgICAgICAgICByZXR1cm4gdW5kZWZpbmVkOwogICAgICAgIH0KICAgICAgICBjb25zdCB1cmxTbHVnID0gdmFsLnNwbGl0KCcvJykucG9wKCk7CiAgICAgICAgY29uc3QgZmlsZUV4dGVuc2lvbiA9IHVybFNsdWcuc3BsaXQoJy4nKS5wb3AoKS50b0xvd2VyQ2FzZSgpOwogICAgICAgIGlmICghVk1fSU1BR0VfRklMRV9GT1JNQVQuaW5jbHVkZXMoZmlsZUV4dGVuc2lvbikpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ2hhcnZlc3Rlci52YWxpZGF0aW9uLmltYWdlLnJ1bGVUaXAnKTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDsKICAgIH07CiAgICBjb25zdCBmaWxlUmVxdWlyZWQgPSAodmFsID0ge30pID0+IHsKICAgICAgICBpZiAoIXZhbFtIQ0kuSU1BR0VfTkFNRV0pIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24ucmVxdWlyZWQnLCB7IGtleTogdCgnaGFydmVzdGVyLmltYWdlLmZpbGVOYW1lJykgfSk7CiAgICAgICAgfQogICAgfTsKICAgIGNvbnN0IHN1YkRvbWFpbiA9ICh2YWwpID0+IHsKICAgICAgICBjb25zdCBtYXRjaGVkQ2hhcnMgPSB2YWwgPT09IG51bGwgfHwgdmFsID09PSB2b2lkIDAgPyB2b2lkIDAgOiB2YWwubWF0Y2goL1teYS16MC05Li1dL2cpOwogICAgICAgIGlmIChtYXRjaGVkQ2hhcnMpIHsKICAgICAgICAgICAgcmV0dXJuIHQoJ3ZhbGlkYXRpb24uY2hhcnMnLCB7CiAgICAgICAgICAgICAgICBrZXksIGNvdW50OiBtYXRjaGVkQ2hhcnMubGVuZ3RoLAogICAgICAgICAgICAgICAgY2hhcnM6IG1hdGNoZWRDaGFycy5tYXAoKGNoYXIpID0+IGNoYXIgPT09ICcgJyA/ICdTcGFjZScgOiBgIiR7Y2hhcn0iYCkuam9pbignLCAnKQogICAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgICAgcmV0dXJuIHJ1blZhbGlkYXRvcnModmFsLCBbc3RhcnRIeXBoZW4oJ2xhYmVsJyksIGVuZEh5cGhlbignbGFiZWwnKSwgc3RhcnREb3QoJ2xhYmVsJyksIGVuZERvdCgnbGFiZWwnKSwgcmVxdWlyZWRdKTsKICAgIH07CiAgICByZXR1cm4gewogICAgICAgIGFic29sdXRlUGF0aCwKICAgICAgICBiYWNrdXBUYXJnZXQsCiAgICAgICAgYmV0d2Vlbkxlbmd0aHMsCiAgICAgICAgYmV0d2VlblZhbHVlcywKICAgICAgICBjbHVzdGVySXAsCiAgICAgICAgY2x1c3Rlck5hbWUsCiAgICAgICAgY29udGFpbmVySW1hZ2UsCiAgICAgICAgY29udGFpbmVySW1hZ2VzLAogICAgICAgIGNyb25TY2hlZHVsZSwKICAgICAgICBkbnNMYWJlbCwKICAgICAgICBkbnNMYWJlbElhbmFTZXJ2aWNlTmFtZSwKICAgICAgICBkbnNMYWJlbFJlc3RyaWN0ZWQsCiAgICAgICAgZXh0ZXJuYWxOYW1lLAogICAgICAgIGZpbGVSZXF1aXJlZCwKICAgICAgICBncm91cHNBcmVWYWxpZCwKICAgICAgICBob3N0bmFtZSwKICAgICAgICBpbWFnZVVybCwKICAgICAgICBpbnRlcnZhbCwKICAgICAgICBpc0h0dHBzLAogICAgICAgIG1hdGNoaW5nLAogICAgICAgIG1heExlbmd0aCwKICAgICAgICBtYXhWYWx1ZSwKICAgICAgICBtaW5MZW5ndGgsCiAgICAgICAgbWluVmFsdWUsCiAgICAgICAgbm9VcHBlckNhc2UsCiAgICAgICAgcG9ydE51bWJlciwKICAgICAgICByZXF1aXJlZCwKICAgICAgICByZXF1aXJlZEludCwKICAgICAgICBpc0ludGVnZXIsCiAgICAgICAgaXNQb3NpdGl2ZSwKICAgICAgICBpc09jdGFsLAogICAgICAgIHJvbGVUZW1wbGF0ZVJ1bGVzLAogICAgICAgIHJ1bGVHcm91cHMsCiAgICAgICAgc2VydmljZVBvcnQsCiAgICAgICAgc3ViRG9tYWluLAogICAgICAgIHRlc3RSdWxlLAogICAgICAgIHdpbGRjYXJkSG9zdG5hbWUsCiAgICB9Owp9Cg=="},{"version":3,"file":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/validators/formRules/index.ts","sourceRoot":"","sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/validators/formRules/index.ts"],"names":[],"mappings":"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","sourcesContent":["import { RBAC } from '@shell/config/types';\nimport { HCI } from '@shell/config/labels-annotations';\nimport isEmpty from 'lodash/isEmpty';\nimport has from 'lodash/has';\n// import uniq from 'lodash/uniq';\nimport cronstrue from 'cronstrue';\nimport { Translation } from '@shell/types/t';\n\n// import uniq from 'lodash/uniq';\nexport type Validator<T = undefined | string> = (val: any, arg?: any) => T;\n\nexport type ValidatorFactory = (arg1: any, arg2?: any) => Validator\n\ntype ServicePort = {\n  name?: string,\n  nodePort?: string | number,\n  port?: string | number,\n  targetPort?: string | number,\n  idx: number\n}\n\nexport class Port {\n  empty: boolean;\n  int: number;\n  string: string;\n  isNumber: boolean;\n  isInt: boolean;\n  constructor(port: number | string | undefined) {\n    this.string = String(port);\n    this.int = parseInt(this.string, 10);\n    this.empty = (!port && this.int !== 0);\n    this.isNumber = !isNaN(this.int) && !this.string.includes('e'); // leaving out the exponent edge case to keep the logic simple and because port numbers aren't that big...\n    this.isInt = this.isNumber && !this.string.includes('.');\n  }\n}\n\nconst httpsKeys = [\n  'server-url'\n];\n\nconst runValidators = (val: any, validators: Validator[]) => {\n  for (const validator of validators) {\n    const message = validator(val);\n\n    if (message) {\n      return message;\n    }\n  }\n};\n\nexport interface ValidationOptions {\n  key?: string,\n}\n\n// \"t\" is the function name we use for getting a translated string\nexport default function(t: Translation, { key = 'Value' }: ValidationOptions): { [key:string]: Validator<any> | ValidatorFactory } {\n  // utility validators these validators only get used by other validators\n  const startDot: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1) === '.' ? t(`validation.dns.${ label }.startDot`, { key }) : undefined;\n\n  const endDot = (label: string): Validator => (val: string) => val?.slice(-1) === '.' ? t(`validation.dns.${ label }.endDot`, { key }) : undefined;\n\n  const startNumber: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1)?.match(/[0-9]/) ? t(`validation.dns.${ label }.startNumber`, { key }) : undefined;\n\n  const startHyphen: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(0, 1) === '-' ? t(`validation.dns.${ label }.startHyphen`, { key }) : undefined;\n\n  const endHyphen: ValidatorFactory = (label: string): Validator => (val: string) => val?.slice(-1) === '-' ? t(`validation.dns.${ label }.endHyphen`, { key }) : undefined;\n\n  const minValue: ValidatorFactory = (min: string) => (val: string | number) => Number(val) < Number(min) ? t('validation.minValue', { key, min }) : undefined;\n\n  const maxValue: ValidatorFactory = (max: string) => (val: string | number) => Number(val) > Number(max) ? t('validation.maxValue', { key, max }) : undefined;\n\n  const betweenValues: ValidatorFactory = ([min, max]: string[]) => (val: string | number) => minValue(min)(val) || maxValue(max)(val) ? t('validation.betweenValues', {\n    key, min, max\n  }) : undefined;\n\n  const minLength: ValidatorFactory = (min: string) => (val: string) => val.length < Number(min) ? t('validation.minLength', { key, min }) : undefined;\n\n  const maxLength: ValidatorFactory = (max: string) => (val: string) => val.length > Number(max) ? t('validation.maxLength', { key, max }) : undefined;\n\n  const betweenLengths: ValidatorFactory = ([min, max]: string[]) => (val: string) => minLength(min)(val) || maxLength(max)(val) ? t('validation.betweenLengths', {\n    key, min, max\n  }) : undefined;\n\n  const requiredInt: Validator = (val: string) => isNaN(parseInt(val, 10)) ? t('validation.number.requiredInt', { key }) : undefined;\n\n  const isInteger: Validator = (val: string | number) => !Number.isInteger(+val) || `${ val }`.match(/\\.+/g) ? t('validation.number.requiredInt', { key }) : undefined;\n\n  const isPositive: Validator = (val: string | number) => +val < 0 ? t('validation.number.isPositive', { key }) : undefined;\n\n  const isOctal: Validator = (val: string | number) => {\n    const valueString = `${ val }`;\n    const isValid = valueString.match(/(^0+)(.+)/);\n\n    return isValid ? t('validation.number.isOctal', { key }) : undefined;\n  };\n\n  const portNumber: Validator = (val: string) => parseInt(val, 10) < 1 || parseInt(val, 10) > 65535 ? t('validation.number.between', {\n    key, min: '1', max: '65535'\n  }) : undefined;\n\n  const dnsChars: Validator = (val: string) => {\n    const matchedChars = val?.match(/[^${'A-Za-z0-9-'}]/g);\n\n    if (matchedChars) {\n      return t('validation.chars', {\n        key, count: matchedChars.length, chars: matchedChars.map((char) => char === ' ' ? 'Space' : `\"${ char }\"`).join(', ')\n      });\n    }\n\n    return undefined;\n  };\n\n  // the weird edge case here deals with internationalized domain names which are prepended with 'xn--'\n  // https://datatracker.ietf.org/doc/html/rfc5891#section-4.2.3.1\n  const dnsDoubleDash: Validator = (val: string) => (val?.substr(2, 2) === '--' && val?.substr(0, 2) !== 'xn') ? t(`validation.dns.doubleHyphen`, { key }) : undefined;\n\n  const dnsIanaServiceNameDoubleDash: Validator = (val: string) => (val?.substr(2, 2) === '--' && val?.substr(0, 2) !== 'xn') ? t(`validation.dns.doubleHyphen`, { key }) : undefined;\n\n  const dnsEmpty: ValidatorFactory = (label: string): Validator => (val = '') => val.length === 0 ? t(`validation.dns.${ label }.emptyLabel`, { key, min: 1 }) : undefined;\n\n  const dnsTooLong: ValidatorFactory = (label: string, length = 63): Validator => (val = '') => val.length > length ? t(`validation.dns.${ label }.tooLongLabel`, { key, max: length }) : undefined;\n\n  // eslint-disable-next-line no-unused-vars\n  const hostnameEmpty: Validator = (val = '') => val.length === 0 ? t('validation.dns.hostname.empty', { key }) : undefined;\n\n  const hostnameTooLong: Validator = (val = '') => val.length > 253 ? t('validation.dns.hostname.tooLong', { key, max: 253 }) : undefined;\n\n  const absolutePath: Validator = (val = '') => val[0] !== '/' && val.length > 0 ? t('validation.path', { key }) : undefined;\n\n  const required: Validator = (val: any) => !val && val !== false ? t('validation.required', { key }) : undefined;\n\n  const noUpperCase: Validator = (val = '') => val.toLowerCase() !== val ? t('validation.noUpperCase', { key }) : undefined;\n\n  const cronSchedule: Validator = (val: string) => {\n    try {\n      cronstrue.toString(val);\n    } catch (e) {\n      return t('validation.invalidCron');\n    }\n  };\n\n  const isHttps: ValidatorFactory = (key: string) => {\n    const isHttps: Validator = (val: string) => httpsKeys.includes(key) && !val.toLowerCase().startsWith('https://') ? t('validation.setting.serverUrl.https') : undefined;\n\n    return isHttps;\n  };\n\n  const interval: Validator = (val: string) => !/^\\d+[hms]$/.test(val) ? t('validation.monitoring.route.interval', { key }) : undefined;\n\n  const containerImage: Validator = (val: any) => !val?.image ? t('workload.validation.containerImage', { name: val.name }) : undefined;\n\n  const containerImages: Validator = (val: any | [any]) => {\n    const containers = val.jobTemplate ? val?.jobTemplate?.spec?.template?.spec?.containers : val?.template?.spec?.containers;\n\n    if (!containers || !containers.length) {\n      return t('validation.required', { key: t('workload.container.titles.containers') });\n    }\n\n    // making sure each container has an image name\n    return containers.map((container: any) => containerImage(container)).find((containerError: string) => containerError);\n  };\n\n  const dnsLabel: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsDoubleDash,\n      // dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label')\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const dnsLabelIanaServiceName: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsIanaServiceNameDoubleDash,\n      dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label', 15)\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const dnsLabelRestricted: Validator = (val: string) => {\n    const validators = [\n      dnsChars,\n      startNumber('label'),\n      startHyphen('label'),\n      endHyphen('label'),\n      dnsDoubleDash,\n      dnsEmpty('label'), // questionable as to if this is needed if the field is also required...\n      dnsTooLong('label')\n    ];\n\n    return runValidators(val, validators);\n  };\n\n  const hostname: Validator = (val: string) => {\n    if (val) {\n      const validators = [\n        startDot('hostname'),\n        hostnameTooLong,\n        endDot('hostname')\n      ];\n\n      const hostNameMessage = runValidators(val, validators);\n\n      if (hostNameMessage) {\n        return hostNameMessage;\n      }\n\n      const labels = val.split('.');\n      const labelValidators = [\n        dnsChars,\n        startHyphen('hostname'),\n        endHyphen('hostname'),\n        dnsDoubleDash,\n        dnsEmpty('hostname'),\n        dnsTooLong('hostname')\n      ];\n\n      for ( let i = 0; i < labels.length; i++ ) {\n        const labelMessage = runValidators(labels[i], labelValidators);\n\n        if (labelMessage) {\n          return labelMessage;\n        }\n      }\n    }\n  };\n\n  const wildcardHostname: Validator = (val: string) => {\n    // allow wildcard in first part of hostname\n    val = val ? val.replace(/^\\*\\./, '') : val;\n\n    return hostname(val);\n  };\n\n  const externalName: Validator = (val: string) => {\n    if (isEmpty(val)) {\n      return t('validation.service.externalName.none');\n    } else {\n      return hostname(val);\n    }\n  };\n\n  const testRule = (val: string | undefined) => {\n    return 'This is an error returned by the testRule validator';\n  };\n\n  const ruleGroups: Validator = (val: {groups?: any}) => isEmpty(val?.groups) ? t('validation.prometheusRule.groups.required') : undefined;\n\n  const clusterName: ValidatorFactory = (isRke2: boolean): Validator => (val: string | undefined) => isRke2 && (val || '')?.match(/^(c-.{5}|local)$/i) ? t('validation.cluster.name') : undefined;\n\n  const servicePort: Validator<string | Port | undefined> = (val: ServicePort) => {\n    const {\n      name,\n      idx\n    } = val;\n\n    const nodePort = new Port(val.nodePort);\n    const listeningPort = new Port(val.port);\n    const targetPort = new Port(val.targetPort);\n\n    if (isEmpty(name)) {\n      return t('validation.service.ports.name.required', { position: idx + 1 });\n    }\n\n    if (!nodePort.empty) {\n      if (!nodePort.isInt) {\n        return t('validation.service.ports.nodePort.requiredInt', { position: idx + 1 });\n      } else if (nodePort.int < 1 || nodePort.int > 65535) {\n        return t('validation.service.ports.nodePort.between', { position: idx + 1 });\n      }\n    }\n\n    if (!listeningPort.empty) {\n      if (!listeningPort.isInt) {\n        return t('validation.service.ports.port.requiredInt', { position: idx + 1 });\n      } else if (listeningPort.int < 1 || listeningPort.int > 65535) {\n        return t('validation.service.ports.port.between', { position: idx + 1 });\n      } else if (listeningPort.string?.includes('.')) {\n        return listeningPort;\n      }\n    } else {\n      return t('validation.service.ports.port.required', { position: idx + 1 });\n    }\n\n    if (!targetPort.empty) {\n      if (!targetPort.isInt) {\n        const ianaServiceNameErrors = dnsLabelIanaServiceName(targetPort.string);\n\n        if (ianaServiceNameErrors) {\n          return ianaServiceNameErrors;\n        }\n      } else if (targetPort.int < 1 || targetPort.int > 65535) {\n        return t('validation.service.ports.targetPort.between', { position: idx + 1 });\n      }\n    } else {\n      return t('validation.service.ports.targetPort.required', { position: idx + 1 });\n    }\n\n    return undefined;\n  };\n\n  const groupIsValid: Validator = (val, readableIndex) => {\n    let returnMessage: string | undefined;\n\n    if (isEmpty(val?.name)) {\n      return t('validation.prometheusRule.groups.valid.name', { index: readableIndex });\n    }\n\n    if (isEmpty(val.rules)) {\n      return t('validation.prometheusRule.groups.valid.singleEntry', { index: readableIndex });\n    } else {\n      val.rules.forEach((rule: any, idx: number) => {\n        const readableRuleIndex = idx + 1;\n\n        if (has(rule, 'alert') && isEmpty(rule?.alert) && !returnMessage) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.alertName', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        } else if (has(rule, 'record') && isEmpty(rule?.record)) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.recordName', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        }\n\n        if ((has(rule, 'expr') && isEmpty(rule.expr) && !returnMessage) || (!has(rule, 'expr') && !returnMessage)) {\n          returnMessage = t('validation.prometheusRule.groups.valid.rule.expr', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n        }\n\n        if (has(rule, 'alert')) {\n          if (\n            (has(rule, 'labels') && isEmpty(rule.labels) && !returnMessage) ||\n            (!has(rule, 'labels') && !returnMessage)\n          ) {\n            returnMessage = t('validation.prometheusRule.groups.valid.rule.labels', { groupIndex: readableIndex, ruleIndex: readableRuleIndex });\n          }\n        }\n      });\n    }\n\n    return returnMessage;\n  };\n\n  const groupsAreValid: Validator = (val) => {\n    const groups = [...val]; // making a new array in the function because I'm gonna mutate it later...\n    let message;\n\n    groups.forEach((group, idx, arr) => {\n      message = groupIsValid(group, idx + 1);\n      if (!!message) {\n        arr.length = idx + 1; // this is a tricksy way of breaking a forEach loop since we just want the first message\n      }\n    });\n\n    return message;\n  };\n\n  const matching: Validator = (val) => {\n    if (isEmpty(val?.match) && isEmpty(val?.['match_re'])) {\n      return t('validation.monitoring.route.match');\n    }\n  };\n\n  const roleTemplateRules: ValidatorFactory = (type): Validator => (val = []) => {\n    if (val.some((rule: any) => isEmpty(rule.verbs))) {\n      return t('validation.roleTemplate.roleTemplateRules.missingVerb');\n    }\n\n    if (val.some((rule: any) => rule.resources?.length && rule.nonResourceURLs?.length)) {\n      return t('validation.roleTemplate.roleTemplateRules.noResourceAndNonResource');\n    }\n\n    if (type === RBAC.ROLE) {\n      if (val.some((rule: any) => isEmpty(rule.resources))) {\n        return t('validation.roleTemplate.roleTemplateRules.missingResource');\n      }\n\n      if (val.some((rule: any) => isEmpty(rule.apiGroups))) {\n        return t('validation.roleTemplate.roleTemplateRules.missingApiGroup');\n      }\n    } else if (val.some((rule: any) => isEmpty(rule.resources) && isEmpty(rule.nonResourceURLs) && isEmpty(rule.apiGroups))) {\n      return t('validation.roleTemplate.roleTemplateRules.missingOneResource');\n    }\n\n    return undefined;\n  };\n\n  // The existing validator for clusterIp never actually returns an error\n  const clusterIp: Validator = (val) => undefined;\n\n  const backupTarget: Validator = (val) => {\n    const parseValue = JSON.parse(val);\n    const type = parseValue.type;\n\n    if (!type) {\n      return t('validation.required', { key: 'Type' });\n    }\n\n    if (type === 's3') {\n      if (!parseValue.accessKeyId) {\n        return t('validation.required', { key: 'accessKeyId' });\n      }\n\n      if (!parseValue.secretAccessKey) {\n        return t('validation.required', { key: 'secretAccessKey' });\n      }\n\n      if (!parseValue.bucketRegion) {\n        return t('validation.required', { key: 'bucketRegion' });\n      }\n\n      if (!parseValue.bucketName) {\n        return t('validation.required', { key: 'bucketName' });\n      }\n    }\n\n    return undefined;\n  };\n\n  const imageUrl: Validator = (val) => {\n    const VM_IMAGE_FILE_FORMAT = ['qcow', 'qcow2', 'raw', 'img', 'iso'];\n\n    if (!val || val === '') {\n      return undefined;\n    }\n\n    const urlSlug = val.split('/').pop();\n    const fileExtension = urlSlug.split('.').pop().toLowerCase();\n\n    if (!VM_IMAGE_FILE_FORMAT.includes(fileExtension)) {\n      return t('harvester.validation.image.ruleTip');\n    }\n\n    return undefined;\n  };\n\n  const fileRequired: Validator = (val = {}) => {\n    if (!val[HCI.IMAGE_NAME]) {\n      return t('validation.required', { key: t('harvester.image.fileName') });\n    }\n  };\n\n  const subDomain: Validator = (val) => {\n    const matchedChars = val?.match(/[^a-z0-9.-]/g);\n\n    if (matchedChars) {\n      return t('validation.chars', {\n        key, count: matchedChars.length, chars: matchedChars.map((char: string) => char === ' ' ? 'Space' : `\"${ char }\"`).join(', ')\n      });\n    }\n\n    return runValidators(val, [startHyphen('label'), endHyphen('label'), startDot('label'), endDot('label'), required]);\n  };\n\n  return {\n    absolutePath,\n    backupTarget,\n    betweenLengths,\n    betweenValues,\n    clusterIp,\n    clusterName,\n    containerImage,\n    containerImages,\n    cronSchedule,\n    dnsLabel,\n    dnsLabelIanaServiceName,\n    dnsLabelRestricted,\n    externalName,\n    fileRequired,\n    groupsAreValid,\n    hostname,\n    imageUrl,\n    interval,\n    isHttps,\n    matching,\n    maxLength,\n    maxValue,\n    minLength,\n    minValue,\n    noUpperCase,\n    portNumber,\n    required,\n    requiredInt,\n    isInteger,\n    isPositive,\n    isOctal,\n    roleTemplateRules,\n    ruleGroups,\n    servicePort,\n    subDomain,\n    testRule,\n    wildcardHostname,\n  };\n}\n"]}]}