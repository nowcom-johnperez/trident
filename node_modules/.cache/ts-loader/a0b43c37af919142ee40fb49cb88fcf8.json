{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc-interval.ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc-interval.ts","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGdjIGZyb20gJy4vZ2MnOwovKioKICogS2ljayBvZiByZWd1bGFyIEdDCiAqLwpjbGFzcyBHYXJiYWdlQ29sbGVjdEludGVydmFsIHsKICAgIC8qKgogICAgKiBSZXF1ZXN0IHdlIHN0YXJ0IGdhcmJhZ2UgY29sbGVjdGlvbiBhdCByZWd1bGFyIGludGVydmFscwogICAgKgogICAgKiBJZiBHQyBpcyBkaXNhYmxlZCBvciBydW5uaW5nIHJldHVybiBlYXJseQogICAgKi8KICAgIGdjU3RhcnRJbnRlcnZhbHMoY3R4KSB7CiAgICAgICAgY29uc3QgeyBlbmFibGVkLCBpbnRlcnZhbCB9ID0gZ2MuZ2NFbmFibGVkSW50ZXJ2YWwoY3R4KTsKICAgICAgICBpZiAoIWdjLmdjRW5hYmxlZFNldHRpbmcoY3R4KSB8fCAhZW5hYmxlZCkgewogICAgICAgICAgICByZXR1cm47CiAgICAgICAgfQogICAgICAgIGlmICh0aGlzLmdjSW50ZXJ2YWwpIHsKICAgICAgICAgICAgcmV0dXJuOwogICAgICAgIH0KICAgICAgICB0aGlzLmdjSW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCgoKSA9PiB7CiAgICAgICAgICAgIGN0eC5kaXNwYXRjaCgnZ2FyYmFnZUNvbGxlY3QnKTsgLy8gZ2MuZ2FyYmFnZUNvbGxlY3QgaXMgcGVyIHN0b3JlLCBzbyBkaXNwYXRjaCB2aWEgY2VudHJhbCBwb2ludAogICAgICAgIH0sIGludGVydmFsICogMTAwMCk7CiAgICB9CiAgICBnY1N0b3BJbnRlcnZhbHMoKSB7CiAgICAgICAgaWYgKHRoaXMuZ2NJbnRlcnZhbCkgewogICAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMuZ2NJbnRlcnZhbCk7CiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmdjSW50ZXJ2YWw7CiAgICAgICAgfQogICAgfQp9CmNvbnN0IGdjaSA9IG5ldyBHYXJiYWdlQ29sbGVjdEludGVydmFsKCk7CmV4cG9ydCBkZWZhdWx0IGdjaTsK"},{"version":3,"file":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc-interval.ts","sourceRoot":"","sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/utils/gc/gc-interval.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,MAAM,MAAM,CAAC;AAEtB;;GAEG;AACH,MAAM,sBAAsB;IAG1B;;;;MAIE;IACF,gBAAgB,CAAC,GAAQ;QACvB,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,EAAE,CAAC,iBAAiB,CAAC,GAAG,CAAC,CAAC;QAExD,IAAI,CAAC,EAAE,CAAC,gBAAgB,CAAC,GAAG,CAAC,IAAI,CAAC,OAAO,EAAE;YACzC,OAAO;SACR;QAED,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,OAAO;SACR;QAED,IAAI,CAAC,UAAU,GAAG,WAAW,CAAC,GAAG,EAAE;YACjC,GAAG,CAAC,QAAQ,CAAC,gBAAgB,CAAC,CAAC,CAAC,gEAAgE;QAClG,CAAC,EAAE,QAAQ,GAAG,IAAI,CAAC,CAAC;IACtB,CAAC;IAED,eAAe;QACb,IAAI,IAAI,CAAC,UAAU,EAAE;YACnB,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;YAC/B,OAAO,IAAI,CAAC,UAAU,CAAC;SACxB;IACH,CAAC;CACF;AAED,MAAM,GAAG,GAAG,IAAI,sBAAsB,EAAE,CAAC;AAEzC,eAAe,GAAG,CAAC","sourcesContent":["import gc from './gc';\n\n/**\n * Kick of regular GC\n */\nclass GarbageCollectInterval {\n  private gcInterval?: NodeJS.Timer;\n\n  /**\n  * Request we start garbage collection at regular intervals\n  *\n  * If GC is disabled or running return early\n  */\n  gcStartIntervals(ctx: any) {\n    const { enabled, interval } = gc.gcEnabledInterval(ctx);\n\n    if (!gc.gcEnabledSetting(ctx) || !enabled) {\n      return;\n    }\n\n    if (this.gcInterval) {\n      return;\n    }\n\n    this.gcInterval = setInterval(() => {\n      ctx.dispatch('garbageCollect'); // gc.garbageCollect is per store, so dispatch via central point\n    }, interval * 1000);\n  }\n\n  gcStopIntervals() {\n    if (this.gcInterval) {\n      clearInterval(this.gcInterval);\n      delete this.gcInterval;\n    }\n  }\n}\n\nconst gci = new GarbageCollectInterval();\n\nexport default gci;\n"]}]}