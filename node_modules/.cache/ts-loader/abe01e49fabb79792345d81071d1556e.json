{"remainingRequest":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js??ref--17-1!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/AsyncButton.vue?vue&type=script&lang=ts","dependencies":[{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/AsyncButton.vue","mtime":1716430447141},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/babel-loader/lib/index.js","mtime":1716430465839},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/ts-loader/index.js","mtime":1716430466133},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js","mtime":1716430465924},{"path":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js","mtime":1716430467929}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IFZ1ZSBmcm9tICd2dWUnOwppbXBvcnQgdHlwZUhlbHBlciBmcm9tICdAc2hlbGwvdXRpbHMvdHlwZS1oZWxwZXJzJzsKZXhwb3J0IGNvbnN0IEFTWU5DX0JVVFRPTl9TVEFURVMgPSB7CiAgICBBQ1RJT046ICdhY3Rpb24nLAogICAgV0FJVElORzogJ3dhaXRpbmcnLAogICAgU1VDQ0VTUzogJ3N1Y2Nlc3MnLAogICAgRVJST1I6ICdlcnJvcicsCn07CmNvbnN0IFRFWFQgPSAndGV4dCc7CmNvbnN0IFRPT0xUSVAgPSAndG9vbHRpcCc7CmV4cG9ydCBkZWZhdWx0IFZ1ZS5leHRlbmQoewogICAgcHJvcHM6IHsKICAgICAgICAvKioKICAgICAgICAgKiBNb2RlIG1hcHMgdG8ga2V5cyBpbiBhc3luY0J1dHRvbi4qIHRyYW5zbGF0aW9ucwogICAgICAgICAqLwogICAgICAgIG1vZGU6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OiAnZWRpdCcsCiAgICAgICAgfSwKICAgICAgICBkZWxheTogewogICAgICAgICAgICB0eXBlOiBOdW1iZXIsCiAgICAgICAgICAgIGRlZmF1bHQ6IDUwMDAsCiAgICAgICAgfSwKICAgICAgICBuYW1lOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDogbnVsbCwKICAgICAgICB9LAogICAgICAgIGRpc2FibGVkOiB7CiAgICAgICAgICAgIHR5cGU6IEJvb2xlYW4sCiAgICAgICAgICAgIGRlZmF1bHQ6IGZhbHNlLAogICAgICAgIH0sCiAgICAgICAgdHlwZTogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICdidXR0b24nCiAgICAgICAgfSwKICAgICAgICB0YWJJbmRleDogewogICAgICAgICAgICB0eXBlOiBOdW1iZXIsCiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICAgICAgfSwKICAgICAgICBhY3Rpb25Db2xvcjogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICdyb2xlLXByaW1hcnknLAogICAgICAgIH0sCiAgICAgICAgd2FpdGluZ0NvbG9yOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDogJ2JnLXByaW1hcnknLAogICAgICAgIH0sCiAgICAgICAgc3VjY2Vzc0NvbG9yOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDogJ2JnLXN1Y2Nlc3MnLAogICAgICAgIH0sCiAgICAgICAgZXJyb3JDb2xvcjogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICdiZy1lcnJvcicsCiAgICAgICAgfSwKICAgICAgICBhY3Rpb25MYWJlbDogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICAgICAgfSwKICAgICAgICB3YWl0aW5nTGFiZWw6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OiBudWxsLAogICAgICAgIH0sCiAgICAgICAgc3VjY2Vzc0xhYmVsOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDogbnVsbCwKICAgICAgICB9LAogICAgICAgIGVycm9yTGFiZWw6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OiBudWxsLAogICAgICAgIH0sCiAgICAgICAgaWNvbjogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6IG51bGwsCiAgICAgICAgfSwKICAgICAgICBsYWJlbEFzOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDogVEVYVCwKICAgICAgICB9LAogICAgICAgIHNpemU6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OiAnJywKICAgICAgICB9LAogICAgICAgIGN1cnJlbnRQaGFzZTogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6IEFTWU5DX0JVVFRPTl9TVEFURVMuQUNUSU9OLAogICAgICAgIH0sCiAgICAgICAgLyoqCiAgICAgICAgICogSW5oZXJpdGVkIGdsb2JhbCBpZGVudGlmaWVyIHByZWZpeCBmb3IgdGVzdHMKICAgICAgICAgKiBEZWZpbmUgYSB0ZXJtIGJhc2VkIG9uIHRoZSBwYXJlbnQgY29tcG9uZW50IHRvIGF2b2lkIGNvbmZsaWN0cyBvbiBtdWx0aXBsZSBjb21wb25lbnRzCiAgICAgICAgICovCiAgICAgICAgY29tcG9uZW50VGVzdGlkOiB7CiAgICAgICAgICAgIHR5cGU6IFN0cmluZywKICAgICAgICAgICAgZGVmYXVsdDogJ2FjdGlvbi1idXR0b24nCiAgICAgICAgfSwKICAgICAgICBtYW51YWw6IHsKICAgICAgICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgICAgICAgZGVmYXVsdDogZmFsc2UsCiAgICAgICAgfSwKICAgIH0sCiAgICBkYXRhKCkgewogICAgICAgIHJldHVybiB7IHBoYXNlOiB0aGlzLmN1cnJlbnRQaGFzZSB9OwogICAgfSwKICAgIHdhdGNoOiB7CiAgICAgICAgY3VycmVudFBoYXNlKG5ldSkgewogICAgICAgICAgICB0aGlzLnBoYXNlID0gbmV1OwogICAgICAgIH0KICAgIH0sCiAgICBjb21wdXRlZDogewogICAgICAgIGNsYXNzZXMoKSB7CiAgICAgICAgICAgIGNvbnN0IGtleSA9IGAke3RoaXMucGhhc2V9Q29sb3JgOwogICAgICAgICAgICBjb25zdCBjb2xvciA9IHR5cGVIZWxwZXIubWVtYmVyT2ZDb21wb25lbnQodGhpcywga2V5KTsKICAgICAgICAgICAgY29uc3Qgb3V0ID0gewogICAgICAgICAgICAgICAgYnRuOiB0cnVlLAogICAgICAgICAgICAgICAgW2NvbG9yXTogdHJ1ZSwKICAgICAgICAgICAgfTsKICAgICAgICAgICAgaWYgKHRoaXMuc2l6ZSkgewogICAgICAgICAgICAgICAgb3V0W2BidG4tJHt0aGlzLnNpemV9YF0gPSB0cnVlOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBvdXQ7CiAgICAgICAgfSwKICAgICAgICBkaXNwbGF5SWNvbigpIHsKICAgICAgICAgICAgY29uc3QgZXhpc3RzID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi9leGlzdHMnXTsKICAgICAgICAgICAgY29uc3QgdCA9IHRoaXMuJHN0b3JlLmdldHRlcnNbJ2kxOG4vdCddOwogICAgICAgICAgICBjb25zdCBrZXkgPSBgYXN5bmNCdXR0b24uJHt0aGlzLm1vZGV9LiR7dGhpcy5waGFzZX1JY29uYDsKICAgICAgICAgICAgY29uc3QgZGVmYXVsdEtleSA9IGBhc3luY0J1dHRvbi5kZWZhdWx0LiR7dGhpcy5waGFzZX1JY29uYDsKICAgICAgICAgICAgbGV0IG91dCA9ICcnOwogICAgICAgICAgICBpZiAodGhpcy5pY29uKSB7CiAgICAgICAgICAgICAgICBvdXQgPSB0aGlzLmljb247CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZXhpc3RzKGtleSkpIHsKICAgICAgICAgICAgICAgIG91dCA9IGBpY29uLSR7dChrZXkpfWA7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZXhpc3RzKGRlZmF1bHRLZXkpKSB7CiAgICAgICAgICAgICAgICBvdXQgPSBgaWNvbi0ke3QoZGVmYXVsdEtleSl9YDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy5pc1NwaW5uaW5nKSB7CiAgICAgICAgICAgICAgICBpZiAoIW91dCkgewogICAgICAgICAgICAgICAgICAgIG91dCA9ICdpY29uLXNwaW5uZXInOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgb3V0ICs9ICcgaWNvbi1zcGluJzsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gb3V0OwogICAgICAgIH0sCiAgICAgICAgZGlzcGxheUxhYmVsKCkgewogICAgICAgICAgICBjb25zdCBvdmVycmlkZSA9IHR5cGVIZWxwZXIubWVtYmVyT2ZDb21wb25lbnQodGhpcywgYCR7dGhpcy5waGFzZX1MYWJlbGApOwogICAgICAgICAgICBjb25zdCBleGlzdHMgPSB0aGlzLiRzdG9yZS5nZXR0ZXJzWydpMThuL2V4aXN0cyddOwogICAgICAgICAgICBjb25zdCB0ID0gdGhpcy4kc3RvcmUuZ2V0dGVyc1snaTE4bi90J107CiAgICAgICAgICAgIGNvbnN0IGtleSA9IGBhc3luY0J1dHRvbi4ke3RoaXMubW9kZX0uJHt0aGlzLnBoYXNlfWA7CiAgICAgICAgICAgIGNvbnN0IGRlZmF1bHRLZXkgPSBgYXN5bmNCdXR0b24uZGVmYXVsdC4ke3RoaXMucGhhc2V9YDsKICAgICAgICAgICAgaWYgKG92ZXJyaWRlKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gb3ZlcnJpZGU7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZXhpc3RzKGtleSkpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0KGtleSk7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgZWxzZSBpZiAoZXhpc3RzKGRlZmF1bHRLZXkpKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gdChkZWZhdWx0S2V5KTsKICAgICAgICAgICAgfQogICAgICAgICAgICBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiAnJzsKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaXNTcGlubmluZygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucGhhc2UgPT09IEFTWU5DX0JVVFRPTl9TVEFURVMuV0FJVElORzsKICAgICAgICB9LAogICAgICAgIGlzRGlzYWJsZWQoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpc2FibGVkIHx8IHRoaXMucGhhc2UgPT09IEFTWU5DX0JVVFRPTl9TVEFURVMuV0FJVElORzsKICAgICAgICB9LAogICAgICAgIHRvb2x0aXAoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLmxhYmVsQXMgPT09IFRPT0xUSVApIHsKICAgICAgICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgICAgICAgICAgY29udGVudDogdGhpcy5kaXNwbGF5TGFiZWwsCiAgICAgICAgICAgICAgICAgICAgaGlkZU9uVGFyZ2V0Q2xpY2s6IGZhbHNlCiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgIH0KICAgIH0sCiAgICBiZWZvcmVEZXN0cm95KCkgewogICAgICAgIGlmICh0aGlzLnRpbWVyKSB7CiAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aGlzLnRpbWVyKTsKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGNsaWNrZWQoJGV2ZW50KSB7CiAgICAgICAgICAgIGlmICgkZXZlbnQpIHsKICAgICAgICAgICAgICAgICRldmVudC5zdG9wUHJvcGFnYXRpb24oKTsKICAgICAgICAgICAgICAgICRldmVudC5wcmV2ZW50RGVmYXVsdCgpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGlmICh0aGlzLmlzRGlzYWJsZWQpIHsKICAgICAgICAgICAgICAgIHJldHVybjsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZiAodGhpcy50aW1lcikgewogICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRoaXMudGltZXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIElmIG1hbnVhbCBwcm9wZXJ0eSBpcyBzZXQsIGRvbid0IGF1dG9tYXRpY2FsbHkgY2hhbmdlIHRoZSBidXR0b24gb24gY2xpY2sKICAgICAgICAgICAgaWYgKCF0aGlzLm1hbnVhbCkgewogICAgICAgICAgICAgICAgdGhpcy5waGFzZSA9IEFTWU5DX0JVVFRPTl9TVEFURVMuV0FJVElORzsKICAgICAgICAgICAgfQogICAgICAgICAgICBjb25zdCBjYiA9IChzdWNjZXNzKSA9PiB7CiAgICAgICAgICAgICAgICB0aGlzLmRvbmUoc3VjY2Vzcyk7CiAgICAgICAgICAgIH07CiAgICAgICAgICAgIHRoaXMuJGVtaXQoJ2NsaWNrJywgY2IpOwogICAgICAgIH0sCiAgICAgICAgZG9uZShzdWNjZXNzKSB7CiAgICAgICAgICAgIGlmIChzdWNjZXNzID09PSAnY2FuY2VsbGVkJykgewogICAgICAgICAgICAgICAgdGhpcy5waGFzZSA9IEFTWU5DX0JVVFRPTl9TVEFURVMuQUNUSU9OOwogICAgICAgICAgICB9CiAgICAgICAgICAgIGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5waGFzZSA9IChzdWNjZXNzID8gQVNZTkNfQlVUVE9OX1NUQVRFUy5TVUNDRVNTIDogQVNZTkNfQlVUVE9OX1NUQVRFUy5FUlJPUik7CiAgICAgICAgICAgICAgICB0aGlzLnRpbWVyID0gc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgdGhpcy50aW1lckRvbmUoKTsKICAgICAgICAgICAgICAgIH0sIHRoaXMuZGVsYXkpOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB0aW1lckRvbmUoKSB7CiAgICAgICAgICAgIGlmICh0aGlzLnBoYXNlID09PSBBU1lOQ19CVVRUT05fU1RBVEVTLlNVQ0NFU1MgfHwgdGhpcy5waGFzZSA9PT0gQVNZTkNfQlVUVE9OX1NUQVRFUy5FUlJPUikgewogICAgICAgICAgICAgICAgdGhpcy5waGFzZSA9IEFTWU5DX0JVVFRPTl9TVEFURVMuQUNUSU9OOwogICAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICBmb2N1cygpIHsKICAgICAgICAgICAgdGhpcy4kcmVmcy5idG4uZm9jdXMoKTsKICAgICAgICB9CiAgICB9Cn0pOwo="},{"version":3,"file":"/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/AsyncButton.vue.tsx","sourceRoot":"","sources":["/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@vue/cli-service/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nowcom/Documents/nowcom/trident-extension-package/node_modules/@rancher/shell/components/AsyncButton.vue?vue&type=script&lang=ts"],"names":[],"mappings":"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","sourcesContent":["\nimport Vue from 'vue';\nimport typeHelper from '@shell/utils/type-helpers';\n\nexport const ASYNC_BUTTON_STATES = {\n  ACTION:  'action',\n  WAITING: 'waiting',\n  SUCCESS: 'success',\n  ERROR:   'error',\n};\n\nconst TEXT = 'text';\nconst TOOLTIP = 'tooltip';\n\nexport type AsyncButtonCallback = (success: boolean) => void;\n\nexport default Vue.extend<{ phase: string}, any, any, any>({\n  props: {\n    /**\n     * Mode maps to keys in asyncButton.* translations\n     */\n    mode: {\n      type:    String,\n      default: 'edit',\n    },\n    delay: {\n      type:    Number,\n      default: 5000,\n    },\n\n    name: {\n      type:    String,\n      default: null,\n    },\n    disabled: {\n      type:    Boolean,\n      default: false,\n    },\n    type: {\n      type:    String,\n      default: 'button'\n    },\n    tabIndex: {\n      type:    Number,\n      default: null,\n    },\n\n    actionColor: {\n      type:    String,\n      default: 'role-primary',\n    },\n    waitingColor: {\n      type:    String,\n      default: 'bg-primary',\n    },\n    successColor: {\n      type:    String,\n      default: 'bg-success',\n    },\n    errorColor: {\n      type:    String,\n      default: 'bg-error',\n    },\n\n    actionLabel: {\n      type:    String,\n      default: null,\n    },\n    waitingLabel: {\n      type:    String,\n      default: null,\n    },\n    successLabel: {\n      type:    String,\n      default: null,\n    },\n    errorLabel: {\n      type:    String,\n      default: null,\n    },\n\n    icon: {\n      type:    String,\n      default: null,\n    },\n    labelAs: {\n      type:    String,\n      default: TEXT,\n    },\n    size: {\n      type:    String,\n      default: '',\n    },\n\n    currentPhase: {\n      type:    String,\n      default: ASYNC_BUTTON_STATES.ACTION,\n    },\n\n    /**\n     * Inherited global identifier prefix for tests\n     * Define a term based on the parent component to avoid conflicts on multiple components\n     */\n    componentTestid: {\n      type:    String,\n      default: 'action-button'\n    },\n\n    manual: {\n      type:    Boolean,\n      default: false,\n    },\n\n  },\n\n  data(): { phase: string, timer?: NodeJS.Timeout} {\n    return { phase: this.currentPhase };\n  },\n\n  watch: {\n    currentPhase(neu) {\n      this.phase = neu;\n    }\n  },\n\n  computed: {\n    classes(): {btn: boolean, [color: string]: boolean} {\n      const key = `${ this.phase }Color`;\n      const color = typeHelper.memberOfComponent(this, key);\n\n      const out = {\n        btn:     true,\n        [color]: true,\n      };\n\n      if (this.size) {\n        out[`btn-${ this.size }`] = true;\n      }\n\n      return out;\n    },\n\n    displayIcon(): string {\n      const exists = this.$store.getters['i18n/exists'];\n      const t = this.$store.getters['i18n/t'];\n      const key = `asyncButton.${ this.mode }.${ this.phase }Icon`;\n      const defaultKey = `asyncButton.default.${ this.phase }Icon`;\n\n      let out = '';\n\n      if ( this.icon ) {\n        out = this.icon;\n      } else if ( exists(key) ) {\n        out = `icon-${ t(key) }`;\n      } else if ( exists(defaultKey) ) {\n        out = `icon-${ t(defaultKey) }`;\n      }\n\n      if ( this.isSpinning ) {\n        if ( !out ) {\n          out = 'icon-spinner';\n        }\n\n        out += ' icon-spin';\n      }\n\n      return out;\n    },\n\n    displayLabel(): string {\n      const override = typeHelper.memberOfComponent(this, `${ this.phase }Label`);\n      const exists = this.$store.getters['i18n/exists'];\n      const t = this.$store.getters['i18n/t'];\n      const key = `asyncButton.${ this.mode }.${ this.phase }`;\n      const defaultKey = `asyncButton.default.${ this.phase }`;\n\n      if ( override ) {\n        return override;\n      } else if ( exists(key) ) {\n        return t(key);\n      } else if ( exists(defaultKey) ) {\n        return t(defaultKey);\n      } else {\n        return '';\n      }\n    },\n\n    isSpinning(): boolean {\n      return this.phase === ASYNC_BUTTON_STATES.WAITING;\n    },\n\n    isDisabled(): boolean {\n      return this.disabled || this.phase === ASYNC_BUTTON_STATES.WAITING;\n    },\n\n    tooltip(): { content: string, hideOnTargetClick: boolean} | null {\n      if ( this.labelAs === TOOLTIP ) {\n        return {\n          content:           this.displayLabel,\n          hideOnTargetClick: false\n        };\n      }\n\n      return null;\n    }\n  },\n\n  beforeDestroy() {\n    if (this.timer) {\n      clearTimeout(this.timer);\n    }\n  },\n\n  methods: {\n    clicked($event: MouseEvent) {\n      if ($event) {\n        $event.stopPropagation();\n        $event.preventDefault();\n      }\n\n      if ( this.isDisabled ) {\n        return;\n      }\n\n      if (this.timer) {\n        clearTimeout(this.timer);\n      }\n\n      // If manual property is set, don't automatically change the button on click\n      if (!this.manual) {\n        this.phase = ASYNC_BUTTON_STATES.WAITING;\n      }\n\n      const cb: AsyncButtonCallback = (success) => {\n        this.done(success);\n      };\n\n      this.$emit('click', cb);\n    },\n\n    done(success: boolean | 'cancelled') {\n      if (success === 'cancelled') {\n        this.phase = ASYNC_BUTTON_STATES.ACTION;\n      } else {\n        this.phase = (success ? ASYNC_BUTTON_STATES.SUCCESS : ASYNC_BUTTON_STATES.ERROR );\n        this.timer = setTimeout(() => {\n          this.timerDone();\n        }, this.delay );\n      }\n    },\n\n    timerDone() {\n      if ( this.phase === ASYNC_BUTTON_STATES.SUCCESS || this.phase === ASYNC_BUTTON_STATES.ERROR ) {\n        this.phase = ASYNC_BUTTON_STATES.ACTION;\n      }\n    },\n\n    focus() {\n      (this.$refs.btn as HTMLElement).focus();\n    }\n  }\n});\n"]}]}